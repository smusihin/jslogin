var globalWebSocket;var Ext=Ext||{};Ext.manifest=Ext.manifest||{packages:{"binary-options-theme":{creator:"anonymous",extend:"ext-theme-gray",namespace:"Ext",type:"theme",version:"1.0.0"},cmd:{current:"6.2.0.103",version:"6.0.2.14"},ext:{creator:"Sencha",license:"gpl",type:"framework",version:"5.1.1.451"},"ext-theme-base":{creator:"Sencha",type:"theme",version:"5.0.0"},"ext-theme-classic":{creator:"Sencha",extend:"ext-theme-neutral",type:"theme",version:"5.0.0"},"ext-theme-gray":{creator:"Sencha",extend:"ext-theme-classic",type:"theme",version:"5.0.0"},"ext-theme-neutral":{creator:"Sencha",extend:"ext-theme-base",type:"theme",version:"5.0.0"},"sencha-core":{creator:"Sencha",type:"code",version:"5.0.0"}},js:[{path:"a-1.18.14.js"}],css:[{path:"resources/a-1.18.14.css"}],cache:{deltas:"deltas"},name:"BP",framework:"ext",theme:"binary-options-theme",loader:{cache:!0},id:"0ff536d6-b2bd-4c1b-837c-d0fc2d5920fb",profile:"",hash:"5789e1d89350517242c66ebae11791d6a4b225f0",resources:{path:"resources"}};var BP=BP||{};BP.controller||(BP.controller={}),BP.data||(BP.data={}),BP.logging||(BP.logging={}),BP.model||(BP.model={}),BP.overrides||(BP.overrides={}),BP.overrides.app||(BP.overrides.app={}),BP.overrides.dom||(BP.overrides.dom={}),BP.overrides.event||(BP.overrides.event={}),BP.overrides.form||(BP.overrides.form={}),BP.overrides.form.field||(BP.overrides.form.field={}),BP.overrides.form.trigger||(BP.overrides.form.trigger={}),BP.overrides.grid||(BP.overrides.grid={}),BP.overrides.grid.column||(BP.overrides.grid.column={}),BP.overrides.mixin||(BP.overrides.mixin={}),BP.overrides.panel||(BP.overrides.panel={}),BP.overrides.rtl||(BP.overrides.rtl={}),BP.overrides.toolbar||(BP.overrides.toolbar={}),BP.overrides.util||(BP.overrides.util={}),BP.overrides.window||(BP.overrides.window={}),BP.preference||(BP.preference={}),BP.settings||(BP.settings={}),BP.store||(BP.store={}),BP.transport||(BP.transport={}),BP.util||(BP.util={}),BP.ux||(BP.ux={}),BP.ux.component||(BP.ux.component={}),BP.ux.crypto||(BP.ux.crypto={}),BP.ux.data||(BP.ux.data={}),BP.ux.data.proxy||(BP.ux.data.proxy={}),BP.ux.mediator||(BP.ux.mediator={}),BP.ux.mediator.mixin||(BP.ux.mediator.mixin={}),BP.view||(BP.view={}),BP.view.button||(BP.view.button={}),BP.view.button.touch||(BP.view.button.touch={}),BP.view.chart||(BP.view.chart={}),BP.view.field||(BP.view.field={}),BP.view.form||(BP.view.form={}),BP.view.form.amount||(BP.view.form.amount={}),BP.view.form.captcha||(BP.view.form.captcha={}),BP.view.form.chain||(BP.view.form.chain={}),BP.view.form.conditions||(BP.view.form.conditions={}),BP.view.form.datetime||(BP.view.form.datetime={}),BP.view.form.field||(BP.view.form.field={}),BP.view.form.file||(BP.view.form.file={}),BP.view.form.instrument||(BP.view.form.instrument={}),BP.view.form.language||(BP.view.form.language={}),BP.view.form.pin||(BP.view.form.pin={}),BP.view.form.remember||(BP.view.form.remember={}),BP.view.form.time||(BP.view.form.time={}),BP.view.form.trigger||(BP.view.form.trigger={}),BP.view.grid||(BP.view.grid={}),BP.view.grid.executing||(BP.view.grid.executing={}),BP.view.grid.history||(BP.view.grid.history={}),BP.view.grid.pending||(BP.view.grid.pending={}),BP.view.login||(BP.view.login={}),BP.view.login.window||(BP.view.login.window={}),BP.view.main||(BP.view.main={}),BP.view.main.layouts||(BP.view.main.layouts={}),BP.view.main.news||(BP.view.main.news={}),BP.view.main.tabgroup||(BP.view.main.tabgroup={}),BP.view.main.window||(BP.view.main.window={}),BP.view.menu||(BP.view.menu={}),BP.view.menu.window||(BP.view.menu.window={}),BP.view.panel||(BP.view.panel={}),BP.view.panel.header||(BP.view.panel.header={}),BP.view.panel.history||(BP.view.panel.history={}),BP.view.panel.orders||(BP.view.panel.orders={}),BP.view.panel.touch||(BP.view.panel.touch={}),BP.view.panel.touch.window||(BP.view.panel.touch.window={}),BP.view.panel.touch.window.chart||(BP.view.panel.touch.window.chart={}),BP.view.panel.touch.window.level||(BP.view.panel.touch.window.level={}),BP.view.panel.trade||(BP.view.panel.trade={}),BP.view.picker||(BP.view.picker={}),BP.view.plugin||(BP.view.plugin={}),BP.view.registration||(BP.view.registration={}),BP.view.resizer||(BP.view.resizer={}),BP.view.selector||(BP.view.selector={}),BP.view.slider||(BP.view.slider={}),BP.view.template||(BP.view.template={}),BP.view.toolbar||(BP.view.toolbar={}),BP.view.window||(BP.view.window={}),BP.view.window.messages||(BP.view.window.messages={}),BP.view.window.orders||(BP.view.window.orders={}),BP.view.window.settings||(BP.view.window.settings={}),BP.view.window.settings.tabs||(BP.view.window.settings.tabs={}),BP.view.window.settings.window||(BP.view.window.settings.window={});var Ext=Ext||{};Ext.Crypto||(Ext.Crypto={}),Ext.Toolbar||(Ext.Toolbar={}),Ext.app||(Ext.app={}),Ext.app.bind||(Ext.app.bind={}),Ext.app.domain||(Ext.app.domain={}),Ext.app.route||(Ext.app.route={}),Ext.button||(Ext.button={}),Ext.classic||(Ext.classic={}),Ext.classic.toolbar||(Ext.classic.toolbar={}),Ext.container||(Ext.container={}),Ext.core||(Ext.core={}),Ext.data||(Ext.data={}),Ext.data.field||(Ext.data.field={}),Ext.data.flash||(Ext.data.flash={}),Ext.data.identifier||(Ext.data.identifier={}),Ext.data.matrix||(Ext.data.matrix={}),Ext.data.operation||(Ext.data.operation={}),Ext.data.proxy||(Ext.data.proxy={}),Ext.data.reader||(Ext.data.reader={}),Ext.data.schema||(Ext.data.schema={}),Ext.data.session||(Ext.data.session={}),Ext.data.validator||(Ext.data.validator={}),Ext.data.writer||(Ext.data.writer={}),Ext.dd||(Ext.dd={}),Ext.dom||(Ext.dom={}),Ext.dom.Element||(Ext.dom.Element={}),Ext.event||(Ext.event={}),Ext.event.gesture||(Ext.event.gesture={}),Ext.event.publisher||(Ext.event.publisher={}),Ext.form||(Ext.form={}),Ext.form.Action||(Ext.form.Action={}),Ext.form.action||(Ext.form.action={}),Ext.form.field||(Ext.form.field={}),Ext.form.trigger||(Ext.form.trigger={}),Ext.fx||(Ext.fx={}),Ext.fx.animation||(Ext.fx.animation={}),Ext.fx.easing||(Ext.fx.easing={}),Ext.fx.runner||(Ext.fx.runner={}),Ext.fx.target||(Ext.fx.target={}),Ext.grid||(Ext.grid={}),Ext.grid.column||(Ext.grid.column={}),Ext.grid.feature||(Ext.grid.feature={}),Ext.grid.header||(Ext.grid.header={}),Ext.grid.locking||(Ext.grid.locking={}),Ext.grid.plugin||(Ext.grid.plugin={}),Ext.layout||(Ext.layout={}),Ext.layout.boxOverflow||(Ext.layout.boxOverflow={}),Ext.layout.component||(Ext.layout.component={}),Ext.layout.component.field||(Ext.layout.component.field={}),Ext.layout.container||(Ext.layout.container={}),Ext.layout.container.border||(Ext.layout.container.border={}),Ext.layout.container.boxOverflow||(Ext.layout.container.boxOverflow={}),Ext.list||(Ext.list={}),Ext.menu||(Ext.menu={}),Ext.mixin||(Ext.mixin={}),Ext.overrides||(Ext.overrides={}),Ext.overrides.app||(Ext.overrides.app={}),Ext.overrides.app.domain||(Ext.overrides.app.domain={}),Ext.overrides.dom||(Ext.overrides.dom={}),Ext.overrides.event||(Ext.overrides.event={}),Ext.overrides.event.publisher||(Ext.overrides.event.publisher={}),Ext.overrides.plugin||(Ext.overrides.plugin={}),Ext.overrides.util||(Ext.overrides.util={}),Ext.panel||(Ext.panel={}),Ext.perf||(Ext.perf={}),Ext.picker||(Ext.picker={}),Ext.plugin||(Ext.plugin={}),Ext.resizer||(Ext.resizer={}),Ext.rtl||(Ext.rtl={}),Ext.rtl.button||(Ext.rtl.button={}),Ext.rtl.dd||(Ext.rtl.dd={}),Ext.rtl.dom||(Ext.rtl.dom={}),Ext.rtl.event||(Ext.rtl.event={}),Ext.rtl.form||(Ext.rtl.form={}),Ext.rtl.form.field||(Ext.rtl.form.field={}),Ext.rtl.grid||(Ext.rtl.grid={}),Ext.rtl.grid.column||(Ext.rtl.grid.column={}),Ext.rtl.grid.plugin||(Ext.rtl.grid.plugin={}),Ext.rtl.layout||(Ext.rtl.layout={}),Ext.rtl.layout.component||(Ext.rtl.layout.component={}),Ext.rtl.layout.container||(Ext.rtl.layout.container={}),Ext.rtl.layout.container.boxOverflow||(Ext.rtl.layout.container.boxOverflow={}),Ext.rtl.panel||(Ext.rtl.panel={}),Ext.rtl.resizer||(Ext.rtl.resizer={}),Ext.rtl.scroll||(Ext.rtl.scroll={}),Ext.rtl.slider||(Ext.rtl.slider={}),Ext.rtl.tab||(Ext.rtl.tab={}),Ext.rtl.tip||(Ext.rtl.tip={}),Ext.rtl.util||(Ext.rtl.util={}),Ext.rtl.view||(Ext.rtl.view={}),Ext.scroll||(Ext.scroll={}),Ext.selection||(Ext.selection={}),Ext.slider||(Ext.slider={}),Ext.state||(Ext.state={}),Ext.tab||(Ext.tab={}),Ext.theme||(Ext.theme={}),Ext.theme.classic||(Ext.theme.classic={}),Ext.theme.classic.toolbar||(Ext.theme.classic.toolbar={}),Ext.tip||(Ext.tip={}),Ext.toolbar||(Ext.toolbar={}),Ext.tree||(Ext.tree={}),Ext.util||(Ext.util={}),Ext.util.paintmonitor||(Ext.util.paintmonitor={}),Ext.util.sizemonitor||(Ext.util.sizemonitor={}),Ext.util.translatable||(Ext.util.translatable={}),Ext.ux||(Ext.ux={}),Ext.ux.form||(Ext.ux.form={}),Ext.view||(Ext.view={}),Ext.window||(Ext.window={}),function(e){var t,n,i,r,o,a,s,l,d,u,c=["constructor","toString","valueOf","toLocaleString"],h={},p={},f=0,g=function(){var g,m;for(i=Ext.Base,r=Ext.ClassManager,g=c.length;g-->0;)m=1<<g,p[h[m]=c[g]]=m;for(g in p)f|=p[g];if(f=~f,Function.prototype.$isFunction=1,u=!(!r||!r.addAlias),o=Ext.Class.getPreprocessor("config").fn,a=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn,s=Ext.Class.getPreprocessor("platformConfig")&&Ext.Class.getPreprocessor("platformConfig").fn,d=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn,l=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn,t=i.$staticMembers,!t){t=[];for(n in i)i.hasOwnProperty(n)&&t.push(n)}return e.derive=x,x.apply(this,arguments)},m=function(e,t,n){var i,r,o,a,s,l=n.enumerableMembers,d=e.prototype;if(t)if(u)e.addMembers(t);else{for(i in t)a=t[i],a&&a.$isFunction&&!a.$isClass&&a!==Ext.emptyFn&&a!==Ext.identityFn?(s=d.hasOwnProperty(i)&&d[i],s&&(a.$previous=s),d[i]=r=a,r.$owner=e,r.$name=i):d[i]=a;for(o=1;l;o<<=1)l&o&&(l&=~o,i=h[o],d[i]=r=t[i],r.$owner=e,r.$name=i)}},x=function(e,n,c,h,p,g,x,v,y,E,b){var C,w,S,T,P,I,k,B,M,D,R,A,F,L=function(){return this.constructor.apply(this,arguments)||null},O=L,V={enumerableMembers:h&f,onCreated:b,onBeforeCreated:m,aliases:v},N=c.alternateClassName||[],H=Ext.global,z=r.alternateToName||r.maps.alternateToName,W=r.nameToAlternates||r.maps.nameToAlternates;for(S=t.length;S-->0;)k=t[S],L[k]=i[k];if(c.$isFunction&&(c=c(L)),V.data=c,M=c.statics,delete c.statics,c.$className=e,"$className"in c&&(L.$className=c.$className),L.extend(n),B=L.prototype,L.xtype=c.xtype=p[0],p&&(B.xtypes=p),B.xtypesChain=g,B.xtypesMap=x,c.alias=v,O.triggerExtended(L,c,V),c.onClassExtended&&(L.onExtended(c.onClassExtended,L),delete c.onClassExtended),c.privates&&d&&d.call(Ext.Class,L,c),M)if(u)L.addStatics(M);else for(D in M)M.hasOwnProperty(D)&&(F=M[D],F&&F.$isFunction&&!F.$isClass&&F!==Ext.emptyFn&&F!==Ext.identityFn&&(L[D]=A=F,A.$owner=L,A.$name=D),L[D]=F);for(c.inheritableStatics&&(L.addInheritableStatics(c.inheritableStatics),delete c.inheritableStatics),B.onClassExtended&&(O.onExtended(B.onClassExtended,O),delete B.onClassExtended),c.config&&o.call(Ext.Class,L,c),c.cachedConfig&&a&&(a.call(Ext.Class,L,c),delete c.cachedConfig),c.platformConfig&&s&&(s.call(Ext.Class,L,c),delete c.platformConfig),c.deprecated&&l&&l.call(Ext.ClassManager,e,L,c),V.onBeforeCreated(L,V.data,V),S=0,P=y&&y.length;P>S;++S)L.mixin.apply(L,y[S]);for(S=0,P=v.length;P>S;S++)C=v[S],r.setAlias?r.setAlias(L,C):r.addAlias(L,C);for(c.singleton&&(O=new L),N instanceof Array||(N=[N]),R=r.getName(O),S=0,T=N.length;T>S;S++)w=N[S],r.classes[w]=O,u?r.addAlternate(L,w):R&&(z[w]=R,N=W[R]||(W[R]=[]),N.push(w));for(S=0,P=E.length;P>S;S+=2)I=E[S],I||(I=H),I[E[S+1]]=O;return r.classes[e]=O,u||R&&R!==e&&(z[e]=R,N=W[R]||(W[R]=[]),N.push(e)),delete B.alternateClassName,V.onCreated&&V.onCreated.call(O,O),e&&r.triggerCreated(e),O};e.derive=g}(Ext.cmd={});var Ext=Ext||{};Ext.Boot=Ext.Boot||function(e){function t(e){if(e.$isRequest)return e;var e=e.url?e:{url:e},t=e.url,n=t.charAt?[t]:t,i=e.charset||g.config.charset;h(this,e),delete this.url,this.urls=n,this.charset=i}function n(e){if(e.$isEntry)return e;var t,n,i=e.charset||g.config.charset,r=Ext.manifest,o=r&&r.loader,a=void 0!==e.cache?e.cache:o&&o.cache;g.config.disableCaching&&(void 0===a&&(a=!g.config.disableCaching),a===!1?t=+new Date:a!==!0&&(t=a),t&&(n=o&&o.cacheParam||g.config.disableCachingParam,t=n+"="+t)),h(this,e),this.charset=i,this.buster=t,this.requests=[]}var i=document,r=[],o={disableCaching:/[?&](?:cache|disableCacheBuster)\b/i.test(location.search)||!/http[s]?\:/i.test(location.href)||/(^|[ ;])ext-cache=1/.test(i.cookie)?!1:!0,disableCachingParam:"_dc",loadDelay:!1,preserveScripts:!0,charset:"UTF-8"},a={},s=/\.css(?:\?|$)/i,l=i.createElement("a"),d="undefined"!=typeof window,u={browser:d,node:!d&&"function"==typeof require,phantom:window&&(window._phantom||window.callPhantom)||/PhantomJS/.test(window.navigator.userAgent)},c=Ext.platformTags={},h=function(e,t,n){if(n&&h(e,n),e&&t&&"object"==typeof t)for(var i in t)e[i]=t[i];return e},p=function(){var e,t,n,i,r=!1,o=Array.prototype.shift.call(arguments);for("boolean"==typeof arguments[arguments.length-1]&&(r=Array.prototype.pop.call(arguments)),n=arguments.length,e=0;n>e;e++)if(i=arguments[e],"object"==typeof i)for(t in i)o[r?t.toLowerCase():t]=i[t];return o},f="function"==typeof Object.keys?function(e){return e?Object.keys(e):[]}:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},g={loading:0,loaded:0,apply:h,env:u,config:o,assetConfig:a,scripts:{},currentFile:null,suspendedQueue:[],currentRequest:null,syncMode:!1,useElements:!0,listeners:[],Request:t,Entry:n,allowMultipleBrowsers:!1,browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",edge:"Edge",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},osNames:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chromeOS:"ChromeOS",other:"Other"},browserPrefixes:{ie:"MSIE ",edge:"Edge/",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"},browserPriority:["edge","opera","dolfin","webosbrowser","silk","chromeiOS","chromeMobile","ie","firefox","safari","chrome"],osPrefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chromeOS:"CrOS "},fallbackOSPrefixes:{windows:"win",mac:"mac",linux:"linux"},devicePrefixes:{iPhone:"iPhone",iPod:"iPod",iPad:"iPad"},maxIEVersion:12,detectPlatformTags:function(){var e=this,t=navigator.userAgent,n=/Mobile(\/|\s)/.test(t),i=document.createElement("div"),r=function(e,t){void 0===t&&(t=window);var n="on"+e.toLowerCase(),r=n in i;return r||i.setAttribute&&i.removeAttribute&&(i.setAttribute(n,""),r="function"==typeof i[n],void 0!==i[n]&&(i[n]=void 0),i.removeAttribute(n)),r},o=function(){var n,i,r,o,a,s,l,d,u,c={};for(s=e.browserPriority.length,a=0;s>a;a++)o=e.browserPriority[a],u?d=0:(r=e.browserPrefixes[o],l=t.match(RegExp("("+r+")([\\w\\._]+)")),d=l&&l.length>1?parseInt(l[2]):0,d&&(u=!0)),c[o]=d;if(c.ie){var h=document.documentMode;h>=8&&(c.ie=h)}for(d=c.ie||!1,n=Math.max(d,e.maxIEVersion),a=8;n>=a;++a)i="ie"+a,c[i+"m"]=d?a>=d:0,c[i]=d?d===a:0,c[i+"p"]=d?d>=a:0;return c},a=function(){var n,i,r,o,a,s,l,d,u,c={};for(r=f(e.osPrefixes),a=r.length,o=0,u=0;a>o;o++)i=r[o],n=e.osPrefixes[i],s=t.match(RegExp("("+n+")([^\\s;]+)")),l=s?s[1]:null,d=!l||"HTC_"!==l&&"Silk/"!==l?s&&s.length>1?parseFloat(s[s.length-1]):0:2.3,d&&u++,c[i]=d;for(r=f(e.fallbackOSPrefixes),a=r.length,o=0;a>o;o++)i=r[o],0===u?(n=e.fallbackOSPrefixes[i],s=t.toLowerCase().match(RegExp(n)),c[i]=s?!0:0):c[i]=0;return c},s=function(){var n,i,r,o,a,s,l={};for(r=f(e.devicePrefixes),a=r.length,o=0;a>o;o++)i=r[o],n=e.devicePrefixes[i],s=t.match(RegExp(n)),l[i]=s?!0:0;return l},l=o(),d=a(),u=s(),h=g.loadPlatformsParam();p(c,l,d,u,h,!0),c.phone=!!(c.iphone||c.ipod||!c.silk&&c.android&&(c.android<3||n)||c.blackberry&&n||c.windowsphone),c.tablet=!(c.phone||!(c.ipad||c.android||c.silk||c.rimtablet||c.ie10&&/; Touch/.test(t))),c.touch=r("touchend")||navigator.maxTouchPoints||navigator.msMaxTouchPoints,c.desktop=!c.phone&&!c.tablet,c.cordova=c.phonegap=!!(window.PhoneGap||window.Cordova||window.cordova),c.webview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(t),c.androidstock=c.android<=4.3&&(c.safari||c.silk),p(c,h,!0)},loadPlatformsParam:function(){var e,t,n,i,r,o,a=window.location.search.substr(1),s=a.split("&"),l={},d={};for(e=0;e<s.length;e++)t=s[e].split("="),l[t[0]]=t[1];if(l.platformTags)for(t=l.platformTags.split(","),n=t.length,e=0;n>e;e++)i=t[e].split(":"),r=i[0],o=!0,i.length>1&&(o=i[1],("false"===o||"0"===o)&&(o=!1)),d[r]=o;return d},filterPlatform:function(e,t){e=r.concat(e||r),t=r.concat(t||r);var n,i,o=e.length,a=t.length,s=!o&&a;for(n=0;o>n&&!s;n++)i=e[n],s=!!c[i];for(n=0;a>n&&s;n++)i=t[n],s=!c[i];return s},init:function(){var e,t,r,o,a,s,l,d=i.getElementsByTagName("script"),u=d[0],c=d.length,h=/\/ext(\-[a-z\-]+)?\.js$/;g.hasReadyState="readyState"in u,g.hasAsync="async"in u,g.hasDefer="defer"in u,g.hasOnLoad="onload"in u,g.isIE8=g.hasReadyState&&!g.hasAsync&&g.hasDefer&&!g.hasOnLoad,g.isIE9=g.hasReadyState&&!g.hasAsync&&g.hasDefer&&g.hasOnLoad,g.isIE10p=g.hasReadyState&&g.hasAsync&&g.hasDefer&&g.hasOnLoad,g.isIE10=10===Function("/*@cc_on return @_jscript_version @*/")(),g.isIE10m=g.isIE10||g.isIE9||g.isIE8,g.isIE11=g.isIE10p&&!g.isIE10;for(s=0;c>s;s++)t=(u=d[s]).src,t&&(r=u.readyState||null,!o&&h.test(t)&&(o=t),g.scripts[a=g.canonicalUrl(t)]||(e=new n({key:a,url:t,done:null===r||"loaded"===r||"complete"===r,el:u,prop:"src"})));o||(u=d[d.length-1],o=u.src),g.baseUrl=o.substring(0,o.lastIndexOf("/")+1),l=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),g.origin=l,g.detectPlatformTags(),Ext.filterPlatform=g.filterPlatform},canonicalUrl:function(e){l.href=e;var t,n,i=l.href,r=o.disableCachingParam,a=r?i.indexOf(r+"="):-1;return a>0&&("?"===(t=i.charAt(a-1))||"&"===t)&&(n=i.indexOf("&",a),n=0>n?"":i.substring(n),n&&"?"===t&&(++a,n=n.substring(1)),i=i.substring(0,a-1)+n),i},getConfig:function(e){return e?g.config[e]:g.config},setConfig:function(e,t){if("string"==typeof e)g.config[e]=t;else for(var n in e)g.setConfig(n,e[n]);return g},getHead:function(){return g.docHead||(g.docHead=i.head||i.getElementsByTagName("head")[0])},create:function(e,t,i){var r=i||{};return r.url=e,r.key=t,g.scripts[t]=new n(r)},getEntry:function(e,t,n){var i,r;return i=n?e:g.canonicalUrl(e),r=g.scripts[i],r||(r=g.create(e,i,t),n&&(r.canonicalPath=!0)),r},registerContent:function(e,t,n){var i={content:n,loaded:!0,css:"css"===t};return g.getEntry(e,i)},processRequest:function(e,t){e.loadEntries(t)},load:function(e){var e=new t(e);return e.sync||g.syncMode?g.loadSync(e):(g.currentRequest?(e.getEntries(),g.suspendedQueue.push(e)):(g.currentRequest=e,g.processRequest(e,!1)),g)},loadSync:function(e){var e=new t(e);return g.syncMode++,g.processRequest(e,!0),g.syncMode--,g},loadBasePrefix:function(e){return e=new t(e),e.prependBaseUrl=!0,g.load(e)},loadSyncBasePrefix:function(e){return e=new t(e),e.prependBaseUrl=!0,g.loadSync(e)},requestComplete:function(e){var t;if(g.currentRequest===e)for(g.currentRequest=null;g.suspendedQueue.length>0;)if(t=g.suspendedQueue.shift(),!t.done){g.load(t);break}g.currentRequest||0!=g.suspendedQueue.length||g.fireListeners()},isLoading:function(){return!g.currentRequest&&0==g.suspendedQueue.length},fireListeners:function(){for(var e;g.isLoading()&&(e=g.listeners.shift());)e()},onBootReady:function(e){g.isLoading()?g.listeners.push(e):e()},getPathsFromIndexes:function(e,n){if(!("length"in e)){var i,r=[];for(i in e)isNaN(+i)||(r[+i]=e[i]);e=r}return t.prototype.getPathsFromIndexes(e,n)},createLoadOrderMap:function(e){return t.prototype.createLoadOrderMap(e)},fetch:function(t,n,i,r){r=void 0===r?!!n:r;var o,a,s,l=new XMLHttpRequest,d=!1,u=function(){l&&4==l.readyState&&(a=1223===l.status?204:0!==l.status||"file:"!==(self.location||{}).protocol&&"ionp:"!==(self.location||{}).protocol?l.status:200,s=l.responseText,o={content:s,status:a,exception:d},n&&n.call(i,o),l.onreadystatechange=e,l=null)};r&&(l.onreadystatechange=u);try{l.open("GET",t,r),l.send(null)}catch(c){return d=c,u(),o}return r||u(),o},notifyAll:function(e){e.notifyRequests()}};return t.prototype={$isRequest:!0,createLoadOrderMap:function(e){var t,n,i=e.length,r={};for(t=0;i>t;t++)n=e[t],r[n.path]=n;return r},getLoadIndexes:function(e,t,n,i,r){var o,a,s,l,d,u,c=[],o=[e],h=e.idx;if(t[h])return c;for(t[h]=c[h]=!0;e=o.shift();)if(a=e.canonicalPath?g.getEntry(e.path,null,!0):g.getEntry(this.prepareUrl(e.path)),!r||!a.done)for(s=i&&e.uses&&e.uses.length?e.requires.concat(e.uses):e.requires,d=0,u=s.length;u>d;d++)l=s[d],t[l]||(t[l]=c[l]=!0,o.push(n[l]));return c},getPathsFromIndexes:function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n]&&r.push(t[n].path);return r},expandUrl:function(e,t,n,i,r,o){var a,s;return t&&(a=n[e],a&&(s=this.getLoadIndexes(a,i,t,r,o),s.length))?this.getPathsFromIndexes(s,t):[e]},expandUrls:function(e,t){var n,i,r,o,a,s,l,d=this,u=d.loadOrder,c=[],h={},p=[];for("string"==typeof e&&(e=[e]),u&&(n=d.loadOrderMap,n||(n=d.loadOrderMap=d.createLoadOrderMap(u))),r=0,o=e.length;o>r;r++)for(i=this.expandUrl(e[r],u,n,p,t,!1),a=0,s=i.length;s>a;a++)l=i[a],h[l]||(h[l]=!0,c.push(l));return 0===c.length&&(c=e),c},expandLoadOrder:function(){var e,t=this,n=t.urls;return t.expanded?e=n:(e=this.expandUrls(n,!0),t.expanded=!0),t.urls=e,n.length!=e.length&&(t.sequential=!0),t},getUrls:function(){return this.expandLoadOrder(),this.urls},prepareUrl:function(e){return this.prependBaseUrl?g.baseUrl+e:e},getEntries:function(){var e,t,n,i,r,o,a=this,s=a.entries;if(!s){for(s=[],r=a.getUrls(),a.loadOrder&&(e=a.loadOrderMap),n=0;n<r.length;n++)o=a.prepareUrl(r[n]),e&&(t=e[o]),i=g.getEntry(o,{buster:a.buster,charset:a.charset},t&&t.canonicalPath),i.requests.push(a),s.push(i);a.entries=s}return s},loadEntries:function(e){var t,n,i,r,o=this,n=o.getEntries(),a=n.length,s=o.loadStart||0;for(void 0!==e&&(o.sync=e),o.loaded=o.loaded||0,o.loading=o.loading||a,r=s;a>r;r++)if(i=n[r],t=i.loaded?!0:n[r].load(o.sync),!t){o.loadStart=r,i.onDone(function(){o.loadEntries(e)});break}o.processLoadedEntries()},processLoadedEntries:function(){var e,t,n=this,i=n.getEntries(),r=i.length,o=n.startIndex||0;if(!n.done){for(e=o;r>e;e++){if(t=i[e],!t.loaded)return void(n.startIndex=e);t.evaluated||t.evaluate(),t.error&&(n.error=!0)}n.notify()}},notify:function(){var e=this;if(!e.done){var t=e.error,n=e[t?"failure":"success"],i="delay"in e?e.delay:t?1:g.config.chainDelay,r=e.scope||e;e.done=!0,n&&(0===i||i>0?setTimeout(function(){n.call(r,e)},i):n.call(r,e)),e.fireListeners(),g.requestComplete(e)}},onDone:function(e){var t=this,n=t.listeners||(t.listeners=[]);t.done?e(t):n.push(e)},fireListeners:function(){var e,t=this.listeners;if(t)for(;e=t.shift();)e(this)}},n.prototype={$isEntry:!0,done:!1,evaluated:!1,loaded:!1,isCrossDomain:function(){var e=this;return void 0===e.crossDomain&&(e.crossDomain=0!==e.getLoadUrl().indexOf(g.origin)),e.crossDomain},isCss:function(){var e=this;if(void 0===e.css)if(e.url){var t=g.assetConfig[e.url];e.css=t?"css"===t.type:s.test(e.url)}else e.css=!1;return this.css},getElement:function(e){var t=this,n=t.el;return n||(t.isCss()?(e=e||"link",n=i.createElement(e),"link"==e?(n.rel="stylesheet",t.prop="href"):t.prop="textContent",n.type="text/css"):(e=e||"script",n=i.createElement(e),n.type="text/javascript",t.prop="src",t.charset&&(n.charset=t.charset),g.hasAsync&&(n.async=!1)),t.el=n),n},getLoadUrl:function(){var e,t=this;return e=t.canonicalPath?t.url:g.canonicalUrl(t.url),t.loadUrl||(t.loadUrl=t.buster?e+(-1===e.indexOf("?")?"?":"&")+t.buster:e),t.loadUrl},fetch:function(e){var t=this.getLoadUrl(),n=!!e.async,i=e.complete;g.fetch(t,i,this,n)},onContentLoaded:function(e){var t=this,n=e.status,i=e.content,r=e.exception;this.getLoadUrl(),t.loaded=!0,(!r&&0!==n||u.phantom)&&(n>=200&&300>n||304===n||u.phantom||0===n&&i.length>0)?t.content=i:(t.error=!0,t.evaluated=!0)},createLoadElement:function(e){var t=this,n=t.getElement();t.preserve=!0,n.onerror=function(){t.error=!0,e&&(e(),e=null)},g.isIE10m?n.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&e&&(e(),e=this.onreadystatechange=this.onerror=null)}:n.onload=function(){e(),e=this.onload=this.onerror=null},n[t.prop]=t.getLoadUrl()},onLoadElementReady:function(){g.getHead().appendChild(this.getElement()),this.evaluated=!0},inject:function(e){var t,n,r,o,a=this,s=g.getHead(),l=a.url,d=a.key;return a.isCss()?(a.preserve=!0,o=d.substring(0,d.lastIndexOf("/")+1),t=i.createElement("base"),t.href=o,s.firstChild?s.insertBefore(t,s.firstChild):s.appendChild(t),t.href=t.href,l&&(e+="\n/*# sourceURL="+d+" */"),n=a.getElement("style"),r="styleSheet"in n,s.appendChild(t),r?(s.appendChild(n),n.styleSheet.cssText=e):(n.textContent=e,s.appendChild(n)),s.removeChild(t)):(l&&(e+="\n//# sourceURL="+d),Ext.globalEval(e)),a},loadCrossDomain:function(){var t=this,n=function(){t.el.onerror=t.el.onload=e,t.el=null,t.loaded=t.evaluated=t.done=!0,t.notifyRequests()};return t.createLoadElement(function(){n()}),t.evaluateLoadElement(),!1},loadElement:function(){var t=this,n=function(){t.el.onerror=t.el.onload=e,t.el=null,t.loaded=t.evaluated=t.done=!0,t.notifyRequests()};return t.createLoadElement(function(){n()}),t.evaluateLoadElement(),!0},loadSync:function(){var e=this;e.fetch({async:!1,complete:function(t){e.onContentLoaded(t)}}),e.evaluate(),e.notifyRequests()},load:function(e){var t=this;if(!t.loaded){if(t.loading)return!1;if(t.loading=!0,e)t.loadSync();else{if(g.isIE10||t.isCrossDomain())return t.loadCrossDomain();if(!t.isCss()&&g.hasReadyState)t.createLoadElement(function(){t.loaded=!0,t.notifyRequests()});else{if(!(!g.useElements||t.isCss()&&u.phantom))return t.loadElement();t.fetch({async:!e,complete:function(e){t.onContentLoaded(e),t.notifyRequests()}})}}}return!0},evaluateContent:function(){this.inject(this.content),this.content=null},evaluateLoadElement:function(){g.getHead().appendChild(this.getElement())},evaluate:function(){var e=this;if(!e.evaluated){if(e.evaluating)return;e.evaluating=!0,void 0!==e.content?e.evaluateContent():e.error||e.evaluateLoadElement(),e.evaluated=e.done=!0,e.cleanup()}},cleanup:function(){var t,n=this,i=n.el;if(i){if(!n.preserve){n.el=null,i.parentNode.removeChild(i);for(t in i)try{t!==n.prop&&(i[t]=null),delete i[t]}catch(r){}}i.onload=i.onerror=i.onreadystatechange=e}},notifyRequests:function(){var e,t,n=this.requests,i=n.length;for(e=0;i>e;e++)t=n[e],t.processLoadedEntries();this.done&&this.fireListeners()},onDone:function(e){var t=this,n=t.listeners||(t.listeners=[]);t.done?e(t):n.push(e)},fireListeners:function(){var e,t=this.listeners;if(t&&t.length>0)for(;e=t.shift();)e(this)}},Ext.disableCacheBuster=function(e,t){var n=new Date;n.setTime(n.getTime()+24*(e?3650:-1)*60*60*1e3),n=n.toGMTString(),i.cookie="ext-cache=1; expires="+n+"; path="+(t||"/")},g.init(),g}(function(){}),Ext.globalEval=Ext.globalEval||(this.execScript?function(e){execScript(e)}:function(e){eval.call(window,e)}),Function.prototype.bind||!function(){var e=Array.prototype.slice,t=function(t){var n=e.call(arguments,1),i=this;return n.length?function(){var r=arguments;return i.apply(t,r.length?n.concat(e.call(r)):n)}:(n=null,function(){return i.apply(t,arguments)})};Function.prototype.bind=t,t.$extjs=!0}(),Ext.setResourcePath=function(e,t){var n=Ext.manifest||(Ext.manifest={}),i=n.resources||(n.resources={});n&&("string"!=typeof e?Ext.apply(i,e):i[e]=t,n.resources=i)},Ext.getResourcePath=function(e,t,n){"string"!=typeof e&&(t=e.pool,n=e.packageName,e=e.path);var i=Ext.manifest,r=i&&i.resources,o=r[t],a=[];return null==o&&(o=r.path,null==o&&(o="resources")),o&&a.push(o),n&&a.push(n),a.push(e),a.join("/")};var Ext=Ext||{};Ext._startTime=Date.now?Date.now():+new Date,function(){var e,t=this,n=Object.prototype,i=n.toString,r=["valueOf","toLocaleString","toString","constructor"],o=function(){},a=function(){},s=function(e){return e},l=function(){var e=l.caller.caller;return e.$owner.prototype[e.$name].apply(this,arguments)},d=Ext.manifest||{},u=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,c=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=t,o.$nullFn=s.$nullFn=o.$emptyFn=s.$identityFn=a.$nullFn=!0,a.$privacy="framework",Ext.suspendLayouts=Ext.resumeLayouts=o;for(e in{toString:1})r=null;Ext.enumerables=r,Ext.apply=function(e,t,n){if(n&&Ext.apply(e,n),e&&t&&"object"==typeof t){var i,o,a;for(i in t)e[i]=t[i];if(r)for(o=r.length;o--;)a=r[o],t.hasOwnProperty(a)&&(e[a]=t[a])}return e},Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{}),Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:!1,enableListenerCollection:!0,name:Ext.sandboxName||"Ext",privateFn:a,emptyFn:o,identityFn:s,frameStartTime:+new Date,manifest:d,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(e){return"#"+e},id:function(e,t){if(e&&e.id)return e.id;var n=(t||Ext.idPrefix)+ ++Ext.idSeed;return e&&(e.id=n),n},returnId:function(e){return e.getId()},returnTrue:function(){return!0},emptyString:new String,baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(Moz.+|MS.+|webkit.+)/,canonicalEventName:function(e){return Ext.$eventNameMap[e]||(Ext.$eventNameMap[e]=Ext.$vendorEventRe.test(e)?e:e.toLowerCase())},applyIf:function(e,t){var n;if(e)for(n in t)void 0===e[n]&&(e[n]=t[n]);return e},now:t.performance&&t.performance.now?function(){return performance.now()}:Date.now||(Date.now=function(){return+new Date}),destroy:function(){var e,t,n=arguments.length;for(e=0;n>e;e++)t=arguments[e],t&&(Ext.isArray(t)?this.destroy.apply(this,t):Ext.isFunction(t.destroy)&&t.destroy());return null},destroyMembers:function(e){for(var t,n,i=1,r=arguments,o=r.length;o>i;i++)t=e[n=r[i]],null!=t&&(e[n]=Ext.destroy(t))},override:function(e,t){if(e.$isClass)e.override(t);else if("function"==typeof e)Ext.apply(e.prototype,t);else{var n,i,r=e.self;if(r&&r.$isClass)for(n in t)t.hasOwnProperty(n)&&(i=t[n],"function"==typeof i&&(i.$name=n,i.$owner=r,i.$previous=e.hasOwnProperty(n)?e[n]:l),e[n]=i);else Ext.apply(e,t)}return e},valueFrom:function(e,t,n){return Ext.isEmpty(e,n)?t:e},isEmpty:function(e,t){return null==e||(t?!1:""===e)||Ext.isArray(e)&&0===e.length},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===i.call(e)},isDate:function(e){return"[object Date]"===i.call(e)},isMSDate:function(e){return Ext.isString(e)?c.test(e):!1},isObject:"[object Object]"===i.call(null)?function(e){return null!==e&&void 0!==e&&"[object Object]"===i.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===i.call(e)},isSimpleObject:function(e){return e instanceof Object&&e.constructor===Object},isPrimitive:function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},isFunction:"undefined"!=typeof document&&"function"==typeof document.getElementsByTagName("body")?function(e){return!!e&&"[object Function]"===i.call(e)}:function(e){return!!e&&"function"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isElement:function(e){return e?1===e.nodeType:!1},isTextNode:function(e){return e?"#text"===e.nodeName:!1},isDefined:function(e){return void 0!==e},isIterable:function(e){return!e||"number"!=typeof e.length||"string"==typeof e||Ext.isFunction(e)?!1:e.propertyIsEnumerable?e.hasOwnProperty("length")&&!e.propertyIsEnumerable("length")?!0:u.test(i.call(e)):!!e.item;
},isDebugEnabled:o,clone:function(e){if(null===e||void 0===e)return e;if(e.nodeType&&e.cloneNode)return e.cloneNode(!0);var t,n,o,a,s,l=i.call(e);if("[object Date]"===l)return new Date(e.getTime());if("[object Array]"===l)for(t=e.length,a=[];t--;)a[t]=Ext.clone(e[t]);else if("[object Object]"===l&&e.constructor===Object){a={};for(s in e)a[s]=Ext.clone(e[s]);if(r)for(n=r.length;n--;)o=r[n],e.hasOwnProperty(o)&&(a[o]=e[o])}return a||e},getUniqueGlobalNamespace:function(){var e,n=this.uniqueGlobalNamespace;if(void 0===n){e=0;do n="ExtBox"+ ++e;while(void 0!==t[n]);t[n]=Ext,this.uniqueGlobalNamespace=n}return n},functionFactoryCache:{},cacheableFunctionFactory:function(){var e,t,n,i=this,r=Array.prototype.slice.call(arguments),o=i.functionFactoryCache;return Ext.isSandboxed&&(n=r.length,n>0&&(n--,r[n]="var Ext=window."+Ext.name+";"+r[n])),e=r.join(""),t=o[e],t||(t=Function.prototype.constructor.apply(Function.prototype,r),o[e]=t),t},functionFactory:function(){var e,t=Array.prototype.slice.call(arguments);return Ext.isSandboxed&&(e=t.length,e>0&&(e--,t[e]="var Ext=window."+Ext.name+";"+t[e])),Function.prototype.constructor.apply(Function.prototype,t)},Logger:{verbose:o,log:o,info:o,warn:o,error:function(e){throw Error(e)},deprecate:o},getElementById:function(e){return document.getElementById(e)},splitAndUnescape:function(){var e={};return function(t,n){if(!t)return[];if(!n)return[t];var i,r,o=e[n]||(e[n]=RegExp("\\\\"+n,"g")),a=[];for(i=t.split(n);void 0!==(r=i.shift());){for(;"\\"===r.charAt(r.length-1)&&i.length>0;)r=r+n+i.shift();r=r.replace(o,n),a.push(r)}return a}}()}),Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=!0}(),function(){function e(){var e=this,t=e.sourceClass,n=e.sourceMethod,i=e.msg;return n&&(i?(n+="(): ",n+=i):n+="()"),t&&(n=n?t+"."+n:t),n||i||""}Ext.Error=function(t){Ext.isString(t)&&(t={msg:t});var n=Error();return Ext.apply(n,t),n.message=n.message||n.msg,n.toString=e,n},Ext.apply(Ext.Error,{ignore:!1,raise:function(t){t=t||{},Ext.isString(t)&&(t={msg:t});var n,i,r=this,o=r.raise.caller;if(o&&(!t.sourceMethod&&(i=o.$name)&&(t.sourceMethod=i),!t.sourceClass&&(i=o.$owner)&&(i=i.$className)&&(t.sourceClass=i)),r.handle(t)!==!0)throw n=e.call(t),new Ext.Error(t)},handle:function(){return this.ignore}})}(),Ext.deprecated=function(){return Ext.emptyFn},Ext.Array=function(){function e(e,t){var n,i=e.length,r=Array(i);for(n=0;i>n;n++)r[n]=n;for(r.sort(function(n,i){return t(e[n],e[i])||n-i}),n=0;i>n;n++)r[n]=e[r[n]];for(n=0;i>n;n++)e[n]=r[n];return e}var t=Array.prototype,n=t.slice,i=function(){var e,t=[],n=20;if(!t.splice)return!1;for(;n--;)t.push("A");return t.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F"),e=t.length,t.splice(13,0,"XXX"),e+1!==t.length?!1:!0}(),r="indexOf"in t,o=!0;try{"undefined"!=typeof document&&n.call(document.getElementsByTagName("body"))}catch(a){o=!1}var s=function(e,t){return 0>t?Math.max(0,e.length+t):Math.min(e.length,t)},l=function(e,t,n,i){var r=i?i.length:0,o=e.length,a=s(e,t);if(a===o)r&&e.push.apply(e,i);else{var l,d=Math.min(n,o-a),u=a+d,c=u+r-d,h=o-u,p=o-d;if(u>c)for(l=0;h>l;++l)e[c+l]=e[u+l];else if(c>u)for(l=h;l--;)e[c+l]=e[u+l];if(r&&a===p)e.length=p,e.push.apply(e,i);else for(e.length=p+r,l=0;r>l;++l)e[a+l]=i[l]}return e},d=function(e,t,n,i){return i&&i.length?0!==t||n?t<e.length?e.splice.apply(e,[t,n].concat(i)):e.push.apply(e,i):e.unshift.apply(e,i):e.splice(t,n),e},u=function(e,t,n){return l(e,t,n)},c=function(e,t,n){return e.splice(t,n),e},h=function(e,t,i){var r=s(e,t),o=e.slice(t,s(e,r+i));return arguments.length<4?l(e,r,i):l(e,r,i,n.call(arguments,3)),o},p=function(e){return e.splice.apply(e,n.call(arguments,1))},f=i?c:u,g=i?d:l,m=i?p:h,x={binarySearch:function(e,t,n,i,r){var o,a,s=e.length;for(n instanceof Function?(r=n,n=0,i=s):i instanceof Function?(r=i,i=s):(void 0===n&&(n=0),void 0===i&&(i=s),r=r||x.lexicalCompare),--i;i>=n;)o=n+i>>1,a=r(t,e[o]),a>=0?n=o+1:0>a&&(i=o-1);return n},defaultCompare:function(e,t){return t>e?-1:e>t?1:0},lexicalCompare:function(e,t){return e+="",t+="",t>e?-1:e>t?1:0},each:function(e,t,n,i){e=x.from(e);var r,o=e.length;if(i!==!0){for(r=0;o>r;r++)if(t.call(n||e[r],e[r],r,e)===!1)return r}else for(r=o-1;r>-1;r--)if(t.call(n||e[r],e[r],r,e)===!1)return r;return!0},forEach:"forEach"in t?function(e,t,n){return e.forEach(t,n)}:function(e,t,n){for(var i=0,r=e.length;r>i;i++)t.call(n,e[i],i,e)},indexOf:r?function(e,n,i){return t.indexOf.call(e,n,i)}:function(e,t,n){var i,r=e.length;for(i=0>n?Math.max(0,r+n):n||0;r>i;i++)if(e[i]===t)return i;return-1},contains:r?function(e,n){return-1!==t.indexOf.call(e,n)}:function(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1},toArray:function(e,t,i){if(!e||!e.length)return[];if("string"==typeof e&&(e=e.split("")),o)return n.call(e,t||0,i||e.length);var r,a=[];for(t=t||0,i=i?0>i?e.length+i:i:e.length,r=t;i>r;r++)a.push(e[r]);return a},pluck:function(e,t){var n,i,r,o=[];for(n=0,i=e.length;i>n;n++)r=e[n],o.push(r[t]);return o},map:"map"in t?function(e,t,n){return e.map(t,n)}:function(e,t,n){for(var i=[],r=0,o=e.length;o>r;r++)i[r]=t.call(n,e[r],r,e);return i},every:"every"in t?function(e,t,n){return e.every(t,n)}:function(e,t,n){for(var i=0,r=e.length;r>i;++i)if(!t.call(n,e[i],i,e))return!1;return!0},some:"some"in t?function(e,t,n){return e.some(t,n)}:function(e,t,n){for(var i=0,r=e.length;r>i;++i)if(t.call(n,e[i],i,e))return!0;return!1},equals:function(e,t){var n,i=e.length,r=t.length;if(e===t)return!0;if(i!==r)return!1;for(n=0;i>n;++n)if(e[n]!==t[n])return!1;return!0},clean:function(e){for(var t,n=[],i=0,r=e.length;r>i;i++)t=e[i],Ext.isEmpty(t)||n.push(t);return n},unique:function(e){for(var t,n=[],i=0,r=e.length;r>i;i++)t=e[i],-1===x.indexOf(n,t)&&n.push(t);return n},filter:"filter"in t?function(e,t,n){return e.filter(t,n)}:function(e,t,n){for(var i=[],r=0,o=e.length;o>r;r++)t.call(n,e[r],r,e)&&i.push(e[r]);return i},findBy:function(e,t,n){for(var i=0,r=e.length;r>i;i++)if(t.call(n||e,e[i],i))return e[i];return null},from:function(e,t){if(void 0===e||null===e)return[];if(Ext.isArray(e))return t?n.call(e):e;var i=typeof e;return!e||void 0===e.length||"string"===i||"function"===i&&e.apply?[e]:x.toArray(e)},remove:function(e,t){var n=x.indexOf(e,t);return-1!==n&&f(e,n,1),e},removeAt:function(e,t,n){var i=e.length;return t>=0&&i>t&&(n=n||1,n=Math.min(n,i-t),f(e,t,n)),e},include:function(e,t){x.contains(e,t)||e.push(t)},clone:function(e){return n.call(e)},merge:function(){var e,t,i=n.call(arguments),r=[];for(e=0,t=i.length;t>e;e++)r=r.concat(i[e]);return x.unique(r)},intersect:function(){var e,t,i,r,o,a,s,l,d,u,c,h,p,g=[],m=n.call(arguments);if(!m.length)return g;for(e=m.length,c=o=0;e>c;c++)a=m[c],(!r||a.length<r.length)&&(r=a,o=c);for(r=x.unique(r),f(m,o,1),s=r.length,e=m.length,c=0;s>c;c++){for(l=r[c],u=0,h=0;e>h;h++)for(t=m[h],i=t.length,p=0;i>p;p++)if(d=t[p],l===d){u++;break}u===e&&g.push(l)}return g},difference:function(e,t){var i,r,o,a=n.call(e),s=a.length;for(i=0,o=t.length;o>i;i++)for(r=0;s>r;r++)a[r]===t[i]&&(f(a,r,1),r--,s--);return a},slice:[1,2].slice(1,void 0).length?function(e,t,i){return n.call(e,t,i)}:function(e,t,i){return void 0===t?n.call(e):void 0===i?n.call(e,t):n.call(e,t,i)},sort:function(t,n){return e(t,n||x.lexicalCompare)},flatten:function(e){function t(e){var i,r,o;for(i=0,r=e.length;r>i;i++)o=e[i],Ext.isArray(o)?t(o):n.push(o);return n}var n=[];return t(e)},min:function(e,t){var n,i,r,o=e[0];for(n=0,i=e.length;i>n;n++)r=e[n],t?1===t(o,r)&&(o=r):o>r&&(o=r);return o},max:function(e,t){var n,i,r,o=e[0];for(n=0,i=e.length;i>n;n++)r=e[n],t?-1===t(o,r)&&(o=r):r>o&&(o=r);return o},mean:function(e){return e.length>0?x.sum(e)/e.length:void 0},sum:function(e){var t,n,i,r=0;for(t=0,n=e.length;n>t;t++)i=e[t],r+=i;return r},toMap:function(e,t,n){var i={},r=e.length;if(t)if("string"==typeof t)for(;r--;)i[e[r][t]]=r+1;else for(;r--;)i[t.call(n,e[r])]=r+1;else for(;r--;)i[e[r]]=r+1;return i},toValueMap:function(e,t,n,i){var r,o,a,s,l,d,u={},c=e.length;if(t)for((s="string"!=typeof t)||(i=n),o=1===i,r=2===i;c--;)d=e[c],l=s?t.call(n,d):d[t],o?l in u?u[l].push(d):u[l]=[d]:r&&l in u?(a=u[l])instanceof Array?a.push(d):u[l]=[a,d]:u[l]=d;else for(;c--;)d=e[c],u[d]=d;return u},erase:f,insert:function(e,t,n){return g(e,t,0,n)},replace:g,splice:m,push:function(e){var t,n=arguments.length,i=1;for(void 0===e?e=[]:Ext.isArray(e)||(e=[e]);n>i;i++)t=arguments[i],Array.prototype.push[Ext.isIterable(t)?"apply":"call"](e,t);return e},numericSortFn:function(e,t){return e-t}};return Ext.each=x.each,x.union=x.merge,Ext.min=x.min,Ext.max=x.max,Ext.sum=x.sum,Ext.mean=x.mean,Ext.flatten=x.flatten,Ext.clean=x.clean,Ext.unique=x.unique,Ext.pluck=x.pluck,Ext.toArray=function(){return x.toArray.apply(x,arguments)},x}(),Ext.String=function(){var e,t,n,i,r,o=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,a=/('|\\)/g,s=/([-.*+?\^${}()|\[\]\/\\])/g,l=/^\s+|\s+$/g,d=/\s+/,u=/(^[^a-z]*|[^\w])/gi,c=function(t,n){return e[n]},h=function(e,n){return n in t?t[n]:String.fromCharCode(parseInt(n.substr(2),10))},p=function(e,t){return null===e||void 0===e||null===t||void 0===t?!1:t.length<=e.length};return r={insert:function(e,t,n){if(!e)return t;if(!t)return e;var i=e.length;return n||0===n||(n=i),0>n&&(n*=-1,n=n>=i?0:i-n),0===n?e=t+e:n>=e.length?e+=t:e=e.substr(0,n)+t+e.substr(n),e},startsWith:function(e,t,n){var i=p(e,t);return i&&(n&&(e=e.toLowerCase(),t=t.toLowerCase()),i=0===e.lastIndexOf(t,0)),i},endsWith:function(e,t,n){var i=p(e,t);return i&&(n&&(e=e.toLowerCase(),t=t.toLowerCase()),i=-1!==e.indexOf(t,e.length-t.length)),i},createVarName:function(e){return e.replace(u,"")},htmlEncode:function(e){return e?(e+"").replace(n,c):e},htmlDecode:function(e){return e?(e+"").replace(i,h):e},hasHtmlCharacters:function(e){return n.test(e)},addCharacterEntities:function(r){var o,a,s=[],l=[];for(o in r)a=r[o],t[o]=a,e[a]=o,s.push(a),l.push(o);n=RegExp("("+s.join("|")+")","g"),i=RegExp("("+l.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){e={},t={},this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(e,t){return Ext.isEmpty(t)?e:e+(-1===e.indexOf("?")?"?":"&")+t},trim:function(e){return e&&(e=e.replace(o,"")),e||""},capitalize:function(e){return e&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e||""},uncapitalize:function(e){return e&&(e=e.charAt(0).toLowerCase()+e.substr(1)),e||""},ellipsis:function(e,t,n){if(e&&e.length>t){if(n){var i=e.substr(0,t-2),r=Math.max(i.lastIndexOf(" "),i.lastIndexOf("."),i.lastIndexOf("!"),i.lastIndexOf("?"));if(-1!==r&&r>=t-15)return i.substr(0,r)+"..."}return e.substr(0,t-3)+"..."}return e},escapeRegex:function(e){return e.replace(s,"\\$1")},createRegex:function(e,t,n,i){var o=e;return null==e||e.exec||(o=r.escapeRegex(e+""),t!==!1&&(o="^"+o),n!==!1&&(o+="$"),o=RegExp(o,i!==!1?"i":"")),o},escape:function(e){return e.replace(a,"\\$1")},toggle:function(e,t,n){return e===t?n:t},leftPad:function(e,t,n){var i=e+"";for(n=n||" ";i.length<t;)i=n+i;return i},repeat:function(e,t,n){1>t&&(t=0);for(var i=[],r=t;r--;)i.push(e);return i.join(n||"")},splitWords:function(e){return e&&"string"==typeof e?e.replace(l,"").split(d):e||[]}}}(),Ext.String.resetCharacterEntities(),Ext.htmlEncode=Ext.String.htmlEncode,Ext.htmlDecode=Ext.String.htmlDecode,Ext.urlAppend=Ext.String.urlAppend,Ext.Date=function(){function e(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(s,function(e,n){return t[n]})}var t,n=Date,i=/(\\.)/g,r=/([gGhHisucUOPZ]|MS)/,o=/([djzmnYycU]|MS)/,a=/\\/gi,s=/\{(\d+)\}/g,l=RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),d=Ext.String.leftPad,u="var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,\ndef = me.defaults,\nfrom = Ext.Number.from,\nresults = String(input).match(me.parseRegexes[{0}]);\nif(results){\n{1}\nif(u != null){\nv = new Date(u * 1000);\n}else{\ndt = me.clearTime(new Date);\ny = from(y, from(def.y, dt.getFullYear()));\nm = from(m, from(def.m - 1, dt.getMonth()));\ndayMatched = d !== undefined;\nd = from(d, from(def.d, dt.getDate()));\nif (!dayMatched) {\ndt.setDate(1);\ndt.setMonth(m);\ndt.setFullYear(y);\ndaysInMonth = me.getDaysInMonth(dt);\nif (d > daysInMonth) {\nd = daysInMonth;\n}\n}\nh  = from(h, from(def.h, dt.getHours()));\ni  = from(i, from(def.i, dt.getMinutes()));\ns  = from(s, from(def.s, dt.getSeconds()));\nms = from(ms, from(def.ms, dt.getMilliseconds()));\nif(z >= 0 && y >= 0){\nv = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);\nv = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);\n}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){\nv = null;\n}else{\nif (W) {\nyear = y || (new Date()).getFullYear();\njan4 = new Date(year, 0, 4, 0, 0, 0);\nd = jan4.getDay();\nweek1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));\nv = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));\n} else {\nv = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);\n}\n}\n}\n}\nif(v){\nif(zz != null){\nv = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);\n}else if(o){\nv = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));\n}\n}\nreturn (v != null) ? v : null;";return Date.prototype.toISOString||(Date.prototype.toISOString=function(){var e=this;return d(e.getUTCFullYear(),4,"0")+"-"+d(e.getUTCMonth()+1,2,"0")+"-"+d(e.getUTCDate(),2,"0")+"T"+d(e.getUTCHours(),2,"0")+":"+d(e.getUTCMinutes(),2,"0")+":"+d(e.getUTCSeconds(),2,"0")+"."+d(e.getUTCMilliseconds(),3,"0")+"Z"}),t={now:n.now,toString:function(e){return e||(e=new n),e.getFullYear()+"-"+d(e.getMonth()+1,2,"0")+"-"+d(e.getDate(),2,"0")+"T"+d(e.getHours(),2,"0")+":"+d(e.getMinutes(),2,"0")+":"+d(e.getSeconds(),2,"0")},getElapsed:function(e,n){return Math.abs(e-(n||t.now()))},useStrict:!1,formatCodeToRegex:function(n,i){var r=t.parseCodes[n];return r&&(r="function"==typeof r?r():r,t.parseCodes[n]=r),r?Ext.applyIf({c:r.c?e(r.c,i||"{0}"):r.c},r):{g:0,c:null,s:Ext.String.escapeRegex(n)}},parseFunctions:{MS:function(e){var t=(e||"").match(l);return t?new n(1*((t[1]||"")+t[2])):null},time:function(e){var t=parseInt(e,10);return t||0===t?new n(t):null},timestamp:function(e){var t=parseInt(e,10);return t||0===t?new n(1e3*t):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return""+this.getTime()},timestamp:function(){return t.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(e){return t.monthNames[e].substring(0,3)},getShortDayName:function(e){return t.dayNames[e].substring(0,3)},getMonthNumber:function(e){return t.monthNumbers[e.substring(0,1).toUpperCase()+e.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(e){return r.test(e.replace(i,""))},formatContainsDateInfo:function(e){return o.test(e.replace(i,""))},unescapeFormat:function(e){return e.replace(a,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var e,n,i="Y-m-dTH:i:sP",r=[],o=i.length;for(e=0;o>e;++e)n=i.charAt(e),r.push("T"===n?"'T'":t.getFormatCode(n));return r.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(e,i,r,o,a,s,l){o=o||0,a=a||0,s=s||0,l=l||0;var d=t.add(new n(100>e?100:e,i-1,r,o,a,s,l),t.YEAR,100>e?e-100:0);return e===d.getFullYear()&&i===d.getMonth()+1&&r===d.getDate()&&o===d.getHours()&&a===d.getMinutes()&&s===d.getSeconds()&&l===d.getMilliseconds()},parse:function(e,n,i){var r=t.parseFunctions;return null==r[n]&&t.createParser(n),r[n].call(t,e,Ext.isDefined(i)?i:t.useStrict)},parseDate:function(e,n,i){return t.parse(e,n,i)},getFormatCode:function(e){var n=t.formatCodes[e];return n&&(n="function"==typeof n?n():n,t.formatCodes[e]=n),n||"'"+Ext.String.escape(e)+"'"},createFormat:function(e){var n,i=[],r=!1,o="";for(n=0;n<e.length;++n)o=e.charAt(n),r||"\\"!==o?r?(r=!1,i.push("'"+Ext.String.escape(o)+"'")):"\n"===o?i.push("'\\n'"):i.push(t.getFormatCode(o)):r=!0;t.formatFunctions[e]=Ext.functionFactory("var m=this;return "+i.join("+"))},createParser:function(n){for(var i,r=t.parseRegexes.length,o=1,a=[],s=[],l=!1,d="",c=0,h=n.length,p=[];h>c;++c)d=n.charAt(c),l||"\\"!==d?l?(l=!1,s.push(Ext.String.escape(d))):(i=t.formatCodeToRegex(d,o),o+=i.g,s.push(i.s),i.g&&i.c&&(i.calcAtEnd?p.push(i.c):a.push(i.c))):l=!0;a=a.concat(p),t.parseRegexes[r]=RegExp("^"+s.join("")+"$","i"),t.parseFunctions[n]=Ext.functionFactory("input","strict",e(u,r,a.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var e=[],n=0;7>n;e.push(t.getShortDayName(n)),++n);return{g:0,c:null,s:"(?:"+e.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+t.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+t.monthNames.join("|")+")"}},M:function(){for(var e=[],n=0;12>n;e.push(t.getShortMonthName(n)),++n);return Ext.applyIf({s:"("+e.join("|")+")"},t.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:!0},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:!0},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:"o = results[{0}];\nvar sn = o.substring(0,1),\nhr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),\nmn = o.substring(3,5) % 60;\no = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n",s:"([+-]\\d{4})"},P:{g:1,c:"o = results[{0}];\nvar sn = o.substring(0,1),\nhr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),\nmn = o.substring(4,6) % 60;\no = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n",s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var e,n,i=[],r=[t.formatCodeToRegex("Y",1),t.formatCodeToRegex("m",2),t.formatCodeToRegex("d",3),t.formatCodeToRegex("H",4),t.formatCodeToRegex("i",5),t.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {\nif(results[8] == 'Z'){\nzz = 0;\n}else if (results[8].indexOf(':') > -1){",t.formatCodeToRegex("P",8).c,"}else{",t.formatCodeToRegex("O",8).c,"}\n}"].join("\n")}];for(e=0,n=r.length;n>e;++e)i.push(r[e].c);return{g:1,c:i.join(""),s:r[0].s+"(?:-"+r[1].s+"(?:-"+r[2].s+"(?:(?:T| )?"+r[3].s+":"+r[4].s+"(?::"+r[5].s+")?(?:(?:\\.|,)(\\d+))?(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?)?)?)?"}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(e,n){return t.format(e,n)},isEqual:function(e,t){return e&&t?e.getTime()===t.getTime():!(e||t)},format:function(e,n){var i=t.formatFunctions;return Ext.isDate(e)?(null==i[n]&&t.createFormat(n),i[n].call(e)+""):""},getTimezone:function(e){return(""+e).replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(e,t){var n=e.getTimezoneOffset();return(n>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(n)/60),2,"0")+(t?":":"")+Ext.String.leftPad(Math.abs(n%60),2,"0")},getDayOfYear:function(e){var n,i=0,r=t.clone(e),o=e.getMonth();for(n=0,r.setDate(1),r.setMonth(0);o>n;r.setMonth(++n))i+=t.getDaysInMonth(r);return i+e.getDate()-1},getWeekOfYear:function(){var e=864e5,t=7*e;return function(i){var r=n.UTC(i.getFullYear(),i.getMonth(),i.getDate()+3)/e,o=Math.floor(r/7),a=new n(o*t).getUTCFullYear();return o-Math.floor(n.UTC(a,0,7)/t)+1}}(),isLeapYear:function(e){var t=e.getFullYear();return!(0!==(3&t)||!(t%100||t%400===0&&t))},getFirstDayOfMonth:function(e){var t=(e.getDay()-(e.getDate()-1))%7;return 0>t?t+7:t},getLastDayOfMonth:function(e){return t.getLastDateOfMonth(e).getDay()},getFirstDateOfMonth:function(e){return new n(e.getFullYear(),e.getMonth(),1)},getLastDateOfMonth:function(e){return new n(e.getFullYear(),e.getMonth(),t.getDaysInMonth(e))},getDaysInMonth:function(){var e=[31,28,31,30,31,30,31,31,30,31,30,31];return function(n){var i=n.getMonth();return 1===i&&t.isLeapYear(n)?29:e[i]}}(),getSuffix:function(e){switch(e.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(e){return new n(e.getTime())},isDST:function(e){return new n(e.getFullYear(),0,1).getTimezoneOffset()!==e.getTimezoneOffset()},clearTime:function(e,n){if(n)return t.clearTime(t.clone(e));var i,r,o=e.getDate();if(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getDate()!==o){for(i=1,r=t.add(e,t.HOUR,i);r.getDate()!==o;i++,r=t.add(e,t.HOUR,i));e.setDate(o),e.setHours(r.getHours())}return e},add:function(e,n,i){var r,o,a=t.clone(e),s=0;if(!n||0===i)return a;if(o=i-parseInt(i,10),i=parseInt(i,10))switch(n.toLowerCase()){case t.MILLI:a.setTime(a.getTime()+i);break;case t.SECOND:a.setTime(a.getTime()+1e3*i);break;case t.MINUTE:a.setTime(a.getTime()+60*i*1e3);break;case t.HOUR:a.setTime(a.getTime()+60*i*60*1e3);break;case t.DAY:a.setDate(a.getDate()+i);break;case t.MONTH:r=e.getDate(),r>28&&(r=Math.min(r,t.getLastDateOfMonth(t.add(t.getFirstDateOfMonth(e),t.MONTH,i)).getDate())),a.setDate(r),a.setMonth(e.getMonth()+i);break;case t.YEAR:r=e.getDate(),r>28&&(r=Math.min(r,t.getLastDateOfMonth(t.add(t.getFirstDateOfMonth(e),t.YEAR,i)).getDate())),a.setDate(r),a.setFullYear(e.getFullYear()+i)}if(o){switch(n.toLowerCase()){case t.MILLI:s=1;break;case t.SECOND:s=1e3;break;case t.MINUTE:s=6e4;break;case t.HOUR:s=36e5;break;case t.DAY:s=864e5;break;case t.MONTH:r=t.getDaysInMonth(a),s=864e5*r;break;case t.YEAR:r=t.isLeapYear(a)?366:365,s=864e5*r}s&&a.setTime(a.getTime()+s*o)}return a},subtract:function(e,n,i){return t.add(e,n,-i)},between:function(e,t,n){var i=e.getTime();return t.getTime()<=i&&i<=n.getTime()},compat:function(){var e,i,r,o,a=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],s=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],l=a.length,d=s.length;for(o=0;l>o;o++)i=a[o],n[i]=t[i];for(e=0;d>e;e++)r=s[e],n.prototype[r]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),t[r].apply(t,e)}},diff:function(e,n,i){var r,o=+n-e;switch(i){case t.MILLI:return o;case t.SECOND:return Math.floor(o/1e3);case t.MINUTE:return Math.floor(o/6e4);case t.HOUR:return Math.floor(o/36e5);case t.DAY:return Math.floor(o/864e5);case"w":return Math.floor(o/6048e5);case t.MONTH:return r=12*n.getFullYear()+n.getMonth()-(12*e.getFullYear()+e.getMonth()),t.add(e,i,r)>n?r-1:r;case t.YEAR:return r=n.getFullYear()-e.getFullYear(),t.add(e,i,r)>n?r-1:r}},align:function(e,i,r){var o=new n(+e);switch(i.toLowerCase()){case t.MILLI:return o;case t.SECOND:return o.setUTCSeconds(o.getUTCSeconds()-o.getUTCSeconds()%r),o.setUTCMilliseconds(0),o;case t.MINUTE:return o.setUTCMinutes(o.getUTCMinutes()-o.getUTCMinutes()%r),o.setUTCSeconds(0),o.setUTCMilliseconds(0),o;case t.HOUR:return o.setUTCHours(o.getUTCHours()-o.getUTCHours()%r),o.setUTCMinutes(0),o.setUTCSeconds(0),o.setUTCMilliseconds(0),o;case t.DAY:return(7===r||14===r)&&o.setUTCDate(o.getUTCDate()-o.getUTCDay()+1),o.setUTCHours(0),o.setUTCMinutes(0),o.setUTCSeconds(0),o.setUTCMilliseconds(0),o;case t.MONTH:return o.setUTCMonth(o.getUTCMonth()-(o.getUTCMonth()-1)%r,1),o.setUTCHours(0),o.setUTCMinutes(0),o.setUTCSeconds(0),o.setUTCMilliseconds(0),o;case t.YEAR:return o.setUTCFullYear(o.getUTCFullYear()-o.getUTCFullYear()%r,1,1),o.setUTCHours(0),o.setUTCMinutes(0),o.setUTCSeconds(0),o.setUTCMilliseconds(0),e}}}}(),Ext.Function=function(){var e,t=0,n=[],i=[],r=0,o={},a=window,s=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||function(e){var n=Ext.now(),i=Math.max(0,16-(n-t)),r=a.setTimeout(function(){e(n+i)},i);return t=n+i,r},l=function(){var t,r,a,s=n.length;for(e=null,r=0;s>r;r++)a=n[r],t=a[3],o[t]&&(a[0].apply(a[1]||Ext.global,a[2]||i),delete o[t]);n=n.slice(s)},d=function(){Ext.elevateFunction(l)},u={flexSetter:function(e){return function(t,n){var i,r;if(null!==t)if("string"!=typeof t){for(i in t)t.hasOwnProperty(i)&&e.call(this,i,t[i]);if(Ext.enumerables)for(r=Ext.enumerables.length;r--;)i=Ext.enumerables[r],t.hasOwnProperty(i)&&e.call(this,i,t[i])}else e.call(this,t,n);return this}},bind:function(e,t,n,i){if(2===arguments.length)return function(){return e.apply(t,arguments)};var r=e,o=Array.prototype.slice;return function(){var e=n||arguments;return i===!0?(e=o.call(arguments,0),e=e.concat(n)):"number"==typeof i&&(e=o.call(arguments,0),Ext.Array.insert(e,i,n)),r.apply(t||Ext.global,e)}},bindCallback:function(e,t,n,i,r){return function(){var o=Ext.Array.slice(arguments);return Ext.callback(e,t,n?n.concat(o):o,i,r)}},pass:function(e,t,n){return Ext.isArray(t)||(t=Ext.isIterable(t)?Ext.Array.clone(t):void 0!==t?[t]:[]),function(){var i=t.slice();return i.push.apply(i,arguments),e.apply(n||this,i)}},alias:function(e,t){return function(){return e[t].apply(e,arguments)}},clone:function(e){return function(){return e.apply(this,arguments)}},createInterceptor:function(e,t,n,i){return Ext.isFunction(t)?(i=Ext.isDefined(i)?i:null,function(){var r=this,o=arguments;return t.target=r,t.method=e,t.apply(n||r||Ext.global,o)!==!1?e.apply(r||Ext.global,o):i}):e},createDelayed:function(e,t,n,i,r){return(n||i)&&(e=Ext.Function.bind(e,n,i,r)),function(){var n=this,i=Array.prototype.slice.call(arguments);setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(e,n,i):e.apply(n,i)},t)}},defer:function(e,t,n,i,r){return e=Ext.Function.bind(e,n,i,r),t>0?setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(e):e()},t):(e(),0)},interval:function(e,t,n,i,r){return e=Ext.Function.bind(e,n,i,r),setInterval(function(){Ext.elevateFunction?Ext.elevateFunction(e):e()},t)},createSequence:function(e,t,n){return t?function(){var i=e.apply(this,arguments);return t.apply(n||this,arguments),i}:e},createBuffered:function(e,t,n,i){var r;return function(){var o=i||Array.prototype.slice.call(arguments,0),a=n||this;r&&clearTimeout(r),r=setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(e,a,o):e.apply(a,o)},t)}},createAnimationFrame:function(e,t,n,i){var r;return i=i||3,function(){var o=n||Array.prototype.slice.call(arguments,0);t=t||this,3===i&&r&&u.cancelAnimationFrame(r),(1&i||!r)&&(r=u.requestAnimationFrame(function(){r=null,e.apply(t,o)}))}},requestAnimationFrame:function(){var t=++r,i=Array.prototype.slice.call(arguments,0);return i[3]=t,o[t]=1,n.push(i),e||(e=s(Ext.elevateFunction?d:l)),t},cancelAnimationFrame:function(e){delete o[e]},createThrottled:function(e,t,n){var i,r,o,a=0,s=function(){Ext.elevateFunction?Ext.elevateFunction(e,n,r):e.apply(n,r),a=Ext.now(),o=null};return function(){n||(n=this),i=Ext.now()-a,r=arguments,i>=t?(clearTimeout(o),s()):o||(o=Ext.defer(s,t-i))}},createBarrier:function(e,t,n){return function(){--e||t.apply(n,arguments)}},interceptBefore:function(e,t,n,i){var r=e[t]||Ext.emptyFn;return e[t]=function(){var e=n.apply(i||this,arguments);return r.apply(this,arguments),e}},interceptAfter:function(e,t,n,i){var r=e[t]||Ext.emptyFn;return e[t]=function(){return r.apply(this,arguments),n.apply(i||this,arguments)}},makeCallback:function(e,t){return function(){return t[e].apply(t,arguments)}}};return Ext.defer=u.defer,Ext.interval=u.interval,Ext.pass=u.pass,Ext.bind=u.bind,Ext.deferCallback=u.requestAnimationFrame,u}(),Ext.Number=new function(){var e=this,t="1"!==.9.toFixed(),n=Math,i={count:!1,inclusive:!1,wrap:!0};Ext.apply(e,{Clip:{DEFAULT:i,COUNT:Ext.applyIf({count:!0},i),INCLUSIVE:Ext.applyIf({inclusive:!0},i),NOWRAP:Ext.applyIf({wrap:!1},i)},clipIndices:function(e,t,n){n=n||i;var r,o,a,s=0,l=n.wrap;for(t=t||[],a=0;2>a;++a)r=o,o=t[a],null==o?o=s:a&&n.count?(o+=r,o=o>e?e:o):(l&&(o=0>o?e+o:o),a&&n.inclusive&&++o,o=0>o?0:o>e?e:o),s=e;return t[0]=r,t[1]=r>o?r:o,t},constrain:function(e,t,n){var i=parseFloat(e);return null===t&&(t=e),null===n&&(n=e),t>i?t:i>n?n:i},snap:function(t,n,i,r){var o;return void 0===t||i>t?i||0:(n&&(o=t%n,0!==o&&(t-=o,2*o>=n?t+=n:-n>2*o&&(t-=n))),e.constrain(t,i,r));
},snapInRange:function(t,n,i,r){var o;return i=i||0,void 0===t||i>t?i:(n&&(o=(t-i)%n)&&(t-=o,o*=2,o>=n&&(t+=n)),void 0!==r&&t>(r=e.snapInRange(r,n,i))&&(t=r),t)},sign:function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},toFixed:t?function(e,t){t=t||0;var i=n.pow(10,t);return(n.round(e*i)/i).toFixed(t)}:function(e,t){return e.toFixed(t)},from:function(e,t){return isFinite(e)&&(e=parseFloat(e)),isNaN(e)?t:e},randomInt:function(e,t){return n.floor(n.random()*(t-e+1)+e)},correctFloat:function(e){return parseFloat(e.toPrecision(14))}}),Ext.num=function(){return e.from.apply(this,arguments)}},function(){var e=function(){},t=/^\?/,n=/(\[):?([^\]]*)\]/g,i=/^([^\[]+)/,r=/\+/g,o=Ext.Object={chain:Object.create||function(t){e.prototype=t;var n=new e;return e.prototype=null,n},clear:function(e){for(var t in e)delete e[t];return e},freeze:Object.freeze?function(e,t){if(e&&"object"==typeof e&&!Object.isFrozen(e)&&(Object.freeze(e),t))for(var n in e)o.freeze(e[n],t);return e}:Ext.identityFn,toQueryObjects:function(e,t,n){var i,r,a=o.toQueryObjects,s=[];if(Ext.isArray(t))for(i=0,r=t.length;r>i;i++)n?s=s.concat(a(e+"["+i+"]",t[i],!0)):s.push({name:e,value:t[i]});else if(Ext.isObject(t))for(i in t)t.hasOwnProperty(i)&&(n?s=s.concat(a(e+"["+i+"]",t[i],!0)):s.push({name:e,value:t[i]}));else s.push({name:e,value:t});return s},toQueryString:function(e,t){var n,i,r,a,s,l=[],d=[];for(n in e)e.hasOwnProperty(n)&&(l=l.concat(o.toQueryObjects(n,e[n],t)));for(i=0,r=l.length;r>i;i++)a=l[i],s=a.value,Ext.isEmpty(s)?s="":Ext.isDate(s)&&(s=Ext.Date.toString(s)),d.push(encodeURIComponent(a.name)+"="+encodeURIComponent(s+""));return d.join("&")},fromQueryString:function(e,o){var a,s,l,d,u,c,h,p,f,g,m,x,v,y,E=e.replace(t,"").split("&"),b={};for(u=0,c=E.length;c>u;u++)if(h=E[u],h.length>0)if(s=h.split("="),l=s[0],l=l.replace(r,"%20"),l=decodeURIComponent(l),d=s[1],void 0!==d?(d=d.replace(r,"%20"),d=decodeURIComponent(d)):d="",o){if(g=l.match(n),m=l.match(i),l=m[0],x=[],null===g){b[l]=d;continue}for(p=0,f=g.length;f>p;p++)v=g[p],v=2===v.length?"":v.substring(1,v.length-1),x.push(v);for(x.unshift(l),a=b,p=0,f=x.length;f>p;p++)v=x[p],p===f-1?Ext.isArray(a)&&""===v?a.push(d):a[v]=d:((void 0===a[v]||"string"==typeof a[v])&&(y=x[p+1],a[v]=Ext.isNumeric(y)||""===y?[]:{}),a=a[v])}else b.hasOwnProperty(l)?(Ext.isArray(b[l])||(b[l]=[b[l]]),b[l].push(d)):b[l]=d;return b},each:function(e,t,n){var i,r,o=Ext.enumerables;if(e){n=n||e;for(r in e)if(e.hasOwnProperty(r)&&t.call(n,r,e[r],e)===!1)return;if(o)for(i=o.length;i--;)if(e.hasOwnProperty(r=o[i])&&t.call(n,r,e[r],e)===!1)return}},eachValue:function(e,t,n){var i,r,o=Ext.enumerables;n=n||e;for(r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r])===!1)return;if(o)for(i=o.length;i--;)if(e.hasOwnProperty(r=o[i])&&t.call(n,e[r])===!1)return},merge:function(e){for(var t,n,i,r,a=1,s=arguments.length,l=o.merge,d=Ext.clone;s>a;a++){t=arguments[a];for(n in t)i=t[n],i&&i.constructor===Object?(r=e[n],r&&r.constructor===Object?l(r,i):e[n]=d(i)):e[n]=i}return e},mergeIf:function(e){for(var t,n,i,r=1,o=arguments.length,a=Ext.clone;o>r;r++){t=arguments[r];for(n in t)n in e||(i=t[n],i&&i.constructor===Object?e[n]=a(i):e[n]=i)}return e},getAllKeys:function(e){var t,n=[];for(t in e)n.push(t);return n},getKey:function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n;return null},getValues:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n},getKeys:"function"==typeof Object.keys?function(e){return e?Object.keys(e):[]}:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},getSize:function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},equals:function(){var e=function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0};return function(t,n){return t===n?!0:t&&n?e(t,n)&&e(n,t):t||n?!1:t===n}}(),fork:function(e){var t,n,i;if(e&&e.constructor===Object){t=o.chain(e);for(n in e)i=e[n],i&&(i.constructor===Object?t[n]=o.fork(i):i instanceof Array&&(t[n]=Ext.Array.clone(i)))}else t=e;return t},defineProperty:"defineProperty"in Object?Object.defineProperty:function(e,t,n){Object.prototype.__defineGetter__&&(n.get&&e.__defineGetter__(t,n.get),n.set&&e.__defineSetter__(t,n.set))},classify:function(e){var t,n,i=e,r=[],a={},s=function(){for(var e,t=0,n=r.length;n>t;t++)e=r[t],this[e]=new a[e]};for(t in e)e.hasOwnProperty(t)&&(n=e[t],n&&n.constructor===Object&&(r.push(t),a[t]=o.classify(n)));return s.prototype=i,s}};Ext.merge=Ext.Object.merge,Ext.mergeIf=Ext.Object.mergeIf}(),Ext.apply(Ext,{_namedScopes:{"this":{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:function(){var e=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,t=/([\W]{1})/g,n=/^(\d)/g,i=function(e,t){return"\\"+t},r=function(e,t){return"\\00"+t.charCodeAt(0).toString(16)+" "};return function(o){return e.test(o)?o:o.replace(t,i).replace(n,r)}}(),callback:function(e,t,n,i,r,o){if(e){var a=t in Ext._namedScopes;e.charAt?(t&&!a||!r||(t=r.resolveListenerScope(a?t:o)),e=t[e]):a?t=o||r:t||(t=r);var s;return e&&Ext.isFunction(e)&&(t=t||Ext.global,i?Ext.defer(e,i,t,n):s=Ext.elevateFunction?Ext.elevateFunction(e,t,n):n?e.apply(t,n):e.call(t)),s}},coerce:function(e,t){var n=Ext.typeOf(e),i=Ext.typeOf(t),r="string"==typeof e;if(n!==i)switch(i){case"string":return e+"";case"number":return+e;case"boolean":return!r||e&&"false"!==e?!!e:!1;case"null":return!r||e&&"null"!==e?e:null;case"undefined":return!r||e&&"undefined"!==e?e:void 0;case"date":return r&&isNaN(e)?Ext.Date.parse(e,Ext.Date.defaultFormat):Date(+e)}return e},copyTo:function(e,t,n,i){"string"==typeof n&&(n=n.split(Ext.propertyNameSplitRe));for(var r,o=0,a=n?n.length:0;a>o;o++)r=n[o],(i||t.hasOwnProperty(r))&&(e[r]=t[r]);return e},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(e,t,n){"string"==typeof n&&(n=n.split(Ext.propertyNameSplitRe));for(var i,r=0,o=n?n.length:0;o>r;r++)i=n[r],void 0===e[i]&&(e[i]=t[i]);return e},extend:function(){var e=Object.prototype.constructor,t=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])};return function(n,i,r){Ext.isObject(i)&&(r=i,i=n,n=r.constructor!==e?r.constructor:function(){i.apply(this,arguments)});var o,a=function(){},s=i.prototype;return a.prototype=s,o=n.prototype=new a,o.constructor=n,n.superclass=s,s.constructor===e&&(s.constructor=i),n.override=function(e){Ext.override(n,e)},o.override=t,o.proto=o,n.override(r),n.extend=function(e){return Ext.extend(n,e)},n}}(),iterate:function(e,t,n){Ext.isEmpty(e)||(void 0===n&&(n=e),Ext.isIterable(e)?Ext.Array.each.call(Ext.Array,e,t,n):Ext.Object.each.call(Ext.Object,e,t,n))},urlEncode:function(){var e=Ext.Array.from(arguments),t="";return Ext.isString(e[1])&&(t=e[1]+"&",e[1]=!1),t+Ext.Object.toQueryString.apply(Ext.Object,e)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(e){var t=Ext._scrollbarSize;if(e||!t){var n=document.body,i=document.createElement("div");i.style.width=i.style.height="100px",i.style.overflow="scroll",i.style.position="absolute",n.appendChild(i),Ext._scrollbarSize=t={width:i.offsetWidth-i.clientWidth,height:i.offsetHeight-i.clientHeight},n.removeChild(i)}return t},typeOf:function(){var e=/\S/,t=Object.prototype.toString,n={number:1,string:1,"boolean":1,undefined:1},i={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(r){if(null===r)return"null";var o,a,s=typeof r;return n[s]?s:(o=i[a=t.call(r)],o?o:"function"===s?"function":"object"===s?void 0!==r.nodeType?3===r.nodeType?e.test(r.nodeValue)?"textnode":"whitespace":"element":"object":a)}}(),factory:function(e,t,n,i){var r,o=Ext.ClassManager;if(!e||e.isInstance)return n&&n!==e&&n.destroy(),e;if(i){if("string"==typeof e)return o.instantiateByAlias(i+"."+e);if(Ext.isObject(e)&&"type"in e)return o.instantiateByAlias(i+"."+e.type,e)}return e===!0?n||Ext.create(t):("xtype"in e?r=o.instantiateByAlias("widget."+e.xtype,e):"xclass"in e&&(r=Ext.create(e.xclass,e)),r?(n&&n.destroy(),r):n?n.setConfig(e):Ext.create(t,e))},log:function(){var e=function(){};return e.info=e.warn=e.error=Ext.emptyFn,e}()}),function(){var e,t=[""],n=/([^\d\.])/,i=/[^\d]/g,r=/[\-+]/g,o=/\s/g,a=/_/g;Ext.Version=e=function(t,o){var s,l,d,u,c,h,p,f=this,g=f.padModes;t.isVersion&&(t=t.version),f.version=p=(t+"").toLowerCase().replace(a,".").replace(r,""),s=p.charAt(0),s in g?(p=p.substring(1),d=g[s]):d=o?g[o]:0,f.pad=d,h=p.search(n),f.shortVersion=p,-1!==h&&(f.release=c=p.substr(h,t.length),f.shortVersion=p.substr(0,h),c=e.releaseValueMap[c]||c),f.releaseValue=c||d,f.shortVersion=f.shortVersion.replace(i,""),f.parts=u=p.split(".");for(l=u.length;l--;)u[l]=parseInt(u[l],10);return d===1/0&&u.push(d),f.major=u[0]||d,f.minor=u[1]||d,f.patch=u[2]||d,f.build=u[3]||d,f},e.prototype={isVersion:!0,padModes:{"~":NaN,"^":1/0},release:"",compareTo:function(t){var n,i,r,o=this,a=o.pad,s=o.parts,l=s.length,d=t.isVersion?t:new e(t),u=d.pad,c=d.parts,h=c.length,p=Math.max(l,h);for(n=0;p>n;n++){if(i=l>n?s[n]:a,r=h>n?c[n]:u,r>i)return-1;if(i>r)return 1}return i=o.releaseValue,r=d.releaseValue,r>i?-1:i>r?1:0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(e){return this.compareTo(e)>0},isGreaterThanOrEqual:function(e){return this.compareTo(e)>=0},isLessThan:function(e){return this.compareTo(e)<0},isLessThanOrEqual:function(e){return this.compareTo(e)<=0},equals:function(e){return 0===this.compareTo(e)},match:function(e){return e+="",this.version.substr(0,e.length)===e},toArray:function(){var e=this;return[e.getMajor(),e.getMinor(),e.getPatch(),e.getBuild(),e.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(e){return this.compareTo(e)>0},lt:function(e){return this.compareTo(e)<0},gtEq:function(e){return this.compareTo(e)>=0},ltEq:function(e){return this.compareTo(e)<=0}},Ext.apply(e,{aliases:{from:{extjs:"ext",core:"sencha-core"},to:{ext:["extjs"],"sencha-core":["core"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(e){return e?isNaN(e)?this.releaseValueMap[e]||e:parseInt(e,10):0},compare:function(t,n){var i=t.isVersion?t:new e(t);return i.compareTo(n)},set:function(t,n,i){var r,o=e.aliases.to[n],a=i.isVersion?i:new e(i);if(t[n]=a,o)for(r=o.length;r-->0;)t[o[r]]=a;return a}}),Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(t){var n,i=Ext.compatVersions;return n=t?i[e.aliases.from[t]||t]:i.ext||i.touch||i.core,n||Ext.getVersion(t)},setCompatVersion:function(t,n){e.set(Ext.compatVersions,t,n)},setVersion:function(t,n){return Ext.lastRegisteredVersion=e.set(Ext.versions,t,n),this},getVersion:function(t){var n=Ext.versions;return t?n[e.aliases.from[t]||t]:n.ext||n.touch||n.core},checkVersion:function(n,i){var r,a,s,l,d,u,c,h,p,f=Ext.isArray(n),g=e.aliases.from,m=f?n:t,x=m.length,v=Ext.versions,y=v.ext||v.touch;for(f||(t[0]=n),r=0;x>r;++r){if(Ext.isString(c=m[r])){if(c.indexOf(" ")>=0&&(c=c.replace(o,"")),a=c.indexOf("@"),0>a)h=c,p=y;else{if(u=c.substring(0,a),!(p=v[g[u]||u])){if(i)return!1;continue}h=c.substring(a+1)}a=h.indexOf("-"),0>a?"+"===h.charAt(a=h.length-1)?(l=h.substring(0,a),d=null):l=d=h:a>0?(l=h.substring(0,a),d=h.substring(a+1)):(l=null,d=h.substring(a+1)),s=!0,l&&(l=new e(l,"~"),s=l.ltEq(p)),s&&d&&(d=new e(d,"~"),s=d.gtEq(p))}else s=Ext.checkVersion(c.and||c.or,!c.or),c.not&&(s=!s);if(s){if(!i)return!0}else if(i)return!1}return!!i},deprecate:function(t,n,i,r){e.compare(Ext.getVersion(t),n)<1&&i.call(r)}})}(),function(e){var t,n,i=e&&e.packages||{},r=e&&e.compatibility;for(t in i)n=i[t],Ext.setVersion(t,n.version);if(r)if(Ext.isString(r))Ext.setCompatVersion("core",r);else for(t in r)Ext.setCompatVersion(t,r[t]);i.ext||i.touch||Ext.setVersion("ext","5")}(Ext.manifest),Ext.Config=function(e){var t=this,n=e.charAt(0).toUpperCase()+e.substr(1);t.name=e,t.names={internal:"_"+e,initializing:"is"+n+"Initializing",apply:"apply"+n,update:"update"+n,get:"get"+n,set:"set"+n,initGet:"initGet"+n,doSet:"doSet"+n,changeEvent:e.toLowerCase()+"change"},t.root=t},Ext.Config.map={},Ext.Config.get=function(e){var t=Ext.Config.map,n=t[e]||(t[e]=new Ext.Config(e));return n},Ext.Config.prototype={self:Ext.Config,isConfig:!0,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getInternalName:function(e){return e.$configPrefixed?this.names.internal:this.name},mergeNew:function(e,t,n,i){var r,o;if(t)if(e){r=Ext.Object.chain(t);for(o in e)i&&o in r||(r[o]=e[o])}else r=t;else r=e;return r},mergeSets:function(e,t,n){var i,r,o=t?Ext.Object.chain(t):{};if(e instanceof Array)for(i=e.length;i--;)r=e[i],n&&r in o||(o[r]=!0);else if(e)if(e.constructor===Object)for(i in e)r=e[i],n&&i in o||(o[i]=r);else n&&e in o||(o[e]=!0);return o},makeGetter:function(){var e=this.name,t=this.names.internal;return function(){var n=this.$configPrefixed?t:e;return this[n]}},makeInitGetter:function(){var e=this.name,t=this.names,n=t.set,i=t.get,r=t.initializing;return function(){var t=this;return t[r]=!0,delete t[i],t[n](t.config[e]),delete t[r],t[i].apply(t,arguments)}},makeSetter:function(){var e,t=this.name,n=this.names,i=n.internal,r=n.get,o=n.apply,a=n.update;return e=function(e){var n=this,s=n.$configPrefixed?i:t,l=n[s];return delete n[r],n[o]&&void 0===(e=n[o](e,l))||e!==(l=n[s])&&(n[s]=e,n[a]&&n[a](e,l)),n},e.$isDefault=!0,e}},function(){var e=Ext.Config,t=e.map,n=Ext.Object;Ext.Configurator=function(e){var t=this,i=e.prototype,r=e.superclass?e.superclass.self.$config:null;t.cls=e,r?(t.configs=n.chain(r.configs),t.cachedConfigs=n.chain(r.cachedConfigs),t.initMap=n.chain(r.initMap),t.values=n.chain(r.values),t.needsFork=r.needsFork):(t.configs={},t.cachedConfigs={},t.initMap={},t.values={}),i.config=i.defaultConfig=t.values,e.$config=t},Ext.Configurator.prototype={self:Ext.Configurator,needsFork:!1,initList:null,add:function(t,i){var r,o,a,s,l,d,u,c,h,p,f=this,g=f.cls,m=f.configs,x=f.cachedConfigs,v=f.initMap,y=g.prototype,E=i&&i.$config.configs,b=f.values;for(u in t){if(p=t[u],r=p&&p.constructor===Object,o=r&&"$value"in p?p:null,o&&(a=!!o.cached,p=o.$value,r=p&&p.constructor===Object),s=o&&o.merge,l=m[u]){if(i){if(s=l.merge,!s)continue;o=null}else s=s||l.merge;d=b[u],s?p=s.call(l,p,d,g,i):r&&d&&d.constructor===Object&&(p=n.merge({},d,p))}else E?(l=E[u],o=null):l=e.get(u),m[u]=l,(l.cached||a)&&(x[u]=!0),c=l.names,y[h=c.get]||(y[h]=l.getGetter()),y[h=c.set]||(y[h]=l.getSetter());o&&(l.owner!==g&&(m[u]=l=Ext.Object.chain(l),l.owner=g),Ext.apply(l,o),delete l.$value),!f.needsFork&&p&&(p.constructor===Object||p instanceof Array)&&(f.needsFork=!0),null!==p?v[u]=!0:(y.$configPrefixed?y[m[u].names.internal]=null:y[m[u].name]=null,u in v&&(v[u]=!1)),b[u]=p}},configure:function(e,t){var i,r,o,a,s,l,d,u,c,h,p,f,g=this,m=g.configs,x=g.initMap,v=g.initListMap,y=g.initList,E=g.cls.prototype,b=g.values,C=0,w=!y;if(b=g.needsFork?n.fork(b):n.chain(b),w){g.initList=y=[],g.initListMap=v={},e.isFirstInstance=!0;for(c in x)a=x[c],r=m[c],p=r.cached,a?(u=r.names,h=b[c],!E[u.set].$isDefault||E[u.apply]||E[u.update]||"object"==typeof h?(p?(i||(i=[])).push(r):(y.push(r),v[c]=!0),e[u.get]=r.initGetter||r.getInitGetter()):E[r.getInternalName(E)]=h):p&&(E[r.getInternalName(E)]=void 0)}if(d=i&&i.length){for(s=0;d>s;++s)l=i[s].getInternalName(E),e[l]=null;for(s=0;d>s;++s)u=(r=i[s]).names,o=u.get,e.hasOwnProperty(o)&&(e[u.set](b[r.name]),delete e[o]);for(s=0;d>s;++s)l=i[s].getInternalName(E),E[l]=e[l],delete e[l]}for(t&&t.platformConfig&&(t=g.resolvePlatformConfig(e,t)),w&&e.afterCachedConfig&&!e.afterCachedConfig.$nullFn&&e.afterCachedConfig(t),e.isConfiguring=!0,e.config=b,s=0,d=y.length;d>s;++s)r=y[s],e[r.names.get]=r.initGetter||r.getInitGetter();if(e.transformInstanceConfig&&(t=e.transformInstanceConfig(t)),t)for(c in t)h=t[c],r=m[c],r?(r.lazy||++C,v[c]||(e[r.names.get]=r.initGetter||r.getInitGetter()),r.merge?h=r.merge(h,b[c],e):h&&h.constructor===Object&&(f=b[c],h=f&&f.constructor===Object?n.merge(b[c],h):Ext.clone(h))):e[c]=h,b[c]=h;if(!e.beforeInitConfig||e.beforeInitConfig.$nullFn||e.beforeInitConfig(t)!==!1){if(t)for(c in t){if(!C)break;r=m[c],r&&!r.lazy&&(--C,u=r.names,o=u.get,e.hasOwnProperty(o)&&(e[u.set](b[c]),delete e[u.get]))}for(s=0,d=y.length;d>s;++s)r=y[s],u=r.names,o=u.get,!r.lazy&&e.hasOwnProperty(o)&&(e[u.set](b[r.name]),delete e[o]);delete e.isConfiguring}},getCurrentConfig:function(e){var n,i=e.defaultConfig,r={};for(n in i)r[n]=e[t[n].names.get]();return r},merge:function(e,t,n){var i,r,o,a,s=this.configs;for(i in n)r=n[i],a=s[i],a&&(a.merge?r=a.merge(r,t[i],e):r&&r.constructor===Object&&(o=t[i],r=o&&o.constructor===Object?Ext.Object.merge(o,r):Ext.clone(r))),t[i]=r;return t},reconfigure:function(e,n,i){var r,o,a,s,l,d,u=e.config,c=[],h=e.$configStrict,p=this.configs,f=i&&i.defaults,g=i&&i.strict===!1;for(l in n)if(!f||!e.hasOwnProperty(l)){if(u[l]=n[l],r=p[l])e[r.names.get]=r.initGetter||r.getInitGetter();else if(h)continue;c.push(l)}for(a=0,s=c.length;s>a;a++)l=c[a],r=p[l],r?(d=r.names,o=d.get,e.hasOwnProperty(o)&&(e[d.set](n[l]),delete e[o])):(r=t[l]||Ext.Config.get(l),d=r.names,e[d.set]?e[d.set](n[l]):g&&(e[l]=n[l]))},resolvePlatformConfig:function(e,t){var n,i,r,o=t&&t.platformConfig,a=t;if(o&&(i=Ext.getPlatformConfigKeys(o),r=i.length))for(a=Ext.merge({},a),n=0,r=i.length;r>n;++n)this.merge(e,a,o[i[n]]);return a}}}(),Ext.Base=function(e){var t,n=[],i=[],r=function(e,t){var n,i,r,o=this;return e?(i=Ext.Config.map[e],r=i.names.get,n=t&&o.hasOwnProperty(r)?o.config[e]:o[r]()):n=o.getCurrentConfig(),n},o=function(e){return function(){return this[e].apply(this,arguments)}},a=Ext.Version,s=/^\d/,l={},d={},u=function(){},c=u.prototype;Ext.apply(u,{$className:"Ext.Base",$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(e){var t,n,i,r,l,d,u,c,h,p,f,g,m,x=this,v=[],y=Ext.getCompatVersion(e.name);for(n in e)s.test(n)&&(m=new Ext.Version(n),m.deprecations=e[n],v.push(m));for(v.sort(a.compare),i=v.length;i--&&(t=(m=v[i]).deprecations,l=x.prototype,g=t.statics,d=y&&y.lt(m));)for(;t;){if(h=t.methods)for(p in h)f=h[p],c=null,f&&(Ext.isString(f)?d&&(c=o(f)):(r="",(f.message||f.fn)&&(f=f.fn),u=l.hasOwnProperty(p)&&l[p],d&&f&&(f.$owner=x,f.$name=p,u&&(f.$previous=u),c=f))),c&&(l[p]=c);t=g,g=null,l=x}},extend:function(e){var t,n,i,r,o,a=this,s=e.prototype;if(t=a.prototype=Ext.Object.chain(s),t.self=a,a.superclass=t.superclass=s,!e.$isClass)for(n in c)n in t&&(t[n]=c[n]);if(o=s.$inheritableStatics)for(n=0,i=o.length;i>n;n++)r=o[n],a.hasOwnProperty(r)||(a[r]=e[r]);e.$onExtended&&(a.$onExtended=e.$onExtended.slice()),a.getConfigurator()},$onExtended:[],triggerExtended:function(){var e,t,n=this.$onExtended,i=n.length;if(i>0)for(e=0;i>e;e++)t=n[e],t.fn.apply(t.scope||this,arguments)},onExtended:function(e,t){return this.$onExtended.push({fn:e,scope:t}),this},addStatics:function(e){return this.addMembers(e,!0),this},addInheritableStatics:function(e){var t,n,i,r,o=this.prototype;t=o.$inheritableStatics,n=o.$hasInheritableStatics,t||(t=o.$inheritableStatics=[],n=o.$hasInheritableStatics={});for(i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r,n[i]||(n[i]=!0,t.push(i)));return this},addMembers:function(e,t){var n,i,r,o,a,s,l,d=this,u=Ext.Function.clone,c=t?d:d.prototype,h=!t&&c.defaultConfig,p=Ext.enumerables,f=e.privates;f&&(delete e.privates,t||(l=f.statics,delete f.statics),d.addMembers(f,t,s),l&&d.addMembers(l,!0,s));for(a in e)if(e.hasOwnProperty(a)){if(o=e[a],"function"!=typeof o||o.$isClass||o.$nullFn){if(h&&a in h&&!c.config.hasOwnProperty(a)){(n||(n={}))[a]=o;continue}}else o.$owner&&(o=u(o)),c.hasOwnProperty(a)&&(o.$previous=c[a]),o.$owner=d,o.$name=a;c[a]=o}if(n&&d.addConfig(n),p)for(i=0,r=p.length;r>i;++i)e.hasOwnProperty(a=p[i])&&(o=e[a],o&&!o.$nullFn&&(o.$owner&&(o=u(o)),o.$owner=d,o.$name=a,c.hasOwnProperty(a)&&(o.$previous=c[a])),c[a]=o);return this},addMember:function(e,t){return l[e]=t,this.addMembers(l),delete l[e],this},borrow:function(e,t){var n,i,r,o=e.prototype,a={};for(t=Ext.Array.from(t),n=0,i=t.length;i>n;n++)r=t[n],a[r]=o[r];return this.addMembers(a)},override:function(e){var t=this,n=e.statics,i=e.inheritableStatics,r=e.config,o=e.mixins,a=e.cachedConfig;return(n||i||r)&&(e=Ext.apply({},e)),n&&(t.addMembers(n,!0),delete e.statics),i&&(t.addInheritableStatics(i),delete e.inheritableStatics),r&&(t.addConfig(r),delete e.config),a&&(t.addCachedConfig(a),delete e.cachedConfig),delete e.mixins,t.addMembers(e),o&&t.mixin(o),t},callParent:function(e){var t;return(t=this.callParent.caller)&&(t.$previous||(t=t.$owner?t:t.caller)&&t.$owner.superclass.self[t.$name]).apply(this,e||n)},callSuper:function(e){var t;return(t=this.callSuper.caller)&&((t=t.$owner?t:t.caller)&&t.$owner.superclass.self[t.$name]).apply(this,e||n)},mixin:function(e,t){var n,i,r,o,a,s,l,d,u,c=this;if("string"==typeof e){n=t.prototype,i=c.prototype,n.onClassMixedIn&&n.onClassMixedIn.call(t,c),i.hasOwnProperty("mixins")||("mixins"in i?i.mixins=Ext.Object.chain(i.mixins):i.mixins={});for(r in n)d=n[r],"mixins"===r?Ext.applyIf(i.mixins,d):"mixinId"!==r&&"config"!==r&&void 0===i[r]&&(i[r]=d);if(o=n.$inheritableStatics)for(a=0,s=o.length;s>a;a++)l=o[a],c.hasOwnProperty(l)||(c[l]=t[l]);return"config"in n&&c.addConfig(n.config,t),i.mixins[e]=n,n.afterClassMixedIn&&n.afterClassMixedIn.call(t,c),c}if(u=e,u instanceof Array)for(a=0,s=u.length;s>a;a++)n=u[a],c.mixin(n.prototype.mixinId||n.$className,n);else for(var h in u)c.mixin(h,u[h])},addConfig:function(e,t){var n=this.$config||this.getConfigurator();n.add(e,t)},addCachedConfig:function(e,t){var n,i={};for(n in e)i[n]={cached:!0,$value:e[n]};this.addConfig(i,t)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:e(function(e,t){d[e]=function(){return this[t].apply(this,arguments)},this.override(d),delete d[e]})});for(t in u)u.hasOwnProperty(t)&&i.push(t);return u.$staticMembers=i,u.getConfigurator(),u.addMembers({$className:"Ext.Base",isInstance:!0,$configPrefixed:!0,$configStrict:!0,isConfiguring:!1,isFirstInstance:!1,statics:function(){var e=this.statics.caller,t=this.self;return e?e.$owner:t},callParent:function(e){var t,i=(t=this.callParent.caller)&&(t.$previous||(t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name]);return i.apply(this,e||n)},callSuper:function(e){var t,i=(t=this.callSuper.caller)&&(t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name];return i.apply(this,e||n)},self:u,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(e){var t=this,n=t.getConfigurator();return t.initConfig=Ext.emptyFn,t.initialConfig=e||{},n.configure(t,e),t},beforeInitConfig:Ext.emptyFn,getConfig:r,setConfig:function(e,t,n){var i,r=this;return e&&("string"==typeof e?(i={},i[e]=t):i=e,r.getConfigurator().reconfigure(r,i,n)),r},getCurrentConfig:function(){var e=this.getConfigurator();return e.getCurrentConfig(this)},hasConfig:function(e){return e in this.defaultConfig},getInitialConfig:function(e){var t=this.config;return e?t[e]:t},$links:null,link:function(e,t){var n=this,i=n.$links||(n.$links={});return i[e]=!0,n[e]=t,t},unlink:function(e){var t,n,i,r,o=this;for(t=0,n=e.length;n>t;t++)i=e[t],r=o[i],r&&(r.isInstance&&!r.isDestroyed?r.destroy():r.parentNode&&"nodeType"in r&&r.parentNode.removeChild(r)),o[i]=null;return o},destroy:function(){var e=this,t=e.$links;e.destroy=Ext.emptyFn,e.isDestroyed=!0,t&&(e.$links=null,e.unlink(Ext.Object.getKeys(t)))}}),c.callOverridden=c.callParent,u}(Ext.Function.flexSetter),function(e,t){(Ext.util||(Ext.util={})).Cache=e=function(e){var t,n=this;e&&Ext.apply(n,e),n.head=t={key:null,value:null},n.map={},t.next=t.prev=t},e.prototype=t={maxSize:100,count:0,clear:function(){var e=this,t=e.head,n=t.next;if(t.next=t.prev=t,!e.evict.$nullFn)for(;n!==t;n=n.next)e.evict(n.key,n.value);e.count=0},each:function(e,t){t=t||this;for(var n=this.head,i=n.next;i!==n&&!e.call(t,i.key,i.value);i=i.next);},get:function(e){var t=this,n=t.head,i=t.map,r=i[e];if(r)r.prev!==n&&(t.unlinkEntry(r),t.linkEntry(r));else for(i[e]=r={key:e,value:t.miss.apply(t,arguments)},t.linkEntry(r),++t.count;t.count>t.maxSize;)t.unlinkEntry(n.prev,!0),--t.count;return r.value},evict:Ext.emptyFn,linkEntry:function(e){var t=this.head,n=t.next;e.next=n,e.prev=t,t.next=e,n.prev=e},unlinkEntry:function(e,t){var n=e.next,i=e.prev;i.next=n,n.prev=i,t&&this.evict(e.key,e.value)}},t.destroy=t.clear}(),function(){function e(){function e(){return this.constructor.apply(this,arguments)||null}return e}var t,n=Ext.Base,i=n.$staticMembers,r=function(e,t){return e.length-t.length||(t>e?-1:e>t?1:0)};Ext.Class=t=function(e,n,i){return"function"!=typeof e&&(i=n,n=e,e=null),n||(n={}),e=t.create(e,n),t.process(e,n,i),e},Ext.apply(t,{makeCtor:e,onBeforeCreated:function(e,t,n){e.addMembers(t),n.onCreated.call(e,e)},create:function(t){var r,o=i.length;for(t||(t=e());o--;)r=i[o],t[r]=n[r];return t},process:function(e,n,i){var r,o,a,s,l,d,u,c=n.preprocessors||t.defaultPreprocessors,h=this.preprocessors,p={onBeforeCreated:this.onBeforeCreated},f=[];for(delete n.preprocessors,e._classHooks=p,a=0,s=c.length;s>a;a++)if(r=c[a],"string"==typeof r){if(r=h[r],o=r.properties,o===!0)f.push(r.fn);else if(o)for(l=0,d=o.length;d>l;l++)if(u=o[l],n.hasOwnProperty(u)){f.push(r.fn);break}}else f.push(r);p.onCreated=i?i:Ext.emptyFn,p.preprocessors=f,this.doProcess(e,n,p)},doProcess:function(e,t,n){for(var i=this,r=n.preprocessors,o=r.shift(),a=i.doProcess;o;o=r.shift())if(o.call(i,e,t,n,a)===!1)return;n.onBeforeCreated.apply(i,arguments)},preprocessors:{},registerPreprocessor:function(e,t,n,i,r){return i||(i="last"),n||(n=[e]),this.preprocessors[e]={name:e,properties:n||!1,fn:t},this.setDefaultPreprocessorPosition(e,i,r),this},getPreprocessor:function(e){return this.preprocessors[e]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(e){return this.defaultPreprocessors=Ext.Array.from(e),this},setDefaultPreprocessorPosition:function(e,t,n){var i,r=this.defaultPreprocessors;if("string"==typeof t){if("first"===t)return r.unshift(e),this;if("last"===t)return r.push(e),this;t="after"===t?1:-1}return i=Ext.Array.indexOf(r,n),-1!==i&&Ext.Array.splice(r,Math.max(0,i+t),0,e),this}}),t.registerPreprocessor("extend",function(e,t){var n,i,r,o=Ext.Base,a=o.prototype,s=t.extend;if(delete t.extend,n=s&&s!==Object?s:o,i=n.prototype,!n.$isClass)for(r in a)i[r]||(i[r]=a[r]);e.extend(n),e.triggerExtended.apply(e,arguments),t.onClassExtended&&(e.onExtended(t.onClassExtended,e),delete t.onClassExtended)},!0),t.registerPreprocessor("privates",function(e,t){var n=t.privates,i=n.statics,r=n.privacy||!0;delete t.privates,delete n.statics,e.addMembers(n,!1,r),i&&e.addMembers(i,!0,r)}),t.registerPreprocessor("statics",function(e,t){e.addStatics(t.statics),delete t.statics}),t.registerPreprocessor("inheritableStatics",function(e,t){e.addInheritableStatics(t.inheritableStatics),delete t.inheritableStatics}),Ext.createRuleFn=function(e){return Function("$c","with($c) { return ("+e+"); }")},Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn}),Ext.ruleKeySortFn=r,Ext.getPlatformConfigKeys=function(e){var t,n,i=[];for(t in e)n=Ext.expressionCache.get(t),n(Ext.platformTags)&&i.push(t);return i.sort(r),i},t.registerPreprocessor("platformConfig",function(e,t){var n,i,r,o,a,s,l,d,u,c,h,p,f,g,m,x,v=t.platformConfig,y=t.config;if(delete t.platformConfig,v instanceof Array){for(y=y||{},x=(Ext.theme||(Ext.theme={name:"Default"})).name,p=0,f=v.length;f>p;p++)if(h=v[p],u=h.platform,delete h.platform,c=[].concat(h.theme),m=c.length,delete h.theme,u&&Ext.filterPlatform(u)&&Ext.merge(y,h),m)for(g=0;m>g;g++)x===c[g]&&Ext.merge(y,h)}else for(o=e.getConfigurator(),i=o.configs,s=Ext.getPlatformConfigKeys(v),p=0,f=s.length;f>p;++p){r=v[s[p]],a=n=null;for(l in r)d=r[l],y&&l in y?((n||(n={}))[l]=d,(a||(a={}))[l]=y[l],delete y[l]):l in i?(n||(n={}))[l]=d:t[l]=d;a&&o.add(a),n&&o.add(n)}}),t.registerPreprocessor("config",function(e,t){t.hasOwnProperty("$configPrefixed")&&(e.prototype.$configPrefixed=t.$configPrefixed),e.addConfig(t.config),delete t.config}),t.registerPreprocessor("cachedConfig",function(e,t){t.hasOwnProperty("$configPrefixed")&&(e.prototype.$configPrefixed=t.$configPrefixed),e.addCachedConfig(t.cachedConfig),delete t.cachedConfig}),t.registerPreprocessor("mixins",function(e,t,n){var i=t.mixins,r=n.onCreated;delete t.mixins,n.onCreated=function(){return n.onCreated=r,e.mixin(i),n.onCreated.apply(this,arguments)}}),Ext.extend=function(e,n,i){2===arguments.length&&Ext.isObject(n)&&(i=n,n=e,e=null);var r;if(!n)throw Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.");return i.extend=n,i.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"],e?(r=new t(e,i),r.prototype.constructor=e):r=new t(i),r.prototype.override=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},r}}(),Ext.Inventory=function(){var e=this;e.names=[],e.paths={},e.alternateToName={},e.aliasToName={},e.nameToAliases={},e.nameToAlternates={}},Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(e,t){return this.addMapping(e,t,this.aliasToName,this.nameToAliases)},addAlternate:function(e,t){return this.addMapping(e,t,this.alternateToName,this.nameToAlternates)},addMapping:function(e,t,n,i){var r,o,a,s,l,d,u=e.$className||e,c=u,h=this._array1;Ext.isString(u)&&(c={},c[u]=t);for(a in c)for(o=c[a],Ext.isString(o)&&(h[0]=o,o=h),l=o.length,d=i[a]||(i[a]=[]),s=0;l>s;++s)(r=o[s])&&n[r]!==a&&(n[r]=a,d.push(r))},getAliasesByName:function(e){return this.nameToAliases[e]||null},getAlternatesByName:function(e){return this.nameToAlternates[e]||null},getNameByAlias:function(e){return this.aliasToName[e]||""},getNameByAlternate:function(e){return this.alternateToName[e]||""},getNamesByExpression:function(e,t,n){var i,r,o,a,s,l,d,u=this,c=u.aliasToName,h=u.alternateToName,p=u.nameToAliases,f=u.nameToAlternates,g=n?t:{},m=[],x=Ext.isString(e)?[e]:e,v=x.length,y=u.wildcardRe;for(r=0;v>r;++r)if((i=x[r]).indexOf("*")<0)(l=c[i])||(l=h[i])||(l=i),l in g||t&&l in t||(g[l]=1,m.push(l));else{d=RegExp("^"+i.replace(y,"(.*?)")+"$");for(l in p)if(!(l in g||t&&l in t)){if(!(a=d.test(l))){for(s=(o=p[l]).length;!a&&s-->0;)a=d.test(o[s]);if(o=f[l],o&&!a)for(s=o.length;!a&&s-->0;)a=d.test(o[s])}a&&(g[l]=1,m.push(l))}}return m},getPath:function(e){var t,n=this,i=n.paths,r="";return e in i?r=i[e]:(t=n.getPrefix(e),t&&(e=e.substring(t.length+1),r=i[t],r&&(r+="/")),r+=e.replace(n.dotRe,"/")+".js"),r},getPrefix:function(e){if(e in this.paths)return e;for(var t,n,i=this.getPrefixes(),r=i.length;r-->0;)if(t=(n=i[r]).length,t<e.length&&"."===e.charAt(t)&&n===e.substring(0,t))return n;return""},getPrefixes:function(){var e=this,t=e.prefixes;return t||(e.prefixes=t=e.names.slice(0),t.sort(e._compareNames)),t},removeName:function(e){var t,n,i=this,r=i.aliasToName,o=i.alternateToName,a=i.nameToAliases,s=i.nameToAlternates,l=a[e],d=s[e];if(delete a[e],delete s[e],l)for(t=l.length;t--;)e===(n=l[t])&&delete r[n];if(d)for(t=d.length;t--;)e===(n=d[t])&&delete o[n]},resolveName:function(e){var t,n=this;return e in n.nameToAliases||(t=n.aliasToName[e])||(t=n.alternateToName[e]),t||e},select:function(e,t){
var n,i=this,r={},o={excludes:r,exclude:function(){return i.getNamesByExpression(arguments,r,!0),this}};for(n in e)o[n]=i.selectMethod(r,e[n],t||e);return o},selectMethod:function(e,t,n){var i=this;return function(r){var o=Ext.Array.slice(arguments,1);return o.unshift(i.getNamesByExpression(r,e)),t.apply(n,o)}},setPath:Ext.Function.flexSetter(function(e,t){var n=this;return n.paths[e]=t,n.names.push(e),n.prefixes=null,n}),_compareNames:function(e,t){var n=e.length-t.length;return n||(n=t>e?-1:1),n}},Ext.ClassManager=function(e,t,n,i,r){var o=Ext.Class.makeCtor,a=Ext.apply(new Ext.Inventory,{classes:{},classState:{},existCache:{},namespaceRewrites:[{from:"Ext.",to:Ext}],enableNamespaceParseCache:!0,namespaceParseCache:{},instantiators:[],isCreated:function(e){var t,n,i,o,s;if(a.classes[e]||a.existCache[e])return!0;for(o=r,s=a.parseNamespace(e),t=0,n=s.length;n>t;t++)if(i=s[t],"string"!=typeof i)o=i;else{if(!o||!o[i])return!1;o=o[i]}return a.triggerCreated(e),!0},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(e,t){a.existCache[e]=t||1,a.classState[e]+=40,a.notify(e,a.createdListeners,a.nameCreatedListeners)},onCreated:function(e,t,n){a.addListener(e,t,n,a.createdListeners,a.nameCreatedListeners)},notify:function(e,t,n){var i,r,o,s,l,d,u=a.getAlternatesByName(e),c=[e];for(i=0,r=t.length;r>i;i++)l=t[i],l.fn.call(l.scope,e);for(;c;){for(i=0,r=c.length;r>i;i++)if(d=c[i],t=n[d]){for(o=0,s=t.length;s>o;o++)l=t[o],l.fn.call(l.scope,d);delete n[d]}c=u,u=null}},addListener:function(e,t,n,i,r){if(Ext.isArray(n))for(e=Ext.Function.createBarrier(n.length,e,t),o=0;o<n.length;o++)this.addListener(e,null,n[o],i,r);else{var o,a={fn:e,scope:t};if(n){if(this.isCreated(n))return void e.call(t,n);r[n]||(r[n]=[]),r[n].push(a)}else i.push(a)}},parseNamespace:function(e){var t,n,i,o,a,s,l,d,u,c=this.namespaceParseCache;if(this.enableNamespaceParseCache&&c.hasOwnProperty(e))return c[e];for(t=[],n=this.namespaceRewrites,i=r,o=e,d=0,u=n.length;u>d;d++)if(a=n[d],s=a.from,l=a.to,o===s||o.substring(0,s.length)===s){o=o.substring(s.length),"string"!=typeof l?i=l:t=t.concat(l.split("."));break}return t.push(i),t=t.concat(o.split(".")),this.enableNamespaceParseCache&&(c[e]=t),t},setNamespace:function(e,t){var n,i,o=r,a=this.parseNamespace(e),s=a.length-1,l=a[s];for(n=0;s>n;n++)i=a[n],"string"!=typeof i?o=i:(o[i]||(o[i]={}),o=o[i]);return o[l]=t,o[l]},createNamespaces:function(){var e,t,n,i,o,a,s=r;for(n=0,o=arguments.length;o>n;n++)for(e=this.parseNamespace(arguments[n]),i=0,a=e.length;a>i;i++)t=e[i],"string"!=typeof t?s=t:(s[t]||(s[t]={}),s=s[t]);return s},set:function(e,t){var n=this,i=n.getName(t);return n.classes[e]=n.setNamespace(e,t),i&&i!==e&&n.addAlternate(i,e),this},get:function(e){var t,n,i,o,a,s=this.classes;if(s[e])return s[e];for(t=r,n=this.parseNamespace(e),o=0,a=n.length;a>o;o++)if(i=n[o],"string"!=typeof i)t=i;else{if(!t||!t[i])return null;t=t[i]}return t},addNameAliasMappings:function(e){this.addAlias(e)},addNameAlternateMappings:function(e){this.addAlternate(e)},getByAlias:function(e){return this.get(this.getNameByAlias(e))},getName:function(e){return e&&e.$className||""},getClass:function(e){return e&&e.self||null},create:function(t,n,i){var r=o(t);return"function"==typeof n&&(n=n(r)),n.$className=t,new e(r,n,function(){var e,r,o,s,l,d,u,c=n.postprocessors||a.defaultPostprocessors,h=a.postprocessors,p=[];for(delete n.postprocessors,r=0,o=c.length;o>r;r++)if(e=c[r],"string"==typeof e){if(e=h[e],d=e.properties,d===!0)p.push(e.fn);else if(d)for(s=0,l=d.length;l>s;s++)if(u=d[s],n.hasOwnProperty(u)){p.push(e.fn);break}}else p.push(e);n.postprocessors=p,n.createdFn=i,a.processCreate(t,this,n)})},processCreate:function(e,t,n){var i=this,r=n.postprocessors.shift(),o=n.createdFn;return r?void(r.call(i,e,t,n,i.processCreate)!==!1&&i.processCreate(e,t,n)):(e&&i.set(e,t),delete t._classHooks,o&&o.call(t,t),void(e&&i.triggerCreated(e)))},createOverride:function(e,t,n){var i,r,o=this,s=t.override,l=t.requires,d=t.uses,u=t.mixins,c=t.compatibility,h=function(){var a,c,p,f,g;if(!r){if(c=l?l.slice(0):[],u)if(i=u instanceof Array)for(p=0,g=u.length;g>p;++p)Ext.isString(a=u[p])&&c.push(a);else for(f in u)Ext.isString(a=u[f])&&c.push(a);if(r=!0,c.length)return void Ext.require(c,h)}if(i)for(p=0,g=u.length;g>p;++p)Ext.isString(a=u[p])&&(u[p]=Ext.ClassManager.get(a));else if(u)for(f in u)Ext.isString(a=u[f])&&(u[f]=Ext.ClassManager.get(a));a=o.get(s),delete t.override,delete t.compatibility,delete t.requires,delete t.uses,Ext.override(a,t),Ext.Loader.history.push(e),d&&Ext.Loader.addUsedClasses(d),n&&n.call(a,a)};return a.overrideMap[e]=!0,(!c||Ext.checkVersion(c))&&o.onCreated(h,o,s),o.triggerCreated(e,2),o},instantiateByAlias:function(){var e=arguments[0],t=n.call(arguments),i=this.getNameByAlias(e);return t[0]=i,Ext.create.apply(Ext,t)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(e,t){return t=i(t,!0),t.unshift(e),Ext.create.apply(Ext,t)},getInstantiator:function(e){var t,n,i,r=this.instantiators;if(t=r[e],!t){for(n=e,i=[],n=0;e>n;n++)i.push("a["+n+"]");t=r[e]=Function("c","a","return new c("+i.join(",")+")")}return t},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(e,t,n,i,r){return i||(i="last"),n||(n=[e]),this.postprocessors[e]={name:e,properties:n||!1,fn:t},this.setDefaultPostprocessorPosition(e,i,r),this},setDefaultPostprocessors:function(e){return this.defaultPostprocessors=i(e),this},setDefaultPostprocessorPosition:function(e,t,n){var i,r=this.defaultPostprocessors;if("string"==typeof t){if("first"===t)return r.unshift(e),this;if("last"===t)return r.push(e),this;t="after"===t?1:-1}return i=Ext.Array.indexOf(r,n),-1!==i&&Ext.Array.splice(r,Math.max(0,i+t),0,e),this}});if(a.registerPostprocessor("alias",function(e,n,i){var r,o,a=Ext.Array.from(i.alias);for(r=0,o=a.length;o>r;r++)t=a[r],this.addAlias(n,t)},["xtype","alias"]),a.registerPostprocessor("singleton",function(e,t,n,i){return n.singleton?(i.call(this,e,new t,n),!1):!0}),a.registerPostprocessor("alternateClassName",function(e,t,n){var i,r,o,a=n.alternateClassName;for(a instanceof Array||(a=[a]),i=0,r=a.length;r>i;i++)o=a[i],this.set(o,t)}),a.registerPostprocessor("debugHooks",function(e,t){var n=t.isInstance?t.self:t;delete n.prototype.debugHooks}),a.registerPostprocessor("deprecated",function(e,t,n){var i=t.isInstance?t.self:t;i.addDeprecations(n.deprecated),delete i.prototype.deprecated}),Ext.apply(Ext,{create:function(){var e,t=arguments[0],i=typeof t,r=n.call(arguments,1);return"function"===i?e=t:("string"!==i&&0===r.length&&(r=[t],(t=t.xclass)||(t=r[0].xtype,t&&(t="widget."+t))),t=a.resolveName(t),e=a.get(t)),e||(Ext.syncRequire(t),e=a.get(t)),a.getInstantiator(r.length)(e,r)},widget:function(e,t){var n,i,r,o=e;return"string"!=typeof o?(t=e,o=t.xtype,i=t.xclass):t=t||{},t.isComponent?t:(i||(n="widget."+o,i=a.getNameByAlias(n)),i&&(r=a.get(i)),r?new r(t):Ext.create(i||n,t))},createByAlias:t(a,"instantiateByAlias"),define:function(e,t){return t.override?(a.classState[e]=20,a.createOverride.apply(a,arguments)):(a.classState[e]=10,a.create.apply(a,arguments))},undefine:function(e){var t,n,i,r,o=a.classes;for(delete a.namespaceParseCache[e],delete o[e],delete a.existCache[e],delete a.classState[e],a.removeName(e),t=a.parseNamespace(e),n=t.length-1,i=t[0],r=1;n>r;r++)if(i=i[t[r]],!i)return;try{delete i[t[n]]}catch(s){i[t[n]]=void 0}},getClassName:t(a,"getName"),getDisplayName:function(e){if(e){if(e.displayName)return e.displayName;if(e.$name&&e.$class)return Ext.getClassName(e.$class)+"#"+e.$name;if(e.$className)return e.$className}return"Anonymous"},getClass:t(a,"getClass"),namespace:t(a,"createNamespaces")}),Ext.createWidget=Ext.widget,Ext.ns=Ext.namespace,e.registerPreprocessor("className",function(e,t){"$className"in t&&(e.$className=t.$className)},!0,"first"),e.registerPreprocessor("alias",function(e,t){var n,r,o,a,s=e.prototype,l=i(t.xtype),d=i(t.alias),u="widget.",c=u.length,h=Array.prototype.slice.call(s.xtypesChain||[]),p=Ext.merge({},s.xtypesMap||{});for(n=0,r=d.length;r>n;n++)o=d[n],o.substring(0,c)===u&&(a=o.substring(c),Ext.Array.include(l,a));for(e.xtype=t.xtype=l[0],t.xtypes=l,n=0,r=l.length;r>n;n++)a=l[n],p[a]||(p[a]=!0,h.push(a));for(t.xtypesChain=h,t.xtypesMap=p,Ext.Function.interceptAfter(t,"onClassCreated",function(){var e,t,i=s.mixins;for(e in i)if(i.hasOwnProperty(e)&&(t=i[e],l=t.xtypes))for(n=0,r=l.length;r>n;n++)a=l[n],p[a]||(p[a]=!0,h.push(a))}),n=0,r=l.length;r>n;n++)a=l[n],Ext.Array.include(d,u+a);t.alias=d},["xtype","alias"]),Ext.manifest){var s,l,d,u,c=Ext.manifest,h=c.classes,p=c.paths,f={},g={};if(p){if(c.bootRelative){u=Ext.Boot.baseUrl;for(d in p)p.hasOwnProperty(d)&&(p[d]=u+p[d])}a.setPath(p)}if(h)for(s in h)g[s]=[],f[s]=[],l=h[s],l.alias&&(f[s]=l.alias),l.alternates&&(g[s]=l.alternates);a.addAlias(f),a.addAlternate(g)}return a}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global),(Ext.env||(Ext.env={})).Browser=function(e,t){var n,i,r,o,a,s=this,l=s.browserPrefixes,d=s.enginePrefixes,u=e.match(RegExp("((?:"+Ext.Object.getValues(l).join(")|(?:")+"))([\\w\\._]+)")),c=e.match(RegExp("((?:"+Ext.Object.getValues(d).join(")|(?:")+"))([\\w\\._]+)")),h=s.browserNames,p=h.other,f=s.engineNames,g=f.other,m="",x="",v="",y=!1;if(s.userAgent=e,u&&(p=h[Ext.Object.getKey(l,u[1])],"Safari"===p&&/^Opera/.test(e)&&(p="Opera"),m=new Ext.Version(u[2])),c&&(g=f[Ext.Object.getKey(d,c[1])],x=new Ext.Version(c[2])),"Trident"===g&&"IE"!==p){p="IE";var E=e.match(/.*rv:(\d+.\d+)/);E&&E.length&&(E=E[1],m=new Ext.Version(E))}if(e.match(/FB/)&&"Other"===p&&(p=h.safari,g=f.webkit),e.match(/Android.*Chrome/g)&&(p="ChromeMobile"),e.match(/OPR/)&&(p="Opera",u=e.match(/OPR\/(\d+.\d+)/),m=new Ext.Version(u[1])),Ext.apply(this,{engineName:g,engineVersion:x,name:p,version:m}),this.setFlag(p,!0,t),m){if(v=m.getMajor()||"",s.is.IE)for(v=parseInt(v,10),r=document.documentMode,7===r||7===v&&8!==r&&9!==r&&10!==r?v=7:8===r||8===v&&8!==r&&9!==r&&10!==r?v=8:9===r||9===v&&7!==r&&8!==r&&10!==r?v=9:10===r||10===v&&7!==r&&8!==r&&9!==r?v=10:(11===r||11===v&&7!==r&&8!==r&&9!==r&&10!==r)&&(v=11),a=Math.max(v,11),n=7;a>=n;++n)i="isIE"+n,n>=v&&(Ext[i+"m"]=!0),v===n&&(Ext[i]=!0),v>=n&&(Ext[i+"p"]=!0);s.is.Opera&&parseInt(v,10)<=12&&(Ext.isOpera12m=!0),Ext.chromeVersion=Ext.isChrome?v:0,Ext.firefoxVersion=Ext.isFirefox?v:0,Ext.ieVersion=Ext.isIE?v:0,Ext.operaVersion=Ext.isOpera?v:0,Ext.safariVersion=Ext.isSafari?v:0,Ext.webKitVersion=Ext.isWebKit?v:0,this.setFlag(p+v,!0,t),this.setFlag(p+m.getShortVersion())}for(n in h)h.hasOwnProperty(n)&&(o=h[n],this.setFlag(o,p===o));this.setFlag(o),x&&(this.setFlag(g+(x.getMajor()||"")),this.setFlag(g+x.getShortVersion()));for(n in f)f.hasOwnProperty(n)&&(o=f[n],this.setFlag(o,g===o,t));this.setFlag("Standalone",!!navigator.standalone),this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple)),this.setFlag("WebWorks",!!window.blackberry),void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova?(y=!0,this.setFlag("PhoneGap"),this.setFlag("Cordova")):window.isNK&&(y=!0,this.setFlag("Sencha")),/(Glass)/i.test(e)&&this.setFlag("GoogleGlass"),/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e)&&(y=!0),this.setFlag("WebView",y),this.isStrict=Ext.isStrict="CSS1Compat"===document.compatMode,this.isSecure=Ext.isSecure,this.identity=p+v+(this.isStrict?"Strict":"Quirks")},Ext.env.Browser.prototype={constructor:Ext.env.Browser,browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},browserPrefixes:{ie:"MSIE ",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(e){return!!this.is[e]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(e,t,n){return void 0===t&&(t=!0),this.is[e]=t,this.is[e.toLowerCase()]=t,n&&(Ext["is"+e]=t),this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(e){var t=this.propertyPrefixes[this.engineName];return t.length>0?t+Ext.String.capitalize(e):e},getPreferredTranslationMethod:function(e){return"object"==typeof e&&"translationMethod"in e&&"auto"!==e.translationMethod?e.translationMethod:"csstransform"}},function(e){Ext.browser=new Ext.env.Browser(e,!0),Ext.userAgent=e.toLowerCase(),Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent),Ext.env.OS=function(e,t,n){var i,r,o,a,s,l,d=this,u=d.names,c=d.prefixes,h="",p=d.is;n=n||Ext.browser;for(r in c)if(c.hasOwnProperty(r)&&(o=c[r],a=e.match(RegExp("(?:"+o+")([^\\s;]+)")))){i=u[r],l=a[1],h=l&&"HTC_"===l?new Ext.Version("2.3"):l&&"Silk/"===l?new Ext.Version("2.3"):new Ext.Version(a[a.length-1]);break}i||(i=u[(e.toLowerCase().match(/mac|win|linux/)||["other"])[0]],h=new Ext.Version("")),this.name=i,this.version=h,t&&this.setFlag(t.replace(/ simulator$/i,"")),this.setFlag(i),h&&(this.setFlag(i+(h.getMajor()||"")),this.setFlag(i+h.getShortVersion()));for(r in u)u.hasOwnProperty(r)&&(s=u[r],p.hasOwnProperty(i)||this.setFlag(s,i===s));"iOS"===this.name&&568===window.screen.height&&this.setFlag("iPhone5"),(n.is.Safari||n.is.Silk)&&((this.is.Android2||this.is.Android3||501===n.version.shortVersion)&&(n.setFlag("AndroidStock"),n.setFlag("AndroidStock2")),this.is.Android4&&(n.setFlag("AndroidStock"),n.setFlag("AndroidStock4")))},Ext.env.OS.prototype={constructor:Ext.env.OS,names:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chrome:"ChromeOS",other:"Other"},prefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chrome:"CrOS "},is:function(e){return!!this[e]},name:null,version:null,setFlag:function(e,t){return void 0===t&&(t=!0),this.flags&&(this.flags[e]=t),this.is[e]=t,this.is[e.toLowerCase()]=t,this}},function(){var e,t,n,i=Ext.global.navigator,r=i.userAgent,o=Ext.env.OS,a=Ext.is||(Ext.is={});o.prototype.flags=a,Ext.os=e=new o(r,i.platform),t=e.name,Ext["is"+t]=!0,Ext.isMac=a.Mac=a.MacOS;var s=window.location.search.match(/deviceType=(Tablet|Phone)/),l=window.deviceType;s&&s[1]?n=s[1]:"iPhone"===l?n="Phone":"iPad"===l?n="Tablet":e.is.Android||e.is.iOS||e.is.WindowsPhone||!/Windows|Linux|MacOS/.test(t)?n=e.is.iPad||e.is.RIMTablet||e.is.Android3||Ext.browser.is.Silk||e.is.Android4&&-1===r.search(/mobile/i)?"Tablet":"Phone":(n="Desktop",Ext.browser.is.WebView=!!Ext.browser.is.Ripple),e.setFlag(n,!0),e.deviceType=n,delete o.prototype.flags}(),Ext.feature={has:function(e){return!!this.has[e]},testElements:{},getTestElement:function(e,t){if(void 0===e)e="div";else if("string"!=typeof e)return e;return t?document.createElement(e):(this.testElements[e]||(this.testElements[e]=document.createElement(e)),this.testElements[e])},isStyleSupported:function(e,t){var n=this.getTestElement(t).style,i=Ext.String.capitalize(e);return void 0!==n[e]||void 0!==n[Ext.browser.getStylePrefix(e)+i]?!0:!1},isStyleSupportedWithoutPrefix:function(e,t){var n=this.getTestElement(t).style;return void 0!==n[e]?!0:!1},isEventSupported:function(e,t){void 0===t&&(t=window);var n=this.getTestElement(t),i="on"+e.toLowerCase(),r=i in n;return r||n.setAttribute&&n.removeAttribute&&(n.setAttribute(i,""),r="function"==typeof n[i],void 0!==n[i]&&(n[i]=void 0),n.removeAttribute(i)),r},getStyle:function(e,t){var n=e.ownerDocument.defaultView,i=n?n.getComputedStyle(e,null):e.currentStyle;return(i||e.style)[t]},getSupportedPropertyName:function(e,t){var n=Ext.browser.getVendorProperyName(t);return n in e?n:t in e?t:null},detect:function(e){var t,n,i,r,o=this,a=document,s=o.toRun||o.tests,l=s.length,d=a.createElement("div"),u=[],c=Ext.supports,h=o.has;for(Ext.theme||(Ext.theme={name:"Default"}),Ext.theme.is={},Ext.theme.is[Ext.theme.name]=!0,d.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>',e&&a.body.appendChild(d),i=o.preDetected[Ext.browser.identity]||[];l--;){if(n=s[l],r=i[l],t=n.name,void 0===r){if(!e&&n.ready){u.push(n);continue}r=n.fn.call(o,a,d)}c[t]=h[t]=r}e&&a.body.removeChild(d),o.toRun=u},report:function(){var e,t=[],n=this.tests.length;for(e=0;n>e;++e)t.push(this.has[this.tests[e].name]?1:0);Ext.log(Ext.browser.identity+": ["+t.join(",")+"]")},preDetected:{},tests:[{name:"CSSPointerEvents",fn:function(e){return"pointerEvents"in e.documentElement.style}},{name:"CSS3BoxShadow",fn:function(e){return"boxShadow"in e.documentElement.style||"WebkitBoxShadow"in e.documentElement.style||"MozBoxShadow"in e.documentElement.style}},{name:"ClassList",fn:function(e){return!!e.documentElement.classList}},{name:"Canvas",fn:function(){var e=this.getTestElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))}},{name:"Svg",fn:function(e){return!(!e.createElementNS||!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var e=this.getTestElement(),t=!1;return e.innerHTML="<!--[if vml]><br><![endif]-->",t=1===e.childNodes.length,e.innerHTML="",t}},{name:"touchScroll",fn:function(){var e=Ext.supports,t=0;return navigator.msMaxTouchPoints||Ext.isWebKit&&e.TouchEvents&&Ext.os.is.Desktop?t=1:e.Touch&&(t=2),t}},{name:"Touch",fn:function(){var e=navigator.msMaxTouchPoints||navigator.maxTouchPoints;return Ext.supports.TouchEvents&&1!==e||e>1}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return"orientation"in window&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation"in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase"in window}},{name:"WebSockets",fn:function(){return"WebSocket"in window}},{name:"Range",fn:function(){return!!document.createRange}},{name:"CreateContextualFragment",fn:function(){var e=document.createRange?document.createRange():!1;return e&&!!e.createContextualFragment}},{name:"History",fn:function(){return"history"in window&&"pushState"in window.history}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")&&!Ext.browser.is.AndroidStock2}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return!!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return!!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage"in window&&null!==window.localStorage)return localStorage.setItem("sencha-localstorage-test","test success"),localStorage.removeItem("sencha-localstorage-test"),!0}catch(e){}return!1}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}},{name:"XHRUploadProgress",fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var e=new XMLHttpRequest;return e&&"upload"in e&&"onprogress"in e.upload}return!1}},{name:"NumericInputPlaceHolder",fn:function(){return!(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"ProperHBoxStretching",ready:!0,fn:function(){var e,t=document.createElement("div"),n=t.appendChild(document.createElement("div")),i=n.appendChild(document.createElement("div"));return t.setAttribute("style","width: 100px; height: 100px; position: relative;"),n.setAttribute("style","position: absolute; display: -ms-flexbox; display: -webkit-flex; display: -moz-flexbox; display: flex; -ms-flex-direction: row; -webkit-flex-direction: row; -moz-flex-direction: row; flex-direction: row; min-width: 100%;"),i.setAttribute("style","width: 200px; height: 50px;"),document.body.appendChild(t),e=n.offsetWidth,document.body.removeChild(t),e>100}},{name:"matchesSelector",fn:function(){var e=document.documentElement,t="matches",n="webkitMatchesSelector",i="msMatchesSelector",r="mozMatchesSelector";return e[t]?t:e[n]?n:e[i]?i:e[r]?r:null}},{name:"RightMargin",ready:!0,fn:function(e,t){var n=e.defaultView;return!(n&&"0px"!==n.getComputedStyle(t.firstChild.firstChild,null).marginRight)}},{name:"DisplayChangeInputSelectionBug",fn:function(){var e=Ext.webKitVersion;return e>0&&533>e}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var e=Ext.webKitVersion;return e>0&&534.24>e}},{name:"TransparentColor",ready:!0,fn:function(e,t,n){return n=e.defaultView,!(n&&"transparent"!==n.getComputedStyle(t.lastChild,null).backgroundColor)}},{name:"ComputedStyle",ready:!0,fn:function(e,t,n){return n=e.defaultView,n&&n.getComputedStyle}},{name:"Float",fn:function(e){return"cssFloat"in e.documentElement.style}},{name:"CSS3BorderRadius",ready:!0,fn:function(e){var t,n=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],i=!1;for(t=0;t<n.length;t++)void 0!==e.documentElement.style[n[t]]&&(i=!0);return i&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(e,t){var n="background-image:",i="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",r="linear-gradient(left top, black, white)",o="-moz-"+r,a="-ms-"+r,s="-o-"+r,l=[n+i,n+r,n+o,n+a,n+s];return t.style.cssText=l.join(";"),-1!==(""+t.style.backgroundImage).indexOf("gradient")&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(e){return"onmouseenter"in e.documentElement&&"onmouseleave"in e.documentElement}},{name:"MouseWheel",fn:function(e){return"onmousewheel"in e.documentElement}},{name:"Opacity",fn:function(e,t){return Ext.isIE8?!1:(t.firstChild.style.cssText="opacity:0.73","0.73"==t.firstChild.style.opacity)}},{name:"Placeholder",fn:function(e){return"placeholder"in e.createElement("input")}},{name:"Direct2DBug",fn:function(e){return Ext.isString(e.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(e){return"getBoundingClientRect"in e.documentElement}},{name:"RotatedBoundingClientRect",ready:!0,fn:function(e){var t=e.body,n=!1,i=this.getTestElement(),r=i.style;return i.getBoundingClientRect&&(r.WebkitTransform=r.MozTransform=r.msTransform=r.OTransform=r.transform="rotate(90deg)",r.width="100px",r.height="30px",t.appendChild(i),n=100!==i.getBoundingClientRect().height,t.removeChild(i)),n}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:!0,fn:function(){var e,t=this.getTestElement();return t.innerHTML="<div>a</div>",e=t.firstChild,t.innerHTML="<div>b</div>","a"!==e.innerHTML}},{name:"IncludePaddingInWidthCalculation",ready:!0,fn:function(e,t){return 210===t.childNodes[1].firstChild.offsetWidth}},{name:"IncludePaddingInHeightCalculation",ready:!0,fn:function(e,t){return 210===t.childNodes[1].firstChild.offsetHeight}},{name:"TextAreaMaxLength",fn:function(e){return"maxlength"in e.createElement("textarea")}},{name:"GetPositionPercentage",ready:!0,fn:function(e,t){return"10%"===Ext.feature.getStyle(t.childNodes[2],"left")}},{name:"PercentageHeightOverflowBug",ready:!0,fn:function(e){var t,n,i=!1;return Ext.getScrollbarSize().height&&(n=this.getTestElement(),t=n.style,t.height="50px",t.width="50px",t.overflow="auto",t.position="absolute",n.innerHTML='<div style="display:table;height:100%;"><div style="width:51px;"></div></div>',e.body.appendChild(n),50===n.firstChild.offsetHeight&&(i=!0),e.body.removeChild(n)),i}},{name:"xOriginBug",ready:!0,fn:function(e,t){t.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var n=document.getElementById("b1").getBoundingClientRect(),i=document.getElementById("b2").getBoundingClientRect(),r=document.getElementById("b3").getBoundingClientRect();return i.left!==n.left&&r.right!==n.right}},{name:"ScrollWidthInlinePaddingBug",ready:!0,fn:function(e){var t,n,i=!1;return n=e.createElement("div"),t=n.style,t.height="50px",t.width="50px",t.padding="10px",t.overflow="hidden",t.position="absolute",n.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>',e.body.appendChild(n),70===n.scrollWidth&&(i=!0),e.body.removeChild(n),i}},{name:"rtlVertScrollbarOnRight",ready:!0,fn:function(e,t){t.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var n=t.firstChild,i=n.firstChild;return i.offsetLeft+i.offsetWidth!==n.offsetLeft+n.offsetWidth}},{name:"rtlVertScrollbarOverflowBug",ready:!0,fn:function(e,t){t.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var n=t.firstChild;return n.clientHeight===n.offsetHeight}},{identity:"defineProperty",fn:function(){return Ext.isIE8m?(Ext.Object.defineProperty=Ext.emptyFn,!1):!0}},{identify:"nativeXhr",fn:function(){return"undefined"!=typeof XMLHttpRequest?!0:(XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return null}},!1)}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera&&Ext.operaVersion<12)}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var e=document.documentMode;return"onhashchange"in window&&(void 0===e||e>7)}},{name:"FixedTableWidthBug",ready:!0,fn:function(){if(Ext.isIE8)return!1;var e,t=document.createElement("div"),n=document.createElement("div");return t.setAttribute("style","display:table;table-layout:fixed;"),n.setAttribute("style","display:table-cell;min-width:50px;"),t.appendChild(n),document.body.appendChild(t),t.offsetWidth,t.style.width="25px",e=t.offsetWidth,document.body.removeChild(t),50===e}},{name:"FocusinFocusoutEvents",fn:function(){return!Ext.isGecko}},0]},Ext.feature.tests.pop(),Ext.supports={},Ext.feature.detect(),Ext.env.Ready={blocks:(location.search||"").indexOf("ext-pauseReadyFire")>0?1:0,bound:0,delay:1,firing:!1,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var e=Ext.env.Ready,t=document;e.bound||("complete"===t.readyState?e.onReadyEvent({type:t.readyState||"body"}):(e.bound=1,Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop&&(e.bound=2,t.addEventListener("deviceready",e.onReadyEvent,!1)),t.addEventListener("DOMContentLoaded",e.onReadyEvent,!1),window.addEventListener("load",e.onReadyEvent,!1)))},block:function(){++this.blocks,Ext.isReady=!1},fireReady:function(){var e=Ext.env.Ready;e.state||(Ext._readyTime=Ext.now(),Ext.isDomReady=!0,e.state=1,Ext.feature.detect(!0),e.delay?navigator.standalone?e.timer=Ext.defer(function(){e.timer=null,e.handleReadySoon()},1):e.handleReadySoon():e.handleReady())},handleReady:function(){var e=this;1===e.state&&(e.state=2,Ext._beforeReadyTime=Ext.now(),e.invokeAll(),Ext._afterReadytime=Ext.now())},handleReadySoon:function(e){var t=this;t.timer||(t.timer=Ext.defer(function(){t.timer=null,t.handleReady()},e||t.delay))},invoke:function(e){var t=e.delay;t?Ext.defer(e.fn,t,e.scope):Ext.elevateFunction?Ext.elevateFunction(e.fn,e.scope):e.fn.call(e.scope)},invokeAll:function(){Ext.elevateFunction?Ext.elevateFunction(this.doInvokeAll,this):this.doInvokeAll()},doInvokeAll:function(){var e,t=this,n=t.listeners;for(t.blocks||(Ext.isReady=!0),t.firing=!0;n.length;){if(t.sortGeneration!==t.generation&&(t.sortGeneration=t.generation,n.sort(t.sortFn)),e=n.pop(),t.blocks&&!e.dom){n.push(e);break}t.invoke(e)}t.firing=!1},makeListener:function(e,t,n){var i={fn:e,id:++this.nextId,scope:t,dom:!1,priority:0};return n&&Ext.apply(i,n),i.phase=i.dom?0:1,i},on:function(e,t,n){var i=Ext.env.Ready,r=i.makeListener(e,t,n);2!==i.state||i.firing||!r.dom&&i.blocks?(i.listeners.push(r),++i.generation,i.bound||i.bind()):i.invoke(r)},onReadyEvent:function(e){var t=Ext.env.Ready;Ext.elevateFunction?Ext.elevateFunction(t.doReadyEvent,t,arguments):t.doReadyEvent(e)},doReadyEvent:function(){var e=this;e.bound>0&&(e.unbind(),e.bound=-1),e.state||e.fireReady()},sortFn:function(e,t){return-(e.phase-t.phase||t.priority-e.priority||e.id-t.id)},unblock:function(){var e=this;e.blocks&&(--e.blocks||2!==e.state||e.firing||e.invokeAll())},unbind:function(){var e=this,t=document;e.bound>1&&t.removeEventListener("deviceready",e.onReadyEvent,!1),t.removeEventListener("DOMContentLoaded",e.onReadyEvent,!1),window.removeEventListener("load",e.onReadyEvent,!1)}},function(){var e=Ext.env.Ready;Ext.isIE9m&&Ext.apply(e,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var t=!0;try{document.documentElement.doScroll("left")}catch(n){t=!1}return t&&document.body?e.onReadyEvent({type:"doScroll"}):e.scrollTimer=Ext.defer(e.pollScroll,20),t},bind:function(){if(!e.bound){var t,n=document;try{t=void 0===window.frameElement}catch(i){}if(t&&n.documentElement.doScroll){if(e.pollScroll())return}else e.pollScroll=Ext.emptyFn;"complete"===n.readyState?e.onReadyEvent({type:"already "+(n.readyState||"body")}):(n.attachEvent("onreadystatechange",e.onReadyStateChange),window.attachEvent("onload",e.onReadyEvent),e.bound=1)}},unbind:function(){document.detachEvent("onreadystatechange",e.onReadyStateChange),window.detachEvent("onload",e.onReadyEvent),Ext.isNumber(e.scrollTimer)&&(clearTimeout(e.scrollTimer),e.scrollTimer=null)},onReadyStateChange:function(){var t=document.readyState;e.readyStatesRe.test(t)&&e.onReadyEvent({type:t})}}),Ext.onDocumentReady=function(t,n,i){var r={dom:!0};i&&Ext.apply(r,i),e.on(t,n,r)},Ext.onReady=function(t,n,i){e.on(t,n,i)},Ext.onInternalReady=function(t,n,i){e.on(t,n,Ext.apply({priority:1e3},i))},e.bind()}(),Ext.Loader=new function(){var e=this,t=Ext.ClassManager,n=Ext.Boot,i=Ext.Class,r=Ext.env.Ready,o=Ext.Function.alias,a=["extend","mixins","requires"],s={},l=[],d=[],u=[],c={},h={},p={enabled:!0,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:"_dc",paths:t.paths,preserveScripts:!0,scriptCharset:void 0},f={disableCaching:!0,disableCachingParam:!0,preserveScripts:!0,scriptChainDelay:"loadDelay"};Ext.apply(e,{isInHistory:s,isLoading:!1,history:l,config:p,readyListeners:d,optionalRequires:u,requiresMap:c,hasFileLoadError:!1,scriptsLoading:0,syncModeEnabled:!1,
missingQueue:h,init:function(){var n,i,o,a,s,l=document.getElementsByTagName("script"),d=l[l.length-1].src,u=d.substring(0,d.lastIndexOf("/")+1),c=Ext._classPathMetadata,h=Ext.Microloader,p=Ext.manifest;if(t.getPath("Ext")||t.setPath("Ext",u+"src"),c&&(Ext._classPathMetadata=null,e.addClassPathMappings(c)),p&&(n=p.loadOrder,i=Ext.Boot.baseUrl,n&&p.bootRelative))for(o=n.length,a=0;o>a;a++)s=n[a],s.path=i+s.path;h&&(r.block(),h.onMicroloaderReady(function(){r.unblock()}))},setConfig:Ext.Function.flexSetter(function(t,i){if("paths"===t)e.setPath(i);else{p[t]=i;var r=f[t];r&&n.setConfig(r===!0?t:r,i)}return e}),getConfig:function(e){return e?p[e]:p},setPath:function(){return t.setPath.apply(t,arguments),e},addClassPathMappings:function(n){return t.setPath(n),e},addBaseUrlClassPathMappings:function(e){for(var t in e)e[t]=n.baseUrl+e[t];Ext.Loader.addClassPathMappings(e)},getPath:function(e){return t.getPath(e)},require:function(n,i,r,o){if(o)return e.exclude(o).require(n,i,r);var a=t.getNamesByExpression(n);return e.load(a,i,r)},syncRequire:function(){var t=e.syncModeEnabled;e.syncModeEnabled=!0;var n=e.require.apply(e,arguments);return e.syncModeEnabled=t,n},exclude:function(n){var i=t.select({require:function(t,n,i){return e.load(t,n,i)},syncRequire:function(t,n,i){var r=e.syncModeEnabled;e.syncModeEnabled=!0;var o=e.load(t,n,i);return e.syncModeEnabled=r,o}});return i.exclude(n),i},load:function(n,i,r){i&&(i.length&&(i=e.makeLoadCallback(n,i)),i=i.bind(r||Ext.global));var o,a,s,l=[],d=n.length,u=[],c=t.classState;for(a=0;d>a;++a)o=t.resolveName(n[a]),t.isCreated(o)||(l.push(o),h[o]=e.getPath(o),c[o]||u.push(h[o]));return s=l.length,s?(e.missingCount+=s,t.onCreated(function(){i&&Ext.callback(i,r,arguments),e.checkReady()},e,l),p.enabled||Ext.Error.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+(l.length>1?"es":"")+": "+l.join(", ")),u.length?e.loadScripts({url:u,_classNames:l}):e.checkReady()):(i&&i.call(r),e.checkReady()),e.syncModeEnabled&&1===d?t.get(n[0]):e},makeLoadCallback:function(e,n){return function(){for(var i=[],r=e.length;r-->0;)i[r]=t.get(e[r]);return n.apply(this,i)}},onLoadFailure:function(){var t=this,n=t.onError;e.hasFileLoadError=!0,--e.scriptsLoading,n&&n.call(t.userScope,t),e.checkReady()},onLoadSuccess:function(){var t=this,n=t.onLoad;--e.scriptsLoading,n&&n.call(t.userScope,t),e.checkReady()},onReady:function(t,n,i,o){if(i)r.on(t,n,o);else{var a=r.makeListener(t,n,o);e.isLoading?d.push(a):r.invoke(a)}},addUsedClasses:function(t){var n,i,r;if(t)for(t="string"==typeof t?[t]:t,i=0,r=t.length;r>i;i++)n=t[i],"string"!=typeof n||Ext.Array.contains(u,n)||u.push(n);return e},triggerReady:function(){var t,n=u;if(e.isLoading&&n.length)u=[],e.require(n);else{for(e.isLoading=!1,d.sort(r.sortFn);d.length&&!e.isLoading;)t=d.pop(),r.invoke(t);r.unblock()}},historyPush:function(n){return!n||s[n]||t.overrideMap[n]||(s[n]=!0,l.push(n)),e},loadScripts:function(t){var i,r=Ext.manifest,o=r&&r.loadOrder,a=r&&r.loadOrderMap;++e.scriptsLoading,o&&!a&&(r.loadOrderMap=a=n.createLoadOrderMap(o)),e.checkReady(),i=Ext.apply({loadOrder:o,loadOrderMap:a,charset:p.scriptCharset,success:e.onLoadSuccess,failure:e.onLoadFailure,sync:e.syncModeEnabled,_classNames:[]},t),i.userScope=i.scope,i.scope=i,n.load(i)},loadScriptsSync:function(t){var n=e.syncModeEnabled;e.syncModeEnabled=!0,e.loadScripts({url:t}),e.syncModeEnabled=n},loadScriptsSyncBasePrefix:function(t){var n=e.syncModeEnabled;e.syncModeEnabled=!0,e.loadScripts({url:t,prependBaseUrl:!0}),e.syncModeEnabled=n},loadScript:function(t){var n="string"==typeof t,i=t instanceof Array,r=!i&&!n,o=r?t.url:t,a=r&&t.onError,s=r&&t.onLoad,l=r&&t.scope,d={url:o,scope:l,onLoad:s,onError:a,_classNames:[]};e.loadScripts(d)},flushMissingQueue:function(){var e,n,i=0,r=0;for(e in h)i++,n=h[e],t.isCreated(e)?delete h[e]:2===t.existCache[e]?delete h[e]:++r;this.missingCount=r},checkReady:function(){var t,n=e.isLoading;e.flushMissingQueue(),t=e.missingCount+e.scriptsLoading,t&&!n?(r.block(),e.isLoading=!!t):!t&&n&&e.triggerReady()}}),Ext.require=o(e,"require"),Ext.syncRequire=o(e,"syncRequire"),Ext.exclude=o(e,"exclude"),i.registerPreprocessor("loader",function(n,i,r,o){var s,l,d,u,h,p,f,g=this,m=[],x=t.getName(n);for(s=0,d=a.length;d>s;s++)if(p=a[s],i.hasOwnProperty(p))if(f=i[p],"string"==typeof f)m.push(f);else if(f instanceof Array)for(l=0,u=f.length;u>l;l++)h=f[l],"string"==typeof h&&m.push(h);else if("function"!=typeof f)for(l in f)f.hasOwnProperty(l)&&(h=f[l],"string"==typeof h&&m.push(h));return 0!==m.length?(x&&(c[x]=m),(x?e.exclude(x):e).require(m,function(){for(s=0,d=a.length;d>s;s++)if(p=a[s],i.hasOwnProperty(p))if(f=i[p],"string"==typeof f)i[p]=t.get(f);else if(f instanceof Array)for(l=0,u=f.length;u>l;l++)h=f[l],"string"==typeof h&&(i[p][l]=t.get(h));else if("function"!=typeof f)for(var e in f)f.hasOwnProperty(e)&&(h=f[e],"string"==typeof h&&(i[p][e]=t.get(h)));o.call(g,n,i,r)}),!1):void 0},!0,"after","className"),t.registerPostprocessor("uses",function(t,n,i){var r,o,a,s,l,d,u=Ext.manifest,c=u&&u.loadOrder,h=u&&u.classes;if(c&&(o=h[t],o&&!isNaN(l=o.idx))){for(a=c[l],r=a.uses,d={},s=r.length,l=0;s>l;l++)d[r[l]]=!0;r=Ext.Boot.getPathsFromIndexes(d,c,!0),r.length>0&&e.loadScripts({url:r,sequential:!0})}i.uses&&(r=i.uses,e.addUsedClasses(r))}),t.onCreated(e.historyPush),e.init()},Ext._endTime=(new Date).getTime(),Ext._beforereadyhandler&&Ext._beforereadyhandler(),Ext.define("BP.overrides.Ext",{override:"Ext",myTest:function(){}},function(){Number.parseFloat=Number.parseFloat||parseFloat,Number.parseInt=Number.parseInt||parseInt,Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)},String.prototype.chunk=function(e){return[].concat.apply([],this.split("").map(function(t,n){return n%e?[]:this.slice(n,n+e)},this))},String.prototype.reverse=function(){for(var e="",t=this.length,n=t-1;n>=0;n--)e+=this[n];return e},Date.prototype.getWeek=function(){var e=this.getFullYear(),t=this.getWeekDay();return 11==this.getMonth()&&this.getDate()-t>28?this.getWeekForYear(e+1):0==this.getMonth()&&this.getDate()+6-t<4?this.getWeekForYear(e-1):this.getWeekForYear(e)},Date.prototype.getWeekDay=function(){return this.getDay()},Date.prototype.getWeekForYear=function(e){var t=this.getWeekDay(),n=new Date(e,0,4),i=n.getWeekDay(),r=this.getDaysDifferenceCorrected(n);r+=i,r-=t;var o=r/7+1;return o},Date.prototype.getDaysDifferenceCorrected=function(e){var t=this-e;return t+=6e4*(e.getTimezoneOffset()-this.getTimezoneOffset()),Math.floor(t/864e5)},Object.addPrivateProperty=function(e,t,n){if(void 0===e[t]){var i=n,r=function(){return i},o=function(){return i};if(Object.defineProperty)return Object.defineProperty(e,t,{get:r,set:o}),!0;if(e.__defineGetter__)return e.__defineGetter__(t,r),e.__defineSetter__(t,o),!0;var a=function(){event&&event.propertyName==t&&(e.detachEvent("onpropertychange",a),e[t]=r,e[t].toString=r,e.attachEvent("onpropertychange",a))};e[t]=r,e[t].toString=r,e.attachEvent("onpropertychange",a)}},function(){var e,t,n;n=document.documentMode,e=function(e){return e.test(Ext.userAgent)},t=function(e,t){var n;return e&&(n=t.exec(Ext.userAgent))?Number.parseFloat(n[1]):0},Ext.isEdge=e(/edge\//),Ext.isEdgeVersion=t(Ext.isEdge,/edge\/(\d+\.\d+)/),Ext.isOpr=e(/opr\//),Ext.isOprVersion=t(Ext.isOpr,/opr\/(\d+\.\d+.\d+.\d+)/),Ext.isIE11=e(/trident\//)&&(e(/rv:11\.0/)||11==n),Ext.isIE11Version=t(Ext.isIE11,/rv:(\d+\.\d+)/)}(),Ext.isJsonValid=function(e){return"string"!=typeof e?!1:e?"{"==e.charAt(0)&&"}"==e.charAt(e.length-1)||"["==e.charAt(0)&&"]"==e.charAt(e.length-1):!1},Ext.checkOverflow=function(e){var t=e.style.overflow;t&&"visible"!==t||(e.style.overflow="hidden");var n=e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight;return e.style.overflow=t,n}}),Ext.define("BP.overrides.Number",{override:"Ext.Number",snaptest:function(e,t,n,i){var r;return(void 0===e||n>e)&&(e=n||0),t&&(r=e%t,0!==r&&(e-=r,2*r>=t?e+=t:-t>2*r&&(e-=t))),this.constrain(e,n,i)}}),Ext.cmd.derive("Ext.Mixin",Ext.Base,function(e){return{statics:{addHook:function(e,t,n,i){var r=Ext.isFunction(e),o=function(){var t=arguments,n=r?e:i[e],o=this.callParent(t);return n.apply(this,t),o},a=t.hasOwnProperty(n)&&t[n];r&&(e.$previous=Ext.emptyFn),o.$name=n,o.$owner=t.self,a?(o.$previous=a.$previous,a.$previous=o):t[n]=o}},onClassExtended:function(t,n){var i,r,o,a,s=n.mixinConfig,l=n.xhooks,d=t.superclass,u=n.onClassMixedIn;l&&(delete n.xhooks,(s||(n.mixinConfig=s={})).on=l),s&&(i=d.mixinConfig,i&&(n.mixinConfig=s=Ext.merge({},i,s)),n.mixinId=s.id,r=s.before,o=s.after,l=s.on,a=s.extended),(r||o||l||a)&&(n.onClassMixedIn=function(t){var n,i=this.prototype,s=t.prototype;if(r&&Ext.Object.each(r,function(e,n){t.addMember(e,function(){return i[n].apply(this,arguments)!==!1?this.callParent(arguments):void 0})}),o&&Ext.Object.each(o,function(e,n){t.addMember(e,function(){var e=this.callParent(arguments);return i[n].apply(this,arguments),e})}),l)for(n in l)e.addHook(l[n],s,n,i);a&&t.onExtended(function(){var e=Ext.Array.slice(arguments,0);return e.unshift(t),a.apply(this,e)},this),u&&u.apply(this,arguments)})}}},0,0,0,0,0,0,[Ext,"Mixin"],0),Ext.cmd.derive("BP.base",Ext.Base,{singleton:!0},0,0,0,0,0,0,[BP,"base"],function(){this.destroy(),delete BP.base,function(){"function"!=typeof Object.getPrototypeOf&&("object"==typeof"test".__proto__?Object.getPrototypeOf=function(e){return e.__proto__}:Object.getPrototypeOf=function(e){return e.constructor.prototype})}()}),Ext.define("BP.overrides.Base",{override:"Ext.Mixin"}),Ext.util=Ext.util||{},Ext.util.DelayedTask=function(e,t,n,i,r){var o,a=this,s=function(){var i=Ext.GlobalEvents;clearInterval(a.id),a.id=null,e.apply(t,n||[]),r!==!1&&i.hasListeners.idle&&i.fireEvent("idle")};i="boolean"==typeof i?i:!0,a.id=null,a.delay=function(r,l,d,u){i&&a.cancel(),"number"==typeof r&&(o=r),e=l||e,t=d||t,n=u||n,a.id||(a.id=Ext.interval(s,o))},a.cancel=function(){a.id&&(clearInterval(a.id),a.id=null)}},Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var e=Array.prototype.slice,t=Ext.Array.insert,n=Ext.Array.toArray,i={};return{isEvent:!0,suspended:0,noOptions:{},constructor:function(e,t){this.name=t,this.observable=e,this.listeners=[]},addListener:function(e,n,i,r,o){var a,s,l,d,u,c,h,p,f,g,m=this,x=!1,v=m.observable,y=m.name;if(-1===m.findListener(e,n)){if(s=m.createListener(e,n,i,r,o),m.firing&&(m.listeners=m.listeners.slice(0)),a=m.listeners,p=h=a.length,l=i&&i.priority,u=m._highestNegativePriorityIndex,c=void 0!==u,l)if(d=0>l,!d||c){for(f=d?u:0;h>f;f++)if(g=a[f].o?a[f].o.priority||0:0,l>g){p=f;break}}else m._highestNegativePriorityIndex=p;else c&&(p=u);!d&&u>=p&&m._highestNegativePriorityIndex++,p===h?a[h]=s:t(a,p,[s]),v.isElement&&v._getPublisher(y).subscribe(v,y,i.delegated!==!1,i.capture),x=!0}return x},createListener:function(e,t,n,i,r){var o,a=this,s=Ext._namedScopes[t],l={fn:e,scope:t,ev:a,caller:i,manager:r,namedScope:s,defaultScope:s?t||a.observable:void 0,lateBound:"string"==typeof e},d=e,u=!1;return n&&(l.o=n,n.single&&(d=a.createSingle(d,l,n,t),u=!0),n.target&&(d=a.createTargeted(d,l,n,t,u),u=!0),n.delay&&(d=a.createDelayed(d,l,n,t,u),u=!0),n.buffer&&(d=a.createBuffered(d,l,n,t,u),u=!0),a.observable.isElement&&(o=n.type,o&&(l.type=o))),l.fireFn=d,l.wrapped=u,l},findListener:function(e,t){for(var n,i=this.listeners,r=i.length;r--;)if(n=i[r],n&&n.fn===e&&n.scope==t)return r;return-1},removeListener:function(e,t,n){var i,r,o,a,s,l,d,u,c=this,h=!1,p=c.observable,f=c.name;if(n=n||c.findListener(e,t),-1!=n){if(i=c.listeners[n],o=i.o,r=c._highestNegativePriorityIndex,c.firing&&(c.listeners=c.listeners.slice(0)),i.task&&(i.task.cancel(),delete i.task),a=i.tasks&&i.tasks.length){for(;a--;)i.tasks[a].cancel();delete i.tasks}if(c.listeners.splice(n,1),s=i.manager,s&&(l=s.managedListeners))for(u=l.length;u--;)d=l[u],d.item===c.observable&&d.ename===f&&d.fn===e&&d.scope===t&&l.splice(u,1);r&&(r>n?c._highestNegativePriorityIndex--:n===r&&n===c.listeners.length&&delete c._highestNegativePriorityIndex),p.isElement&&p._getPublisher(f).unsubscribe(p,f,o.delegated!==!1,o.capture),h=!0}return h},clearListeners:function(){for(var e,t=this.listeners,n=t.length;n--;)e=t[n],this.removeListener(e.fn,e.scope)},suspend:function(){++this.suspended},resume:function(){this.suspended&&--this.suspended},isSuspended:function(){return this.suspended>0},fire:function(){var t,n,i,r,o,a,s,l,d,u,c,h,p,f=this,g=f.listeners,m=g.length,x=f.observable.isElement;if(!f.suspended&&m>0)for(f.firing=!0,o=arguments.length?e.call(arguments,0):[],s=o.length,x&&(p=o[0]),r=0;m>r;r++){if(a=g[r],t=a.o,x&&(d&&p.setCurrentTarget(d),u=a.type,u&&(c=p,p=o[0]=c.chain({type:u})),Ext.EventObject=p),h=o,t){if(x){if(n=t.delegate){if(l=p.getTarget("#"+p.currentTarget.id+" "+n),!l)continue;o[1]=l,d=p.currentTarget,p.setCurrentTarget(l)}t.preventDefault&&p.preventDefault(),t.stopPropagation&&p.stopPropagation(),t.stopEvent&&p.stopEvent()}o[s]=t,t.args&&(h=t.args.concat(o))}if(i=f.getFireInfo(a),i.fn.apply(i.scope,h)===!1)return f.firing=!1;c&&(p=o[0]=c,c=null)}return f.firing=!1,!0},getFireInfo:function(e,t){var n,r=this.observable,o=e.fireFn,a=e.scope,s=e.namedScope;return!t&&e.wrapped?(i.fn=o,i):(n=t?e.fn:o,e.lateBound?((!a||s)&&(a=(e.caller||r).resolveListenerScope(e.defaultScope)),n=a[n]):s&&s.isController?a=(e.caller||r).resolveListenerScope(e.defaultScope):(!a||s)&&(a=r),i.fn=n,i.scope=a,i)},createTargeted:function(e,t,n,i,r){return function(){if(n.target===arguments[0]){var o;return r||(o=t.ev.getFireInfo(t,!0),e=o.fn,i=o.scope),e.apply(i,arguments)}}},createBuffered:function(e,t,i,r,o){return t.task=new Ext.util.DelayedTask,function(){var a;o||(a=t.ev.getFireInfo(t,!0),e=a.fn,r=a.scope),t.task.delay(i.buffer,e,r,n(arguments))}},createDelayed:function(e,t,i,r,o){return function(){var a,s=new Ext.util.DelayedTask;o||(a=t.ev.getFireInfo(t,!0),e=a.fn,r=a.scope),t.tasks||(t.tasks=[]),t.tasks.push(s),s.delay(i.delay||10,e,r,n(arguments))}},createSingle:function(e,t,n,i,r){return function(){var n,o=t.ev;return o.removeListener(t.fn,i)&&o.observable&&o.observable.hasListeners[o.name]--,r||(n=o.getFireInfo(t,!0),e=n.fn,i=n.scope),e.apply(i,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0),Ext.define("BP.overrides.util.Event",{override:"Ext.util.Event",fire:function(){arguments.callee.$previous.apply(this,arguments)}}),Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:!0,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var e,t,n,i,r,o=this.id;return o||0===o||(e=this.self.prototype,t=this.defaultIdSeparator,i=Ext.mixin.Identifiable.uniqueIds,e.hasOwnProperty("identifiablePrefix")||(n=this.xtype,r=n?this.defaultIdPrefix+n.replace(this.idCleanRegex,t)+t:(r=e.$className)?r.replace(this.idCleanRegex,t).toLowerCase()+t:this.defaultIdPrefix+"anonymous"+t,e.identifiablePrefix=r),r=this.identifiablePrefix,i.hasOwnProperty(r)||(i[r]=0),o=this.id=r+ ++i[r]),this.getUniqueId=this.getOptimizedId,o},setId:function(e){this.id=e},getId:function(){var e=this.id;return e||(e=this.getUniqueId()),this.getId=this.getOptimizedId,e}},0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0),Ext.cmd.derive("Ext.mixin.Observable",Ext.Mixin,function(e){var t=Ext.emptyFn,n=[],i=Array.prototype,r=i.slice,o=function(e){return e instanceof o?e:(this.observable=e,arguments[1].isObservable&&(this.managedListeners=!0),void(this.args=r.call(arguments,1)))};return o.prototype.destroy=function(){this.destroy=Ext.emptyFn;var e=this.observable;e[this.managedListeners?"mun":"un"].apply(e,this.args)},{mixinConfig:{id:"observable",after:{destroy:"clearListeners"}},statics:{releaseCapture:function(e){e.fireEventArgs=this.prototype.fireEventArgs},capture:function(e,t,n){var i=function(e,i){return t.apply(n,[e].concat(i))};this.captureArgs(e,i,n)},captureArgs:function(e,t,n){e.fireEventArgs=Ext.Function.createInterceptor(e.fireEventArgs,t,n)},observe:function(e,t){return e&&(e.isObservable||(Ext.applyIf(e,new this),this.captureArgs(e.prototype,e.fireEventArgs,e)),Ext.isObject(t)&&e.on(t)),e},prepareClass:function(t,n,i){var r,o,a=t.listeners=[],s=i||t.prototype,l=s.listeners,d=n?n.listeners:t.superclass.self.listeners;if(d&&a.push(d),l&&(r=l.scope,r?(o=Ext._namedScopes[r],o&&o.isController&&(l.scope="self.controller")):l.scope="self",a.push(l),s.listeners=null),!t.HasListeners){var u=function(){},c=t.superclass.HasListeners||n&&n.HasListeners||e.HasListeners;t.prototype.HasListeners=t.HasListeners=u,u.prototype=t.hasListeners=new c}}},isObservable:!0,eventsSuspended:0,constructor:function(e){var t,n,i,r,o,a=this,s=a.self;if(!a.$observableInitialized){if(a.$observableInitialized=!0,a.hasListeners=new a.HasListeners,a.events=a.events||{},t=s.listeners,t&&!a._addDeclaredListeners(t)&&(s.listeners=null),n=e&&e.listeners||a.listeners)if(n instanceof Array)for(o=0,r=n.length;r>o;++o)a.addListener(n[o]);else a.addListener(n);i=e&&e.bubbleEvents||a.bubbleEvents,i&&a.enableBubble(i),a.$applyConfigs?Ext.apply(a,e):a.initConfig(e),n&&(a.listeners=null)}},onClassExtended:function(t,n){t.HasListeners||e.prepareClass(t,t.prototype.$observableMixedIn?void 0:n)},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(e){var t=this;return e instanceof Array?Ext.each(e,t._addDeclaredListeners,t):(t._addedDeclaredListeners=!0,t.addListener(e)),t._addedDeclaredListeners},addManagedListener:function(e,n,i,r,a,s){var l,d,u=this;if(u.managedListeners=u.managedListeners||[],"string"!=typeof n){d=arguments.length>4?a:n,a=n;for(n in a)a.hasOwnProperty(n)&&(l=a[n],e.$eventOptions[n]||u.addManagedListener(e,n,l.fn||l,l.scope||a.scope||r,l.fn?l:d,!0));if(a&&a.destroyable)return new o(u,e,a)}else if(i!==t&&(e.doAddListener(n,i,r,a,null,u,u),!s&&a&&a.destroyable))return new o(u,e,n,i,r)},removeManagedListener:function(e,t,n,i){var r,o,a,s,l,d=this;if("string"!=typeof t){r=t;for(t in r)r.hasOwnProperty(t)&&(o=r[t],e.$eventOptions[t]||d.removeManagedListener(e,t,o.fn||o,o.scope||r.scope||i))}else for(a=d.managedListeners?d.managedListeners.slice():[],t=Ext.canonicalEventName(t),l=0,s=a.length;s>l;l++)d.removeManagedListenerItem(!1,a[l],e,t,n,i)},fireEvent:function(e){return this.fireEventArgs(e,r.call(arguments,1))},resolveListenerScope:function(e){var t=Ext._namedScopes[e];return t&&(t.isSelf||t.isThis)&&(e=null),e||this},fireEventArgs:function(e,t){e=Ext.canonicalEventName(e);var i=this,r=i.events,o=r&&r[e],a=!0;return i.hasListeners[e]&&(a=i.doFireEvent(e,t||n,o?o.bubble:!1)),a},fireAction:function(e,t,n,i,r,o){r=r?Ext.Object.chain(r):{},r.single=!0,r.priority="after"===o?-99.5:99.5,this.doAddListener(e,n,i,r),this.fireEventArgs(e,t)},doFireEvent:function(e,t,n){var i,r,o=this,a=!0;do{if(o.eventsSuspended)return(i=o.eventQueue)&&i.push([e,t]),a;if(r=o.events&&o.events[e],r&&r!==!0&&(a=r.fire.apply(r,t))===!1)break}while(n&&(o=o.getBubbleParent()));return a},getBubbleParent:function(){var e=this,t=e.getBubbleTarget&&e.getBubbleTarget();return t&&t.isObservable?t:null},addListener:function(e,t,n,i,r,a){var s,l,d,u,c,h=this,p=Ext._namedScopes;if("string"!=typeof e){i=e,n=i.scope,l=n&&p[n],d=l&&l.isSelf,c=(h.isComponent||h.isWidget)&&i.element?h.$elementEventOptions:h.$eventOptions;for(e in i)s=i[e],c[e]||(u=s.scope,u&&d&&(l=p[u],l&&l.isController&&(u="self.controller")),h.doAddListener(e,s.fn||s,u||n,s.fn?s:i,r,a));if(i&&i.destroyable)return new o(h,i)}else if(h.doAddListener(e,t,n,i,r,a),i&&i.destroyable)return new o(h,e,t,n,i);return h},removeListener:function(e,t,n,i){var r,o,a=this;if("string"!=typeof e){o=e,i=i||a.$eventOptions;for(e in o)o.hasOwnProperty(e)&&(r=o[e],a.$eventOptions[e]||a.doRemoveListener(e,r.fn||r,r.scope||o.scope))}else a.doRemoveListener(e,t,n);return a},clearListeners:function(){var e,t,n=this,i=n.events,r=n.hasListeners;if(i)for(t in i)i.hasOwnProperty(t)&&(e=i[t],e.isEvent&&(delete r[t],e.clearListeners()));n.clearManagedListeners()},clearManagedListeners:function(){for(var e=this,t=e.managedListeners?e.managedListeners.slice():[],n=0,i=t.length;i>n;n++)e.removeManagedListenerItem(!0,t[n]);e.managedListeners=[]},removeManagedListenerItem:function(e,t,n,i,r,o){!e&&(t.item!==n||t.ename!==i||r&&t.fn!==r||o&&t.scope!==o)||(t.item.doRemoveListener(t.ename,t.fn,t.scope,t.options),e||Ext.Array.remove(this.managedListeners,t))},hasListener:function(e){return e=Ext.canonicalEventName(e),!!this.hasListeners[e]},isSuspended:function(e){var t=this.eventsSuspended>0,n=this.events;return!t&&e&&n&&(e=n[e],e&&e.isEvent)?e.isSuspended():t},suspendEvents:function(e){++this.eventsSuspended,e&&!this.eventQueue&&(this.eventQueue=[])},suspendEvent:function(){var e,t,n,i=this,r=i.events,o=arguments.length;for(e=0;o>e;e++)n=arguments[e],n=Ext.canonicalEventName(n),t=r[n],t&&t.isEvent||(t=i._initEvent(n)),t.suspend()},resumeEvent:function(){var e,t,n=this.events||0,i=n&&arguments.length;for(e=0;i>e;e++)t=n[arguments[e]],t&&t.resume&&t.resume()},resumeEvents:function(e){var t,n,i=this,r=i.eventQueue;if(i.eventsSuspended&&!--i.eventsSuspended&&(delete i.eventQueue,!e&&r))for(t=r.length,n=0;t>n;n++)i.fireEventArgs.apply(i,r[n])},relayEvents:function(e,t,n){for(var i,r=this,a=t.length,s=0,l={};a>s;s++)i=t[s],l[i]=r.createRelayer(n?n+i:i);return r.mon(e,l,null,null,void 0),new o(r,e,l)},createRelayer:function(e,t){var n=this;return function(){return n.fireEventArgs.call(n,e,t?r.apply(arguments,t):arguments)}},enableBubble:function(e){if(e){var t,n,i,r=this,o="string"==typeof e?arguments:e,a=r.events,s=a&&o.length;for(i=0;s>i;++i)t=o[i],t=Ext.canonicalEventName(t),n=a[t],n&&n.isEvent||(n=r._initEvent(t)),r.hasListeners._incr_(t),n.bubble=!0}},destroy:function(){this.clearListeners(),this.callParent()},privates:{doAddListener:function(e,n,i,r,o,a,s){var l,d,u,c=this;o=o||r&&r.order,o&&(u=r&&r.priority,u||(r=r?Ext.Object.chain(r):{},r.priority=c.$orderToPriority[o])),e=Ext.canonicalEventName(e),!s&&i&&i.isObservable&&i!==c&&(s=i),s&&(d=s.managedListeners=s.managedListeners||[],d.push({item:c,ename:e,fn:n,scope:i,options:r})),l=(c.events||(c.events={}))[e],l&&l.isEvent||(l=c._initEvent(e)),n!==t&&l.addListener(n,i,r,a,s)&&c.hasListeners._incr_(e)},doRemoveListener:function(e,t,n){var i,r=this,o=r.events;e=Ext.canonicalEventName(e),i=o&&o[e],i&&i.isEvent&&i.removeListener(t,n)&&r.hasListeners._decr_(e)},_initEvent:function(e){return this.events[e]=new Ext.util.Event(this,e)}},deprecated:{"5.0":{methods:{addEvents:null}},5.1:{methods:{addBeforeListener:function(e,t,n,i){return this.addListener(e,t,n,i,"before")},addAfterListener:function(e,t,n,i){return this.addListener(e,t,n,i,"after")},removeBeforeListener:function(e,t,n,i){return this.removeListener(e,t,n,i,"before")},removeAfterListener:function(e,t,n,i){return this.removeListener(e,t,n,i,"after")},onBefore:"addBeforeListener",onAfter:"addAfterListener",unBefore:"removeBeforeListener",unAfter:"removeAfterListener"}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable"],function(){function e(e){var t,n,i,r,o=(this.methodEvents=this.methodEvents||{})[e],a=this;return o||(this.methodEvents[e]=o={},o.originalFn=this[e],o.methodName=e,o.before=[],o.after=[],r=function(e,r,o){void 0!==(n=e.apply(r||a,o))&&("object"==typeof n?(t=void 0!==n.returnValue?n.returnValue:n,i=!!n.cancel):n===!1?i=!0:t=n)},this[e]=function(){var e,s,l,d=Array.prototype.slice.call(arguments,0);for(t=n=void 0,i=!1,s=0,l=o.before.length;l>s;s++)if(e=o.before[s],r(e.fn,e.scope,d),i)return t;for(void 0!==(n=o.originalFn.apply(a,d))&&(t=n),s=0,l=o.after.length;l>s;s++)if(e=o.after[s],r(e.fn,e.scope,d),i)return t;return t}),o}var t=this,n=t.prototype,i=function(){},r=function(e){if(!e.HasListeners){var n=e.prototype;n.$observableMixedIn=1,t.prepareClass(e,this),e.onExtended(function(e,n){t.prepareClass(e,null,n)}),n.onClassMixedIn?Ext.override(e,{onClassMixedIn:function(e){r.call(this,e),this.callParent(arguments)}}):n.onClassMixedIn=function(e){r.call(this,e)}}o.call(this,e)},o=n.onClassMixedIn;i.prototype={_decr_:function(e){--this[e]||delete this[e]},_incr_:function(e){this.hasOwnProperty(e)?++this[e]:this[e]=1}},n.HasListeners=t.HasListeners=i,t.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"}),t.observeClass=t.observe,Ext.apply(n,{onClassMixedIn:r,beforeMethod:function(t,n,i){e.call(this,t).before.push({fn:n,scope:i})},afterMethod:function(t,n,i){e.call(this,t).after.push({fn:n,scope:i})},removeMethodListener:function(e,t,n){var i,r,o=this.getMethodEvent(e);for(i=0,r=o.before.length;r>i;i++)if(o.before[i].fn==t&&o.before[i].scope==n)return void Ext.Array.erase(o.before,i,1);for(i=0,r=o.after.length;r>i;i++)if(o.after[i].fn==t&&o.after[i].scope==n)return void Ext.Array.erase(o.after,i,1)},toggleEventLogging:function(e){Ext.util.Observable[e?"capture":"releaseCapture"](this,function(e){Ext.isDefined(Ext.global.console)&&Ext.global.console.log(e,arguments)})}})}),Ext.define("BP.overrides.mixin.Observable",{override:"Ext.mixin.Observable",fireEvent:function(e){return this.eventsSuspended?void 0:this.fireEventArgs(e,Array.prototype.slice.call(arguments,1))}}),Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,config:{keyFn:null},constructor:function(e){var t,n=this;n.mixins.observable.constructor.call(n,e),n.clear(!0),t=n.getKeyFn(),t&&(n.getKey=t)},getCount:function(){return this.length},getData:function(e,t){return void 0===t&&(t=e,e=this.getKey(t)),[e,t]},getKey:function(e){return e.id},add:function(e,t){var n=this;return 1===arguments.length&&(t=e,e=n.getKey(t)),n.containsKey(e)?n.replace(e,t):(n.map[e]=t,++n.length,n.generation++,n.hasListeners.add&&n.fireEvent("add",n,e,t),t)},replace:function(e,t){var n,i=this,r=i.map;return 1===arguments.length&&(t=e,e=i.getKey(t)),i.containsKey(e)||i.add(e,t),n=r[e],r[e]=t,i.generation++,i.hasListeners.replace&&i.fireEvent("replace",i,e,t,n),t},remove:function(e){var t=this.findKey(e);return void 0!==t?this.removeAtKey(t):!1},removeAtKey:function(e){var t,n=this;return n.containsKey(e)?(t=n.map[e],delete n.map[e],--n.length,n.generation++,n.hasListeners.remove&&n.fireEvent("remove",n,e,t),!0):!1},get:function(e){var t=this.map;return t.hasOwnProperty(e)?t[e]:void 0},clear:function(e){var t=this;return(e||t.generation)&&(t.map={},t.length=0,t.generation=e?0:t.generation+1),e!==!0&&t.hasListeners.clear&&t.fireEvent("clear",t),t},containsKey:function(e){var t=this.map;return t.hasOwnProperty(e)&&void 0!==t[e]},contains:function(e){return this.containsKey(this.findKey(e))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(e){var t,n=[],i=this.map;for(t in i)i.hasOwnProperty(t)&&n.push(e?t:i[t]);return n},each:function(e,t){var n,i=Ext.apply({},this.map),r=this.length;t=t||this;for(n in i)if(i.hasOwnProperty(n)&&e.call(t,n,i[n],r)===!1)break;return this},clone:function(){var e,t=new this.self(this.initialConfig),n=this.map;t.suspendEvents();for(e in n)n.hasOwnProperty(e)&&t.add(e,n[e]);return t.resumeEvents(),t},findKey:function(e){var t,n=this.map;for(t in n)if(n.hasOwnProperty(t)&&n[t]===e)return t;return void 0}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"HashMap"],0),Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=!0,Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill"),Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:!1,flashPluginInjected:!1,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(e,t,n){var i;i=this.liveConnections[+e],i&&i.onFlashStateChange(t,n)},registerConnection:function(e){var t=this.connectionIndex;return this.conectionIndex=this.connectionIndex+1,this.liveConnections[t]=e,t},injectFlashPlugin:function(){var e,t,n=this;n.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]}),e=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/"),t="/plugins/flash/FlashPlugin.swf",Ext.flashPluginPath&&(t=Ext.flashPluginPath),Ext.Loader.loadScript({url:e,onLoad:function(){var e="11.4.0",n="playerProductInstall.swf",i={},r={};r.quality="high",r.bgcolor="#ffffff",r.allowscriptaccess="sameDomain",r.allowfullscreen="true";var o={};o.id="ext-flash-polyfill",o.name="polyfill",o.align="middle",swfobject.embedSWF(t,"ext-flash-polyfill","0","0",e,n,i,r,o)},onError:function(){},scope:n}),Ext.data.flash.BinaryXhr.flashPluginInjected=!0}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(e){Ext.data.flash.BinaryXhr.flashPluginInjected||Ext.data.flash.BinaryXhr.injectFlashPlugin();var t=this;Ext.apply(t,e),t.requestHeaders={}},abort:function(){var e=this;if(4!=e.readyState){if(e.aborted=!0,!Ext.data.flash.BinaryXhr.flashPluginActive)return void Ext.GlobalEvents.removeListener("flashready",e.onFlashReady,e);Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(e.javascriptId),delete Ext.data.flash.BinaryXhr.liveConnections[e.javascriptId]}},getAllResponseHeaders:function(){var e=[];return Ext.Object.each(this.responseHeaders,function(t,n){e.push(t+": "+n)}),e.join("\r\n")},getResponseHeader:function(e){var t=this.responseHeaders;return t&&t[e]||null},open:function(e,t,n,i,r){var o=this;o.method=e,o.url=t,o.async=n!==!1,o.user=i,o.password=r},overrideMimeType:function(e){this.mimeType=e},send:function(e){var t=this;t.body=e,Ext.data.flash.BinaryXhr.flashPluginActive?this.onFlashReady():Ext.GlobalEvents.addListener("flashready",t.onFlashReady,t)},onFlashReady:function(){var e,t,n=this;n.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(n),e={method:n.method,url:n.url,user:n.user,password:n.password,mimeType:n.mimeType,requestHeaders:n.requestHeaders,body:n.body,javascriptId:n.javascriptId},t=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(e)},setReadyState:function(e){var t=this;t.readyState!=e&&(t.readyState=e,t.onreadystatechange())},setRequestHeader:function(e,t){this.requestHeaders[e]=t},onreadystatechange:Ext.emptyFn,parseData:function(e){var t=this;this.status=e.status||0,t.responseHeaders={},t.mimeType&&(t.responseHeaders["content-type"]=t.mimeType),"complete"==e.reason?(this.responseBytes=e.data,t.responseHeaders["content-length"]=e.data.length):("error"==e.reason||"securityError"==e.reason)&&(this.statusText=e.text,t.responseHeaders["content-length"]=0)},onFlashStateChange:function(e,t){var n=this;4==e&&(n.parseData(t),delete Ext.data.flash.BinaryXhr.liveConnections[n.javascriptId]),n.setReadyState(e)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0),Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},config:{url:null,async:!0,username:"",password:"",disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:3e4,extraParams:null,autoAbort:!1,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest"},constructor:function(e){this.mixins.observable.constructor.call(this,e),this.requests={}},request:function(e){e=e||{};var t,n,i,r,o,a,s=this,l=e.scope||window,d=e.username||s.getUsername(),u=e.password||s.getPassword()||"";return s.fireEvent("beforerequest",s,e)!==!1?(n=s.setOptions(e,l),s.isFormUpload(e)?(s.upload(e.form,n.url,n.data,e),null):((e.autoAbort||s.getAutoAbort())&&s.abort(),t=e.async!==!1?e.async||s.getAsync():!1,
a=s.openRequest(e,n,t,d,u),o=s.getIsXdr(),o||(r=s.setupHeaders(a,e,n.data,n.params)),i={id:++Ext.data.Connection.requestId,xhr:a,headers:r,options:e,async:t,binary:e.binary||s.getBinary(),timeout:Ext.defer(function(){i.timedout=!0,s.abort(i)},e.timeout||s.getTimeout())},s.requests[i.id]=i,s.latestId=i.id,t&&(o||(a.onreadystatechange=Ext.Function.bind(s.onStateChange,s,[i]))),o&&s.processXdrRequest(i,a),a.send(n.data),t?i:s.onComplete(i))):(Ext.callback(e.callback,e.scope,[e,void 0,void 0]),null)},processXdrRequest:function(e,t){var n=this;delete e.headers,e.contentType=e.options.contentType||n.getDefaultXdrContentType(),t.onload=Ext.Function.bind(n.onStateChange,n,[e,!0]),t.onerror=t.ontimeout=Ext.Function.bind(n.onStateChange,n,[e,!1])},processXdrResponse:function(e,t){e.getAllResponseHeaders=function(){return[]},e.getResponseHeader=function(){return""},e.contentType=t.contentType||this.getDefaultXdrContentType()},upload:function(e,t,n,i){e=Ext.getDom(e),i=i||{};var r,o,a,s,l,d,u,c,h=Ext.id(),p=document.createElement("iframe"),f=[],g="multipart/form-data",m={target:e.target,method:e.method,encoding:e.encoding,enctype:e.enctype,action:e.action},x=function(t,n){r=document.createElement("input"),Ext.fly(r).set({type:"hidden",value:n,name:t}),e.appendChild(r),f.push(r)};if(Ext.fly(p).set({id:h,name:h,cls:"x-hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1}),document.body.appendChild(p),document.frames&&(document.frames[h].name=h),Ext.fly(e).set({target:h,method:"POST",enctype:g,encoding:g,action:t||m.action}),n){o=Ext.Object.fromQueryString(n)||{};for(s in o)if(o.hasOwnProperty(s))if(a=o[s],Ext.isArray(a))for(l=a.length,d=0;l>d;d++)x(s,a[d]);else x(s,a)}for(Ext.get(p).on({load:Ext.Function.bind(this.onUploadComplete,this,[p,i]),single:!Ext.isOpera}),e.submit(),Ext.fly(e).set(m),u=f.length,c=0;u>c;c++)Ext.removeNode(f[c])},onUploadComplete:function(e,t){var n,i,r,o,a=this,s={responseText:"",responseXML:null};try{if(r=e&&(e.contentWindow.document||e.contentDocument)||(window.frames[e.id]||{}).document){if(Ext.isOpera&&r.location==Ext.SSL_SECURE_URL)return;r.body&&((o=r.body.firstChild)&&/pre/i.test(o.tagName)?s.responseText=o.textContent||o.innerText:(o=r.getElementsByTagName("textarea")[0])?s.responseText=o.value:s.responseText=r.body.textContent||r.body.innerText),s.responseXML=r.XMLDocument||r,n=t.success,i=!0}else Ext.Error.raise("Could not acquire a suitable connection for the file upload service.")}catch(l){s.responseText='{success:false,message:"'+Ext.String.trim(l.message||l.description)+'"}',n=t.failure,i=!1}a.fireEvent(i?"requestcomplete":"requestexception",a,s,t),Ext.callback(n,t.scope,[s,t]),Ext.callback(t.callback,t.scope,[t,i,s]),Ext.defer(Ext.removeNode,100,Ext,[e])},isFormUpload:function(e){var t=this.getForm(e);return t?e.isUpload||/multipart\/form-data/i.test(t.getAttribute("enctype")):!1},getForm:function(e){var t=e.form||null;return t&&(t=Ext.getDom(t)),t},setOptions:function(e,t){var n,i,r,o=this,a=e.params||{},s=o.getExtraParams(),l=e.urlParams,d=e.url||o.getUrl(),u=e.cors,c=e.jsonData;return void 0!==u&&o.setCors(u),Ext.isFunction(a)&&(a=a.call(t,e)),Ext.isFunction(d)&&(d=d.call(t,e)),d=this.setupUrl(e,d),r=e.rawData||e.binaryData||e.xmlData||c||null,c&&!Ext.isPrimitive(c)&&(r=Ext.encode(r)),e.binaryData&&o.nativeBinaryPostSupport()&&(r=new Uint8Array(e.binaryData),(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko)&&(r=r.buffer)),Ext.isObject(a)&&(a=Ext.Object.toQueryString(a)),Ext.isObject(s)&&(s=Ext.Object.toQueryString(s)),a+=s?(a?"&":"")+s:"",l=Ext.isObject(l)?Ext.Object.toQueryString(l):l,a=this.setupParams(e,a),n=(e.method||o.getMethod()||(a||r?"POST":"GET")).toUpperCase(),this.setupMethod(e,n),i=e.disableCaching!==!1?e.disableCaching||o.getDisableCaching():!1,"GET"===n&&i&&(d=Ext.urlAppend(d,(e.disableCachingParam||o.getDisableCachingParam())+"="+(new Date).getTime())),("GET"==n||r)&&a&&(d=Ext.urlAppend(d,a),a=null),l&&(d=Ext.urlAppend(d,l)),{url:d,method:n,data:r||a||null}},setupUrl:function(e,t){var n=this.getForm(e);return n&&(t=t||n.action),t},setupParams:function(e,t){var n,i=this.getForm(e);return i&&!this.isFormUpload(e)&&(n=Ext.Element.serializeForm(i),t=t?t+"&"+n:n),t},setupMethod:function(e,t){return this.isFormUpload(e)?"POST":t},setupHeaders:function(e,t,n,i){var r,o,a=this,s=Ext.apply({},t.headers||{},a.getDefaultHeaders()||{}),l=a.getDefaultPostHeader(),d=t.jsonData,u=t.xmlData,c="Content-Type",h=Ext.isDefined(t.useDefaultXhrHeader)?t.useDefaultXhrHeader:a.getUseDefaultXhrHeader();s.hasOwnProperty(c)||!n&&!i||(n&&(t.rawData?l="text/plain":u&&Ext.isDefined(u)?l="text/xml":d&&Ext.isDefined(d)&&(l="application/json")),s[c]=l),h&&!s["X-Requested-With"]&&(s["X-Requested-With"]=a.getDefaultXhrHeader()),(void 0===s[c]||null===s[c])&&delete s[c];try{for(r in s)s.hasOwnProperty(r)&&(o=s[r],e.setRequestHeader(r,o))}catch(p){a.fireEvent("exception",r,o)}return s},newRequest:function(e){var t,n=this;return e.binaryData?t=n.nativeBinaryPostSupport()?n.getXhrInstance():new Ext.data.flash.BinaryXhr:n.getCors()&&Ext.isIE&&Ext.ieVersion<=9?(t=n.getXdrInstance(),n.setIsXdr(!0)):(t=n.getXhrInstance(),n.setIsXdr(!1)),t},openRequest:function(e,t,n,i,r){var o=this,a=o.newRequest(e);return i?a.open(t.method,t.url,n,i,r):o.getIsXdr()?a.open(t.method,t.url):a.open(t.method,t.url,n),(e.binary||o.getBinary())&&(window.Uint8Array?a.responseType="arraybuffer":a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined")),(e.withCredentials||o.getWithCredentials())&&(a.withCredentials=!0),a},getXdrInstance:function(){var e;return Ext.ieVersion>=8?e=new XDomainRequest:Ext.Error.raise({msg:"Your browser does not support CORS"}),e},getXhrInstance:function(){for(var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0,i=t.length;i>n;++n)try{(e=t[n])();break}catch(r){}return e}(),isLoading:function(e){if(e||(e=this.getLatest()),!e||!e.xhr)return!1;var t=e.xhr.readyState,n=Ext.data.flash&&Ext.data.flash.BinaryXhr;return e.xhr instanceof n&&4!=t||!(0===t||4==t)},abort:function(e){var t,n=this;if(e||(e=n.getLatest()),e&&n.isLoading(e)){t=e.xhr;try{t.onreadystatechange=null}catch(i){t.onreadystatechange=Ext.emptyFn}t.abort(),n.clearTimeout(e),e.timedout||(e.aborted=!0),n.onComplete(e),n.cleanup(e)}},abortAll:function(){var e,t=this.requests;for(e in t)t.hasOwnProperty(e)&&this.abort(t[e])},getLatest:function(){var e,t=this.latestId;return t&&(e=this.requests[t]),e||null},onStateChange:function(e,t){var n=this,i=Ext.GlobalEvents;(e.xhr&&4==e.xhr.readyState||n.getIsXdr())&&(n.clearTimeout(e),n.onComplete(e,t),n.cleanup(e),i.hasListeners.idle&&i.fireEvent("idle"))},clearTimeout:function(e){clearTimeout(e.timeout),delete e.timeout},cleanup:function(e){e.xhr=null,delete e.xhr},onComplete:function(e,t){var n,i,r,o,a=this,s=e.options;try{n=e.xhr,i=a.parseStatus(n.status),i.success&&(i.success=4===n.readyState)}catch(l){i={success:!1,isException:!1}}return r=a.getIsXdr()?t:i.success,r?(o=a.createResponse(e),a.fireEvent("requestcomplete",a,o,s),Ext.callback(s.success,s.scope,[o,s])):(o=i.isException||e.aborted||e.timedout?a.createException(e):a.createResponse(e),a.fireEvent("requestexception",a,o,s),Ext.callback(s.failure,s.scope,[o,s])),Ext.callback(s.callback,s.scope,[s,r,o]),delete a.requests[e.id],o},parseStatus:function(e){e=1223==e?204:e;var t=e>=200&&300>e||304==e,n=!1;if(!t)switch(e){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:n=!0}return{success:t,isException:n}},createResponse:function(e){for(var t,n,i,r,o=this,a=e.xhr,s=o.getIsXdr(),l={},d=s?[]:a.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),u=d.length;u--;)t=d[u],n=t.indexOf(":"),n>=0&&(i=t.substr(0,n).toLowerCase()," "==t.charAt(n+1)&&++n,l[i]=t.substr(n+1));return e.xhr=null,delete e.xhr,r={request:e,requestId:e.id,status:a.status,statusText:a.statusText,getResponseHeader:function(e){return l[e.toLowerCase()]},getAllResponseHeaders:function(){return l}},s&&o.processXdrResponse(r,a),e.binary?r.responseBytes=o.getByteArray(a):(r.responseText=a.responseText,r.responseXML=a.responseXML),a=null,r},createException:function(e){return{request:e,requestId:e.id,status:e.aborted?-1:0,statusText:e.aborted?"transaction aborted":"communication failure",aborted:e.aborted,timedout:e.timedout}},getByteArray:function(e){var t,n,i,r,o=e.response,a=e.responseBody,s=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(e instanceof s)t=e.responseBytes;else if(window.Uint8Array)t=o?new Uint8Array(o):[];else if(Ext.isIE9p)try{t=new VBArray(a).toArray()}catch(l){t=[]}else if(Ext.isIE)this.self.vbScriptInjected||this.injectVBScript(),getIEByteArray(e.responseBody,t=[]);else for(t=[],n=e.responseText,i=n.length,r=0;i>r;r++)t.push(255&n.charCodeAt(r));return t},injectVBScript:function(){var e=document.createElement("script");e.type="text/vbscript",e.text="Function getIEByteArray(byteArray, out)\nDim len, i\nlen = LenB(byteArray)\nFor i = 1 to len\nout.push(AscB(MidB(byteArray, i, 1)))\nNext\nEnd Function",Ext.getHead().dom.appendChild(e),this.self.vbScriptInjected=!0},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0),Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:!0,autoAbort:!1},0,0,0,0,0,0,[Ext,"Ajax"],0),Ext.cmd.derive("Ext.AnimationQueue",Ext.Base,{singleton:!0,constructor:function(){this.queue=[],this.taskQueue=[],this.runningQueue=[],this.idleQueue=[],this.isRunning=!1,this.isIdle=!0,this.run=Ext.Function.bind(this.run,this),Ext.os.is.iOS&&Ext.interval(this.watch,500,this)},start:function(){this.queue.push(arguments),this.isRunning||(this.hasOwnProperty("idleTimer")&&(clearTimeout(this.idleTimer),delete this.idleTimer),this.hasOwnProperty("idleQueueTimer")&&(clearTimeout(this.idleQueueTimer),delete this.idleQueueTimer),this.isIdle=!1,this.isRunning=!0,this.doStart())},watch:function(){this.isRunning&&Ext.now()-this.lastRunTime>=500&&this.run()},run:function(){if(this.isRunning){var e,t,n=this.runningQueue;for(this.lastRunTime=Ext.now(),this.frameStartTime=Ext.now(),n.push.apply(n,this.queue),e=0,t=n.length;t>e;e++)this.invoke(n[e]);n.length=0,this.doIterate()}},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run),this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(e,t,n){if(this.isRunning){var i,r,o=this.queue,a=o.length;for(i=0;a>i;i++)r=o[i],r[0]===e&&r[1]===t&&r[2]===n&&(o.splice(i,1),i--,a--);0===a&&(this.doStop(),this.isRunning=!1,this.idleTimer=Ext.defer(this.whenIdle,100,this))}},onIdle:function(e,t,n){var i,r,o,a=this.idleQueue;for(i=0,r=a.length;r>i;i++)if(o=a[i],e===o[0]&&t===o[1]&&n===o[2])return;a.push(arguments),this.isIdle&&this.processIdleQueue()},unIdle:function(e,t,n){var i,r,o,a=this.idleQueue;for(i=0,r=a.length;r>i;i++)if(o=a[i],e===o[0]&&t===o[1]&&n===o[2])return a.splice(i,1),!0;return!1},queueTask:function(){this.taskQueue.push(arguments),this.processTaskQueue()},dequeueTask:function(e,t,n){var i,r,o,a=this.taskQueue;for(i=0,r=a.length;r>i;i++)o=a[i],e===o[0]&&t===o[1]&&n===o[2]&&(a.splice(i,1),i--,r--)},invoke:function(e){var t=e[0],n=e[1],i=e[2];t="string"==typeof t?n[t]:t,Ext.isArray(i)?t.apply(n,i):t.call(n,i)},whenIdle:function(){this.isIdle=!0,this.processIdleQueue()},processIdleQueue:function(){this.hasOwnProperty("idleQueueTimer")||(this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this))},processIdleQueueItem:function(){if(delete this.idleQueueTimer,this.isIdle){var e,t=this.idleQueue;t.length>0&&(e=t.shift(),this.invoke(e),this.processIdleQueue())}},processTaskQueue:function(){this.hasOwnProperty("taskQueueTimer")||(this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this))},processTaskQueueItem:function(){delete this.taskQueueTimer;var e,t=this.taskQueue;t.length>0&&(e=t.shift(),this.invoke(e),this.processTaskQueue())},showFps:function(){Ext.onInternalReady(function(){Ext.Viewport.add([{xtype:"component",bottom:50,left:0,width:50,height:20,html:"Average",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__averageFps",xtype:"component",bottom:0,left:0,width:50,height:50,html:"0",style:"background-color: red; color: white; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:50,width:50,height:20,html:"Min (Last 1k)",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__minFps",xtype:"component",bottom:0,left:50,width:50,height:50,html:"0",style:"background-color: orange; color: white; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:100,width:50,height:20,html:"Max (Last 1k)",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__maxFps",xtype:"component",bottom:0,left:100,width:50,height:50,html:"0",style:"background-color: yellow; color: black; text-align: center; line-height: 50px;"},{xtype:"component",bottom:50,left:150,width:50,height:20,html:"Current",style:"background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;"},{id:"__currentFps",xtype:"component",bottom:0,left:150,width:50,height:50,html:"0",style:"background-color: green; color: white; text-align: center; line-height: 50px;"}]),Ext.AnimationQueue.resetFps()})},resetFps:function(){var e=Ext.getCmp("__currentFps"),t=Ext.getCmp("__averageFps"),n=Ext.getCmp("__minFps"),i=Ext.getCmp("__maxFps"),r=1e3,o=0,a=0,s=0;Ext.AnimationQueue.onFpsChanged=function(l){a++,a%10||(r=1e3,o=0),s+=l,r=Math.min(r,l),o=Math.max(o,l),e.setHtml(Math.round(l)),t.setHtml(Math.round(s/a)),n.setHtml(Math.round(r)),i.setHtml(Math.round(o))}}},1,0,0,0,0,0,[Ext,"AnimationQueue"],function(){}),Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:!0,count:0,typeName:"xtype",constructor:function(e){var t=this;Ext.apply(t,e||{}),t.all={},t.references={},t.onAvailableCallbacks={}},create:function(e,t){return"string"==typeof e?Ext.widget(e):e.isComponent?e:"xclass"in e?Ext.create(e.xclass,e):Ext.widget(e.xtype||t,e)},get:function(e){return this.all[e]},register:function(e){var t=this,n=t.all,i=e.getId(),r=t.onAvailableCallbacks;n[i]=e,e.reference&&(t.references[i]=e),++t.count,t.hasFocusListener||(Ext.on("focus",t.onGlobalFocus,t),t.hasFocusListener=!0),r=r&&r[i],r&&r.length&&t.notifyAvailable(e)},unregister:function(e){var t=e.getId();e.reference&&delete this.references[t],delete this.all[t],this.count--},markReferencesDirty:function(){this.referencesDirty=!0},fixReferences:function(){var e,t=this,n=t.references;if(t.referencesDirty){for(e in n)n.hasOwnProperty(e)&&n[e].fixReference();t.referencesDirty=!1}},onAvailable:function(e,t,n){var i,r=this,o=r.onAvailableCallbacks,a=r.all;e in a?(i=a[e],t.call(n||i,i)):e&&(Ext.isArray(o[e])||(o[e]=[]),o[e].push(function(e){t.call(n||e,e)}))},notifyAvailable:function(e){for(var t=this.onAvailableCallbacks[e&&e.getId()]||[];t.length;)t.shift()(e)},each:function(e,t){return Ext.Object.each(this.all,e,t)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(e){var t,n,i=this,r=e.toElement,o=e.fromElement,a=Ext.Component.fromElement(r),s=Ext.Component.fromElement(o),l=i.getCommonAncestor(s,a);if(s&&!s.isDestroyed&&!s.destroying)for(s.focusable&&o===s.getFocusEl().dom&&(t=new Ext.event.Event(e.event),t.type="blur",t.target=o,t.relatedTarget=r,s.onBlur(t)),n=s;n&&n!==l;n=n.getRefOwner())n.isDestroyed||n.destroying||n.onFocusLeave({event:e.event,type:"focusleave",target:o,relatedTarget:r,fromComponent:s,toComponent:a});if(a&&!a.isDestroyed)for(a.focusable&&r===a.getFocusEl().dom&&(t=new Ext.event.Event(e.event),t.type="focus",t.relatedTarget=o,t.target=r,a.onFocus(t)),n=a;n&&n!==l;n=n.getRefOwner())n.onFocusEnter({event:e.event,type:"focusenter",relatedTarget:o,target:r,fromComponent:s,toComponent:a})},getCommonAncestor:function(e,t){if(e===t)return e;for(;e&&!e.isAncestor(t)&&e!==t;)e=e.getRefOwner();return e},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(e){return Ext.ComponentManager.get(e)}}),Ext.ns("Ext.util").Operators={"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"^=":function(e,t){return e&&e.substr(0,t.length)==t},"$=":function(e,t){return e&&e.substr(e.length-t.length)==t},"*=":function(e,t){return e&&-1!==e.indexOf(t)},"%=":function(e,t){return e%t===0},"|=":function(e,t){return e&&(e==t||e.substr(0,t.length+1)==t+"-")},"~=":function(e,t){return e&&-1!=(" "+e+" ").indexOf(" "+t+" ")}},Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{config:{maxSize:null},add:function(e,t){var n,i,r=this;return r.removeAtKey(e),i=r.last,n={prev:i,next:null,key:e,value:t},i?i.next=n:r.first=n,r.last=n,Ext.util.HashMap.prototype.add.call(this,e,n),r.prune(),t},insertBefore:function(e,t,n){var i,r,o=this;return(n=this.map[this.findKey(n)])?(i=o.findKey(t),i?o.unlinkEntry(r=o.map[i]):r={prev:n.prev,next:n,key:e,value:t},n.prev?r.prev.next=r:o.first=r,r.next=n,n.prev=r,o.prune(),t):o.add(e,t)},get:function(e){var t=this.map[e];return t?(t.next&&this.moveToEnd(t),t.value):void 0},removeAtKey:function(e){return this.unlinkEntry(this.map[e]),Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(){return this.first=this.last=null,Ext.util.HashMap.prototype.clear.apply(this,arguments)},unlinkEntry:function(e){e&&(e.next?e.next.prev=e.prev:this.last=e.prev,e.prev?e.prev.next=e.next:this.first=e.next,e.prev=e.next=null)},moveToEnd:function(e){this.unlinkEntry(e),(e.prev=this.last)?this.last.next=e:this.first=e,this.last=e},getArray:function(e){for(var t=[],n=this.first;n;)t.push(e?n.key:n.value),n=n.next;return t},each:function(e,t,n){var i=this,r=n?i.last:i.first,o=i.length;for(t=t||i;r&&e.call(t,r.key,r.value,o)!==!1;)r=n?r.prev:r.next;return i},findKey:function(e){var t,n=this.map;for(t in n)if(n.hasOwnProperty(t)&&n[t].value===e)return t;return void 0},clone:function(){var e,t=new this.self(this.initialConfig),n=this.map;t.suspendEvents();for(e in n)n.hasOwnProperty(e)&&t.add(e,n[e].value);return t.resumeEvents(),t},prune:function(){var e=this,t=e.getMaxSize(),n=t?e.length-t:0;if(n>0)for(;e.first&&n;n--)e.removeAtKey(e.first.key)}},0,0,0,0,0,0,[Ext.util,"LruCache"],0),Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:!0},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var e=this,t=Ext.util.Operators,n=/(\d*)n\+?(\d*)/,i=/\D/,r=/^(\s)+/,o=/\\(.)/g,a=new Ext.util.LruCache({maxSize:100}),s="var r = [],i = 0,it = items,l = it.length,c;for (; i < l; i++) {c = it[i];if (c.{0}) {r.push(c);}}return r;",l=function(e,t){return t.method.apply(this,[e].concat(t.args))},d=function(e,t){for(var n,i=[],r=0,o=e.length,a=">"!==t;o>r;r++)n=e[r],n.getRefItems&&(i=i.concat(n.getRefItems(a)));return i},u=function(e){for(var t,n=[],i=0,r=e.length;r>i;i++)for(t=e[i];t=t.getRefOwner();)n.push(t);return n},c=function(e,t,n){if("*"===t)return e.slice();for(var i,r=[],o=0,a=e.length;a>o;o++)i=e[o],i.isXType(t,n)&&r.push(i);return r},h=function(e,n,i,r){var o,a,s,l,d,u,c,h=[],p=0,f=e.length;for("@"===n.charAt(0)&&(o=!0,n=n.substr(1)),"?"===n.charAt(0)&&(o=!0,a=!0,n=n.substr(1));f>p;p++){if(s=e[p],c=s.self.$config.configs[n])l=s[c.names.get]();else{if(o&&!s.hasOwnProperty(n))continue;l=s[n]}if(a)h.push(s);else if("~="===i){if(l)for(Ext.isArray(l)||(l=l.split(" ")),d=0,u=l.length;u>d;d++)if(t[i](Ext.coerce(l[d],r),r)){h.push(s);break}}else"/="===i?null!=l&&r.test(l)&&h.push(s):(r?t[i](Ext.coerce(l,r),r):!!s[n])&&h.push(s)}return h},p=function(e,t){for(var n,i=[],r=0,o=e.length;o>r;r++)n=e[r],n.getItemId()===t&&i.push(n);return i},f=function(t,n,i){return e.pseudos[n](t,i)},g=/^(\s?([>\^])\s?|\s|$)/,m=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,x=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:c,argTransform:function(e){return void 0!==e[1]&&(e[1]=e[1].replace(o,"$1")),e.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:h,argTransform:function(e){var t,n=(e[0],e[1]),i=e[2],r=e[4];return void 0!==r&&(r=r.replace(o,"$1")),"/="===i&&(t=a.get(r),r=t?t:a.add(r,RegExp(r))),[n,i,r]}},{re:/^#((?:\\\.|[\w\-])+)/,method:p},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:f,argTransform:function(e){return void 0!==e[2]&&(e[2]=e[2].replace(o,"$1")),e.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:s}];e.Query=Ext.extend(Object,{constructor:function(e){e=e||{},Ext.apply(this,e)},execute:function(e){var t,n,i,r=this.operations,o=[];for(n=0,i=r.length;i>n;n++)t=r[n],o=o.concat(this._execute(e,t));return o},_execute:function(e,t){var n,i,r=0,o=t.length;for(e?Ext.isIterable(e)?i=e:e.isMixedCollection&&(i=e.items):i=Ext.ComponentManager.getAll();o>r;r++)if(n=t[r],i="^"===n.mode?u(i||[e]):n.mode?d(i||[e],n.mode):l(i||d([e]),n),r===o-1)return i;return[]},is:function(e){var t,n,i=this.operations,r=!1,o=i.length;if(0===o)return!0;for(n=0;o>n;n++)if(t=i[n],r=this._is(e,t))return r;return!1},_is:function(e,t){var n,i,r,o,a,s,c=t.length,h=[e];for(i=c-1;i>=0;--i)if(n=t[i],o=n.mode){if("^"===o)h=d(h," ");else if(">"===o){for(a=[],r=0,c=h.length;c>r;++r)s=h[r].getRefOwner(),s&&a.push(s);h=a}else h=u(h);if(0===h.length)return!1}else if(h=l(h,n),0===h.length)return!1;return!0},getMatches:function(e,t){var n,i=t.length;for(n=0;i>n&&(e=l(e,t[n]),0!==e.length);++n);return e},isMultiMatch:function(){return this.operations.length>1}}),Ext.apply(e,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(t,n){for(var i,r=0,o=t.length,a=[],s=-1;o>r;++r)i=t[r],e.is(i,n)||(a[++s]=i);return a},first:function(e){var t=[];return e.length>0&&t.push(e[0]),t},last:function(e){var t=e.length,n=[];return t>0&&n.push(e[t-1]),n},focusable:function(e){for(var t,n=e.length,i=[],r=0;n>r;r++)t=e[r],t.isFocusable&&t.isFocusable()&&i.push(t);return i},"nth-child":function(e,t){var r,o,a,s=[],l=n.exec("even"===t&&"2n"||"odd"===t&&"2n+1"||!i.test(t)&&"n+"+t||t),d=(l[1]||1)-0,u=l[2]-0;for(r=0;o=e[r];r++)a=r+1,1===d?(0===u||a===u)&&s.push(o):(a+u)%d===0&&s.push(o);return s}},query:function(t,n){if(!t)return Ext.ComponentManager.all.getArray();var i,r,o,a=[],s=[],l={},d=e.cache.get(t);if(d||(d=e.cache.add(t,e.parse(t))),a=d.execute(n),d.isMultiMatch()){for(i=a.length,o=0;i>o;o++)r=a[o],l[r.id]||(s.push(r),l[r.id]=!0);a=s}return a},visitPreOrder:function(t,n,i,r,o){e._visit(!0,t,n,i,r,o)},visitPostOrder:function(t,n,i,r,o){e._visit(!1,t,n,i,r,o)},_visit:function(t,n,i,r,o,a){var s,l,d,u=e.cache.get(n),c=[i],h=0;if(u||(u=e.cache.add(n,e.parse(n))),d=u.is(i),i.getRefItems&&(s=i.getRefItems(),h=s.length),a&&Ext.Array.push(c,a),t&&d&&r.apply(o||i,c)===!1)return!1;for(l=0;h>l;l++)if(e._visit.call(e,t,n,s[l],r,o,a)===!1)return!1;return!t&&d&&r.apply(o||i,c)===!1?!1:void 0},is:function(t,n){if(!n)return!0;var i=e.cache.get(n);return i||(i=e.cache.add(n,e.parse(n))),i.is(t)},parse:function(t){var n,i,r,o,a=[];for(n=Ext.splitAndUnescape(t,","),r=0,o=n.length;o>r;r++)i=Ext.String.trim(n[r]),a.push(e._parse(i));return new e.Query({operations:a})},_parse:function(e){for(var t,n,i,a,s,l,d,u,h,f,v,y=[],E=Ext.String.trim,b=x.length;e&&t!==e;){for(t=e,n=e.match(m),n&&(a=n[1],i=E(n[2]).replace(o,"$1"),"#"===a?y.push({method:p,args:[i]}):y.push({method:c,args:[i,!!n[3]]}),e=e.replace(n[0],"").replace(r,"$1"));!(s=e.match(g));)for(u=0;e&&b>u;u++){if(h=x[u],l=e.match(h.re),f=h.method,d=h.argTransform,l){v=d?d(l):l.slice(1),y.push({method:Ext.isString(h.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[f].concat(l.slice(1)))):h.method,args:v}),e=e.replace(l[0],"").replace(r,"$1");break}u===b-1&&Ext.Error.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}s[1]&&(y.push({mode:s[2]||s[1]}),e=e.replace(s[0],"").replace(r,""))}return y}})}),Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",statics:{generateSetter:function(e){var t=e.names,n=e.name,i=t.internal,r=t.apply,o=t.changeEvent,a=t.doSet;return function(e){var s,l=this,d=l.$configPrefixed?i:n,u=l.initialized,c=l[r];return c&&(e=c.call(l,e,l[d]),void 0===e)?l:(s=l[d],e!==s&&(u?l.fireAction(o,[l,e,s],l.doSet,l,{nameMap:t}):(l[d]=e,l[a]&&l[a](e,s))),this)}}},initialized:!1,constructor:function(e){this.mixins.observable.constructor.call(this,e),this.initialized=!0},doSet:function(e,t,n,i){var r=i.nameMap;e[r.internal]=t,e[r.doSet]&&e[r.doSet].call(this,t,n)},onClassExtended:function(e,t){if(t.hasOwnProperty("eventedConfig")){var n,i,r=t.config,o=t.eventedConfig,a="eventedSetter";r?Ext.applyIf(r,o):e.addConfig(o);for(n in o)o.hasOwnProperty(n)&&(i=Ext.Config.get(n),t[i.names.set]=i[a]||(i[a]=this.generateSetter(i)))}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0),Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)(\?)?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(e,t){var n=this.getConstrainVector(t,e);return n&&(e[0]+=n[0],e[1]+=n[1]),e},alignTo:function(e,t,n,i){var r=this,o=r.el;return r.setXY(r.getAlignToXY(e,t,n),o.anim&&i?o.anim(i):!1)},calculateAnchorXY:function(e,t,n,i){var r,o,a,s=this,l=s.el,d=document,u=l.dom===d.body||l.dom===d,c=Math.round;switch(e=(e||"tl").toLowerCase(),i=i||{},o=i.width||(u?Ext.Element.getViewportWidth():s.getWidth()),a=i.height||(u?Ext.Element.getViewportHeight():s.getHeight()),e){case"tl":r=[0,0];break;case"bl":r=[0,a];break;case"tr":r=[o,0];break;case"c":r=[c(.5*o),c(.5*a)];break;case"t":r=[c(.5*o),0];break;case"l":r=[0,c(.5*a)];break;case"r":r=[o,c(.5*a)];break;case"b":r=[c(.5*o),a];break;case"tc":r=[c(.5*o),0];break;case"bc":r=[c(.5*o),a];break;case"br":r=[o,a]}return[r[0]+t,r[1]+n]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p,f,g,m,x,v,y,E,b,C=this;return e=Ext.get(e.el||e),!e||!e.dom,n=n||[0,0],t=(t&&"?"!==t?/-/.test(t)||""===t?t||"tl-bl":"tl-"+t:"tl-bl?").toLowerCase(),t=C.convertPositionSpec(t),o=t.match(C._alignRe),f=o[1],g=o[2],p=!!o[3],a=C.getAnchorXY(f,!0),s=C.getAnchorToXY(e,g,!1),E=s[0]-a[0]+n[0],b=s[1]-a[1]+n[1],p&&(i=C.constrainTo||C.container||C.el.parent(),i=Ext.get(i.el||i),r=i.getConstrainRegion(),r.right=r.left+i.el.dom.clientWidth,l=C.getWidth(),d=C.getHeight(),u=e.getRegion(),m=f.charAt(0),x=f.charAt(f.length-1),v=g.charAt(0),y=g.charAt(g.length-1),c=E<u.right&&E+l>=u.left&&("t"==m&&"b"==v||"b"==m&&"t"==v),h=b<u.bottom&&b+d>=u.top&&("r"==x&&"l"==y||"l"==x&&"r"==y),E+l>r.right&&(h?(E=u.left-l,h=!1):E=r.right-l),E<r.left&&(E=h?u.right:r.left),b+d>r.bottom&&(c?(b=u.top-d,c=!1):b=r.bottom-d),b<r.top&&(b=c?u.bottom:r.top)),[E,b]},getAnchorXY:function(e,t,n){var i=this,r=i.getXY(),o=i.el,a=document,s=o.dom==a.body||o.dom==a,l=o.getScroll(),d=s?l.left:t?0:r[0],u=s?l.top:t?0:r[1];return i.calculateAnchorXY(e,d,u,n)},getBox:function(e,t){var n,i,r,o=this,a=t?o.getLocalXY():o.getXY(),s=a[0],l=a[1],d=o.getWidth(),u=o.getHeight();return e&&(n=o.getBorderPadding(),i=n.beforeX,r=n.beforeY,s+=i,l+=r,d-=i+n.afterX,u-=r+n.afterY),{x:s,left:s,0:s,y:l,top:l,1:l,width:d,height:u,right:s+d,bottom:l+u}},calculateConstrainedPosition:function(e,t,n,i){var r,o,a,s,l=this,d=l.floatParent,u=d?d.getTargetEl():null,c=!1;return n&&d?(o=u.getXY(),a=u.getBorderPadding(),o[0]+=a.beforeX,o[1]+=a.beforeY,t&&(s=[t[0]+o[0],t[1]+o[1]])):s=t,e=e||l.constrainTo||u||l.container||l.el.parent(),n&&s&&(s=l.reverseTranslateXY(s)),r=(l.constrainHeader&&l.header.rendered?l.header:l).getConstrainVector(e,s,i),r&&(c=t||l.getPosition(n),c[0]+=r[0],c[1]+=r[1]),c},getConstrainRegion:function(){var e,t,n,i=this,r=i.el,o="BODY"===r.dom.nodeName,a=r.dom,s=r.getBorders(),l=r.getXY(),d=l[0]+s.beforeX,u=l[1]+s.beforeY;return o?(e=r.getScroll(),d=e.left,u=e.top,t=Ext.Element.getViewportWidth(),n=Ext.Element.getViewportHeight()):(t=a.clientWidth,n=a.clientHeight),new Ext.util.Region(u,d+t,u+n,d)},getConstrainVector:function(e,t,n){var i,r=this.getRegion(),o=[0,0],a=this.shadow&&this.constrainShadow&&!this.shadowDisabled?this.shadow.getShadowSize():void 0,s=!1,l=this.constraintInsets;return e instanceof Ext.util.Region||(e=Ext.get(e.el||e),i=e.getViewSize(),e=e.getConstrainRegion(),e.right=e.left+i.width,e.bottom=e.top+i.height),l&&(l=Ext.isObject(l)?l:Ext.Element.parseBox(l),e.adjust(l.top,l.right,l.bottom,l.length)),t&&r.translateBy(t[0]-r.x,t[1]-r.y),n&&(r.right=r.left+n[0],r.bottom=r.top+n[1]),a&&e.adjust(a[0],-a[1],-a[2],a[3]),r.right>e.right&&(s=!0,o[0]=e.right-r.right),r.left+o[0]<e.left&&(s=!0,o[0]=e.left-r.left),r.bottom>e.bottom&&(s=!0,o[1]=e.bottom-r.bottom),r.top+o[1]<e.top&&(s=!0,o[1]=e.top-r.top),s?o:!1},getOffsetsTo:function(e){var t=this.getXY(),n=Ext.fly(e.el||e).getXY();return[t[0]-n[0],t[1]-n[1]]},getRegion:function(){var e=this.getBox();return new Ext.util.Region(e.top,e.right,e.bottom,e.left)},getViewRegion:function(){var e,t,n,i,r,o,a,s=this,l=s.el,d="BODY"===l.dom.nodeName;return d?(t=l.getScroll(),r=t.left,i=t.top,o=Ext.Element.getViewportWidth(),a=Ext.Element.getViewportHeight()):(e=s.getBorderPadding(),n=s.getXY(),r=n[0]+e.beforeX,i=n[1]+e.beforeY,o=s.getWidth(!0),a=s.getHeight(!0)),new Ext.util.Region(i,r+o,i+a,r)},move:function(e,t,n){var i=this,r=i.getXY(),o=r[0],a=r[1],s=[o-t,a],l=[o+t,a],d=[o,a-t],u=[o,a+t],c={l:s,left:s,r:l,right:l,t:d,top:d,up:d,b:u,bottom:u,down:u};e=e.toLowerCase(),i.setXY([c[e][0],c[e][1]],n)},setBox:function(e){var t,n,i=this;return e.isRegion&&(e={x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}),i.constrainBox(e),t=e.x,n=e.y,i.setXY([t,n]),i.setSize(e.width,e.height),i.afterSetPosition(t,n),i},constrainBox:function(e){var t,n,i,r=this;(r.constrain||r.constrainHeader)&&(n="x"in e?e.x:e.left,i="y"in e?e.y:e.top,t=r.calculateConstrainedPosition(null,[n,i],!1,[e.width,e.height]),t&&(e.x=t[0],e.y=t[1]))},translatePoints:function(e,t){var n=this.translateXY(e,t);return{left:n.x,top:n.y}},translateXY:function(e,t){var n=this,i=n.el,r=i.getStyle(n._positionTopLeft),o="relative"===r.position,a=parseFloat(r.left),s=parseFloat(r.top),l=n.getXY();return Ext.isArray(e)&&(t=e[1],e=e[0]),isNaN(a)&&(a=o?0:i.dom.offsetLeft),isNaN(s)&&(s=o?0:i.dom.offsetTop),a="number"==typeof e?e-l[0]+a:void 0,s="number"==typeof t?t-l[1]+s:void 0,{x:a,y:s}},reverseTranslateXY:function(e){var t,n,i,r,o=e,a=this.el,s=a.dom,l=s.offsetParent;return l&&(t=a.isStyle("position","relative"),n=Ext.fly(l).getXY(),i=e[0]+n[0]+l.clientLeft,r=e[1]+n[1]+l.clientTop,t&&(i+=a.getPadding("l"),r+=a.getPadding("t")),o=[i,r]),o}},0,0,0,0,0,0,[Ext.util,"Positionable"],0),Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(e,t,n,i,r,o){var a=this,s=!Ext.isEmpty(r),l=function(){a.alignTo(e,t,n,i),Ext.callback(o,a)},d=a.getAnchor();return a.removeAnchor(),Ext.apply(d,{fn:l,scroll:s}),Ext.on("resize",l,null),s&&Ext.getWin().on("scroll",l,null,{buffer:isNaN(r)?50:r}),l(),a},getAnchor:function(){var e,t,n=this.el;return n.dom?(e=n.getData(),t=e._anchor,t||(t=e._anchor={}),t):void 0},removeAnchor:function(){var e=this.getAnchor();return e&&e.fn&&(Ext.un("resize",e.fn),e.scroll&&Ext.getWin().on("scroll",e.fn),delete e.fn),this},setBox:function(e,t){var n=this;return e.isRegion&&(e={x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}),t?(n.constrainBox(e),n.animate(Ext.applyIf({to:e,listeners:{afteranimate:Ext.Function.bind(n.afterSetPosition,n,[e.x,e.y])}},t))):arguments.callee.$previous.call(this,e),
n}}),Ext.cmd.derive("Ext.dom.UnderlayPool",Ext.Base,{constructor:function(e){this.elementConfig=e,this.cache=[]},checkOut:function(){var e=this.cache.shift();return e||(e=Ext.Element.create(this.elementConfig),e.setVisibilityMode(2)),e},checkIn:function(e){this.cache.push(e)},reset:function(){for(var e=this.cache,t=e.length;t--;)e[t].destroy();this.cache=[]}},1,0,0,0,0,0,[Ext.dom,"UnderlayPool"],0),Ext.cmd.derive("Ext.dom.Underlay",Ext.Base,{constructor:function(e){Ext.apply(this,e)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var e=this,t=e.el;t&&(t.hide(),e.getPool().checkIn(t),e.el=null,e.hidden=!0)},realign:function(e,t,n,i){var r=this,o=r.el,a=r.target,s=r.offsets,l=Math.max;o&&(null==e&&(e=a.getX()),null==t&&(t=a.getY()),null==n&&(n=a.getWidth()),null==i&&(i=a.getHeight()),s&&(e+=s.x,t+=s.y,n=l(n+s.w,0),i=l(i+s.h,0)),o.setXY([e,t]),o.setSize(n,i))},setZIndex:function(e){this.zIndex=e,this.el&&this.el.setStyle("z-index",e)},show:function(){var e,t=this,n=t.target,i=t.zIndex,r=t.el,o=t.getInsertionTarget().dom;r||(r=t.el=t.getPool().checkOut()),t.beforeShow(),null==i&&(i=parseInt(n.getStyle("z-index"),10)),i&&r.setStyle("z-index",i),r.setStyle("position",t.fixed?"fixed":""),e=r.dom,e.nextSibling!==o&&n.dom.parentNode.insertBefore(e,o),r.show(),t.realign(),t.hidden=!1}},1,0,0,0,0,0,[Ext.dom,"Underlay"],0),Ext.cmd.derive("Ext.dom.Shadow",Ext.dom.Underlay,{alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:"x-"+(Ext.supports.CSS3BoxShadow?"css":"ie")+"-shadow",constructor:function(e){var t,n,i,r,o=this;switch(Ext.dom.Underlay.prototype.constructor.call(this,e),o.elementConfig={cls:o.cls,role:"presentation"},i=o.offset,r=Math.floor(i/2),o.opacity=50,o.mode.toLowerCase()){case"drop":t={x:0,y:0,w:i,h:i},n=Ext.supports.CSS3BoxShadow?{x:i,y:i,h:-i,w:-i}:{x:-r,y:-r,h:-r,w:-r};break;case"sides":t={x:-i,y:0,w:2*i,h:i},n=Ext.supports.CSS3BoxShadow?{x:0,y:i,h:-i,w:0}:{x:1+r-2*i,y:-(1+r),h:-1,w:r-1};break;case"frame":t={x:-i,y:-i,w:2*i,h:2*i},n=Ext.supports.CSS3BoxShadow?{x:0,y:0,h:0,w:0}:{x:1+r-2*i,y:1+r-2*i,h:i-r-1,w:i-r-1};break;case"bottom":t={x:-i,y:0,w:2*i,h:i},n=Ext.supports.CSS3BoxShadow?{x:0,y:i,h:-i,w:0}:{x:0,y:i,h:0,w:0}}o.offsets=n,o.outerOffsets=t},getShadowSize:function(){var e=this,t=e.el?e.offset:0,n=[t,t,t,t],i=e.mode.toLowerCase();return e.el&&"frame"!==i&&(n[0]=0,"drop"==i&&(n[3]=0)),n},boxShadowProperty:function(){var e="boxShadow",t=document.documentElement.style;return"boxShadow"in t||("WebkitBoxShadow"in t?e="WebkitBoxShadow":"MozBoxShadow"in t&&(e="MozBoxShadow")),e}(),beforeShow:function(){var e=this,t=e.el.dom.style,n=e.shim;Ext.supports.CSS3BoxShadow?t[e.boxShadowProperty]="0 0 "+(e.offset+2)+"px #888":t.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+e.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+e.offset+")",n&&n.realign()},setOpacity:function(e){var t=this.el;t&&(Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(e=Math.floor(100*e/2)/100),this.opacity=e,t.setOpacity(e))}},1,0,0,0,0,0,[Ext.dom,"Shadow",Ext,"Shadow"],0),Ext.cmd.derive("Ext.dom.Shim",Ext.dom.Underlay,{cls:"x-shim",constructor:function(e){Ext.dom.Underlay.prototype.constructor.call(this,e),this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var e=this.shadow;return e&&e.el||this.target}},1,0,0,0,0,0,[Ext.dom,"Shim"],0),Ext.cmd.derive("Ext.dom.ElementEvent",Ext.util.Event,{addListener:function(e,t,n,i,r){var o,a,s,l=this,d=!1,u=l.name;return n=n||{},n.delegated===!1||Ext.event.publisher.Dom.instance.directEvents[u]?n.capture?(s=l.directCaptures||(l.directCaptures=new Ext.util.Event(l.observable,u)),d=s.addListener(e,t,n,i,r)):(a=l.directs||(l.directs=new Ext.util.Event(l.observable,u)),d=a.addListener(e,t,n,i,r)):n.capture?(o=l.captures||(l.captures=new Ext.util.Event(l.observable,u)),d=o.addListener(e,t,n,i,r)):d=Ext.util.Event.prototype.addListener.call(this,e,t,n,i,r),d},removeListener:function(e,t){var n=this,i=n.captures,r=n.directs,o=n.directCaptures,a=!1,s=n.findListener(e,t);return-1!==s?a=Ext.util.Event.prototype.removeListener.call(this,e,t,s):(r&&(s=r.findListener(e,t)),-1!==s?a=r.removeListener(e,t,s):(i&&(s=i.findListener(e,t)),-1!==s?a=i.removeListener(e,t,s):o&&(s=o.findListener(e,t),-1!==s&&(a=o.removeListener(e,t,s))))),a},clearListeners:function(){var e=this,t=e.directCaptures,n=e.directs,i=e.captures;t&&t.clearListeners(),n&&n.clearListeners(),i&&i.clearListeners(),Ext.util.Event.prototype.clearListeners.call(this)},suspend:function(){var e=this,t=e.directCaptures,n=e.directs,i=e.captures;t&&t.suspend(),n&&n.suspend(),i&&i.suspend(),Ext.util.Event.prototype.suspend.call(this)},resume:function(){var e=this,t=e.directCaptures,n=e.directs,i=e.captures;t&&t.resume(),n&&n.resume(),i&&i.resume(),Ext.util.Event.prototype.resume.call(this)}},0,0,0,0,0,0,[Ext.dom,"ElementEvent"],0),Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var e=this,t=e.type;e.handles={},e.registerEvents(),Ext.event.publisher.Publisher.publishers[t]=e},registerEvents:function(e){var t,n,i=this,r=Ext.event.publisher.Publisher.publishersByEvent,o=e||i.handledEvents,a=o.length;for(n=0;a>n;n++)t=o[n],i.handles[t]=1,r[t]=i},fire:function(e,t,n){var i;e.hasListeners[t]&&(i=e.events[t],i&&i.fire.apply(i,n))},destroy:Ext.emptyFn},1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0),Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(e){return new this(e.x,e.y)}},constructor:function(e,t){return this.x=null==e||isNaN(e)?0:e,this.y=null==t||isNaN(t)?0:t,this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(e){this.x=e.x,this.y=e.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(e){return this.x==e.x&&this.y==e.y},round:function(e){if(isNaN(e))this.x=Math.round(this.x),this.y=Math.round(this.y);else{var t=Math.pow(10,e);this.x=Math.round(this.x*t)/t,this.y=Math.round(this.y*t)/t}},isZero:function(){return 0==this.x&&0==this.y}},3,0,0,0,0,0,[Ext.util,"Offset"],0),Ext.cmd.derive("Ext.util.Region",Ext.Base,{isRegion:!0,statics:{getRegion:function(e){return Ext.fly(e).getRegion()},from:function(e){return new this(e.top,e.right,e.bottom,e.left)}},constructor:function(e,t,n,i){var r=this;r.y=r.top=r[1]=e,r.right=t,r.bottom=n,r.x=r.left=r[0]=i},contains:function(e){var t=this;return e.x>=t.x&&e.right<=t.right&&e.y>=t.y&&e.bottom<=t.bottom},intersect:function(e){var t=this,n=Math.max(t.y,e.y),i=Math.min(t.right,e.right),r=Math.min(t.bottom,e.bottom),o=Math.max(t.x,e.x);return r>n&&i>o?new this.self(n,i,r,o):!1},union:function(e){var t=this,n=Math.min(t.y,e.y),i=Math.max(t.right,e.right),r=Math.max(t.bottom,e.bottom),o=Math.min(t.x,e.x);return new this.self(n,i,r,o)},constrainTo:function(e){var t=this,n=Ext.Number.constrain;return t.top=t.y=n(t.top,e.y,e.bottom),t.bottom=n(t.bottom,e.y,e.bottom),t.left=t.x=n(t.left,e.x,e.right),t.right=n(t.right,e.x,e.right),t},adjust:function(e,t,n,i){var r=this;return r.top=r.y+=e,r.left=r.x+=i,r.right+=t,r.bottom+=n,r},getOutOfBoundOffset:function(e,t){if(Ext.isObject(e)){t=e;var n=new Ext.util.Offset;return n.x=this.getOutOfBoundOffsetX(t.x),n.y=this.getOutOfBoundOffsetY(t.y),n}return"x"==e?this.getOutOfBoundOffsetX(t):this.getOutOfBoundOffsetY(t)},getOutOfBoundOffsetX:function(e){return e<=this.x?this.x-e:e>=this.right?this.right-e:0},getOutOfBoundOffsetY:function(e){return e<=this.y?this.y-e:e>=this.bottom?this.bottom-e:0},isOutOfBound:function(e,t){return Ext.isObject(e)?(t=e,this.isOutOfBoundX(t.x)||this.isOutOfBoundY(t.y)):"x"==e?this.isOutOfBoundX(t):this.isOutOfBoundY(t)},isOutOfBoundX:function(e){return e<this.x||e>this.right},isOutOfBoundY:function(e){return e<this.y||e>this.bottom},restrict:function(e,t,n){if(Ext.isObject(e)){var i;return n=t,t=e,i=t.copy?t.copy():{x:t.x,y:t.y},i.x=this.restrictX(t.x,n),i.y=this.restrictY(t.y,n),i}return"x"==e?this.restrictX(t,n):this.restrictY(t,n)},restrictX:function(e,t){return t||(t=1),e<=this.x?e-=(e-this.x)*t:e>=this.right&&(e-=(e-this.right)*t),e},restrictY:function(e,t){return t||(t=1),e<=this.y?e-=(e-this.y)*t:e>=this.bottom&&(e-=(e-this.bottom)*t),e},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(e){var t=this;return t.top=t.y=t[1]=e.y,t.right=e.right,t.bottom=e.bottom,t.left=t.x=t[0]=e.x,this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var n=this;return n.top=n.y+=t,n.right+=e,n.bottom+=t,n.left=n.x+=e,n},round:function(){var e=this;return e.top=e.y=Math.round(e.y),e.right=Math.round(e.right),e.bottom=Math.round(e.bottom),e.left=e.x=Math.round(e.x),e},equals:function(e){return this.top===e.top&&this.right===e.right&&this.bottom===e.bottom&&this.left===e.left}},3,0,0,0,0,0,[Ext.util,"Region"],0),Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(e){var t=e.changedTouches,n=t&&t.length>0?t[0]:e;return this.fromTouch(n)},fromTouch:function(e){return new this(e.pageX,e.pageY)},from:function(e){return e?e instanceof this?e:new this(e.x,e.y):new this(0,0)}},constructor:function(e,t){null==e&&(e=0),null==t&&(t=0),Ext.util.Region.prototype.constructor.call(this,t,e,t,e)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(e){return this.x=e.x,this.y=e.y,this},toString:function(){return"Point["+this.x+","+this.y+"]"},isCloseTo:function(e,t){if("number"==typeof t)return this.getDistanceTo(e)<=t;var n=e.x,i=e.y,r=t.x,o=t.y;return this.x<=n+r&&this.x>=n-r&&this.y<=i+o&&this.y>=i-o},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(e){return e instanceof Ext.util.Region||(e=Ext.get(e.el||e).getRegion()),e.contains(this)},roundedEquals:function(e){return e&&"object"==typeof e||(e=this.origin),Math.round(this.x)===Math.round(e.x)&&Math.round(this.y)===Math.round(e.y)},getDistanceTo:function(e){e&&"object"==typeof e||(e=this.origin);var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},getAngleTo:function(e){e&&"object"==typeof e||(e=this.origin);var t=this.x-e.x,n=this.y-e.y;return Math.atan2(n,t)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=this.prototype.translateBy}),Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObjectImpl",isStopped:!1,defaultPrevented:!1,isEvent:!0,statics:{resolveTextNode:function(e){return e&&3===e.nodeType?e.parentNode:e},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(e){var t,n,i=this,r=i.self,o=i.self.resolveTextNode,a=e.changedTouches,s=a?a[0]:e,l=e.type;i.pageX=s.pageX,i.pageY=s.pageY,i.target=i.delegatedTarget=o(e.target),n=e.relatedTarget,n&&(i.relatedTarget=o(n)),i.browserEvent=i.event=e,i.type=l,i.button=e.button||0,i.shiftKey=e.shiftKey,i.ctrlKey=e.ctrlKey||e.metaKey||!1,i.altKey=e.altKey,i.charCode=e.charCode,i.keyCode=e.keyCode,i.buttons=e.buttons,0===i.button&&0===i.buttons&&(i.buttons=1),void 0!==r.forwardTab&&r.focusEvents[l]&&(i.forwardTab=r.forwardTab),r.mouseEvents[l]||r.clickEvents[l]?t="mouse":r.pointerEvents[l]?t=r.pointerTypes[e.pointerType]:r.touchEvents[l]&&(t="touch"),t&&(i.pointerType=t),i.timeStamp=i.time=+(e.timeStamp||new Date)},chain:function(e){var t=Ext.Object.chain(this);return t.parentEvent=this,Ext.apply(t,e)},correctWheelDelta:function(e){var t=this.WHEEL_SCALE,n=Math.round(e/t);return!n&&e&&(n=0>e?-1:1),n},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getPoint:function(){var e=this.getXY();return new Ext.util.Point(e[0],e[1])},getRelatedTarget:function(e,t,n){var i=this.relatedTarget,r=null;return i&&(r=e?Ext.fly(i).findParent(e,t,n):n?Ext.get(i):i),r},getTarget:function(e,t,n){return e?Ext.fly(this.target).findParent(e,t,n):n?Ext.get(this.target):this.target},getTime:function(){return this.time},getWheelDelta:function(){var e=this.getWheelDeltas();return e.y},getWheelDeltas:function(){var e=this,t=e.browserEvent,n=0,i=0;return Ext.isDefined(t.wheelDeltaX)?(n=t.wheelDeltaX,i=t.wheelDeltaY):t.wheelDelta?i=t.wheelDelta:t.detail&&(i=-t.detail,i>100?i=3:-100>i&&(i=-3),Ext.isDefined(t.axis)&&t.axis===t.HORIZONTAL_AXIS&&(n=i,i=0)),{x:e.correctWheelDelta(n),y:e.correctWheelDelta(i)}},getX:function(){return this.getXY()[0]},getXY:function(){var e=this,t=e.xy;if(!t){t=e.xy=[e.pageX,e.pageY];var n,i,r,o,a=t[0];a||0===a||(n=e.browserEvent,i=document,r=i.documentElement,o=i.body,t[0]=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),t[1]=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0))}return t},getY:function(){return this.getXY()[1]},hasModifier:function(){var e=this;return!!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)},isNavKeyPress:function(e){var t=this,n=t.keyCode;return n>=33&&40>=n||!e&&(n===t.RETURN||n===t.TAB||n===t.ESC)},isSpecialKey:function(){var e=this.keyCode;return"keypress"===this.type&&this.ctrlKey||this.isNavKeyPress()||e===this.BACKSPACE||e>=16&&20>=e||e>=44&&46>=e},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var e=this,t=e.parentEvent;return e.defaultPrevented=!0,t&&(t.defaultPrevented=!0),e.browserEvent.preventDefault(),e},setCurrentTarget:function(e){this.currentTarget=this.delegatedTarget=e},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var e=this,t=e.browserEvent,n=e.parentEvent;return e.isStopped=!0,n&&(n.isStopped=!0),t.stopPropagation?(t.stopPropagation(),e):(t.cancelBubble=!0,e)},within:function(e,t,n){var i;return e&&(i=t?this.getRelatedTarget():this.getTarget()),i?Ext.fly(e).contains(i)||!(!n||i!==Ext.getDom(e)):!1},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},1,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObjectImpl"],function(e){var t=e.prototype,n={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:function(){var e;return Ext.isGecko?e=3:Ext.isMac?(e=Ext.isSafari&&Ext.webKitVersion>=532?120:12,e*=3):e=120,e}()};Ext.apply(e,n),Ext.apply(t,n),t.getTrueXY=t.getXY}),Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:function(){function e(e,t){var i="mousemove"!==e;return function(r,o){var a=o.getXY(),s=n.createMouseEvent(r.ownerDocument,e,!0,i,t,a[0],a[1],o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget);n.fireEvent(r,e,s)}}function t(){}var n,i,r={};return!Ext.isIE9m&&document.createEvent?n={createHtmlEvent:function(e,t,n,i){var r=e.createEvent("HTMLEvents");return r.initEvent(t,n,i),r},createMouseEvent:function(e,t,n,i,r,o,a,s,l,d,u,c,h){var p=e.createEvent("MouseEvents"),f=e.defaultView||window;return p.initMouseEvent?p.initMouseEvent(t,n,i,f,r,o,a,o,a,s,l,d,u,c,h):(p=e.createEvent("UIEvents"),p.initEvent(t,n,i),p.view=f,p.detail=r,p.screenX=o,p.screenY=a,p.clientX=o,p.clientY=a,p.ctrlKey=s,p.altKey=l,p.metaKey=u,p.shiftKey=d,p.button=c,p.relatedTarget=h),p},createUIEvent:function(e,t,n,i,r){var o=e.createEvent("UIEvents"),a=e.defaultView||window;return o.initUIEvent(t,n,i,a,r),o},fireEvent:function(e,t,n){e.dispatchEvent(n)}}:document.createEventObject&&(i={0:1,1:4,2:2},n={createHtmlEvent:function(e,t,n,i){var r=e.createEventObject();return r.bubbles=n,r.cancelable=i,r},createMouseEvent:function(e,t,n,r,o,a,s,l,d,u,c,h,p){var f=e.createEventObject();return f.bubbles=n,f.cancelable=r,f.detail=o,f.screenX=a,f.screenY=s,f.clientX=a,f.clientY=s,f.ctrlKey=l,f.altKey=d,f.shiftKey=u,f.metaKey=c,f.button=i[h]||h,f.relatedTarget=p,f},createUIEvent:function(e,t,n,i){var r=e.createEventObject();return r.bubbles=n,r.cancelable=i,r},fireEvent:function(e,t,n){e.fireEvent("on"+t,n)}}),Ext.Object.each({load:[!1,!1],unload:[!1,!1],select:[!0,!1],change:[!0,!1],submit:[!0,!0],reset:[!0,!1],resize:[!0,!1],scroll:[!0,!1]},function(e,t){var i=t[0],o=t[1];r[e]=function(t){var r=n.createHtmlEvent(e,i,o);n.fireEvent(t,e,r)}}),Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(t){r[t]=e(t,1)}),Ext.Object.each({focusin:[!0,!1],focusout:[!0,!1],activate:[!0,!0],focus:[!1,!1],blur:[!1,!1]},function(e,t){var i=t[0],o=t[1];r[e]=function(t){var r=n.createUIEvent(t.ownerDocument,e,i,o,1);n.fireEvent(t,e,r)}}),n||(r={},n={}),function(e){var n=this,i=r[n.type]||t,o=e?e.dom||e:n.getTarget();i(o,n)}}(),preventDefault:function(){var e,t,n=this,i=n.browserEvent,r=n.parentEvent;return"unknown"!=typeof i.type&&(n.defaultPrevented=!0,r&&(r.defaultPrevented=!0),i.preventDefault?i.preventDefault():("mousedown"===i.type&&(t=i.target,e=t.getAttribute("unselectable"),"on"!==e&&(t.setAttribute("unselectable","on"),Ext.defer(function(){t.setAttribute("unselectable",e)},1))),i.returnValue=!1,(i.ctrlKey||i.keyCode>111&&i.keyCode<124)&&(i.keyCode=-1))),n},stopPropagation:function(){var e=this,t=e.browserEvent;return"unknown"!=typeof t.type&&(e.mousedownEvents[e.type]&&Ext.GlobalEvents.fireMouseDown(e),arguments.callee.$previous.call(this)),e},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var e,t=this,n=function(e){9===e.keyCode&&(t.forwardTab=!e.shiftKey)},i=function(e){9===e.keyCode&&delete t.forwardTab};Ext.isIE9m?(e={0:0,1:0,4:1,2:2},t.override({statics:{enableIEAsync:function(e){var t,n={};for(t in e)n[t]=e[t];return n}},constructor:function(t,n,i,r){var o=this;o.callParent([t,n,i,r]),o.button=e[t.button],"contextmenu"===t.type&&(o.button=2),o.toElement=t.toElement,o.fromElement=t.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(e){this.browserEvent=this.self.enableIEAsync(e)},getRelatedTarget:function(e,t,n){var i,r,o=this;return o.relatedTarget||(i=o.type,o.mouseLeaveRe.test(i)?r=o.toElement:o.mouseEnterRe.test(i)&&(r=o.fromElement),r&&(o.relatedTarget=o.self.resolveTextNode(r))),o.callParent([e,t,n])}}),document.attachEvent("onkeydown",n),document.attachEvent("onkeyup",i),window.attachEvent("onunload",function(){document.detachEvent("onkeydown",n),document.detachEvent("onkeyup",i)})):document.addEventListener&&(document.addEventListener("keydown",n,!0),document.addEventListener("keyup",i,!0))}),Ext.define("Ext.rtl.event.Event",{override:"Ext.event.Event",getXY:function(){var e=this,t=e.xy;return t||(t=arguments.callee.$previous.call(this),Ext.rootInheritedState.rtl&&(t[0]=Ext.Element.getViewportWidth()-t[0])),t}}),Ext.define("BP.overrides.event.Event",{override:"Ext.event.Event",preventDefault:function(){var e,t,n=this,i=n.browserEvent,r=n.parentEvent;return"unknown"!=typeof i.type&&(n.defaultPrevented=!0,r&&(r.defaultPrevented=!0),i.preventDefault?"mousewheel"!==i.type&&i.preventDefault():("mousedown"===i.type&&(t=i.target,e=t.getAttribute("unselectable"),"on"!==e&&(t.setAttribute("unselectable","on"),Ext.defer(function(){t.setAttribute("unselectable",e)},1))),"mousewheel"!==i.type&&(i.returnValue=!1),(i.ctrlKey||i.keyCode>111&&i.keyCode<124)&&(i.keyCode=-1))),n}}),Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{resize:1,focus:1,blur:1,paste:1,input:1,change:1,animationstart:1,animationend:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var e=this;e.bubbleSubscribers={},e.captureSubscribers={},e.directSubscribers={},e.directCaptureSubscribers={},e.delegatedListeners={},e.initHandlers(),Ext.onInternalReady(e.onReady,e),Ext.event.publisher.Publisher.prototype.constructor.call(this)},registerEvents:function(){for(var e,t=this,n=Ext.event.publisher.Publisher.publishersByEvent,i=t.handledDomEvents,r=i.length,o=0;r>o;o++)e=i[o],t.handles[e]=1,n[e]=t;Ext.event.publisher.Publisher.prototype.registerEvents.call(this)},onReady:function(){var e,t,n=this,i=n.handledDomEvents;if(i)for(t=0,e=i.length;e>t;t++)n.addDelegatedListener(i[t]);Ext.getWin().on("unload",n.destroy,n)},initHandlers:function(){var e=this;e.onDelegatedEvent=Ext.bind(e.onDelegatedEvent,e),e.onDirectEvent=Ext.bind(e.onDirectEvent,e),e.onDirectCaptureEvent=Ext.bind(e.onDirectCaptureEvent,e)},addDelegatedListener:function(e){this.delegatedListeners[e]=1,this.target.addEventListener(e,this.onDelegatedEvent,!!this.captureEvents[e])},removeDelegatedListener:function(e){delete this.delegatedListeners[e],this.target.removeEventListener(e,this.onDelegatedEvent,!!this.captureEvents[e])},addDirectListener:function(e,t,n){t.dom.addEventListener(e,n?this.onDirectCaptureEvent:this.onDirectEvent,n)},removeDirectListener:function(e,t,n){t.dom.removeEventListener(e,n?this.onDirectCaptureEvent:this.onDirectEvent,n)},subscribe:function(e,t,n,i){var r,o,a=this;n&&!a.directEvents[t]?(r=i?a.captureSubscribers:a.bubbleSubscribers,a.handles[t]||a.delegatedListeners[t]||a.addDelegatedListener(t),r[t]?++r[t]:r[t]=1):(r=i?a.directCaptureSubscribers:a.directSubscribers,o=e.id,r=r[t]||(r[t]={}),r[o]?++r[o]:(r[o]=1,a.addDirectListener(t,e,i)))},unsubscribe:function(e,t,n,i){var r,o,a,s,l=this;n&&!l.directEvents[t]?(r=l.captureSubscribers,o=l.bubbleSubscribers,a=i?r:o,a[t]&&--a[t],l.handles[t]||o[t]||r[t]||this.removeDelegatedListener(t)):(a=i?l.directCaptureSubscribers:l.directSubscribers,s=e.id,a=a[t],a[s]&&--a[s],a[s]||(delete a[s],l.removeDirectListener(t,e,i)))},getPropagatingTargets:function(e){for(var t,n=e,i=[];n;)i.push(n),t=n.parentNode,t||(t=n.defaultView),n=t;return i},publish:function(e,t,n){var i,r,o,a,s=this;if(Ext.isArray(t)?i=t:s.captureEvents[e]?(r=Ext.cache[t.id],i=r?[r]:[]):i=s.getPropagatingTargets(t),a=i.length,s.captureSubscribers[e])for(o=a;o--&&(r=Ext.cache[i[o].id],!r||(s.fire(r,e,n,!1,!0),!n.isStopped)););if(!n.isStopped&&s.bubbleSubscribers[e])for(o=0;a>o&&(r=Ext.cache[i[o].id],!r||(s.fire(r,e,n,!1,!1),!n.isStopped));o++);},fire:function(e,t,n,i,r){var o;e.hasListeners[t]&&(o=e.events[t],o&&(r&&i?o=o.directCaptures:r?o=o.captures:i&&(o=o.directs),o&&(n.setCurrentTarget(e.dom),o.fire(n,n.target))))},onDelegatedEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDelegatedEvent,this,[e]):this.doDelegatedEvent(e)},doDelegatedEvent:function(e,t){var n=this,i=e.timeStamp;return e=new Ext.event.Event(e),n.isEventBlocked(e)?!1:(n.beforeEvent(e),Ext.frameStartTime=i,n.reEnterCount++,n.publish(e.type,e.target,e),n.reEnterCount--,t!==!1&&n.afterEvent(e),e)},onDirectEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[e,!1]):this.doDirectEvent(e,!1)},onDirectCaptureEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[e,!0]):this.doDirectEvent(e,!0)},doDirectEvent:function(e,t){var n=this,i=e.currentTarget,r=e.timeStamp;e=new Ext.event.Event(e),n.isEventBlocked(e)||(n.beforeEvent(e),Ext.frameStartTime=r,n.reEnterCount++,n.fire(Ext.cache[i.id],e.type,e,!0,t),n.reEnterCount--,n.afterEvent(e))},beforeEvent:function(e){var t,n,i=e.browserEvent,r=Ext.event.publisher.Dom;"touchstart"===i.type&&(t=i.touches,1===t.length&&(n=t[0],r.lastTouchStartX=n.pageX,r.lastTouchStartY=n.pageY))},afterEvent:function(e){var t=e.browserEvent,n=t.type,i=Ext.event.publisher.Dom,r=Ext.GlobalEvents;e.self.pointerEvents[n]&&"mouse"!==e.pointerType&&(i.lastScreenPointerEventTime=Ext.now()),"touchend"===n&&(i.lastTouchEndTime=Ext.now()),this.reEnterCount||!r.hasListeners.idle||r.idleEventMask[n]||r.fireEvent("idle")},isEventBlocked:function(e){var t=this,n=e.type,i=Ext.event.publisher.Dom,r=Ext.now();return t.blockedPointerEvents[n]&&"mouse"!==e.pointerType||t.blockedCompatibilityMouseEvents[n]&&r-i.lastScreenPointerEventTime<1e3||Ext.supports.TouchEvents&&e.self.mouseEvents[e.type]&&Math.abs(e.pageX-i.lastTouchStartX)<15&&Math.abs(e.pageY-i.lastTouchStartY)<15&&Ext.now()-i.lastTouchEndTime<1e3},destroy:function(){var e;for(e in this.delegatedListeners)this.removeDelegatedListener(e)},reset:function(){var e=Ext.event.publisher.Dom;e.lastScreenPointerEventTime=e.lastTouchEndTime=e.lastTouchStartX=e.lastTouchStartY=void 0}},1,0,0,0,0,0,[Ext.event.publisher,"Dom"],function(e){var t=document,n=t.defaultView,i=e.prototype;Ext.os.is.iOS&&Ext.os.version.getMajor()<5||Ext.browser.is.AndroidStock||!n||!n.addEventListener?i.target=t:i.target=n,e.instance=new e}),Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(e){if(Ext.isIE9m){var t,n,i=document.body,r=e.prototype;r.target=document,r.directBoundListeners={},t=function(e,t,n){e.target=e.srcElement||window,e.currentTarget=this,n?t.onDirectCaptureEvent(e):t.onDirectEvent(e)},n=function(e,t){e.target=e.srcElement||window,e.currentTarget=this,t.onDirectCaptureEvent(e)},e.override({addDelegatedListener:function(e){this.delegatedListeners[e]=1,this.target.attachEvent("on"+e,this.onDelegatedEvent)},removeDelegatedListener:function(e){delete this.delegatedListeners[e],this.target.detachEvent("on"+e,this.onDelegatedEvent)},addDirectListener:function(e,n,i){var r=this,o=n.dom,a=Ext.Function.bind(t,o,[r,i],!0),s=r.directBoundListeners,l=s[e]||(s[e]={});l[o.id]=a,o.attachEvent?o.attachEvent("on"+e,a):r.callParent(arguments)},removeDirectListener:function(e,t){var n=t.dom;n.detachEvent?n.detachEvent("on"+e,this.directBoundListeners[e][n.id]):this.callParent(arguments)},doDelegatedEvent:function(e,t){return e.target=e.srcElement||window,"focusin"===e.type?e.relatedTarget=e.fromElement===i?null:e.fromElement:"focusout"===e.type&&(e.relatedTarget=e.toElement===i?null:e.toElement),this.callParent([e,t])}}),Ext.apply(r.directEvents,r.captureEvents),r.captureEvents={}}}),Ext.cmd.derive("Ext.event.publisher.Gesture",Ext.event.publisher.Dom,{type:"gesture",config:{async:!0},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(e){var t=this,n=t.handledDomEvents,i=Ext.supports,r=i.TouchEvents,o=Ext.Function,a=t.onTouchStart,s=t.onTouchMove,l=t.onTouchEnd,d=o.createAnimationFrame(t.onTouchStart,t,null,1),u=o.createAnimationFrame(t.onTouchMove,t),c=o.createAnimationFrame(t.onTouchEnd,t,null,1);return t._handlers={touchstart:a,touchmove:s,touchend:l,touchcancel:l,pointerdown:a,pointermove:s,pointerup:l,pointercancel:l,MSPointerDown:a,MSPointerMove:s,MSPointerUp:l,MSPointerCancel:l,mousedown:a,mousemove:s,mouseup:l},t._asyncHandlers={touchstart:d,touchmove:u,touchend:c,touchcancel:c,pointerdown:d,pointermove:u,pointerup:c,pointercancel:c,MSPointerDown:d,MSPointerMove:u,MSPointerUp:c,MSPointerCancel:c,mousedown:d,mousemove:u,mouseup:c},t.activeTouchesMap={},t.activeTouches=[],t.changedTouches=[],t.recognizers=[],r&&(t.onTargetTouchMove=t.onTargetTouchMove.bind(t),t.onTargetTouchEnd=t.onTargetTouchEnd.bind(t)),i.PointerEvents?(n.push("pointerdown","pointermove","pointerup","pointercancel"),t.mousePointerType="mouse"):i.MSPointerEvents?(n.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"),t.mousePointerType=4):r&&n.push("touchstart","touchmove","touchend","touchcancel"),(!n.length||r&&Ext.isWebKit&&Ext.os.is.Desktop)&&n.push("mousedown","mousemove","mouseup"),t.initConfig(e),Ext.event.publisher.Dom.prototype.constructor.call(this)},onReady:function(){Ext.event.publisher.Dom.prototype.onReady.call(this),Ext.Array.sort(this.recognizers,function(e,t){var n=e.priority,i=t.priority;return n>i?1:i>n?-1:0})},registerRecognizer:function(e){var t,n=this,i=e.handledEvents,r=i.length;for(e.setOnRecognized(n.onRecognized),e.setCallbackScope(n),t=0;r>t;t++)n.handledEvents.push(i[t]);n.registerEvents(i),n.recognizers.push(e)},onRecognized:function(e,t,n){var i,r,o,a,s=this,l=t.changedTouches,d=l.length;if(n=n||{},n.type=e,n.target=l[0].target,n.isStopped=!1,t=t.chain(n),d>1){for(i=[],o=0;d>o;o++)a=l[o],i.push(a.targets);r=s.getCommonTargets(i)}else r=l[0].targets;s.publish(e,r,t)},getCommonTargets:function(e){var t=e[0],n=e.length;if(1===n)return t;for(var i,r,o,a=[],s=1;;){if(i=t[t.length-s],!i)return a;for(o=1;n>o;o++)if(r=e[o],r[r.length-s]!==i)return a;a.unshift(i),s++}return a},invokeRecognizers:function(e,t){var n,i,r=this.recognizers,o=r.length;if("onStart"===e)for(n=0;o>n;n++)r[n].isActive=!0;for(n=0;o>n;n++)i=r[n],i.isActive&&i[e].call(i,t)===!1&&(i.isActive=!1)},updateTouches:function(e,t){var n,i,r,o,a,s,l,d,u=this,c=e.browserEvent,h=c.changedTouches||[c],p=u.activeTouches,f=u.activeTouchesMap,g=[];for(a=0,s=h.length;s>a;a++)n=h[a],i="identifier"in n?n.identifier:"pointerId"in n?n.pointerId:1,r=f[i],r||(o=Ext.event.Event.resolveTextNode(n.target),r=f[i]={identifier:i,target:o,targets:u.getPropagatingTargets(o)},p.push(r)),t&&(delete f[i],Ext.Array.remove(p,r)),l=n.pageX,d=n.pageY,r.pageX=l,r.pageY=d,r.point=new Ext.util.Point(l,d),g.push(r);e.touches=Ext.Array.clone(p),e.changedTouches=g},doDelegatedEvent:function(e){var t=this;e=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,e,!1),e&&((!e.button||e.button<1)&&t.handlers[e.type].call(t,e),t.afterEvent(e))},onTouchStart:function(e){var t=this,n=e.target;"touchstart"===e.browserEvent.type&&(n.addEventListener("touchmove",t.onTargetTouchMove),n.addEventListener("touchend",t.onTargetTouchEnd),n.addEventListener("touchcancel",t.onTargetTouchEnd)),t.updateTouches(e),t.isStarted||(t.isStarted=!0,t.invokeRecognizers("onStart",e),Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.pause()),t.invokeRecognizers("onTouchStart",e)},onTouchMove:function(e){var t=this,n=t.mousePointerType;if(t.isStarted){if(n&&e.browserEvent.pointerType===n&&0===e.buttons)return e.type=Ext.dom.Element.prototype.eventMap.touchend,e.button=0,void t.onTouchEnd(e);t.updateTouches(e),e.changedTouches.length>0&&t.invokeRecognizers("onTouchMove",e)}},onTouchEnd:function(e){var t=this;t.isStarted&&(t.updateTouches(e,!0),t.invokeRecognizers(t.isCancelEvent[e.type]?"onTouchCancel":"onTouchEnd",e),t.activeTouches.length||(t.isStarted=!1,t.invokeRecognizers("onEnd",e),Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.resume()))},onTargetTouchMove:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchMove,this,[e]):this.doTargetTouchMove(e);
},doTargetTouchMove:function(e){Ext.getBody().contains(e.target)||this.onTouchMove(new Ext.event.Event(e))},onTargetTouchEnd:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchEnd,this,[e]):this.doTargetTouchEnd(e)},doTargetTouchEnd:function(e){var t=this,n=e.target;n.removeEventListener("touchmove",t.onTargetTouchMove),n.removeEventListener("touchend",t.onTargetTouchEnd),n.removeEventListener("touchcancel",t.onTargetTouchEnd),Ext.getBody().contains(n)||t.onTouchEnd(new Ext.event.Event(e))},updateAsync:function(e){this.handlers=e?this._asyncHandlers:this._handlers},reset:function(){var e,t,n=this,i=n.recognizers,r=i.length;for(n.activeTouchesMap={},n.activeTouches=[],n.changedTouches=[],n.isStarted=!1,e=0;r>e;e++)t=i[e],t.reset(),t.isActive=!1;Ext.event.publisher.Dom.prototype.reset.call(this)}},1,0,0,0,0,0,[Ext.event.publisher,"Gesture"],function(e){e.instance=new e}),Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){Ext.isIE9m&&this.override({updateTouches:function(e,t){var n=e.browserEvent,i=e.getXY();n.pageX=i[0],n.pageY=i[1],this.callParent([e,t])},doDelegatedEvent:function(e){this.callParent([Ext.event.Event.enableIEAsync(e)])}})}),Ext.cmd.derive("Ext.event.publisher.Focus",Ext.event.publisher.Dom,{type:"focus",handledEvents:["focusenter","focusleave"],handledDomEvents:["focusin","focusout"],doDelegatedEvent:function(e,t){var n,i=this;e=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,e,!1),e&&("focusout"===e.type?null==e.relatedTarget&&i.processFocusIn(e,e.target,document.body,t):(n=e.relatedTarget,i.processFocusIn(e,null!=n&&n.tagName?n:document.body,e.target,t)))},processFocusIn:function(e,t,n,i){var r,o,a=this,s=Ext.Element.getCommonAncestor(n,t,!0),l=[];for(r=t;r&&r!==s;r=r.parentNode)l.push(r);if(!l.length||(o=a.createSyntheticEvent("focusleave",e,t,n),a.publish("focusleave",l,o),l.length=0,!o.isStopped)){for(r=n;r!==s;r=r.parentNode)l.push(r);o=a.createSyntheticEvent("focusenter",e,n,t),a.publish("focusenter",l,o),o.isStopped||(i&&a.afterEvent(e),Ext.GlobalEvents.fireEvent("focus",{event:o,toElement:n,fromElement:t}))}},createSyntheticEvent:function(e,t,n,i){var r=new Ext.event.Event(t);return r.type=e,r.relatedTarget=i,r.target=n,r}},0,0,0,0,0,0,[Ext.event.publisher,"Focus"],function(e){var t;Ext.supports.FocusinFocusoutEvents||this.override({handledDomEvents:["focus","blur"],doDelegatedEvent:function(n,i){var r=this;if(n=r.callSuper([n,!1]))if(clearTimeout(t),t=0,"blur"===n.type){var o=n.target===window?document.body:n.target;t=setTimeout(function(){t=0,r.processFocusIn(n,o,document.body,i),e.previousActiveElement=null},0),n.target===window||n.target===document?e.previousActiveElement=null:e.previousActiveElement=n.target}else r.processFocusIn(n,e.previousActiveElement||document.body,n.target===window?document.body:n.target,i)}}),e.instance=new e}),Ext.cmd.derive("Ext.mixin.Templatable",Ext.Mixin,{mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var e=document.createDocumentFragment();return e.appendChild(Ext.Element.create(this.getElementConfig(),!0)),e},initElement:function(){var e=this.self.prototype;e.elementTemplate=this.getElementTemplate(),e.initElement=e.doInitElement,this.initElement.apply(this,arguments)},linkElement:function(e,t){this.link(e,t)},doInitElement:function(){var e,t,n,i,r,o,a=this.referenceAttributeName;for(e=this.elementTemplate.cloneNode(!0),t=e.querySelectorAll(this.referenceSelector),n=0,i=t.length;i>n;n++)r=t[n],o=r.getAttribute(a),r.removeAttribute(a),this.linkElement(o,r)}},0,0,0,0,0,0,[Ext.mixin,"Templatable"],0),Ext.cmd.derive("Ext.TaskQueue",Ext.Base,{singleton:!0,pending:!1,mode:!0,constructor:function(){this.readQueue=[],this.writeQueue=[],this.run=Ext.Function.bind(this.run,this),Ext.os.is.iOS&&Ext.interval(this.watch,500,this)},requestRead:function(){this.request(!0),this.readQueue.push(arguments)},requestWrite:function(){this.request(!1),this.writeQueue.push(arguments)},request:function(e){this.pending||(this.pendingTime=Date.now(),this.pending=!0,this.mode=e,e?Ext.defer(this.run,1,this):Ext.Function.requestAnimationFrame(this.run))},watch:function(){this.pending&&Date.now()-this.pendingTime>=500&&this.run()},run:function(){this.pending=!1;var e,t=this.readQueue,n=this.writeQueue,i=null;this.mode?(e=t,n.length>0&&(i=!1)):(e=n,t.length>0&&(i=!0));var r,o,a,s,l,d=e.slice();for(e.length=0,r=0,o=d.length;o>r;r++)a=d[r],s=a[0],l=a[1],"string"==typeof s&&(s=l[s]),a.length>2?s.apply(l,a[2]):s.call(l);d.length=0,null!==i&&this.request(i)}},1,0,0,0,0,0,[Ext,"TaskQueue"],0),Ext.cmd.derive("Ext.util.sizemonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(e){this.refresh=Ext.Function.bind(this.refresh,this),this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0},this.initElement(),this.initConfig(e),this.bindListeners(!0)},bindListeners:Ext.emptyFn,applyElement:function(e){return e?Ext.get(e):void 0},updateElement:function(e){e.append(this.detectorsContainer),e.addCls("x-size-monitored")},applyArgs:function(e){return e.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var e=this.getElement();if(!e||e.isDestroyed)return!1;var t,n=e.getWidth(),i=e.getHeight(),r=this.getContentWidth(),o=this.getContentHeight(),a=this.contentWidth,s=this.contentHeight,l=this.info,d=!1;return this.width=n,this.height=i,this.contentWidth=r,this.contentHeight=o,t=(a!==r?1:0)+(s!==o?2:0),t>0&&(l.width=n,l.height=i,l.contentWidth=r,l.contentHeight=o,l.flag=t,d=!0,this.getCallback().apply(this.getScope(),this.getArgs())),d},refresh:function(e){(this.refreshSize()||e)&&Ext.TaskQueue.requestWrite("refreshMonitors",this)},destroy:function(){var e=this.getElement();this.bindListeners(!1),e&&!e.isDestroyed&&e.removeCls("x-size-monitored"),delete this._element,this.callParent()}},1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,"Abstract"],0),Ext.cmd.derive("Ext.util.sizemonitor.Default",Ext.util.sizemonitor.Abstract,{updateElement:function(){},bindListeners:function(e){var t=this.getElement().dom;t&&(e?t.onresize=this.refresh:delete t.onresize)},getContentBounds:function(){return this.getElement().dom.getBoundingClientRect()},getContentWidth:function(){return this.getElement().getWidth()},getContentHeight:function(){return this.getElement().getHeight()}},0,0,0,0,0,0,[Ext.util.sizemonitor,"Default"],0),Ext.cmd.derive("Ext.util.sizemonitor.Scroll",Ext.util.sizemonitor.Abstract,{getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(){this.onScroll=Ext.Function.bind(this.onScroll,this),Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},bindListeners:function(e){var t=e?"addEventListener":"removeEventListener";this.expandMonitor[t]("scroll",this.onScroll,!0),this.shrinkMonitor[t]("scroll",this.onScroll,!0)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[!0])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var e=this.expandMonitor,t=this.shrinkMonitor,n=1e6;e&&!e.isDestroyed&&(e.scrollLeft=n,e.scrollTop=n),t&&!t.isDestroyed&&(t.scrollLeft=n,t.scrollTop=n)}},1,0,0,0,0,0,[Ext.util.sizemonitor,"Scroll"],0),Ext.cmd.derive("Ext.util.sizemonitor.OverflowChange",Ext.util.sizemonitor.Abstract,{constructor:function(){this.onExpand=Ext.Function.bind(this.onExpand,this),this.onShrink=Ext.Function.bind(this.onShrink,this),Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(e){var t=e?"addEventListener":"removeEventListener";this.expandMonitor[t](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,!0),this.shrinkMonitor[t](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,!0)},onExpand:function(e){Ext.browser.is.Webkit&&e.horizontalOverflow&&e.verticalOverflow||Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(e){(!Ext.browser.is.Webkit||e.horizontalOverflow||e.verticalOverflow)&&Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(!this.isDestroyed){var e,t=this.expandHelper,n=this.shrinkHelper,i=this.getContentBounds(),r=i.width,o=i.height;t&&!t.isDestroyed&&(e=t.style,e.width=r+1+"px",e.height=o+1+"px"),n&&!n.isDestroyed&&(e=n.style,e.width=r+"px",e.height=o+"px"),Ext.TaskQueue.requestRead("refresh",this)}}},1,0,0,0,0,0,[Ext.util.sizemonitor,"OverflowChange"],0),Ext.cmd.derive("Ext.util.SizeMonitor",Ext.Base,{constructor:function(e){var t=Ext.util.sizemonitor;return Ext.browser.is.Firefox?new t.OverflowChange(e):Ext.browser.is.WebKit?!Ext.browser.is.Silk&&Ext.browser.engineVersion.gtEq("535")?new t.OverflowChange(e):new t.Scroll(e):Ext.browser.is.IE11?new t.Scroll(e):new t.Default(e)}},1,0,0,0,0,0,[Ext.util,"SizeMonitor"],0),Ext.cmd.derive("Ext.event.publisher.ElementSize",Ext.event.publisher.Publisher,{type:"size",handledEvents:["resize"],constructor:function(){this.monitors={},this.subscribers={},Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(e){var t=e.id,n=this.subscribers,i=this.monitors;return n[t]?++n[t]:(n[t]=1,i[t]=new Ext.util.SizeMonitor({element:e,callback:this.onElementResize,scope:this,args:[e]})),e.on("painted","forceRefresh",i[t]),!0},unsubscribe:function(e){var t,n=e.id,i=this.subscribers,r=this.monitors;i[n]&&!--i[n]&&(delete i[n],t=r[n],e.un("painted","forceRefresh",t),t.destroy(),delete r[n])},onElementResize:function(e,t){Ext.TaskQueue.requestRead("fire",this,[e,"resize",[e,t]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementSize"],function(e){e.instance=new e}),Ext.cmd.derive("Ext.util.paintmonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(e){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this),this.initConfig(e)},bindListeners:function(e){this.monitorElement[e?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,!0)},applyElement:function(e){return e?Ext.get(e):void 0},updateElement:function(e){this.monitorElement=Ext.Element.create({classList:["x-paint-monitor",this.monitorClass]},!0),e.appendChild(this.monitorElement),e.addCls("x-paint-monitored"),this.bindListeners(!0)},onElementPainted:function(){},destroy:function(){var e=this.monitorElement,t=e.parentNode,n=this.getElement();this.bindListeners(!1),delete this.monitorElement,n&&!n.isDestroyed&&(n.removeCls("x-paint-monitored"),delete this._element),t&&t.removeChild(e),this.callParent()}},1,0,0,0,0,0,[Ext.util.paintmonitor,"Abstract"],0),Ext.cmd.derive("Ext.util.paintmonitor.CssAnimation",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(e){"x-paint-monitor-helper"===e.animationName&&this.getCallback().apply(this.getScope(),this.getArgs())}},0,0,0,0,0,0,[Ext.util.paintmonitor,"CssAnimation"],0),Ext.cmd.derive("Ext.util.paintmonitor.OverflowChange",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.Firefox?"overflow":"overflowchanged",monitorClass:"overflowchange",onElementPainted:function(){this.getCallback().apply(this.getScope(),this.getArgs())}},0,0,0,0,0,0,[Ext.util.paintmonitor,"OverflowChange"],0),Ext.cmd.derive("Ext.util.PaintMonitor",Ext.Base,{constructor:function(e){return Ext.browser.is.Firefox||Ext.browser.is.WebKit&&Ext.browser.engineVersion.gtEq("536")&&!Ext.os.is.Blackberry?new Ext.util.paintmonitor.OverflowChange(e):new Ext.util.paintmonitor.CssAnimation(e)}},1,0,0,0,0,0,[Ext.util,"PaintMonitor"],0),Ext.cmd.derive("Ext.event.publisher.ElementPaint",Ext.event.publisher.Publisher,{type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={},this.subscribers={},Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(e){var t=e.id,n=this.subscribers;n[t]?++n[t]:(n[t]=1,this.monitors[t]=new Ext.util.PaintMonitor({element:e,callback:this.onElementPainted,scope:this,args:[e]}))},unsubscribe:function(e){var t=e.id,n=this.subscribers,i=this.monitors;n[t]&&!--n[t]&&(delete n[t],i[t].destroy(),delete i[t])},onElementPainted:function(e){Ext.TaskQueue.requestRead("fire",this,[e,"painted",[e]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementPaint"],function(e){e.instance=new e}),Ext.cmd.derive("Ext.dom.Element",Ext.Base,function(e){var t,n,i,r=window,o=document,a="ext-window",s="ext-document",l="width",d="height",u="min-width",c="min-height",h="max-width",p="max-height",f="top",g="right",m="bottom",x="left",v="visibility",y="hidden",E="display",b="none",C="z-index",w="position",S="relative",T="static",P="-",I=/\w/g,k=/\s+/,B=/[\s]+/,M=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,D=/table-row|table-.*-group/,R=/top/i,A={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},F={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},L={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},O=[F.l,F.r,F.t,F.b],V=[A.l,A.r,A.t,A.b],N=/\d+$/,H=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,z="px",W=/(-[a-z])/gi,_=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,U=/^\d+(?:\.\d*)?px$/i,j={},q=function(e,t){return t.charAt(1).toUpperCase()},G="x-hidden-visibility",K="x-hidden-display",X="x-hidden-offsets",$="x-sized",Y="x-unsized",Q="x-stretched",Z="x-no-touch-scroll",J={style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"};return{alternateClassName:["Ext.Element"],observableType:"element",isElement:!0,skipGarbageCollection:!0,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(e){var t,n=this;return"string"==typeof e&&(e=o.getElementById(e)),e?(n.dom=e,t=e.id,t?n.id=t:t=e.id=n.getUniqueId(),n.el=n,Ext.cache[t]=n,void n.mixins.observable.constructor.call(n)):null},inheritableStatics:{cache:Ext.cache={},VISIBILITY:1,DISPLAY:2,OFFSETS:3,unitRe:H,useDelegatedEvents:!0,validNodeTypes:{1:1,9:1},addUnits:function(e,t){return"number"==typeof e?e+(t||z):""===e||"auto"===e||null==e?e||"":N.test(e)?e+(t||z):H.test(e)?e:e||""},create:function(e,t){var n,i,r,a,s,l,d,u,c=this,h=J.hidden;if(e||(e={}),e.isElement)return t?e.dom:e;if("nodeType"in e)return t?e:Ext.get(e);if("string"==typeof e)return o.createTextNode(e);r=e.tag,r||(r="div"),n=e.namespace?o.createElementNS(e.namespace,r):o.createElement(r),i=n.style,e[h]&&(u=e.className,u=null==u?"":u+" ",e.className=u+K,delete e[h]);for(s in e)if("tag"!==s)switch(a=e[s],s){case J.style:if("string"==typeof a)n.setAttribute(s,a);else for(l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);break;case J.className:case J.cls:n.className=a;break;case J.classList:n.className=a.join(" ");break;case J.text:n.textContent=a;break;case J.html:n.innerHTML=a;break;case J.children:for(l=0,d=a.length;d>l;l++)n.appendChild(c.create(a[l],!0));break;default:null!=a&&n.setAttribute(s,a)}return t?n:c.get(n)},detach:function(){var e=this.dom;return e&&e.parentNode&&"BODY"!==e.tagName&&e.parentNode.removeChild(e),this},fly:function(e,t){return Ext.fly(e,t)},fromPoint:function(e,t){return Ext.get(o.elementFromPoint(e,t))},get:function(t){var n,i,l,d,u,c,h,p=this,f=Ext.cache;if(!t)return null;if(t.isFly&&(t=t.dom),"string"==typeof t){if(l=t,f.hasOwnProperty(l)){if(d=f[l],d.skipGarbageCollection||!Ext.isGarbage(d.dom))return d;d.destroy()}if(l===a)return e.get(r);if(l===s)return e.get(o);if(i=Ext.getElementById?Ext.getElementById(l):o.getElementById(l))return new e(i)}if(n=t.nodeType,n?(u=9===n,h=p.validNodeTypes[n]):c=t.window==t,h||c){if(l=t.id,f.hasOwnProperty(l)){if(d=f[l],d.skipGarbageCollection||t===d.dom||!Ext.isGarbage(d.dom))return d;d.destroy()}return t===o&&(t.id=s),t==r&&(t.id=a),t=new e(t),(c||u)&&(t.skipGarbageCollection=!0),t}return t.isElement?t:t.isComposite?t:Ext.isIterable(t)?p.select(t):null},getActiveElement:function(){var e=o.activeElement;return e&&e.focus||(e=o.body),e},getDocumentHeight:function(){return Math.max(Ext.isStrict?o.documentElement.scrollHeight:o.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(Ext.isStrict?o.documentElement.scrollWidth:o.body.scrollWidth,this.getViewportWidth())},getOrientation:function(){return Ext.supports.OrientationChange?0==r.orientation?"portrait":"landscape":r.innerHeight>r.innerWidth?"portrait":"landscape"},getViewportHeight:function(){return r.innerHeight},getViewportWidth:function(){return r.innerWidth},getViewSize:function(){return{width:e.getViewportWidth(),height:e.getViewportHeight()}},normalize:function(e){return j[e]||(j[e]=e.replace(W,q))},parseBox:function(e){e=e||0;var t,n,i=typeof e;return"number"===i?{top:e,right:e,bottom:e,left:e}:"string"!==i?e:(t=e.split(" "),n=t.length,1===n?t[1]=t[2]=t[3]=t[0]:2===n?(t[2]=t[0],t[3]=t[1]):3===n&&(t[3]=t[1]),{top:parseFloat(t[0])||0,right:parseFloat(t[1])||0,bottom:parseFloat(t[2])||0,left:parseFloat(t[3])||0})},parseStyles:function(e){var t,n={};if(e)for(_.lastIndex=0;t=_.exec(e);)n[t[1]]=t[2]||"";return n},select:function(e,t,n){return Ext.fly(n||o).select(e,t)},query:function(e,t,n){return Ext.fly(n||o).query(e,t)},unitizeBox:function(e,t){var n=this;return e=n.parseBox(e),n.addUnits(e.top,t)+" "+n.addUnits(e.right,t)+" "+n.addUnits(e.bottom,t)+" "+n.addUnits(e.left,t)},serializeForm:function(e){var t,n,i,r,a,s,l,d,u,c=e.elements||(o.forms[e]||Ext.getDom(e)).elements,h=!1,p=encodeURIComponent,f="",g=c.length;for(s=0;g>s;s++)if(t=c[s],n=t.name,i=t.type,r=t.options,!t.disabled&&n)if(/select-(one|multiple)/i.test(i))for(d=r.length,l=0;d>l;l++)u=r[l],u.selected&&(a=u.hasAttribute("value"),f+=Ext.String.format("{0}={1}&",p(n),p(a?u.value:u.text)));else/file|undefined|reset|button/i.test(i)||/radio|checkbox/i.test(i)&&!t.checked||"submit"==i&&h||(f+=p(n)+"="+p(t.value)+"&",h=/submit/i.test(i));return f.substr(0,f.length-1)},getCommonAncestor:function(e,t,n){for(i=i||new Ext.dom.Fly,i.attach(Ext.getDom(e));!i.isAncestor(t);){if(!i.dom.parentNode){i.attach(document.body);break}i.attach(i.dom.parentNode)}return n?i.dom:Ext.get(i)}},addCls:function(e,t,n){var i,r,o,a,s,l,d,u=this,c=u.getData();if(!e)return u;for(c.isSynchronized||u.synchronize(),r=u.dom,o=c.classMap,a=c.classList,t=t?t+P:"",n=n?P+n:"","string"==typeof e&&(e=e.split(k)),s=0,l=e.length;l>s;s++)d=e[s],d&&(d=t+d+n,o[d]||(o[d]=!0,a.push(d),i=!0));return i&&(r.className=a.join(" ")),u},addStyles:function(e,t){var n,i,r=0,o=(e||"").match(I),a=o.length,s=[];if(1===a)r=Math.abs(parseFloat(this.getStyle(t[o[0]]))||0);else if(a){for(n=0;a>n;n++)i=o[n],s.push(t[i]);for(s=this.getStyle(s),n=0;a>n;n++)i=o[n],r+=parseFloat(s[t[i]])||0}return r},addUnits:function(t,n){return e.addUnits(t,n)},adjustDirect2DDimension:function(e){var t,n=this,i=n.dom,r=n.getStyle("display"),o=i.style.display,a=i.style.position,s=e===l?0:1,d=i.currentStyle;return"inline"===r&&(i.style.display="inline-block"),i.style.position=r.match(D)?"absolute":"static",t=(parseFloat(d[e])||2*parseFloat(d.msTransformOrigin.split(" ")[s]))%1,i.style.position=a,"inline"===r&&(i.style.display=o),t},animate:function(e){e=new Ext.fx.Animation(e),e.setElement(this),this._activeAnimation=e,e.on({animationend:this._onAnimationEnd}),Ext.Animator.run(e)},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(e,t){var n,i,r,o=this;if(e.nodeType||e.dom||"string"==typeof e)return e=Ext.getDom(e),o.dom.appendChild(e),t?e:Ext.get(e);if(e.length){for(n=Ext.fly(document.createDocumentFragment()),i=e.length,r=0;i>r;r++)n.appendChild(e[r],t);return o.dom.appendChild(n.dom),t?n.dom:n}return o.createChild(e,null,t)},appendTo:function(e){return Ext.getDom(e).appendChild(this.dom),this},applyStyles:function(t){return t&&("function"==typeof t&&(t=t.call()),"string"==typeof t&&(t=e.parseStyles(t)),"object"==typeof t&&this.setStyle(t)),this},blur:function(){var e=this,t=e.dom;if(t!==o.body){try{t.blur()}catch(n){}return e}return e.focus(void 0,t)},cacheScrollValues:function(){var e,t,i,r,o=this,a=[],s=[];for(n=n||new Ext.dom.Fly,e=o.query("*"),i=0,r=e.length;r>i;i++)t=e[i],(t.scrollTop>0||0!==t.scrollLeft)&&(s.push(t),a.push(n.attach(t).getScroll()));return function(){var e,t,i;for(t=0,i=s.length;i>t;t++)e=a[t],n.attach(s[t]),n.setScrollLeft(e.left),n.setScrollTop(e.top)}},center:function(e){return this.alignTo(e||o,"c-c")},child:function(e,t){var n=this,i=Ext.get(n).id;return n.selectNode(Ext.makeIdSelector(i)+" > "+e,!!t)},constrainScrollLeft:function(e){var t=this.dom;return Math.max(Math.min(e,t.scrollWidth-t.clientWidth),0)},constrainScrollTop:function(e){var t=this.dom;return Math.max(Math.min(e,t.scrollHeight-t.clientHeight),0)},createChild:function(e,t,n){return e=e||{tag:"div"},t?Ext.DomHelper.insertBefore(t,e,n!==!0):Ext.DomHelper.append(this.dom,e,n!==!0)},contains:function(e){if(!e)return!1;var t=this,n=Ext.getDom(e);return n===t.dom||t.isAncestor(n)},destroy:function(){var e=this,t=e.dom;t&&t.parentNode&&t.parentNode.removeChild(t),e.collect()},detach:function(){var e=this.dom;return e&&e.parentNode&&"BODY"!==e.tagName&&e.parentNode.removeChild(e),this},disableShadow:function(){var e=this.shadow;e&&(e.hide(),e.disabled=!0)},disableShim:function(){var e=this.shim;e&&(e.hide(),e.disabled=!0)},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(e){e.preventDefault()},destroyable:!0,delegated:!1})},disableTouchScroll:function(){this.addCls(Z),this.on({touchmove:function(e){e.preventDefault()},translate:!1})},doReplaceWith:function(e){var t=this.dom;t.parentNode.replaceChild(Ext.getDom(e),t)},doScrollIntoView:function(e,t,i,r,o,a){n=n||new Ext.dom.Fly;var s=this,l=s.dom,d=n.attach(e)[o](),u=e.scrollTop,c=s.getScrollIntoViewXY(e,d,u),h=c.x,p=c.y;return r&&(i?i=Ext.apply({listeners:{afteranimate:function(){n.attach(l).highlight()}}},i):n.attach(l).highlight()),p!==u&&n.attach(e).scrollTo("top",p,i),t!==!1&&h!==d&&n.attach(e)[a]("left",h,i),s},down:function(e,t){return this.selectNode(e,!!t)},enableShadow:function(e,t){var n=this,i=n.shadow||(n.shadow=new Ext.dom.Shadow(Ext.apply({target:n},e))),r=n.shim;r&&(r.offsets=i.outerOffsets,r.shadow=i,i.shim=r),t===!0||t!==!1&&n.isVisible()?i.show():i.hide(),i.disabled=!1},enableShim:function(e,t){var n=this,i=n.shim||(n.shim=new Ext.dom.Shim(Ext.apply({target:n},e))),r=n.shadow;r&&(i.offsets=r.outerOffsets,i.shadow=r,r.shim=i),t===!0||t!==!1&&n.isVisible()?i.show():i.hide(),i.disabled=!1},findParent:function(e,t,n){var i=this,r=i.dom,a=o.documentElement,s=0;for(t||0===t?"number"!=typeof t&&(a=Ext.getDom(t),t=Number.MAX_VALUE):t=50;r&&1===r.nodeType&&t>s&&r!==a;){if(Ext.fly(r).is(e))return n?Ext.get(r):r;s++,r=r.parentNode}return null},findParentNode:function(e,t,n){var i=Ext.fly(this.dom.parentNode);return i?i.findParent(e,t,n):null},first:function(e,t){return this.matchNode("nextSibling","firstChild",e,t)},focus:function(e,t){var n=this;t=t||n.dom;try{+e?Ext.defer(n.focus,e,n,[null,t]):(Ext.GlobalEvents.fireEvent("beforefocus",t),t.focus())}catch(i){}return n},collect:function(){var e=this,t=e.dom,n=e.shadow,i=e.shim;e.isFly||(e.mixins.observable.destroy.call(e),delete Ext.cache[e.id],e.isDestroyed=!0,e.el=null),t&&(t._extData=e.dom=null),n&&(n.hide(),e.shadow=null),i&&(i.hide(),e.shim=null)},getAnchorToXY:function(e,t,n,i){return e.getAnchorXY(t,n,i)},getAttribute:function(e,t){var n=this.dom;return t?n.getAttributeNS(t,e)||n.getAttribute(t+":"+e):n.getAttribute(e)||n[e]||null},getAttributes:function(){var e,t,n,i=this.dom.attributes,r={};for(t=0,n=i.length;n>t;t++)e=i[t],r[e.name]=e.value;return r},getBottom:function(e){return(e?this.getLocalY():this.getY())+this.getHeight()},getById:function(e,t){var n=o.getElementById(e)||this.dom.querySelector(Ext.makeIdSelector(e));return t?n:n?Ext.get(n):null},getBorderPadding:function(){var e=this.getStyle(O),t=this.getStyle(V);return{beforeX:(parseFloat(t[A.l])||0)+(parseFloat(e[F.l])||0),afterX:(parseFloat(t[A.r])||0)+(parseFloat(e[F.r])||0),beforeY:(parseFloat(t[A.t])||0)+(parseFloat(e[F.t])||0),afterY:(parseFloat(t[A.b])||0)+(parseFloat(e[F.b])||0)}},getBorders:function(){var e=this.getStyle(V);return{beforeX:parseFloat(e[A.l])||0,afterX:parseFloat(e[A.r])||0,beforeY:parseFloat(e[A.t])||0,afterY:parseFloat(e[A.b])||0}},getBorderWidth:function(e){return this.addStyles(e,A)},getData:function(e){var t,n=this.dom;return n&&(t=n._extData,t||e||(n._extData=t={})),t},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(e,t){var n,i,r=this,o=r.isStyle("display","none");return o?0:(n=r.dom.offsetHeight,Ext.supports.Direct2DBug&&(i=r.adjustDirect2DDimension(d),t?n+=i:i>0&&.5>i&&n++),e&&(n-=r.getBorderWidth("tb")+r.getPadding("tb")),0>n?0:n)},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(e){return e?this.getLocalX():this.getX()},getLocalX:function(){var e,t=this,n=t.getStyle("left");return n&&"auto"!==n?U.test(n)?n=parseFloat(n):(n=t.getX(),e=t.dom.offsetParent,e&&(n-=Ext.fly(e).getX())):n=0,n},getLocalXY:function(){var e,t=this,n=t.getStyle(["left","top"]),i=n.left,r=n.top;return i&&"auto"!==i?U.test(i)?i=parseFloat(i):(i=t.getX(),e=t.dom.offsetParent,e&&(i-=Ext.fly(e).getX())):i=0,r&&"auto"!==r?U.test(r)?r=parseFloat(r):(r=t.getY(),e=t.dom.offsetParent,e&&(r-=Ext.fly(e).getY())):r=0,[i,r]},getLocalY:function(){var e,t=this,n=t.getStyle("top");return n&&"auto"!==n?U.test(n)?n=parseFloat(n):(n=t.getY(),e=t.dom.offsetParent,e&&(n-=Ext.fly(e).getY())):n=0,n},getMargin:function(){var e={t:"top",l:"left",r:"right",b:"bottom"},t=["margin-top","margin-left","margin-right","margin-bottom"];return function(n){var i,r,o,a=this;if(n)o=a.addStyles(n,L);else if(i=a.getStyle(t),o={},i&&"object"==typeof i){o={};for(r in L)o[r]=o[e[r]]=parseFloat(i[L[r]])||0}return o}}(),getPadding:function(e){return this.addStyles(e,F)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(e){return(e?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var e,t,n=this,i=n.dom,r=o.documentElement,a=document.body;return i===o||i===a?(e=r.scrollLeft||(a?a.scrollLeft:0),t=r.scrollTop||(a?a.scrollTop:0)):(e=i.scrollLeft,t=i.scrollTop),{left:e,top:t}},getScrollIntoViewXY:function(e,t,n){var i=this.dom,r=Ext.getDom(e),o=this.getOffsetsTo(r),a=i.offsetWidth,s=i.offsetHeight,l=o[0]+t,d=o[1]+n,u=d+s,c=l+a,h=r.clientHeight,p=r.clientWidth,f=t,g=n,m=g+h,x=f+p;return s>h||g>d?n=d:u>m&&(n=u-h),a>p||f>l?t=l:c>x&&(t=c-p),{x:t,y:n}},getScrollLeft:function(){var e=this.dom;return e===o||e===document.body?this.getScroll().left:e.scrollLeft},getScrollTop:function(){var e=this.dom;return e===o||e===document.body?this.getScroll().top:e.scrollTop},getSize:function(e){return{width:this.getWidth(e),height:this.getHeight(e)}},getStyle:function(t,n){var i,r,o,a,s,l,d,u=this,c=u.dom,h="string"!=typeof t,p=u.styleHooks,f=t,g=f,m=1;if(h&&(o={},f=g[0],d=0,!(m=g.length)))return o;if(!c||c.documentElement)return o||"";i=c.style,n?l=i:(l=c.ownerDocument.defaultView.getComputedStyle(c,null),l||(n=!0,l=i));do{if(a=p[f],a||(p[f]=a={name:e.normalize(f)}),a.get?s=a.get(c,u,n,l):(r=a.name,s=l[r]),!h)return s;o[f]=s,f=g[++d]}while(m>d);return o},getStyleValue:function(e){return this.dom.style.getPropertyValue(e)},getTop:function(e){return e?this.getLocalY():this.getY()},getValue:function(e){var t=this.dom.value;return e?parseInt(t,10):t},getViewSize:function(){var t=this.dom;return t===o||t===o.body?{width:e.getViewportWidth(),height:e.getViewportHeight()}:{width:t.clientWidth,height:t.clientHeight}},getVisibilityMode:function(){var t=this,n=t.getData(),i=n.visibilityMode;return void 0===i&&(n.visibilityMode=i=e.DISPLAY),i},getWidth:function(e,t){var n,i,r,o=this,a=o.dom,s=o.isStyle("display","none");return s?0:(Ext.supports.BoundingClientRect?(n=a.getBoundingClientRect(),i=o.vertical&&!Ext.supports.RotatedBoundingClientRect?n.bottom-n.top:n.right-n.left,i=t?i:Math.ceil(i)):i=a.offsetWidth,Ext.supports.Direct2DBug&&!o.vertical&&(r=o.adjustDirect2DDimension(l),t?i+=r:r>0&&.5>r&&i++),e&&(i-=o.getBorderWidth("lr")+o.getPadding("lr")),0>i?0:i)},getX:function(){return this.getXY()[0]},getXY:function(){var e,t,n=Math.round,i=this.dom,r=0,a=0;if(i!==o&&i!==o.body){try{e=i.getBoundingClientRect()}catch(s){e={left:0,top:0}}r=n(e.left),a=n(e.top),t=Ext.getDoc().getScroll(),r+=t.left,a+=t.top}return[r,a]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(e){var t=this.getData();return t.isSynchronized||this.synchronize(),t.classMap.hasOwnProperty(e)},hide:function(){return this.setVisible(!1),this},insertAfter:function(e){return e=Ext.getDom(e),e.parentNode.insertBefore(this.dom,e.nextSibling),this},insertBefore:function(e){return e=Ext.getDom(e),e.parentNode.insertBefore(this.dom,e),this},insertFirst:function(e,t){return e=e||{},e.nodeType||e.dom||"string"==typeof e?(e=Ext.getDom(e),this.dom.insertBefore(e,this.dom.firstChild),t?e:Ext.get(e)):this.createChild(e,this.dom.firstChild,t)},insertHtml:function(e,t,n){var i=Ext.DomHelper.insertHtml(e,this.dom,t);return n?Ext.get(i):i},insertSibling:function(e,t,n){var i,r,o,a,s=this,l=Ext.DomHelper,d="after"===(t||"before").toLowerCase();if(Ext.isIterable(e)){if(o=e.length,r=Ext.fly(document.createDocumentFragment()),Ext.isArray(e))for(a=0;o>a;a++)i=r.appendChild(e[a],n);else{for(a=0;o>a;a++)r.dom.appendChild(i=e[0]);n===!1&&(i=Ext.get(i))}return s.dom.parentNode.insertBefore(r.dom,d?s.dom.nextSibling:s.dom),i}return e=e||{},e.nodeType||e.dom?(i=s.dom.parentNode.insertBefore(Ext.getDom(e),d?s.dom.nextSibling:s.dom),n||(i=Ext.get(i))):i=d&&!s.dom.nextSibling?l.append(s.dom.parentNode,e,!n):l[d?"insertAfter":"insertBefore"](s.dom,e,!n),i},is:function(e){var t,n=this.dom;return t=e?n.tagName?Ext.isFunction(e)?e(n):n[Ext.supports.matchesSelector](e):!1:!0},isAncestor:function(e){var t=!1,n=this.dom,i=Ext.getDom(e);if(n&&i){if(n.contains)return n.contains(i);if(n.compareDocumentPosition)return!!(16&n.compareDocumentPosition(i));for(;i=i.parentNode;)t=i===n||t}return t},isPainted:function(){return Ext.browser.is.IE?function(){var e=this.dom;return!(!e||0===e.offsetHeight||0===e.offsetWidth)}:function(){var e=this.dom;return!(!e||!e.offsetParent)}}(),isStyle:function(e,t){return this.getStyle(e)===t},isVisible:function(e){var n,i=this.dom;if(!i)return!1;for(t||(t=new Ext.dom.Fly),n=i.ownerDocument.documentElement;i!==n;i=i.parentNode){if(!i||11===i.nodeType||t.attach(i).isStyle(v,y)||t.isStyle(E,b))return!1;if(!e)break}return!0},last:function(e,t){return this.matchNode("previousSibling","lastChild",e,t)},matchNode:function(e,t,n,i){var r,o=this.dom;if(!o)return null;for(r=o[t];r;){if(1===r.nodeType&&(!n||Ext.fly(r,"_matchNode").is(n)))return i?r:Ext.get(r);r=r[e]}return null},next:function(e,t){return this.matchNode("nextSibling","nextSibling",e,t);
},parent:function(e,t){return this.matchNode("parentNode","parentNode",e,t)},position:function(e,t,n,i){var r=this;"BODY"!==r.dom.tagName&&(!e&&r.isStyle(w,T)?r.setStyle(w,S):e&&r.setStyle(w,e),t&&r.setStyle(C,t),(n||i)&&r.setXY([n||!1,i||!1]))},prev:function(e,t){return this.matchNode("previousSibling","previousSibling",e,t)},query:function(e,t,n){var i,r,o,a,s,l,d,u=this.dom;if(!u)return null;for(t=t!==!1,e=e.split(","),n||(i=[]),l=0,r=e.length;r>l;l++)if("string"==typeof e[l]){if(n)return a=u.querySelector(e[l]),t?a:Ext.get(a);for(s=u.querySelectorAll(e[l]),d=0,o=s.length;o>d;d++)i.push(t?s[d]:Ext.get(s[d]))}return i},radioCls:function(e){var t,n=this.dom.parentNode.childNodes;e=Ext.isArray(e)?e:[e];for(var i=0,r=n.length;r>i;i++)t=n[i],t&&1===t.nodeType&&Ext.fly(t).removeCls(e);return this.addCls(e)},redraw:function(){var e=this.dom,t=e.style;t.display="none",e.offsetHeight,t.display=""},remove:function(){this.destroy()},removeChild:function(e){return this.dom.removeChild(Ext.getDom(e)),this},removeCls:function(e,t,n){var i,r,o,a,s,l,d,u=this,c=u.getData();if(!e)return u;for(c.isSynchronized||u.synchronize(),r=u.dom,o=c.classMap,a=c.classList,t=t?t+P:"",n=n?P+n:"","string"==typeof e&&(e=e.split(k)),s=0,l=e.length;l>s;s++)d=e[s],d&&(d=t+d+n,o[d]&&(delete o[d],Ext.Array.remove(a,d),i=!0));return i&&(r.className=a.join(" ")),u},repaint:function(){var e=this;return e.addCls("x-repaint"),Ext.defer(function(){e.dom&&Ext.fly(e.dom).removeCls("x-repaint")},1),e},replace:function(e,t){e=Ext.getDom(e);var n=e.parentNode,i=e.id,r=this.dom;return t!==!1&&i&&Ext.cache[i]?(n.insertBefore(r,e),Ext.get(e).destroy()):n.replaceChild(r,e),this},replaceCls:function(e,t,n,i){var r,o,a,s,l,d,u=this,c=u.getData();if(!e&&!t)return u;for(e=e||[],t=t||[],c.isSynchronized||u.synchronize(),i||(i=""),r=u.dom,o=c.classMap,a=c.classList,n=n?n+P:"",i=i?P+i:"","string"==typeof e&&(e=e.split(k)),"string"==typeof t&&(t=t.split(k)),s=0,l=e.length;l>s;s++)d=n+e[s]+i,o[d]&&(delete o[d],Ext.Array.remove(a,d));for(s=0,l=t.length;l>s;s++)d=n+t[s]+i,o[d]||(o[d]=!0,a.push(d));return r.className=a.join(" "),u},replaceWith:function(e){var t,n=this,i=n.dom,r=i.parentNode,o=Ext.cache;return n.clearListeners(),e.nodeType||e.dom||"string"==typeof e?(e=Ext.get(e),t=r.insertBefore(e.dom,i)):t=Ext.DomHelper.insertBefore(i,e),r.removeChild(i),n.dom=t,n.isFly||(delete o[n.id],o[n.id=Ext.id(t)]=n),n},resolveListenerScope:function(e){var t=this.component;return t?t.resolveListenerScope(e):this},scroll:function(e,t,n){if(!this.isScrollable())return!1;e=e.charAt(0);var i,r,o=this,a=o.dom,s="r"===e||"l"===e?"left":"top",l=!1;return("l"===e||"t"===e||"u"===e)&&(t=-t),"left"===s?(i=a.scrollLeft,r=o.constrainScrollLeft(i+t)):(i=a.scrollTop,r=o.constrainScrollTop(i+t)),r!==i&&(this.scrollTo(s,r,n),l=!0),l},scrollBy:function(e,t,n){var i=this,r=i.dom;return e.length?(n=t,t=e[1],e=e[0]):"number"!=typeof e&&(n=t,t=e.y,e=e.x),e&&i.scrollTo("left",i.constrainScrollLeft(r.scrollLeft+e),n),t&&i.scrollTo("top",i.constrainScrollTop(r.scrollTop+t),n),i},scrollChildIntoView:function(e,t){Ext.fly(e).scrollIntoView(this,t)},scrollIntoView:function(e,t,n,i){return e=Ext.getDom(e)||Ext.getBody().dom,this.doScrollIntoView(e,t,n,i,"getScrollLeft","scrollTo")},scrollTo:function(e,t,n){var i,r=R.test(e),o=this,a=r?"scrollTop":"scrollLeft",s=o.dom;return n&&o.anim?(i={to:{}},i.to[a]=t,Ext.isObject(n)&&Ext.applyIf(i,n),o.animate(i)):s[a]=t,o},select:function(e,t){var n,i;return"string"==typeof e?i=this.query(e,!t):(i=e,n=!0),t?new Ext.CompositeElement(i,!n):new Ext.CompositeElementLite(i,!0)},selectNode:function(e,t){return this.query(e,t,!0)},set:function(e,t){var n,i,r=this,o=r.dom;for(n in e)e.hasOwnProperty(n)&&(i=e[n],"style"===n?r.applyStyles(i):"cls"===n?o.className=i:t!==!1?void 0===i?o.removeAttribute(n):o.setAttribute(n,i):o[n]=i);return r},setBottom:function(t){return this.dom.style[m]=e.addUnits(t),this},setBorder:function(e){var t=this,n=t.dom.style;e||0===e?(e=t.self.unitizeBox(e===!0?1:e),n.setProperty("border-width",e,"important")):(n.removeProperty("border-top-width"),n.removeProperty("border-right-width"),n.removeProperty("border-bottom-width"),n.removeProperty("border-left-width"))},setCls:function(e){var t,n,i,r,o=this,a=o.getData();for(a.isSynchronized||o.synchronize(),r=a.classMap,"string"==typeof e&&(e=e.split(k)),t=0,n=e.length;n>t;t++)i=e[t],r[i]||(r[i]=!0);a.classList=e.slice(),o.dom.className=e.join(" ")},setHeight:function(t){var n=this;return n.dom.style[d]=e.addUnits(t),(n.shadow||n.shim)&&n.syncUnderlays(),n},setHtml:function(e){this.dom&&(this.dom.innerHTML=e)},setId:function(e){var t=this,n=t.id,i=Ext.cache;return n&&delete i[n],t.dom.id=e,t.id=e,i[e]=t,t},setLeft:function(t){var n=this;return n.dom.style[x]=e.addUnits(t),(n.shadow||n.shim)&&n.syncUnderlays(),n},setLocalX:function(e){var t=this,n=t.dom.style;return n.right="auto",n.left=null===e?"auto":e+"px",(t.shadow||t.shim)&&t.syncUnderlays(),t},setLocalXY:function(e,t){var n=this,i=n.dom.style;return i.right="auto",e&&e.length&&(t=e[1],e=e[0]),null===e?i.left="auto":void 0!==e&&(i.left=e+"px"),null===t?i.top="auto":void 0!==t&&(i.top=t+"px"),(n.shadow||n.shim)&&n.syncUnderlays(),n},setLocalY:function(e){var t=this;return t.dom.style.top=null===e?"auto":e+"px",(t.shadow||t.shim)&&t.syncUnderlays(),t},setMargin:function(e){var t=this,n=t.dom.style;e||0===e?(e=t.self.unitizeBox(e===!0?5:e),n.setProperty("margin",e,"important")):(n.removeProperty("margin-top"),n.removeProperty("margin-right"),n.removeProperty("margin-bottom"),n.removeProperty("margin-left"))},setMaxHeight:function(t){return this.dom.style[p]=e.addUnits(t),this},setMaxWidth:function(t){return this.dom.style[h]=e.addUnits(t),this},setMinHeight:function(t){return this.dom.style[c]=e.addUnits(t),this},setMinWidth:function(t){return this.dom.style[u]=e.addUnits(t),this},setPadding:function(e){var t=this,n=t.dom.style;e||0===e?(e=t.self.unitizeBox(e===!0?5:e),n.setProperty("padding",e,"important")):(n.removeProperty("padding-top"),n.removeProperty("padding-right"),n.removeProperty("padding-bottom"),n.removeProperty("padding-left"))},setRight:function(t){return this.dom.style[g]=e.addUnits(t),this},setScrollLeft:function(e){return this.dom.scrollLeft=e,this},setScrollTop:function(e){return this.dom.scrollTop=e,this},setSize:function(t,n){var i=this,r=i.dom.style;return Ext.isObject(t)&&(n=t.height,t=t.width),r.width=e.addUnits(t),r.height=e.addUnits(n),(i.shadow||i.shim)&&i.syncUnderlays(),i},setSizeState:function(e){var t,n,i=this;return e===!0?(t=$,n=[Y,Q]):e===!1?(t=Y,n=[$,Q]):null===e?(t=Q,n=[$,Y]):n=[$,Y,Q],t&&i.addCls(t),i.removeCls(n),i},setStyle:function(t,n){var i,r=this,o=r.dom,a=r.styleHooks,s=o.style,l=t;if("string"==typeof l)i=a[l],i||(a[l]=i={name:e.normalize(l)}),n=null==n?"":n,i.set?i.set(o,n,r):s[i.name]=n,i.afterSet&&i.afterSet(o,n,r);else for(l in t)t.hasOwnProperty(l)&&(i=a[l],i||(a[l]=i={name:e.normalize(l)}),n=t[l],n=null==n?"":n,i.set?i.set(o,n,r):s[i.name]=n,i.afterSet&&i.afterSet(o,n,r));return r},setText:function(e){this.dom.textContent=e},setTop:function(t){var n=this;return n.dom.style[f]=e.addUnits(t),(n.shadow||n.shim)&&n.syncUnderlays(),n},setUnderlaysVisible:function(e){var t=this.shadow,n=this.shim;t&&!t.disabled&&(e?t.show():t.hide()),n&&!n.disabled&&(e?n.show():n.hide())},setVisibility:function(e){var t=this.dom.style;e?t.removeProperty("visibility"):t.setProperty("visibility","hidden","important")},setVisibilityMode:function(e){return this.getData().visibilityMode=e,this},setVisible:function(t){var n=this,i=n.getVisibilityMode(),r=t?"removeCls":"addCls";switch(i){case e.DISPLAY:n.removeCls([G,X]),n[r](K);break;case e.VISIBILITY:n.removeCls([K,X]),n[r](G);break;case e.OFFSETS:n.removeCls([G,K]),n[r](X)}return(n.shadow||n.shim)&&n.setUnderlaysVisible(t),n},setWidth:function(t){var n=this;return n.dom.style[l]=e.addUnits(t),(n.shadow||n.shim)&&n.syncUnderlays(),n},setX:function(e){return this.setXY([e,!1])},setXY:function(e){var t,n=this,i=n.translatePoints(e),r=n.dom.style;n.position(),r.right="auto";for(t in i)isNaN(i[t])||(r[t]=i[t]+"px");return(n.shadow||n.shim)&&n.syncUnderlays(),n},setY:function(e){return this.setXY([!1,e])},setZIndex:function(e){var t=this;return t.shadow&&t.shadow.setZIndex(e),t.shim&&t.shim.setZIndex(e),t.setStyle("z-index",e)},show:function(){return this.setVisible(!0),this},swapCls:function(e,t,n,i){void 0===n&&(n=!0);var r=this,o=n?e:t,a=n?t:e;return a&&r.removeCls(i?i+"-"+a:a),o&&r.addCls(i?i+"-"+o:o),r},synchronize:function(){var e,t,n,i,r=this,o=r.dom,a={},s=o.className,l=r.getData();if(s&&s.length>0)for(e=o.className.split(B),t=0,n=e.length;n>t;t++)i=e[t],a[i]=!0;else e=[];return l.classList=e,l.classMap=a,l.isSynchronized=!0,r},syncUnderlays:function(){var e,t,n,i,r,o=this,a=o.shadow,s=o.shim,l=o.dom;o.isVisible()&&(e=o.getXY(),t=e[0],n=e[1],i=l.offsetWidth,r=l.offsetHeight,a&&!a.hidden&&a.realign(t,n,i,r),s&&!s.hidden&&s.realign(t,n,i,r))},toggleCls:function(e,t){return"boolean"!=typeof t&&(t=!this.hasCls(e)),t?this.addCls(e):this.removeCls(e)},toggle:function(){return this.setVisible(!this.isVisible()),this},translate:function(){var e="webkitTransform"in o.createElement("div").style?"webkitTransform":"transform";return function(t,n,i){this.dom.style[e]="translate3d("+(t||0)+"px, "+(n||0)+"px, "+(i||0)+"px)"}}(),unwrap:function(){var e,t,n=this.dom,i=n.parentNode,r=Ext.fly(Ext.Element.getActiveElement());return this.contains(r)&&(Ext.GlobalEvents.suspendEvent("focus"),r.suspendEvent("focus","blur"),t=!0),i?(e=i.parentNode,e.insertBefore(n,i),e.removeChild(i)):(e=document.createDocumentFragment(),e.appendChild(n)),t&&(r.focus(),Ext.GlobalEvents.resumeEvent("focus"),r.resumeEvent("focus","blur")),this},up:function(e,t,n){return this.findParentNode(e,t,!n)},update:function(e){return this.setHtml(e)},wrap:function(e,t,n){var i,r=this,o=r.dom,a=Ext.DomHelper.insertBefore(o,e||{tag:"div"},!t),s=a,l=Ext.fly(Ext.Element.getActiveElement());return n&&(s=a.selectNode(n,t)),r.contains(l)&&(Ext.GlobalEvents.suspendEvent("focus"),l.suspendEvent("focus","blur"),i=!0),s.appendChild(o),i&&(l.focus(),l.resumeEvent("focus","blur"),Ext.GlobalEvents.resumeEvent("focus")),a},privates:{doAddListener:function(t,n,i,r,o,a,s){var l,d,u,c=this;t=Ext.canonicalEventName(t),c.blockedEvents[t]||(l=c.mixins.observable.doAddListener,r=r||{},c.longpressEvents[t]&&c.disableTouchContextMenu(),e.useDelegatedEvents===!1&&(r.delegated=r.delegated||!1),r.translate!==!1&&(d=c.additiveEvents[t],d&&(r.type=t,t=d,l.call(c,t,n,i,r,o,a,s)),u=c.eventMap[t],u&&(r.type=r.type||t,t=u)),l.call(c,t,n,i,r,o,a,s),delete r.type)},doRemoveListener:function(e,t,n){var i,r,o,a,s=this;s.blockedEvents[e]||(i=s.mixins.observable.doRemoveListener,s.longpressEvents[e]&&(a=this._contextMenuListenerRemover,a&&a.destroy()),o=s.additiveEvents[e],o&&(e=o,i.call(s,e,t,n)),r=s.eventMap[e],r&&i.call(s,r,t,n),i.call(s,e,t,n))},_initEvent:function(e){return this.events[e]=new Ext.dom.ElementEvent(this,e)},_getPublisher:function(e){var t=Ext.event.publisher.Publisher,n=t.publishersByEvent[e];return(!n||this.dom===window&&"resize"===e)&&(n=t.publishers.dom),n}},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(t){var n=this,i=n.dom,r="BODY"===i.nodeName,o=r?e.getViewportWidth():i.offsetWidth,a=r?e.getViewportHeight():i.offsetHeight,s=n.getXY(),l=s[1],d=s[0]+o,u=s[1]+a,c=s[0];return t?new Ext.util.Region(l,d,u,c):{left:c,top:l,width:o,height:a,right:d,bottom:u}},getScrollParent:null,isDescendent:null,isTransparent:function(e){var t=this.getStyle(e);return t?M.test(t):!1},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},1,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.dom,"Element",Ext,"Element"],function(e){var t,n=document,i=e.prototype,r=Ext.supports,o="pointerdown",a="pointermove",s="pointerup",l="pointercancel",d="MSPointerDown",u="MSPointerMove",c="MSPointerUp",h="MSPointerCancel",p="mousedown",f="mousemove",g="mouseup",m="mouseover",x="mouseout",v="mouseenter",y="mouseleave",E="touchstart",b="touchmove",C="touchend",w="touchcancel",S="click",T="dblclick",P="tap",I="doubletap",k=i.eventMap={},B=i.additiveEvents={},M=Ext.id;Ext.id=function(t,n){var i,r,o=Ext.getDom(t,!0);return o?(r=o.id)||(r=M(null,n||e.prototype.identifiablePrefix),Ext.isSandboxed&&(i=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-"),r=i+r),o.id=r):r=M(t,n),r},r.PointerEvents?(k[p]=o,k[f]=a,k[g]=s,k[E]=o,k[b]=a,k[C]=s,k[w]=l,k[S]=P,k[T]=I,k[m]="pointerover",k[x]="pointerout",k[v]="pointerenter",k[y]="pointerleave"):r.MSPointerEvents?(k[o]=d,k[a]=u,k[s]=c,k[l]=h,k[p]=d,k[f]=u,k[g]=c,k[E]=d,k[b]=u,k[C]=c,k[w]=h,k[S]=P,k[T]=I,k[m]="MSPointerOver",k[x]="MSPointerOut"):r.TouchEvents?(k[o]=E,k[a]=b,k[s]=C,k[l]=w,k[p]=E,k[f]=b,k[g]=C,k[S]=P,k[T]=I,Ext.isWebKit&&Ext.os.is.Desktop&&(k[E]=p,k[b]=f,k[C]=g,k[w]=g,B[p]=p,B[f]=f,B[g]=g,B[E]=E,B[b]=b,B[C]=C,B[w]=w,B[o]=p,B[a]=f,B[s]=g,B[l]=g)):(k[o]=p,k[a]=f,k[s]=g,k[l]=g,k[E]=p,k[b]=f,k[C]=g,k[w]=g),Ext.isWebKit&&(k.transitionend=Ext.browser.getVendorProperyName("transitionEnd"),k.animationstart=Ext.browser.getVendorProperyName("animationStart"),k.animationend=Ext.browser.getVendorProperyName("animationEnd")),Ext.supports.MouseWheel||Ext.isOpera||(k.mousewheel="DOMMouseScroll"),t=i.$eventOptions=Ext.Object.chain(i.$eventOptions),t.translate=t.capture=t.delegate=t.delegated=t.stopEvent=t.preventDefault=t.stopPropagation=t.element=1,i.getTrueXY=i.getXY,Ext.select=e.select,Ext.query=e.query,Ext.apply(Ext,{get:function(t){return e.get(t)},getDom:function(e){return e&&n?e.dom||("string"==typeof e?Ext.getElementById(e):e):null},getBody:function(){if(!Ext._bodyEl){if(!n.body)throw Error("[Ext.getBody] document.body does not yet exist");Ext._bodyEl=Ext.get(n.body)}return Ext._bodyEl},getHead:function(){return Ext._headEl||(Ext._headEl=Ext.get(n.head||n.getElementsByTagName("head")[0])),Ext._headEl},getDoc:function(){return Ext._docEl||(Ext._docEl=Ext.get(n)),Ext._docEl},getWin:function(){return Ext._winEl||(Ext._winEl=Ext.get(window)),Ext._winEl},removeNode:function(e){e=e.dom||e;var t,n=e&&e.id,i=Ext.cache[n];i?i.destroy():!e||3!==e.nodeType&&"BODY"===e.tagName.toUpperCase()||(t=e.parentNode,t&&t.removeChild(e))}}),Ext.isGarbage=function(e){return e&&1===e.nodeType&&"BODY"!==e.tagName&&"HTML"!==e.tagName&&(!e.parentNode||!e.offsetParent&&(Ext.isIE8?n.all[e.id]:n.getElementById(e.id))!==e&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(e)))}}),Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:!0,config:{property:null,value:null,filterFn:null,id:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disabled:!1,disableOnEmpty:!1,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:!1,statics:{createFilterFn:function(e){return e?function(t){var n,i,r=e.isCollection?e.items:e,o=r.length,a=!0;for(n=0;a&&o>n;n++)i=r[n],i.getDisabled()||(a=i.filter(t));return a}:Ext.returnTrue},isInvalid:function(e){if(!e.filterFn){if(!e.property)return"A Filter requires either a property or a filterFn to be set";if(!e.hasOwnProperty("value")&&!e.operator)return"A Filter requires either a property and value, or a filterFn to be set"}return!1}},constructor:function(e){this.initConfig(e)},preventConvert:{"in":1},filter:function(e){var t=this,n=t._filterFn||t.getFilterFn(),i=t.getConvert(),r=t._value;return t._filterValue=r,t.isDateValue=Ext.isDate(r),t.isDateValue&&(t.dateValue=r.getTime()),i&&!t.preventConvert[t.getOperator()]&&(t._filterValue=i.call(t.scope||t,r)),n.call(t.scope||t,e)},getId:function(){var e=this._id;return e||(e=this.getProperty(),e||(e=Ext.id(null,"ext-filter-")),this._id=e),e},getFilterFn:function(){var e,t=this,n=t._filterFn;return n||(e=t.getOperator(),n=e?t.operatorFns[e]:t.createRegexFilter(),t._filterFn=n),n},createRegexFilter:function(){var e=this,t=!!e.getAnyMatch(),n=!!e.getExactMatch(),i=e.getValue(),r=Ext.String.createRegex(i,!t,!t&&n,!e.getCaseSensitive());return function(t){var n=e.getPropertyValue(t);return r?r.test(n):null==n}},getPropertyValue:function(e){var t=this._root,n=null==t?e:e[t];return n[this._property]},getState:function(){var e,t=this.getInitialConfig(),n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return delete n.root,n.value=this.getValue(),n},getScope:function(){return this.scope},serialize:function(){var e=this.getState(),t=this.getSerializer();return delete e.id,delete e.serializer,t&&t.call(this,e),e},updateOperator:function(){this._filterFn=null},updateValue:function(e){this._filterFn=null,this.getDisableOnEmpty()&&this.setDisabled(Ext.isEmpty(e))},updateDisableOnEmpty:function(e){var t=!1;e&&(t=Ext.isEmpty(this.getValue())),this.setDisabled(t)},privates:{getCandidateValue:function(e,t,n){var i=this,r=i._convert,o=i.getPropertyValue(e);return r?o=r.call(i.scope||i,o):n||(o=Ext.coerce(o,t)),o}}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){var e=this.prototype,t=e.operatorFns={"<":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)<t},"<=":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)<=t},"=":function(e){var t=this,n=t._filterValue;return e=t.getCandidateValue(e,n),t.isDateValue&&e instanceof Date&&(e=e.getTime(),n=t.dateValue),e==n},"===":function(e){var t=this,n=t._filterValue;return e=t.getCandidateValue(e,n,!0),t.isDateValue&&e instanceof Date&&(e=e.getTime(),n=t.dateValue),e===n},">=":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)>=t},">":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)>t},"!=":function(e){var t=this,n=t._filterValue;return e=t.getCandidateValue(e,n),t.isDateValue&&e instanceof Date&&(e=e.getTime(),n=t.dateValue),e!=n},"!==":function(e){var t=this,n=t._filterValue;return e=t.getCandidateValue(e,n,!0),t.isDateValue&&e instanceof Date&&(e=e.getTime(),n=t.dateValue),e!==n},"in":function(e){var t=this._filterValue;return Ext.Array.contains(t,this.getCandidateValue(e,t))},like:function(e){var t=this._filterValue;return t&&this.getCandidateValue(e,t).toLowerCase().indexOf(t.toLowerCase())>-1}};t["=="]=t["="],t.gt=t[">"],t.ge=t[">="],t.lt=t["<"],t.le=t["<="],t.eq=t["="],t.ne=t["!="]}),Ext.cmd.derive("Ext.util.Observable",Ext.mixin.Observable,{$applyConfigs:!0},0,0,0,0,0,0,[Ext.util,"Observable"],function(e){var t=Ext.mixin.Observable;e.releaseCapture=t.releaseCapture,e.capture=t.capture,e.captureArgs=t.captureArgs,e.observe=e.observeClass=t.observe}),Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(e,t){var n=this;1===arguments.length&&Ext.isObject(e)?(n.initialConfig=e,Ext.apply(n,e)):(n.allowFunctions=e===!0,t&&(n.getKey=t),n.initialConfig={allowFunctions:n.allowFunctions,getKey:n.getKey}),n.items=[],n.map={},n.keys=[],n.indexMap={},n.length=0,n.mixins.observable.constructor.call(n)},allowFunctions:!1,add:function(e,t){var n,i=this.length;return n=1===arguments.length?this.insert(i,e):this.insert(i,e,t)},getKey:function(e){return e.id},replace:function(e,t){var n,i,r=this;return 1==arguments.length&&(t=arguments[0],e=r.getKey(t)),n=r.map[e],void 0===e||null===e||void 0===n?r.add(e,t):(r.generation++,i=r.indexOfKey(e),r.items[i]=t,r.map[e]=t,r.hasListeners.replace&&r.fireEvent("replace",e,n,t),t)},updateKey:function(e,t){var n,i=this,r=i.map,o=i.indexOfKey(e),a=i.indexMap;o>-1&&(n=r[e],delete r[e],delete a[e],r[t]=n,a[t]=o,i.keys[o]=t,i.indexGeneration=++i.generation)},addAll:function(e){var t,n=this;if(arguments.length>1||Ext.isArray(e))n.insert(n.length,arguments.length>1?arguments:e);else for(t in e)e.hasOwnProperty(t)&&(n.allowFunctions||"function"!=typeof e[t])&&n.add(t,e[t])},each:function(e,t){for(var n,i=Ext.Array.push([],this.items),r=0,o=i.length;o>r&&(n=i[r],e.call(t||n,n,r,o)!==!1);r++);},eachKey:function(e,t){for(var n=this.keys,i=this.items,r=0,o=n.length;o>r;r++)e.call(t||window,n[r],i[r],r,o)},findBy:function(e,t){for(var n=this.keys,i=this.items,r=0,o=i.length;o>r;r++)if(e.call(t||window,i[r],n[r]))return i[r];return null},insert:function(e,t,n){var i;return Ext.isIterable(t)?i=this.doInsert(e,t,n):(i=arguments.length>2?this.doInsert(e,[t],[n]):this.doInsert(e,[t]),i=i[0]),i},doInsert:function(e,t,n){var i,r,o,a,s,l,d,u=this,c=t.length,h=c,p=u.hasListeners.add,f={};if(null!=n)u.useLinearSearch=!0;else for(n=t,t=Array(c),o=0;c>o;o++)t[o]=this.getKey(n[o]);for(u.suspendEvents(),o=0;c>o;o++)i=t[o],r=u.indexOfKey(i),-1!==r&&(e>r&&e--,u.removeAt(r)),null!=i&&(null!=f[i]&&(s=!0,h--),f[i]=o);if(u.resumeEvents(),s){l=t,d=n,t=Array(h),n=Array(h),o=0;for(i in f)t[o]=l[f[i]],n[o]=d[f[i]],o++;c=h}for(a=e===u.length&&u.indexGeneration===u.generation,Ext.Array.insert(u.items,e,n),Ext.Array.insert(u.keys,e,t),u.length+=c,u.generation++,a&&(u.indexGeneration=u.generation),o=0;c>o;o++,e++)i=t[o],null!=i&&(u.map[i]=n[o],a&&(u.indexMap[i]=e)),p&&u.fireEvent("add",e,n[o],i);return n},remove:function(e){var t,n,i=this;return n=!i.useLinearSearch&&(t=i.getKey(e))?i.indexOfKey(t):Ext.Array.indexOf(i.items,e),-1===n?!1:i.removeAt(n)},removeAll:function(e){var t,n=this;if(e||n.hasListeners.remove)if(e)for(t=e.length-1;t>=0;--t)n.remove(e[t]);else for(;n.length;)n.removeAt(0);else n.length=n.items.length=n.keys.length=0,n.map={},n.indexMap={},n.generation++,n.indexGeneration=n.generation},removeAt:function(e){var t,n,i=this;return e<i.length&&e>=0?(i.length--,t=i.items[e],Ext.Array.erase(i.items,e,1),n=i.keys[e],void 0!==n&&delete i.map[n],Ext.Array.erase(i.keys,e,1),i.hasListeners.remove&&i.fireEvent("remove",t,n),i.generation++,t):!1},removeRange:function(e,t){var n,i,r,o,a,s,l=this;if(e<l.length&&e>=0){for(t||(t=1),o=Math.min(e+t,l.length),t=o-e,s=o===l.length,a=s&&l.indexGeneration===l.generation,r=e;o>r;r++)i=l.keys[r],null!=i&&(delete l.map[i],a&&delete l.indexMap[i]);return n=l.items[r-1],l.length-=t,l.generation++,a&&(l.indexGeneration=l.generation),s?l.items.length=l.keys.length=l.length:(l.items.splice(e,t),l.keys.splice(e,t)),n}return!1},removeAtKey:function(e){var t,n=this,i=n.keys;if(null!=e)return n.removeAt(n.indexOfKey(e));for(t=i.length-1;t>=0;t--)null==i[t]&&n.removeAt(t)},getCount:function(){return this.length},indexOf:function(e){var t,n=this;return null!=e?!n.useLinearSearch&&(t=n.getKey(e))?this.indexOfKey(t):Ext.Array.indexOf(n.items,e):-1},indexOfKey:function(e){return this.map.hasOwnProperty(e)?(this.indexGeneration!==this.generation&&this.rebuildIndexMap(),this.indexMap[e]):-1},rebuildIndexMap:function(){var e,t=this,n=t.indexMap={},i=t.keys,r=i.length;for(e=0;r>e;e++)n[i[e]]=e;t.indexGeneration=t.generation},get:function(e){var t=this,n=t.map[e],i=void 0!==n?n:"number"==typeof e?t.items[e]:void 0;return"function"!=typeof i||t.allowFunctions?i:null},getAt:function(e){return this.items[e]},getByKey:function(e){return this.map[e]},contains:function(e){var t,n=this;return null!=e?!n.useLinearSearch&&(t=n.getKey(e))?null!=this.map[t]:-1!==Ext.Array.indexOf(this.items,e):!1},containsKey:function(e){return this.map.hasOwnProperty(e)},clear:function(){var e=this;e.generation&&(e.length=0,e.items=[],e.keys=[],e.map={},e.indexMap={},e.generation++,e.indexGeneration=e.generation),e.hasListeners.clear&&e.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(e,t,n,i){var r,o=this.extractValues(e,t),a=o.length,s=0;for(n=n||0,i=i||0===i?i:a-1,r=n;i>=r;r++)s+=o[r];return s},collect:function(e,t,n){var i,r,o,a=this.extractValues(e,t),s=a.length,l={},d=[];for(o=0;s>o;o++)i=a[o],r=i+"",!n&&Ext.isEmpty(i)||l[r]||(l[r]=!0,d.push(i));return d},extractValues:function(e,t){var n=this.items;return t&&(n=Ext.Array.pluck(n,t)),Ext.Array.pluck(n,e)},hasRange:function(e,t){return t<this.length},getRange:function(e,t){var n,i,r=this,o=r.items,a=[],s=o.length;return 1>s?a:(e>t&&(i=!0,n=e,e=t,t=n),0>e&&(e=0),(null==t||t>=s)&&(t=s-1),a=o.slice(e,t+1),i&&a.length&&a.reverse(),a)},filter:function(e,t,n,i){var r=[];return Ext.isString(e)?r.push(new Ext.util.Filter({property:e,value:t,anyMatch:n,caseSensitive:i})):(Ext.isArray(e)||e instanceof Ext.util.Filter)&&(r=r.concat(e)),this.filterBy(Ext.util.Filter.createFilterFn(r))},filterBy:function(e,t){var n,i=this,r=new i.self(i.initialConfig),o=i.keys,a=i.items,s=a.length;for(r.getKey=i.getKey,n=0;s>n;n++)e.call(t||i,a[n],o[n])&&r.add(o[n],a[n]);return r.useLinearSearch=i.useLinearSearch,r},findIndex:function(e,t,n,i,r){return Ext.isEmpty(t,!1)?-1:(t=this.createValueMatcher(t,i,r),this.findIndexBy(function(n){return n&&t.test(n[e])},null,n))},findIndexBy:function(e,t,n){for(var i=this,r=i.keys,o=i.items,a=n||0,s=o.length;s>a;a++)if(e.call(t||i,o[a],r[a]))return a;return-1},createValueMatcher:function(e,t,n,i){if(!e.exec){var r=Ext.String.escapeRegex;e+="",t===!0?e=r(e):(e="^"+r(e),i===!0&&(e+="$")),e=RegExp(e,n?"":"i")}return e},clone:function(){var e=this,t=new e.self(e.initialConfig);return t.add(e.keys,e.items),t.useLinearSearch=e.useLinearSearch,t}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0),Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:!0,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:void 0},statics:{createComparator:function(e,t){return t=t||0,function(n,i){var r,o,a=e.isCollection?e.items:e,s=a.length;for(o=0;s>o;++o)if(r=a[o].sort(n,i))return r;return t&&t(n,i)}}},multiplier:1,constructor:function(e){this.initConfig(e)},getId:function(){var e=this._id;return e||(e=this.getProperty(),e||(e=Ext.id(null,"ext-sorter-")),this._id=e),e},sort:function(e,t){return this.multiplier*this.sortFn(e,t)},sortFn:function(e,t){var n,i,r=this,o=r._transform,a=r._root,s=r._property;return a&&(e=e[a],t=t[a]),n=e[s],i=t[s],o&&(n=o(n),i=o(i)),n>i?1:i>n?-1:0},applyDirection:function(e){return e?e:"ASC"},updateDirection:function(e){this.multiplier="DESC"===e.toUpperCase()?-1:1},updateProperty:function(e){e&&delete this.sortFn},updateSorterFn:function(e){this.sortFn=e},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){return{root:this.getRoot(),property:this.getProperty(),direction:this.getDirection()}},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0),Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:!0,$configPrefixed:!1,$configStrict:!1,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(e){return e&&e.length?function(t,n){for(var i=e[0].sort(t,n),r=e.length,o=1;!i&&r>o;o++)i=e[o].sort.call(this,t,n);return i}:function(){return 0}}},applySorters:function(e){var t=this,n=t.getSorters()||new Ext.util.MixedCollection(!1,Ext.returnId);return e&&n.addAll(t.decodeSorters(e)),n},sort:function(e,t,n,i){var r,o,a=this,s=a.getSorters();if(s||(a.setSorters(null),s=a.getSorters()),Ext.isArray(e)?(i=n,n=t):Ext.isObject(e)?(e=[e],i=n,n=t):Ext.isString(e)&&(r=s.get(e),r?null==t?r.toggle():r.setDirection(t):r={property:e,direction:t},e=[r]),e&&e.length)switch(e=a.decodeSorters(e),n){case"multi":s.insert(0,e[0]),o=s.getCount()-a.multiSortLimit,o>0&&s.removeRange(a.multiSortLimit,o);break;case"prepend":s.insert(0,e);break;case"append":s.addAll(e);break;case void 0:case null:case"replace":s.clear(),s.addAll(e)}return i!==!1&&(a.fireEvent("beforesort",a,e),a.onBeforeSort(e),a.getSorterCount()&&a.doSort(a.generateComparator())),e},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var e=this.getSorters().getRange();return e.length?this.createComparator(e):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(e){Ext.isArray(e)||(e=void 0===e?[]:[e]);var t,n,i,r=e.length,o=Ext.util.Sorter,a=this.getModel?this.getModel():this.model;for(i=0;r>i;i++)n=e[i],n instanceof o||(Ext.isString(n)&&(n={property:n}),Ext.applyIf(n,{root:this.sortRoot,direction:"ASC"}),n.fn&&(n.sorterFn=n.fn),"function"==typeof n&&(n={sorterFn:n}),a&&!n.transform&&(t=a.getField(n.property),n.transform=t&&t.sortType!==Ext.identityFn?t.sortType:void 0),e[i]=new Ext.util.Sorter(n));return e},getFirstSorter:function(){for(var e,t=this.getSorters().items,n=t.length,i=0;n>i;++i)if(e=t[i],!e.isGrouper)return e;return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}),Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){this.initConfig(),Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(e){this.sortBy(e)},_sort:function(e,t,n){var i,r,o,a=this,s="DESC"==(t+"").toUpperCase()?-1:1,l=[],d=a.keys,u=a.items;for(n=n||function(e,t){return e-t},i=0,r=u.length;r>i;i++)l[l.length]={key:d[i],value:u[i],index:i};for(Ext.Array.sort(l,function(t,i){return n(t[e],i[e])*s||(t.index<i.index?-1:1)}),i=0,r=l.length;r>i;i++)o=l[i],u[i]=o.value,d[i]=o.key,a.indexMap[o.key]=i;a.generation++,a.indexGeneration=a.generation,a.fireEvent("sort",a)},sortBy:function(e){var t,n,i,r=this,o=r.items,a=r.keys,s=o.length;for(i=0;s>i;i++)o[i].$extCollectionIndex=i;for(Ext.Array.sort(o,function(t,n){return e(t,n)||(t.$extCollectionIndex<n.$extCollectionIndex?-1:1)}),i=0;s>i;i++)t=o[i],n=r.getKey(t),a[i]=n,r.indexMap[n]=i,delete o.$extCollectionIndex;r.generation++,r.indexGeneration=r.generation,r.fireEvent("sort",r,o,a)},findInsertionIndex:function(e,t){var n,i,r=this,o=r.items,a=0,s=o.length-1;for(t||(t=r.generateComparator());s>=a;)n=a+s>>1,i=t(e,o[n]),i>=0?a=n+1:0>i&&(s=n-1);return a},reorder:function(e){var t,n=this,i=n.items,r=0,o=i.length,a=[],s=[];n.suspendEvents();for(t in e)a[e[t]]=i[t];for(r=0;o>r;r++)void 0==e[r]&&s.push(i[r]);for(r=0;o>r;r++)void 0==a[r]&&(a[r]=s.shift());n.clear(),n.addAll(a),n.resumeEvents(),n.fireEvent("sort",n)},sortByKey:function(e,t){this._sort("key",e,t||function(e,t){var n=(e+"").toUpperCase(),i=(t+"").toUpperCase();return n>i?1:i>n?-1:0})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0),Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(e){var t=this;"number"==typeof e?t.interval=e:e&&Ext.apply(t,e),t.tasks=[],t.timerFn=Ext.Function.bind(t.onTick,t)},newTask:function(e){var t=new Ext.util.TaskRunner.Task(e);return t.manager=this,t},start:function(e){var t=this,n=Ext.Date.now();return e.pending||(t.tasks.push(e),e.pending=!0),e.stopped=!1,e.taskStartTime=n,e.taskRunTime=e.fireOnStart!==!1?0:e.taskStartTime,e.taskRunCount=0,t.firing||(e.fireOnStart!==!1?t.startTimer(0,n):t.startTimer(e.interval,n)),e},stop:function(e){return e.stopped||(e.stopped=!0,e.onStop&&e.onStop.call(e.scope||e,e)),e},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:!1,nextExpires:1e99,onTick:function(){var e,t,n,i,r,o,a,s=this,l=s.tasks,d=Ext.Date.now(),u=1e99,c=l.length,h=Ext.GlobalEvents;for(s.timerId=null,s.firing=!0,n=0;c>n||n<(c=l.length);++n){if(i=l[n],!(o=i.stopped)){if(e=i.taskRunTime+i.interval,d>=e){r=1,a=i.hasOwnProperty("fireIdleEvent")?i.fireIdleEvent:s.fireIdleEvent;try{r=i.run.apply(i.scope||i,i.args||[++i.taskRunCount])}catch(p){try{i.onError&&(r=i.onError.call(i.scope||i,i,p))}catch(f){}}i.taskRunTime=d,r===!1||i.taskRunCount===i.repeat?(s.stop(i),o=!0):(o=i.stopped,e=d+i.interval)}!o&&i.duration&&i.duration<=d-i.taskStartTime&&(s.stop(i),o=!0)}o?(i.pending=!1,t||(t=l.slice(0,n))):(t&&t.push(i),u>e&&(u=e))}t&&(s.tasks=t),s.firing=!1,s.tasks.length&&s.startTimer(u-d,Ext.Date.now()),a!==!1&&h.hasListeners.idle&&h.fireEvent("idle")},startTimer:function(e,t){var n=this,i=t+e,r=n.timerId;r&&n.nextExpires-i>n.interval&&(clearTimeout(r),r=null),r||(e<n.interval&&(e=n.interval),n.timerId=Ext.defer(n.timerFn,e),n.nextExpires=i)}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){
var e=this,t=e.prototype;t.destroy=t.stopAll,e.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(e){Ext.apply(this,e)},restart:function(e){void 0!==e&&(this.interval=e),this.manager.start(this)},start:function(e){this.stopped&&this.restart(e)},stop:function(){this.manager.stop(this)}}),t=e.Task.prototype,t.destroy=t.stop}),Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:!0,constructor:function(e){this.target=e,this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0),Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(e,t,n){return void 0===n&&(n="x"===t?e.getX():"y"===t?e.getY():"scrollTop"===t?e.getScroll().top:"scrollLeft"===t?e.getScroll().left:"height"===t?e.getHeight():"width"===t?e.getWidth():e.getStyle(t)),n},getAttr:function(e,t){var n=this.target;return[[n,this.getElVal(n,e,t)]]},setAttr:function(e){var t,n,i,r,o,a,s=e.length;for(r=0;s>r;r++){t=e[r].attrs;for(n in t)if(t.hasOwnProperty(n))for(a=t[n].length,o=0;a>o;o++)i=t[n][o],this.setElVal(i[0],n,i[1])}},setElVal:function(e,t,n){"x"===t?e.setX(n):"y"===t?e.setY(n):"scrollTop"===t?e.scrollTo("top",n):"scrollLeft"===t?e.scrollTo("left",n):"width"===t?e.setWidth(n):"height"===t?e.setHeight(n):e.setStyle(t,n)}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0),Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(e,t){var n,i,r,o,a,s,l,d,u,c={attrs:[],duration:[],easing:[]},h=e.length,p=function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},f={single:!0};for(l=0;h>l;l++){i=e[l],a=i.duration,o=i.easing,i=i.attrs;for(r in i)-1==Ext.Array.indexOf(c.attrs,r)&&(c.attrs.push(r.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})),c.duration.push(a+"ms"),c.easing.push(o))}for(n=c.attrs.join(","),a=c.duration.join(","),o=c.easing.join(", "),l=0;h>l;l++){i=e[l].attrs;for(r in i)for(u=i[r].length,d=0;u>d;d++)s=i[r][d],s[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",t?"":n),s[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",t?"":a),s[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",t?"":o),s[0].setStyle(r,s[1]),t?s=s[0].dom.offsetWidth:s[0].on(Ext.supports.CSS3TransitionEnd,p,s[0],f)}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0),Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:!0,constructor:function(e){e.id=e.id||Ext.id(null,"ext-composite-"),Ext.fx.target.Element.prototype.constructor.call(this,e)},getAttr:function(e,t){var n,i,r=[],o=this.target,a=o.elements,s=a.length;for(n=0;s>n;n++)i=a[n],i&&(i=o.getElement(i),r.push([i,this.getElVal(i,e,t)]));return r},setAttr:function(e){var t,n,i,r,o,a,s,l,d=this.target,u=e.length,c=d.elements,h=c.length;for(a=0;u>a;a++){i=e[a].attrs;for(r in i)if(i.hasOwnProperty(r))for(l=i[r].length,s=0;l>s;s++)for(t=i[r][s][1],n=0;h>n;++n)o=c[n],o&&(o=d.getElement(o),this.setElVal(o,r,t))}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0),Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0),Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(e,t){var n;switch(t){case"rotate":case"rotation":return n=e.attr.rotation,{x:n.x||0,y:n.y||0,degrees:n.degrees||0};case"scale":case"scaling":return n=e.attr.scaling,{x:n.x||1,y:n.y||1,cx:n.cx||0,cy:n.cy||0};case"translate":case"translation":return n=e.attr.translation,{x:n.x||0,y:n.y||0};default:return e.attr[t]}},getAttr:function(e,t){return[[this.target,void 0!==t?t:this.getFromPrim(this.target,e)]]},setAttr:function(e){var t,n,i,r,o,a,s,l,d,u,c,h,p=e.length,f=[];for(l=0;p>l;l++){t=e[l].attrs;for(n in t)for(i=t[n],h=i.length,d=0;h>d;d++)o=i[d][0],r=i[d][1],"translate"===n||"translation"===n?s={x:r.x,y:r.y}:"rotate"===n||"rotation"===n?(u=r.x,isNaN(u)&&(u=null),c=r.y,isNaN(c)&&(c=null),s={degrees:r.degrees,x:u,y:c}):"scale"===n||"scaling"===n?(u=r.x,isNaN(u)&&(u=null),c=r.y,isNaN(c)&&(c=null),s={x:u,y:c,cx:r.cx,cy:r.cy}):s="width"===n||"height"===n||"x"===n||"y"===n?parseFloat(r):r,a=Ext.Array.indexOf(f,o),-1===a&&(f.push([o,{}]),a=f.length-1),f[a][1][n]=s}for(p=f.length,l=0;p>l;l++)f[l][0].setAttributes(f[l][1]);this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0),Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(e,t){var n,i,r=[],o=[].concat(this.target.items),a=o.length;for(n=0;a>n;n++)i=o[n],r.push([i,void 0!==t?t:this.getFromPrim(i,e)]);return r}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0),Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(!0)[1]},left:function(){return this.getPosition(!0)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(e,t){return[[this.target,void 0!==t?t:this.getPropMethod[e].call(this.target)]]},setAttr:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p,f=this,g=e.length,m={};for(a=0;g>a;a++){i=e[a].attrs;for(r in i)for(l=i[r].length,s=0;l>s;s++)o=i[r][s],p=m[f.setMethods[r]]||(m[f.setMethods[r]]={}),p.target=o[0],p[r]=o[1];m.setPosition&&(o=m.setPosition,d=void 0===o.left?void 0:parseFloat(o.left),u=void 0===o.top?void 0:parseFloat(o.top),o.target.setPosition(d,u)),m.setPagePosition&&(o=m.setPagePosition,o.target.setPagePosition(o.x,o.y)),m.setSize&&(o=m.setSize,c=void 0===o.width?o.target.getWidth():parseFloat(o.width),h=void 0===o.height?o.target.getHeight():parseFloat(o.height),o.target.el.setSize(c,h),(n||f.dynamic)&&Ext.GlobalEvents.on({idle:Ext.Function.bind(o.target.setSize,o.target,[c,h]),single:!0})),m.setOpacity&&(o=m.setOpacity,o.target.el.setStyle("opacity",o.opacity))}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0),Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap,this.fxQueue={}},getFxDefaults:function(e){var t=this.targets.get(e);return t?t.fxDefaults:{}},setFxDefaults:function(e,t){var n=this.targets.get(e);n&&(n.fxDefaults=Ext.apply(n.fxDefaults||{},t))},stopAnimation:function(e){for(var t=this,n=t.getFxQueue(e),i=n.length;i;)n[i-1].end(),i--},getActiveAnimation:function(e){var t=this.getFxQueue(e);return t&&t.length?t[0]:!1},hasFxBlock:function(e){var t=this.getFxQueue(e);return t&&t[0]&&t[0].block},getFxQueue:function(e){if(!e)return!1;var t=this,n=t.fxQueue[e],i=t.targets.get(e);return i?(n||(t.fxQueue[e]=[],"element"!==i.type&&i.target.on("destroy",function(){t.fxQueue[e]=[]})),t.fxQueue[e]):!1},queueFx:function(e){var t,n,i=this,r=e.target;r&&(t=i.getFxQueue(r.getId()),n=t.length,n?e.concurrent?e.paused=!1:t[n-1].on("afteranimate",function(){e.paused=!1}):e.paused=!1,e.on("afteranimate",function(){if(Ext.Array.remove(t,e),0===t.length&&i.targets.remove(e.target),e.remove&&"element"===r.type){var n=Ext.get(r.id);n&&n.destroy()}},i,{single:!0}),t.push(e))}},1,0,0,0,0,0,[Ext.fx,"Queue"],0),Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:!0,constructor:function(){var e=this;e.items=new Ext.util.MixedCollection,e.targetArr={},e.mixins.queue.constructor.call(e),e.taskRunner=new Ext.util.TaskRunner},interval:16,forceJS:!0,createTarget:function(e){var t,n=this,i=!n.forceJS&&Ext.supports.Transitions;if(n.useCSS3=i,e){if(e.tagName||Ext.isString(e)||e.isFly)e=Ext.get(e),t=new Ext.fx.target["Element"+(i?"CSS":"")](e);else if(e.dom)t=new Ext.fx.target["Element"+(i?"CSS":"")](e);else if(e.isComposite)t=new Ext.fx.target["CompositeElement"+(i?"CSS":"")](e);else if(e.isSprite)t=new Ext.fx.target.Sprite(e);else if(e.isCompositeSprite)t=new Ext.fx.target.CompositeSprite(e);else{if(!e.isComponent)return e.isAnimTarget?e:null;t=new Ext.fx.target.Component(e)}return n.targets.add(t),t}return null},addAnim:function(e){var t=this,n=t.items,i=t.task;n.add(e.id,e),!i&&n.length&&(i=t.task={run:t.runner,interval:t.interval,scope:t},t.taskRunner.start(i))},removeAnim:function(e){var t=this,n=t.items,i=t.task;n.removeAtKey(e.id),i&&!n.length&&(t.taskRunner.stop(i),delete t.task)},runner:function(){var e,t=this,n=t.items.getRange(),i=0,r=n.length;for(t.targetArr={},t.timestamp=new Date;r>i;i++)e=n[i],e.isReady()&&t.startAnim(e);for(i=0;r>i;i++)e=n[i],e.isRunning()&&t.runAnim(e);t.applyPendingAttrs()},startAnim:function(e){e.start(this.timestamp)},runAnim:function(e,t){if(e){var n,i,r=this,o=r.useCSS3&&"element"===e.target.type,a=r.timestamp-e.startTime,s=a>=e.duration;return t&&(a=e.duration,s=!0),n=this.collectTargetData(e,a,o,s),o&&(e.target.setAttr(n.anims[e.id].attributes,!0),r.collectTargetData(e,e.duration,o,s),e.paused=!0,n=e.target.target,e.target.isComposite&&(n=e.target.target.last()),i={},i[Ext.supports.CSS3TransitionEnd]=e.lastFrame,i.scope=e,i.single=!0,n.on(i)),n}},jumpToEnd:function(e){var t=this.runAnim(e,!0);this.applyAnimAttrs(t,t.anims[e.id])},collectTargetData:function(e,t,n,i){var r=e.target.getId(),o=this.targetArr[r];return o||(o=this.targetArr[r]={id:r,el:e.target,anims:{}}),o.anims[e.id]={id:e.id,anim:e,elapsed:t,isLastFrame:i,attributes:[{duration:e.duration,easing:n&&e.reverse?e.easingFn.reverse().toCSS3():e.easing,attrs:e.runAnim(t)}]},o},applyAnimAttrs:function(e,t){var n=t.anim;t.attributes&&n.isRunning()&&(e.el.setAttr(t.attributes,!1,t.isLastFrame),t.isLastFrame&&n.lastFrame())},applyPendingAttrs:function(){var e,t,n,i,r,o=this.targetArr;for(t in o)if(o.hasOwnProperty(t)){e=o[t];for(r in e.anims)e.anims.hasOwnProperty(r)&&(n=e.anims[r],i=n.anim,n.attributes&&i.isRunning()&&(e.el.setAttr(n.attributes,!1,n.isLastFrame),n.isLastFrame&&i.lastFrame()))}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0),Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(e){var t=this;e=Ext.apply(t,e||{}),t.config=e,t.id=Ext.id(null,"ext-animator-"),t.mixins.observable.constructor.call(t,e),t.timeline=[],t.createTimeline(t.keyframes),t.target&&(t.applyAnimator(t.target),Ext.fx.Manager.addAnim(t))},sorter:function(e,t){return e.pct-t.pct},createTimeline:function(e){var t,n,i,r,o,a,s=this,l=[],d=s.to||{},u=s.duration;for(o in e)e.hasOwnProperty(o)&&s.animKeyFramesRE.test(o)&&(a={attrs:Ext.apply(e[o],d)},"from"===o?o=0:"to"===o&&(o=100),a.pct=parseInt(o,10),l.push(a));for(Ext.Array.sort(l,s.sorter),r=l.length,i=0;r>i;i++)t=l[i-1]?u*(l[i-1].pct/100):0,n=u*(l[i].pct/100),s.timeline.push({duration:n-t,attrs:l[i].attrs})},applyAnimator:function(e){var t,n,i,r,o,a=this,s=[],l=a.timeline,d=l.length;if(a.fireEvent("beforeanimate",a)!==!1){for(o=0;d>o;o++)t=l[o],r=t.attrs,n=r.easing||a.easing,i=r.damper||a.damper,delete r.easing,delete r.damper,t=new Ext.fx.Anim({target:e,easing:n,damper:i,duration:t.duration,paused:!0,to:r}),s.push(t);for(a.animations=s,a.target=t.target,o=0;d-1>o;o++)t=s[o],t.nextAnim=s[o+1],t.on("afteranimate",function(){this.nextAnim.paused=!1}),t.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},a);s[d-1].on("afteranimate",function(){this.lastFrame()},a)}},start:function(e){var t,n=this,i=n.delay,r=n.delayStart;if(i){if(!r)return void(n.delayStart=e);if(t=e-r,i>t)return;e=new Date(r.getTime()+i)}n.fireEvent("beforeanimate",n)!==!1&&(n.startTime=e,n.running=!0,n.animations[n.keyframeStep].paused=!1)},lastFrame:function(){var e=this,t=e.iterations,n=e.currentIteration;n++,t>n?(e.startTime=new Date,e.currentIteration=n,e.keyframeStep=0,e.applyAnimator(e.target),e.animations[e.keyframeStep].paused=!1):(e.currentIteration=0,e.end())},end:function(){var e=this;e.fireEvent("afteranimate",e,e.startTime,new Date-e.startTime)},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return!1}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0),Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:!0,cubicBezierAtTime:function(e,t,n,i,r,o){function a(e){return((c*e+u)*e+d)*e}function s(e,t){var n=l(e,t);return((f*n+p)*n+h)*n}function l(e,t){var n,i,r,o,s,l;for(r=e,l=0;8>l;l++){if(o=a(r)-e,Math.abs(o)<t)return r;if(s=(3*c*r+2*u)*r+d,Math.abs(s)<1e-6)break;r-=o/s}if(n=0,i=1,r=e,n>r)return n;if(r>i)return i;for(;i>n;){if(o=a(r),Math.abs(o-e)<t)return r;e>o?n=r:i=r,r=(i-n)/2+n}return r}var d=3*t,u=3*(i-t)-d,c=1-d-u,h=3*n,p=3*(r-n)-h,f=1-h-p;return s(e,1/(200*o))},cubicBezier:function(e,t,n,i){var r=function(r){return Ext.fx.CubicBezier.cubicBezierAtTime(r,e,t,n,i,1)};return r.toCSS3=function(){return"cubic-bezier("+[e,t,n,i].join(",")+")"},r.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-n,1-i,1-e,1-t)},r}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0),Ext.cmd.derive("Ext.fx.Easing",Ext.Base,function(){var e=Math,t=e.PI,n=e.pow,i=e.sin,r=e.sqrt,o=e.abs,a=1.70158;return{singleton:!0,linear:Ext.identityFn,ease:function(e){var t=.07813-e/2,i=r(.0066+t*t),a=i-t,s=n(o(a),1/3)*(0>a?-1:1),l=-i-t,d=n(o(l),1/3)*(0>l?-1:1),u=s+d+.25;return 3*n(1-u,2)*u*.1+3*(1-u)*u*u+u*u*u},easeIn:function(e){return n(e,1.7)},easeOut:function(e){return n(e,.48)},easeInOut:function(e){var t=.48-e/1.04,i=r(.1734+t*t),a=i-t,s=n(o(a),1/3)*(0>a?-1:1),l=-i-t,d=n(o(l),1/3)*(0>l?-1:1),u=s+d+.5;return 3*(1-u)*u*u+u*u*u},backIn:function(e){return e*e*((a+1)*e-a)},backOut:function(e){return e-=1,e*e*((a+1)*e+a)+1},elasticIn:function(e){if(0===e||1===e)return e;var r=.3,o=r/4;return n(2,-10*e)*i((e-o)*(2*t)/r)+1},elasticOut:function(e){return 1-Ext.fx.Easing.elasticIn(1-e)},bounceIn:function(e){return 1-Ext.fx.Easing.bounceOut(1-e)},bounceOut:function(e){var t,n=7.5625,i=2.75;return 1/i>e?t=n*e*e:2/i>e?(e-=1.5/i,t=n*e*e+.75):2.5/i>e?(e-=2.25/i,t=n*e*e+.9375):(e-=2.625/i,t=n*e*e+.984375),t}}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(e){var t=e.self,n=t.prototype;t.addMembers({"back-in":n.backIn,"back-out":n.backOut,"ease-in":n.easeIn,"ease-out":n.easeOut,"elastic-in":n.elasticIn,"elastic-out":n.elasticOut,"bounce-in":n.bounceIn,"bounce-out":n.bounceOut,"ease-in-out":n.easeInOut})}),Ext.cmd.derive("Ext.fx.DrawPath",Ext.Base,{singleton:!0,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(e,t){return t=(t+"").toLowerCase(),"object"==t&&e===Object(e)||"undefined"==t&&typeof e==t||"null"==t&&null===e||"array"==t&&Array.isArray&&Array.isArray(e)||Object.prototype.toString.call(e).toLowerCase().slice(8,-1)==t},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(e){return e.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(e){if(!e)return null;var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=[],i=this;return i.is(e,"array")&&i.is(e[0],"array")&&(n=i.pathClone(e)),n.length||(e+"").replace(i.pathCommandRE,function(e,r,o){var a=[],s=r.toLowerCase();for(o.replace(i.pathValuesRE,function(e,t){t&&a.push(+t)}),"m"==s&&a.length>2&&(n.push([r].concat(Ext.Array.splice(a,0,2))),s="l",r="m"==r?"l":"L");a.length>=t[s]&&(n.push([r].concat(Ext.Array.splice(a,0,t[s]))),t[s]););}),n.toString=i.path2string,n},pathClone:function(e){var t,n,i,r,o=[];for(this.is(e,"array")&&this.is(e&&e[0],"array")||(e=this.parsePathString(e)),i=0,r=e.length;r>i;i++)for(o[i]=[],t=0,n=e[i].length;n>t;t++)o[i][t]=e[i][t];return o.toString=this.path2string,o},pathToAbsolute:function(e){this.is(e,"array")&&this.is(e&&e[0],"array")||(e=this.parsePathString(e));var t,n,i,r,o=[],a=0,s=0,l=0,d=0,u=0,c=e.length;for(c&&"M"==e[0][0]&&(a=+e[0][1],s=+e[0][2],l=a,d=s,u++,o[0]=["M",a,s]);c>u;u++){if(t=o[u]=[],n=e[u],n[0]!=n[0].toUpperCase())switch(t[0]=n[0].toUpperCase(),t[0]){case"A":t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=+(n[6]+a),t[7]=+(n[7]+s);break;case"V":t[1]=+n[1]+s;break;case"H":t[1]=+n[1]+a;break;case"M":l=+n[1]+a,d=+n[2]+s;default:for(i=1,r=n.length;r>i;i++)t[i]=+n[i]+(i%2?a:s)}else for(i=0,r=n.length;r>i;i++)o[u][i]=n[i];switch(t[0]){case"Z":a=l,s=d;break;case"H":a=t[1];break;case"V":s=t[1];break;case"M":n=o[u],r=n.length,l=n[r-2],d=n[r-1];default:n=o[u],r=n.length,a=n[r-2],s=n[r-1]}}return o.toString=this.path2string,o},interpolatePaths:function(e,t){var n,i,r,o,a,s,l=this,d=l.pathToAbsolute(e),u=l.pathToAbsolute(t),c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)Ext.Array.splice(e,t++,0,["C"].concat(Ext.Array.splice(n,0,6)));Ext.Array.erase(e,t,1),i=Math.max(d.length,u.length||0)}},f=function(e,t,n,r,o){e&&t&&"M"==e[o][0]&&"M"!=t[o][0]&&(Ext.Array.splice(t,o,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],i=Math.max(d.length,u.length||0))};for(n=0,i=Math.max(d.length,u.length||0);i>n;n++)d[n]=l.command2curve(d[n],c),p(d,n),u[n]=l.command2curve(u[n],h),p(u,n),f(d,u,c,h,n),f(u,d,h,c,n),r=d[n],o=u[n],a=r.length,s=o.length,c.x=r[a-2],c.y=r[a-1],c.bx=parseFloat(r[a-4])||c.x,c.by=parseFloat(r[a-3])||c.y,h.bx=parseFloat(o[s-4])||h.x,h.by=parseFloat(o[s-3])||h.y,h.x=o[s-2],h.y=o[s-1];return[d,u]},command2curve:function(e,t){var n=this;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch("T"!=e[0]&&"Q"!=e[0]&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(n.arc2curve.apply(n,[t.x,t.y].concat(e.slice(1))));break;case"S":e=["C",t.x+(t.x-(t.bx||t.x)),t.y+(t.y-(t.by||t.y))].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(n.quadratic2curve(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(n.quadratic2curve(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(t.x,t.y,e[1],e[2],e[1],e[2]);break;case"H":e=["C"].concat(t.x,t.y,e[1],t.y,e[1],t.y);break;case"V":e=["C"].concat(t.x,t.y,t.x,e[1],t.x,e[1]);break;case"Z":e=["C"].concat(t.x,t.y,t.X,t.Y,t.X,t.Y)}return e},quadratic2curve:function(e,t,n,i,r,o){var a=1/3,s=2/3;return[a*e+s*n,a*t+s*i,a*r+s*n,a*o+s*i,r,o]},rotate:function(e,t,n){var i=Math.cos(n),r=Math.sin(n),o=e*i-t*r,a=e*r+t*i;return{x:o,y:a}},arc2curve:function(e,t,n,i,r,o,a,s,l,d){var u,c,h,p,f,g,m,x,v,y,E,b,C,w,S,T,P,I,k,B,M,D,R,A,F,L,O,V,N,H=this,z=Math.PI,W=H.radian,_=120*z/180,U=W*(+r||0),j=[],q=Math,G=q.cos,K=q.sin,X=q.sqrt,$=q.abs,Y=q.asin;if(d?(y=d[0],E=d[1],x=d[2],v=d[3]):(u=H.rotate(e,t,-U),e=u.x,t=u.y,u=H.rotate(s,l,-U),s=u.x,l=u.y,c=(e-s)/2,h=(t-l)/2,p=c*c/(n*n)+h*h/(i*i),p>1&&(p=X(p),n=p*n,i=p*i),f=n*n,g=i*i,m=(o==a?-1:1)*X($((f*g-f*h*h-g*c*c)/(f*h*h+g*c*c))),x=m*n*h/i+(e+s)/2,v=m*-i*c/n+(t+l)/2,y=Y(((t-v)/i).toFixed(7)),E=Y(((l-v)/i).toFixed(7)),y=x>e?z-y:y,E=x>s?z-E:E,0>y&&(y=2*z+y),0>E&&(E=2*z+E),a&&y>E&&(y-=2*z),!a&&E>y&&(E-=2*z)),b=E-y,$(b)>_&&(O=E,V=s,N=l,E=y+_*(a&&E>y?1:-1),s=x+n*G(E),l=v+i*K(E),j=H.arc2curve(s,l,n,i,r,0,a,V,N,[E,O,x,v])),b=E-y,C=G(y),w=K(y),S=G(E),T=K(E),P=q.tan(b/4),I=4/3*n*P,k=4/3*i*P,B=[e,t],M=[e+I*w,t-k*C],D=[s+I*T,l-k*S],R=[s,l],M[0]=2*B[0]-M[0],M[1]=2*B[1]-M[1],d)return[M,D,R].concat(j);for(j=[M,D,R].concat(j).join().split(","),A=[],L=j.length,F=0;L>F;F++)A[F]=F%2?H.rotate(j[F-1],j[F],U).y:H.rotate(j[F],j[F+1],U).x;return A}},0,0,0,0,0,0,[Ext.fx,"DrawPath"],0),Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(e,t,n,i,r){n="number"==typeof n?n:1;var o,a,s=this.unitRE,l=s.exec(e);return l&&(e=l[1],a=l[2],this.scrollRE.test(r)||a||!this.pixelDefaultsRE.test(r)||(a="px")),e=+e||0,l=s.exec(t),l&&(t=l[1],a=l[2]||a),t=+t||0,o=null!=i?i:e,{from:e,delta:(t-o)*n,units:a}},get:function(e,t,n,i,r){var o,a,s,l,d,u=e.length,c=[];for(o=0;u>o;o++)if(i&&(a=i[o][1].from),Ext.isArray(e[o][1])&&Ext.isArray(t)){for(s=[],l=0,d=e[o][1].length;d>l;l++)s.push(this.computeDelta(e[o][1][l],t[l],n,a,r));c.push([e[o][0],s])}else c.push([e[o][0],this.computeDelta(e[o][1],t,n,a,r)]);return c},set:function(e,t){var n,i,r,o,a,s=e.length,l=[];for(n=0;s>n;n++)if(i=e[n][1],Ext.isArray(i)){for(r=[],a=0,o=i.length;o>a;a++)r.push(i[a].from+i[a].delta*t+(i[a].units||0));l.push([e[n][0],r])}else l.push([e[n][0],i.from+i.delta*t+(i.units||0)]);return l}},stringHandler:{computeDelta:function(e,t){return{from:e,delta:t}},get:function(e,t,n,i,r){var o,a,s=e.length,l=[];for(o=0;s>o;o++)l.push([e[o][0],this.computeDelta(e[o][1],t,n,a,r)]);return l},set:function(e){var t,n,i=e.length,r=[];for(t=0;i>t;t++)n=e[t][1],r.push([e[t][0],n.delta]);return r}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(e,t){t="number"==typeof t?t:1;var n,i,r,o,a=!1,s=[this.hexRE,this.rgbRE,this.hex3RE],l=s.length;for(o=0;l>o;o++)if(r=s[o],i=o%2===0?16:10,n=r.exec(e),n&&4===n.length){2===o&&(n[1]+=n[1],n[2]+=n[2],n[3]+=n[3]),a={red:parseInt(n[1],i),green:parseInt(n[2],i),blue:parseInt(n[3],i)};break}return a||e},computeDelta:function(e,t,n,i){e=this.parseColor(e),t=this.parseColor(t,n);var r=i?i:e,o=typeof r,a=typeof t;return"string"===o||"undefined"===o||"string"===a||"undefined"===a?t||r:{from:e,delta:{red:Math.round((t.red-r.red)*n),green:Math.round((t.green-r.green)*n),blue:Math.round((t.blue-r.blue)*n)}}},get:function(e,t,n,i){var r,o,a=e.length,s=[];for(r=0;a>r;r++)i&&(o=i[r][1].from),s.push([e[r][0],this.computeDelta(e[r][1],t,n,o)]);return s},set:function(e,t){var n,i,r,o,a,s=e.length,l=[];for(n=0;s>n;n++)if(i=e[n][1]){if(o=i.from,a=i.delta,i="object"==typeof i&&"red"in i?"rgb("+i.red+", "+i.green+", "+i.blue+")":i,i="object"==typeof i&&i.length?i[0]:i,void 0===i)return[];r="string"==typeof i?i:"rgb("+[(o.red+Math.round(a.red*t))%256,(o.green+Math.round(a.green*t))%256,(o.blue+Math.round(a.blue*t))%256].join(",")+")",l.push([e[n][0],r])}return l}},object:{interpolate:function(e,t){t="number"==typeof t?t:1;var n,i={};for(n in e)i[n]=parseFloat(e[n])*t;return i},computeDelta:function(e,t,n,i){e=this.interpolate(e),t=this.interpolate(t,n);var r,o=i?i:e,a={};for(r in t)a[r]=t[r]-o[r];return{from:e,delta:a}},get:function(e,t,n,i){var r,o,a=e.length,s=[];for(r=0;a>r;r++)i&&(o=i[r][1].from),s.push([e[r][0],this.computeDelta(e[r][1],t,n,o)]);return s},set:function(e,t){var n,i,r,o,a,s=e.length,l=[],d={};for(n=0;s>n;n++){o=e[n][1],i=o.from,r=o.delta;for(a in i)d[a]=i[a]+r[a]*t;l.push([e[n][0],d])}return l}},path:{computeDelta:function(e,t,n,i){n="number"==typeof n?n:1;var r;return e=+e||0,t=+t||0,r=null!=i?i:e,{from:e,delta:(t-r)*n}},forcePath:function(e){return Ext.isArray(e)||Ext.isArray(e[0])||(e=Ext.fx.DrawPath.parsePathString(e)),e},get:function(e,t,n,i){var r,o,a,s,l,d,u,c,h,p=this.forcePath(t),f=[],g=e.length;for(a=0;g>a;a++){for(h=this.forcePath(e[a][1]),s=Ext.fx.DrawPath.interpolatePaths(h,p),h=s[0],p=s[1],r=h.length,c=[],d=0;r>d;d++){for(s=[h[d][0]],o=h[d].length,u=1;o>u;u++)l=i&&i[0][1][d][u].from,s.push(this.computeDelta(h[d][u],p[d][u],n,l));c.push(s)}f.push([e[a][0],c])}return f},set:function(e,t){var n,i,r,o,a,s,l,d,u=e.length,c=[];for(n=0;u>n;n++){for(s=e[n][1],o=[],l=s.length,i=0;l>i;i++){for(a=[s[i][0]],d=s[i].length,r=1;d>r;r++)a.push(s[i][r].from+s[i][r].delta*t);o.push(a.join(","))}c.push([e[n][0],o.join(",")])}return c}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){for(var e,t=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],n=t.length,i=0;n>i;i++)e=t[i],this[e]=this.color;for(t=["cursor"],n=t.length,i=0;n>i;i++)e=t[i],this[e]=this.stringHandler}),Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,autoEnd:!1,alternate:!1,currentIteration:0,startTime:0,frameCount:0,constructor:function(e){var t,n=this;return e=e||{},e.keyframes?new Ext.fx.Animator(e):(Ext.apply(n,e),void 0===n.from&&(n.from={}),n.propHandlers={},n.config=e,n.target=Ext.fx.Manager.createTarget(n.target),n.easingFn=Ext.fx.Easing[n.easing],n.target.dynamic=n.dynamic,n.easingFn||(n.easingFn=(n.easing+"").match(n.bezierRE),n.easingFn&&5===n.easingFn.length&&(t=n.easingFn,n.easingFn=Ext.fx.CubicBezier.cubicBezier(+t[1],+t[2],+t[3],+t[4]))),n.id=Ext.id(null,"ext-anim-"),n.mixins.observable.constructor.call(n),Ext.fx.Manager.addAnim(n),void(e.autoEnd&&(n.running=!0,n.jumpToEnd())))},setAttr:function(e,t){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,e,t)},initAttrs:function(){var e,t,n,i,r=this,o=r.from,a=r.to,s=r.initialFrom||{},l={};for(i in a)a.hasOwnProperty(i)&&(e=r.target.getAttr(i,o[i]),t=a[i],n=Ext.fx.PropertyHandler[i]?r.propHandlers[i]=Ext.fx.PropertyHandler[i]:Ext.isObject(t)?r.propHandlers[i]=Ext.fx.PropertyHandler.object:r.propHandlers[i]=Ext.fx.PropertyHandler.defaultHandler,l[i]=n.get(e,t,r.damper,s[i],i));r.currentAttrs=l},start:function(e){var t,n=this,i=n.delay,r=n.delayStart;if(i){if(!r)return void(n.delayStart=e);if(t=e-r,i>t)return;e=new Date(r.getTime()+i)}n.fireEvent("beforeanimate",n)!==!1&&(n.startTime=e,n.paused||n.currentAttrs||n.initAttrs(),n.running=!0,n.frameCount=0)},jumpToEnd:function(){var e=this;e.endWasCalled||(e.currentAttrs||e.initAttrs(),Ext.fx.Manager.jumpToEnd(e),e.end())},runAnim:function(e){var t,n,i,r,o=this,a=o.currentAttrs,s=o.duration,l=o.easingFn,d=o.propHandlers,u={};e>=s&&(e=s,r=!0),o.reverse&&(e=s-e);for(i in a)a.hasOwnProperty(i)&&(n=a[i],t=r?1:l(e/s),u[i]=d[i].set(n,t));return o.frameCount++,u},lastFrame:function(){var e=this,t=e.iterations,n=e.currentIteration;n++,t>n?(e.alternate&&(e.reverse=!e.reverse),e.startTime=new Date,e.currentIteration=n,e.paused=!1):(e.currentIteration=0,e.end(),e.fireEvent("lastframe",e,e.startTime))},endWasCalled:0,end:function(){var e=this;e.endWasCalled++||(e.startTime=0,e.paused=!1,e.running=!1,Ext.fx.Manager.removeAnim(e),e.fireEvent("afteranimate",e,e.startTime),Ext.callback(e.callback,e.scope,[e,e.startTime]),e.remove&&e.target.destroy())},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return this.paused===!1&&this.running===!0&&this.isAnimator!==!0}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0),Ext.enableFx=!0,Ext.cmd.derive("Ext.util.Animate",Ext.Base,{mixinId:"animate",isAnimate:!0,animate:function(e){var t=this;return Ext.fx.Manager.hasFxBlock(t.id)?t:(Ext.fx.Manager.queueFx(new Ext.fx.Anim(t.anim(e))),this)},anim:function(e){if(!Ext.isObject(e))return e?{}:!1;var t=this;return e.stopAnimation&&t.stopAnimation(),Ext.applyIf(e,Ext.fx.Manager.getFxDefaults(t.id)),Ext.apply({target:t,paused:!0},e)},getAnimationProps:function(){var e=this,t=e.layout;return t&&t.animate?t.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){return Ext.fx.Manager.stopAnimation(this.id),this},syncFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0}),this},sequenceFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1}),this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],0),Ext.cmd.derive("Ext.dom.Fly",Ext.dom.Element,{alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:!0,constructor:function(e){this.dom=e,this.el=this},attach:function(e){var t=this;return e?(t.dom=e,Ext.cache[e.id]||(t.getData().isSynchronized=!1),t):t.detach()},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,"Fly",Ext.dom.Element,"Fly"],function(e){var t={};e.cache=t,Ext.fly=function(n,i){var r,o,a=null,s=Ext.fly;return i=i||s.caller&&s.caller.$name||"_global",n=Ext.getDom(n),n&&(r=n.nodeType,(e.prototype.validNodeTypes[r]||!r&&n.window==n)&&(a=Ext.cache[n.id],a&&a.dom===n||(a=t[i]||(t[i]=new e),a.dom=n,o=a.getData(!0),o&&(o.isSynchronized=!1)))),a}}),Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite"],isComposite:!0,isLite:!0,statics:{importElementMethods:function(){var e=Ext.dom.Element,t=this.prototype;Ext.Object.each(e.prototype,function(e,n){"function"!=typeof n||t[e]||(t[e]=function(){return this.invoke(e,arguments)})})}},constructor:function(e,t){t?this.elements=e||[]:(this.elements=[],this.add(e))},getElement:function(e){var t=this._fly||(this._fly=new Ext.dom.Fly);return t.attach(e)},transformElement:function(e){return Ext.getDom(e)},getCount:function(){return this.elements.length},add:function(e,t){var n,i,r=this.elements;if(!e)return this;for("string"==typeof e?e=Ext.fly(t||document).query(e):e.isComposite?e=e.elements:Ext.isIterable(e)||(e=[e]),n=0,i=e.length;i>n;++n)r.push(this.transformElement(e[n]));return this},invoke:function(e,t){var n,i,r,o=this,a=o.elements,s=a.length;if(0!==r)for(n=(o.isLite?Ext.dom.Fly:Ext.dom.Element).prototype,r=0;s>r;r++)i=a[r],i&&n[e].apply(o.getElement(i),t);return o},item:function(e){var t=this.elements[e],n=null;return t&&(n=this.getElement(t)),n},slice:function(e,t){return Ext.Array.slice(this.elements,e,t)},each:function(e,t){var n,i,r=this,o=r.elements,a=o.length;for(n=0;a>n&&(i=o[n],!i||(i=this.getElement(i),e.call(t||i,i,r,n)!==!1));n++);return r},fill:function(e){var t=this;return t.elements=[],t.add(e),t},insert:function(e,t){Ext.Array.insert(this.elements,e,t)},filter:function(e){for(var t,n,i=this,r=i.elements,o=r.length,a=[],s=0,l="function"==typeof e;o>s;s++)n=r[s],t=!1,n&&(n=i.getElement(n),t=l?e.call(n,n,i,s)!==!1:n.is(e),t&&a.push(i.transformElement(n)));return i.elements=a,i},indexOf:function(e){return Ext.Array.indexOf(this.elements,this.transformElement(e))},replaceElement:function(e,t,n){var i,r=isNaN(e)?this.indexOf(e):e;return r>-1&&(t=Ext.getDom(t),n&&(i=this.elements[r],i.parentNode.insertBefore(t,i),Ext.removeNode(i)),Ext.Array.splice(this.elements,r,1,t)),this},clear:function(e){var t=this,n=t.elements,i=n.length-1;if(e)for(;i>=0;i--)Ext.removeNode(n[i]);this.elements=[]},addElements:function(e,t){if(!e)return this;"string"==typeof e&&(e=Ext.dom.Element.selectorFunction(e,t));var n,i=this.elements,r=e.length;for(n=0;r>n;n++)i.push(Ext.get(e[n]));return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(e){return-1!=this.indexOf(e)},removeElement:function(e,t){e=[].concat(e);var n,i,r,o=this,a=o.elements,s=e.length;for(r=0;s>r;r++)n=e[r],(i=a[n]||a[n=o.indexOf(n)])&&(t&&(i.dom?i.destroy():Ext.removeNode(i)),Ext.Array.erase(a,n,1));return o},destroy:function(){return this.invoke("destroy",arguments)}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(e){var t=e.prototype;e.importElementMethods(),t.on=t.addListener}),Ext.define("Ext.overrides.dom.Element",function(){var e,t=window,n=document,i="hidden",r="isClipped",o="overflow",a="overflow-x",s="overflow-y",l="originalClip",d="height",u="width",c="visibility",h="display",p="none",f="offsets",g="originalDisplay",m="visibilityMode",x="isVisible",v="x-hidden-offsets",y='<div class="{0}-tl" role="presentation"><div class="{0}-tr" role="presentation"><div class="{0}-tc" role="presentation"></div></div></div><div class="{0}-ml" role="presentation"><div class="{0}-mr" role="presentation"><div class="{0}-mc" role="presentation"></div></div></div><div class="{0}-bl" role="presentation"><div class="{0}-br" role="presentation"><div class="{0}-bc" role="presentation"></div></div></div>',E=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,b=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,C=/\ssrc=([\'\"])(.*?)\1/i,w=/\S/,S=/\stype=([\'\"])(.*?)\1/i,T=/^-ms-/,P=/(-[a-z])/gi,I=function(e,t){
return t.charAt(1).toUpperCase()},k="x-masked",B="x-masked-relative",M="x-mask-msg",D=/^body/i,R={},A=function(e){var t=e.getData(),n=t[g];return void 0===n&&(t[g]=n=""),n},F=function(t){var n=t.getData(),i=n[m];return void 0===i&&(n[m]=i=e.VISIBILITY),i},L=n.createRange?n.createRange():null,O={INPUT:!0,TEXTAREA:!0};if(Ext.isIE8){var V=Ext.removeNode,N=n.createElement("div"),H=[],z=Ext.Function.createBuffered(function(){var e,t=H.length;for(e=0;t>e;e++)N.appendChild(H[e]);N.innerHTML="",H.length=0},10);Ext.removeNode=function(e){e=e.dom||e,V(e),H[H.length]=e,z()}}return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:!1,_init:function(t){e=t},statics:{selectableCls:"x-selectable",unselectableCls:"x-unselectable",tabIndexAttributeName:Ext.isIE8?"tabIndex":"tabindex",tabbableSelector:'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:!0,IFRAME:!0,EMBED:!0,INPUT:!0,OBJECT:!0,SELECT:!0,TEXTAREA:!0,HTML:Ext.isIE?!0:!1},naturallyTabbableTags:{BUTTON:!0,IFRAME:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,OBJECT:Ext.isIE8m?!0:!1},tabbableSavedFlagAttribute:"data-tabindexsaved",tabbableSavedAttribute:"data-savedtabindex",normalize:function(e){return"float"===e&&(e=Ext.supports.Float?"cssFloat":"styleFloat"),R[e]||(R[e]=e.replace(T,"ms-").replace(P,I))},getViewportHeight:function(){return Ext.isIE9m?n.documentElement.clientHeight:t.innerHeight},getViewportWidth:function(){return Ext.isStrict||Ext.isOpera?Ext.isIE9m?n.documentElement.clientWidth:t.innerWidth:document.body.clientWidth}},addClsOnClick:function(e,t,n){var i=this,r=i.dom,o=Ext.isFunction(t);return i.on("mousedown",function(){if(o&&t.call(n||i,i)===!1)return!1;Ext.fly(r).addCls(e);var a=Ext.getDoc(),s=function(){Ext.fly(r).removeCls(e),a.removeListener("mouseup",s)};a.on("mouseup",s)}),i},addClsOnFocus:function(e,t,n){var i=this,r=i.dom,o=Ext.isFunction(t);return i.on("focus",function(){return o&&t.call(n||i,i)===!1?!1:void Ext.fly(r).addCls(e)}),i.on("blur",function(){Ext.fly(r).removeCls(e)}),i},addClsOnOver:function(e,t,n){var i=this,r=i.dom,o=Ext.isFunction(t);return i.hover(function(){o&&t.call(n||i,i)===!1||Ext.fly(r).addCls(e)},function(){Ext.fly(r).removeCls(e)}),i},addKeyListener:function(e,t,n){var i;return i="object"!=typeof e||Ext.isArray(e)?{target:this,key:e,fn:t,scope:n}:{target:this,key:e.key,shift:e.shift,ctrl:e.ctrl,alt:e.alt,fn:t,scope:n},new Ext.util.KeyMap(i)},addKeyMap:function(e){return new Ext.util.KeyMap(Ext.apply({target:this},e))},afterAnimate:function(){var e=this.shadow;!e||e.disabled||e.animate||e.show()},anchorAnimX:function(e){var t="l"===e?"right":"left";this.dom.style[t]="0px"},anim:function(e){if(!Ext.isObject(e))return e?{}:!1;var t,n=this,i=e.duration||Ext.fx.Anim.prototype.duration,r=e.easing||"ease";return e.stopAnimation&&n.stopAnimation(),Ext.applyIf(e,Ext.fx.Manager.getFxDefaults(n.id)),Ext.fx.Manager.setFxDefaults(n.id,{delay:0}),t={target:n.dom,remove:e.remove,alternate:e.alternate||!1,duration:i,easing:r,callback:e.callback,listeners:e.listeners,iterations:e.iterations||1,scope:e.scope,block:e.block,concurrent:e.concurrent,delay:e.delay||0,paused:!0,keyframes:e.keyframes,from:e.from||{},to:Ext.apply({},e)},Ext.apply(t.to,e.to),delete t.to.to,delete t.to.from,delete t.to.remove,delete t.to.alternate,delete t.to.keyframes,delete t.to.iterations,delete t.to.listeners,delete t.to.target,delete t.to.paused,delete t.to.callback,delete t.to.scope,delete t.to.duration,delete t.to.easing,delete t.to.concurrent,delete t.to.block,delete t.to.stopAnimation,delete t.to.delay,t},animate:function(e){var t,n,i,r=this,o=r.dom.id||Ext.id(r.dom);return Ext.fx.Manager.hasFxBlock(o)||(e.listeners&&(t=e.listeners,delete e.listeners),e.internalListeners&&(e.listeners=e.internalListeners,delete e.internalListeners),i=e.autoEnd,delete e.autoEnd,n=new Ext.fx.Anim(r.anim(e)),n.on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:r,single:!0}),t&&n.on(t),Ext.fx.Manager.queueFx(n),i&&n.jumpToEnd()),r},beforeAnimate:function(){var e=this.shadow;!e||e.disabled||e.animate||e.hide()},boxWrap:function(e){e=e||"x-box";var t=Ext.get(this.insertHtml("beforeBegin","<div class='"+e+"' role='presentation'>"+Ext.String.format(y,e)+"</div>"));return t.selectNode("."+e+"-mc").appendChild(this.dom),t},clean:function(e){var t,n=this,i=n.dom,r=n.getData(),o=i.firstChild,a=-1;if(r.isCleaned&&e!==!0)return n;for(;o;)t=o.nextSibling,3===o.nodeType?w.test(o.nodeValue)?t&&3===t.nodeType&&(o.appendData(Ext.String.trim(t.data)),i.removeChild(t),t=o.nextSibling,o.nodeIndex=++a):i.removeChild(o):(Ext.fly(o,"_clean").clean(),o.nodeIndex=++a),o=t;return r.isCleaned=!0,n},empty:L?function(){var e=this.dom;e.firstChild&&(L.setStartBefore(e.firstChild),L.setEndAfter(e.lastChild),L.deleteContents())}:function(){for(var e=this.dom;e.lastChild;)e.removeChild(e.lastChild)},clearListeners:function(){this.removeAnchor(),arguments.callee.$previous.call(this)},clearPositioning:function(e){return e=e||"",this.setStyle({left:e,right:e,top:e,bottom:e,"z-index":"",position:"static"})},createProxy:function(t,n,i){t="object"==typeof t?t:{tag:"div",role:"presentation",cls:t};var r=this,o=n?Ext.DomHelper.append(n,t,!0):Ext.DomHelper.insertBefore(r.dom,t,!0);return o.setVisibilityMode(e.DISPLAY),o.hide(),i&&r.setBox&&r.getBox&&o.setBox(r.getBox()),o},clearOpacity:function(){return this.setOpacity("")},clip:function(){var e,t=this,n=t.getData();return n[r]||(n[r]=!0,e=t.getStyle([o,a,s]),n[l]={o:e[o],x:e[a],y:e[s]},t.setStyle(o,i),t.setStyle(a,i),t.setStyle(s,i)),t},destroy:function(){var e,t,n=this,i=n.dom,r=n.getData();i&&n.isAnimate&&n.stopAnimation(),arguments.callee.$previous.call(this),i&&Ext.isIE8&&i.window!=i&&9!==i.nodeType&&"BODY"!==i.tagName&&"HTML"!==i.tagName&&(H[H.length]=i,z()),r&&(e=r.maskEl,t=r.maskMsg,e&&e.destroy(),t&&t.destroy())},enableDisplayMode:function(t){var n=this;return n.setVisibilityMode(e.DISPLAY),void 0!==t&&(n.getData()[g]=t),n},fadeIn:function(e){var t=this,n=t.dom;return t.animate(Ext.apply({},e,{opacity:1,internalListeners:{beforeanimate:function(){var e=Ext.fly(n,"_anim");e.isStyle("display","none")?e.setDisplayed(""):e.show()}}})),this},fadeOut:function(e){var t=this,n=t.dom;return e=Ext.apply({opacity:0,internalListeners:{afteranimate:function(t){if(n&&0===t.to.opacity){var i=Ext.fly(n,"_anim");e.useDisplay?i.setDisplayed(!1):i.hide()}}}},e),t.animate(e),t},fixDisplay:function(){var e=this;e.isStyle(h,p)&&(e.setStyle(c,i),e.setStyle(h,A(e)),e.isStyle(h,p)&&e.setStyle(h,"block"))},frame:function(e,t,n){var i,r=this,o=r.dom;return e=e||"#C3DAF9",t=t||1,n=n||{},i=function(){var i,r,a,s=Ext.fly(o,"_anim"),l=this;s.show(),i=s.getBox(),r=Ext.getBody().createChild({role:"presentation",id:s.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35e3,border:"0px solid "+e}}),a=new Ext.fx.Anim({target:r,duration:n.duration||1e3,iterations:t,from:{top:i.y,left:i.x,borderWidth:0,opacity:1,height:i.height,width:i.width},to:{top:i.y-20,left:i.x-20,borderWidth:10,opacity:0,height:i.height+40,width:i.width+40}}),a.on("afteranimate",function(){r.destroy(),l.end()})},r.animate({duration:2*Math.max(n.duration,500)||2e3,listeners:{beforeanimate:{fn:i}},callback:n.callback,scope:n.scope}),r},getColor:function(e,t,n){var i,r,o=this.getStyle(e),a=n||""===n?n:"#",s=0;if(!o||/transparent|inherit/.test(o))return t;if(/^r/.test(o))for(o=o.slice(4,o.length-1).split(","),r=o.length;r>s;s++)i=parseInt(o[s],10),a+=(16>i?"0":"")+i.toString(16);else o=o.replace("#",""),a+=3===o.length?o.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):o;return a.length>5?a.toLowerCase():t},getLoader:function(){var e=this,t=e.getData(),n=t.loader;return n||(t.loader=n=new Ext.ElementLoader({target:e})),n},getPositioning:function(e){var t=this.getStyle(["left","top","position","z-index"]),n=this.dom;return e&&("auto"===t.left&&(t.left=n.offsetLeft+"px"),"auto"===t.top&&(t.top=n.offsetTop+"px")),t},ghost:function(e,t){var n,i=this,r=i.dom;return e=e||"b",n=function(){var t=Ext.fly(r,"_anim"),n=t.getWidth(),i=t.getHeight(),o=t.getXY(),a=t.getPositioning(),s={opacity:0};switch(e){case"t":s.y=o[1]-i;break;case"l":s.x=o[0]-n;break;case"r":s.x=o[0]+n;break;case"b":s.y=o[1]+i;break;case"tl":s.x=o[0]-n,s.y=o[1]-i;break;case"bl":s.x=o[0]-n,s.y=o[1]+i;break;case"br":s.x=o[0]+n,s.y=o[1]+i;break;case"tr":s.x=o[0]+n,s.y=o[1]-i}this.to=s,this.on("afteranimate",function(){var e=Ext.fly(r,"_anim");e&&(e.hide(),e.clearOpacity(),e.setPositioning(a))})},i.animate(Ext.applyIf(t||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:n}})),i},hide:function(e){return"string"==typeof e?(this.setVisible(!1,e),this):(this.setVisible(!1,this.anim(e)),this)},highlight:function(e,n){var i,r,o,a,s,l,d=this,u=d.dom,c={};return n=n||{},a=n.listeners||{},o=n.attr||"backgroundColor",c[o]=e||"ffff9c",n.to?r=n.to:(r={},r[o]=n.endColor||d.getColor(o,"ffffff","")),n.listeners=Ext.apply(Ext.apply({},a),{beforeanimate:function(){i=u.style[o];var e=Ext.fly(u,"_anim");return e.clearOpacity(),e.show(),s=a.beforeanimate,s?(l=s.fn||s,l.apply(s.scope||a.scope||t,arguments)):void 0},afteranimate:function(){u&&(u.style[o]=i),s=a.afteranimate,s&&(l=s.fn||s,l.apply(s.scope||a.scope||t,arguments))}}),d.animate(Ext.apply({},n,{duration:1e3,easing:"ease-in",from:c,to:r})),d},hover:function(e,t,n,i){var r=this;return r.on("mouseenter",e,n||r.dom,i),r.on("mouseleave",t,n||r.dom,i),r},initDD:function(e,t,n){var i=new Ext.dd.DD(Ext.id(this.dom),e,t);return Ext.apply(i,n)},initDDProxy:function(e,t,n){var i=new Ext.dd.DDProxy(Ext.id(this.dom),e,t);return Ext.apply(i,n)},initDDTarget:function(e,t,n){var i=new Ext.dd.DDTarget(Ext.id(this.dom),e,t);return Ext.apply(i,n)},isFocusable:function(){var e,t=this.dom,n=!1;return t&&!t.disabled&&(e=t.nodeName,n=!!Ext.Element.naturallyFocusableTags[e]||("A"===e||"LINK"===e)&&!!t.href||null!=t.getAttribute("tabindex")||"true"===t.contentEditable,Ext.isIE8&&"INPUT"===e&&"hidden"===t.type&&(n=!1),n=n&&this.isVisible(!0)),n},isInputField:function(){var e=this.dom,t=e.contentEditable;return O[e.tagName]&&"button"!==e.type||""===t||"true"===t?!0:!1},isTabbable:function(){var e,t,n,i=this.dom,r=!1;return i&&!i.disabled&&(e=i.nodeName,n=i.getAttribute("tabindex"),t=null!=n,n-=0,"A"===e||"LINK"===e?r=i.href?t&&0>n?!1:!0:"true"===i.contentEditable?!t||t&&n>=0?!0:!1:t&&n>=0?!0:!1:"true"===i.contentEditable||Ext.Element.naturallyTabbableTags[e]?r=t&&0>n?!1:!0:t&&n>=0&&(r=!0),Ext.isIE8&&"INPUT"===e&&"hidden"===i.type&&(r=!1),r=r&&(!this.component||this.component.isVisible(!0))&&this.isVisible(!0)),r},isMasked:function(e){var t,n=this,i=n.getData(),r=i.maskEl,o=i.maskMsg,a=!1;if(r&&r.isVisible())o&&o.center(n),a=!0;else if(e&&(t=n.findParentNode()))return Ext.fly(t).isMasked(e);return a},isScrollable:function(){var e=this.dom;return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},load:function(e){return this.getLoader().load(e),this},mask:function(e,t,i){var r,o=this,a=o.dom,s=o.getData(),l=s.maskEl;return D.test(a.tagName)&&"static"===o.getStyle("position")||o.addCls(B),l&&l.destroy(),l=Ext.DomHelper.append(a,{role:"presentation",cls:"x-mask x-border-box",children:{role:"presentation",cls:t?M+" "+t:M,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:e||""}}}},!0),r=Ext.get(l.dom.firstChild),s.maskEl=l,o.addCls(k),l.setDisplayed(!0),"string"==typeof e?(r.setDisplayed(!0),r.center(o)):r.setDisplayed(!1),a===n.body?l.addCls("x-mask-fixed"):o.saveTabbableState(),o.saveChildrenTabbableState(),Ext.isIE9m&&a!==n.body&&o.isStyle("height","auto")&&l.setSize(void 0,i||o.getHeight()),l},monitorMouseLeave:function(e,t,n){var i,r=this,o={mouseleave:function(o){Ext.isIE9m&&o.enableIEAsync(),i=Ext.defer(t,e,n||r,[o])},mouseenter:function(){clearTimeout(i)}};return r.on(o),o},puff:function(e){var t,n=this,i=n.dom,r=n.getBox(),o=n.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],!0);return e=Ext.applyIf(e||{},{easing:"ease-out",duration:500,useDisplay:!1}),t=function(){var t=Ext.fly(i,"_anim");t.clearOpacity(),t.show(),this.to={width:2*r.width,height:2*r.height,x:r.x-r.width/2,y:r.y-r.height/2,opacity:0,fontSize:"200%"},this.on("afteranimate",function(){var t=Ext.fly(i,"_anim");t&&(e.useDisplay?t.setDisplayed(!1):t.hide(),t.setStyle(o),Ext.callback(e.callback,e.scope))})},n.animate({duration:e.duration,easing:e.easing,listeners:{beforeanimate:{fn:t}}}),n},selectable:function(){var t=this;return t.dom.unselectable="",t.removeCls(e.unselectableCls),t.addCls(e.selectableCls),t},setCapture:function(){var e=this.dom;Ext.isIE9m&&e.setCapture&&e.setCapture()},setDisplayed:function(e){var t=this;return"boolean"==typeof e&&(e=e?A(t):p),t.setStyle(h,e),(t.shadow||t.shim)&&t.setUnderlaysVisible(e!==p),t},setHeight:function(e,t){var n=this;return t&&n.anim?(Ext.isObject(t)||(t={}),n.animate(Ext.applyIf({to:{height:e}},t))):arguments.callee.$previous.apply(this,arguments),n},setHorizontal:function(){var e=this,t=e.verticalCls;delete e.vertical,t&&(delete e.verticalCls,e.removeCls(t)),delete e.setWidth,delete e.setHeight,Ext.isIE8||(delete e.getWidth,delete e.getHeight),delete e.styleHooks},updateText:function(e){var t,i,r=this;t&&(i=t.firstChild,(!i||3!==i.nodeType||i.nextSibling)&&(i=n.createTextNode(),r.empty(),t.appendChild(i)),e&&(i.data=e))},setHtml:function(e,i,r){var o,a,s,l=this;return l.dom?(e=e||"",a=l.dom,i!==!0?(a.innerHTML=e,Ext.callback(r,l),l):(o=Ext.id(),e+='<span id="'+o+'" role="presentation"></span>',s=Ext.interval(function(){var i,a,d,u,c,h,p;if(!(h=n.getElementById(o)))return!1;for(clearInterval(s),Ext.removeNode(h),i=Ext.getHead().dom;a=E.exec(e);)d=a[1],u=d?d.match(C):!1,u&&u[2]?(p=n.createElement("script"),p.src=u[2],c=d.match(S),c&&c[2]&&(p.type=c[2]),i.appendChild(p)):a[2]&&a[2].length>0&&(t.execScript||t.eval)(a[2]);Ext.callback(r,l)},20),a.innerHTML=e.replace(b,""),l)):l},setOpacity:function(e,t){var n=this;return n.dom?(t&&n.anim?("object"!=typeof t&&(t={duration:350,easing:"ease-in"}),n.animate(Ext.applyIf({to:{opacity:e}},t))):n.setStyle("opacity",e),n):n},setPositioning:function(e){return this.setStyle(e)},setVertical:function(t,n){var i=this,r=e.prototype;i.vertical=!0,n&&i.addCls(i.verticalCls=n),i.setWidth=r.setHeight,i.setHeight=r.setWidth,Ext.isIE8||(i.getWidth=r.getHeight,i.getHeight=r.getWidth),i.styleHooks=270===t?r.verticalStyleHooks270:r.verticalStyleHooks90},setSize:function(t,n,i){var r=this;return Ext.isObject(t)&&(i=n,n=t.height,t=t.width),i&&r.anim?(i===!0&&(i={}),r.animate(Ext.applyIf({to:{width:t,height:n}},i))):(r.dom.style.width=e.addUnits(t),r.dom.style.height=e.addUnits(n),(r.shadow||r.shim)&&r.syncUnderlays()),r},setVisible:function(t,n){var r=this,o=r.dom,a=F(r);if("string"==typeof n){switch(n){case h:a=e.DISPLAY;break;case c:a=e.VISIBILITY;break;case f:a=e.OFFSETS}r.setVisibilityMode(a),n=!1}if(n&&r.anim)t&&(r.setOpacity(.01),r.setVisible(!0)),Ext.isObject(n)||(n={duration:350,easing:"ease-in"}),r.animate(Ext.applyIf({callback:function(){t||Ext.fly(o).setVisible(!1).setOpacity(1)},to:{opacity:t?1:0}},n));else{if(a===e.DISPLAY)return r.setDisplayed(t);a===e.OFFSETS?r[t?"removeCls":"addCls"](v):a===e.VISIBILITY&&(r.fixDisplay(),o.style.visibility=t?"":i)}return r.getData()[x]=t,(r.shadow||r.shim)&&r.setUnderlaysVisible(t),r},setWidth:function(e,t){var n=this;return t&&n.anim?(Ext.isObject(t)||(t={}),n.animate(Ext.applyIf({to:{width:e}},t))):arguments.callee.$previous.apply(this,arguments),n},setX:function(e,t){return this.setXY([e,this.getY()],t)},setXY:function(e,t){var n=this;return t&&n.anim?(Ext.isObject(t)||(t={}),n.animate(Ext.applyIf({to:{x:e[0],y:e[1]}},t))):arguments.callee.$previous.call(this,e),this},setY:function(e,t){return this.setXY([this.getX(),e],t)},show:function(e){return"string"==typeof e?(this.setVisible(!0,e),this):(this.setVisible(!0,this.anim(e)),this)},slideIn:function(e,t,n){var i,r,o,a,s=this,l=s.dom,d=l.style;return e=e||"t",t=t||{},i=function(){var i,u,c,h,p=this,f=t.listeners,g=Ext.fly(l,"_anim");switch(n||g.fixDisplay(),i=g.getBox(),"t"!=e&&"b"!=e||0!==i.height?"l"!=e&&"r"!=e||0!==i.width||(i.width=l.scrollWidth):i.height=l.scrollHeight,u=g.getStyle(["width","height","left","right","top","bottom","position","z-index"],!0),g.setSize(i.width,i.height),t.preserveScroll&&(o=g.cacheScrollValues()),h=g.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+g.dom.id,style:{visibility:n?"visible":"hidden"}}),a=h.dom.parentNode,h.setPositioning(g.getPositioning()),h.isStyle("position","static")&&h.position("relative"),g.clearPositioning("auto"),h.clip(),o&&o(),g.setStyle({visibility:"",position:"absolute"}),n&&h.setSize(i.width,i.height),e){case"t":c={from:{width:i.width+"px",height:"0px"},to:{width:i.width+"px",height:i.height+"px"}},d.bottom="0px";break;case"l":c={from:{width:"0px",height:i.height+"px"},to:{width:i.width+"px",height:i.height+"px"}},s.anchorAnimX(e);break;case"r":c={from:{x:i.x+i.width,width:"0px",height:i.height+"px"},to:{x:i.x,width:i.width+"px",height:i.height+"px"}},s.anchorAnimX(e);break;case"b":c={from:{y:i.y+i.height,width:i.width+"px",height:"0px"},to:{y:i.y,width:i.width+"px",height:i.height+"px"}};break;case"tl":c={from:{x:i.x,y:i.y,width:"0px",height:"0px"},to:{width:i.width+"px",height:i.height+"px"}},d.bottom="0px",s.anchorAnimX("l");break;case"bl":c={from:{y:i.y+i.height,width:"0px",height:"0px"},to:{y:i.y,width:i.width+"px",height:i.height+"px"}},s.anchorAnimX("l");break;case"br":c={from:{x:i.x+i.width,y:i.y+i.height,width:"0px",height:"0px"},to:{x:i.x,y:i.y,width:i.width+"px",height:i.height+"px"}},s.anchorAnimX("r");break;case"tr":c={from:{x:i.x+i.width,width:"0px",height:"0px"},to:{x:i.x,width:i.width+"px",height:i.height+"px"}},d.bottom="0px",s.anchorAnimX("r")}h.show(),r=Ext.apply({},t),delete r.listeners,r=new Ext.fx.Anim(Ext.applyIf(r,{target:h,duration:500,easing:"ease-out",from:n?c.to:c.from,to:n?c.from:c.to})),r.on("afteranimate",function(){var e=Ext.fly(l,"_anim");e.setStyle(u),n&&(t.useDisplay?e.setDisplayed(!1):e.hide()),h.dom&&(h.dom.parentNode?h.dom.parentNode.insertBefore(e.dom,h.dom):a.appendChild(e.dom),h.destroy()),o&&o(),p.end()}),f&&r.on(f)},s.animate({duration:t.duration?2*Math.max(t.duration,500):1e3,listeners:{beforeanimate:i}}),s},slideOut:function(e,t){return this.slideIn(e,t,!0)},swallowEvent:function(e,t){var n,i,r=this,o=function(e){e.stopPropagation(),t&&e.preventDefault()};if(Ext.isArray(e)){for(i=e.length,n=0;i>n;n++)r.on(e[n],o);return r}return r.on(e,o),r},switchOff:function(e){var t,n=this,i=n.dom;return e=Ext.applyIf(e||{},{easing:"ease-in",duration:500,remove:!1,useDisplay:!1}),t=function(){var t,n,r=Ext.fly(i,"_anim"),o=this,a=r.getSize(),s=r.getXY();r.clearOpacity(),r.clip(),n=r.getPositioning(),t=new Ext.fx.Animator({target:i,duration:e.duration,easing:e.easing,keyframes:{33:{opacity:.3},66:{height:1,y:s[1]+a.height/2},100:{width:1,x:s[0]+a.width/2}}}),t.on("afteranimate",function(){var t=Ext.fly(i,"_anim");e.useDisplay?t.setDisplayed(!1):t.hide(),t.clearOpacity(),t.setPositioning(n),t.setSize(a),o.end()})},n.animate({duration:2*Math.max(e.duration,500),listeners:{beforeanimate:{fn:t}},callback:e.callback,scope:e.scope}),n},syncContent:function(e){e=Ext.getDom(e);var t,n,i,r,o,a,s,l=e.childNodes,d=l.length,u=this.dom,c=u.childNodes,h=c.length,p=u._extData;if(Ext.isIE9m&&u.mergeAttributes)u.mergeAttributes(e,!0),u.src=e.src;else for(o=e.attributes,a=o.length,t=0;a>t;t++)s=o[t].name,"id"!==s&&u.setAttribute(s,o[t].value);if(p&&(p.isSynchronized=!1),d!==h)return void(u.innerHTML=e.innerHTML);for(t=0;d>t;t++){if(i=l[t],n=c[t],r=i.nodeType,r!==n.nodeType||1===r&&i.tagName!==n.tagName)return void(u.innerHTML=e.innerHTML);3===r?n.data=i.data:(i.id&&n.id!==i.id&&(n.id=i.id),n.style.cssText=i.style.cssText,n.className=i.className,Ext.fly(n,"_syncContent").syncContent(i))}},toggle:function(e){var t=this;return t.setVisible(!t.isVisible(),t.anim(e)),t},unmask:function(){var e,t=this,i=t.getData(),r=i.maskEl;r&&(e=r.dom.style,e.clearExpression&&(e.clearExpression("width"),e.clearExpression("height")),r&&(r.destroy(),delete i.maskEl),t.removeCls([k,B])),t.restoreChildrenTabbableState(),t.dom!==n.body&&t.restoreTabbableState()},unclip:function(){var e,t=this,n=t.getData();return n[r]&&(n[r]=!1,e=n[l],e.o&&t.setStyle(o,e.o),e.x&&t.setStyle(a,e.x),e.y&&t.setStyle(s,e.y)),t},translate:function(e,t){Ext.supports.CssTransforms&&!Ext.isIE9m?arguments.callee.$previous.apply(this,arguments):(null!=e&&(this.dom.style.left=e+"px"),null!=t&&(this.dom.style.top=t+"px"))},unselectable:function(){var t=this;return Ext.isOpera&&(t.dom.unselectable="on"),t.removeCls(e.selectableCls),t.addCls(e.unselectableCls),t},privates:{needsTabIndex:function(){var e,t,n=this.dom;return n?(e=n.nodeName,t=!!Ext.Element.naturallyFocusableTags[e]||("A"===e||"LINK"===e)&&!!n.href||null!=n.getAttribute("tabindex")||"true"===n.contentEditable,!t):void 0},findTabbableElements:function(e,t,n,i){e=void 0!=e?e:!0;var r,o=this;return r=o.selectTabbableElements(e,t,n,i),o.isTabbable()&&r.unshift(e?o.dom:o),r},selectTabbableElements:function(e,t,n,i){var r,o,a,s,l,d,u,c,h=[];if(e=void 0!=e?e:!0,r=this.dom.querySelectorAll(t||Ext.Element.tabbableSelector),l=r.length,!l)return h;for(i?(s=l-1,d=0,u=-1):(s=0,d=l-1,u=1);!(u>0&&s>d||0>u&&d>s);s+=u)if(o=r[s],c=o.getAttribute("tabindex")-0,0>c||(a=e?Ext.fly(o):Ext.get(o),a.isTabbable()&&h.push(e?o:a)),h.length>=n)return h;return h},selectFirstTabbableElement:function(e,t){var n=this.selectTabbableElements(e,t,1,!1);return n[0]},selectLastTabbableElement:function(e,t){var n=this.selectTabbableElements(!0,t,1,!0)[0];return e!==!1?n:Ext.get(n)},saveTabbableState:function(e){var t=Ext.Element.tabbableSavedFlagAttribute,n=this.dom;return n.hasAttribute(t)?void 0:(e=e||Ext.Element.tabbableSavedAttribute,n.hasAttribute("tabindex")?n.setAttribute(e,n.getAttribute("tabindex")):n.setAttribute(e,"none"),n.setAttribute("tabindex",-1),n.setAttribute(t,!0),this)},restoreTabbableState:function(e){var t,n=Ext.Element.tabbableSavedFlagAttribute,i=this.dom;return e=e||Ext.Element.tabbableSavedAttribute,i.hasAttribute(n)&&i.hasAttribute(e)?(t=i.getAttribute(e),"none"===t?i.removeAttribute("tabindex"):i.setAttribute("tabindex",t),i.removeAttribute(e),i.removeAttribute(n),this):void 0},saveChildrenTabbableState:function(e){var t,n,i,r;if(this.dom)for(t=this.selectTabbableElements(),i=0,r=t.length;r>i;i++)n=Ext.fly(t[i]),n.saveTabbableState(e);return t},restoreChildrenTabbableState:function(e,t){var n,i,r;if(this.dom)for(e=e||Ext.Element.tabbableSavedAttribute,t=t||this.dom.querySelectorAll("["+e+"]"),i=0,r=t.length;r>i;i++)n=Ext.fly(t[i]),n.restoreTabbableState(e);return t}},deprecated:{"4.0":{methods:{pause:function(e){var t=this;return Ext.fx.Manager.setFxDefaults(t.id,{delay:e}),t},scale:function(e,t,n){return this.animate(Ext.apply({},n,{width:e,height:t})),this},shift:function(e){return this.animate(e),this}}},4.2:{methods:{moveTo:function(e,t,n){return this.setXY([e,t],n)},setBounds:function(e,t,n,i,r){return this.setBox({x:e,y:t,width:n,height:i},r)},setLeftTop:function(t,n){var i=this,r=i.dom.style;return r.left=e.addUnits(t),r.top=e.addUnits(n),(i.shadow||i.shim)&&i.syncUnderlays(),i},setLocation:function(e,t,n){return this.setXY([e,t],n)}}},"5.0":{methods:{getAttributeNS:function(e,t){return this.getAttribute(t,e)},getCenterXY:function(){return this.getAlignToXY(n,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(d))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(u))||0},getStyleSize:function(){var t,i,r,o=this,a=this.dom,s=a===n||a===n.body;return s?{width:e.getViewportWidth(),height:e.getViewportHeight()}:(t=o.getStyle(["height","width"],!0),t.width&&"auto"!==t.width&&(i=parseFloat(t.width)),t.height&&"auto"!==t.height&&(r=parseFloat(t.height)),{width:i||o.getWidth(!0),height:r||o.getHeight(!0)})},isBorderBox:function(){return!0},isDisplayed:function(){return!this.isStyle("display","none")},focusable:"isFocusable"}}}}}(),function(){var e,t,n,i,r,o,a,s=Ext.dom.Element,l=s.prototype,d=!Ext.isIE8,u=document,c=u.defaultView,h=/alpha\(opacity=(.*)\)/i,p=/^\s+|\s+$/g,f=l.styleHooks,g=Ext.supports;if(l._init(s),delete l._init,Ext.plainTableCls="x-table-plain",Ext.plainListCls="x-list-plain",Ext.CompositeElementLite&&Ext.CompositeElementLite.importElementMethods(),f.opacity={name:"opacity",afterSet:function(e,t,n){var i=n.shadow;i&&i.setOpacity(t)}},!g.Opacity&&Ext.isIE&&Ext.apply(f.opacity,{get:function(e){var t,n,i=e.style.filter;return i.match&&(t=i.match(h),t&&(n=parseFloat(t[1]),!isNaN(n)))?n?n/100:0:1},set:function(e,t){var n=e.style,i=n.filter.replace(h,"").replace(p,"");n.zoom=1,"number"==typeof t&&t>=0&&1>t?(t*=100,n.filter=i+(i.length?" ":"")+"alpha(opacity="+t+")"):n.filter=i}}),!g.matchesSelector){var m,x=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,v=/\-/g,y=function(e,t){var n=RegExp("(?:^|\\s+)"+t.replace(v,"\\-")+"(?:\\s+|$)");return e&&"*"!==e?(e=e.toUpperCase(),function(t){return t.tagName===e&&n.test(t.className)}):function(e){return n.test(e.className)}},E=function(e){return e=e.toUpperCase(),function(t){return t.tagName===e}},b={};l.matcherCache=b,l.is=function(e){if(!e)return!0;var t,n,i,r,o,a,s,l=this.dom;if(1!==l.nodeType)return!1;if(!(i=Ext.isFunction(e)?e:b[e])){if(!(n=e.match(x)))return r=l.parentNode,r||(o=!0,r=m||(m=u.createDocumentFragment()),m.appendChild(l)),a=-1!==Ext.Array.indexOf(Ext.fly(r,"_is").query(e),l),o&&m.removeChild(l),a;s=n[1],t=n[2],b[e]=i=t?y(s,t):E(s)}return i(l)}}if(c&&c.getComputedStyle||(l.getStyle=function(e,t){var n,i,r,o,a,l,d,u=this,c=u.dom,h="string"!=typeof e,p=e,f=p,g=1,m=t,x=u.styleHooks;if(h&&(r={},p=f[0],d=0,!(g=f.length)))return r;if(!c||c.documentElement)return r||"";i=c.style,t?l=i:(l=c.currentStyle,l||(m=!0,l=i));do{if(o=x[p],o||(x[p]=o={name:s.normalize(p)}),o.get?a=o.get(c,u,m,l):(n=o.name,a=l[n]),!h)return a;r[p]=a,p=f[++d]}while(g>d);return r}),Ext.isIE8)for(a=function(e,t,n,i){return"none"===i[this.styleName]?"0px":i[this.name]},n=["Top","Right","Bottom","Left"],i=n.length;i--;)r=n[i],o="border"+r+"Width",f["border-"+r.toLowerCase()+"-width"]=f[o]={name:o,styleName:"border"+r+"Style",get:a};Ext.apply(Ext,{enableGarbageCollector:!0,isBorderBox:!0,useShims:!1,getDetachedBody:function(){var e=Ext.detachedBodyEl;return e||(e=u.createElement("div"),Ext.detachedBodyEl=e=new Ext.dom.Fly(e),e.isDetachedBody=!0),e},getElementById:function(e){var t,n=u.getElementById(e);return!n&&(t=Ext.detachedBodyEl)&&(n=t.dom.querySelector(Ext.makeIdSelector(e))),n},addBehaviors:function(e){if(Ext.isReady){var t,n,i,r={};for(n in e)(t=n.split("@"))[1]&&(i=t[0],r[i]||(r[i]=Ext.fly(document).select(i,!0)),r[i].on(t[1],e[n]));r=null}else Ext.onInternalReady(function(){Ext.addBehaviors(e)})}}),Ext.isIE9m?(Ext.getElementById=function(e){var t,n=u.getElementById(e);return!n&&(t=Ext.detachedBodyEl)&&(n=t.dom.all[e]),n},l.getById=function(e,t){var n,i,r=this.dom,o=null;return r&&(i=d&&u.getElementById(e)||r.all[e],i&&(t?o=i:(n=Ext.cache[e],n&&(n.skipGarbageCollection||!Ext.isGarbage(n.dom)?o=n:n.destroy()),o=o||new Ext.Element(i)))),o}):u.querySelector||(Ext.getDetachedBody=Ext.getBody,Ext.getElementById=function(e){return u.getElementById(e)},l.getById=function(e,t){var n=u.getElementById(e);return t?n:n?Ext.get(n):null}),!Ext.isIE||Ext.isIE9p&&u.documentMode>=9||(l.getAttribute=function(e,t){var n,i=this.dom;return t?(n=typeof i[t+":"+e],"undefined"!==n&&"unknown"!==n?i[t+":"+e]||null:null):("for"===e&&(e="htmlFor"),i[e]||null)}),Ext.onInternalReady(function(){function n(e,t,n,i){var r=i[this.name]||"";return m.test(r)?"transparent":r}function i(e,t,n){return function(){e.selectionStart=t,e.selectionEnd=n}}function r(e){var t,n,r,o,a=g.DisplayChangeInputSelectionBug,l=g.DisplayChangeTextAreaSelectionBug;return(a||l)&&(t=s.getActiveElement(),n=t&&t.tagName,(l&&"TEXTAREA"===n||a&&"INPUT"===n&&"text"===t.type)&&Ext.fly(e).isAncestor(t)&&(r=t.selectionStart,o=t.selectionEnd,Ext.isNumber(r)&&Ext.isNumber(o)))?i(t,r,o):Ext.emptyFn}function o(e,t,n,i){var r,o,a=i.marginRight;return"0px"!==a&&(r=e.style,o=r.display,r.display="inline-block",a=(n?i:e.ownerDocument.defaultView.getComputedStyle(e,null)).marginRight,r.display=o),a}function a(e,t,n,i){var o,a,s,l=i.marginRight;return"0px"!==l&&(o=e.style,a=r(e),s=o.display,o.display="inline-block",l=(n?i:e.ownerDocument.defaultView.getComputedStyle(e,"")).marginRight,o.display=s,a()),l}var d,c,h,p,m=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,x=[],v=l.setWidth,y=l.setHeight,E=l.setSize,b=/^\d+(?:\.\d*)?px$/i;if(g.FixedTableWidthBug&&(f.width={name:"width",set:function(e,t,n){var i=e.style,r=n._needsTableWidthFix,o=i.display;r&&(i.display="none"),i.width=t,r&&(e.scrollWidth,i.display=o)}},l.setWidth=function(e,t){var n=this,i=n.dom,r=i.style,o=n._needsTableWidthFix,a=r.display;return o&&!t&&(r.display="none"),v.call(n,e,t),o&&!t&&(i.scrollWidth,r.display=a),n},l.setSize=function(e,t,n){var i=this,r=i.dom,o=r.style,a=i._needsTableWidthFix,s=o.display;return a&&!n&&(o.display="none"),E.call(i,e,t,n),a&&!n&&(r.scrollWidth,o.display=s),i}),Ext.isIE8&&(f.height={name:"height",set:function(e,t,n){var i,r,o=n.component;o&&o._syncFrameHeight&&this===o.el&&(r=o.frameBody.dom.style,b.test(t)?(i=o.getFrameInfo(),i&&(r.height=parseInt(t,10)-i.height+"px")):t&&"auto"!==t||(r.height="")),e.style.height=t}},l.setHeight=function(e,t){var n,i,r=this.component;return r&&r._syncFrameHeight&&this===r.el&&(i=r.frameBody.dom.style,e&&"auto"!==e?(n=r.getFrameInfo(),n&&(i.height=e-n.height+"px")):i.height=""),y.call(this,e,t)},l.setSize=function(e,t,n){var i,r,o=this.component;return o&&o._syncFrameHeight&&this===o.el&&(r=o.frameBody.dom.style,t&&"auto"!==t?(i=o.getFrameInfo(),i&&(r.height=t-i.height+"px")):r.height=""),E.call(this,e,t,n)}),Ext.getDoc().on("selectstart",function(e,t){var n=s.selectableCls,i=s.unselectableCls,r=t&&t.tagName;if(r=r&&r.toLowerCase(),"input"!==r&&"textarea"!==r)for(;t&&1===t.nodeType&&t!==u.documentElement;){var o=Ext.fly(t);if(o.hasCls(n))return;if(o.hasCls(i))return void e.stopEvent();t=t.parentNode}}),g.RightMargin||(f.marginRight=f["margin-right"]={name:"marginRight",get:g.DisplayChangeInputSelectionBug||g.DisplayChangeTextAreaSelectionBug?a:o}),!g.TransparentColor)for(d=["background-color","border-color","color","outline-color"],c=d.length;c--;)h=d[c],p=s.normalize(h),f[h]=f[p]={name:p,get:n};l.verticalStyleHooks90=e=Ext.Object.chain(f),l.verticalStyleHooks270=t=Ext.Object.chain(f),e.width=f.height||{name:"height"},e.height=f.width||{name:"width"},e["margin-top"]={name:"marginLeft"},e["margin-right"]={name:"marginTop"},e["margin-bottom"]={name:"marginRight"},e["margin-left"]={name:"marginBottom"},e["padding-top"]={name:"paddingLeft"},e["padding-right"]={name:"paddingTop"},e["padding-bottom"]={name:"paddingRight"},e["padding-left"]={name:"paddingBottom"},e["border-top"]={name:"borderLeft"},e["border-right"]={name:"borderTop"},e["border-bottom"]={name:"borderRight"},e["border-left"]={name:"borderBottom"},t.width=f.height||{name:"height"},t.height=f.width||{name:"width"},t["margin-top"]={name:"marginRight"},t["margin-right"]={name:"marginBottom"},t["margin-bottom"]={name:"marginLeft"},t["margin-left"]={name:"marginTop"},t["padding-top"]={name:"paddingRight"},t["padding-right"]={name:"paddingBottom"},t["padding-bottom"]={name:"paddingLeft"},t["padding-left"]={name:"paddingTop"},t["border-top"]={name:"borderRight"},t["border-right"]={name:"borderBottom"},t["border-bottom"]={name:"borderLeft"},t["border-left"]={name:"borderTop"},Ext.scopeCss||x.push("x-body"),g.Touch&&x.push("x-touch"),Ext.isIE&&Ext.isIE9m&&(x.push("x-ie","x-ie9m"),x.push("x-ie8p"),Ext.isIE8?x.push("x-ie8"):x.push("x-ie9","x-ie9p"),Ext.isIE8m&&x.push("x-ie8m")),Ext.isIE10&&x.push("x-ie10"),Ext.isIE11&&x.push("x-ie11"),Ext.isGecko&&x.push("x-gecko"),Ext.isOpera&&x.push("x-opera"),
Ext.isOpera12m&&x.push("x-opera12m"),Ext.isWebKit&&x.push("x-webkit"),Ext.isSafari&&x.push("x-safari"),Ext.isChrome&&x.push("x-chrome"),Ext.isMac&&x.push("x-mac"),Ext.isLinux&&x.push("x-linux"),g.CSS3BorderRadius||x.push("x-nbr"),g.CSS3LinearGradient||x.push("x-nlg"),g.Touch&&x.push("x-touch"),Ext.getBody().addCls(x)},null,{priority:1500})}),Ext.define("Ext.rtl.dom.Element",{override:"Ext.dom.Element",rtlXAnchors:{l:"r",r:"l"},_positionTopRight:["position","top","right"],pxRe:/^\d+(?:\.\d*)?px$/i,statics:{rtlParseBox:function(e){var t,n=Ext.Element.parseBox(e);return t=n.left,n.left=n.right,n.right=t,n},rtlUnitizeBox:function(e,t){var n=Ext.Element,i=n.addUnits,r=n.parseBox(e);return i(r.top,t)+" "+i(r.left,t)+" "+i(r.bottom,t)+" "+i(r.right,t)}},anchorAnimX:function(e){Ext.rootInheritedState.rtl&&(e=this.rtlXAnchors[e]),arguments.callee.$previous.apply(this,arguments)},getPositioning:function(e){var t=Ext.rootInheritedState.rtl?"right":"left",n=this.getStyle([t,"top","position","z-index"]),i=this.dom;return e&&("auto"===n[t]&&(n[t]="left"===t?i.offsetLeft+"px":i.offsetParent.offsetWidth-i.offsetLeft-i.offsetWidth),"auto"===n.top&&(n.top=i.offsetTop+"px")),n},getXY:function(){var e,t,n=document,i=Math.round,r=this.dom,o=0,a=0;if(r!==n&&r!==n.body){try{e=r.getBoundingClientRect()}catch(s){e={left:0,top:0}}n=Ext.fly(n,"_internal"),Ext.rootInheritedState.rtl?(t=n.rtlGetScroll(),o=Ext.Element.getViewportWidth()-e.right+t.left):(t=n.getScroll(),o=e.left+t.left),o=i(o),a=i(e.top+t.top)}return[o,a]},rtlGetLocalX:function(){var e=this,t=e.dom.offsetParent,n=e.getStyle("right");return n&&"auto"!==n?e.pxRe.test(n)?n=parseFloat(n):(n=e.getX(),t&&(n-=Ext.fly(t,"_internal").getX())):n=0,n},rtlGetLocalXY:function(){var e=this,t=e.dom.offsetParent,n=e.getStyle(["right","top"]),i=n.right,r=n.top;return i&&"auto"!==i?e.pxRe.test(i)?i=parseFloat(i):(i=e.getX(),t&&(i-=Ext.fly(t,"_internal").getX())):i=0,r&&"auto"!==r?e.pxRe.test(r)?r=parseFloat(r):(r=e.getY(),t&&(r-=Ext.fly(t,"_internal").getY())):r=0,[i,r]},rtlGetScroll:function(){var e=this,t=e.dom,n=document,i=n.body,r=e.getScroll(),o=Math.abs(r.left),a=t===n||t===i;return(a?3&e._rtlDocScrollFlag:1===e._rtlScrollFlag)&&(a&&(t=i),o=t.scrollWidth-o-(a?Ext.Element.getViewportWidth():t.clientWidth)),r.left=o,r},rtlGetScrollLeft:function(){return this.rtlGetScroll().left},rtlNormalizeScrollLeft:function(e){var t=this.dom,n=this._rtlScrollFlag;return 0===n?e=-e:1===n&&(e=t.scrollWidth-e-t.clientWidth),e},rtlScrollBy:function(e,t,n){var i,r=this,o=r.dom;return e.length?(n=t,t=e[1],e=e[0]):"number"!=typeof e&&(n=t,t=e.y,e=e.x),e&&(i=r.rtlNormalizeScrollLeft(r.constrainScrollLeft(r.rtlGetScrollLeft()+e)),r.scrollTo("left",i,n)),t&&r.scrollTo("top",r.constrainScrollTop(o.scrollTop+t),n),r},rtlScrollIntoView:function(e,t,n,i){return e=Ext.getDom(e)||Ext.getBody().dom,this.doScrollIntoView(e,t,n,i,"rtlGetScrollLeft","rtlScrollTo")},rtlScrollTo:function(e,t,n){return"left"===e&&(t=this.rtlNormalizeScrollLeft(t)),this.scrollTo(e,t,n)},rtlSetLocalX:function(e){var t=this,n=t.dom.style;return n.left="auto",n.right=null===e?"auto":e+"px",(t.shadow||t.shim)&&t.syncUnderlays(),t},rtlSetLocalXY:function(e,t){var n=this,i=n.dom.style;return i.left="auto",e&&e.length&&(t=e[1],e=e[0]),null===e?i.right="auto":void 0!==e&&(i.right=e+"px"),null===t?i.top="auto":void 0!==t&&(i.top=t+"px"),(n.shadow||n.shim)&&n.syncUnderlays(),n},rtlSetScrollLeft:function(e){var t=this;return t.dom.scrollLeft=t.rtlNormalizeScrollLeft(e),t},rtlTranslatePoints:function(e,t){var n=this.rtlTranslateXY(e,t);return{right:n.x,top:n.y}},rtlTranslateXY:function(e,t){var n,i,r,o,a=this,s=a.getStyle(a._positionTopRight),l="relative"===s.position,d=parseFloat(s.right),u=parseFloat(s.top),c=a.getXY(),h=a.dom;return e&&e.length&&(t=e[1],e=e[0]),isNaN(d)&&(n=document,i=n.body,h===i?d=0:(o=h.offsetParent,r=o&&o!==i&&o!==n.documentElement?o.scrollWidth:Ext.Element.getViewportWidth(),d=r-h.offsetLeft-a.getWidth())),isNaN(u)&&(u=l?0:a.dom.offsetTop),d="number"==typeof e?e-c[0]+d:void 0,u="number"==typeof t?t-c[1]+u:void 0,{x:d,y:u}},translatePoints:function(e,t){return Ext.rootInheritedState.rtl?this.rtlTranslatePoints(e,t):arguments.callee.$previous.apply(this,arguments)},translateXY:function(e,t){return Ext.rootInheritedState.rtl?this.rtlTranslateXY(e,t):arguments.callee.$previous.apply(this,arguments)},wrap:function(){var e,t=this.parent(),n="x-rtl",i="x-ltr",r=arguments.callee.$previous.apply(this,arguments);return t.hasCls(n)?e=n:t.hasCls(i)&&(e=i),e&&Ext.fly(r,"_internal").addCls(e),r}},function(){function e(){var e=Ext.getBody().createChild({tag:"div",style:"direction:rtl;position:absolute;overflow:auto;height:100px;width:100px;",children:[{tag:"div",style:"height:30px;width:150px;"}]}),t=e.dom,i=2;50===t.scrollLeft?i=1:(t.scrollLeft=-1,t.scrollLeft&&(i=0)),e.destroy(),n.prototype._rtlScrollFlag=i}function t(){var e,t,i=document,r=i.documentElement,o=i.body,a=4,s=o.style,l=s.direction,d=Ext.getBody().createChild('<div style="height:20000px;width:20000px;"></div>'),u=d.dom;s.direction="ltr",e=u.getBoundingClientRect().right,s.direction="rtl",t=u.getBoundingClientRect().right,n.prototype._rtlBodyScrollbarOnRight=e===t,r.scrollLeft>0?a=1:(r.scrollLeft=-1,r.scrollLeft?a=0:(r.scrollLeft=1,r.scrollLeft&&(a=2))),d.destroy(),l||(s.direction="ltr",o.scrollWidth),s.direction=l,n.prototype._rtlDocScrollFlag=a}var n=this;Ext.CompositeElementLite.importElementMethods(),Ext.onInternalReady(function(){t(),e()})}),Ext.define("BP.overrides.dom.Element",{override:"Ext.dom.Element",mask:function(e,t,n){var i,r=this,o=r.dom,a=r.getData(),s=a.maskEl,l=document,d=window.rtlEnable?"x-rtl":"x-ltr",u="x-masked",c="x-masked-relative",h="x-mask-msg",p=/^body/i;return p.test(o.tagName)&&"static"===r.getStyle("position")||r.addCls(c),s&&s.destroy(),s=Ext.DomHelper.append(o,{role:"presentation",cls:"x-mask x-border-box",children:{role:"presentation",cls:t?h+" "+t+" "+d:h+" "+d,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:e||""}}}},!0),i=Ext.get(s.dom.firstChild),a.maskEl=s,r.addCls(u),s.setDisplayed(!0),"string"==typeof e?(i.setDisplayed(!0),i.center(r)):i.setDisplayed(!1),o===l.body?s.addCls("x-mask-fixed"):r.saveTabbableState(),r.saveChildrenTabbableState(),Ext.isIE9m&&o!==l.body&&r.isStyle("height","auto")&&s.setSize(void 0,n||r.getHeight()),s}}),Ext.cmd.derive("Ext.GlobalEvents",Ext.mixin.Observable,{alternateClassName:"Ext.globalEvents",observableType:"global",singleton:!0,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var e=this;e.callParent(),Ext.onInternalReady(function(){e.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer})},fireResize:function(){var e=this,t=Ext.Element,n=t.getViewportWidth(),i=t.getViewportHeight();(e.curHeight!==i||e.curWidth!==n)&&(e.curHeight=i,e.curWidth=n,e.fireEvent("resize",n,i))}},1,0,0,0,0,0,[Ext,"GlobalEvents",Ext,"globalEvents"],function(e){Ext.on=function(){return e.addListener.apply(e,arguments)},Ext.un=function(){return e.removeListener.apply(e,arguments)}}),Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",attachListeners:function(){this.callParent(),Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(e){this.fireEvent("mousedown",e)},deprecated:{5:{methods:{addListener:function(e,t,n,i,r,o,a){var s,l;if("ready"===e)l=t;else if("string"!=typeof e)for(s in e)"ready"===s&&(l=e[s]);l&&Ext.onReady(l),this.callParent([e,t,n,i,r,o,a])}}}}}),Ext.USE_NATIVE_JSON=!1,Ext.JSON=new function(){var me=this,hasNative=window.JSON&&""+JSON=="[object JSON]",useHasOwn=!!{}.hasOwnProperty,pad=function(e){return 10>e?"0"+e:e},doDecode=function(json){return eval("("+json+")")},doEncode=function(e,t){return null===e||void 0===e?"null":Ext.isDate(e)?me.encodeDate(e):Ext.isString(e)?Ext.isMSDate(e)?me.encodeMSDate(e):me.encodeString(e):"number"==typeof e?isFinite(e)?e+"":"null":Ext.isBoolean(e)?e+"":e.toJSON?e.toJSON():Ext.isArray(e)?encodeArray(e,t):Ext.isObject(e)?encodeObject(e,t):"function"==typeof e?"null":"undefined"},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(e){return'"'+e.replace(charToReplace,function(e){var t=m[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(e){return'"'+e+'"'},encodeArrayPretty=function(e,t){var n,i=e.length,r=t+"   ",o=","+r,a=["[",r];for(n=0;i>n;n+=1)a.push(me.encodeValue(e[n],r),o);return a[a.length-1]=t+"]",a.join("")},encodeObjectPretty=function(e,t){var n,i,r=t+"   ",o=","+r,a=["{",r];for(n in e)if(i=e[n],!useHasOwn||e.hasOwnProperty(n)){if("function"==typeof i||void 0===i)continue;a.push(me.encodeValue(n)+": "+me.encodeValue(i,r),o)}return a[a.length-1]=t+"}",a.join("")},encodeArray=function(e,t){if(t)return encodeArrayPretty(e,t);var n,i=["[",""],r=e.length;for(n=0;r>n;n+=1)i.push(me.encodeValue(e[n]),",");return i[i.length-1]="]",i.join("")},encodeObject=function(e,t){if(t)return encodeObjectPretty(e,t);var n,i,r=["{",""];for(n in e)if(i=e[n],!useHasOwn||e.hasOwnProperty(n)){if("function"==typeof i||void 0===i)continue;r.push(me.encodeValue(n),":",me.encodeValue(i),",")}return r[r.length-1]="}",r.join("")};me.encodeString=encodeString,me.encodeValue=doEncode,me.encodeDate=function(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+"T"+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'},me.encode=function(e){return hasNative&&Ext.USE_NATIVE_JSON?JSON.stringify(e):me.encodeValue(e)},me.decode=function(e,t){try{return hasNative&&Ext.USE_NATIVE_JSON?JSON.parse(e):doDecode(e)}catch(n){if(t)return null;Ext.Error.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+e})}},me.encodeMSDate=encodeMSDate,Ext.util||(Ext.util={}),Ext.util.JSON=me,Ext.encode=me.encode,Ext.decode=me.decode},Ext.cmd.derive("Ext.util.Format",Ext.Base,function(){var e;return{singleton:!0,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:!1,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){e=this},undef:function(e){return void 0!==e?e:""},defaultValue:function(e,t){return void 0!==e&&""!==e?e:t},substr:"b"!="ab".substr(-1)?function(e,t,n){var i=e+"";return 0>t?i.substr(Math.max(i.length+t,0),n):i.substr(t,n)}:function(e,t,n){return(e+"").substr(t,n)},lowercase:function(e){return(e+"").toLowerCase()},uppercase:function(e){return(e+"").toUpperCase()},usMoney:function(t){return e.currency(t,"$",2)},currency:function(t,n,i,r){var o="",a=",0",s=0;for(t-=0,0>t&&(t=-t,o="-"),i=Ext.isDefined(i)?i:e.currencyPrecision,a+=i>0?".":"";i>s;s++)a+="0";return t=e.number(t,a),(r||e.currencyAtEnd)===!0?Ext.String.format("{0}{1}{2}",o,t,n||e.currencySign):Ext.String.format("{0}{1}{2}",o,n||e.currencySign,t)},date:function(e,t){return e?(Ext.isDate(e)||(e=new Date(Date.parse(e))),Ext.Date.dateFormat(e,t||Ext.Date.defaultFormat)):""},dateRenderer:function(t){return function(n){return e.date(n,t)}},hex:function(e,t){var n=parseInt(e||0,10).toString(16);if(t)for(0>t&&(t=-t,n.length>t&&(n=n.substring(n.length-t)));n.length<t;)n="0"+n;return n},or:function(e,t){return e||t},pick:function(e,t,n){if(Ext.isNumber(e)){var i=arguments[e+1];if(i)return i}return e?n:t},stripTags:function(t){return t?(t+"").replace(e.stripTagsRe,""):t},stripScripts:function(t){return t?(t+"").replace(e.stripScriptsRe,""):t},fileSize:function(){var e=1024,t=1048576,n=1073741824;return function(i){var r;return r=e>i?1===i?"1 byte":i+" bytes":t>i?Math.round(10*i/e)/10+" KB":n>i?Math.round(10*i/t)/10+" MB":Math.round(10*i/n)/10+" GB"}}(),math:function(){var e={};return function(t,n){return e[n]||(e[n]=Ext.functionFactory("v","return v "+n+";")),e[n](t)}}(),round:function(e,t){var n=+e;return"number"==typeof t?(t=Math.pow(10,t),n=Math.round(e*t)/t):void 0===t&&(n=Math.round(n)),n},number:function(t,n){if(!n)return t;if(isNaN(t))return"";var i=e.formatFns[n];if(!i){var r,o,a,s,l,d,u=n,c=e.thousandSeparator,h=e.decimalSeparator,p=0,f="";"/i"===n.substr(n.length-2)?(e.I18NFormatCleanRe&&e.lastDecimalSeparator===h||(e.I18NFormatCleanRe=RegExp("[^\\d\\"+h+"]","g"),e.lastDecimalSeparator=h),n=n.substr(0,n.length-2),r=-1!==n.indexOf(c),o=n.replace(e.I18NFormatCleanRe,"").split(h)):(r=-1!==n.indexOf(","),o=n.replace(e.formatCleanRe,"").split(".")),a=n.replace(e.formatPattern,""),o.length>2||2===o.length&&(p=o[1].length,s=o[1].match(e.hashRe),s&&(d=s[0].length,f='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+d+'}$")')),l=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(r?",thousandSeparator,thousands=[],j,n,i":"")+(a?',formatString="'+n+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+p+");",f,";"],r?(p&&(l[l.length]='parts=fnum.split(".");',l[l.length]="fnum=parts[0];"),l[l.length]="if(absVal>=1000) {",l[l.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}",p&&(l[l.length]="fnum += utilFormat.decimalSeparator+parts[1];")):p&&(l[l.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'),l[l.length]='if(neg&&fnum!=="'+(p?"0."+Ext.String.repeat("0",p):"0")+'") { fnum="-"+fnum; }',s&&(l[l.length]='fnum=fnum.replace(trailingZeroes,"");'),l[l.length]="return ",a?l[l.length]="formatString.replace(formatPattern, fnum);":l[l.length]="fnum;",l[l.length]="};",i=e.formatFns[u]=Ext.functionFactory("Ext",l.join(""))(Ext)}return i(t)},numberRenderer:function(t){return function(n){return e.number(n,t)}},percent:function(t,n){return e.number(100*t,n||"0")+e.percentSign},attributes:function(e){if("object"==typeof e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t,'="',"style"===t?Ext.DomHelper.generateStyles(e[t],null,!0):Ext.htmlEncode(e[t]),'" ');e=n.join("")}return e||""},plural:function(e,t,n){return e+" "+(1===e?t:n?n:t+"s")},nl2br:function(t){return Ext.isEmpty(t)?"":t.replace(e.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(e){if(e=e||0,"number"==typeof e)return{top:e,right:e,bottom:e,left:e};var t=e.split(" "),n=t.length;return 1===n?t[1]=t[2]=t[3]=t[0]:2===n?(t[2]=t[0],t[3]=t[1]):3===n&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,"Format"],0),Ext.define("BP.overrides.util.Format",{override:"Ext.util.Format",bigmoney:function(e,t){var n,i=this.isFloat()?"0,000.00":"0,000",r=[{value:1e6,symbol:"M"}];for(n=0;n<r.length;n++)if(e>=r[n].value)return(e/r[n].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+r[n].symbol;return Ext.util.Format.number(""+e,i)},isFloat:function(e){return+e===e&&e%1===0}}),Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(e,t){return e=Ext.getDom(e),new this(e.value||e.innerHTML,t||"")}},useEval:Ext.isGecko,constructor:function(e){var t,n,i=this,r=arguments,o=[],a=r.length;if(i.initialConfig={},1===a&&Ext.isArray(e)&&(r=e,a=r.length),a>1)for(t=0;a>t;t++)n=r[t],"object"==typeof n?(Ext.apply(i.initialConfig,n),Ext.apply(i,n)):o.push(n);else o.push(e);i.html=o.join("")},isTemplate:!0,disableFormats:!1,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(e){var t=this;return t.compiled?(t.fn||t.compile(),t.fn(e).join("")):t.evaluate(e)},evaluate:function(e){function t(t,n,a,s,l){return(null==a||""===a)&&(a=n),s&&i?(l=l?[e[a]].concat(Ext.functionFactory("return ["+l+"];")()):[e[a]],"this."===s.substr(0,5)?o[s.substr(5)].apply(o,l):r[s]?r[s].apply(r,l):t):void 0!==e[a]?e[a]:""}var n=this,i=!n.disableFormats,r=Ext.util.Format,o=n;return n.html.replace(n.tokenRe,t)},applyOut:function(e,t){var n=this;return n.compiled?(n.fn||n.compile(),t.push.apply(t,n.fn(e))):t.push(n.apply(e)),t},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(e,t){var n=this;return n.html=e,n.compiled=!!t,n.fn=null,n},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var e,t=this;return e=t.html.replace(t.compileARe,"\\\\").replace(t.compileBRe,"\\n").replace(t.compileCRe,"\\'").replace(t.tokenRe,t.regexReplaceFn.bind(t)),e=(this.disableFormats!==!0?"var fm=Ext.util.Format;":"")+(t.useEval?"$=":"return")+" function(v){return ['"+e+"'];};",t.fn=t.useEval?t.evalCompiled(e):Function("Ext",e)(Ext),t.compiled=!0,t},evalCompiled:function($){return eval($),$},regexReplaceFn:function(e,t,n,i,r){if(null==t||""===t?t='"'+n+'"':this.stringFormat&&(t=parseInt(t)+1),i&&this.disableFormats!==!0){if(r=r?","+r:"","this."===i.substr(0,5))i+="(";else{if(!Ext.util.Format[i])return e;i="fm."+i+"("}return"',"+i+"v["+t+"]"+r+"),'"}return"',v["+t+"] == undefined ? '' : v["+t+"],'"},insertFirst:function(e,t,n){return this.doInsert("afterBegin",e,t,n)},insertBefore:function(e,t,n){return this.doInsert("beforeBegin",e,t,n)},insertAfter:function(e,t,n){return this.doInsert("afterEnd",e,t,n)},append:function(e,t,n){return this.doInsert("beforeEnd",e,t,n)},doInsert:function(e,t,n,i){var r=Ext.DomHelper.insertHtml(e,Ext.getDom(t),this.apply(n));return i?Ext.get(r):r},overwrite:function(e,t,n){var i=Ext.DomHelper.overwrite(Ext.getDom(e),this.apply(t));return n?Ext.get(i):i}},1,0,0,0,0,0,[Ext,"Template"],function(e){var t=/\{\d+\}/,n=function(n){return t.test(n)?(n=new e(n,i),function(){return n.apply(arguments)}):function(){return n}},i={useFormat:!1,compiled:!0,stringFormat:!0},r={};Ext.String.format=Ext.util.Format.format=function(e){var t=r[e]||(r[e]=n(e));return t.apply(this,arguments)}}),Ext.cmd.derive("Ext.mixin.Inheritable",Ext.Mixin,{mixinConfig:{id:"inheritable"},getInherited:function(e){var t,n,i,r=this,o=e&&r.inheritedStateInner||r.inheritedState,a=r.ownerCt||r.initOwnerCt,s=r.isContainer;return(!o||o.invalid)&&(t=r.getRefOwner(),a&&(i=r.ownerLayout===a.layout),r.inheritedState=o=Ext.Object.chain(t?t.getInherited(i):Ext.rootInheritedState),s&&(r.inheritedStateInner=n=Ext.Object.chain(o)),r.initInheritedState(o,n),o=s&&e?r.inheritedStateInner:r.inheritedState),o},getInheritedConfig:function(e,t){var n,i,r=this.inheritedState;return(!r||r.invalid)&&(r=this.getInherited()),i=r[e],t&&r.hasOwnProperty(e)&&(n=i,delete r[e],i=r[e],r[e]=n),i},fixReference:function(){var e,t=this;t.reference&&(e=t.lookupReferenceHolder(),e&&e.attachReference(t))},resolveListenerScope:function(e,t){var n,i=this,r="boolean"==typeof t,o=Ext._namedScopes[e];return o?o.isController?n=i.getInheritedConfig("controller",r?t:!o.isSelf):o.isSelf?n=i.getInheritedConfig("defaultListenerScope",r&&t)||i:o.isThis&&(n=i):n=i.getInheritedConfig("defaultListenerScope",r?t:!0)||e||i,n||null},resolveSatelliteListenerScope:function(e,t){var n,i=this,r=Ext._namedScopes[t];return r?r.isController?n=i.getInheritedConfig("controller"):r.isSelf?n=i.getInheritedConfig("defaultListenerScope")||e:r.isThis&&(n=e):n=i.getInheritedConfig("defaultListenerScope")||t||i,n||null},lookupReferenceHolder:function(e){return this.getInheritedConfig("referenceHolder",e!==!1)||null},getRefOwner:function(){return this.ownerCt||this.initOwnerCt||this.ownerCmp||this.floatParent},invalidateInheritedState:function(){var e=this.inheritedState;e&&(e.invalid=!0,delete this.inheritedState)}},0,0,0,0,0,0,[Ext.mixin,"Inheritable"],function(){Ext.rootInheritedState={}}),Ext.cmd.derive("Ext.mixin.Bindable",Ext.Base,{mixinId:"bindable",config:{bind:{$value:null,lazy:!0},controller:null,defaultListenerScope:!1,publishes:{$value:null,lazy:!0,merge:function(e,t){return this.mergeSets(e,t)}},reference:null,session:{$value:null,lazy:!0},twoWayBindable:{$value:null,lazy:!0,merge:function(e,t){return this.mergeSets(e,t)}},viewModel:{$value:null,lazy:!0}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(e){var t=this,n=t.getReference(),i=t.getController(),r=t.getConfig("viewModel",!0),o=t.getConfig("session",!0),a=t.getDefaultListenerScope();i&&(e.controller=i),a?e.defaultListenerScope=t:i&&(e.defaultListenerScope=i),r&&(r.isViewModel||(r=t),e.viewModel=r),o&&(o.isSession||(o=t),e.session=o),n&&(t.referenceKey=(e.referencePath||"")+n,t.viewModelKey=(e.viewModelPath||"")+n)},lookupController:function(e){return this.getInheritedConfig("controller",e)||null},lookupSession:function(e){var t=e?null:this.getSession();return t||(t=this.getInheritedConfig("session",e),t&&!t.isSession&&(t=t.getInherited().session=t.getSession())),t||null},lookupViewModel:function(e){var t=e?null:this.getViewModel();return t||(t=this.getInheritedConfig("viewModel",e),t&&!t.isViewModel&&(t=t.getInherited().viewModel=t.getViewModel())),t||null},publishState:function(e,t){var n,i,r,o=this,a=o.viewModelKey,s=o.publishedState,l=o.getBind(),d=l&&e&&l[e],u=0;if(!d||d.syncing||d.isReadOnly()||(0!==d.calls||null!=t&&t!==o.getInitialConfig()[e])&&d.setValue(t),a&&(i=o.getPublishes())&&(r=o.lookupViewModel())){if(e&&s){if(!i[e])return;if(!(t&&t.constructor===Object||t instanceof Array)&&s[e]===t)return;a+=".",a+=e}else{s=s||(o.publishedState={});for(n in i)++u,n===e?s[n]=t:s[n]=o[n];if(!u)return;t=s}r.set(a,t)}},privates:{addBindableUpdater:function(e){var t,n=this,i=n.self.$config.configs,r=i[e];r&&!n.hasOwnProperty(t=r.names.update)&&(n[t]=r.bindableUpdater||(r.root.bindableUpdater=n.makeBindableUpdater(r)))},applyBind:function(e,t){var n,i,r,o=this,a=o.lookupViewModel(),s=o.getTwoWayBindable(),l=o._getBindTemplateScope;t&&"string"!=typeof t||(t={}),Ext.isString(e)&&(n=e,e={},e[o.defaultBindProperty]=n);for(i in e)r=e[i],n=t[i],n&&"string"!=typeof n&&(n.destroy(),n=null),r&&(n=a.bind(r,o.onBindNotify,o),n._config=Ext.Config.get(i),n.getTemplateScope=l),t[i]=n,s&&s[i]&&!n.isReadOnly()&&o.addBindableUpdater(i);return t},applyController:function(e){return e&&(e=Ext.Factory.controller(e),e.setView(this)),e},applyPublishes:function(e){if(this.lookupViewModel())for(var t in e)this.addBindableUpdater(t);return e},applySession:function(e){if(!e)return null;if(!e.isSession){var t=this.lookupSession(!0),n=e===!0?{}:e;e=t?t.spawn(n):new Ext.data.Session(n)}return e},applyViewModel:function(e){var t,n,i=this;return e&&e.isViewModel||(t={parent:i.lookupViewModel(!0)},t.session=i.getSession(),n||t.parent||(t.session=i.lookupSession()),e&&(e.constructor===Object?Ext.apply(t,e):"string"==typeof e&&(t.type=e)),e=Ext.Factory.viewModel(t)),e},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},initBindable:function(){this.initBindable=Ext.emptyFn,this.getBind(),this.getPublishes()},makeBindableUpdater:function(e){var t=e.names.update;return function(n,i){var r=this,o=r.self.prototype[t];o&&o.call(r,n,i),r.publishState(e.name,n)}},onBindNotify:function(e,t,n){n.syncing=n.syncing+1||1,this[n._config.names.set](e),--n.syncing},removeBindings:function(){var e,t,n=this.bind;if(n&&"string"!=typeof n)for(e in n)t=n[e],t.destroy(),t._config=t.getTemplateScope=null;this.bind=null},updateSession:function(e){var t=this.getInherited();e?t.session=e:delete t.session},updateViewModel:function(e){var t=this.getInherited(),n=this.getController();e?(t.viewModel=e,e.setView(this),n&&n.initViewModel(e)):delete t.viewModel}}},0,0,0,0,0,0,[Ext.mixin,"Bindable"],0),Ext.cmd.derive("Ext.Widget",Ext.Evented,{isWidget:!0,element:{reference:"element"},observableType:"component",eventedConfig:{width:null,height:null},template:[],constructor:function(e){var t=this;t.initId(e),t.initElement(),t.mixins.observable.constructor.call(t,e),Ext.ComponentManager.register(t)},afterCachedConfig:function(){var e,t,n,i,r,o,a=this,s=a.self.prototype,l=a.referenceList,d=a.renderElement.dom;for(s.renderTemplate=e=document.createDocumentFragment(),e.appendChild(d.cloneNode(!0)),o=e.querySelectorAll("[id]"),n=0,i=o.length;i>n;n++)t=o[n],t.removeAttribute("id");for(n=0,i=l.length;i>n;n++)r=l[n],a[r].dom.removeAttribute("reference")},applyWidth:function(e){return this.filterLengthValue(e)},applyHeight:function(e){return this.filterLengthValue(e)},destroy:function(){var e,t,n,i=this,r=i.referenceList;for(e=0,t=r.length;t>e;e++)n=r[e],i.hasOwnProperty(n)&&(i[n].destroy(),i[n]=null);Ext.Evented.prototype.destroy.call(this),Ext.ComponentManager.unregister(i)},doSetWidth:function(e){this.element.setWidth(e)},doSetHeight:function(e){this.element.setHeight(e)},getElementConfig:function(){var e=this,t=e.element;return"children"in t||(t=Ext.apply({children:e.getTemplate()},t)),t},getItemId:function(){return this.itemId||this.id},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var e,t,n,i,r,o,a,s,l=this,d=l.self.prototype,u=l.getId(),c=l.referenceList=[],h=!0;for(d.hasOwnProperty("renderTemplate")?(e=l.renderTemplate.cloneNode(!0),t=e.firstChild):(h=!1,e=document.createDocumentFragment(),t=Ext.Element.create(l.processElementConfig.call(d),!0),e.appendChild(t)),i=e.querySelectorAll("[reference]"),r=0,o=i.length;o>r;r++)a=i[r],s=a.getAttribute("reference"),h&&a.removeAttribute("reference"),"element"===s?(a.id=u,n=l.el=l.addElementReference(s,a)):l.addElementReferenceOnDemand(s,a),c.push(s);t===n.dom?l.renderElement=n:l.addElementReferenceOnDemand("renderElement",t)},is:function(e){return Ext.ComponentQuery.is(this,e)},isXType:function(e,t){return t?-1!==Ext.Array.indexOf(this.xtypes,e):!!this.xtypesMap[e]},resolveListenerScope:function(e){return this.mixins.inheritable.resolveListenerScope.call(this,e)},setSize:function(e,t){void 0!==e&&this.setWidth(e),void 0!==t&&this.setHeight(t)},privates:{addElementReferenceOnDemand:function(e,t){this._elementListeners[e]?this.addElementReference(e,t):Ext.Object.defineProperty(this,e,{get:function(){return delete this[e],this.addElementReference(e,t)},configurable:!0})},addElementReference:function(e,t){var n,i,r=this,o=r[e]=Ext.get(t),a=r._elementListeners[e];if(o.skipGarbageCollection=!0,o.component=r,a){a=Ext.clone(a),a.scope=r;for(n in a)i=a[n],"object"==typeof i&&(i.scope=r);o.on(a)}return o},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element),this.isDetached=!0},doAddListener:function(e,t,n,i,r,o,a){i&&"element"in i&&this[i.element].doAddListener(e,t,n||this,i,r),Ext.Evented.prototype.doAddListener.call(this,e,t,n,i,r,o,a)},filterLengthValue:function(e){return"auto"===e||!e&&0!==e?null:e},getFocusEl:function(){return this.element},initElementListeners:function(e){var t,n,i,r,o,a=this,s=a.self.superclass,l=s._elementListeners,d=e.reference,u=e.children;if(t=a.hasOwnProperty("_elementListeners")?a._elementListeners:a._elementListeners=l?Ext.Object.chain(l):{},d&&(n=e.listeners,n&&(l&&(i=l[d],i&&(n=Ext.Object.chain(i),Ext.apply(n,e.listeners))),t[d]=n,e.listeners=null)),u)for(o=0,r=u.length;r>o;o++)a.initElementListeners(u[o])},initId:function(e){var t=this,n=t.config,i=e&&e.id||n&&n.id;i?(t.setId(i),t.id=i):t.getId()},processElementConfig:function(){var e,t=this,n=t.self.superclass;return t.hasOwnProperty("_elementConfig")?e=t._elementConfig:(e=t._elementConfig=t.getElementConfig(),n.isWidget&&t.processElementConfig.call(n),t.initElementListeners(e)),e},reattachToBody:function(){this.isDetached=!1}}},1,["widget"],["widget"],{widget:!0},["widget.widget"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable]],[Ext,"Widget"],function(e){(e.prototype.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1}),Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:!1,isComponent:!0,liquidLayout:!0,rendered:!0,rendering:!0,config:{renderTo:null},cachedConfig:{baseCls:"x-widget"},constructor:function(e){var t,n=this;(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,e),n.getComponentLayout(),t=n.getRenderTo(),t&&n.render(t)},addCls:function(e){this.el.addCls(e)},addClsWithUI:function(e){this.el.addCls(e)},afterComponentLayout:Ext.emptyFn,finishRender:function(){this.rendering=!1,this.initBindable()},getComponentLayout:function(){var e=this,t=e.componentLayout;return t||(t=e.componentLayout=new Ext.layout.component.Auto,t.setOwner(e)),t},getTdCls:function(){return"x-"+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(e,t,n){var i=this,r=i.inheritedState;i.ownerCt=e,r&&n&&i.invalidateInheritedState(),i.reference&&i.fixReference()},onRemoved:function(e){var t,n=this;n.reference&&(t=n.lookupReferenceHolder(),t&&t.clearReference(n)),e||n.removeBindings(),n.inheritedState&&!e&&n.invalidateInheritedState(),n.ownerCt=n.ownerLayout=null},parseBox:function(e){return Ext.Element.parseBox(e)},removeCls:function(e){this.el.removeCls(e)},removeClsWithUI:function(e){this.el.removeCls(e)},render:function(e,t){var n,i=this,r=i.element,o=Ext.Component.prototype;return(!i.ownerCt||i.floating)&&(Ext.scopeCss&&r.addCls(o.rootCls),r.addCls(o.borderBoxCls)),t&&(n=e.childNodes[t])?void Ext.fly(e).insertBefore(r,n):void Ext.fly(e).appendChild(r)},setPosition:function(e,t){this.el.setLocalXY(e,t)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},focus:Ext.emptyFn,isFocusable:Ext.emptyFn},function(e){var t=e.prototype;Ext.isIE8&&(t.addElementReferenceOnDemand=t.addElementReference)}),Ext.cmd.derive("Ext.util.XTemplateParser",Ext.Base,{constructor:function(e){Ext.apply(this,e)},doTpl:Ext.emptyFn,parse:function(e){var t,n,i,r,o,a,s,l,d,u,c,h,p,f=this,g=e.length,m={elseif:"elif"},x=f.topRe,v=f.actionsRe;for(f.level=0,f.stack=n=[],t=0;g>t;t=u){if(x.lastIndex=t,r=x.exec(e),!r){f.doText(e.substring(t,g));break}if(d=r.index,u=x.lastIndex,d>t&&(i=e.substring(t,d),p&&""===Ext.String.trim(i)||f.doText(i)),p=!1,r[1])u=e.indexOf("%}",d+2),f.doEval(e.substring(d+2,u)),u+=2;else if(r[2])u=e.indexOf("]}",d+2),f.doExpr(e.substring(d+2,u)),u+=2;else if(r[3])f.doTag(r[3]);else if(r[4]){for(c=null;null!==(l=v.exec(r[4]));)i=l[2]||l[3],i&&(i=Ext.String.htmlDecode(i),o=l[1],o=m[o]||o,c=c||{},a=c[o],"string"==typeof a?c[o]=[a,i]:a?c[o].push(i):c[o]=i);c?c["if"]?(f.doIf(c["if"],c),n.push({type:"if"})):c["switch"]?(f.doSwitch(c["switch"],c),n.push({type:"switch"}),p=!0):c["case"]?f.doCase(c["case"],c):c.elif?f.doElseIf(c.elif,c):c["for"]?(++f.level,(h=f.propRe.exec(r[4]))&&(c.propName=h[1]||h[2]),f.doFor(c["for"],c),n.push({type:"for",actions:c})):c.foreach?(++f.level,(h=f.propRe.exec(r[4]))&&(c.propName=h[1]||h[2]),f.doForEach(c.foreach,c),n.push({type:"foreach",actions:c})):c.exec&&(f.doExec(c.exec,c),n.push({type:"exec",actions:c})):f.elseRe.test(r[4])?f.doElse():f.defaultRe.test(r[4])?f.doDefault():(f.doTpl(),
n.push({type:"tpl"}))}else 5===r[0].length?n.push({type:"tpl"}):(s=n.pop(),f.doEnd(s.type,s.actions),("for"==s.type||"foreach"==s.type)&&--f.level)}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,"XTemplateParser"],0),Ext.cmd.derive("Ext.util.XTemplateCompiler",Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\w\d\$]*$/,compile:function(e){var t=this,n=t.generate(e);return t.useEval?t.evalTpl(n):Function("Ext",n)(Ext)},generate:function(e){var t,n=this,i="var fm=Ext.util.Format,ts=Object.prototype.toString;";return n.maxLevel=0,n.body=["var c0=values, a0="+n.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"],n.definitions?"string"==typeof n.definitions?n.definitions=[n.definitions,i]:n.definitions.push(i):n.definitions=[i],n.switches=[],n.parse(e),n.definitions.push((n.useEval?"$=":"return")+" function ("+n.fnArgs+") {",n.body.join(""),"}"),t=n.definitions.join("\n"),n.definitions.length=n.body.length=n.switches.length=0,delete n.definitions,delete n.body,delete n.switches,t},doText:function(e){var t=this,n=t.body;e=e.replace(t.aposRe,"\\'").replace(t.newLineRe,"\\n"),t.useIndex?n.push("out[out.length]='",e,"'\n"):n.push("out.push('",e,"')\n")},doExpr:function(e){var t=this.body;t.push("if ((v="+e+") != null) out"),this.useIndex?t.push("[out.length]=v+''\n"):t.push(".push(v+'')\n")},doTag:function(e){var t=this.parseTag(e);t?this.doExpr(t):this.doText("{"+e+"}")},doElse:function(){this.body.push("} else {\n")},doEval:function(e){this.body.push(e,"\n")},doIf:function(e,t){var n=this;"."===e?n.body.push("if (values) {\n"):n.propNameRe.test(e)?n.body.push("if (",n.parseTag(e),") {\n"):n.body.push("if (",n.addFn(e),n.callFn,") {\n"),t.exec&&n.doExec(t.exec)},doElseIf:function(e,t){var n=this;"."===e?n.body.push("else if (values) {\n"):n.propNameRe.test(e)?n.body.push("} else if (",n.parseTag(e),") {\n"):n.body.push("} else if (",n.addFn(e),n.callFn,") {\n"),t.exec&&n.doExec(t.exec)},doSwitch:function(e){var t,n=this;"."===e||"#"===e?(t="."===e?"values":"xindex",n.body.push("switch (",t,") {\n")):n.propNameRe.test(e)?n.body.push("switch (",n.parseTag(e),") {\n"):n.body.push("switch (",n.addFn(e),n.callFn,") {\n"),n.switches.push(0)},doCase:function(e){var t,n,i=this,r=Ext.isArray(e)?e:[e],o=i.switches.length-1;for(i.switches[o]?i.body.push("break;\n"):i.switches[o]++,n=0,o=r.length;o>n;++n)t=i.intRe.exec(r[n]),r[n]=t?t[1]:"'"+r[n].replace(i.aposRe,"\\'")+"'";i.body.push("case ",r.join(": case "),":\n")},doDefault:function(){var e=this,t=e.switches.length-1;e.switches[t]?e.body.push("break;\n"):e.switches[t]++,e.body.push("default:\n")},doEnd:function(e,t){var n=this,i=n.level-1;"for"==e||"foreach"==e?(t.exec&&n.doExec(t.exec),n.body.push("}\n"),n.body.push("parent=p",i,";values=r",i+1,";xcount=n"+i+";xindex=i",i,"+1;xkey=k",i,";\n")):("if"==e||"switch"==e)&&n.body.push("}\n")},doFor:function(e,t){var n,i,r=this,o=r.level,a=o-1;n="."===e?"values":r.propNameRe.test(e)?r.parseTag(e):r.addFn(e)+r.callFn,r.maxLevel<o&&(r.maxLevel=o,r.body.push("var ")),i="."==e?"c"+o:"a"+a+"?c"+a+"[i"+a+"]:c"+a,r.body.push("i",o,"=0,n",o,"=0,c",o,"=",n,",a",o,"=",r.createArrayTest(o),",r",o,"=values,p",o,",k",o,";\n","p",o,"=parent=",i,"\n","if (c",o,"){if(a",o,"){n",o,"=c",o,".length;}else if (c",o,".isMixedCollection){c",o,"=c",o,".items;n",o,"=c",o,".length;}else if(c",o,".isStore){c",o,"=c",o,".data.items;n",o,"=c",o,".length;}else{c",o,"=[c",o,"];n",o,"=1;}}\n","for (xcount=n",o,";i",o,"<n"+o+";++i",o,"){\n","values=c",o,"[i",o,"]"),t.propName&&r.body.push(".",t.propName),r.body.push("\n","xindex=i",o,"+1\n"),t.between&&r.body.push('if(xindex>1){ out.push("',t.between,'"); } \n')},doForEach:function(e,t){var n,i,r=this,o=r.level,a=o-1;n="."===e?"values":r.propNameRe.test(e)?r.parseTag(e):r.addFn(e)+r.callFn,r.maxLevel<o&&(r.maxLevel=o,r.body.push("var ")),i="."==e?"c"+o:"a"+a+"?c"+a+"[i"+a+"]:c"+a,r.body.push("i",o,"=-1,n",o,"=0,c",o,"=",n,",a",o,"=",r.createArrayTest(o),",r",o,"=values,p",o,",k",o,";\n","p",o,"=parent=",i,"\n","for(k",o," in c",o,"){\n","xindex=++i",o,"+1;\n","xkey=k",o,";\n","values=c",o,"[k",o,"];"),t.propName&&r.body.push(".",t.propName),t.between&&r.body.push('if(xindex>1){ out.push("',t.between,'"); } \n')},createArrayTest:"isArray"in Array?function(e){return"Array.isArray(c"+e+")"}:function(e){return"ts.call(c"+e+')==="[object Array]"'},doExec:function(e){var t=this,n="f"+t.definitions.length,i=t.guards[t.strict?0:1];t.definitions.push("function "+n+"("+t.fnArgs+") {",i.doTry," var $v = values; with($v) {","  "+e," }",i.doCatch,"}"),t.body.push(n+t.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(e){var t=this,n="f"+t.definitions.length,i=t.guards[t.strict?0:1];return"."===e?t.definitions.push("function "+n+"("+t.fnArgs+") {"," return values","}"):".."===e?t.definitions.push("function "+n+"("+t.fnArgs+") {"," return parent","}"):t.definitions.push("function "+n+"("+t.fnArgs+") {",i.doTry," var $v = values; with($v) {","  return("+e+")"," }",i.doCatch,"}"),n},parseTag:function(e){var t,n,i,r,o,a=this,s=a.tagRe.exec(e);return s?(t=s[1],n=s[2],i=s[3],r=s[4],"."==t?(a.validTypes||(a.definitions.push("var validTypes={string:1,number:1,boolean:1};"),a.validTypes=!0),o='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'):o="#"==t?"xindex":"$"==t?"xkey":"parent."==t.substr(0,7)?t:isNaN(t)&&-1==t.indexOf("-")&&-1!=t.indexOf(".")?"values."+t:"values['"+t+"']",r&&(o="("+o+r+")"),n&&a.useFormat?(i=i?","+i:"","this."!=n.substr(0,5)?n="fm."+n+"(":n+="(",n+o+i+")"):o):null},evalTpl:function($){return eval($),$},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,"XTemplateCompiler"],function(){var e=this.prototype;e.fnArgs="out,values,parent,xindex,xcount,xkey",e.callFn=".call(this,"+e.fnArgs+")"}),Ext.cmd.derive("Ext.XTemplate",Ext.Template,{emptyObj:{},fn:null,strict:!1,apply:function(e,t){return this.applyOut(e,[],t).join("")},applyOut:function(e,t,n){var i,r=this;if(r.fn||(i=new Ext.util.XTemplateCompiler({useFormat:r.disableFormats!==!0,definitions:r.definitions,strict:r.strict}),r.fn=i.compile(r.html)),r.strict)r.fn(t,e,n||r.emptyObj,1,1);else try{r.fn(t,e,n||r.emptyObj,1,1)}catch(o){}return t},compile:function(){return this},statics:{getTpl:function(e,t){var n,i=e[t];if(i&&!i.isTemplate){if(i=Ext.ClassManager.dynInstantiate("Ext.XTemplate",i),e.hasOwnProperty(t))n=e;else for(n=e.self.prototype;n&&!n.hasOwnProperty(t);n=n.superclass);n[t]=i,i.owner=n}return i||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0),Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:!0,isInstance:!1,constructor:function(){var e=this;e.isInstance||(Ext.app.EventDomain.instances[e.type]=e),e.bus={},e.monitoredClasses=[]},dispatch:function(e,t,n){t=Ext.canonicalEventName(t);var i,r,o,a,s,l,d,u,c=this,h=c.bus,p=h[t];if(!p)return!0;for(i in p)if(p.hasOwnProperty(i)&&c.match(e,i,c.controller)){r=p[i];for(o in r)if(r.hasOwnProperty(o)&&(a=r[o],a.controller.isActive()))for(s=a.list,l=s.length,d=0;l>d;d++)if(u=s[d],u.fire.apply(u,n)===!1)return!1}return!0},listen:function(e,t){var n,i,r,o,a,s,l,d,u,c,h,p=this,f=p.bus,g=p.idProperty,m=p.monitoredClasses,x=m.length,v=t.getId(),y="component"===p.type,E=y?t.getRefMap():null;for(o in e)if(u=e[o],y&&(o=E[o]||o),u){g&&(o="*"===o?o:o.substring(1));for(c in u){for(a=null,s=u[c],l=t,c=Ext.canonicalEventName(c),d=new Ext.util.Event(t,c),Ext.isObject(s)&&(a=s,s=a.fn,l=a.scope||t,delete a.fn,delete a.scope),"string"==typeof s&&(s=l[s]),d.addListener(s,l,a),n=0;x>n;++n)h=m[n].hasListeners,h&&h._incr_(c);i=f[c]||(f[c]={}),i=i[o]||(i[o]={}),r=i[v]||(i[v]={controller:t,list:[]}),r.list.push(d)}}},match:function(e,t){var n=this.idProperty;return n?"*"===t||e[n]===t:!1},monitor:function(e){var t=this,n=e.isInstance?e:e.prototype,i=n.doFireEvent;t.monitoredClasses.push(e),n.doFireEvent=function(e,n){var r=i.apply(this,arguments);return r===!1||this.isSuspended(e)||(r=t.dispatch(this,e,n)),r}},unlisten:function(e){var t,n,i,r,o,a,s,l,d,u,c,h=this.bus,p=e,f=this.monitoredClasses,g=f.length;e.isController&&(p=e.getId());for(n in h)if(n=Ext.canonicalEventName(n),h.hasOwnProperty(n)&&(s=h[n]))for(a in s)if(t=s[a],u=t[p],u&&(i=u.list)){for(l=0,r=i.length;r>l;++l)for(o=i[l],o.clearListeners(),d=0;g>d;++d)c=f[d].hasListeners,c&&c._decr_(o.name);delete t[p]}},destroy:function(){this.monitoredClasses=this.bus=null}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0),Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:!0,type:"component",constructor:function(){this.callParent(),this.monitor(Ext.Widget)},dispatch:function(e,t,n){for(var i,r,o=e.lookupController(!1);o;){if(i=o.compDomain,i&&i.dispatch(e,t,n)===!1)return!1;r=o.getView(),o=r?r.lookupController(!0):null}return this.callParent(arguments)},match:function(e,t){return e.is(t)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0),Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,function(){var e=Ext.String.splitWords,t=Ext.Array.toMap;return{isProtoEl:!0,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:!1,constructor:function(n){var i,r,o=this;n&&(Ext.apply(o,n),i=o.cls,r=o.style,delete o.cls),o.classList=i?e(i):[],o.classMap=i?t(o.classList):{},r&&("string"==typeof r?o.style=Ext.Element.parseStyles(r):Ext.isFunction(r)?(o.styleFn=r,delete o.style):o.style=Ext.apply({},r))},flush:function(){this.flushClassList=[],this.removedClasses={},delete this.style,delete this.unselectableAttr},addCls:function(t){if(!t)return this;for(var n,i=this,r="string"==typeof t?e(t):t,o=r.length,a=i.classList,s=i.classMap,l=i.flushClassList,d=0;o>d;++d)n=r[d],s[n]||(s[n]=!0,a.push(n),l&&(l.push(n),delete i.removedClasses[n]));return i},hasCls:function(e){return e in this.classMap},removeCls:function(n){var i,r,o=this,a=o.classList,s=o.classList=[],l=t(e(n)),d=a.length,u=o.classMap,c=o.removedClasses;for(i=0;d>i;++i)r=a[i],l[r]?(c&&u[r]&&(c[r]=!0,Ext.Array.remove(o.flushClassList,r)),delete u[r]):s.push(r);return o},setStyle:function(e,t){var n=this,i=n.style||(n.style={});return"string"==typeof e?1===arguments.length?n.setStyle(Ext.Element.parseStyles(e)):i[e]=t:Ext.apply(i,e),n},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls),Ext.isOpera&&(this.unselectableAttr=!0)},writeTo:function(e){var t,n=this,i=n.flushClassList||n.classList,r=n.removedClasses;return n.styleFn?(t=Ext.apply({},n.styleFn()),Ext.apply(t,n.style)):t=n.style,e[n.clsProp]=i.join(" "),t&&(e[n.styleProp]=n.styleIsText?Ext.DomHelper.generateStyles(t,null,!0):t),r&&(r=Ext.Object.getKeys(r),r.length&&(e[n.removedProp]=r.join(" "))),n.unselectableAttr&&(e.unselectable="on"),e}}},1,0,0,0,0,0,[Ext.util,"ProtoElement"],0),Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",isLite:!1,getElement:function(e){return e},transformElement:function(e){return Ext.get(e)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],0),Ext.Factory=function(e){var t=this;t.aliasPrefix=e+".",t.cache={},t.name=e.replace(t.fixNameRe,t.fixNameFn),t.type=e},Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(e,t){var n,i,r,o,a=this,s=Ext.ClassManager,l=a.cache;if(e){if(e[a.instanceProp])return e;"string"==typeof e&&(o=e,e={},e[a.defaultProperty]=o),i=e.xclass,o=e.type}if(i){if(!(r=s.get(i)))return s.instantiate(i,e)}else if((o=o||t||a.defaultType)||(r=a.defaultClass),!r&&!(r=l[o])){if(n=a.aliasPrefix+o,i=s.getNameByAlias(n),!(r=i&&s.get(i)))return s.instantiateByAlias(n,e);l[o]=r}return r.isInstance?r:new r(e)},fixNameRe:/\.[a-z]/gi,fixNameFn:function(e){return e.substring(1).toUpperCase()},clearCache:function(){this.cache={}}},Ext.Factory.define=function(e,t){var n,i,r,o=Ext.Factory;return e.constructor===Object?Ext.Object.each(e,o.define,o):(i=new Ext.Factory(e),t&&(t.constructor===Object?(Ext.apply(i,t),"string"==typeof(n=i.xclass)&&(i.defaultClass=Ext.ClassManager.get(n))):i.defaultType=t),o[i.name]=r=i.create.bind(i),r.instance=i),r},Ext.cmd.derive("Ext.mixin.Factoryable",Ext.Base,{mixinId:"factoryable",onClassMixedIn:function(e){var t,n,i=e.prototype,r=i.factoryConfig,o=i.alias,a={};o=o&&o.length&&o[0],o&&(t=o.lastIndexOf("."))>0&&(a.type=o.substring(0,t),a.defaultType=o.substring(t+1)),r&&(delete i.factoryConfig,Ext.apply(a,r)),n=Ext.Factory.define(a.type,a),e.create===Ext.Base.create&&(e.create=n)}},0,0,0,0,0,0,[Ext.mixin,"Factoryable"],0),Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{factoryConfig:{defaultType:"dom"},isScroller:!0,config:{direction:void 0,directionLock:!1,disabled:null,element:void 0,indicators:null,maxPosition:null,maxUserPosition:null,minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,x:!0,y:!0},statics:{create:function(e){return Ext.Factory.scroller(e,Ext.supports.Touch?"touch":"dom")}},constructor:function(e){var t=this;Ext.Evented.prototype.constructor.call(this,e),t.onDomScrollEnd=Ext.Function.createBuffered(t.onDomScrollEnd,100,t)},addPartner:function(e,t){var n=this,i=n._partners||(n._partners={}),r=e._partners||(e._partners={});i[e.getId()]={scroller:e,axis:t},r[n.getId()]={scroller:n,axis:t}},applyElement:function(e){var t;return e&&(t=e.isElement?e:Ext.get(e)),t},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateSize:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,updateElement:function(e){e.on("scroll","onDomScroll",this)},refresh:function(){return this.fireEvent("refresh",this),this},removePartner:function(e){var t=this._partners,n=e._partners;t&&delete t[e.getId()],n&&delete n[this.getId()]},scrollBy:function(e,t,n){var i=this.getPosition();return e&&(e.length?(n=t,t=e[1],e=e[0]):"number"!=typeof e&&(n=t,t=e.y,e=e.x)),e="number"==typeof e?e+i.x:null,t="number"==typeof t?t+i.y:null,this.doScrollTo(e,t,n)},scrollIntoView:function(e,t,n,i){var r,o,a,s=this,l=s.getPosition(),d=s.getElement();e&&(r=Ext.fly(e).getScrollIntoViewXY(d,l.x,l.y),o=t===!1?l.x:r.x,a=r.y,i&&s.on({scrollend:"doHighlight",scope:s,single:!0,args:[e,i]}),s.doScrollTo(o,a,n))},scrollTo:function(e,t,n){var i;e&&(e.length?(n=t,t=e[1],e=e[0]):"number"!=typeof e&&(n=t,t=e.y,e=e.x)),(0>e||0>t)&&(i=this.getMaxPosition(),0>e&&(e+=i.x),0>t&&(t+=i.y)),this.doScrollTo(e,t,n)},updateDirection:function(e){var t,n,i=this;e?("auto"===e?(t=!0,n=!0):"vertical"===e?(t=!1,n=!0):"horizontal"===e?(t=!0,n=!1):"both"===e&&(t="scroll",n="scroll"),i.setX(t),i.setY(n)):(t=i.getX(),n=i.getY(),t&&n?e="scroll"===n&&"scroll"===t?"both":"auto":n?e="vertical":t&&(e="horizontal"),i._direction=e)},deprecated:{5:{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(e){return this.scrollTo(0,0,e)},scrollToEnd:function(e){return this.scrollTo(1/0,1/0,e)}}}},privates:{convertX:function(e){return e},doHighlight:function(e,t){t!==!0?Ext.fly(e).highlight(t):Ext.fly(e).highlight()},fireScrollStart:function(e,t){var n=this,i=n.component;n.invokePartners("onPartnerScrollStart",e,t),n.hasListeners.scrollstart&&n.fireEvent("scrollstart",n,e,t),i&&i.onScrollStart&&i.onScrollStart(e,t),Ext.GlobalEvents.fireEvent("scrollstart",n,e,t)},fireScroll:function(e,t){var n=this,i=n.component;n.invokePartners("onPartnerScroll",e,t),n.hasListeners.scroll&&n.fireEvent("scroll",n,e,t),i&&i.onScrollMove&&i.onScrollMove(e,t),Ext.GlobalEvents.fireEvent("scroll",n,e,t)},fireScrollEnd:function(e,t){var n=this,i=n.component;n.invokePartners("onPartnerScrollEnd",e,t),n.hasListeners.scrollend&&n.fireEvent("scrollend",n,e,t),i&&i.onScrollEnd&&i.onScrollEnd(e,t),Ext.GlobalEvents.fireEvent("scrollend",n,e,t)},initXStyle:function(){var e=this.getElement(),t=this.getX();t?t===!0&&(t="auto"):t="hidden",e&&e.setStyle("overflow-x",t)},initYStyle:function(){var e=this.getElement(),t=this.getY();t?t===!0&&(t="auto"):t="hidden",e&&e.setStyle("overflow-y",t)},invokePartners:function(e,t,n){var i,r,o=this._partners;if(!this.suspendSync)for(r in o)i=o[r].scroller,i[e](this,t,n)},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){this.suspendSync&&this.suspendSync--},onDomScroll:function(){var e=this,t=e.getPosition(),n=t.x,i=t.y;e.isScrolling||(e.isScrolling=!0,e.fireScrollStart(n,i)),e.fireScroll(n,i),e.onDomScrollEnd()},onDomScrollEnd:function(){var e=this,t=e.getPosition(),n=t.x,i=t.y;e.isScrolling=!1,e.trackingScrollLeft=n,e.trackingScrollTop=i,e.fireScrollEnd(n,i)},onPartnerScroll:function(e,t,n){var i=e._partners[this.getId()].axis;i&&("x"===i?n=null:"y"===i&&(t=null)),this.doScrollTo(t,n)},restoreState:function(){var e,t=this,n=t.getElement();n&&(e=n.dom,void 0!==t.trackingScrollTop&&(e.scrollTop=t.trackingScrollTop,e.scrollLeft=t.trackingScrollLeft))},onPartnerScrollStart:function(){this.suspendPartnerSync()},onPartnerScrollEnd:function(){this.resumePartnerSync()}}},1,0,0,0,["scroller.scroller"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.scroll,"Scroller"],0),Ext.define("Ext.rtl.scroll.Scroller",{override:"Ext.scroll.Scroller",config:{rtl:null},updateRtl:Ext.emptyFn}),Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:!0,isEnded:!1,constructor:function(e){return this.initConfig(e),this},applyStartTime:function(e){return e||(e=Ext.Date.now()),e},updateStartTime:function(){this.reset()},reset:function(){this.isEnded=!1},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0),Ext.cmd.derive("Ext.fx.easing.Momentum",Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(e){var t=Math.log(1-e/10);this.theta=t,this.alpha=t/this.getAcceleration()},updateStartVelocity:function(e){this.velocity=e*this.getAcceleration()},updateAcceleration:function(e){this.velocity=this.getStartVelocity()*e,this.alpha=this.theta/e},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var e=Ext.Date.now()-this.getStartTime();return Math.exp(e*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,"Momentum"],0),Ext.cmd.derive("Ext.fx.easing.Bounce",Ext.fx.easing.Abstract,{config:{springTension:.3,acceleration:30,startVelocity:0},getValue:function(){var e=Ext.Date.now()-this.getStartTime(),t=e/this.getAcceleration(),n=t*Math.pow(Math.E,-this.getSpringTension()*t);return this.getStartValue()+this.getStartVelocity()*n}},0,0,0,0,0,0,[Ext.fx.easing,"Bounce"],0),Ext.cmd.derive("Ext.fx.easing.BoundMomentum",Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:.01,startVelocity:0},applyMomentum:function(e,t){return Ext.factory(e,Ext.fx.easing.Momentum,t)},applyBounce:function(e,t){return Ext.factory(e,Ext.fx.easing.Bounce,t)},updateStartTime:function(e){this.getMomentum().setStartTime(e),Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(e){this.getMomentum().setStartVelocity(e)},updateStartValue:function(e){this.getMomentum().setStartValue(e)},reset:function(){return this.lastValue=null,this.isBouncingBack=!1,this.isOutOfBound=!1,Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var e,t,n=this.getMomentum(),i=this.getBounce(),r=n.getStartVelocity(),o=r>0?1:-1,a=this.getMinMomentumValue(),s=this.getMaxMomentumValue(),l=1==o?s:a,d=this.lastValue;if(0===r)return this.getStartValue();if(!this.isOutOfBound){if(e=n.getValue(),t=n.getVelocity(),Math.abs(t)<this.getMinVelocity()&&(this.isEnded=!0),e>=a&&s>=e)return e;this.isOutOfBound=!0,i.setStartTime(Ext.Date.now()).setStartVelocity(t).setStartValue(l)}return e=i.getValue(),this.isEnded||(this.isBouncingBack?Math.round(e)==l&&(this.isEnded=!0):null!==d&&(1==o&&d>e||-1==o&&e>d)&&(this.isBouncingBack=!0)),this.lastValue=e,e}},0,0,0,0,0,0,[Ext.fx.easing,"BoundMomentum"],0),Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(e){this.distance=this.getEndValue()-e},updateEndValue:function(e){this.distance=e-this.getStartValue()},getValue:function(){var e=Ext.Date.now()-this.getStartTime(),t=this.getDuration();return e>t?(this.isEnded=!0,this.getEndValue()):this.getStartValue()+e/t*this.distance}},0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0),Ext.cmd.derive("Ext.fx.easing.EaseOut",Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var e=Ext.Date.now()-this.getStartTime(),t=this.getDuration(),n=this.getStartValue(),i=this.getEndValue(),r=this.distance,o=e/t,a=1-o,s=1-Math.pow(a,this.getExponent()),l=n+s*r;return e>=t?(this.isEnded=!0,i):l}},0,0,0,0,["easing.ease-out"],0,[Ext.fx.easing,"EaseOut"],0),Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:!1,isTranslatable:!0,constructor:function(e){this.mixins.observable.constructor.call(this,e),this.position={x:0,y:0}},factoryEasing:function(e){return Ext.factory(e,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(e){this.getEasingX()||this.setEasingX(this.factoryEasing(e)),this.getEasingY()||this.setEasingY(this.factoryEasing(e))},applyEasingX:function(e){return this.factoryEasing(e)},applyEasingY:function(e){return this.factoryEasing(e)},doTranslate:Ext.emptyFn,translate:function(e,t,n){return n?this.translateAnimated(e,t,n):(this.isAnimating&&this.stopAnimation(),isNaN(e)||"number"!=typeof e||(this.x=e),isNaN(t)||"number"!=typeof t||(this.y=t),void this.doTranslate(e,t))},translateAxis:function(e,t,n){var i,r;return"x"==e?i=t:r=t,this.translate(i,r,n)},getPosition:function(){var e=this,t=e.position;return t.x=-e.x,t.y=-e.y,t},animate:function(e,t){return this.activeEasingX=e,this.activeEasingY=t,this.isAnimating=!0,this.lastX=null,this.lastY=null,Ext.AnimationQueue.start(this.doAnimationFrame,this),this.fireEvent("animationstart",this,this.x,this.y),this},translateAnimated:function(e,t,n){var i=this;Ext.isObject(n)||(n={}),i.isAnimating&&i.stopAnimation(),i.callback=n.callback,i.callbackScope=n.scope;var r=Ext.Date.now(),o=n.easing,a="number"==typeof e?n.easingX||o||i.getEasingX()||!0:null,s="number"==typeof t?n.easingY||o||i.getEasingY()||!0:null;return a&&(a=i.factoryEasing(a),a.setStartTime(r),a.setStartValue(i.x),a.setEndValue(e),"duration"in n&&a.setDuration(n.duration)),s&&(s=i.factoryEasing(s),s.setStartTime(r),s.setStartValue(i.y),s.setEndValue(t),"duration"in n&&s.setDuration(n.duration)),i.animate(a,s)},doAnimationFrame:function(){var e,t,n=this,i=n.activeEasingX,r=n.activeEasingY,o=Date.now();if(n.isAnimating){if(n.lastRun=o,null===i&&null===r)return void n.stopAnimation();null!==i?(n.x=e=Math.round(i.getValue()),i.isEnded&&(n.activeEasingX=null,n.fireEvent("axisanimationend",n,"x",e))):e=n.x,null!==r?(n.y=t=Math.round(r.getValue()),r.isEnded&&(n.activeEasingY=null,n.fireEvent("axisanimationend",n,"y",t))):t=n.y,(n.lastX!==e||n.lastY!==t)&&(n.doTranslate(e,t),n.lastX=e,n.lastY=t),n.fireEvent("animationframe",n,e,t)}},stopAnimation:function(){var e=this;e.isAnimating&&(e.activeEasingX=null,e.activeEasingY=null,e.isAnimating=!1,Ext.AnimationQueue.stop(e.doAnimationFrame,e),e.fireEvent("animationend",e,e.x,e.y),e.callback&&(e.callback.call(e.callbackScope),e.callback=null))},refresh:function(){this.translate(this.x,this.y)},destroy:function(){this.isAnimating&&this.stopAnimation(),Ext.Evented.prototype.destroy.apply(this,arguments)}},1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0),Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(e){return e?Ext.get(e):void 0},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0),Ext.cmd.derive("Ext.util.translatable.CssTransform",Ext.util.translatable.Dom,{doTranslate:function(e,t){var n=this.getElement();this.isDestroyed||n.isDestroyed||n.translate(e,t)},destroy:function(){var e=this.getElement();e&&!e.isDestroyed&&(e.dom.style.webkitTransform=null),Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssTransform"],0),Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",config:{useWrapper:!0},getWrapper:function(){var e,t=this.wrapper,n=this.getElement();if(!t){if(e=n.getParent(),!e)return null;e.hasCls("x-translatable-hboxfix")&&(e=e.getParent()),t=this.getUseWrapper()?n.wrap():e,n.addCls("x-translatable"),t.addCls("x-translatable-container"),this.wrapper=t,t.on("painted",function(){this.isAnimating||this.refresh()},this),this.refresh()}return t},doTranslate:function(e,t){var n,i=this.getWrapper();i&&(n=i.dom,"number"==typeof e&&(n.scrollLeft=5e5-e),"number"==typeof t&&(n.scrollTop=5e5-t))},destroy:function(){var e=this.getElement(),t=this.wrapper;t&&(e.isDestroyed||(this.getUseWrapper()&&t.doReplaceWith(e),e.removeCls("x-translatable")),t.isDestroyed||(t.removeCls("x-translatable-container"),t.un("painted","refresh",this)),delete this.wrapper,delete this._element),Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0),Ext.cmd.derive("Ext.util.translatable.ScrollParent",Ext.util.translatable.Dom,{isScrollParent:!0,applyElement:function(e){var t=Ext.get(e);return t&&(this.parent=t.parent()),t},doTranslate:function(e,t){var n=this.parent;n.setScrollLeft(Math.round(-e)),n.setScrollTop(Math.round(-t))},getPosition:function(){var e=this,t=e.position,n=e.parent;return t.x=n.getScrollLeft(),t.y=n.getScrollTop(),t}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollParent"],0),Ext.cmd.derive("Ext.util.translatable.CssPosition",Ext.util.translatable.Dom,{doTranslate:function(e,t){var n=this.getElement().dom.style;"number"==typeof e&&(n.left=e+"px"),"number"==typeof t&&(n.top=t+"px")},destroy:function(){var e=this.getElement().dom.style;e.left=null,e.top=null,Ext.util.translatable.Dom.prototype.destroy.apply(this,arguments)}},0,0,0,0,0,0,[Ext.util.translatable,"CssPosition"],0),Ext.cmd.derive("Ext.util.Translatable",Ext.Base,{constructor:function(e){var t=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(e)){case"scrollposition":return new t.ScrollPosition(e);case"scrollparent":return new t.ScrollParent(e);case"csstransform":return new t.CssTransform(e);case"cssposition":return new t.CssPosition(e)}}},1,0,0,0,0,0,[Ext.util,"Translatable"],0),Ext.cmd.derive("Ext.scroll.Indicator",Ext.Widget,{config:{axis:null,hideAnimation:!0,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",setLength:"setWidth",translate:"translateX"},y:{side:"t",getSize:"getWidth",setLength:"setHeight",translate:"translateY"}},oppositeAxis:{x:"y",y:"x"},cls:"x-scroll-indicator",applyHideAnimation:function(e){return e&&(e=Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,e)),e},constructor:function(e){var t,n=this;Ext.Widget.prototype.constructor.call(this,e),t=n.getAxis(),n.names=n.names[t],n.element.addCls(n.cls+" "+n.cls+"-"+t)},hide:function(){var e=this,t=e.getHideDelay();t?e._hideTimer=Ext.defer(e.doHide,t,e):e.doHide()},setValue:function(e){var t,n=this,i=n.element,r=n.names,o=n.getAxis(),a=n.getScroller(),s=a.getMaxUserPosition()[o],l=a.getElementSize()[o],d=n.length,u=n.getMinLength(),c=d,h=l-d-n.sizeAdjust,p=Math.round,f=Math.max;0>e?(c=p(f(d+d*e/l,u)),t=0):e>s?(c=p(f(d-d*(e-s)/l,u)),t=h+d-c):t=p(e/s*h),n[r.translate](t),i[r.setLength](c)},show:function(){var e=this,t=e.element,n=t.getActiveAnimation();n&&n.end(),e._inDom||(e.getScroller().getElement().appendChild(t),e._inDom=!0,e.size||e.cacheStyles()),e.refreshLength(),clearTimeout(e._hideTimer),t.setStyle("opacity","")},privates:{cacheStyles:function(){var e=this,t=e.element,n=e.names;e.size=t[n.getSize](),e.margin=t.getMargin(n.side)},doHide:function(){var e=this.getHideAnimation(),t=this.element;e?t.animate(e):t.setStyle("opacity",0)},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle("opacity","0")},refreshLength:function(){var e=this,t=e.names,n=e.getAxis(),i=e.getScroller(),r=i.getSize()[n],o=i.getElementSize()[n],a=o/r,s=2*e.margin,l=e.hasOpposite()?s+e.size:s,d=Math.max(Math.round((o-l)*a),e.getMinLength());e.sizeAdjust=l,e.length=d,e.element[t.setLength](d)},translateX:function(e){this.element.translate(e)},translateY:function(e){this.element.translate(0,e)}}},1,["scrollindicator"],["widget","scrollindicator"],{widget:!0,scrollindicator:!0},["widget.scrollindicator"],0,[Ext.scroll,"Indicator"],0),Ext.define("Ext.rtl.scroll.Indicator",{override:"Ext.scroll.Indicator",privates:{translateX:function(e){this.getScroller().getRtl()&&(e=-e),arguments.callee.$previous.call(this,e)}}}),Ext.cmd.derive("Ext.scroll.TouchScroller",Ext.scroll.Scroller,{isTouchScroller:!0,config:{autoRefresh:!0,bounceEasing:{duration:400},elementSize:void 0,indicators:!0,fps:"auto",maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:.5},bounce:{acceleration:30,springTension:.3},minVelocity:1},outOfBoundRestrictFactor:.5,innerElement:null,size:void 0,slotSnapEasing:{duration:150},slotSnapSize:{x:0,y:0},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:"auto",useWrapper:!1}},cls:"x-scroll-container",scrollerCls:"x-scroll-scroller",dragStartTime:0,dragEndTime:0,isDragging:!1,isAnimating:!1,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:"onTouchStart",touchmove:"onTouchMove",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},refreshCounter:0,constructor:function(e){var t=this,n="onEvent";t.elementListeners={touchstart:n,touchmove:n,dragstart:n,drag:n,dragend:n,scope:t},t.minPosition={x:0,y:0},t.startPosition={x:0,y:0},t.position={x:0,y:0},t.velocity={x:0,y:0},t.isAxisEnabledFlags={x:!1,y:!1},t.flickStartPosition={x:0,y:0},t.flickStartTime={x:0,y:0},t.lastDragPosition={x:0,y:0},t.dragDirection={x:0,y:0},Ext.GlobalEvents.on("idle",t.onIdle,t),Ext.scroll.Scroller.prototype.constructor.call(this,e),t.refreshAxes()},applyBounceEasing:function(e){var t=Ext.fx.easing.EaseOut;return{x:Ext.factory(e,t),y:Ext.factory(e,t)}},applyElementSize:function(e){var t,n,i,r=this.getElement();return r?(t=r.dom)?(null==e?(n=t.clientWidth,i=t.clientHeight):(n=e.x,i=e.y),{x:n,y:i}):void 0:null},applyIndicators:function(e,t){var n,i,r,o,a=this;return e?(e===!0?n=i={}:(r=e.x,o=e.y,r||o?(n=null==r||r===!0?{}:r,i=null==r||o===!0?{}:o):n=i=e),t?(n?t.x.setConfig(n):(t.x.destroy(),t.x=null),i?t.y.setConfig(i):(t.y.destroy(),t.y=null),e=t):(e={x:null,y:null},n&&(e.x=new Ext.scroll.Indicator(Ext.applyIf({axis:"x",scroller:a},n))),i&&(e.y=new Ext.scroll.Indicator(Ext.applyIf({axis:"y",scroller:a},i))))):t&&(t.x.destroy(),t.y.destroy(),t.x=null,t.y=null),e},applyMomentumEasing:function(e){var t=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(e,t),y:Ext.factory(e,t)}},applyInnerElement:function(e){return e&&!e.isElement&&(e=Ext.get(e)),e},applySize:function(e){var t,n,i,r,o;if(null==e){if(t=this.getElement(),!t)return null;n=t.dom,i=this.getInnerElement().dom,r=Math.max(i.scrollWidth,n.clientWidth),o=Math.max(i.scrollHeight,n.clientHeight)}else"number"==typeof e?(r=e,o=e):(r=e.x,o=e.y);return{x:r,y:o}},applySlotSnapOffset:function(e){
return"number"==typeof e?{x:e,y:e}:e},applySlotSnapSize:function(e){return"number"==typeof e?{x:e,y:e}:e},applySlotSnapEasing:function(e){var t=Ext.fx.easing.EaseOut;return{x:Ext.factory(e,t),y:Ext.factory(e,t)}},applyTranslatable:function(e,t){return Ext.factory(e,Ext.util.Translatable,t)},destroy:function(){var e=this,t=e.getElement(),n=e.getInnerElement(),i=e.sizeMonitors;i&&(i.element.destroy(),i.container.destroy()),t&&!t.isDestroyed&&t.removeCls(e.cls),n&&!n.isDestroyed&&n.removeCls(e.scrollerCls),e._isWrapped&&(t.isDestroyed||e.unwrapContent(),n.destroy(),e.FixedHBoxStretching&&n.parent().destroy()),e.setElement(null),e.setInnerElement(null),Ext.GlobalEvents.un("idle",e.onIdle,e),Ext.destroy(e.getTranslatable()),Ext.scroll.Scroller.prototype.destroy.apply(this,arguments)},getPosition:function(){return this.position},refresh:function(e,t){++this.refreshCounter,e&&this.doRefresh(t)},updateAutoRefresh:function(e){this.toggleResizeListeners(e)},updateBounceEasing:function(e){this.getTranslatable().setEasingX(e.x).setEasingY(e.y)},updateElementSize:function(){this.isConfiguring||this.refreshAxes()},updateDisabled:function(e){this.isConfiguring||(e?this.detachListeners():this.attachListeners())},updateElement:function(e,t){var n,i=this,r=i.getInnerElement(),o=this.FixedHBoxStretching;r||(r=e.dom.firstChild,o&&r&&(r=r.dom.firstChild),r&&1===r.nodeType&&Ext.fly(r).hasCls(i.scrollerCls)||(r=i.wrapContent(e)),i.setInnerElement(r)),o||e.addCls(i.cls),i.isConfiguring&&(i.getTranslatable().isScrollParent||(n=i.elementListeners,n.mousewheel="onMouseWheel",n.scroll={fn:"onElementScroll",delegated:!1,scope:i})),i.getDisabled()||i.attachListeners(),i.isConfiguring||(i.getAutoRefresh()&&i.toggleResizeListeners(!0),i.setSize(null),i.setElementSize(null)),Ext.scroll.Scroller.prototype.updateElement.call(this,e,t)},updateFps:function(e){"auto"!==e&&this.getTranslatable().setFps(e)},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(e){e&&e.addCls(this.scrollerCls),this.getTranslatable().setElement(e)},updateSize:function(){this.isConfiguring||this.refreshAxes()},updateTranslatable:function(e){e.setElement(this.getInnerElement()),e.on({animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this})},updateX:function(){this.isConfiguring||this.refreshAxes()},updateY:function(){this.isConfiguring||this.refreshAxes()},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(e){return Math.min(this.getMaxPosition().x,Math.max(e,0))},constrainY:function(e){return Math.min(this.getMaxPosition().y,Math.max(e,0))},convertEasingConfig:function(e){return e},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(e){var t,n,i=this;i.refreshCounter&&i.getElement()&&(i.stopAnimation(),i.getTranslatable().refresh(),e?(t=e.size,n=e.elementSize,t&&i.setSize(t),n&&i.setElementSize(n)):(i.setSize(null),i.setElementSize(null)),i.fireEvent("refresh",i),i.refreshCounter=0)},doScrollTo:function(e,t,n,i){var r,o=this,a=o.isDragging;if(o.isDestroyed||!o.getElement())return o;i=i||o.isDragging;var s,l,d=o.getTranslatable(),u=o.position,c=!1;return(!a||o.isAxisEnabled("x"))&&(isNaN(e)||"number"!=typeof e?e=u.x:(i||(e=o.constrainX(e)),u.x!==e&&(u.x=e,c=!0)),s=o.convertX(-e)),(!a||o.isAxisEnabled("y"))&&(isNaN(t)||"number"!=typeof t?t=u.y:(i||(t=o.constrainY(t)),u.y!==t&&(u.y=t,c=!0)),l=-t),c&&(n?(r=function(){o.onScroll()},n===!0?n={callback:r}:n.callback?n.callback=Ext.Function.createSequence(n.callback,r):n.callback=r,d.translateAnimated(s,l,n)):(d.translate(s,l),o.onScroll())),o},getAnimationEasing:function(e,t){if(!this.isAxisEnabled(e))return null;var n,i,r=this,o=r.position[e],a=r.getMinUserPosition()[e],s=r.getMaxUserPosition()[e],l=r.getMaxAbsoluteVelocity(),d=null,u=r.dragEndTime,c=t.flick.velocity[e],h="x"===e;return a>o?d=a:o>s&&(d=s),h&&(o=r.convertX(o),d=r.convertX(d)),null!==d?(i=r.getBounceEasing()[e],i.setConfig({startTime:u,startValue:-o,endValue:-d}),i):0===c?null:(-l>c?c=-l:c>l&&(c=l),Ext.browser.is.IE&&(c*=2),i=r.getMomentumEasing()[e],n={startTime:u,startValue:-o,startVelocity:1.5*c,minMomentumValue:-s,maxMomentumValue:0},h&&r.convertEasingConfig(n),i.setConfig(n),i)},getSnapPosition:function(e){var t,n,i,r,o=this,a=o.getSlotSnapSize()[e],s=null;return 0!==a&&o.isAxisEnabled(e)&&(t=o.position[e],n=o.getSlotSnapOffset()[e],i=o.getMaxUserPosition()[e],r=Math.floor((t-n)%a),0!==r&&(s=t!==i&&Math.abs(r)>a/2?Math.min(i,t+(r>0?a-r:r-a)):t-r)),s},hideIndicators:function(){var e,t,n=this,i=n.getIndicators();i&&(n.isAxisEnabled("x")&&(e=i.x,e&&e.hide()),n.isAxisEnabled("y")&&(t=i.y,t&&t.hide()))},isAxisEnabled:function(e){return this.getX(),this.getY(),this.isAxisEnabledFlags[e]},onAnimationEnd:function(){this.snapToBoundary(),this.onScrollEnd()},onAnimationFrame:function(e,t,n){var i=this.position;i.x=this.convertX(-t),i.y=-n,this.onScroll()},onAxisDrag:function(e,t){if(this.isAxisEnabled(e)){var n,i=this,r=i.flickStartPosition,o=i.flickStartTime,a=i.lastDragPosition,s=i.dragDirection,l=i.position[e],d=i.getMinUserPosition()[e],u=i.getMaxUserPosition()[e],c=i.startPosition[e],h=a[e],p=c-t,f=s[e],g=i.getOutOfBoundRestrictFactor(),m=i.getStartMomentumResetTime(),x=Ext.Date.now();d>p?p*=g:p>u&&(n=p-u,p=u+n*g),p>h?s[e]=1:h>p&&(s[e]=-1),(0!==f&&s[e]!==f||x-o[e]>m)&&(r[e]=l,o[e]=x),a[e]=p}},onDomScroll:function(){var e,t,n=this;n.getTranslatable().isScrollParent&&(e=n.getElement().dom,t=n.position,t.x=e.scrollLeft,t.y=e.scrollTop),Ext.scroll.Scroller.prototype.onDomScroll.call(this)},onDrag:function(e){var t=this,n=t.lastDragPosition;t.isDragging&&(t.onAxisDrag("x",t.convertX(e.deltaX)),t.onAxisDrag("y",e.deltaY),t.doScrollTo(n.x,n.y))},onDragEnd:function(e){var t,n,i=this;i.isDragging&&(i.dragEndTime=Ext.Date.now(),i.onDrag(e),i.isDragging=!1,t=i.getAnimationEasing("x",e),n=i.getAnimationEasing("y",e),t||n?i.getTranslatable().animate(t,n):i.onScrollEnd())},onDragStart:function(e){var t=this,n=t.getDirection(),i=e.absDeltaX,r=e.absDeltaY,o=t.getDirectionLock(),a=t.startPosition,s=t.flickStartPosition,l=t.flickStartTime,d=t.lastDragPosition,u=t.position,c=t.dragDirection,h=u.x,p=u.y,f=Ext.Date.now();if(t.isDragging=!0,o&&"both"!==n){if(!("horizontal"===n&&i>r||"vertical"===n&&r>i))return void(t.isDragging=!1);e.stopPropagation()}d.x=h,d.y=p,s.x=h,s.y=p,a.x=h,a.y=p,l.x=f,l.y=f,c.x=0,c.y=0,t.dragStartTime=f,t.isDragging=!0,t.onScrollStart()},onElementResize:function(e,t){this.refresh(!0,{elementSize:{x:t.width,y:t.height}})},onElementScroll:function(e,t){t.scrollTop=t.scrollLeft=0},onEvent:function(e){var t=this,n=e.browserEvent;t.self.isTouching&&!t.isTouching||t.getTranslatable().isScrollParent&&(t.isMouseEvent[n.type]||"mouse"===n.pointerType)||!t.getY()&&!t.getX()||t[t.listenerMap[e.type]](e)},onIdle:function(){this.doRefresh()},onInnerElementResize:function(e,t){this.refresh(!0,{size:{x:t.width,y:t.height}})},onMouseWheel:function(e){var t=this,n=e.getWheelDeltas(),i=-n.x,r=-n.y,o=t.position,a=t.getMaxUserPosition(),s=t.getMinUserPosition(),l=Math.max,d=Math.min,u=l(d(o.x+i,a.x),s.x),c=l(d(o.y+r,a.y),s.y);i=u-o.x,r=c-o.y,(i||r)&&(e.stopEvent(),t.onScrollStart(),t.scrollBy(i,r),t.onScroll(),t.onScrollEnd())},onPartnerScrollEnd:function(){this.hideIndicators()},onPartnerScrollStart:function(){this.showIndicators()},onScroll:function(){var e,t,n=this,i=n.position,r=i.x,o=i.y,a=n.getIndicators();a&&(n.isAxisEnabled("x")&&(e=a.x,e&&e.setValue(r)),n.isAxisEnabled("y")&&(t=a.y,t&&t.setValue(o))),n.fireScroll(r,o)},onScrollEnd:function(){var e=this,t=e.position;e.isTouching||e.snapToSlot()||(e.hideIndicators(),Ext.isScrolling=!1,e.fireScrollEnd(t.x,t.y))},onScrollStart:function(){var e=this,t=e.position;e.showIndicators(),Ext.isScrolling=!0,e.fireScrollStart(t.x,t.y)},onTouchEnd:function(){var e=this;e.isTouching=e.self.isTouching=!1,!e.isDragging&&e.snapToSlot()&&e.onScrollStart()},onTouchMove:function(e){e.preventDefault()},onTouchStart:function(){var e=this;e.isTouching=e.self.isTouching=!0,Ext.getDoc().on({touchend:"onTouchEnd",scope:e,single:!0}),e.stopAnimation()},refreshAxes:function(){var e,t,n,i,r,o,a=this,s=a.isAxisEnabledFlags,l=a.getSize(),d=a.getElementSize(),u=a.getIndicators();l&&d&&(e=Math.max(0,l.x-d.x),t=Math.max(0,l.y-d.y),n=a.getX(),i=a.getY(),a.setMaxPosition({x:e,y:t}),n===!0||"auto"===n?s.x=!!e:n===!1?(s.x=!1,r=u&&u.x,r&&r.hide()):"scroll"===n&&(s.x=!0),i===!0||"auto"===i?s.y=!!t:i===!1?(s.y=!1,o=u&&u.y,o&&o.hide()):"scroll"===i&&(s.y=!0),a.setMaxUserPosition({x:s.x?e:0,y:s.y?t:0}),1===Ext.supports.touchScroll&&(a.initXStyle(),a.initYStyle()))},showIndicators:function(){var e,t,n=this,i=n.getIndicators();i&&(n.isAxisEnabled("x")&&(e=i.x,e&&e.show()),n.isAxisEnabled("y")&&(t=i.y,t&&t.show()))},snapToBoundary:function(){if(!this.isConfiguring){var e=this,t=e.position,n=e.getMinUserPosition(),i=e.getMaxUserPosition(),r=n.x,o=n.y,a=i.x,s=i.y,l=Math.round(t.x),d=Math.round(t.y);r>l?l=r:l>a&&(l=a),o>d?d=o:d>s&&(d=s),e.doScrollTo(l,d)}},snapToSlot:function(){var e=this,t=e.getSnapPosition("x"),n=e.getSnapPosition("y"),i=e.getSlotSnapEasing();return null!==t||null!==n?(e.doScrollTo(t,n,{easingX:i.x,easingY:i.y}),!0):!1},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(e){var t=this,n=t.getElement(),i=e?"on":"un";n&&(n[i]("resize","onElementResize",t),t.getInnerElement()[i]("resize","onInnerElementResize",t))},unwrapContent:function(){for(var e,t=this.getInnerElement().dom,n=this.getElement().dom;e=t.firstChild;)n.insertBefore(e,t)},wrapContent:function(e){for(var t,n=document.createElement("div"),i=e.dom;t=i.lastChild;)n.insertBefore(t,n.firstChild);return i.appendChild(n),this.setInnerElement(n),this._isWrapped=!0,this.getInnerElement()}}},1,0,0,0,["scroller.touch"],0,[Ext.scroll,"TouchScroller"],0),Ext.define("Ext.rtl.scroll.TouchScroller",{override:"Ext.scroll.TouchScroller",_rtlCls:"x-rtl",updateRtl:function(e){var t,n,i,r;e&&(t=this.getIndicators(),t&&(r=this._rtlCls,n=t.x,i=t.y,n&&n.element.addCls(r),i&&i.element.addCls(r)))},privates:{convertX:function(e){return e&&this.getRtl()&&(e=-e),e},convertEasingConfig:function(e){var t=e.minMomentumValue,n=e.maxMomentumValue;this.getRtl()&&(e.minMomentumValue=n,e.maxMomentumValue=-t)}}}),Ext.cmd.derive("Ext.scroll.DomScroller",Ext.scroll.Scroller,{isDomScroller:!0,getMaxPosition:function(){var e,t=this.getElement(),n=0,i=0;return t&&!t.isDestroyed&&(e=t.dom,n=e.scrollWidth-e.clientWidth,i=e.scrollHeight-e.clientHeight),{x:n,y:i}},getMaxUserPosition:function(){var e,t=this,n=t.getElement(),i=0,r=0;return n&&!n.isDestroyed&&(e=n.dom,t.getX()&&(i=e.scrollWidth-e.clientWidth),t.getY()&&(r=e.scrollHeight-e.clientHeight)),{x:i,y:r}},getPosition:function(){var e,t=this.getElement(),n=0,i=0;return t&&!t.isDestroyed&&(e=this.getElementScroll(t),n=e.left,i=e.top),{x:n,y:i}},getSize:function(){var e,t,n=this.getElement();return n&&!n.isDestroyed?(t=n.dom,e={x:t.scrollWidth,y:t.scrollHeight}):e={x:0,y:0},e},setSize:Ext.emptyFn,updateElement:function(e,t){this.initXStyle(),this.initYStyle(),Ext.scroll.Scroller.prototype.updateElement.call(this,e,t)},updateX:function(){this.initXStyle()},updateY:function(){this.initYStyle()},privates:{doScrollTo:function(e,t,n){var i,r,o,a,s,l=this,d=l.getElement();d&&!d.isDestroyed&&(r=this.getElement().dom,a=e===1/0,s=t===1/0,(a||s)&&(i=l.getMaxPosition(),a&&(e=i.x),s&&(t=i.y)),e=l.convertX(e),n?(o={},null!=t&&(o.scrollTop=t),null!=e&&(o.scrollLeft=e),d.animate(Ext.mergeIf({to:{scrollTop:t,scrollLeft:e}},n))):(null!=t&&(r.scrollTop=t),null!=e&&(r.scrollLeft=e)))},getElementScroll:function(e){return e.getScroll()},stopAnimation:function(){var e=this.getElement().getActiveAnimation();e&&e.end()}}},0,0,0,0,["scroller.dom"],0,[Ext.scroll,"DomScroller"],0),Ext.define("Ext.rtl.scroll.DomScroller",{override:"Ext.scroll.DomScroller",privates:{convertX:function(e){var t;return this.getRtl()&&(t=this.getElement(),t&&(e=t.rtlNormalizeScrollLeft(e))),e},getElementScroll:function(e){return this.getRtl()?e.rtlGetScroll():e.getScroll()}}}),Ext.cmd.derive("Ext.util.Floating",Ext.Base,{mixinId:"floating",focusOnToFront:!0,shadow:"sides",animateShadow:!1,constrain:!1,config:{activeCounter:0,alwaysOnTop:!1},preventDefaultAlign:!1,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var e,t,n=this,i=n.el,r=n.shadow;r&&(t={mode:r===!0?"sides":r},e=n.shadowOffset,e&&(t.offset=e),t.animate=n.animateShadow,t.fixed=n.fixed,i.enableShadow(t,!1)),(n.shim||Ext.useShims)&&i.enableShim({fixed:n.fixed},!1),i.setVisibilityMode(n._visModeMap[n.hideMode]),n.modal&&!Ext.enableFocusManager&&n.el.on("keydown",n.onKeyDown,n),n.el.on({mousedown:n.onMouseDown,scope:n,capture:!0}),n.registerWithOwnerCt(),n.initHierarchyEvents()},alignTo:function(e,t,n,i){var r=this;r._lastAlignToEl||Ext.on("scroll",r.onAlignToScroll,r),r._lastAlignToEl=e,r._lastAlignToPos=t,r.mixins.positionable.alignTo.call(r,e,t,n,i)},initFloatConstrain:function(){var e=this,t=e.floatParent;!e.constrain&&!e.constrainHeader||e.constrainTo||(e.constrainTo=t?t.getTargetEl():e.container)},initHierarchyEvents:function(){var e=this,t=this.syncHidden;e.hasHierarchyEventListeners||(e.mon(Ext.GlobalEvents,{hide:t,collapse:t,show:t,expand:t,added:t,scope:e}),e.hasHierarchyEventListeners=!0)},registerWithOwnerCt:function(){var e=this,t=e.ownerCt,n=e.zIndexParent;n&&n.unregisterFloatingItem(e),n=e.zIndexParent=e.up("[floating]"),e.floatParent=t||n,e.initFloatConstrain(),delete e.ownerCt,n?n.registerFloatingItem(e):Ext.WindowManager.register(e)},onKeyDown:function(e){var t,n,i,r,o=this;e.getKey()===e.TAB&&(t=e.shiftKey,n=o.query(":focusable"),n.length&&(i=n[0],r=n[n.length-1],!t&&r.hasFocus?(e.stopEvent(),i.focus()):t&&i.hasFocus&&(e.stopEvent(),r.focus())))},onMouseDown:function(e){var t,n,i,r=this,o=r.focusTask,a=e.parentEvent,s=a&&"touchstart"===a.type;if(r.floating&&(!o||!o.id)){for(t=e.target,n=r.el.dom;!s&&t&&t!==n;)Ext.fly(t).isFocusable()&&(s=!0),t=t.parentNode;i=Ext.WindowManager.getActive()===r&&(t===n||s),i||r.toFront(s)}},onBeforeFloatLayout:function(){this.el.preventSync=!0},onAfterFloatLayout:function(){var e=this.el;(e.shadow||e.shim)&&(e.setUnderlaysVisible(!0),e.syncUnderlays())},syncHidden:function(){var e=this,t=e.hidden||!e.rendered,n=e.hierarchicallyHidden=e.isHierarchicallyHidden(),i=e.pendingShow;t!==n&&(n?(e.hide(),e.pendingShow=!0):i&&(delete e.pendingShow,i.length?e.show.apply(e,i):e.show()))},setZIndex:function(e){var t=this;return t.el.setZIndex(e),e+=10,t.floatingDescendants&&(e=100*Math.floor(t.floatingDescendants.setBase(e)/100)+1e4),e},doConstrain:function(e){var t=this,n=t.calculateConstrainedPosition(e,null,!0);n&&t.setPosition(n)},updateActiveCounter:function(){var e=this.zIndexParent;e&&this.bringParentToFront!==!1&&e.setActiveCounter(++Ext.ZIndexManager.activeCounter),e=this.zIndexManager,e&&e.onComponentUpdate(this)},updateAlwaysOnTop:function(){var e=this.zIndexManager;e&&e.onComponentUpdate(this)},toFront:function(e){var t=this;return t.zIndexManager.bringToFront(t,e||!t.focusOnToFront)&&t.hasListeners.tofront&&t.fireEvent("tofront",t,t.el.getZIndex()),t},setActive:function(e,t){var n,i=this;e?(i.el.shadow&&!i.maximized&&i.el.enableShadow(null,!0),t&&(n=Ext.ComponentManager.getActiveComponent(),n&&n.up(i)||i.focus()),i.fireEvent("activate",i)):i.fireEvent("deactivate",i)},toBack:function(){return this.zIndexManager.sendToBack(this),this},center:function(){var e,t=this;return t.isVisible()?(e=t.getAlignToXY(t.container,"c-c"),t.setPagePosition(e)):t.needsCenter=!0,t},onFloatShow:function(){this.needsCenter&&this.center(),delete this.needsCenter,this.toFrontOnShow&&this.toFront()},fitContainer:function(e){var t=this,n=t.floatParent,i=n?n.getTargetEl():t.container,r=i.getViewSize(),o=n||i.dom!==document.body?[0,0]:i.getXY();r.x=o[0],r.y=o[1],t.setBox(r,e)},privates:{onFloatDestroy:function(){this.clearAlignEl()},clearAlignEl:function(){var e=this;e._lastAlignToEl&&(Ext.un("scroll",e.onAlignToScroll,e),e._lastAlignPos=e._lastAlignToEl=null)},onAlignToScroll:function(e){var t,n=this,i=n._lastAlignToEl;i&&!e.getElement().contains(n.el)&&(t=i.isElement?i.dom:i,t&&!Ext.isGarbage(t)?n.alignTo(i,n._lastAlignToPos):n.clearAlignEl())}}},1,0,0,0,0,0,[Ext.util,"Floating"],0),Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{mixinId:"elementCt",config:{childEls:{$value:{},cached:!0,lazy:!0,merge:function(e,t,n,i){var r,o,a=t?Ext.Object.chain(t):{};if(e instanceof Array)for(r=e.length;r--;)o=e[r],i&&o in a||("string"==typeof o?a[o]={name:o,itemId:o}:a[o.name]=o);else if(e)if(e.constructor===Object)for(r in e)i&&r in a||(o=e[r],o===!0?a[r]={itemId:r}:"string"==typeof o?a[r]={itemId:o}:(a[r]=o,"itemId"in o||(o.itemId=r)),a[r].name=r);else i&&e in a||(a[e]={name:e,itemId:e});return a}}},destroy:function(){var e,t,n=this,i=n.getChildEls();for(t in i)e=n[t],e&&(e.destroy&&(e.component=null,e.destroy()),n[t]=null)},privates:{afterClassMixedIn:function(e){var t=e.prototype,n=t.childEls;n&&(delete t.childEls,e.getConfigurator().add({childEls:n}))},attachChildEls:function(e,t){var n,i,r,o,a,s,l,d=this,u=d.getChildEls(),c=t||d,h=c.id+"-",p=!c.frame;for(n in u)if(r=u[n],!p||!r.frame){if(a=r.select,a?s=e.select(a,!0):(a=r.selectNode)?s=e.selectNode(a,!1):(l=r.id)?s=Ext.cache[l]||e.getById(l):(l=h+r.itemId,s=Ext.cache[l]),s)if(s.isElement)s.component=c;else if(s.isComposite&&!s.isLite)for(i=s.elements,o=i.length;o--;)i[o].component=c;d[n]=s||null}}}},0,0,0,0,0,0,[Ext.util,"ElementContainer"],0),Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{mixinId:"renderable",frameCls:"x-frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,_layerCls:"x-layer",_fixedLayerCls:"x-fixed-layer",statics:{makeRenderSetter:function(e,t){var n=e.name;return function(i){var r=this,o=r.renderConfigs||(r.renderConfigs={}),a=o[t];return r._renderState>=t?(e.setter||e.getSetter()).call(r,i):(a||(o[t]=a={}),n in a||(a[n]=r[n]),r[n]=i),r}},processRenderConfig:function(e,t,n){var i,r,o,a,s=this.prototype,l=this.getConfigurator(),d=Ext.util.Renderable,u=d.makeRenderSetter,c=e[t];for(o in c)r=Ext.Config.get(o),s[a=r.names.set]||(i=r.renderSetter||(r.renderSetter={}),s[a]=i[n]||(i[n]=u(r,n)));delete e[t],l.add(c)}},onClassMixedIn:function(e){var t=e.override,n=this.processRenderConfig,i=function(e){e.beforeRenderConfig&&this.processRenderConfig(e,"beforeRenderConfig",1),e.renderConfig&&this.processRenderConfig(e,"renderConfig",3),t.call(this,e)},r=function(e,t){e.override=i,e.processRenderConfig=n,t.beforeRenderConfig&&e.processRenderConfig(t,"beforeRenderConfig",1),t.renderConfig&&e.processRenderConfig(t,"renderConfig",3)};r(e,e.prototype),e.onExtended(r)},afterRender:function(){var e,t,n,i,r,o=this,a={},s=o.protoEl,l=o.el;o.finishRenderChildren(),o._renderState=4,o.contentEl&&(n="x-",i=n+"hidden-",r=o.contentEl=Ext.get(o.contentEl),r.component=o,r.removeCls([n+"hidden",i+"display",i+"offsets"]),o.getContentTarget().appendChild(r.dom)),s.writeTo(a),t=a.removed,t&&l.removeCls(t),t=a.cls,t.length&&l.addCls(t),t=a.style,a.style&&l.setStyle(t),o.protoEl=null,o.ownerCt||o.updateLayout(),o.x&&o.y||!o.pageX&&!o.pageY||o.setPagePosition(o.pageX,o.pageY),o.disableOnRender&&o.onDisable(),Ext.enableAria&&o.ariaApplyAfterRenderAttributes(),e=o.controller,e&&e.afterRender&&e.afterRender(o)},afterFirstLayout:function(e,t){var n,i,r,o,a,s=this,l=s.x,d=s.y,u=s.defaultAlign,c=s.alignOffset;s.ownerLayout||(i=void 0!==l,r=void 0!==d),!s.floating||s.preventDefaultAlign||i&&r||(s.floatParent?(o=s.floatParent.getTargetEl().getViewRegion(),a=s.el.getAlignToXY(s.alignTarget||s.floatParent.getTargetEl(),u,c),o.x=a[0]-o.x,o.y=a[1]-o.y):(a=s.el.getAlignToXY(s.alignTarget||s.container,u,c),o=s.el.translateXY(a[0],a[1])),l=i?l:o.x,d=r?d:o.y,i=r=!0),(i||r)&&s.setPosition(l,d),s.onBoxReady(e,t),n=s.controller,n&&n.boxReady&&n.boxReady(s)},beforeRender:function(){var e,t,n=this,i=n.floating,r=n.getComponentLayout();n._renderState=1,t=n.controller,t&&t.beforeRender&&t.beforeRender(n),n.initBindable(),n.renderConfigs&&n.flushRenderConfigs(),n.reference&&n.publishState(),i&&(n.addCls(n.fixed?n._fixedLayerCls:n._layerCls),e=i.cls,e&&n.addCls(e)),n.frame=n.frame||n.alwaysFramed,r.initialized||r.initLayout(),n.initOverflow(),n.setUI(n.ui)},doApplyRenderTpl:function(e,t){var n,i=t.$comp;i.rendered||(n=i.initRenderTpl(),n.applyOut(t.renderData,e))},getElConfig:function(){var e,t=this,n=t.autoEl,i=t.getFrameInfo(),r={tag:"div",tpl:i?t.initFramingTpl(i.table):t.initRenderTpl()},o=t.layoutTargetCls,a=t.protoEl;return t.initStyles(a),o&&!i&&a.addCls(o),a.writeTo(r),a.flush(),Ext.isString(n)?r.tag=n:Ext.apply(r,n),Ext.enableAria&&t.ariaRenderAttributesToElement&&Ext.apply(r,t.ariaGetRenderAttributes()),r.id=t.id,r.tpl&&(i?(r.tplData=e=t.getFrameRenderData(),e.renderData=t.initRenderData()):r.tplData=t.initRenderData()),r},getInsertPosition:function(e){return void 0!==e&&(e=Ext.isNumber(e)?this.container.dom.childNodes[e]:Ext.getDom(e)),e},getRenderTree:function(){var e=this,t=null;return e.hasListeners.beforerender&&e.fireEvent("beforerender",e)===!1||(e._renderState=1,e.beforeRender(),e.rendering=!0,e._renderState=2,t=e.getElConfig(),e.el&&(t.id=e.$pid=Ext.id(null,e.el.identifiablePrefix))),t},initRenderData:function(){var e=this;return Ext.apply({$comp:e,id:e.id,ui:e.ui,uiCls:e.uiCls,baseCls:e.baseCls,componentCls:e.componentCls,frame:e.frame,renderScroller:e.touchScroll,scrollerCls:e.scrollerCls,role:e.ariaRole,childElCls:""},e.renderData)},onRender:function(){var e,t,n=this,i=n.x,r=n.y,o=null,a=n.el;n.applyRenderSelectors(),n.rendering=null,n.rendered=!0,n._renderState=3,n.renderConfigs&&n.flushRenderConfigs(),null!=i&&(o={x:i}),null!=r&&((o=o||{}).y=r),n.getFrameInfo()||(e=n.width,t=n.height,"number"==typeof e&&(o=o||{},o.width=e),"number"==typeof t&&(o=o||{},o.height=t)),1===n.touchScroll&&n.getOverflowEl().disableTouchScroll(),n.lastBox=a.lastBox=o},render:function(e,t){var n,i,r,o=this,a=o.el,s=o.ownerLayout;a&&!a.isElement&&(o.wrapPrimaryEl(a),a=o.el),Ext.suspendLayouts(),e=o.initContainer(e),r=o.getInsertPosition(t),a?o.hasListeners.beforerender&&o.fireEvent("beforerender",o)===!1?n=!0:(o.beforeRender(),o.needsRenderTpl=o.rendering=!0,o._renderState=2,o.initStyles(a),o.allowDomMove!==!1&&(r?e.dom.insertBefore(a.dom,r):e.dom.appendChild(a.dom))):(i=o.getRenderTree(),s&&s.transformItemRenderTree&&(i=s.transformItemRenderTree(i)),i&&(a=r?Ext.DomHelper.insertBefore(r,i):Ext.DomHelper.append(e,i),o.wrapPrimaryEl(a),o.cacheRefEls(a))),a&&!n&&o.finishRender(t),Ext.resumeLayouts(!o.hidden&&!e.isDetachedBody)},ensureAttachedToBody:function(e){for(var t,n=this;n.ownerCt;)n=n.ownerCt;n.container.isDetachedBody&&(n.container=t=Ext.getBody(),t.appendChild(n.el.dom),e&&n.updateLayout(),("number"==typeof n.x||"number"==typeof n.y)&&n.setPosition(n.x,n.y))},privates:{applyRenderSelectors:function(){var e,t,n=this,i=n.renderSelectors,r=n.el;if(n.attachChildEls(r),i)for(t in i)e=i[t],e&&(n[t]=r.selectNode(e,!1))},cacheRefEls:function(e){e=e||this.el;var t,n,i=Ext.cache,r=Ext.dom.Element,o=e.isElement?e.dom:e,a=o.querySelectorAll("[data-ref]"),s=a.length;for(n=0;s>n;n++)t=a[n],i[t.id]||new r(t)},doAutoRender:function(){var e=this;e.rendered||(e.floating?e.render(e.renderTo||document.body):e.render(Ext.isBoolean(e.autoRender)?Ext.getBody():e.autoRender))},doRenderContent:function(e,t){var n=t.$comp,i=n.data;n.html&&(Ext.DomHelper.generateMarkup(n.html,e),delete n.html),n.tpl&&(n.tpl.isTemplate||(n.tpl=new Ext.XTemplate(n.tpl)),i&&(n.data=i=i.isEntity?i.getData(!0):i,n.tpl.applyOut(i,e)))},doRenderFramingDockedItems:function(e,t,n){var i=t.$comp;!i.rendered&&i.doRenderDockedItems&&(t.renderData.$skipDockedItems=!0,i.doRenderDockedItems.call(this,e,t,n))},flushRenderConfigs:function(){var e,t,n,i,r,o=this,a=o.renderConfigs,s=o._renderState;if(a){for(t=0;s>=t;++t)if(e=a[t]){a[t]=null;for(n in e)r=e[n],(i||(i={}))[n]=o[n],o[n]=r}i&&o.setConfig(i)}},finishRender:function(e){var t,n,i,r,o,a,s,l=this,d=Ext.cache;if(!l.el||l.$pid)if(l.container?(s=d[l.id],a=s?s.dom:l.container.getById(l.id,!0)):(i=l.$pid||l.id,s=d[i],a=s?s.dom:Ext.getDom(i)),l.el){for(delete l.$pid,l.el.dom||l.wrapPrimaryEl(l.el),a.parentNode.insertBefore(l.el.dom,a),t=a,a=l.el.dom,n=a.firstChild;t.firstChild;)a.insertBefore(t.firstChild,n);l.el.addCls(t.className),Ext.removeNode(t)}else l.wrapPrimaryEl(a);else l.needsRenderTpl&&(r=l.initRenderTpl(),r&&(o=l.initRenderData(),r.insertFirst(l.getTargetEl(),o)),l.cacheRefEls());l.el.component=l,l.container||(l.container=Ext.get(l.el.dom.parentNode)),l.ctCls&&l.container.addCls(l.ctCls),l.onRender(l.container,e),l.overflowInited||l.initOverflow(),l.el.setVisibilityMode(Ext.Element[l.hideMode.toUpperCase()]),l.overCls&&l.el.hover(l.addOverCls,l.removeOverCls,l),l.hasListeners.render&&l.fireEvent("render",l),l.afterRender(),l.hasListeners.afterrender&&l.fireEvent("afterrender",l),l.initEvents(),l.hidden&&l.el.hide()},finishRenderChildren:function(){var e=this.getComponentLayout();e.finishRender()},getFrameRenderData:function(){var e=this,t=e.frameSize,n="";return e._syncFrameHeight&&e.height&&(n="height:"+(e.height-t.height)+"px"),{$comp:e,fgid:e.id+"-frame",ui:e.ui,uiCls:e.uiCls,frameCls:e.frameCls,frameBodyCls:e.layoutTargetCls||"",baseCls:e.baseCls,top:!!t.top,left:!!t.left,right:!!t.right,bottom:!!t.bottom,mcStyle:n,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame)return!1;var e,t,n,i,r,o,a,s,l,d,u,c,h,p,f=this,g=f.frameInfoCache,m=f.getFramingInfoCls()+"-frameInfo",x=g[m];return null==x&&(e=Ext.fly(f.getStyleProxy(m),"frame-style-el"),t=e.getStyle("font-family"),t?(t=t.split("-"),n=parseInt(t[1],10),i=parseInt(t[2],10),r=parseInt(t[3],10),o=parseInt(t[4],10),a=parseInt(t[5],10),s=parseInt(t[6],10),l=parseInt(t[7],10),d=parseInt(t[8],10),u=parseInt(t[9],10),c=parseInt(t[10],10),h=parseInt(t[11],10),p=parseInt(t[12],10),x={table:"t"===t[0].charAt(0),vertical:"v"===t[0].charAt(1),top:n,right:i,bottom:r,left:o,width:o+i,height:n+r,border:{top:a,right:s,bottom:l,left:d,width:d+s,height:a+l},padding:{top:u,right:c,bottom:h,left:p,width:p+c,height:u+h}}):x=!1,g[m]=x),f.frame=!!x,f.frameSize=x,x},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(e){var t=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,!0));return t.className=e,t},getFrameTpl:function(e){return this.getTpl(e?"frameTableTpl":"frameTpl")},initContainer:function(e){var t=this;return!e&&t.el&&(e=t.el.dom.parentNode,t.allowDomMove=!1),t.container=e.dom?e:Ext.get(e),t.container},initOverflow:function(){var e=this,t=e.getOverflowStyle(),n=e.scrollFlags,i=e.getOverflowEl(),r=n.y||n.x,o=e.touchScroll=r&&Ext.supports.touchScroll;r&&i&&i.isElement&&(e.overflowInited=!0,2===o?i.setStyle("overflow","hidden"):i.setStyle(t))},doRenderPadding:function(e,t){var n=t.$comp;n.touchScroll&&e.push("padding:",n.unitizeBox(n.padding))},initFramingTpl:function(e){var t=this.getFrameTpl(e);return t&&!t.applyRenderTpl&&this.setupFramingTpl(t),t},initRenderTpl:function(){var e=this.getTpl("renderTpl");return e&&!e.renderContent&&this.setupRenderTpl(e),e},setupFramingTpl:function(e){e.applyRenderTpl=this.doApplyRenderTpl,e.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(e){e.renderBody=e.renderContent=this.doRenderContent,
e.renderPadding=this.doRenderPadding},updateFrame:function(){if(!Ext.supports.CSS3BorderRadius&&this.frame){var e,t,n,i,r,o,a,s,l,d,u,c=this,h=c.el.dom,p=c.frameTable,f=c.frameBody,g=f.dom,m=c.getFrameInfo();for(n=document.createElement("div"),o=c.getFrameRenderData(),s=c.getFrameTpl(m.table),s.insertFirst(n,o),u=n.querySelectorAll("[data-ref]"),d=n.querySelector('[data-ref="frameBody"]'),r=g;r.parentNode!==h;)r=r.parentNode;for(;n.firstChild;)h.insertBefore(n.firstChild,r);d.parentNode.replaceChild(g,d),g.className=d.className,f.setSize(),e=c.getChildEls(),p&&(p.destroy(),c.frameTable=null);for(t in e)e[t].frame&&(i=c[t],i&&i!==f&&(i.destroy(),c[t]=null));for(l=u.length;l--;)t=(a=u[l]).getAttribute("data-ref"),"frameBody"!==t&&(c[t]=new Ext.dom.Element(a))}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,"Renderable"],0),Ext.define("Ext.rtl.util.Renderable",{override:"Ext.util.Renderable",_rtlCls:"x-rtl",_ltrCls:"x-ltr",rtlFrameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],beforeRender:function(){var e=this.getInherited().rtl;e?this.addCls(this._rtlCls):e===!1&&this.addCls(this._ltrCls),arguments.callee.$previous.call(this)},initRenderData:function(){var e=this,t=arguments.callee.$previous.call(this),n=e._rtlCls;return n&&e.getInherited().rtl&&(t.childElCls=" "+n),t},privates:{getFrameTpl:function(e){return e&&this.getInherited().rtl?this.getTpl("rtlFrameTableTpl"):arguments.callee.$previous.apply(this,arguments)},getFrameRenderData:function(){var e=this,t=arguments.callee.$previous.call(this),n=e._rtlCls;return n&&e.getInherited().rtl&&(t.frameElCls=" "+n),t}}}),Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(e){var t=this;Ext.apply(t,e),t.state={},t.mixins.observable.constructor.call(t)},get:function(e,t){var n=this.state[e];return void 0===n?t:n},clear:function(e){var t=this;delete t.state[e],t.fireEvent("statechange",t,e,null)},set:function(e,t){var n=this;n.state[e]=t,n.fireEvent("statechange",n,e,t)},decodeValue:function(e){var t,n,i,r,o,a,s=this,l=/^(a|n|d|b|s|o|e)\:(.*)$/,d=l.exec(unescape(e));if(d&&d[1])switch(n=d[1],e=d[2],n){case"e":return null;case"n":return parseFloat(e);case"d":return new Date(Date.parse(e));case"b":return"1"===e;case"a":if(t=[],e)for(r=e.split("^"),o=r.length,a=0;o>a;a++)e=r[a],t.push(s.decodeValue(e));return t;case"o":if(t={},e)for(r=e.split("^"),o=r.length,a=0;o>a;a++)e=r[a],i=e.split("="),t[i[0]]=s.decodeValue(i[1]);return t;default:return e}},encodeValue:function(e){var t,n,i,r="",o=0;if(null==e)return"e:1";if("number"==typeof e)t="n:"+e;else if("boolean"==typeof e)t="b:"+(e?"1":"0");else if(Ext.isDate(e))t="d:"+e.toUTCString();else if(Ext.isArray(e)){for(n=e.length;n>o;o++)r+=this.encodeValue(e[o]),o!==n-1&&(r+="^");t="a:"+r}else if("object"==typeof e){for(i in e)"function"!=typeof e[i]&&void 0!==e[i]&&(r+=i+"="+this.encodeValue(e[i])+"^");t="o:"+r.substring(0,r.length-1)}else t="s:"+e;return escape(t)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0),Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:!0,constructor:function(){this.provider=new Ext.state.Provider},setProvider:function(e){this.provider=e},get:function(e,t){return this.provider.get(e,t)},set:function(e,t){this.provider.set(e,t)},clear:function(e){this.provider.clear(e)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0),Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{mixinId:"state",stateful:!1,saveDelay:100,constructor:function(){var e=this;e.stateEvents||(e.stateEvents=[]),e.stateful!==!1&&(e.addStateEvents(e.stateEvents),e.initState())},addStateEvents:function(e){var t,n,i,r,o=this;if(o.stateful&&o.getStateId())for(r="string"==typeof e?arguments:e,i=o.stateEventsByName||(o.stateEventsByName={}),t=r.length;t--;)n=r[t],n&&!i[n]&&(i[n]=1,o.on(n,o.onStateChange,o))},onStateChange:function(){var e,t,n=this,i=n.saveDelay;n.stateful&&(i?(n.stateTask||(e=Ext.state.Stateful,t=e.runner||(e.runner=new Ext.util.TaskRunner),n.stateTask=t.newTask({run:n.saveState,scope:n,interval:i,repeat:1,fireIdleEvent:!1})),n.stateTask.start()):n.saveState())},saveState:function(){var e,t,n,i,r,o,a=this,s=a.stateful&&a.getStateId(),l=a.hasListeners;if(s){for(r=a.getState()||{},e=a.getPlugins()||[],n=0,i=e.length;i>n;n++)t=e[n],t&&t.getState&&(o=t.getState(r),o&&!r[t.ptype]&&(r[t.ptype]=o));l.beforestatesave&&a.fireEvent("beforestatesave",a,r)===!1||(Ext.state.Manager.set(s,r),l.statesave&&a.fireEvent("statesave",a,r))}},getState:function(){return null},applyState:function(e){e&&Ext.apply(this,e)},getStateId:function(){var e=this;return e.stateId||(e.autoGenId?null:e.id)},initState:function(){var e,t,n,i,r,o,a,s=this,l=s.stateful&&s.getStateId(),d=s.hasListeners;if(l&&(t=Ext.state.Manager.get(l),t&&(e=Ext.apply({},t),!d.beforestaterestore||s.fireEvent("beforestaterestore",s,t)!==!1))){for(r=s.getPlugins()||[],n=0,i=r.length;i>n;n++)o=r[n],o&&(a=o.ptype,o.applyState&&o.applyState(e[a],t),delete e[a]);s.applyState(e),d.staterestore&&s.fireEvent("staterestore",s,t)}},savePropToState:function(e,t,n){var i=this,r=i[e],o=i.initialConfig;return!i.hasOwnProperty(e)||o&&o[e]===r?!1:(t&&(t[n||e]=r),!0)},savePropsToState:function(e,t){var n,i,r=this;if("string"==typeof e)r.savePropToState(e,t);else for(n=0,i=e.length;i>n;++n)r.savePropToState(e[n],t);return t},destroy:function(){var e=this,t=e.stateTask;t&&(t.destroy(),e.stateTask=null),e.clearListeners()}},1,0,0,0,0,0,[Ext.state,"Stateful"],0),Ext.cmd.derive("Ext.util.Focusable",Ext.Base,{mixinId:"focusable",hasFocus:!1,focusable:!1,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){this.focusListeners=Ext.destroy(this.focusListeners),delete this.focusTask},enableFocusable:Ext.emptyFn,disableFocusable:function(){var e,t,n=this,i=n.focusCls;n.hasFocus&&(e=n.findFocusTarget(),e&&e.focus()),t=n.getFocusClsEl(),i&&t&&t.removeCls(n.removeClsWithUI(i,!0))},isFocusable:function(e){var t,n=this;return n.focusable||n.isContainer&&e?(t=n.getFocusEl(),t&&n.canFocus()?t.isFocusable(e):!1):!1},canFocus:function(){var e=this;return(e.isContainer||e.focusable)&&e.rendered&&!e.destroying&&!e.isDestroyed&&!e.disabled&&e.isVisible(!0)},focus:function(e,t,n,i){var r,o,a,s=this;if((s.focusable||s.isContainer)&&!s.isDestroyed&&!s.destroying){if(t)return s.getFocusTask().delay(Ext.isNumber(t)?t:10,s.focus,s,[e,!1,n,i]),s;if(s.cancelFocus(),s.canFocus()){if(r=s.getFocusEl()){if(r.isComponent)return r.focus(e,t,n,i);o=r.dom,o&&(r.needsTabIndex()&&(o.tabIndex=-1),s.floating&&(a=s.container.dom.scrollTop),r.focus(),e&&(Ext.isArray(e)?s.selectText&&s.selectText.apply(s,e):o.select?o.select():s.selectText&&s.selectText()),Ext.callback(n,i)),s.floating&&(s!==s.zIndexManager.getActive()&&s.toFront(!0),void 0!==a&&(s.container.dom.scrollTop=a))}}else if(r=s.findFocusTarget())return r.focus(e,t,n,i);return s}},cancelFocus:function(){var e=this.getFocusTask();e&&e.cancel()},beforeBlur:Ext.emptyFn,onBlur:function(e){var t,n=this,i=n.focusableContainer,r=n.focusCls;n.focusable&&!n.destroying&&(n.beforeBlur(e),i&&i.beforeFocusableChildBlur(n,e),t=n.getFocusClsEl(),r&&t&&t.removeCls(n.removeClsWithUI(r,!0)),n.validateOnBlur&&n.validate(),n.hasFocus=!1,n.fireEvent("blur",n,e),n.postBlur(e),i&&i.afterFocusableChildBlur(n,e))},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(e){var t,n=this,i=n.focusableContainer,r=n.focusCls;n.focusable&&n.canFocus()&&(n.beforeFocus(e),i&&i.beforeFocusableChildFocus(n,e),t=n.getFocusClsEl(),r&&t&&t.addCls(n.addClsWithUI(r,!0)),n.hasFocus||(n.hasFocus=!0,n.fireEvent("focus",n,e)),n.postFocus(e),i&&i.afterFocusableChildFocus(n,e))},postFocus:Ext.emptyFn,getTabIndex:function(){var e,t,n=this;if(n.focusable){if(e=n.getFocusEl()){if(e.isComponent)t=e.getTabIndex();else{if(!e.isElement)return;t=e.getAttribute(Ext.Element.tabIndexAttributeName)}n.tabIndex=t}else t=n.tabIndex;return t-0}},setTabIndex:function(e){var t,n=this;n.focusable&&(n.tabIndex=e,t=n.getFocusEl(),t&&(t.isComponent?t.setTabIndex(e):t.isElement&&t.set({tabindex:e})))},onFocusEnter:function(e){var t=this;t.previousFocus=e.fromComponent||e.relatedTarget,t.containsFocus=!0,t.fireEvent("focusenter",t,e)},onFocusLeave:function(e){var t=this;t.previousFocus=null,t.containsFocus=!1,t.fireEvent("focusleave",t,e)},privates:{revertFocus:function(){var e=this,t=e.previousFocus;e.previousFocus=null,t&&e.containsFocus&&(t.isComponent?t.focus():(t=Ext.fly(t),(Ext.isIE8||t.isFocusable&&t.isFocusable())&&t.focus()))},findFocusTarget:function(){var e,t,n=this;for(e=n.up(":not([disabled])");e;e=e.up(":not([disabled])")){if(t=Ext.ComponentQuery.query(":focusable:not([hasFocus])",e),t.length)return t[0];if(e.isFocusable&&e.isFocusable())return e}},initFocusableElement:function(){var e,t=this,n=t.tabIndex,i=t.getFocusEl();i&&!i.isComponent&&(e=i.needsTabIndex(),(e||null!=n)&&i.dom.setAttribute("tabindex",n),i.dom.setAttribute(Ext.Component.componentIdAttribute,t.id))},getFocusTask:function(){return this.focusTask||(this.focusTask=Ext.focusTask),this.focusTask},blur:function(){var e,t=this;return t.focusable&&t.rendered?(e=t.getFocusEl(),e&&(t.blurring=!0,e.blur(),delete t.blurring),t):void 0},disableTabbing:function(){var e,t=this,n=t.el;t.focusable&&(e=t.getFocusEl(),n&&n.saveChildrenTabbableState(),e&&(e=e.isComponent?e.getFocusEl():e,e.saveTabbableState()))},enableTabbing:function(){var e,t=this,n=t.el;t.focusable&&(e=t.getFocusEl(),e&&(e=e.isComponent?e.getFocusEl():e,e.restoreTabbableState()),n&&n.restoreChildrenTabbableState())}}},0,0,0,0,0,0,[Ext.util,"Focusable"],function(){Ext.focusTask||(Ext.focusTask=new Ext.util.DelayedTask)}),Ext.cmd.derive("Ext.Component",Ext.Base,{alternateClassName:"Ext.AbstractComponent",statics:{AUTO_ID:1e3,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,componentIdAttribute:"componentId",cancelLayout:function(e,t){var n=this.runningLayoutContext||this.pendingLayouts;n&&n.cancelComponent(e,!1,t)},fromElement:function(e,t){var n,i,r=Ext.Component.componentIdAttribute,o=Ext.getDom(e),a=Ext.ComponentManager.all;for(t=t?Ext.getDom(t):document.body.parentNode;o&&1===o.nodeType&&o!==t;){if(n=o.getAttribute(r)||o.id,n&&(i=a[n]))return i;o=o.parentNode}return null},flushLayouts:function(){var e=this,t=e.pendingLayouts;t&&t.invalidQueue.length&&(e.pendingLayouts=null,e.runningLayoutContext=t,Ext.override(t,{runComplete:function(){e.runningLayoutContext=null;var t=this.callParent();return Ext.GlobalEvents.hasListeners.afterlayout&&Ext.GlobalEvents.fireEvent("afterlayout"),t}}),t.run())},resumeLayouts:function(e){this.layoutSuspendCount&&!--this.layoutSuspendCount&&(e&&this.flushLayouts(),Ext.GlobalEvents.hasListeners.resumelayouts&&Ext.GlobalEvents.fireEvent("resumelayouts"))},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(e,t){var n,i=this,r=i.runningLayoutContext;r?r.queueInvalidate(e):(n=i.pendingLayouts||(i.pendingLayouts=new Ext.layout.Context),n.queueInvalidate(e),t||i.layoutSuspendCount||e.isLayoutSuspended()||i.flushLayouts())}},$configPrefixed:!1,$configStrict:!1,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},defaultBindProperty:"html",alignTarget:null,autoRender:!1,autoShow:!1,baseCls:"x-component",childEls:{frameTable:{frame:!0},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:!1,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:function(){var e=["input","select","textarea","optgroup","option","table"];return!Ext.isIE9m||Ext.isIE9&&!Ext.isIEQuirks||e.push("p"),RegExp("^(?:"+e.join("|")+")$","i")}(),disabledCls:"x-item-disabled",draggable:!1,floating:!1,hidden:!1,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:!0,synthetic:!1,tplWriteMode:"overwrite",ui:"default",uiCls:[],weight:null,allowDomMove:!0,autoGenId:!1,borderBoxCls:"x-border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:!1,frameSize:null,horizontalPosProp:"left",isComponent:!0,_isLayoutRoot:!1,layoutSuspendCount:0,liquidLayout:!1,maskOnDisable:!0,offsetsCls:"x-hidden-offsets",rendered:!1,rootCls:"x-body",scrollerCls:"x-scroll-scroller",scrollerSelector:".x-scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:!0,y:!0,both:!0},"false":{overflowX:"auto",overflowY:"hidden",x:!0,y:!1,both:!1},scroll:{overflowX:"auto",overflowY:"scroll",x:!0,y:!0,both:!0}},"false":{auto:{overflowX:"hidden",overflowY:"auto",x:!1,y:!0,both:!1},"false":{overflowX:"hidden",overflowY:"hidden",x:!1,y:!1,both:!1},scroll:{overflowX:"hidden",overflowY:"scroll",x:!1,y:!0,both:!1}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:!0,y:!0,both:!0},"false":{overflowX:"scroll",overflowY:"hidden",x:!0,y:!1,both:!1},scroll:{overflowX:"scroll",overflowY:"scroll",x:!0,y:!0,both:!0}},none:{overflowX:"",overflowY:"",x:!1,y:!1,both:!1}},_scrollableCfg:{x:{x:!0,y:!1},y:{x:!1,y:!0},horizontal:{x:!0,y:!1},vertical:{x:!1,y:!0},both:{x:!0,y:!0},"true":{x:!0,y:!0}},validIdRe:Ext.validIdRe,constructor:function(e){var t,n,i,r,o,a,s,l,d=this;if(e=e||{},e.initialConfig?(e.isAction&&(d.baseAction=e),e=e.initialConfig):(e.tagName||e.dom||Ext.isString(e))&&(e={applyTo:e,id:e.id||e}),d.initialConfig=e,d.getId(),d.protoEl=new Ext.util.ProtoElement,d.initConfig(e),null==d.scrollable&&(o=d.autoScroll,o?l=!!o:(a=d.overflowX,s=d.overflowY,(a||s)&&(l={x:a&&"hidden"!==a?a:!1,y:s&&"hidden"!==s?s:!1})),l&&d.setScrollable(l)),i=d.xhooks,i&&(delete d.xhooks,Ext.override(d,i)),d.mixins.elementCt.constructor.call(d),d.setupProtoEl(),d.cls&&(d.initialCls=d.cls,d.protoEl.addCls(d.cls)),d.style&&(d.initialStyle=d.style,d.protoEl.setStyle(d.style)),d.renderData=d.renderData||{},d.initComponent(),d.preventRegister||Ext.ComponentManager.register(d),d.mixins.state.constructor.call(d),d.addStateEvents("resize"),r=d.getController(),r&&r.init(d),d.plugins)for(t=0,n=d.plugins.length;n>t;t++)d.plugins[t]=d.initPlugin(d.plugins[t]);d.loader=d.getLoader(),d.disabled&&(d.disabled=!1,d.disable(!0)),d.renderTo&&d.render(d.renderTo),d.autoShow&&!d.initOwnerCt&&d.show(),d.baseAction&&d.baseAction.addComponent(d)},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(){var e=this,t=e.rendered?e.el:e.protoEl;return t.addCls.apply(t,arguments),e},addClsWithUI:function(e,t){var n,i,r=this,o=[],a=0,s=r.uiCls=Ext.Array.clone(r.uiCls),l=r.activeUI;for("string"==typeof e&&(e=e.indexOf(" ")<0?[e]:Ext.String.splitWords(e)),n=e.length;n>a;a++)i=e[a],i&&!r.hasUICls(i)&&(s.push(i),l&&(o=o.concat(r.addUIClsToElement(i))));return t!==!0&&l&&r.addCls(o),o},afterComponentLayout:function(e,t,n,i){var r=this;1===++r.componentLayoutCounter&&r.afterFirstLayout(e,t),(e!==n||t!==i)&&r.onResize(e,t,n,i),r.floating&&r.onAfterFloatLayout()},addPlugin:function(e){var t=this;return e=t.constructPlugin(e),t.plugins?t.plugins.push(e):t.plugins=[e],t.pluginsInitialized&&t.initPlugin(e),e},addPropertyToState:function(e,t,n){var i=this,r=arguments.length;return(3===r||i.hasOwnProperty(t))&&(3>r&&(n=i[t]),n!==i.initialConfig[t]&&((e||(e={}))[t]=n)),e},addUIClsToElement:function(e){var t,n,i,r,o=this,a=o.baseCls+"-"+o.ui+"-"+e,s=["x-"+e,o.baseCls+"-"+e,a];if(o.rendered&&o.frame&&!Ext.supports.CSS3BorderRadius){a+="-",t=o.getChildEls();for(n in t)r=t[n].frame,r&&r!==!0&&(i=o[n],i&&i.addCls(a+r))}return s},removeUIClsFromElement:function(e){var t,n,i,r,o=this,a=o.baseCls+"-"+o.ui+"-"+e,s=["x-"+e,o.baseCls+"-"+e,a];if(o.rendered&&o.frame&&!Ext.supports.CSS3BorderRadius){a+="-",t=o.getChildEls();for(n in t)r=t[n].frame,r&&r!==!0&&(i=o[n],i&&i.removeCls(a+r))}return s},adjustPosition:function(e,t){var n,i=this;return i.isContainedFloater()&&(n=i.floatParent.getTargetEl().getViewRegion(),e+=n.left,t+=n.top),{x:e,y:t}},afterHide:function(e,t){var n=this,i=n.focusableContainer;n.hiddenByLayout=null,this.ownerLayout&&this.updateLayout({isRoot:!1}),Ext.callback(e,t||n),n.fireHierarchyEvent("hide"),n.fireEvent("hide",n),i&&i.onFocusableChildHide(n)},afterSetPosition:function(e,t){var n=this;n.onPosition(e,t),n.hasListeners.move&&n.fireEvent("move",n,e,t)},afterShow:function(e,t,n){var i,r,o,a=this,s=a.el;e=a.getAnimateTarget(e),a.ghost||(e=null),e?(r={x:s.getX(),y:s.getY(),width:s.dom.offsetWidth,height:s.dom.offsetHeight},i={x:e.getX(),y:e.getY(),width:e.dom.offsetWidth,height:e.dom.offsetHeight},s.addCls(a.offsetsCls),o=a.ghost(),o.el.stopAnimation(),o.setX(-1e4),a.ghostBox=r,o.el.animate({from:i,to:r,listeners:{afteranimate:function(){delete o.componentLayout.lastComponentSize,a.unghost(),delete a.ghostBox,s.removeCls(a.offsetsCls),a.onShowComplete(t,n)}}})):a.onShowComplete(t,n),a.fireHierarchyEvent("show")},animate:function(e){var t,n,i,r,o,a,s,l,d,u,c,h,p,f,g,m,x=this;return e=e||{},o=e.to||{},Ext.fx.Manager.hasFxBlock(x.id)?x:(t=Ext.isDefined(o.width),t&&(r=Ext.Number.constrain(o.width,x.minWidth,x.maxWidth)),n=Ext.isDefined(o.height),n&&(i=Ext.Number.constrain(o.height,x.minHeight,x.maxHeight)),e.dynamic||!t&&!n||(l=(e.from?e.from.width:void 0)||x.getWidth(),d=l,u=(e.from?e.from.height:void 0)||x.getHeight(),c=u,h=!1,n&&i>u&&(c=i,h=!0),t&&r>l&&(d=r,h=!0),(n||t)&&(m=x.el.getStyle("overflow"),"hidden"!==m&&x.el.setStyle("overflow","hidden")),h&&(a=!Ext.isNumber(x.width),s=!Ext.isNumber(x.height),x.setSize(d,c),x.el.setSize(l,u),a&&delete x.width,s&&delete x.height),t&&(o.width=r),n&&(o.height=i)),p=x.constrain,f=x.constrainHeader,(p||f)&&(x.constrain=x.constrainHeader=!1,g=e.callback,e.callback=function(){x.constrain=p,x.constrainHeader=f,g&&g.call(e.scope||x,arguments),"hidden"!==m&&x.el.setStyle("overflow",m)}),x.mixins.animate.animate.apply(x,arguments))},applyScrollable:function(e,t){var n,i,r=this,o=r.rendered;return e?((e===!0||"string"==typeof e)&&(n=r._scrollableCfg[e],e=n),t?(t.setConfig(e),e=t):(e=Ext.Object.chain(e),o&&(e.element=r.getOverflowEl(),i=r.getScrollerEl(),i&&(e.innerElement=i)),e.autoRefresh=!1,1===Ext.supports.touchScroll&&(e.translatable={translationMethod:"scrollparent"},e.indicators=!1),e=Ext.scroll.Scroller.create(e),e.component=r)):t&&(t.setConfig({x:!1,y:!1}),t.destroy()),r.rendered&&(r.getOverflowStyle(),r.updateLayout()),e},beforeComponentLayout:function(){return!0},beforeDestroy:Ext.emptyFn,beforeLayout:function(){this.floating&&this.onBeforeFloatLayout()},beforeSetPosition:function(e,t,n){var i,r,o,a,s=this,l=null;return e&&(Ext.isNumber(i=e[0])?(n=t,t=e[1],e=i):void 0!==(i=e.x)&&(n=t,t=e.y,e=i)),(s.constrain||s.constrainHeader)&&(l=s.calculateConstrainedPosition(null,[e,t],!0),l&&(e=l[0],t=l[1])),r=void 0!==e,o=void 0!==t,(r||o)&&(s.x=e,s.y=t,a=s.adjustPosition(e,t),l={x:a.x,y:a.y,anim:n,hasX:r,hasY:o}),l},beforeShow:Ext.emptyFn,bubble:function(e,t,n){for(var i=this;i&&e.apply(t||i,n||[i])!==!1;)i=i.getBubbleTarget();return this},cloneConfig:function(e){e=e||{};var t,n=e.id||Ext.id(),i=Ext.applyIf(e,this.initialConfig);return i.id=n,new(t=Ext.getClass(this))(i)},destroy:function(){var e,t,n,i=this,r=i.renderSelectors,o=i.getConfig("viewModel",!0),a=i.getConfig("session",!0);if(!(i.isDestroyed||i.hasListeners.beforedestroy&&i.fireEvent("beforedestroy",i)===!1)){if(i.destroying=!0,t=i.floatParent||i.ownerCt,i.floating&&(delete i.floatParent,i.zIndexManager&&(i.zIndexManager.unregister(i),i.zIndexManager=null)),i.removeBindings(),i.beforeDestroy(),o&&o.isViewModel&&(o.destroy(),i.viewModel=null),a&&a.isSession&&(a.getAutoDestroy()&&a.destroy(),i.session=null),t&&t.remove&&t.remove(i,!1),i.stopAnimation(),i.onDestroy(),Ext.destroy(i.plugins),i.componentLayout=null,i.hasListeners.destroy&&i.fireEvent("destroy",i),i.preventRegister||Ext.ComponentManager.unregister(i),i.mixins.state.destroy.call(i),i.floating&&i.onFloatDestroy(),i.clearListeners(),i.rendered){if(i.preserveElOnDestroy||i.el.destroy(),i.el.component=null,i.mixins.elementCt.destroy.call(i),r)for(e in r)r.hasOwnProperty(e)&&(n=i[e],n&&(delete i[e],n.destroy()));i.data=i.el=i.frameBody=i.rendered=null}i.destroying=!1,i.isDestroyed=!0}},disable:function(e,t){var n=this,i=n.focusableContainer,r=n.getInherited();return t||(r.disabled=!0),n.maskOnDisable&&(r.disableMask=!0),n.disabled||(n.addCls(n.disabledCls),n.rendered?n.onDisable():n.disableOnRender=!0,n.disabled=!0,e!==!0&&n.fireEvent("disable",n),i&&i.onFocusableChildDisable(n)),n},enable:function(e,t){var n=this,i=n.focusableContainer,r=n.getInherited();return t||delete n.getInherited().disabled,n.maskOnDisable&&delete r.disableMask,n.disabled&&(t&&r.hasOwnProperty("disabled")||(n.disableOnRender=!1,n.removeCls(n.disabledCls),n.rendered&&n.onEnable(),n.disabled=!1,e!==!0&&n.fireEvent("enable",n),i&&i.onFocusableChildEnable(n))),n},findParentBy:function(e){var t;for(t=this.getRefOwner();t&&!e(t,this);t=t.getRefOwner());return t||null},findParentByType:function(e){return Ext.isFunction(e)?this.findParentBy(function(t){return t.constructor===e}):this.up(e)},findPlugin:function(e){var t,n=this.plugins,i=n&&n.length;for(t=0;i>t;t++)if(n[t].ptype===e)return n[t]},getAnimateTarget:function(e){return e=e||this.animateTarget,e&&(e=e.isComponent?e.getEl():Ext.get(e)),e||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var e=this;return e.componentLayout&&e.componentLayout.isLayout||e.setComponentLayout(Ext.layout.Layout.create(e.componentLayout,"autocomponent")),e.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(e){var t=this,n=t.componentLayout;t.hidden&&(e.hidden=!0),t.collapseImmune&&(e.collapseImmune=!0),void 0!==t.modelValidation&&(e.modelValidation=t.modelValidation),t.mixins.bindable.initInheritedState.call(t,e),n&&n.initInheritedState&&n.initInheritedState(e)},getId:function(){var e,t=this;return t.id||(t.id=t.initialConfig.id)||(e=t.getXType(),e=e?e.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):Ext.name.toLowerCase()+"-comp",t.id=e+"-"+t.getAutoId()),t.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var e=this,t=e.loader;return t?(t.isLoader?t.setTarget(e):e.loader=new Ext.ComponentLoader(Ext.apply({target:e},t)),e.loader):null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(e){var t,n=this.plugins,i=n&&n.length;for(t=0;i>t;t++)if(n[t].pluginId===e)return n[t];return null},getPosition:function(e){var t,n,i=this,r=i.isContainedFloater();return e!==!0||r?(t=i.getXY(),e===!0&&r&&(n=i.floatParent.getTargetEl().getViewRegion(),t[0]-=n.left,t[1]-=n.top),t):[i.getLocalX(),i.getLocalY()]},getScrollX:function(){var e=this.getScrollable();return e?e.getPosition().x:0},getScrollY:function(){var e=this.getScrollable();return e?e.getPosition().y:0},getSize:function(e){return this.el.getSize(e)},getSizeModel:function(e){var t,n,i,r,o,a,s,l,d,u,c=this,h=Ext.layout.SizeModel,p=c.componentLayout.ownerContext,f=c.width,g=c.height,m=c.floating||c.floated;return p&&(u=p.widthModel,o=p.heightModel),u&&o||(i="number"==(t=typeof f),r="number"==(n=typeof g),d=m||!(a=c.ownerLayout),d?(s=Ext.layout.Layout.prototype.autoSizePolicy,l=m?3:c.shrinkWrap,i&&(u=h.configured),r&&(o=h.configured)):(s=a.getItemSizePolicy(c,e),l=a.isItemShrinkWrap(c)),p&&(p.ownerSizePolicy=s),l=l===!0?3:l||0,d&&l&&(f&&"string"===t&&(l&=2),g&&"string"===n&&(l&=1)),3!==l&&(e||(e=c.ownerCt&&c.ownerCt.getSizeModel()),e&&(l|=(e.width.shrinkWrap?1:0)|(e.height.shrinkWrap?2:0))),u||(u=s.setsWidth?s.readsWidth?i?h.calculatedFromConfigured:1&l?h.calculatedFromShrinkWrap:h.calculatedFromNatural:h.calculated:i?h.configured:1&l?h.shrinkWrap:h.natural),o||(o=s.setsHeight?s.readsHeight?r?h.calculatedFromConfigured:2&l?h.calculatedFromShrinkWrap:h.calculatedFromNatural:h.calculated:r?h.configured:2&l?h.shrinkWrap:h.natural)),u.pairsByHeightOrdinal[o.ordinal]},getState:function(){var e=this,t=null,n=e.getSizeModel();return n.width.configured&&(t=e.addPropertyToState(t,"width")),n.height.configured&&(t=e.addPropertyToState(t,"height")),t},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var e,t,n,i=this.self;if(!i.xtypes){for(e=[],t=this;t;)n=t.xtypes,void 0!==n&&e.unshift.apply(e,n),t=t.superclass;i.xtypeChain=e,i.xtypes=e.join("/")}return i.xtypes},hasCls:function(){var e=this.rendered?this.el:this.protoEl;return e.hasCls.apply(e,arguments)},hasUICls:function(e){var t=this,n=t.uiCls||[];return Ext.Array.contains(n,e)},hide:function(){var e=this;return e.pendingShow&&(e.pendingShow=!1),(!e.rendered||e.isVisible())&&(!e.hasListeners.beforehide||e.fireEvent("beforehide",e)!==!1||e.hierarchicallyHidden)&&(e.getInherited().hidden=e.hidden=!0,e.rendered&&e.onHide.apply(e,arguments)),e},initComponent:function(){var e=this,t=e.width,n=e.height;e.plugins&&!e.plugins.processed&&(e.plugins=e.constructPlugins()),e.pluginsInitialized=!0,(null!=t||null!=n)&&e.setSize(t,n),e.listeners&&(e.on(e.listeners),e.listeners=null),e.focusable&&e.initFocusable()},initEvents:function(){var e,t,n,i,r,o=this,a=o.afterRenderEvents;if(a)for(n in a)if(t=o[n],t&&t.on)for(e=a[n],i=0,r=e.length;r>i;++i)o.mon(t,e[i]);o.focusable&&o.initFocusableEvents()},is:function(e){return Ext.ComponentQuery.is(this,e)},isDescendantOf:function(e){var t;for(t=this.getRefOwner();t&&t!==e;t=t.getRefOwner());return t||null},isAncestor:function(e){for(;e;){if(e.getRefOwner()===this)return!0;e=e.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return!!this.draggable},isDroppable:function(){return!!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){for(var e,t,n=this,i=!1;e=n.ownerCt||n.floatParent;n=e){if(t=e.getInherited(),t.hidden){i=!0;break}if(!n.getInherited().collapseImmune){i=!!t.collapsed;break}if(e.collapsed&&!n.collapseImmune){i=!0;break}}return i},isLayoutChild:function(e){return!this.floating&&!!this.up(e)},isLayoutRoot:function(){var e=this,t=e.ownerLayout;return!t||e._isLayoutRoot||e.floating?!0:t.isItemLayoutRoot(e)},isLayoutSuspended:function(){for(var e,t=this;t;){if(t.layoutSuspendCount||t.suspendLayout)return!0;if(e=t.ownerLayout,!e)break;t=e.owner}return!1},isVisible:function(e){var t,n=this;return n.hidden||!n.rendered||n.isDestroyed?t=!0:e&&(t=n.isHierarchicallyHidden()),!t},isXType:function(e,t){return t?-1!==Ext.Array.indexOf(this.xtypes,e):!!this.xtypesMap[e]},isMasked:function(e){var t=this;return!!(t.masked||t.loadMask&&t.loadMask.isVisible()||e&&t.getInherited().masked)},setMasked:function(e){var t=this,n=t.focusableContainer;return e?(t.masked=!0,t.getInherited().masked=e):(t.masked=!1,delete t.getInherited().masked),n&&n.onFocusableChildMasked(t,e),t},mask:function(e,t,n){var i=this.lastBox,r=this.getMaskTarget()||this.el;i&&(n=i.height),r.mask(e,t,n),this.setMasked(!0)},nextNode:function(e,t){var n,i,r,o,a,s=this,l=s.ownerCt;if(t&&s.is(e))return s;if(l){for(i=l.items.items,o=Ext.Array.indexOf(i,s)+1,r=i.length;r>o;o++){if(a=i[o],a.is(e))return a;if(a.down&&(n=a.down(e)))return n}return l.nextNode(e)}return null},nextSibling:function(e){var t,n,i,r,o=this.ownerCt;if(o&&(t=o.items,i=t.indexOf(this)+1))if(e){for(n=t.getCount();n>i;i++)if((r=t.getAt(i)).is(e))return r}else if(i<t.getCount())return t.getAt(i);return null},onAdded:function(e,t,n){var i=this,r=i.inheritedState;i.ownerCt=e,r&&n&&i.invalidateInheritedState(),i.reference&&i.fixReference(),i.hasListeners&&i.hasListeners.added&&i.fireEvent("added",i,e,t),Ext.GlobalEvents.hasListeners.added&&i.fireHierarchyEvent("added")},onRemoved:function(e){var t,n=this;Ext.GlobalEvents.hasListeners.removed&&n.fireHierarchyEvent("removed"),n.hasListeners.removed&&n.fireEvent("removed",n,n.ownerCt),n.reference&&(t=n.lookupReferenceHolder(),t&&t.clearReference(n)),e||n.removeBindings(),n.inheritedState&&!e&&n.invalidateInheritedState(),n.ownerCt=n.ownerLayout=null},onBoxReady:function(e,t){var n=this,i=n.scrollable;n.resizable&&n.initResizable(n.resizable),n.draggable&&n.initDraggable(),i&&(n.touchScroll&&i.isTouchScroller&&i.setInnerElement(n.getScrollerEl()),i.setElement(n.getOverflowEl()),Ext.isIE&&Ext.on("show",n.onGlobalShow,n)),n.hasListeners.boxready&&n.fireEvent("boxready",n,e,t)},onDestroy:function(){var e=this,t=e.controller,n=e.focusableContainer;e.bind&&e.removeBindings(),t&&t.destroy(),e.controller=null,e.rendered&&Ext.destroy(e.dd,e.resizer,e.proxy,e.proxyWrap,e.resizerComponent,e.scrollable,e.contentEl),n&&n.onFocusableChildDestroy(e),e.focusable&&e.destroyFocusable(),Ext.destroy(e.componentLayout,e.loadMask,e.floatingDescendants)},onDisable:function(){var e,t,n=this;n.focusable&&n.disableFocusable(),n.maskOnDisable&&!n.getInheritedConfig("disableMask",!0)&&(e=n.el.dom,t=e.nodeName,n.disabledRe.test(t)&&(e.disabled=!0),n.nonMaskableRe.test(t)||n.mask())},onEnable:function(){var e,t,n=this;n.focusable&&n.enableFocusable(),n.maskOnDisable&&n.getInherited().hasOwnProperty("masked")&&(e=n.el.dom,t=e.nodeName,n.disabledRe.test(t)&&(e.disabled=!1),n.nonMaskableRe.test(t)||n.unmask())},onGlobalShow:function(e){this.up(e)&&this.getScrollable().restoreState()},onHide:function(e,t,n){var i,r,o,a=this;a.revertFocus(),e=a.getAnimateTarget(e),
a.ghost||(e=null),e&&(o={x:e.getX(),y:e.getY(),width:e.dom.offsetWidth,height:e.dom.offsetHeight},i=a.ghost(),i.el.stopAnimation(),r=a.getSize(),i.el.animate({to:o,listeners:{afteranimate:function(){delete i.componentLayout.lastComponentSize,i.el.hide(),i.setHiddenState(!0),i.el.setSize(r),a.afterHide(t,n)}}})),a.el.hide(),e||a.afterHide(t,n)},onPosition:Ext.emptyFn,onResize:function(e,t,n,i){var r=this;r.floating&&r.constrain&&r.doConstrain(),n&&r.refreshScroll(),r.hasListeners.resize&&r.fireEvent("resize",r,e,t,n,i)},onShow:function(){var e=this;e.el.show(),e.updateLayout({isRoot:!1}),e.floating&&(e.maximized?e.fitContainer():e.constrain&&e.doConstrain())},onShowComplete:function(e,t){var n=this,i=n.focusableContainer;n.floating&&n.onFloatShow(),Ext.callback(e,t||n),n.fireEvent("show",n),i&&i.onFocusableChildShow(n),delete n.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(e,t){var n,i,r,o,a=this,s=a.ownerCt;if(t&&a.is(e))return a;if(s){for(i=s.items.items,r=Ext.Array.indexOf(i,a)-1;r>-1;r--){if(o=i[r],o.query&&(n=o.query(e),n=n[n.length-1]))return n;if(o.is(e))return o}return s.previousNode(e,!0)}return null},previousSibling:function(e){var t,n,i,r=this.ownerCt;if(r&&(t=r.items,n=t.indexOf(this),-1!==n))if(e){for(--n;n>=0;n--)if((i=t.getAt(n)).is(e))return i}else if(n)return t.getAt(--n);return null},registerFloatingItem:function(e){var t=this;t.floatingDescendants||(t.floatingDescendants=new Ext.ZIndexManager(t)),t.floatingDescendants.register(e)},removeCls:function(){var e=this,t=e.rendered?e.el:e.protoEl;return t.removeCls.apply(t,arguments),e},removeClsWithUI:function(e,t){var n,i,r=this,o=[],a=0,s=Ext.Array,l=s.remove,d=r.uiCls=s.clone(r.uiCls),u=r.activeUI;for("string"==typeof e&&(e=e.indexOf(" ")<0?[e]:Ext.String.splitWords(e)),n=e.length,a=0;n>a;a++)i=e[a],i&&r.hasUICls(i)&&(l(d,i),u&&(o=o.concat(r.removeUIClsFromElement(i))));return t!==!0&&u&&r.removeCls(o),o},resumeLayouts:function(e){var t=this;t.rendered&&t.layoutSuspendCount&&!--t.layoutSuspendCount&&(t.suspendLayout=!1,e&&!t.isLayoutSuspended()&&t.updateLayout(e))},scrollBy:function(e,t,n){var i=this.getScrollable();i&&i.scrollBy(e,t,n)},scrollTo:function(e,t,n){var i=this.getScrollable();i&&i.scrollTo(e,t,n)},setAutoScroll:function(e){return this.setScrollable(!!e),this},setBorder:function(e,t){var n=this,i=!!t;(n.rendered||i)&&(i||(t=n.el),e=e?e===!0?"1px":this.unitizeBox(e):0,t.setStyle("border-width",e),i||n.updateLayout()),n.border=e},setDock:function(e){var t=this,n=t.ownerCt;return e!==t.dock&&(n&&n.moveDocked?n.moveDocked(t,e):t.dock=e),t},setDisabled:function(e){return this[e?"disable":"enable"]()},setFlex:function(e){this.flex=e},setHeight:function(e){return this.setSize(void 0,e)},setLoading:function(e,t){var n=this,i={target:n};return n.rendered&&(e!==!1?(Ext.isString(e)?i.msg=e:Ext.apply(i,e),n.loadMask&&n.loadMask.isLoadMask?Ext.apply(n.loadMask,i):(t&&null==i.useTargetEl&&(i.useTargetEl=!0),n.loadMask=new Ext.LoadMask(i)),n.loadMask.isVisible()?n.loadMask.afterShow():n.loadMask.show()):n.loadMask&&n.loadMask.isLoadMask&&n.loadMask.hide()),n.loadMask},setMargin:function(e,t){var n=this;n.rendered?(e||0===e?(e===!0&&(e=5),e=this.unitizeBox(e)):e="",n.margin=e,n.margin$=null,n.getEl().setStyle("margin",e),t||n.updateLayout(n._notAsLayoutRoot)):n.margin=e},setOverflowXY:function(e,t){return this.setScrollable({x:e&&"hidden"!==e?e:!1,y:t&&"hidden"!==t?t:!1}),this},setPagePosition:function(e,t,n){var i,r,o=this;return Ext.isArray(e)&&(t=e[1],e=e[0]),o.pageX=e,o.pageY=t,o.floating?(o.isContainedFloater()?(r=o.floatParent.getTargetEl().getViewRegion(),Ext.isNumber(e)&&Ext.isNumber(r.left)&&(e-=r.left),Ext.isNumber(t)&&Ext.isNumber(r.top)&&(t-=r.top)):(i=o.el.translateXY(e,t),e=i.x,t=i.y),o.setPosition(e,t,n)):(i=o.el.translateXY(e,t),o.setPosition(i.x,i.y,n)),o},setPosition:function(e,t,n){var i=this,r=i.beforeSetPosition.apply(i,arguments);return r&&i.rendered&&(e=r.x,t=r.y,n?(e!==i.getLocalX()||t!==i.getLocalY())&&(i.stopAnimation(),i.animate(Ext.apply({duration:1e3,listeners:{afteranimate:Ext.Function.bind(i.afterSetPosition,i,[e,t])},to:{left:e,top:t}},n))):(i.setLocalXY(e,t),i.afterSetPosition(e,t))),i},setScrollX:function(e,t){var n=this.getScrollable();n&&n.scrollTo(e,null,t)},setScrollY:function(e,t){var n=this.getScrollable();n&&n.scrollTo(null,e,t)},setSize:function(e,t){var n,i,r=this,o=r.width,a=r.height;return e&&"object"==typeof e&&(t=e.height,e=e.width),"number"==typeof e?r.width=Ext.Number.constrain(e,r.minWidth,r.maxWidth):null===e?delete r.width:"string"==typeof e&&(n=!0,r.width=e),"number"==typeof t?r.height=Ext.Number.constrain(t,r.minHeight,r.maxHeight):null===t?delete r.height:"string"==typeof t&&(i=!0,r.height=t),r.rendered&&r.isVisible()&&(o!==r.width||a!==r.height)&&((r.liquidLayout||n||i)&&r.el.setSize(r.width,r.height),r.updateLayout(r._notAsLayoutRoot)),r},setStyle:function(e,t){var n=this.el||this.protoEl;return n.setStyle(e,t),this},setUI:function(e){var t,n=this,i=n.uiCls,r=n.activeUI;e!==r&&(r?(t=n.removeClsWithUI(i,!0),t.length&&n.removeCls(t),n.removeUIFromElement()):n.uiCls=[],n.ui=e,n.activeUI=e,n.addUIToElement(),t=n.addClsWithUI(i,!0),t.length&&n.addCls(t),n.rendered&&n.updateLayout())},setVisible:function(e){return this[e?"show":"hide"]()},setHidden:function(e){return this.setVisible(!e)},setWidth:function(e){return this.setSize(e)},show:function(){var e=this,t=e.rendered;return e.hierarchicallyHidden||e.floating&&!t&&e.isHierarchicallyHidden()?(t||e.initHierarchyEvents(),arguments.length>1?(arguments[0]=null,e.pendingShow=arguments):e.pendingShow=!0):t&&e.isVisible()?e.floating&&e.onFloatShow():e.fireEvent("beforeshow",e)!==!1?(e.hidden=!1,delete this.getInherited().hidden,Ext.suspendLayouts(),t||!e.autoRender&&!e.floating||(e.doAutoRender(),t=e.rendered),t?(e.beforeShow(),Ext.resumeLayouts(),e.onShow.apply(e,arguments),e.afterShow.apply(e,arguments)):Ext.resumeLayouts(!0)):e.onShowVeto(),e},showAt:function(e,t,n){var i=this;return i.rendered||!i.autoRender&&!i.floating?(i.floating?i.setPosition(e,t,n):i.setPagePosition(e,t,n),void i.show()):(i.x=e,i.y=t,i.show())},showBy:function(e,t,n){var i=this;return i.floating&&e&&(i.alignTarget=e,t&&(i.defaultAlign=t),n&&(i.alignOffset=n),i.show(),i.hidden||i.alignTo(e,t||i.defaultAlign,n||i.alignOffset)),i},suspendLayouts:function(){var e=this;e.rendered&&1===++e.layoutSuspendCount&&(e.suspendLayout=!0)},unitizeBox:function(e){return Ext.Element.unitizeBox(e)},unmask:function(){(this.getMaskTarget()||this.el).unmask(),this.setMasked(!1)},unregisterFloatingItem:function(e){var t=this;t.floatingDescendants&&t.floatingDescendants.unregister(e)},up:function(e,t){var n=this.getRefOwner(),i="string"==typeof t,r="number"==typeof t,o=t&&t.isComponent,a=0;if(e)for(;n;n=n.getRefOwner()){if(a++,e.isComponent){if(n===e)return n}else if(Ext.ComponentQuery.is(n,e))return n;if(i&&n.is(t))return;if(r&&a===t)return;if(o&&n===t)return}return n},update:function(e,t,n){var i,r,o,a=this,s=a.tpl&&!Ext.isString(e),l=a.getScrollable(),d=a.focusableContainer;s?a.data=e&&e.isEntity?e.getData(!0):e:a.html=Ext.isObject(e)?Ext.DomHelper.markup(e):e,a.rendered&&(i=a.getSizeModel(),r=i.width.shrinkWrap||i.height.shrinkWrap,a.isContainer?(o=a.layout.getRenderTarget(),r=r||a.items.items.length>0):o=a.touchScroll?a.getScrollerEl():a.getTargetEl(),s?a.tpl[a.tplWriteMode](o,a.data||{}):o.setHtml(a.html,t,n),r&&a.updateLayout(),l&&l.refresh(!0),d&&d.onFocusableChildUpdate(a))},setHtml:function(e){this.update(e)},applyData:function(e){this.update(e)},updateBox:function(e){return this.setSize(e.width,e.height),this.setPagePosition(e.x,e.y),this},_asLayoutRoot:{isRoot:!0},_notAsLayoutRoot:{isRoot:!1},updateLayout:function(e){var t,n=this,i=n.lastBox,r=e&&e.isRoot;i&&(i.invalid=!0),!n.rendered||n.layoutSuspendCount||n.suspendLayout||(n.hidden?Ext.Component.cancelLayout(n):"boolean"!=typeof r&&(r=n.isLayoutRoot()),!r&&n.ownerLayout&&n.ownerLayout.onContentChange(n)||n.isLayoutSuspended()||(t=e&&e.hasOwnProperty("defer")?e.defer:n.deferLayouts,Ext.Component.updateLayout(n,t)))},updateMaxHeight:function(e,t){this.changeConstraint(e,t,"min","max-height","height")},updateMaxWidth:function(e,t){this.changeConstraint(e,t,"min","max-width","width")},updateMinHeight:function(e,t){this.changeConstraint(e,t,"max","min-height","height")},updateMinWidth:function(e,t){this.changeConstraint(e,t,"max","min-width","width")},getAnchorToXY:function(e,t,n,i){return e.getAnchorXY(t,n,i)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(e){this.el.setLocalX(e)},setLocalXY:function(e,t){this.el.setLocalXY(e,t)},setLocalY:function(e){this.el.setLocalY(e)},setX:function(e,t){this.el.setX(e,t)},setXY:function(e,t){this.el.setXY(e,t)},setY:function(e,t){this.el.setY(e,t)},privates:{addOverCls:function(){var e=this;e.disabled||e.el.addCls(e.overCls)},addUIToElement:function(){var e,t,n,i,r=this,o=r.baseCls+"-"+r.ui;if(r.addCls(o),r.rendered&&r.frame&&!Ext.supports.CSS3BorderRadius){o+="-",e=r.getChildEls();for(t in e)i=e[t].frame,i&&i!==!0&&(n=r[t],n&&n.addCls(o+i))}},changeConstraint:function(e,t,n,i,r){var o=this,a=o[r];null!=e&&"number"==typeof a&&(o[r]=Math[n](a,e)),o.liquidLayout&&(null!=e?o.setStyle(i,e+"px"):t&&o.setStyle(i,"")),o.rendered&&o.updateLayout()},constructPlugin:function(e){var t=this;return e="string"==typeof e?Ext.PluginManager.create({},e,t):Ext.PluginManager.create(e,null,t)},constructPlugins:function(){var e,t,n,i=this,r=i.plugins;if(r)for(e=[],e.processed=!0,Ext.isArray(r)||(r=[r]),t=0,n=r.length;n>t;t++)e[t]=i.constructPlugin(r[t]);return i.pluginsInitialized=!0,e},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el),Ext.Component.cancelLayout(this),this.isDetached=!0},doAddListener:function(e,t,n,i,r,o,a){var s,l,d,u,c,h=this;if(Ext.isObject(t)||i&&i.element){if(i.element){u=i.element,s={},s[e]=t,n&&(s.scope=n),d=h.$elementEventOptions;for(l in i)d[l]&&(s[l]=i[l])}else s=t,u=e;return c=h[u],void(c&&c.isObservable?h.mon(c,s):(h.afterRenderEvents=h.afterRenderEvents||{},h.afterRenderEvents[u]||(h.afterRenderEvents[u]=[]),h.afterRenderEvents[u].push(s)))}h.mixins.observable.doAddListener.call(h,e,t,n,i,r,o,a)},fireHierarchyEvent:function(e){var t=Ext.GlobalEvents;t.hasListeners[e]&&t.fireEvent(e,this)},getActionEl:function(){return this.el},getAutoId:function(){return this.autoGenId=!0,++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var e,t,n,i=this,r=i.getScrollable(),o=i._scrollFlags;return r?(e=r.getX(),e===!0&&(e="auto"),t=r.getY(),t===!0&&(t="auto"),n=o[e][t]):n=o.none,i.scrollFlags=n,{overflowX:n.overflowX,overflowY:n.overflowY}},getPlugins:function(){var e=this.plugins;return e=e&&e.processed?e:this.constructPlugins(),e||null},getProxy:function(){var e,t=this;return t.proxy||(e=Ext.getBody(),t.proxy=t.el.createProxy("x-proxy-el",e,!0)),t.proxy},getScrollerEl:function(){var e=this;return e.scrollerEl||(e.scrollerEl=e.componentLayout.getScrollerEl()||e.getOverflowEl().child(e.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return"x-"+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(e){return Ext.XTemplate.getTpl(this,e)},initCls:function(){var e=this,t=[e.baseCls],n=e.getComponentLayout().targetCls;return n&&t.push(n),e.componentCls?t.push(e.componentCls):e.componentCls=e.baseCls,t},initDraggable:function(){var e=this,t=e.resizer&&e.resizer.el!==e.el?e.resizerComponent=new Ext.Component({ariaRole:"presentation",el:e.resizer.el,rendered:!0,container:e.container}):e,n=Ext.applyIf({el:t.getDragEl(),constrainTo:e.constrain||e.draggable.constrain?e.constrainTo||(e.floatParent?e.floatParent.getTargetEl():e.container):void 0},e.draggable);(e.constrain||e.constrainDelegate)&&(n.constrain=e.constrain,n.constrainDelegate=e.constrainDelegate),e.dd=new Ext.util.ComponentDragger(t,n)},initPadding:function(e){var t=this,n=t.padding;null!=n&&(t.touchScroll||t.layout&&t.layout.managePadding&&"padding"===t.contentPaddingProperty?e.setStyle("padding",0):e.setStyle("padding",this.unitizeBox(n===!0?5:n)))},initPlugin:function(e){return e.init(this),e},initResizable:function(e){var t=this;e=Ext.apply({target:t,dynamic:!1,constrainTo:t.constrain||e&&e.constrain?t.constrainTo||(t.floatParent?t.floatParent.getTargetEl():t.container):void 0,handles:t.resizeHandles},e),e.target=t,t.resizer=new Ext.resizer.Resizer(e)},initStyles:function(e){var t,n,i=this,r=i.margin,o=i.border,a=i.cls,s=i.style,l=i.x,d=i.y,u=i.liquidLayout;i.initPadding(e),null!=r&&e.setStyle("margin",this.unitizeBox(r===!0?5:r)),null!=o&&i.setBorder(o,e),a&&a!==i.initialCls&&(e.addCls(a),i.cls=i.initialCls=null),s&&s!==i.initialStyle&&(e.setStyle(s),i.style=i.initialStyle=null),null!=l&&e.setStyle(i.horizontalPosProp,"number"==typeof l?l+"px":l),null!=d&&e.setStyle("top","number"==typeof d?d+"px":d),(!i.ownerCt||i.floating)&&(Ext.scopeCss&&e.addCls(i.rootCls),e.addCls(i.borderBoxCls)),(u||!i.getFrameInfo())&&(t=i.width,n=i.height,null!=t&&("number"==typeof t?e.setStyle("width",t+"px"):e.setStyle("width",t)),null!=n&&("number"==typeof n?e.setStyle("height",n+"px"):e.setStyle("height",n)))},isContainedFloater:function(){return this.floating&&this.floatParent},isDescendant:function(e){if(e.isContainer)for(var t=this.ownerCt;t;t=t.ownerCt)if(t===e)return!0;return!1},owns:function(e){var t,n=!1;return e.isEvent?e=e.target:e.isElement&&(e=e.dom),t=Ext.Component.fromElement(e),t&&(n=t===this||!!t.up(this)),n},parseBox:function(e){return Ext.Element.parseBox(e)},reattachToBody:function(){this.isDetached=!1},refreshScroll:function(){var e=this.getScrollable();e&&e.refresh()},removeManagedListenerItem:function(e,t,n,i,r,o){var a=this,s=t.options?t.options.element:null;return s?(s=a[s],void(s&&s.un&&(!e&&(t.item!==n||t.ename!==i||r&&t.fn!==r||o&&t.scope!==o)||(s.un(t.ename,t.fn,t.scope),e||Ext.Array.remove(a.managedListeners,t))))):a.mixins.observable.removeManagedListenerItem.apply(a,arguments)},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(e){Ext.Array.remove(this.plugins,e),e.destroy()},removeUIFromElement:function(){var e,t,n,i,r=this,o=r.baseCls+"-"+r.ui;if(r.removeCls(o),r.rendered&&r.frame&&!Ext.supports.CSS3BorderRadius){o+="-",e=r.getChildEls();for(t in e)i=e[t].frame,i&&i!==!0&&(n=r[t],n&&n.removeCls(o+i))}},setComponentLayout:function(e){var t=this.componentLayout;t&&t.isLayout&&t!==e&&t.setOwner(null),this.componentLayout=e,e.setOwner(this)},setHiddenState:function(e){var t=this,n=t.getInherited(),i=t.zIndexManager;t.hidden=e,e?n.hidden=!0:delete n.hidden,i&&i.onComponentShowHide(t)},setupProtoEl:function(){var e=this.initCls();this.protoEl.addCls(e)},wrapPrimaryEl:function(e){var t=this,n=t.el;n&&n.isElement||(t.el=Ext.get(e)),t.floating&&this.mixins.floating.constructor.call(this)}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){return this.updateLayout(),this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},1,["component","box"],["component","box"],{component:!0,box:!0},["widget.box","widget.component"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext,"Component",Ext,"AbstractComponent"],function(e){(e.prototype.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1,e.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"}),Ext.resumeLayouts=function(t){e.resumeLayouts(t)},Ext.suspendLayouts=function(){e.suspendLayouts()},Ext.batchLayouts=function(t,n){e.suspendLayouts(),t.call(n),e.resumeLayouts(!0)},Ext.setGlyphFontFamily=function(e){Ext._glyphFontFamily=e},e.hierarchyEventSource=e.prototype.hierarchyEventSource=Ext.GlobalEvents}),Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var e=this;e._borderRegionInited||(e._borderRegionInited=!0,e.addStateEvents(["changeregion","changeweight"]),Ext.override(e,{getState:function(){var t=e.callParent();return t=e.addPropertyToState(t,"region"),t=e.addPropertyToState(t,"weight")}}))},getOwningBorderContainer:function(){var e=this.getOwningBorderLayout();return e&&e.owner},getOwningBorderLayout:function(){var e=this.ownerLayout;return e&&e.isBorderLayout?e:null},setRegion:function(e){var t,n=this,i=n.region;if(e!==i)if(t=n.getOwningBorderLayout()){var r,o,a,s=t.regionFlags[e],l=n.placeholder,d=n.splitter,u=t.owner,c=t.regionMeta,h=n.collapsed||n.floated;if(n.fireEventArgs("beforechangeregion",[n,e])===!1)return i;Ext.suspendLayouts(),n.region=e,Ext.apply(n,s),n.updateCollapseTool&&n.updateCollapseTool(),d&&(Ext.apply(d,s),d.updateOrientation(),o=u.items,a=o.indexOf(n),a>=0&&(r=c[e].splitterDelta,o.getAt(a+r)!==d&&(o.remove(d),a=o.indexOf(n),r>0&&++a,o.insert(a,d)))),l&&(h&&n.expand(!1),u.remove(l),n.placeholder=null,h&&n.collapse(null,!1)),u.updateLayout(),Ext.resumeLayouts(!0),n.fireEventArgs("changeregion",[n,i])}else n.region=e;return i},setWeight:function(e){var t=this,n=t.getOwningBorderContainer(),i=t.placeholder,r=t.weight;return e!==r&&t.fireEventArgs("beforechangeweight",[t,e])!==!1&&(t.weight=e,i&&(i.weight=e),n&&n.updateLayout(),t.fireEventArgs("changeweight",[t,r])),r}},function(e){var t=e.prototype;t.setBorderRegion=t.setRegion,t.setRegionWeight=t.setWeight}),Ext.define("Ext.rtl.Component",{override:"Ext.Component",applyScrollable:function(e,t){var n=arguments.callee.$previous.call(this,e,t);return n&&this.getInherited().rtl&&n.setRtl(!0),n},convertPositionSpec:function(e){return(Ext.rootInheritedState.rtl||!1)!==(this.getInherited().rtl||!1)&&(e=e.replace(/l/g,"tmp").replace(/r/g,"l").replace(/tmp/g,"r")),e},getAnchorToXY:function(e,t,n,i){var r,o,a,s,l=document;return e.dom===l.body||e.dom===l?(o=Ext.rootInheritedState.rtl?e.rtlGetScroll():e.getScroll(),a=o.left,s=o.top):(r=e.getXY(),a=n?0:r[0],s=n?0:r[1]),e.calculateAnchorXY(t,a,s,i)},getBorderPadding:function(){var e,t=this.el.getBorderPadding();return this.isParentRtl()&&(e=t.xBegin,t.xBegin=t.xEnd,t.xEnd=e),t},getLocalX:function(){return this.isLocalRtl()?this.el.rtlGetLocalX():this.el.getLocalX()},getLocalXY:function(){return this.isLocalRtl()?this.el.rtlGetLocalXY():this.el.getLocalXY()},unitizeBox:function(e){return this.getInherited().rtl?Ext.dom.Element.rtlUnitizeBox(e):arguments.callee.$previous.apply(this,arguments)},initInheritedState:function(e){arguments.callee.$previous.apply(this,arguments);var t=this.rtl;void 0!==t&&(e.rtl=t)},isLocalRtl:function(){var e,t,n=this;return n.floating?(void 0===n._isOffsetParentRtl&&(t=this.el.dom.offsetParent||this.el.dom.parentNode,t&&(n._isOffsetParentRtl=Ext.fly(t,"_isLocalRtl").isStyle("direction","rtl"))),e=!!n._isOffsetParentRtl):e=this.isParentRtl(),e},isParentRtl:function(){var e,t=this,n=t.getInherited(),i=!1;return n.hasOwnProperty("rtl")&&(e=n.rtl,delete n.rtl),n.rtl&&(i=!0),void 0!==e&&(n.rtl=e),i},setLocalX:function(e){return this.isLocalRtl()?this.el.rtlSetLocalX(e):this.el.setLocalX(e)},setLocalXY:function(e,t){return this.isLocalRtl()?this.el.rtlSetLocalXY(e,t):this.el.setLocalXY(e,t)},isOppositeRootDirection:function(){return!this.getInherited().rtl!=!Ext.rootInheritedState.rtl},privates:{initStyles:function(){this.getInherited().rtl&&(this.horizontalPosProp="right"),arguments.callee.$previous.apply(this,arguments)},parseBox:function(e){return this.getInherited().rtl?Ext.dom.Element.rtlParseBox(e):arguments.callee.$previous.apply(this,arguments)}}},function(){Ext.onInternalReady(function(){(Ext.fly(document.documentElement).isStyle("direction","rtl")||Ext.getBody().isStyle("direction","rtl"))&&(Ext.rootInheritedState.rtl=!0)})}),Ext.define("BP.overrides.AbstractComponent",{override:"Ext.AbstractComponent",rtl:!!window.rtlEnable}),Ext.define("BP.overrides.Component",{override:"Ext.Component",_listenersDestroyable:{},windowResizeBuffer:100,initComponent:function(){var e=this;e.hasListeners.browserwindowresize&&Ext.GlobalEvents.on("resize",function(){e.fireEvent("browserwindowresize",e)},e,{buffer:e.windowResizeBuffer}),e.hasListeners.browserwindowunload&&Ext.getWin().on("unload",function(){e.fireEvent("browserwindowunload",e)},e),e.on("beforedestroy",e.onBeforeDestroy,e),arguments.callee.$previous.apply(this,arguments)},addDestroyableListeners:function(e,t){var t=t||this;t.id=t.id||Ext.id(),t._listenersDestroyable[t.id]=t._listenersDestroyable[t.id]||[],t._listenersDestroyable[t.id].push(e)},getDestroyableListeners:function(e){var e=e||this;return e._listenersDestroyable[e.id]||[]},fireEvent:function(e){return this.eventsSuspended?void 0:this.fireEventArgs(e,Array.prototype.slice.call(arguments,1))},onBeforeDestroy:function(e){var e=e||this,t=e.getDestroyableListeners();Ext.each(t,function(e){e.destroy()}),delete e._listenersDestroyable[e.id]},toggleClass:function(e){var t=this,n=typeof e;if("string"===n)t.hasCls(e)?t.removeCls(e):t.addCls(e);else if(Ext.isArray(e))for(i;i<e.length;i++)t.hasCls(e[i])?t.removeCls(e[i]):t.addCls(e[i]);return t},maskui:function(e,t,n){var i=this.lastBox,r=this.getMaskTarget()||this.el;i&&(n=i.height),r.maskui(e,t,n)},changeUI:function(e,t,n){var i,r,o,a=t||"default",s=e.ui;if(s&&-1!=(i=s.indexOf("-"))&&(s=s.substring(0,i)),Ext.isFunction(n)&&n.call(e,s,a)===!1||(e.setUI(a),e.getEl()&&(r=Ext.DomQuery.select("[id^="+e.getId()+"][class*="+s+"]",e.getEl().dom)),Ext.each(r,function(e){e=Ext.fly(e);var t=Ext.String.splitWords(e.getAttribute("class"));Ext.each(t,function(t){-1!=t.indexOf(s)&&e.replaceCls(t,t.replace(s,a))})})),n){if(o=function(e){this.changeUI(e,a,n)},e.isXType("actioncolumn"))return e;e.isXType("container")&&e.items.each(o,this),e.isXType("panel")&&Ext.each(e.getDockedItems(),o,this)}},getTheme:function(){var e=Ext.util.Cookies.get("platformTheme");return this.validUI(e)?e:"default"},setTheme:function(e){var t=this;e=t.getTheme(),t.changeUI(t,e,function(){return this.isXType("toolbar")&&"footer"==this.ui?!1:this.isXType("button")?!1:!0})},validUI:function(e){var t=["default","dark"];return!!~t.indexOf(e)},beforeRender:function(){var e=this,t=e.getTheme();arguments.callee.$previous.apply(this,arguments),t&&e.setTheme(t)}}),Ext.define("BP.overrides.rtl.Component",{override:"Ext.Component"},function(){Ext.onInternalReady(function(){(Ext.fly(document.documentElement).isStyle("direction","rtl")||Ext.getBody().isStyle("direction","rtl"))&&(Ext.rootInheritedState.rtl=!0)})}),Ext.define("Ext.overrides.app.domain.Component",{override:"Ext.app.domain.Component"},function(e){e.monitor(Ext.Component)}),Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:!0,constructor:function(){var e=this,t=Ext.app.EventDomain.instances;e.callParent(),e.domains=t,e.bus=t.component.bus},control:function(e,t){return this.domains.component.listen(e,t)},listen:function(e,t){var n,i=this.domains;for(n in e)e.hasOwnProperty(n)&&i[n].listen(e[n],t)},unlisten:function(e){var t,n=Ext.app.EventDomain.instances;for(t in n)n[t].unlisten(e)}},1,0,0,0,0,0,[Ext.app,"EventBus"],0),Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:!0,type:"global",constructor:function(){var e=this;e.callParent(),e.monitor(Ext.GlobalEvents)},listen:function(e,t){this.callParent([{global:e},t])},match:Ext.returnTrue},1,0,0,0,0,0,[Ext.app.domain,"Global"],0),Ext.cmd.derive("Ext.app.BaseController",Ext.Base,{isController:!0,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(e){var t=this;Ext.apply(t,e),delete t.control,delete t.listen,t.eventbus=Ext.app.EventBus,t.mixins.observable.constructor.call(t,e),t.ensureId()},applyListen:function(e){return Ext.isObject(e)&&(e=Ext.clone(e)),e},applyControl:function(e){return Ext.isObject(e)&&(e=Ext.clone(e)),e},updateControl:function(e){this.ensureId(),e&&this.control(e)},updateListen:function(e){this.ensureId(),e&&this.listen(e)},updateRoutes:function(e){if(e){var t,n,i,r=this,o=r.getBefore()||{},a=Ext.app.route.Router;for(t in e)n=e[t],Ext.isString(n)&&(n={action:n}),i=n.action,n.before||(n.before=o[i]),a.connect(t,n,r)}},isActive:function(){return!0},control:function(e,t,n){var i,r=this,o=n;Ext.isString(e)?(i={},i[e]=t):(i=e,o=t),r.eventbus.control(i,o||r)},listen:function(e,t){this.eventbus.listen(e,t||this)},destroy:function(){var e=this,t=e.eventbus;Ext.app.route.Router.disconnectAll(e),t&&(t.unlisten(e),e.eventbus=null),e.clearListeners(),e.callParent()},redirectTo:function(e,t){if(e.isModel&&(e=e.toUrl()),t)Ext.app.route.Router.onStateChange(e);else{var n=Ext.util.History.getToken();if(n===e)return!1}return Ext.util.History.add(e),!0}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,"BaseController"],0),Ext.cmd.derive("Ext.app.Util",Ext.Base,{},0,0,0,0,0,0,[Ext.app,"Util"],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(e){var t,n,i=Ext.app.namespaces;for(Ext.isArray(e)||(e=[e]),t=0,n=e.length;n>t;t++)i[e[t]]=!0},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(e){var t,n=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),i="";for(t in n)n.hasOwnProperty(t)&&t.length>i.length&&t+"."===e.substring(0,t.length+1)&&(i=t);return""===i?void 0:i}}),Ext.getNamespace=Ext.app.getNamespace}),Ext.cmd.derive("Ext.util.CollectionKey",Ext.Base,{isCollectionKey:!0,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:!0},generation:0,map:null,mapRebuilds:0,constructor:function(e){this.initConfig(e)},get:function(e){var t=this.map||this.getMap();return t[e]||null},clear:function(){this.map=null},getRootProperty:function(){var e=this,t=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return null!==t?t:e.getCollection().getRootProperty()},indexOf:function(e,t){var n,i,r,o,a=this.map||this.getMap(),s=a[e],l=this.getCollection(),d=l.length;if(!s)return-1;if(void 0===t&&(t=-1),s instanceof Array){for(r=s,i=d,o=r.length;o-->0;)n=l.indexOf(r[o]),i>n&&n>t&&(i=n);if(i===d)return-1}else i=l.indexOf(s);return i>t?i:-1},updateKey:function(e,t){var n,i,r=this,o=r.map;o&&(n=o[t],n instanceof Array?(i=Ext.Array.indexOf(n,e),i>=0&&(n.length>2?n.splice(i,1):o[t]=n[1-i])):n&&delete o[t],r.add([e]))},onCollectionAdd:function(e,t){this.map&&this.add(t.items)},onCollectionItemChange:function(){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(e,t){var n,i,r,o=this,a=o.map,s=t.items,l=s.length;if(a)if(o.getUnique()&&l<e.length/2)for(n=0;l>n;++n)r=o.getKey(i=s[n]),delete a[r];else o.map=null},add:function(e){var t,n,i,r,o,a,s=this,l=s.map;for(o=e.length,a=s.getUnique(),n=0;o>n;++n)r=s.getKey(i=e[n]),!a&&r in l?((t=l[r])instanceof Array||(l[r]=t=[t]),t.push(i)):l[r]=i},applyKeyFn:function(e){Ext.isString(e)?this.getKey=function(t){return t[e]()}:this.getKey=e},updateProperty:function(e){var t=this.getRootProperty();this.getKey=function(n){return(t?n[t]:n)[e]}},getMap:function(){var e=this,t=e.map;return t||(e.map=t={},e.keysByItemKey={},++e.mapRebuilds,e.add(e.getCollection().items)),t},updateCollection:function(e){e.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,"CollectionKey"],0),Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:!0,config:{groupFn:null,sortProperty:null},constructor:function(){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(e){var t=this._groupFn(e);return null!=t?t+"":""},sortFn:function(e,t){var n=this,i=n._groupFn(e),r=n._groupFn(t),o=n._sortProperty,a=n._root,s=n._sorterFn,l=n._transform;if(i===r)return 0;if(o||s){if(s)return s.call(this,e,t);a&&(e=e[a],t=t[a]),i=e[o],r=t[o],l&&(i=l(i),r=l(r))}return i>r?1:r>i?-1:0},standardGroupFn:function(e){var t=this._root;return(t?e[t]:e)[this._property]},updateSorterFn:function(){},updateProperty:function(){this.getGroupFn()||this.setGroupFn(this.standardGroupFn)}},1,0,0,0,0,0,[Ext.util,"Grouper"],0),Ext.cmd.derive("Ext.util.Collection",Ext.Base,{isCollection:!0,config:{autoFilter:!0,autoSort:!0,autoGroup:!0,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:!1,sorted:!1,filtered:!1,$endUpdatePriority:1001,constructor:function(e){var t=this;t.items=[],t.map={},t.length=0,e&&e.keyFn&&(t.getKey=e.keyFn),t.mixins.observable.constructor.call(t,e)},destroy:function(){var e=this,t=e._filters,n=e._sorters,i=e._groups;t&&(t.destroy(),e._filters=null),n&&(n.destroy(),e._sorters=null),i&&(i.destroy(),e._groups=null),e.setSource(null),e.observers=e.items=e.map=null},add:function(){var e=this,t=e.decodeItems(arguments,0),n=t;return t.length&&(e.requestedIndex=e.length,e.splice(e.length,0,t),delete e.requestedIndex,n=1===t.length?t[0]:t),n},replaceAll:function(){var e,t,n=this,i=n.length;return 0===i?n.add.apply(n,arguments):(t=n.decodeItems(arguments,0),e=t,t.length?(n.splice(0,n.length,t),e=1===t.length?t[0]:t):n.removeAll(),e)},aggregate:function(){var e=this,t=Ext.Array.slice(arguments);return t.unshift(e.items),e.aggregateItems.apply(e,t)},aggregateByGroup:function(e,t,n){var i=this.getGroups();return this.aggregateGroups(i,e,t,n)},aggregateItems:function(e,t,n,i,r,o){var a,s,l,d,u,c,h,p=this,f=Ext.Number.clipIndices(e.length,[i,r]),g=0!==i&&r!==e.length;if(i=f[0],r=f[1],!Ext.isFunction(n))return n=p._aggregators[n],n.call(p,e,i,r,t,p.getRootProperty());for(d=p.getRootProperty(),c=Array(l),h=g?Array(l):e,a=i,s=0;r>a;++a,s++)g&&(h[s]=u=e[a]),c[s]=(d?u[d]:u)[t];return n.call(o||p,e,c,0)},aggregateGroups:function(e,t,n,i){var r,o,a,s=e.items,l=s.length,d=!Ext.isFunction(n),u={};for(r=0;l>r;++r)o=s[r],a=d?o[n](t):this.aggregateItems(o.items,t,n,null,null,i),u[o.getGroupKey()]=a;return u},beginUpdate:function(){this.updating++||this.notify("beginupdate")},clear:function(){var e,t,n=this,i=n.generation,r=i?n.items:[];if(i&&(n.items=[],n.length=0,n.map={},n.indices={},n.generation++,e=n.getExtraKeys()))for(t in e)e[t].clear();return r},clone:function(){var e=this,t=new e.self(e.initialConfig);return t.add(e.items),t},collect:function(e,t,n){var i,r,o,a=this.items,s=a.length,l={},d=[];for(i=0;s>i;++i)o=a[i],o=(t?o[t]:o)[e],r=o+"",!n&&Ext.isEmpty(o)||l[r]||(l[r]=1,d.push(o));return d},contains:function(e){var t,n=!1;return null!=e&&(t=this.getKey(e),n=this.map[t]===e),n},containsKey:function(e){return e in this.map},createFiltered:function(e,t,n,i,r){var o,a,s,l,d,u=this,c=new u.self(u.initialConfig),h=u.getRootProperty(),p=u.items;if(Ext.isFunction(e))l=e,d=t;else{if(Ext.isString(e))s=[new Ext.util.Filter({property:e,value:t,root:h,anyMatch:n,caseSensitive:i,
exactMatch:r})];else if(e instanceof Ext.util.Filter)s=[e],e.setRoot(h);else if(Ext.isArray(e))for(s=e.slice(0),a=0,o=s.length;o>a;++a)s[a].setRoot(h);l=Ext.util.Filter.createFilterFn(s)}for(d=d||u,a=0,o=p.length;o>a;a++)l.call(d,p[a])&&c.add(p[a]);return c},filterBy:function(e,t){return this.createFiltered(e,t)},each:function(e,t){var n,i,r=this.items,o=r.length;if(o)for(t=t||this,r=r.slice(0),n=0;o>n&&(i=e.call(t,r[n],n,o),i!==!1);n++);return i},eachKey:function(e,t){var n,i,r,o,a=this,s=a.items,l=s.length;if(l)for(t=t||a,s=s.slice(0),n=0;l>n&&(r=a.getKey(i=s[n]),o=e.call(t,r,i,n,l),o!==!1);n++);return o},endUpdate:function(){--this.updating||this.notify("endupdate")},find:function(e,t,n,i,r,o){if(Ext.isEmpty(t,!1))return null;var a=Ext.String.createRegex(t,i,r,o),s=this.getRootProperty();return this.findBy(function(t){return t&&a.test((s?t[s]:t)[e])},null,n)},findBy:function(e,t,n){var i,r,o,a=this,s=a.items,l=s.length;for(t=t||a,i=n||0;l>i;i++)if(o=a.getKey(r=s[i]),e.call(t,r,o))return s[i];return null},findIndex:function(e,t,n,i,r,o){var a=this.find(e,t,n,i,r,o);return a?this.indexOf(a):-1},findIndexBy:function(e,t,n){var i=this.findBy(e,t,n);return i?this.indexOf(i):-1},first:function(e){var t=e?this.getGroups():void 0;return t?this.aggregateGroups(t,null,"first"):this.items[0]},last:function(e){var t=e?this.getGroups():void 0;return t?this.aggregateGroups(t,null,"last"):this.items[this.length-1]},get:function(e){return this.map[e]},getAt:function(e){return this.items[e]},getByKey:function(e){return this.map[e]},getCount:function(){return this.length},getKey:function(e){var t=e.id;return 0===t||t?t:0===(t=e._id)||t?t:e.getId()},getRange:function(e,t){var n,i=this.items,r=i.length;return r?(n=Ext.Number.clipIndices(r,[e,t]),n=i.slice(n[0],n[1])):n=[],n},getValues:function(e,t,n,i){var r,o,a=this.items,s=Ext.Number.clipIndices(a.length,[n,i]),l=[];for(r=s[0],i=s[1];i>r;++r)o=a[r],o=(t?o[t]:o)[e],l.push(o);return l},indexOf:function(e){if(!e)return-1;var t=this.getKey(e);return this.indexOfKey(t)},indexOfKey:function(e){var t=this,n=t.indices;return e in t.map?(n||(n=t.getIndices()),n[e]):-1},insert:function(e){var t=this,n=t.decodeItems(arguments,1),i=n;return n.length&&(t.requestedIndex=e,t.splice(e,0,n),delete t.requestedIndex,i=1===n.length?n[0]:n),i},itemChanged:function(e,t,n,i){var r,o,a,s,l,d,u=this,c=0===n||!!n,h=u.filtered&&u.getAutoFilter(),p=!1,f=0,g=u.items,m=u.length-1,x=u.sorted&&m>0&&u.getAutoSort(),v=u.getSource(),y=0,E=!1,b=!1;v&&!v.updating?v.itemChanged(e,t,n,i):(l=u.getKey(e),h&&(o=u.indexOfKey(c?n:l),b=0>o,E=u.isItemFiltered(e),p=b!==E),p?E?(y=[e],a=-1):(r=[e],a=u.length):x&&!E&&(h||(o=u.indexOfKey(c?n:l)),d=u.getSortFn(),o&&d(g[o-1],g[o])>0?(f=-1,a=Ext.Array.binarySearch(g,e,0,o,d)):m>o&&d(g[o],g[o+1])>0&&(f=1,a=Ext.Array.binarySearch(g,e,o+1,d)),f&&(r=[e])),s={item:e,key:l,index:a,filterChanged:p,keyChanged:c,indexChanged:!!f,filtered:E,oldIndex:o,newIndex:a,wasFiltered:b,meta:i},c&&(s.oldKey=n),t&&(s.modified=t),u.beginUpdate(),u.notify("beforeitemchange",[s]),c&&u.updateKey(e,n),(r||y)&&u.splice(a,y,r),f>0?s.newIndex--:0>f&&s.oldIndex++,u.notify(E?"filtereditemchange":"itemchange",[s]),u.endUpdate())},remove:function(){var e=this,t=e.decodeRemoveItems(arguments,0),n=e.length;return e.splice(0,t),n-e.length},removeAll:function(){var e=this,t=e.length;return e.generation&&t&&e.splice(0,t),e},removeAt:function(e,t){var n,i=this,r=i.length,o=Ext.Number,a=o.clipIndices(r,[e,void 0===t?1:t],o.Clip.COUNT),s=a[0],l=a[1]-s,d=1===l&&i.getAt(s);return i.splice(s,l),n=i.length-r,d&&n?d:n},removeByKey:function(e){var t=this.getByKey(e);return t&&this.remove(t)?t:!1},replace:function(e){var t=this.indexOf(e);-1===t?this.add(e):this.insert(t,e)},splice:function(e,t){var n,i,r,o,a,s,l,d,u,c,h,p,f,g,m,x=this,v=x.sorted&&x.getAutoSort(),y=x.map,E=x.items,b=x.length,C=t instanceof Array?x.decodeRemoveItems(t):null,w=!C,S=Ext.Number,T=S.clipIndices(b,[e,w?t:0],S.Clip.COUNT),P=T[0],I=T[1],k=I-P,B=x.decodeItems(arguments,2),M=B?B.length:0,D=P,R=x.indices||(M||C?x.getIndices():null),A=null,F=k?[P]:null,L=null,O=x.getSource();if(O&&!O.updating){if(w)for(C=[],l=0;k>l;++l)C.push(E[P+l]);return l=b>P?O.indexOf(E[P]):O.length,O.splice(l,C,B),x}if(M){for(n=B,L=[],i={},v&&(m=x.getSorters(),M>1&&(n.$cloned||(B=n=n.slice(0)),x.sortData(n))),l=0;M>l;++l)h=x.getKey(d=B[l]),void 0!==(c=i[h])?(g||(g={}))[c]=1:(u=R[h],(P>u||u>=I)&&(F||(F=[])).push(u)),i[h]=l,L.push(h);if(g){for(p=L,n=[],L=[],n.$cloned=!0,l=0;M>l;++l)g[l]||(d=B[l],n.push(d),L.push(p[l]));M=n.length}A={items:n,keys:L}}for(l=C?C.length:0;l-->0;)h=x.getKey(C[l]),void 0!==(u=R[h])&&(F||(F=[])).push(u);if(!A&&!F)return x;if(x.beginUpdate(),F){for(o=null,s=[],r={},F.length>1&&F.sort(Ext.Array.numericSortFn),l=0,f=F.length;f>l;++l)h=x.getKey(d=E[u=F[l]]),h in y&&(delete y[h],(!o||u>o.at+a.length)&&(s.push(o={at:u,items:a=[],keys:p=[],map:r,next:o,replacement:A}),A&&(A.replaced=o)),a.push(r[h]=d),p.push(h),D>u&&--D,k>1&&u===P&&(--k,F[l--]=++P));for(A&&(A.at=D),c=s.length;c-->0;){if(o=s[c],l=o.at,f=o.items.length,b>l+f&&(x.indices=R=null),x.length=b-=f,E.splice(l,f),R)for(p=o.keys,l=0;f>l;++l)delete R[p[l]];++x.generation,x.notify("remove",[o])}}if(A)if(v&&M>1&&b)x.spliceMerge(n,L);else{if(v&&(M>1?(D=0,x.indices=R=null):D=m.findInsertionIndex(A.items[0],E,x.getSortFn())),D===b){if(E.push.apply(E,n),R=x.indices)for(l=0;M>l;++l)R[L[l]]=D+l}else x.indices=null,Ext.Array.insert(E,D,n);for(l=0;M>l;++l)y[L[l]]=n[l];x.length+=M,A.at=D,A.atItem=0===D?null:E[D-1],++x.generation,x.notify("add",[A])}return x.endUpdate(),x},update:function(e,t){var n=this;n.beginUpdate();try{return e.call(t||n,n)}catch(i){throw i}finally{n.endUpdate()}},updateKey:function(e,t){var n,i=this,r=i.map,o=i.indices,a=i.getSource();a&&!a.updating?a.updateKey(e,t):(n=i.getKey(e))!==t&&(r[t]!==e||n in r||(delete r[t],i.updating++,i.generation++,r[n]=e,o&&(o[n]=o[t],delete o[t]),i.notify("updatekey",[{item:e,newKey:n,oldKey:t}]),i.updating--))},findInsertIndex:function(e){for(var t,n,i=this.getSource(),r=i.items,o=i.indexOf(e)-1;o>-1;){if(t=r[o],n=this.indexOf(t),n>-1)return n+1;--o}return 0},onCollectionAdd:function(e,t){var n,i,r,o,a,s,l=this,d=t.atItem,u=t.items,c=l.requestedIndex;if(l.sorted||(void 0!==c?i=c:d?(i=l.indexOf(d),-1===i?i=l.findInsertIndex(u[0]):++i):i=0),l.getAutoFilter()&&l.filtered)for(o=0,s=u.length;s>o;++o)a=u[o],l.isItemFiltered(a)?(r||(r=u.slice(0,o)),n||(n=[]),n.push(a)):r&&r.push(a);l.splice(0>i?l.length:i,0,r||u),n&&l.notify("filteradd",[n])},onCollectionBeforeItemChange:function(){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(e,t){delete this.onCollectionUpdateKey,this.itemChanged(t.item,t.modified,t.oldKey,t.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(e){var t,n,i,r,o,a=this,s={},l={};for(i=e.items,i=a.filtered&&a.getAutoFilter()?Ext.Array.filter(i,a.getFilterFn()):i.slice(0),a.sorted&&a.sortData(i),a.items=i,a.length=o=i.length,a.map=s,a.indices=l,t=0;o>t;++t)r=a.getKey(n=i[t]),s[r]=n,l[r]=t;a.notify("refresh")},onCollectionRemove:function(e,t){this.splice(0,t.items)},onCollectionUpdateKey:function(e,t){this.updateKey(t.item,t.oldKey)},_aggregators:{average:function(e,t,n,i,r){var o=n-t;return o&&this._aggregators.sum.call(this,e,t,n,i,r)/o},bounds:function(e,t,n,i,r){for(var o,a,s,l=t;n>l;++l)o=e[l],o=(r?o[r]:o)[i],a>o||(a=o),o>s||(s=o);return[s,a]},count:function(e){return e.length},extremes:function(e,t,n,i,r){var o,a,s,l,d,u=null,c=null;for(o=t;n>o;++o)a=e[o],d=(r?a[r]:a)[i],s>d||(s=d,u=a),d>l||(l=d,c=a);return[c,u]},max:function(e,t,n,i,r){var o=this._aggregators.bounds.call(this,e,t,n,i,r);return o[1]},maxItem:function(e,t,n,i,r){var o=this._aggregators.extremes.call(this,e,t,n,i,r);return o[1]},min:function(e,t,n,i,r){var o=this._aggregators.bounds.call(this,e,t,n,i,r);return o[0]},minItem:function(e,t,n,i,r){var o=this._aggregators.extremes.call(this,e,t,n,i,r);return o[0]},sum:function(e,t,n,i,r){for(var o,a=0,s=t;n>s;++s)o=e[s],o=(r?o[r]:o)[i],a+=o;return a}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(e){var t=this,n=t.observers;n||(t.observers=n=[]),n.push(e),n.length>1&&Ext.Array.sort(n,t.prioritySortFn)},prioritySortFn:function(e,t){var n=e.observerPriority||0,i=t.observerPriority||0;return n-i},applyExtraKeys:function(e,t){var n,i,r,o=this,a=t||{};for(i in e)r=e[i],r.isCollectionKey?r.setCollection(o):(n={collection:o},Ext.isString(r)?n.property=r:n=Ext.apply(n,r),r=new Ext.util.CollectionKey(n)),a[i]=o[i]=r,r.name=i;return a},applyGrouper:function(e){return e&&(e=this.getSorters().decodeSorter(e,"Ext.util.Grouper")),e},decodeItems:function(e,t){var n,i,r,o=this,a=void 0===t?e:e[t];if(!a||!a.$cloned){if(n=e.length>t+1||!Ext.isIterable(a),n&&(a=Ext.Array.slice(e,t),1===a.length&&void 0===a[0]&&(a.length=0)),i=o.getDecoder())for(n||(a=a.slice(0),n=!0),r=a.length;r-->0;)(a[r]=i.call(o,a[r]))===!1&&a.splice(r,1);n&&(a.$cloned=!0)}return a},getIndices:function(){var e,t,n=this,i=n.indices,r=n.items,o=r.length;if(!i)for(n.indices=i={},++n.indexRebuilds,e=0;o>e;++e)t=n.getKey(r[e]),i[t]=e;return i},notify:function(e,t){var n,i,r,o,a=this,s=a.observers,l=a._eventToMethodMap[e],d=0;if(t=t||[],s&&l)for(n=0,i=s.length;i>n;++n)r=(o=s[n])[l],r&&(d++||t.unshift(a),r.apply(o,t));a.hasListeners&&a.hasListeners[e]&&(d||t.unshift(a),a.fireEventArgs(e,t))},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(e){var t=this._filters;return t||e===!1||(t=new Ext.util.FilterCollection,this.setFilters(t)),t},isItemFiltered:function(e){return!this.getFilters().filterFn(e)},onFilterChange:function(){var e,t,n,i=this,r=i.getSource();if(r)(r.length||i.length)&&i.onCollectionRefresh(r);else{if(e=i.getExtraKeys()){t={};for(n in e)t[n]=e[n].clone(i)}r=new Ext.util.Collection({keyFn:i.getKey,extraKeys:t,rootProperty:i.getRootProperty()}),i.length&&r.add(i.items),i.setSource(r),i.autoSource=r}i.notify("filter")},applyFilters:function(e,t){return null==e||e&&e.isFilterCollection?e:(e&&(t||(t=this.getFilters()),t.splice(0,t.length,e)),t)},updateFilters:function(e,t){var n=this;t&&t.un("endupdate","onEndUpdateFilters",n),e&&(e.on({endupdate:"onEndUpdateFilters",scope:n,priority:n.$endUpdatePriority}),e.$filterable=n),n.onEndUpdateFilters(e)},onEndUpdateFilters:function(e){var t=this,n=t.filtered,i=!!e&&e.length>0;(n||i)&&(t.filtered=i,t.onFilterChange(e))},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(e){var t=this._sorters;return t||e===!1||(t=new Ext.util.SorterCollection,this.setSorters(t)),t},onSortChange:function(){this.sorted&&this.sortItems()},sort:function(){var e=this.getSorters();return e.addSort.apply(e,arguments),this},sortData:function(e){return Ext.Array.sort(e,this.getSortFn()),e},sortItems:function(e){var t=this;t.sorted&&(e=t.getSortFn()),t.indices=null,t.notify("beforesort",[t.getSorters(!1)]),t.length&&Ext.Array.sort(t.items,e),t.notify("sort")},sortBy:function(e){return this.sortItems(e)},findInsertionIndex:function(e,t,n){return t||(t=this.items),n||(n=this.getSortFn()),Ext.Array.binarySearch(t,e,n)},applySorters:function(e,t){return null==e||e&&e.isSorterCollection?e:(e&&(t||(t=this.getSorters()),t.splice(0,t.length,e)),t)},createSortFn:function(){var e=this,t=e.getGrouper(),n=e.getSorters(!1),i=n?n.getSortFn():null;return t?function(e,n){var r=t.sort(e,n);return!r&&i&&(r=i(e,n)),r}:i},updateGrouper:function(e){var t,n=this,i=n.getGroups(),r=n.getSorters();n.onSorterChange(),n.grouped=!!e,e?(i||(i=new Ext.util.GroupCollection({itemRoot:n.getRootProperty()}),i.$groupable=n,n.setGroups(i)),i.setGrouper(e),t=!0):(i&&(n.removeObserver(i),i.destroy()),n.setGroups(null)),r.updating||n.onEndUpdateSorters(r),t&&i.onCollectionRefresh(n)},updateSorters:function(e,t){var n=this;t&&t.un("endupdate","onEndUpdateSorters",n),e&&(e.on({endupdate:"onEndUpdateSorters",scope:n,priority:n.$endUpdatePriority}),e.$sortable=n),n.onSorterChange(),n.onEndUpdateSorters(e)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(e){var t=this,n=t.sorted,i=t.grouped&&t.getAutoGroup()||e&&e.length>0;(n||i)&&(t.sorted=!!i,t.onSortChange(e))},removeObserver:function(e){var t=this.observers;t&&Ext.Array.remove(t,e)},spliceMerge:function(e,t){var n,i,r,o,a,s,l=this,d=l.map,u=e.length,c=0,h=l.items,p=h.length,f=[],g=0,m=[],x=l.getSortFn();for(l.items=m,s=0;u>s;s=i){for(o=e[s];p>c&&!(x(o,a=h[c])<0);++c)m.push(a);if(c===p){for(f[g++]={at:m.length,itemAt:m[m.length-1],items:n=[]},g>1&&(f[g-2].next=f[g-1]);u>s;++s)n.push(o=e[s]),m.push(o);break}for(f[g++]={at:m.length,itemAt:m[m.length-1],items:n=[o]},g>1&&(f[g-2].next=f[g-1]),m.push(o),i=s+1;u>i&&!(x(o=e[i],a)>=0);++i)m.push(o),n.push(o)}for(;p>c;++c)m.push(h[c]);for(r=0;u>r;++r)d[t[r]]=e[r];for(l.length=m.length,++l.generation,l.indices=null,r=0;g>r;++r)l.notify("add",[f[r]])},getGroups:function(){return(arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateAutoGroup:function(e){var t=this.getGroups();t&&t.setAutoGroup(e),this.onEndUpdateSorters(this._sorters)},updateGroups:function(e,t){t&&this.removeObserver(t),e&&this.addObserver(e)},updateSource:function(e,t){var n=this.autoSource;t&&(t.removeObserver(this),t===n&&(n.destroy(),this.autoSource=null)),e&&(e.addObserver(this),(e.length||this.length)&&this.onCollectionRefresh(e))}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Collection"],function(){var e=this.prototype;e.removeAtKey=e.removeByKey,e.decodeRemoveItems=e.decodeItems,Ext.Object.each(e._aggregators,function(t){e[t]=function(e,n,i){return this.aggregate(e,t,n,i)},e[t+"ByGroup"]=function(e){return this.aggregateByGroup(e,t)}})}),Ext.cmd.derive("Ext.util.ObjectTemplate",Ext.Base,{isObjectTemplate:!0,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(e,t){return e.isObjectTemplate?e:new Ext.util.ObjectTemplate(e,t)}},constructor:function(e,t){Ext.apply(this,t),this.template=e},apply:function(e){var t=this;return delete t.apply,t.apply=t.compile(t.template),t.apply(e)},privates:{compile:function(e){var t,n,i,r,o=this,a=o.excludeProperties;if(Ext.isString(e))e.indexOf("{")<0?r=function(){return e}:o.valueRe.test(e)?(e=e.substring(1,e.length-1).split("."),r=function(t){for(var n=t,i=0;n&&i<e.length;++i)n=n[e[i]];return n}):(e=new Ext.XTemplate(e),r=function(t){return e.apply(t)});else if(!e||Ext.isPrimitive(e)||Ext.isFunction(e))r=function(){return e};else if(e instanceof Array){for(t=[],n=0,i=e.length;i>n;++n)t[n]=o.compile(e[n]);r=function(e){var n,r=[];for(n=0;i>n;++n)r[n]=t[n](e);return r}}else{t={};for(n in e)a[n]||(t[n]=o.compile(e[n]));r=function(n){var i,r,o={};for(i in e)r=a[i]?e[i]:t[i](n),void 0!==r&&(o[i]=r);return o}}return r}}},1,0,0,0,0,0,[Ext.util,"ObjectTemplate"],0),Ext.cmd.derive("Ext.data.schema.Role",Ext.Base,{isRole:!0,left:!0,owner:!1,side:"left",isMany:!1,defaultReaderType:"json",_internalReadOptions:{recordsOnly:!0,asRoot:!0},constructor:function(e,t){var n=this,i=t.extra;Ext.apply(n,t),i&&(delete i.type,Ext.apply(n,i),delete n.extra),n.association=e,e.owner===n.side&&(e.owner=n,n.owner=!0)},processUpdate:function(){Ext.Error.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(e,t,n){return n},checkMembership:Ext.emptyFn,adoptAssociated:function(e,t){var n=this.getAssociatedItem(e);n&&t.adopt(n)},createAssociationStore:function(e,t,n,i){var r,o=this,a=o.association,s=a.getFieldName(),l=a.isManyToMany,d=o.storeConfig,u=t.getId(),c={model:o.cls,role:o,session:e,associatedEntity:t,disableMetaChangeEvent:!0,pageSize:null,remoteFilter:!0,trackRemoved:!e};return l?c.filters=[{property:o.inverse.field,value:u,exactMatch:!0}]:s&&(c.filters=[{property:s,value:u,exactMatch:!0}],c.foreignKeyName=s),d&&Ext.apply(c,d),r=Ext.Factory.store(c),o.onStoreCreate(r,e,u),(s||l&&e)&&r.on({scope:o,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"}),n&&(r.loadData(n),r.complete=!!i),r},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(e,t,n,i,r){var o,a,s,l,d,u,c=this,h=c.getStoreName(),p=e[h],f=t&&t.reload,g=e.$source,m=e.session;if(!p){if(!i&&g&&(g=g[h],g&&!g.isLoading())){for(u=g,i=[],l=g.getData().items,a=0,s=l.length;s>a;++a)d=l[a],i.push(m.getRecord(d.self,d.id));r=!0}p=c.createAssociationStore(m,e,i,r),p.$source=u,i||!c.autoLoad&&!t||(f=!0),e[h]=p}return t&&(f||p.isLoading()?p.on("load",function(i,r,a,s){o=[i,s],n=n||t.scope||e,a?Ext.callback(t.success,n,o):Ext.callback(t.failure,n,o),o.push(a),Ext.callback(t,n,o),Ext.callback(t.callback,n,o)},null,{single:!0}):(o=[p,null],n=n||t.scope||e,Ext.callback(t.success,n,o),o.push(!0),Ext.callback(t,n,o),Ext.callback(t.callback,n,o))),f&&!p.isLoading()&&p.load(),p},getAssociatedItem:function(e){var t=this.isMany?this.getStoreName():this.getInstanceName();return e[t]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var e=this;return e.associationKey||(e.associationKey=e.association.schema.getNamer().readerRoot(e.role))},getReader:function(){var e=this,t=e.reader,n=e.cls,i=!e.associationKey,r=this.getReaderRoot();return t&&!t.isReader&&(Ext.isString(t)&&(t={type:t}),Ext.applyIf(t,{model:n,rootProperty:r,useSimpleAccessors:i,type:e.defaultReaderType}),t=e.reader=Ext.createByAlias("reader."+t.type,t)),t},getInstanceName:function(){var e=this;return e.instanceName||(e.instanceName=e.association.schema.getNamer().instanceName(e.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){var e=this;return e.storeName||(e.storeName=e.association.schema.getNamer().storeName(e.role))},constructReader:function(e){var t,n,i=this,r=i.getReader(),o=i.cls,a=!i.associationKey,s=i.getReaderRoot();return r||(n=o.getProxy(),n?(t=n.getReader(),r=new t.self,r.copyFrom(t),r.setRootProperty(s)):r=new e.self({model:o,useSimpleAccessors:a,rootProperty:s}),i.reader=r),r},read:function(e,t,n,i){var r=this.constructReader(n),o=r.getRoot(t);return o?r.readRecords(o,i,this._internalReadOptions):void 0},getCallbackOptions:function(e,t,n){return"function"==typeof e?e={callback:e,scope:t||n}:e&&(e=Ext.apply({},e),e.scope=t||e.scope||n),e},doGetFK:function(e,t,n){var i,r,o=this,a=o.cls,s=o.association.getFieldName(),l=o.getInstanceName(),d=e[l],u=t&&t.reload,c=void 0!==d&&!u,h=e.session;return c?d&&(c=!d.isLoading()):h?(i=e.get(s),i||0===i?(c=h.peekRecord(a,i,!0)&&!u,d=h.getRecord(a,i,!1)):(c=!0,e[l]=d=null)):s?(i=e.get(s),i||0===i?d||(d=a.createWithId(i)):(c=!0,e[l]=d=null)):c=!0,c?t&&(r=[d,null],n=n||t.scope||e,Ext.callback(t.success,n,r),r.push(!0),Ext.callback(t,n,r),Ext.callback(t.callback,n,r)):(e[l]=d,t=o.getCallbackOptions(t,n,e),d.load(t)),d},doSetFK:function(e,t,n,i){var r,o,a=this,s=a.association.getFieldName(),l=a.getInstanceName(),d=e[l],u=a.inverse,c=u.setterName;return e.session,t&&t.isEntity?d!==t&&(o=a.getOldInstanceName(),e[o]=d,e[l]=t,d&&d.isEntity&&(d[u.getInstanceName()]=void 0),s&&e.set(s,t.getId()),delete e[o],c&&t[c](e)):(r=e.changingKey&&!u.isMany||e.set(s,t),r&&d&&d.isEntity&&!d.isEqual(d.getId(),t)&&(e[l]=void 0,u.isMany||(d[u.getInstanceName()]=void 0))),n?(Ext.isFunction(n)&&(n={callback:n,scope:i||e}),e.save(n)):void 0}},1,0,0,0,0,0,[Ext.data.schema,"Role"],0),Ext.cmd.derive("Ext.data.schema.Association",Ext.Base,{isOneToOne:!1,isManyToOne:!1,isManyToMany:!1,owner:null,field:null,constructor:function(e){var t,n,i=this;Ext.apply(i,e),i.left=t=new i.Left(i,i.left),i.right=n=new i.Right(i,i.right),t.inverse=n,n.inverse=t},hasField:function(){return!!this.field},getFieldName:function(){var e=this.field;return e?e.name:""}},1,0,0,0,0,0,[Ext.data.schema,"Association"],0),Ext.cmd.derive("Ext.data.schema.OneToOne",Ext.data.schema.Association,{isOneToOne:!0,isToOne:!0,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(e){var t=this.getAssociatedItem(e);e[this.getInstanceName()]=null,t&&(t[this.inverse.getInstanceName()]=null)},createGetter:function(){var e=this;return function(){return e.doGet(this)}},createSetter:function(){var e=this;return function(t){return e.doSet(this,t)}},doGet:function(e){var t=this.getInstanceName(),n=e[t];return e.session,n||null},doSet:function(e,t){var n=this.getInstanceName(),i=e[n],r=this.inverse.setterName;return i!==t&&(e[n]=t,r&&t[r](e)),i},read:function(e,t,n,i){var r,o=this,a=o.callParent([e,t,n,i]);a&&(r=a[0],r&&(r[o.inverse.getInstanceName()]=e,e[o.getInstanceName()]=r,delete e.data[o.role]))}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:!1,side:"right",createGetter:function(){var e=this;return function(t,n){return e.doGetFK(this,t,n)}},createSetter:function(){var e=this;return function(t,n,i){return e.doSetFK(this,t,n,i)}},onDrop:function(e,t){var n,i=this,r=i.association.field,o=i.getAssociatedItem(e);i.inverse.owner&&(t?(n=e.get(r.name),(n||0===n)&&(o=t.getEntry(i.cls,n).record,o&&o.drop())):o&&o.drop()),r&&e.set(r.name,null),e[i.getInstanceName()]=null,o&&(o[i.inverse.getInstanceName()]=null)},onValueChange:function(e,t,n){var i=this,r=e[i.getOldInstanceName()]||i.getAssociatedItem(e),o=n||0===n,a=i.getInstanceName(),s=i.cls;e.changingKey=!0,i.doSetFK(e,n),o?t&&s&&(e[a]=t.peekRecord(s,n)||void 0):e[a]=null,i.inverse.owner&&r&&i.association.schema.queueKeyCheck(r,i),e.changingKey=!1},checkKeyForDrop:function(e){var t=this.inverse.getAssociatedItem(e);t||e.drop()},read:function(e,t,n,i){var r,o,a,s,l,d,u,c,h,p=this,f=p.callParent([e,t,n,i]);f&&(r=f[0],o=p.association.field,a=o.name,s=e.session,h=e.data,r&&(s?(l=s.getRefs(r,this.inverse,!0),c=l&&l[e.id]||void 0===h[a]):c=!0,c&&(o&&(u=h[a],d=r.id,u!==d&&(h[a]=d,s&&s.updateReference(e,o,d,u))),r[p.inverse.getInstanceName()]=e,e[p.getInstanceName()]=r),delete h[p.role]))}})},0,0,0,0,0,0,[Ext.data.schema,"OneToOne"],0),Ext.cmd.derive("Ext.data.schema.ManyToOne",Ext.data.schema.Association,{isManyToOne:!0,isToOne:!0,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:!0,onDrop:function(e,t){var n,i,r,o,a=this,s=a.getAssociatedItem(e);if(s){if(n=s.removeAll(),n&&a.inverse.owner)for(r=0,i=n.length;i>r;++r)n[r].drop();s.destroy(),e[a.getStoreName()]=null}else if(t&&(n=t.getRefs(e,a)))for(o in n)n[o].drop()},processUpdate:function(e,t){var n,i,r,o,a=this,s=a.inverse.cls,l=t.R;if(l)for(n in l)i=e.peekRecord(s,n),i?(o=e.getEntityList(a.cls,l[n]),r=a.getAssociatedItem(i),r?(r.loadData(o),r.complete=!0):i[a.getterName](null,null,o)):e.onInvalidAssociationEntity(s,n)},findRecords:function(e,t,n,i){var r,o,a,s,l,d=n,u=e.getRefs(t,this,!0),c=this.association.field,h=c.name;if(!t.phantom&&(d=[],u||i)){if(n)for(l={},a=0,s=n.length;s>a;++a)r=n[a],o=r.id,u&&u[o]?d.push(r):i&&void 0===r.data[h]&&(d.push(r),r.data[h]=t.id,e.updateReference(r,c,t.id,void 0)),l[o]=!0;if(u)for(o in u)l&&l[o]||d.push(u[o])}return d},processLoad:function(e,t,n,i){var r=n;return i&&(r=this.findRecords(i,t,n)),this.onLoadMany(t,r,i),r},adoptAssociated:function(e,t){var n,i,r,o=this.getAssociatedItem(e);if(o)for(o.setSession(t),n=o.getData().items,i=0,r=n.length;r>i;++i)t.adopt(n[i])},createGetter:function(){var e=this;return function(t,n,i){var r=this.session,o=!!i;return r&&(i=e.findRecords(r,this,i,!0),o||i&&i.length||(i=null)),e.getAssociatedStore(this,t,n,i,o)}},createSetter:null,onAddToMany:function(e,t){this.syncFK(t,e.getAssociatedEntity(),!1)},onLoadMany:function(e,t,n){var i,r,o,a,s,l,d=this.inverse.getInstanceName(),u=e.getId(),c=this.association.field;if(c)for(i=0,r=t.length;r>i;++i)o=t[i],o[d]=e,c&&(l=c.name,s=o.data,a=s[l],a!==u&&(s[l]=u,n&&n.updateReference(o,c,u,a)))},onRemoveFromMany:function(e,t){this.syncFK(t,e.getAssociatedEntity(),!0)},read:function(e,t,n,i){var r,o,a,s=this,l=s.inverse.getInstanceName(),d=s.callParent([e,t,n,i]);if(d)for(r=e[s.getterName](null,null,d),delete e.data[s.role],d=r.getData().items,a=0,o=d.length;o>a;++a)d[a][l]=e},syncFK:function(e,t,n){for(var i,r,o,a=this.association.getFieldName(),s=this.inverse,l=s.setterName,d=s.getInstanceName(),u=e.length,c=t.getId();u-->0;)r=e[u],i=!r.isEqual(c,r.get(a)),o=n?null:t,i!==n?(r.changingKey=!0,r[l](o),r.changingKey=!1):r[d]=o}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:!1,side:"right",onDrop:function(e){var t=this.association.field;t&&e.set(t.name,null),e[this.getInstanceName()]=null},createGetter:function(){var e=this;return function(t,n){return e.doGetFK(this,t,n)}},createSetter:function(){var e=this;return function(t,n,i){return e.doSetFK(this,t,n,i)}},checkMembership:function(e,t){var n,i=this.association.field;n=this.getSessionStore(e,t.get(i.name)),n&&!n.contains(t)&&n.add(t)},onValueChange:function(e,t,n,i){var r,o,a,s,l,d,u,c=this,h=c.getInstanceName(),p=c.cls;if(!e.changingKey)if(r=n||0===n,r||(e[h]=null),t)a=c.getSessionStore(t,i),a&&a.remove(e),r&&(a=c.getSessionStore(t,n),a&&!a.isLoading()&&a.add(e),p&&(u=t.peekRecord(p,n)),e[h]=u||void 0);else if(o=e.joined)for(s=0,l=o.length;l>s;++s)a=o[s],a.isStore&&(d=a.getAssociatedEntity(),d&&d.self===c.cls&&d.getId()===i&&a.remove(e));c.owner&&null===n&&c.association.schema.queueKeyCheck(e,c)},checkKeyForDrop:function(e){var t=this.association.field;null===e.get(t.name)&&e.drop()},getSessionStore:function(e,t){var n,i=this.cls;return i&&(n=e.peekRecord(i,t))?this.inverse.getAssociatedItem(n):void 0},read:function(e,t,n,i){var r,o=this.callParent([e,t,n,i]);o&&(r=o[0],r&&(e[this.getInstanceName()]=r,delete e.data[this.role]))}})},0,0,0,0,0,0,[Ext.data.schema,"ManyToOne"],0),Ext.cmd.derive("Ext.data.schema.ManyToMany",Ext.data.schema.Association,{isManyToMany:!0,isToMany:!0,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:!0,digitRe:/^\d+$/,findRecords:function(e,t,n){var i,r,o,a,s,l,d=e.getMatrixSlice(this.inverse,t.id),u=d.members,c=[],h=this.cls;if(n)for(i={},r=0,o=n.length;o>r;++r)l=n[r],a=l.id,s=u[a],s&&-1===s[2]||c.push(l),i[a]=!0;for(a in u)s=u[a],(!i||!i[a]&&s&&-1!==s[2])&&(l=e.peekRecord(h,a),l&&c.push(l));return c},processLoad:function(e,t,n,i){var r=n;return i&&(r=this.findRecords(i,t,n),this.onAddToMany(e,r,!0)),r},processUpdate:function(e,t){var n,i,r,o,a=this,s=a.inverse.cls,l=t.R;if(l)for(n in l)i=e.peekRecord(s,n),i?(o=e.getEntityList(a.cls,l[n]),r=a.getAssociatedItem(i),r?(r.loadData(o),r.complete=!0):i[a.getterName](null,null,o)):e.onInvalidAssociationEntity(s,n);a.processMatrixBlock(e,t.C,1),a.processMatrixBlock(e,t.D,-1)},checkMembership:function(e,t){var n,i,r,o,a,s,l,d,u,c,h=e.getMatrix(this.association,!0);if(h&&(n=this.left?h.right:h.left,i=n.inverse.role.cls,r=this.inverse,a=n.slices,a&&(o=a[t.id]))){l=o.members;for(s in l)d=l[s],-1!==d[2]&&(u=e.peekRecord(i,s),u&&(c=r.getAssociatedItem(u),c&&(c.matrixUpdate=1,c.add(t),c.matrixUpdate=0)))}},onStoreCreate:function(e,t,n){var i,r=this;t&&(i=t.getMatrixSlice(r.inverse,n),i.attach(e),i.notify=r.onMatrixUpdate,i.scope=r)},processMatrixBlock:function(e,t,n){var i,r,o=this.inverse,a=this.digitRe;if(t)for(r in t)a.test(r)&&(r=parseInt(r,10)),i=e.getMatrixSlice(o,r),i.update(t[r],n)},createGetter:function(){var e=this;return function(t,n,i){var r,o=this.session;return o&&(r=!!i,i=e.findRecords(o,this,i),r||i.length||(i=null)),e.getAssociatedStore(this,t,n,i,r)}},onAddToMany:function(e,t,n){e.matrixUpdate||(e.matrixUpdate=1,e.matrix.update(t,n===!0?0:1),e.matrixUpdate=0)},onRemoveFromMany:function(e,t){e.matrixUpdate||(e.matrixUpdate=1,e.matrix.update(t,-1),e.matrixUpdate=0)},read:function(e,t,n,i){var r=this,o=r.callParent([e,t,n,i]);o&&(e[r.getterName](null,null,o),delete e.data[r.role])},onMatrixUpdate:function(e,t,n){var i,r,o,a=e.store;!a||a.loading||a.matrixUpdate||(a.matrixUpdate=1,i=a.indexOfId(t),0>n?i>=0&&a.remove([i]):0>i&&(o=a.getSession().getEntry(this.type,t),r=o&&o.record,r&&a.add(r)),a.matrixUpdate=0)},adoptAssociated:function(e,t){var n,i,r,o=this.getAssociatedItem(e);if(o)for(o.setSession(t),this.onStoreCreate(o,t,e.getId()),n=o.getData().items,i=0,r=n.length;r>i;++i)t.adopt(n[i])}},function(){var e=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:e,left:!1,side:"right"})},null,"Ext.data.schema.ManyToMany")})},0,0,0,0,0,0,[Ext.data.schema,"ManyToMany"],0),Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:!0,plurals:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat|potat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status|sex)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/^(p)erson$/i,"$1eople"],[/^(m)an$/i,"$1en"],[/(.*)(child)(ren)?$/i,"$1$2ren"],[/s$/i,"s"],[/$/,"s"]],singulars:[[/(address)$/i,"$1"],[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/(p)eople$/i,"$1erson"],[/s$/i,""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(e,t){this.singulars.unshift([e,t])},plural:function(e,t){this.plurals.unshift([e,t])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(e){return-1!=Ext.Array.indexOf(this.uncountable,e)},pluralize:function(e){if(this.isTransnumeral(e))return e;var t,n,i,r=this.plurals,o=r.length;for(i=0;o>i;i++)if(t=r[i],n=t[0],n==e||n.test&&n.test(e))return e.replace(n,t[1]);return e},singularize:function(e){if(this.isTransnumeral(e))return e;var t,n,i,r=this.singulars,o=r.length;for(i=0;o>i;i++)if(t=r[i],n=t[0],n==e||n.test&&n.test(e))return e.replace(n,t[1]);return e},classify:function(e){return Ext.String.capitalize(this.singularize(e))},ordinalize:function(e){var t=parseInt(e,10),n=t%10,i=t%100;if(i>=11&&13>=i)return e+"th";switch(n){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var e,t={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"};for(e in t)t.hasOwnProperty(e)&&(this.plural(e,t[e]),this.singular(t[e],e))}),Ext.cmd.derive("Ext.data.schema.Namer",Ext.Base,{isNamer:!0,capitalize:function(e){return Ext.String.capitalize(e)},fieldRole:function(e){var t=e.match(this.endsWithIdRe,"");return t&&(e=e.substr(0,e.length-(t[1]||t[2]).length)),this.apply("uncapitalize",e)},idField:function(e){return this.apply("uncapitalize,singularize",e)+"Id"},instanceName:function(e){return this.apply("underscore",e);
},multiRole:function(e){return this.apply("undotted,uncapitalize,pluralize",e)},pluralize:function(e){return Ext.util.Inflector.pluralize(e)},readerRoot:function(e){return this.apply("uncapitalize",e)},singularize:function(e){return Ext.util.Inflector.singularize(e)},storeName:function(e){return this.apply("underscore",e)},uncapitalize:function(e){return Ext.String.uncapitalize(e)},underscore:function(e){return"_"+e},uniRole:function(e){return this.apply("undotted,uncapitalize,singularize",e)},undotted:function(e){if(e.indexOf(".")<0)return e;for(var t=e.split("."),n=t.length;n-->1;)t[n]=this.apply("capitalize",t[n]);return t.join("")},getterName:function(e){var t=e.role;return e&&e.isMany?t:"get"+this.apply("capitalize",t)},inverseFieldRole:function(e,t,n,i){var r=this,o=r.apply(t?"uniRole":"multiRole",e),a=r.apply("pluralize",n),s=r.apply("undotted,pluralize",i);return a.toLowerCase()!==s.toLowerCase()&&(o=n+r.apply("capitalize",o)),o},manyToMany:function(e,t,n){var i=this,r=i.apply("undotted,capitalize,singularize",t)+i.apply("undotted,capitalize,pluralize",n);return e&&(r=i.apply("capitalize",e+r)),r},manyToOne:function(e,t,n){return this.apply("capitalize,singularize",n)+this.apply("capitalize",t)},matrixRole:function(e,t){var n=this.apply(e?"multiRole,capitalize":"multiRole",t);return e?e+n:n},oneToOne:function(e,t,n){return this.apply("undotted,capitalize,singularize",n)+this.apply("capitalize",t)},setterName:function(e){return"set"+this.apply("capitalize",e.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(e,t){var n,i,r,o=this,a=o.cache,s=a[t]||(a[t]={}),l=s[e];if(!l){if(e.indexOf(",")<0)l=o[e](t);else for(i=(r=e.split(",")).length,l=t,n=0;i>n;++n)l=o.apply(r[n],l);s[e]=l}return l}},0,0,0,0,["namer.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Namer"],0),Ext.cmd.derive("Ext.data.schema.Schema",Ext.Base,{aliasPrefix:"schema.",isSchema:!0,type:"default",statics:{instances:{},get:function(e){var t,n,i=this,r=i.instances,o="default",a=e&&Ext.isString(e);if(e){if(e.isSchema)return e;o=a?e:e.id||o}return(t=r[o])?e&&!a&&(n=Ext.merge({},t.config),Ext.merge(n,e),t.setConfig(n),t.config=n):(r[o]=t=i.create(e),t.id=o),t},lookupEntity:function(e){var t,n,i,r=null,o=this.instances;if(e)if(e.isEntity)r=e.self;else if(Ext.isFunction(e))r=e;else if(Ext.isString(e)){if(r=Ext.ClassManager.get(e),!r||r.prototype&&r.prototype.isEntity||(r=null),!r)for(n in o)i=o[n],t=i.getEntity(e),t&&(r&&Ext.Error.raise('Ambiguous entity name "'+e+'". Defined by schema "'+r.schema.type+'" and "'+n+'"'),r=t);r||Ext.Error.raise('No such Entity "'+e+'".')}return r}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(e,t){var n=t.alias;n&&!t.type&&(Ext.isString(n)||(n=n[0]),e.prototype.type=n.substring(this.prototype.aliasPrefix.length))},constructor:function(e){this.initConfig(e),this.clear()},applyDefaultIdentifier:function(e){return e&&Ext.Factory.dataIdentifier(e)},applyNamer:function(e){var t=Ext.data.schema.Namer.create(e);return t.schema=this,t},applyNamespace:function(e){if(e){var t=e.length-1;"."!==e.charAt(t)&&(e+=".")}return e},applyProxy:function(e){return Ext.util.ObjectTemplate.create(e)},eachAssociation:function(e,t){var n,i=this.associations;for(n in i)if(i.hasOwnProperty(n)&&e.call(t,n,i[n])===!1)break},eachEntity:function(e,t){var n,i=this.entities;for(n in i)if(i.hasOwnProperty(n)&&e.call(t,n,i[n].cls)===!1)break},getAssociation:function(e){var t=this.associations[e];return t||null},getEntity:function(e){var t=this.entityClasses[e]||this.entities[e];return t&&t.cls||null},getEntityName:function(e){var t,n,i=this.getNamespace();if(n="string"==typeof e?e:e.$className||null){if(i&&(t=i.length,n.substring(0,t)!==i))return n;t&&(n=n.substring(t))}return n},hasAssociations:function(e){return e=e.entityName||e,!!this.associationEntityMap[e]},hasEntity:function(e){var t=this.getEntityName(e);return!(!this.entities[t]&&!this.entityClasses[t])},addMatrix:function(e,t,n,i,r){var o,a,s,l=this,d=l.getNamer(),u=l.associations,c=l.entities,h=i.type,p=r.type,f=i.field||d.apply("idField",h),g=r.field||d.apply("idField",p),m=i.role||d.matrixRole(n,h),x=r.role||d.matrixRole(n,p);a=c[h]||(c[h]={cls:null,name:h,associations:{}}),s=c[p]||(c[p]={cls:null,name:p,associations:{}}),++l.assocCount,u[t]=o=new Ext.data.schema.ManyToMany({name:t,schema:l,definedBy:e,left:{cls:a.cls,type:h,role:m,field:f,associationKey:i.associationKey},right:{cls:s.cls,type:p,role:x,field:g,associationKey:r.associationKey}}),a.associations[o.right.role]=o.right,s.associations[o.left.role]=o.left,a.cls&&(l.associationEntityMap[a.cls.entityName]=!0),s.cls&&(l.associationEntityMap[s.cls.entityName]=!0),l.decorateModel(o)},addReference:function(e,t,n,i){var r,o,a=this,s=a.getNamer(),l=a.entities,d=a.associations,u=e.entityName,c=n.association,h=!!n.legacy,p=n.child,f=n.parent,g=n.role,m=n.type||f||p,x=n.inverse,v=Ext.isString(x)?{role:x}:x,y=v&&v.role;g||(g=h?s.apply("uncapitalize",m):s.apply("fieldRole",t.name)),y||(y=s.inverseFieldRole(u,i,g,m)),c||(c=i?s.oneToOne(e,y,m,g):s.manyToOne(e,y,m,g)),r=l[m]||(l[m]={cls:null,name:m,associations:{}}),o=i?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne,c=new o({name:c,owner:p?"left":f?"right":null,definedBy:e,schema:a,field:t,nullable:t?!!t.allowBlank:!0,legacy:n.legacy,left:{cls:e,type:u,role:y,extra:v},right:{cls:r.cls,type:m,role:g,extra:n}}),e.associations[g]=c.right,r.associations[y]=c.left,t&&(t.reference=c.right,e.references.push(t)),++a.assocCount,a.associationEntityMap[u]=!0,r.cls&&(a.associationEntityMap[r.cls.entityName]=!0),d[c.name]=c,c.right.cls&&a.decorateModel(c)},privates:{addEntity:function(e){var t,n,i,r,o,a=this,s=a.entities,l=e.entityName,d=s[l],u=e.fields;if(d){t=d.associations;for(o in t)t[o].inverse.cls=e,a.associationEntityMap[l]=!0,a.decorateModel(t[o].association)}else s[l]=d={name:l,associations:{}};for(d.cls=e,e.prototype.associations=e.associations=d.associations,a.entityClasses[e.$className]=d,++a.entityCount,i=0,r=u.length;r>i;++i)n=u[i],n.reference&&a.addReferenceDescr(e,n)},addMatrices:function(e,t){var n,i,r,o=this;if(Ext.isString(t))o.addMatrixDescr(e,null,t);else if(t[0])for(n=0,i=t.length;i>n;++n)o.addMatrixDescr(e,null,t[n]);else for(r in t)o.addMatrixDescr(e,r,t[r])},addMatrixDescr:function(e,t,n){var i,r,o=this,a=e.entityName,s=o.associations,l=o.getNamer(),d=n.left,u=n.right;Ext.isString(n)?"#"===n.charAt(0)?(d={type:a},u={type:n.substring(1)}):"#"===n.charAt(i=n.length-1)?(d={type:n.substring(0,i)},u={type:a}):l.apply("multiRole",a)<l.apply("multiRole",n)?(d={type:a},u={type:n}):(d={type:n},u={type:a}):(r=n.relation,d||!u&&l.apply("multiRole",a)<l.apply("multiRole",n.type)?(d=d&&d!==!0?Ext.apply({type:a},d):{type:a},u=n):(u=u&&u!==!0?Ext.apply({type:a},u):{type:a},d=n)),t||(t=l.manyToMany(r,d.type,u.type)),t in s||o.addMatrix(e,t,r,d,u)},addReferenceDescr:function(e,t){var n=this,i=t.$reference;i=Ext.isString(i)?{type:i}:Ext.apply({},i),i.legacy?i.single?n.addLegacySingle(e,i):n.addLegacyHasMany(e,i):n.addReference(e,t,i,t.unique)},addPending:function(e,t,n,i){var r=this.pending;r[e]||(r[e]=[]),r[e].push([t,n,i])},addLegacyBelongsTo:function(e,t){this.addLegacySingle(e,t)},addLegacyHasOne:function(e,t){this.addLegacySingle(e,t)},addLegacySingle:function(e,t){var n,i,r;t=this.constructLegacyAssociation(e,t),t.single=!0,i=t.type,n=t.foreignKey||i.toLowerCase()+"_id",r=e.getField(n),r&&(r.$reference=t),this.addReference(e,r,t,!0)},addLegacyHasMany:function(e,t){var n,i,r,o,a,s,l=this,d=l.entities,u=l.pending,c=t.associationKey;t=this.constructLegacyAssociation(e,t),i=t.type,o=d[i],o&&o.cls?(t.type=e.entityName,a=t.foreignKey||t.type.toLowerCase()+"_id",n=o.cls,r=n.getField(a),t.inverse=t||{},s=t.name,(s||c)&&(s&&(t.inverse.role=s),c&&(t.inverse.associationKey=c)),r&&(r.$reference=t),l.addReference(n,r,t,!1)):(u[i]||(u[i]=[]),u[i].push([e,t]))},constructLegacyAssociation:function(e,t){Ext.isString(t)&&(t={model:t}),t.legacy=!0,t.type=this.getEntityName(t.model);var n=t.associatedName||t.name;return n&&(t.role=n),t},afterLegacyAssociations:function(e){var t,n,i=this.pending,r=e.entityName,o=i[r];if(o){for(t=0,n=o.length;n>t;++t)this.addLegacyHasMany.apply(this,o[t]);delete i[r]}},clear:function(e){var t=this,n=t.timer;delete t.setConfig,n&&(window.clearTimeout(n),t.timer=null),t.associations={},t.associationEntityMap={},t.entities={},t.entityClasses={},t.pending={},t.assocCount=t.entityCount=0,e&&t.setNamespace(null)},constructProxy:function(e){var t=this,n=Ext.Object.chain(e),i=t.getProxy();return n.schema=t,n.prefix=t.getUrlPrefix(),i.apply(n)},applyDecoration:function(e){var t,n,i,r=this,o=e.inverse.cls,a=r.getNamer();o&&!e.decorated&&(e.decorated=!0,i=o.prototype,(t=e.getterName)||(e.getterName=t=a.getterName(e)),i[t]=e.createGetter(),e.createSetter&&((n=e.setterName)||(e.setterName=n=a.setterName(e)),i[n]=e.createSetter()))},decorateModel:function(e){this.applyDecoration(e.left),this.applyDecoration(e.right)},processKeyChecks:function(e){var t,n,i,r=this,o=r.keyCheckQueue,a=r.timer;if(a&&(window.clearTimeout(a),r.timer=null),o)do for(o=r.keyCheckQueue,r.keyCheckQueue=[],n=0,t=o.length;t>n;++n)i=o[n],i.role.checkKeyForDrop(i.record);while(e&&r.keyCheckQueue.length)},queueKeyCheck:function(e,t){var n=this,i=n.keyCheckQueue,r=n.timer;i||(n.keyCheckQueue=i=[]),i.push({record:e,role:t}),r||(n.timer=r=Ext.Function.defer(n.processKeyChecks,n.getKeyCheckDelay(),n))},rankEntities:function(){var e,t,n=this,i=n.entities,r=Ext.Object.getKeys(i),o=r.length;for(n.nextRank=1,r.sort(),t=0;o>t;++t)e=i[r[t]].cls,e.rank||n.rankEntity(e)},rankEntity:function(e){var t,n,i,r=e.associations;for(i in r)n=r[i],!n.left&&n.association.field&&(t=n.cls,t.rank||this.rankEntity(t));e.rank=this.nextRank++}}},1,0,0,0,["schema.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Schema"],0),Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:!1,$configStrict:!1,config:{filters:null,autoDestroy:void 0,storeId:null,statefulFilters:!1,sorters:null,remoteSort:{lazy:!0,$value:!1},remoteFilter:{lazy:!0,$value:!1},groupField:void 0,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:!1,isDestroyed:!1,isStore:!0,updating:0,constructor:function(e){var t,n=this;n.isInitializing=!0,n.mixins.observable.constructor.call(n,e),n.isInitializing=!1,t=n.getStoreId(),!t&&e&&e.id&&n.setStoreId(t=e.id),t&&Ext.data.StoreManager.register(n)},getCount:function(){return this.getData().getCount()},rangeCached:function(e,t){return this.getData().getCount()>=Math.max(e,t)},find:function(e,t,n,i,r,o){var a=!i,s=!(!a||!o);return this.getData().findIndex(e,t,n,a,s,!r)},findRecord:function(){var e=this,t=e.find.apply(e,arguments);return-1!==t?e.getAt(t):null},findExact:function(e,t,n){return this.getData().findIndexBy(function(n){return n.isEqual(n.get(e),t)},this,n)},findBy:function(e,t,n){return this.getData().findIndexBy(e,t,n)},getAt:function(e){return this.getData().getAt(e)||null},getRange:function(e,t,n){var i=this.getData().getRange(e,Ext.isNumber(t)?t+1:t);return n&&n.callback&&n.callback.call(n.scope||this,i,e,t,n),i},getFilters:function(e){var t=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this);return t||e===!1||(this.setFilters([]),t=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this)),t},applyFilters:function(e,t){var n;return t||(t=this.createFiltersCollection(),n=!0),t.add(e),n&&this.onRemoteFilterSet(t,this.getRemoteFilter()),t},getSorters:function(e){var t=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this);return t||e===!1||(this.setSorters([]),t=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this)),t},applySorters:function(e,t){var n;return t||(t=this.createSortersCollection(),n=!0),t.add(e),n&&this.onRemoteSortSet(t,this.getRemoteSort()),t},filter:function(e,t,n){Ext.isString(e)&&(e={property:e,value:t}),this.suppressNextFilter=!!n,this.getFilters().add(e),this.suppressNextFilter=!1},removeFilter:function(e,t){var n=this,i=n.getFilters();n.suppressNextFilter=!!t,e instanceof Ext.util.Filter?i.remove(e):i.removeByKey(e),n.suppressNextFilter=!1},updateRemoteSort:function(e){this.onRemoteSortSet(this.getSorters(!1),e)},updateRemoteFilter:function(e){this.onRemoteFilterSet(this.getFilters(!1),e)},addFilter:function(e,t){this.suppressNextFilter=!!t,this.getFilters().add(e),this.suppressNextFilter=!1},filterBy:function(e,t){this.getFilters().add({filterFn:e,scope:t||this})},clearFilter:function(e){var t=this,n=t.getFilters(!1);n&&0!==n.getCount()&&(t.suppressNextFilter=!!e,n.removeAll(),t.suppressNextFilter=!1)},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var e=this.getSorters(!1);return!!(e&&e.length>0)||this.isGrouped()},addFieldTransform:function(e){if(!e.getTransform()){var t,n,i=e.getProperty(),r=this.getModel();r&&(t=r.getField(i),n=t?t.getSortType():null),n&&n!==Ext.identityFn&&e.setTransform(n)}},beginUpdate:function(){this.updating++||this.fireEvent("beginupdate")},endUpdate:function(){this.updating&&!--this.updating&&(this.fireEvent("endupdate"),this.onEndUpdate())},getState:function(){var e,t,n,i=this,r=[],o=i.getFilters(),a=i.getGrouper();return i.getSorters().each(function(e){r[r.length]=e.getState(),t=!0}),i.statefulFilters&&i.saveStatefulFilters&&(t=!0,e=[],o.each(function(t){e[e.length]=t.getState()})),a&&(t=!0),t&&(n={},r.length&&(n.sorters=r),e&&(n.filters=e),a&&(n.grouper=a.getState())),n},applyState:function(e){var t=this,n=e.sorters,i=e.filters,r=e.grouper;n&&t.getSorters().replaceAll(n),i&&(t.saveStatefulFilters=!0,t.getFilters().replaceAll(i)),r&&this.setGrouper(r)},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var e=this;e.clearListeners(),e.getStoreId()&&Ext.data.StoreManager.unregister(e),e.onDestroy(),e.callParent()},sort:function(e,t,n){var i=this;0===arguments.length?i.getRemoteSort()?i.attemptLoad():i.forceLocalSort():i.getSorters().addSort(e,t,n)},onBeforeCollectionSort:function(e,t){t&&this.fireEvent("beforesort",this,t.getRange())},onSorterEndUpdate:function(){var e,t=this;e=t.getSorters(!1),!t.settingGroups&&e&&(e=e.getRange(),e.length?t.getRemoteSort()?t.attemptLoad({callback:function(){t.fireEvent("sort",t,e)}}):(t.fireEvent("datachanged",t),t.fireEvent("refresh",t),t.fireEvent("sort",t,e)):t.fireEvent("sort",t,e))},onFilterEndUpdate:function(){var e=this,t=e.suppressNextFilter;e.getRemoteFilter()?(e.currentPage=1,t||e.attemptLoad()):t||(e.fireEvent("datachanged",e),e.fireEvent("refresh",e)),e.trackStateChanges&&(e.saveStatefulFilters=!0),e.fireEvent("filterchange",e,e.getFilters().getRange())},updateGroupField:function(e){e?this.setGrouper({property:e,direction:this.getGroupDir()}):this.setGrouper(null)},getGrouper:function(){return this.getData().getGrouper()},group:function(e,t){var n=this,i=n.getSorters(!1),r=e||i&&i.length;e&&"string"==typeof e&&(e={property:e,direction:t||n.getGroupDir()}),n.settingGroups=!0,n.getData().setGrouper(e),delete n.settingGroups,n.isLoadBlocked()||(r?n.getRemoteSort()?n.attemptLoad({scope:n,callback:n.fireGroupChange}):(n.fireEvent("datachanged",n),n.fireEvent("refresh",n),n.fireGroupChange()):n.fireGroupChange())},fireGroupChange:function(){this.fireEvent("groupchange",this,this.getGrouper())},clearGrouping:function(){this.group(null)},getGroupField:function(){var e=this.getGrouper(),t="";return e&&(t=e.getProperty()),t},isGrouped:function(){return!!this.getGrouper()},applyGrouper:function(e){return this.group(e),this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(e,t){e&&e[t?"on":"un"]("endupdate",this.onFilterEndUpdate,this)},onRemoteSortSet:function(e,t){var n=this;e&&(e[t?"on":"un"]("endupdate",n.onSorterEndUpdate,n),n.getData()[t?"un":"on"]("beforesort",n.onBeforeCollectionSort,n))}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,"AbstractStore"],0),Ext.cmd.derive("Ext.data.Error",Ext.Base,{isError:!0,$configPrefixed:!1,config:{field:null,message:""},constructor:function(e){this.initConfig(e),this.msg=this.message}},1,0,0,0,0,0,[Ext.data,"Error"],0),Ext.cmd.derive("Ext.data.ErrorCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.data.Errors",init:function(e){var t,n,i,r,o,a,s,l=this,d=e.fields,u=e.data;for(i=0,r=d.length;r>i;++i)n=d[i],s=n.name,a=u[s],n.validate&&!n.validate.$nullFn&&(t=l.length,o=n.validate(a,null,l),t===l.length&&o!==!0&&l.add(s,o));return l},add:function(e,t){var n,i=this,r=Ext.data.field.Field.defaultInvalidMessage,o=e;if(Ext.isString(e)?o=new Ext.data.Error({field:e,message:t||r}):(o.isError||(o=new Ext.data.Error({field:o.field||o.name,message:o.error||o.message||o.msg||r})),e=o.field),n=i.get(e)){if(Ext.isArray(n))return n.push(o),n;i.removeAtKey(e),o=[n,o],o.field=e,o=[o]}return Ext.util.MixedCollection.prototype.add.call(this,o)},getKey:function(e){return e.field},isValid:function(){return 0===this.length},getByField:function(e){var t=this.get(e);return t&&!Ext.isArray(t)&&(t=[t]),t||[]}},0,0,0,0,0,0,[Ext.data,"ErrorCollection",Ext.data,"Errors"],0),Ext.cmd.derive("Ext.data.operation.Operation",Ext.Base,{alternateClassName:"Ext.data.Operation",isOperation:!0,config:{synchronous:!1,url:"",params:void 0,callback:void 0,scope:void 0,resultSet:null,response:null,request:null,records:null,id:void 0,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:!1,running:!1,complete:!1,success:void 0,exception:!1,error:void 0,idPrefix:"ext-operation-",constructor:function(e){var t=e&&e.scope;this.initConfig(e),e&&(e.scope=t),t&&(this.setScope(t),this.initialConfig.scope=t),this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var e=this;return delete e.error,delete e.success,e.complete=e.exception=!1,e.setStarted(),e.request=e.doExecute()},doExecute:Ext.emptyFn,abort:function(){var e=this,t=e.request;e.running&&t&&(e.getProxy().abort(t),e.request=null)},process:function(e,t,n,i){var r=this;i=i!==!1,r.setResponse(n),r.setResultSet(e),e.getSuccess()?(r.doProcess(e,t,n),r.setSuccessful(i)):i&&r.setException(e.getMessage())},_commitSetOptions:{convert:!0,commit:!0},doProcess:function(e){var t,n,i,r,o=this,a=o._commitSetOptions,s=o.getRecords(),l=s.length,d=s[0].clientIdProperty,u=e.getRecords(),c=u?u.length:0;if(c&&d){for(t=Ext.Array.toValueMap(s,"id"),r=0;c>r;++r)n=u[r],i=t[n[d]],i&&(delete t[i.id],delete n[d],i.set(n,a));for(r in t)t[r].commit()}else for(r=0;l>r;++r)i=s[r],0!==c&&(n=u[r])?i.set(n,a):i.commit()},setStarted:function(){this.started=this.running=!0},setCompleted:function(){var e=this,t=e.getProxy();e.complete=!0,e.running=!1,e.triggerCallbacks(),t&&t.completeOperation(e)},setSuccessful:function(e){this.success=!0,e&&this.setCompleted()},setException:function(e){var t=this;t.exception=!0,t.success=t.running=!1,t.error=e,t.setCompleted()},triggerCallbacks:function(){var e=this,t=e.getInternalCallback();t&&(t.call(e.getInternalScope()||e,e),e.setInternalCallback(null),e.setInternalScope(null)),(t=e.getCallback())&&(t.call(e.getScope()||e,e.getRecords(),e,e.wasSuccessful()),e.setCallback(null),e.setScope(null))},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var e;return this._records||((e=this.getResultSet())?e.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===!0},allowWrite:function(){return!0}},1,0,0,0,0,0,[Ext.data.operation,"Operation",Ext.data,"Operation"],0),Ext.cmd.derive("Ext.data.operation.Create",Ext.data.operation.Operation,{action:"create",isCreateOperation:!0,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,["data.operation.create"],0,[Ext.data.operation,"Create"],0),Ext.cmd.derive("Ext.data.operation.Destroy",Ext.data.operation.Operation,{action:"destroy",isDestroyOperation:!0,order:30,foreignKeyDirection:-1,doProcess:function(){var e,t=this.getRecords(),n=t.length;for(e=0;n>e;++e)t[e].setErased()},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(e){var t={},n=e.idField,i=this.getNameProperty()||"name";return t[n[i]]=e.id,t}},0,0,0,0,["data.operation.destroy"],0,[Ext.data.operation,"Destroy"],0),Ext.cmd.derive("Ext.data.operation.Read",Ext.data.operation.Operation,{action:"read",isReadOperation:!0,config:{filters:void 0,sorters:void 0,grouper:void 0,start:void 0,limit:void 0,page:void 0,addRecords:!1},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return!1}},0,0,0,0,["data.operation.read"],0,[Ext.data.operation,"Read"],0),Ext.cmd.derive("Ext.data.operation.Update",Ext.data.operation.Operation,{action:"update",isUpdateOperation:!0,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,["data.operation.update"],0,[Ext.data.operation,"Update"],0),Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:!0,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(e){return null!=e?(e+"").replace(this.stripTagsRe,""):"\x00"},asUCText:function(e){return null!=e?(e+"").toUpperCase().replace(this.stripTagsRe,""):"\x00"},asUCString:function(e){return null!=e?(e+"").toUpperCase():"\x00"},asDate:function(e){return e?Ext.isDate(e)?e.getTime():Date.parse(e+""):0},asFloat:function(e){var t=parseFloat((e+"").replace(this.stripCommasRe,""));return isNaN(t)?0:t},asInt:function(e){var t=parseInt((e+"").replace(this.stripCommasRe,""),10);return isNaN(t)?0:t}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0),Ext.cmd.derive("Ext.data.validator.Validator",Ext.Base,{isValidator:!0,type:"base",statics:{all:{},register:function(e,t){var n=this.all;n[e.toUpperCase()]=n[e.toLowerCase()]=n[e]=t.prototype}},onClassExtended:function(e,t){t.type&&Ext.data.validator.Validator.register(t.type,e)},constructor:function(e){"function"==typeof e?(this.fnOnly=!0,this.validate=e):this.initConfig(e)},validate:function(){return!0},clone:function(){var e=this;return e.fnOnly?new Ext.data.validator.Validator(e.validate):new e.self(e.getCurrentConfig())}},1,0,0,0,["data.validator.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,"Validator"],function(){this.register(this.prototype.type,this)}),Ext.cmd.derive("Ext.data.field.Field",Ext.Base,{alternateClassName:"Ext.data.Field",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:!0,isField:!0,allowBlank:!0,allowNull:!1,critical:!1,defaultInvalidMessage:"This field is invalid",defaultValue:void 0,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:void 0,persist:null,reference:null,unique:!1,rank:null,stripRe:/[\$,%]/g,calculated:!1,evil:!1,identifier:!1,onClassExtended:function(e,t){var n=t.sortType,i=e.prototype,r=i.validators,o=t.validators;n&&Ext.isString(n)&&(i.sortType=Ext.data.SortTypes[n]),o&&(Ext.isArray(o)||(o=[o]),delete t.validators,r&&(o=r.concat(o)),i.validators=o)},argumentNamesRe:/^function\s+\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(e){var t,n,i,r,o,a,s,l,d,u,c,h=this,p=h.calculateRe;if(e&&(Ext.isString(e)?h.name=e:(c=e.validators,c&&(delete e.validators,h.instanceValidators=c),Ext.apply(h,e))),h.allowNull||(h.allowNull=!!h.reference),t=h.calculate,o=h.depends,t&&(h.convert=h.doCalculate,!o)){if(!(o=t.$depends))for(a={},d=""+t,t.$depends=o=[],s=h.argumentNamesRe.exec(d),l=s?s[1]:"data";s=p.exec(d);)l!==s[1]||a[u=s[2]]||(a[u]=1,o.push(u));h.depends=o}i=h.defaultValue,h.convert&&(h.calculated=n=h.convert.length>1,h.evil=n&&!o),null===h.persist&&(h.persist=!t),r=h.sortType,h.sortType?Ext.isString(r)&&(h.sortType=Ext.data.SortTypes[r]):h.sortType=Ext.data.SortTypes.none,o&&"string"==typeof o&&(h.depends=[o]),h.cloneDefaultValue=void 0!==i&&(Ext.isDate(i)||Ext.isArray(i)||Ext.isObject(i))},setModelValidators:function(e){this._validators=null,this.modelValidators=e},compileValidators:function(){var e=this;e._validators=[],e.constructValidators(e.validators),e.constructValidators(e.modelValidators),e.constructValidators(e.instanceValidators)},constructValidators:function(e){if(e){e instanceof Array||(e=[e]);var t,n,i=e.length,r=this._validators;for(t=0;i>t;++t)n=e[t],n.fn&&(n=n.fn),r.push(Ext.Factory.dataValidator(n))}},collate:function(e,t){var n=this,i=e,r=t;return n.sortType&&(i=n.sortType(i),r=n.sortType(r)),i===r?0:r>i?-1:1},compare:function(e,t){return e===t?0:t>e?-1:1},isEqual:function(e,t){return 0===this.compare(e,t)},convert:null,serialize:null,validate:function(e,t,n){var i,r,o,a,s,l=this,d="";for(l._validators||l.compileValidators(),o=l._validators,s=0,a=o.length;a>s;++s)if(r=o[s],i=r.validate(e),i!==!0)if(i=i||l.defaultInvalidMessage,n)n.add(l.name,i),d=d||i;else{if(!t){d=i;break}d&&(d+=t),d+=i}return d||!0},doCalculate:function(e,t){return t?this.calculate(t.data):e},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var e=this.mapping;return!(!e&&0!==e)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return"auto"},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}},1,0,0,0,["data.field.auto"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,"Field",Ext.data,"Field"],0),Ext.cmd.derive("Ext.data.field.Boolean",Ext.data.field.Field,{isBooleanField:!0,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(e){return"boolean"==typeof e?e:!this.allowNull||void 0!==e&&null!==e&&""!==e?this.trueRe.test(e+""):null},getType:function(){return"bool"}},0,0,0,0,["data.field.bool","data.field.boolean"],0,[Ext.data.field,"Boolean"],0),Ext.cmd.derive("Ext.data.field.Date",Ext.data.field.Field,{sortType:"asDate",isDateField:!0,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(e,t){var n,i=e instanceof Date,r=t instanceof Date;return r&&i?(n=e.getTime()-t.getTime(),n=0===n?0:0>n?-1:1):n=i===r?0:i?1:-1,n},convert:function(e){if(!e)return null;if(e instanceof Date)return e;var t,n=this.dateReadFormat||this.dateFormat;return n?Ext.Date.parse(e,n):(t=Date.parse(e),t?new Date(t):null)},serialize:function(e){var t,n=null;return Ext.isDate(e)&&(t=this.getDateWriteFormat(),n=t?Ext.Date.format(e,t):e),n},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var e=this;return e.hasOwnProperty("dateWriteFormat")?e.dateWriteFormat:e.hasOwnProperty("dateFormat")?e.dateFormat:e.dateWriteFormat||e.dateFormat||"timestamp"},getType:function(){return"date"}},0,0,0,0,["data.field.date"],0,[Ext.data.field,"Date"],0),Ext.cmd.derive("Ext.data.field.Integer",Ext.data.field.Field,{isNumeric:!0,isIntegerField:!0,numericType:"int",convert:function(e){if("number"==typeof e)return this.getNumber(e);var t,n=void 0===e||null===e||""===e,i=this.allowNull;return n?t=i?null:0:(t=this.parse(e),i&&isNaN(t)&&(t=null)),t},getNumber:function(e){return parseInt(e,10)},getType:function(){return this.numericType},parse:function(e){return parseInt((e+"").replace(this.stripRe,""),10)},sortType:function(e){return null==e&&(e=1/0),e}},0,0,0,0,["data.field.int","data.field.integer"],0,[Ext.data.field,"Integer"],0),Ext.cmd.derive("Ext.data.field.Number",Ext.data.field.Integer,{isIntegerField:!1,isNumberField:!0,numericType:"float",getNumber:Ext.identityFn,parse:function(e){return parseFloat((e+"").replace(this.stripRe,""))}},0,0,0,0,["data.field.float","data.field.number"],0,[Ext.data.field,"Number"],0),Ext.cmd.derive("Ext.data.field.String",Ext.data.field.Field,{sortType:"asUCString",isStringField:!0,convert:function(e){var t=this.allowNull?null:"";return void 0===e||null===e?t:e+""},getType:function(){return"string"}},0,0,0,0,["data.field.string"],0,[Ext.data.field,"String"],0),Ext.cmd.derive("Ext.data.identifier.Generator",Ext.Base,{"abstract":!0,factoryConfig:{defaultType:"sequential"},isGenerator:!0,config:{id:null},constructor:function(e){var t,n,i=this;i.initConfig(e),n=i.getId(),n&&(t=e&&e.cache||Ext.data.identifier.Generator.all,t[n]=i)},privates:{clone:function(e){var t=this.getInitialConfig();return t=e?Ext.apply({},e,t):t,new this.self(t)},statics:{all:{}}}},1,0,0,0,["data.identifier.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,"Generator"],function(){var e=this,t=Ext.Factory,n=t.dataIdentifier;t.dataIdentifier=function(t){var i=Ext.isString(t)?t:t&&t.id,r=i&&(t&&t.cache||e.all)[i];return r||n(t)}}),Ext.cmd.derive("Ext.data.identifier.Sequential",Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var e=this,t=e._seed,n=e._prefix;return e._seed+=e._increment,null!==n?n+t:t}},0,0,0,0,["data.identifier.sequential"],0,[Ext.data.identifier,"Sequential"],0),Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isEntity:!0,isModel:!0,validIdRe:null,erasing:!1,observableType:"record",constructor:function(e,t){var n,i,r,o,a,s,l,d=this,u=d.self,c=u.identifier,h=Ext.data.Model,p=h.identifier,f=d.idField.name;if(d.data=d.data=e||(e={}),d.session=t||null,d.internalId=o=p.generate(),(n=e)instanceof Array)for(d.data=e={},l=d.getFields(),a=Math.min(l.length,n.length),s=0;a>s;++s)e[l[s].name]=n[s];(r=u.initializeFn)||(u.initializeFn=r=h.makeInitializeFn(u)),r.$nullFn||u.initializeFn(d),(d.id=i=e[f])||0===i||(t?(c=t.getIdentifier(u),i=c.generate()):i=p===c?o:c.generate(),e[f]=d.id=i,d.phantom=!0),t&&t.add(d),d.init&&Ext.isFunction(d.init)&&d.init()},editing:!1,dirty:!1,session:null,dropped:!1,erased:!1,clientIdProperty:null,evented:!1,phantom:!1,idProperty:"id",manyToMany:null,identifier:null,previousValues:void 0,proxy:void 0,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:!0,beginEdit:function(){var e=this,t=e.modified,n=e.previousValues;e.editing||(e.editing=!0,e.editMemento={dirty:e.dirty,data:Ext.apply({},e.data),generation:e.generation,modified:t&&Ext.apply({},t),previousValues:n&&Ext.apply({},n)})},cancelEdit:function(){var e=this,t=e.editMemento;t&&(e.editing=!1,Ext.apply(e,t),e.editMemento=null)},endEdit:function(e,t){var n=this,i=n.editMemento;i&&(n.editing=!1,n.editMemento=null,n.previousValues=i.previousValues,e||(t||(t=n.getModifiedFieldNames(i.data)),(n.dirty||t&&t.length)&&n.callJoined("afterEdit",[t])))},getField:function(e){return this.self.getField(e)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(e){this.set(this.idProperty,e)},getPrevious:function(e){var t=this.previousValues;return t&&t[e]},isModified:function(e){var t=this.modified;return!(!t||!t.hasOwnProperty(e));
},getModified:function(e){var t;return this.isModified(e)&&(t=this.modified[e]),t},get:function(e){return this.data[e]},_singleProp:{},_rejectOptions:{convert:!1,silent:!0},set:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p,f,g,m,x,v,y=this,E=y.self,b=y.data,C=y.modified,w=y.previousValues,S=y.session,T=Ext.isString(e),P=T?n:t,I=P?P.convert!==!1:y.convertOnSet,k=y.fieldsMap,B=P&&P.silent,M=P&&P.commit,D=!(P&&P.refs===!1)&&S,R=!(P&&P.dirty===!1&&!M),A=null,F=0;for(T?(v=y._singleProp,v[e]=t):v=e,(g=E.rankedFields)||(g=E.rankFields()),p=g.length;;){for(s in v)if(x=v[s],i=b[s],d=y,r=k[s],r?(I&&r.convert&&(x=r.convert(x,y)),d=r,m=r.reference):m=null,!d.isEqual(i,x)){for(b[s]=x,(A||(A=[])).push(s),(w||(y.previousValues=w={}))[s]=i,m&&m.cls&&(D&&S.updateReference(y,r,x,i),m.onValueChange(y,S,x,i)),h=(c=r&&r.dependents)&&c.length;h-->0;)(u=c[h]).dirty=!0,F=F?Math.min(F,u.rank):u.rank;(!r||r.persist)&&(C&&C.hasOwnProperty(s)?(!R||d.isEqual(C[s],x))&&(delete C[s],y.dirty=-1):R&&(C||(y.modified=C={}),y.dirty=!0,C[s]=i)),s===y.idField.name&&(o=!0,l=i,f=x)}if(!F)break;for(r=g[F-1],r.dirty=!1,T?delete v[e]:(v=y._singleProp,T=!0),e=r.name,v[e]=b[e],I=!0;p>F&&!g[F].dirty;++F);p>F?++F:F=0}if(y.dirty<0){y.dirty=!1;for(a in C)if(C.hasOwnProperty(a)){y.dirty=!0;break}}return T&&delete v[e],++y.generation,o&&(y.id=f,y.callJoined("onIdChanged",[l,f])),M?y.commit(B,A):B||y.editing||!A||y.callJoined("afterEdit",[A]),A},reject:function(e){var t=this,n=t.modified;n&&t.set(n,t._rejectOptions),t.dropped=!1,t.clearState(),e||t.callJoined("afterReject")},commit:function(e,t){var n,i=this,r=i.versionProperty,o=i.data;i.clearState(),!r||i.phantom||isNaN(o[r])||++o[r],i.phantom=!1,i.dropped&&(i.erased=n=!0),e||(n?i.callJoined("afterErase"):i.callJoined("afterCommit",[t]))},clearState:function(){var e=this;e.dirty=e.editing=!1,e.editMemento=e.modified=null},drop:function(e){var t,n=this,i=n.associations,r=n.session;if(!n.erased&&!n.dropped){if(n.dropped=!0,i&&e!==!1)for(t in i)i[t].onDrop(n,r);n.callJoined("afterDrop"),n.phantom&&n.setErased()}},join:function(e){var t=this,n=t.joined;n?n.length?Ext.Array.include(n,e):n[0]=e:n=t.joined=[e],e.isStore&&!t.store&&(t.store=e)},unjoin:function(e){var t,n=this,i=n.joined,r=i&&i.length,o=n.store;if(1===r&&i[0]===e?i.length=0:r&&Ext.Array.remove(i,e),o===e){if(o=null,i)for(t=0,r=i.length;r>t;++t)if(e=i[t],e.isStore){o=e;break}n.store=o}},clone:function(e){var t=this,n=t.modified,i=t.copy(t.id,e);return n&&(i.modified=Ext.apply({},n)),i.dirty=t.dirty,i.dropped=t.dropped,i.phantom=t.phantom,i},copy:function(e,t){var n=this,i=Ext.apply({},n.data),r=n.idProperty,o=n.self;return e||0===e?i[r]=e:null===e&&delete i[r],new o(i,t)},getProxy:function(){return this.self.getProxy()},getValidation:function(e){var t=this,n=t.validation;return n||(t.validation=n=new Ext.data.Validation,n.attach(t)),(e===!0||e!==!1&&n.syncGeneration!==t.generation)&&n.refresh(e),n},validate:function(){return(new Ext.data.ErrorCollection).init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var e=this.$className.split("."),t=e[e.length-1].toLowerCase();return t+"/"+this.getId()},erase:function(e){var t=this;return t.erasing=!0,t.drop(),t.erasing=!1,t.save(e)},setErased:function(){this.erased=!0,this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var e=this.self,t=e.criticalFields;return t||(e.rankFields(),t=e.criticalFields),t},getAssociatedData:function(e,t){var n,i,r,o,a,s,l,d,u,c,h,p,f=this,g=f.associations;e=e||{},f.$gathering=1,t&&(t=Ext.Object.chain(t));for(u in g)if(d=g[u],r=d.getAssociatedItem(f),r&&!r.$gathering){if(r.isStore){for(r.$gathering=1,o=r.getData().items,s=o.length,a=[],i=0;s>i;++i)l=o[i],n=!l.$gathering,l.$gathering=1,t?(p=t.associated,void 0===p?(t.associated=n,h=!0):n||(t.associated=!1,h=!0),c=t):c=n?f._getAssociatedOptions:f._getNotAssociatedOptions,a.push(l.getData(c)),h&&(t.associated=p,h=!1),delete l.$gathering;delete r.$gathering}else c=t||f._getAssociatedOptions,t&&void 0===t.associated&&(c.associated=!0),a=r.getData(c);e[u]=a}return delete f.$gathering,e},getData:function(e){var t,n,i,r,o,a=this,s={},l=e===!0?a._getAssociatedOptions:e||s,d=a.data,u=l.associated,c=l.changes,h=c&&l.critical,p=c?a.modified:d,f=a.fieldsMap,g=l.persist,m=l.serialize;if(p)for(r in p){if(o=d[r],n=f[r]){if(g&&!n.persist)continue;m&&n.serialize&&(o=n.serialize(o,a))}s[r]=o}if(h)for(t=a.self.criticalFields||a.getCriticalFields(),i=t.length;i-->0;)r=(n=t[i]).name,r in s||(o=d[r],m&&n.serialize&&(o=n.serialize(o,a)),s[r]=o);return u&&a.getAssociatedData(s,l),s},getTransientFields:function(){var e=this.self,t=e.transientFields;return t||(e.rankFields(),t=e.transientFields),t},isLoading:function(){return!!this.loadOperation},abort:function(){var e=this.loadOperation;e&&e.abort()},load:function(e){e=Ext.apply({},e);var t,n=this,i=e.scope||n,r=n.getProxy(),o=e.callback,a=n.loadOperation,s=n.getId();return a?(t=a.extraCalls,t||(t=a.extraCalls=[]),t.push(e),a):(e.id=s,e.recordCreator=function(e,t,i){var r=n.session;return i&&(i.recordCreator=r?r.recordCreator:null),n.set(e,n._commitOptions),n},e.internalCallback=function(t){var r,a,s=t.wasSuccessful()&&t.getRecords().length>0,l=n.loadOperation,d=l.extraCalls,u=[n,t],c=[n,t,s];if(n.loadOperation=null,s?Ext.callback(e.success,i,u):Ext.callback(e.failure,i,u),Ext.callback(o,i,c),d)for(r=0,a=d.length;a>r;++r)e=d[r],s?Ext.callback(e.success,i,u):Ext.callback(e.failure,i,u),Ext.callback(e.callback,i,c);n.callJoined("afterLoad")},delete e.callback,n.loadOperation=a=r.createOperation("read",e),a.execute(),a)},save:function(e){e=Ext.apply({},e);var t,n=this,i=n.phantom,r=n.dropped,o=r?"destroy":i?"create":"update",a=e.scope||n,s=e.callback,l=n.getProxy();return e.records=[n],e.internalCallback=function(t){var i=[n,t],r=t.wasSuccessful();r?Ext.callback(e.success,a,i):Ext.callback(e.failure,a,i),i.push(r),Ext.callback(s,a,i)},delete e.callback,t=l.createOperation(o,e),r&&i?(t.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet),n.setErased(),t.setSuccessful(!0)):t.execute(),t},inheritableStatics:{addFields:function(e){this.replaceFields(e)},replaceFields:function(e,t){var n,i,r,o,a,s,l=this,d=l.prototype,u=Ext.data.field.Field,c=l.fields,h=l.fieldsMap,p=l.fieldOrdinals;if(t===!0)c.length=0,l.fieldsMap=h={},l.fieldOrdinals=p={};else if(t){for(i=t.length;i-->0;)a=t[i],a in p&&(delete p[a],delete h[a]);for(i=0,o=c.length;o>i;++i)a=(n=c[i]).name,a in p?p[a]=i:(c.splice(i,1),--i,--o)}for(i=0,o=e?e.length:0;o>i;i++)a=(n=e[i]).name,a in p||(p[a]=s=c.length,c.push(n=u.create(n)),h[a]=n,n.ordinal=s,n.definedBy=n.owner=this);l.idField=d.idField=r=h[d.idProperty],r.allowNull=r.critical=r.identifier=!0,r.defaultValue=null,l.initializeFn=l.rankedFields=l.transientFields=l.criticalFields=null},removeFields:function(e){this.replaceFields(null,e)},getIdFromData:function(e){var t=this,n=t.idField,i=n.calculated?new t(e).id:e[n.name];return i},createWithId:function(e,t,n){var i=t,r=this;return(e||0===e)&&(i={},t&&Ext.apply(i,t),i[r.idField.name]=e),new r(i,n)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(e){return this.fieldsMap[e]||null},getProxy:function(){var e,t=this,n=t.proxy;return n||(n=t.proxyConfig,n&&n.isProxy||("string"==typeof n&&(n={type:n}),e=t.schema.constructProxy(t),n=n?Ext.merge(e,n):e),n=t.setProxy(n)),n},setProxy:function(e){var t,n=this;return e&&(e.isProxy?(t=e.getModel(),t&&t!==n&&(e=e.clone())):e=Ext.Factory.proxy(e),e.setModel(n)),n.prototype.proxy=n.proxy=e},load:function(e,t,n){var i,r={};return r[this.prototype.idProperty]=e,i=new this(r,n),i.load(t),i}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(e,t){var n,i=this,r=i.stores,o=r.length;for(n=0;o>n;++n)e.call(t,r[n])},join:function(e){var t=this,n=t.stores,i=t.joined;i?i.push(e):i=t.joined=[e],e.isStore&&(t.store=t.store||e,n||(n=t.stores=[]),n.push(e))},unjoin:function(e){var t=this,n=t.stores,i=t.joined;1===i.length?i.length=0:Ext.Array.remove(i,e),e.isStore&&(Ext.Array.remove(n,e),t.store=n[0]||null)}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:!0},_getChangesOptions:{changes:!0},_getAssociatedOptions:{associated:!0},_getNotAssociatedOptions:{associated:!1},copyFrom:function(e){var t,n,i,r,o,a=this,s=a.fields,l=s.length,d=[],u=0,c=a.idProperty;if(e){for(n=a.data,i=e.data;l>u;u++)t=s[u],r=t.name,r!==c&&(o=i[r],void 0===o||a.isEqual(n[r],o)||(n[r]=o,d.push(r)));a.phantom&&!e.phantom&&(a.beginEdit(),a.setId(e.getId()),a.endEdit(!0),a.commit(!0))}return d},callJoined:function(e,t){var n,i,r,o,a=this,s=a.joined,l=a.session;if(s||l){if(t?t.unshift(a):t=[a],s)for(n=0,i=s.length;i>n;++n)o=s[n],o&&(r=o[e])&&r.apply(o,t);r=l&&l[e],r&&r.apply(l,t)}},setSession:function(e){this.session=e,e&&e.add(this)},getModifiedFieldNames:function(e){var t,n=this,i=n.data,r=[],o=e||n.editMemento.data;for(t in i)i.hasOwnProperty(t)&&(n.isEqual(i[t],o[t],t)||r.push(t));return r},isEqual:function(e,t,n){var i;return n&&(i=n.isField?n:this.fieldsMap[n])?0===i.compare(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",rankFields:function(){var e,t,n,i=this,r=i.prototype,o=i.fields,a=o.length,s=[],l=[],d=[];for(i.rankedFields=r.rankedFields=s,i.criticalFields=r.criticalFields=l,i.transientFields=r.transientFields=d,n=0;a>n;++n)t=o[n],t.critical&&l.push(t),t.persist||d.push(t),t.evil?(e||(e=[])).push(t):t.depends||(s.push(t),t.rank=s.length);for(n=0;a>n;++n)(t=o[n]).rank||t.evil||i.topoAdd(t);if(e)for(n=0,a=e.length;a>n;++n)s.push(t=e[n]),t.rank=s.length;return s},topoAdd:function(e){var t,n,i=this,r=e.depends,o=r?r.length:0,a=i.rankedFields;for(t=0;o>t;++t)n=i.fieldsMap[r[t]],(n.dependents||(n.dependents=[])).push(e),n.rank||i.topoAdd(n);a.push(e),e.rank=a.length},initFields:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p=Ext.data.field.Field,f=e.fields,g=[],m={},x={},v=[],y=n.fields,E=e.versionProperty||n.versionProperty,b=t.idProperty;if(t.fields=n.fields=g,t.fieldOrdinals=n.fieldOrdinals=m,t.fieldsMap=n.fieldsMap=x,t.references=n.references=v,y)for(o=0,a=y.length;a>o;++o)g[o]=r=Ext.Object.chain(y[o]),r.dependents=null,r.owner=t,m[s=r.name]=o,x[s]=r,r.rank=null,r.generated&&(u=r,c=r.name);if(f)for(delete e.fields,o=0,a=f.length;a>o;++o)r=f[o],d=r.reference,d&&"string"!=typeof d&&(d=Ext.merge({},d)),r.$reference=d,r=p.create(f[o]),s=r.name,l=m[s],void 0===l&&(m[s]=l=g.length),x[s]=r,g[l]=r,r.definedBy=r.owner=t,r.ordinal=l,s===b&&(h=r);if(i=x[b]){if(h&&u&&u.generated)for(Ext.Array.remove(g,u),delete x[c],delete m[c],x[b]=h,o=0,a=g.length;a>o;++o)r=g[o],g.ordinal=o,m[r.name]=o}else l=u&&u.generated?u.ordinal:g.length,delete x[c],delete m[c],i=new p(b),g[l]=i,m[b]=l,x[b]=i,i.definedBy=t,i.ordinal=l,i.generated=!0;i.allowNull=i.critical=i.identifier=!0,i.defaultValue=null,t.idField=n.idField=i,E&&(r=x[E],r||(l=g.length,r=new p({name:E,type:"int"}),g[l]=r,m[E]=l,x[E]=r,r.definedBy=t,r.ordinal=l,r.generated=!0),r.defaultValue=1,r.critical=!0)},initValidators:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p=n.validators;if(p){i={};for(r in p)i[r]=Ext.Array.clone(p[r])}if(a=e.validators||e.validations){if(delete e.validators,i=i||{},Ext.isArray(a)){for(o={},s=0,l=a.length;l>s;++s)h=a[s],u=h.field,o[u]||(o[u]=[]),h=h.fn||h,o[u].push(h);a=o}for(u in a)d=a[u],Ext.isArray(d)||(d=[d]),c=i[u],i[u]?Ext.Array.push(c,d):i[u]=d}if(i)for(u in i)r=t.getField(u),r&&r.setModelValidators(i[u]);t.validators=n.validators=i},initAssociations:function(e,t,n){var i,r,o,a=t.associations,s=t.belongsTo,l=t.hasMany,d=t.hasOne,u=t.manyToMany;if(delete t.manyToMany,u&&e.addMatrices(n,u),delete t.associations,delete t.belongsTo,delete t.hasMany,delete t.hasOne,a)for(a=Ext.isArray(a)?a:[a],i=0,r=a.length;r>i;++i)switch(o=a[i],o.type){case"belongsTo":e.addLegacyBelongsTo(n,o);break;case"hasMany":e.addLegacyHasMany(n,o);break;case"hasOne":e.addLegacyHasOne(n,o)}if(s)for(s=Ext.isArray(s)?s:[s],i=0,r=s.length;r>i;++i)e.addLegacyBelongsTo(n,s[i]);if(l)for(l=Ext.isArray(l)?l:[l],i=0,r=l.length;r>i;++i)e.addLegacyHasMany(n,l[i]);if(d)for(d=Ext.isArray(d)?d:[d],i=0,r=d.length;r>i;++i)e.addLegacyHasOne(n,d[i]);e.afterLegacyAssociations(n)},initIdentifier:function(e,t,n){var i,r=e.identifier||e.idgen,o=n.identifier||t.schema._defaultIdentifier;r?(delete e.identifier,delete e.idgen,r=Ext.Factory.dataIdentifier(r)):o&&(r=o.clone&&!o.getId()?o.clone():o.isGenerator?o:Ext.Factory.dataIdentifier(o)),t.identifier=n.identifier=r,r||(i=t.entityName,i||(i=Ext.id(null,"extModel")),t.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:i+"-"}))},findValidator:function(e,t,n){var i,r,o,a=n.type||n,s=e[t];if(s)for(r=0,i=s.length;i>r;++r)if(o=s[r],o.type===a)return o;return null},makeInitializeFn:function(e){var t,n,i,r,o,a,s,l,d,u,c,h=["var "],p=["\nreturn function (e) {\n    var data = e.data, v;\n"],f=[],g=0;for((s=e.rankedFields)||(s=e.rankFields()),u=0,c=s.length;c>u;++u)a=s[u],f[u]=l="f"+u,i=a.convert,u&&h.push(",  \n    "),h.push(l," = $fields["+u+"]"),((d=void 0!==a.defaultValue)||i)&&(r='data["'+a.name+'"]',++g,t=n="",a.cloneDefaultValue&&(t="Ext.clone(",n=")"),p.push("\n"),i&&d?p.push("    v = ",r,";\n    if (v !== undefined) {\n        v = ",l,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",t,l,".defaultValue",n,";\n    }\n    ",r," = v;"):i?p.push("    v = ",l,".convert(",r,",e);\n    if (v !== undefined) {\n        ",r," = v;\n    }\n"):d&&p.push("    if (",r," === undefined) {\n        ",r," = ",t,l,".defaultValue",n,";\n    }\n"));return g?(h.push(";\n"),h.push.apply(h,p),h.push("}"),h=h.join(""),(o=Function("$fields","Ext",h))(s,Ext)):Ext.emptyFn}}}},1,0,0,0,0,0,[Ext.data,"Model",Ext.data,"Record"],function(){var e,t=this,n=t.prototype,i=Ext.data.schema.Schema;t.proxyConfig=n.proxy,delete n.proxy,t.fields=[],t.fieldsMap=n.fieldsMap={},t.schema=n.schema=i.get(n.schema),n.idField=new Ext.data.field.Field(n.idProperty),t.identifier=new Ext.data.identifier.Sequential,t.onExtended(function(n,r){var o,a,s,l=n.prototype,d=r.schema,u=l.superclass.self;n.idProperty=r.idProperty||l.idProperty,d?(delete r.schema,o=i.get(d)):(o=l.schema)||(o=e||(e=i.get("default"))),n.rankFields=t.rankFields,n.topoAdd=t.topoAdd,l.schema=n.schema=o,(a=r.entityName)||(l.entityName=a=o.getEntityName(n)),n.entityName=a,n.fieldExtractors={},t.initIdentifier(r,n,l),t.initFields(r,n,l),t.initValidators(r,n,l),n.fields.items=n.fields,a&&(o.addEntity(n),t.initAssociations(o,r,n)),s=r.proxy,s?delete r.proxy:u!==t&&(s=u.proxyConfig||u.proxy),n.proxyConfig=s})}),Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{isResultSet:!0,$configPrefixed:!1,config:{loaded:!0,count:null,total:null,success:!1,records:null,message:null},constructor:function(e){this.initConfig(e)},getCount:function(){var e,t=(arguments.callee.$previous||Ext.Base.prototype.getCount).call(this);return t||(e=this.getRecords(),e&&(t=e.length)),t}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0),Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:!0,readRecordsOnFailure:!0,model:null,proxy:null,transform:null,keepRawData:!0},isReader:!0,constructor:function(e){e&&e.hasOwnProperty("root")&&(e=Ext.apply({},e),e.rootProperty=e.root,delete e.root);var t=this;t.duringInit=1,t.mixins.observable.constructor.call(t,e),--t.duringInit,t.buildExtractors()},applyModel:function(e){return Ext.data.schema.Schema.lookupEntity(e)},applyTransform:function(e){return e?(Ext.isFunction(e)&&(e={fn:e}),e.fn.bind(e.scope||this)):e},forceBuildExtractors:function(){this.duringInit||this.buildExtractors(!0)},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(e,t){var n,i;if(e)if(e.responseText){if(i=this.getResponseData(e),i&&i.__$isError)return new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:i.msg});n=this.readRecords(i,t)}else n=this.readRecords(e,t);return n||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(e){return{__$isError:!0,msg:e}},readRecords:function(e,t,n){var i,r,o,a,s,l,d,u,c=this,h=n&&n.recordsOnly,p=n&&n.asRoot;return u=this.getTransform(),u&&(e=u(e)),c.buildExtractors(),c.getKeepRawData()&&(c.rawData=e),e=c.getData(e),i=!0,r=0,o=[],c.getSuccessProperty()&&(l=c.getSuccess(e),(l===!1||"false"===l)&&(i=!1)),c.getMessageProperty()&&(d=c.getMessage(e)),(i||c.getReadRecordsOnFailure())&&(a=p||Ext.isArray(e)?e:c.getRoot(e),a&&(s=a.length),c.getTotalProperty()&&(l=parseInt(c.getTotal(e),10),isNaN(l)||(s=l)),a&&(o=c.extractData(a,t),r=o.length)),h?o:new Ext.data.ResultSet({total:s||r,count:r,records:o,success:i,message:d})},extractData:function(e,t){var n,i,r,o,a,s=this,l=t&&t.model?Ext.data.schema.Schema.lookupEntity(t.model):s.getModel(),d=l.schema,u=d.hasAssociations(l)&&s.getImplicitIncludes(),c=s.getFieldExtractorInfo(l.fieldExtractors),h=e.length,p=Array(h),f=s.getTypeProperty();for(!h&&Ext.isObject(e)&&(e=[e],h=1),a=0;h>a;a++)o=e[a],o.isModel||(i=o,f&&(r=s.getChildType(d,i,f))?(n=r.getProxy().getReader(),o=n.extractRecord(i,t,r,d.hasAssociations(r)&&n.getImplicitIncludes(),n.getFieldExtractorInfo(r.fieldExtractors))):o=s.extractRecord(i,t,l,u,c),o.isModel&&o.isNode&&(o.raw=i)),o.onLoad&&o.onLoad(),p[a]=o;return p},getChildType:function(e,t,n){var i;switch(typeof n){case"string":return e.getEntity(t[n]);case"object":return i=n.namespace,e.getEntity((i?i+".":"")+t[n.name]);case"function":return e.getEntity(n(t))}},extractRecordData:function(e,t){var n=t&&t.model?Ext.data.schema.Schema.lookupEntity(t.model):this.getModel(),i=this.getFieldExtractorInfo(n.fieldExtractors);return this.extractRecord(e,t,n,!1,i)},extractRecord:function(e,t,n,i,r){var o,a,s=this,l=t&&t.recordCreator||s.defaultRecordCreator;return o=s.extractModelData(e,r),a=l.call(s,o,n||s.getModel(),t),i&&a.isModel&&s.readAssociated(a,e,t),a},getFieldExtractorInfo:function(e){if(e){var t=this.$className,n=e[t];return void 0===n&&(e[t]=n=this.buildFieldExtractors()),n}},buildFieldExtractors:function(){var e,t,n,i,r=this.getFields(),o=r.length,a=[],s=[],l=null,d=0;for(n=0;o>n;++n)e=r[n],i=this.createFieldAccessor(e),i&&(t=e.name,a.push("val = extractors["+d+"](raw); if (val !== undefined) { data['"+t+"'] = val; }"),s.push(i),++d);return a.length&&(l={extractors:s,fn:Function("raw","data","extractors","var val;"+a.join(""))}),l},defaultRecordCreator:function(e,t){var n=new t(e);return n.phantom=!1,n},getModelData:function(){return{}},extractModelData:function(e,t){var n,i=this.getModelData(e);return t&&(n=t.fn)(e,i,t.extractors),i},readAssociated:function(e,t,n){var i,r,o=e.associations;for(i in o)o.hasOwnProperty(i)&&(r=o[i],r.cls&&r.read(e,t,this,n))},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(){},onMetaChange:function(e){var t,n,i,r,o=this,a=e.fields;o.metaData=e,e.root&&o.setRootProperty(e.root),e.totalProperty&&o.setTotalProperty(e.totalProperty),e.successProperty&&o.setSuccessProperty(e.successProperty),e.messageProperty&&o.setMessageProperty(e.messageProperty),i=e.clientIdProperty,a?(n=Ext.define(null,{extend:"Ext.data.Model",fields:a,clientIdProperty:i}),o.setModel(n),r=o.getProxy(),r&&r.setModel(n)):i&&(t=o.getModel(),t&&(t.self.prototype.clientIdProperty=i))},buildExtractors:function(e){var t,n,i,r=this;return e||!r.hasExtractors?(t=r.getTotalProperty(),n=r.getSuccessProperty(),i=r.getMessageProperty(),t&&(r.getTotal=r.getAccessor(t)),n&&(r.getSuccess=r.getAccessor(n)),i&&(r.getMessage=r.getAccessor(i)),r.hasExtractors=!0,!0):void 0},getAccessor:function(e){var t,n,i=this,r=i.extractorCache;return"string"==typeof e?(n=i.getAccessorKey(e),t=r.get(n),t||(t=i.createAccessor(e),r.add(n,t))):t=i.createAccessor(e),t},getAccessorKey:function(e){return this.$className+e},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var e=this;e.model=e.getTotal=e.getSuccess=e.getMessage=e.rawData=null},privates:{copyFrom:function(e){var t=this;e.buildExtractors(),t.getTotal=e.getTotal,t.getSuccess=e.getSuccess,t.getMessage=e.getMessage,++t.duringInit,t.setConfig(e.getConfig()),--t.duringInit,t.hasExtractors=!0}}},1,0,0,0,["reader.base"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(e){var t=e.prototype;Ext.apply(t,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:""})}),t.extractorCache=new Ext.util.LruCache}),Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:!0},partialDataOptions:{changes:!0,critical:!0},writeAllFields:!1,dateFormat:null,nameProperty:"name",writeRecordId:!0,transform:null},isWriter:!0,constructor:function(e){this.initConfig(e)},applyTransform:function(e){return e?(Ext.isFunction(e)&&(e={fn:e}),e.fn.bind(e.scope||this)):e},write:function(e){var t,n=e.getOperation(),i=n.getRecords()||[],r=i.length,o=[];for(t=0;r>t;t++)o.push(this.getRecordData(i[t],n));return this.writeRecords(e,o)},writeRecords:Ext.emptyFn,getRecordData:function(e,t){var n,i,r,o,a,s,l,d,u=this,c=u.getNameProperty(),h="name"!==c,p=e.self.idField,f=p[c]||p.name,g=e.id,m=u.getWriteAllFields();if(p.serialize&&(g=p.serialize(g)),!m&&t&&t.isDestroyOperation)n={},n[f]=g;else{i=u.getDateFormat(),r=e.phantom,o=r||m?u.getAllDataOptions():u.getPartialDataOptions(),a=r&&u.getClientIdProperty(),s=e.getFieldsMap(),o.serialize=!1,l=e.getData(o),n=h?{}:l,a?(n[a]=g,delete l[f]):u.getWriteRecordId()||delete l[f];for(f in l)g=l[f],(d=s[f])?(d.isDateField&&i&&Ext.isDate(g)?g=Ext.Date.format(g,i):d.serialize&&(g=d.serialize(g,e)),h&&(f=d[c]||f),n[f]=g):h&&(n[f]=g)}return n}},1,0,0,0,["writer.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0),Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{$configPrefixed:!1,alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:!0,model:void 0,reader:{type:"json"},writer:{type:"json"}},isProxy:!0,isSynchronous:!1,constructor:function(e){this.mixins.observable.constructor.call(this,e),this.pendingOperations={}},applyModel:function(e){return Ext.data.schema.Schema.lookupEntity(e)},updateModel:function(e){if(e){var t=this.getReader();t&&!t.getModel()&&t.setModel(e)}},applyReader:function(e){return Ext.Factory.reader(e)},updateReader:function(e){if(e){var t=this,n=t.getModel();n?e.setModel(n):(n=e.getModel(),n&&t.setModel(n)),e.onMetaChange&&(e.onMetaChange=Ext.Function.createSequence(e.onMetaChange,t.onMetaChange,t))}},applyWriter:function(e){var t=this.getReader();return e=Ext.Factory.writer(e),e.getRecord&&!e.getRecord()&&t&&t.getRecord&&(t=t.getRecord(),t&&e.setRecord(t)),e},abort:Ext.emptyFn,onMetaChange:function(e){this.fireEvent("metachange",this,e)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(e,t){var n,i,r,o,a,s,l,d,u,c=this,h=c.getBatchActions();for(void 0===e.operations&&(e={operations:e,listeners:t}),e.batch?Ext.isDefined(e.batch.runOperation)&&(n=Ext.applyIf(e.batch,{proxy:c,listeners:{}})):e.batch={proxy:c,listeners:e.listeners||{}},n||(n=new Ext.data.Batch(e.batch)),n.on("complete",Ext.bind(c.onBatchComplete,c,[e],0)),r=c.getBatchOrder().split(","),o=r.length,s=0;o>s;s++)if(a=r[s],i=e.operations[a])if(h)n.add(c.createOperation(a,{records:i,params:e.params}));else for(d=i.length,l=0;d>l;l++)u=i[l],n.add(c.createOperation(a,{records:[u],params:e.params}));return n.start(),n},onBatchComplete:function(e,t){var n=e.scope||this;t.hasException()?Ext.isFunction(e.failure)&&Ext.callback(e.failure,n,[t,e]):Ext.isFunction(e.success)&&Ext.callback(e.success,n,[t,e]),Ext.isFunction(e.callback)&&Ext.callback(e.callback,n,[t,e])},createOperation:function(e,t){var n=Ext.createByAlias("data.operation."+e,t);return n.setProxy(this),this.pendingOperations[n._internalId]=n,n},completeOperation:function(e){delete this.pendingOperations[e._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var e,t,n=this.pendingOperations;for(e in n)t=n[e],t&&t.isRunning()&&t.abort();this.pendingOperations=null}},1,0,0,0,["proxy.proxy"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0),Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:!0,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0),Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:!0,config:{enablePaging:!1,data:{$value:null,merge:function(e){return Ext.isArray(e)?Ext.Array.clone(e):Ext.clone(e)}}},finishOperation:function(e){var t=0,n=e.getRecords(),i=n.length;for(t;i>t;t++)n[t].commit();e.setSuccessful(!0)},create:function(e){this.finishOperation(e)},update:function(e){this.finishOperation(e)},erase:function(e){this.finishOperation(e)},read:function(e){var t=this,n=t.getReader().read(t.getData()),i=n.getRecords(),r=e.getSorters(),o=e.getGrouper(),a=e.getFilters(),s=e.getStart(),l=e.getLimit();e.process(n,null,null,!1)!==!1&&(a&&a.length&&(n.setRecords(i=Ext.Array.filter(i,Ext.util.Filter.createFilterFn(a))),n.setTotal(i.length)),o&&(r=r?r.concat(o):r),r&&r.length&&n.setRecords(i=Ext.Array.sort(i,Ext.util.Sortable.createComparator(r))),t.getEnablePaging()&&void 0!==s&&void 0!==l&&(s>=n.getTotal()?n.setConfig({success:!1,records:[],total:0}):n.setRecords(Ext.Array.slice(i,s,s+l))),e.setCompleted())},clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0),Ext.cmd.derive("Ext.data.ProxyStore",Ext.data.AbstractStore,{config:{model:void 0,fields:null,proxy:void 0,autoLoad:void 0,autoSync:!1,batchUpdateMode:"operation",sortOnLoad:!0,trackRemoved:!0,autoLoadDelay:1},onClassExtended:function(e,t,n){var i,r=t.model;"string"==typeof r&&(i=n.onBeforeCreated,n.onBeforeCreated=function(){var e=this,t=arguments;Ext.require(r,function(){i.apply(e,t)})})},implicitModel:!1,blockLoadCounter:0,loadsWhileBlocked:0,autoSyncSuspended:0,constructor:function(){var e=this;e.removed=[],e.blockLoad(),Ext.data.AbstractStore.prototype.constructor.apply(this,arguments),e.unblockLoad()},updateAutoLoad:function(e){var t,n=this;n.getData(),e&&(t=n.loadTask||(n.loadTask=new Ext.util.DelayedTask(null,null,null,null,!1)),t.delay(n.autoLoadDelay,n.attemptLoad,n,Ext.isObject(e)?[e]:void 0))},getTotalCount:function(){return this.totalCount||0},applyFields:function(e){var t,n,i=this;e&&(i.implicitModel=!0,i.setModel(t=Ext.define(null,{extend:"Ext.data.Model",fields:e,proxy:n=i.getProxy()})),n&&!n.getModel()&&n.setModel(t))},applyModel:function(e){return e?e=Ext.data.schema.Schema.lookupEntity(e):(this.getFields(),e=this.getModel()),e},applyProxy:function(e){var t=this.getModel();return null!==e&&(e?e.isProxy?e.setModel(t):(Ext.isString(e)?e={type:e,model:t}:e.model||(e=Ext.apply({model:t},e)),e=Ext.createByAlias("proxy."+e.type,e),e.autoCreated=!0):t&&(e=t.getProxy()),e||(e=Ext.createByAlias("proxy.memory"),e.autoCreated=!0)),e},applyState:function(e){var t=this,n=t.getAutoLoad()||t.isLoaded();t.blockLoad(),Ext.data.AbstractStore.prototype.applyState.call(this,e),t.unblockLoad(n)},updateProxy:function(){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(e){this.cleanRemoved(),this.removed=e?[]:null},onMetaChange:function(e,t){this.fireEvent("metachange",this,t)},create:function(e,t){var n,i=this,r=i.getModel(),o=new r(e);return t=Ext.apply({},t),t.records||(t.records=[o]),t.internalScope=i,t.internalCallback=i.onProxyWrite,n=i.createOperation("create",t),n.execute()},read:function(){return this.load.apply(this,arguments)},update:function(e){var t,n=this;return e=Ext.apply({},e),e.records||(e.records=n.getUpdatedRecords()),e.internalScope=n,e.internalCallback=n.onProxyWrite,t=n.createOperation("update",e),t.execute()},onProxyWrite:function(e){var t=this,n=e.wasSuccessful(),i=e.getRecords();switch(e.getAction()){case"create":t.onCreateRecords(i,e,n);break;case"update":t.onUpdateRecords(i,e,n);break;case"destroy":t.onDestroyRecords(i,e,n)}n&&(t.fireEvent("write",t,e),t.fireEvent("datachanged",t))},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(e,t,n){n&&this.cleanRemoved()},erase:function(e){var t,n=this;return e=Ext.apply({},e),e.records||(e.records=n.getRemovedRecords()),e.internalScope=n,e.internalCallback=n.onProxyWrite,t=n.createOperation("destroy",e),t.execute()},onBatchOperationComplete:function(e,t){return this.onProxyWrite(t)},onBatchComplete:function(e){var t,n=this,i=e.operations,r=i.length;if("operation"!==n.batchUpdateMode){for(n.suspendEvents(),t=0;r>t;t++)n.onProxyWrite(i[t]);n.resumeEvents()}n.isSyncing=!1,n.fireEvent("datachanged",n)},onBatchException:function(){},filterNew:function(e){return e.phantom===!0&&e.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(e){return e.dirty===!0&&e.phantom!==!0&&e.isValid()},getRemovedRecords:function(){return this.removed},sync:function(e){var t=this,n={},i=t.getNewRecords(),r=t.getUpdatedRecords(),o=t.getRemovedRecords(),a=!1;return t.needsSync=!1,i.length>0&&(n.create=i,a=!0),r.length>0&&(n.update=r,a=!0),o.length>0&&(n.destroy=o,a=!0),a&&t.fireEvent("beforesync",n)!==!1&&(t.isSyncing=!0,e=e||{},t.proxy.batch(Ext.apply(e,{operations:n,listeners:t.getBatchListeners()}))),t},getBatchListeners:function(){var e=this,t={scope:e,exception:e.onBatchException,complete:e.onBatchComplete};return"operation"===e.batchUpdateMode&&(t.operationcomplete=e.onBatchOperationComplete),t},save:function(){return this.sync.apply(this,arguments)},load:function(e){if(!this.isLoadBlocked()){var t,n,i=this,r={internalScope:i,internalCallback:i.onProxyLoad};return i.getRemoteFilter()&&(t=i.getFilters(!1),t&&t.getCount()&&(r.filters=t.getRange())),i.getRemoteSort()&&(n=i.getSorters(!1),n&&n.getCount()&&(r.sorters=n.getRange()),i.fireEvent("beforesort",i,r.sorters)),Ext.apply(r,e),r.scope=r.scope||i,i.lastOptions=r,r=i.createOperation("read",r),i.fireEvent("beforeload",i,r)!==!1&&(i.onBeforeLoad(r),i.loading=!0,i.clearLoadTask(),r.execute()),i}},reload:function(e){var t=Ext.apply({},e,this.lastOptions);return this.load(t)},onEndUpdate:function(){var e=this;e.needsSync&&e.autoSync&&!e.autoSyncSuspended&&e.sync()},afterReject:function(e){var t=this;t.contains(e)&&(t.onUpdate(e,Ext.data.Model.REJECT,null),t.fireEvent("update",t,e,Ext.data.Model.REJECT,null))},afterCommit:function(e,t){var n=this;t||(t=null),n.contains(e)&&(n.onUpdate(e,Ext.data.Model.COMMIT,t),n.fireEvent("update",n,e,Ext.data.Model.COMMIT,t))},afterErase:function(e){this.onErase(e)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var e=this,t=e.getProxy();e.blockLoad(),e.clearData(),e.setProxy(null),t.autoCreated&&t.destroy(),e.setModel(null)},hasPendingLoad:function(){return!!this.loadTask||this.isLoading()},isLoading:function(){return!!this.loading;
},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(e){var t=this;t.autoSyncSuspended&&!--t.autoSyncSuspended&&e&&t.sync()},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{attemptLoad:function(e){return this.isLoadBlocked()?void++this.loadsWhileBlocked:void this.load(e)},blockLoad:function(){++this.blockLoadCounter},clearLoadTask:function(){var e=this.loadTask;e&&(e.cancel(),this.loadTask=null)},cleanRemoved:function(){var e,t,n=this.removed;if(n){for(t=0,e=n.length;e>t;++t)n[t].unjoin(this);n.length=0}},createOperation:function(e,t){var n,i=this,r=i.getProxy();return i.proxyListeners||(n={scope:i,destroyable:!0,beginprocessresponse:i.beginUpdate,endprocessresponse:i.endUpdate},i.disableMetaChangeEvent||(n.metachange=i.onMetaChange),i.proxyListeners=r.on(n)),r.createOperation(e,t)},isLoadBlocked:function(){return!!this.blockLoadCounter},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(e){var t=this.removed;t&&(Ext.Array.remove(t,e),e.unjoin(this))},unblockLoad:function(e){var t=this,n=t.loadsWhileBlocked;--t.blockLoadCounter,t.blockLoadCounter||(t.loadsWhileBlocked=0,e&&n&&t.load())}}},1,0,0,0,0,0,[Ext.data,"ProxyStore"],0),Ext.cmd.derive("Ext.data.LocalStore",Ext.Mixin,{mixinConfig:{id:"localstore"},config:{extraKeys:null},applyExtraKeys:function(e){var t,n=this.getData();n.setExtraKeys(e),e=n.getExtraKeys();for(t in e)this[t]=e[t]},add:function(e){return this.insert(this.getCount(),1===arguments.length?e:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:"data"})},createModel:function(e){var t,n=this.getSession();return e.isModel||(t=this.getModel(),e=new t(e,n)),e},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var e=this.getData().getSorters();return e.setSorterConfigure(this.addFieldTransform,this),e},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(e){return this.indexOf(e)>-1},each:function(e,t){var n,i,r=this.data.items,o=r.length;for(i=0;o>i&&(n=r[i],e.call(t||n,n,i,o)!==!1);++i);},collect:function(e,t,n){var i=this,r=i.getData();return n===!0&&r.filtered&&(r=r.getSource()),r.collect(e,"data",t)},getById:function(e){var t=this.getData();return t.filtered&&(t=t.getSource()),t.get(e)||null},getByInternalId:function(e){var t,n=this.getData();return this.hasInternalKeys||(t={byInternalId:{property:"internalId",rootProperty:""}},this.hasInternalKeys=!0),n.filtered&&(t&&n.setExtraKeys(t),n=n.getSource()),t&&n.setExtraKeys(t),n.byInternalId.get(e)||null},indexOf:function(e){return this.getData().indexOf(e)},indexOfId:function(e){return this.indexOf(this.getById(e))},insert:function(e,t){var n,i,r=this;if(t&&(t=Ext.isIterable(t)?Ext.Array.clone(t):[t],n=t.length),!n)return[];for(i=0;n>i;++i)t[i]=r.createModel(t[i]);return r.getData().insert(e,t),t},queryBy:function(e,t){var n=this.getData();return(n.getSource()||n).createFiltered(e,t)},query:function(e,t,n,i,r){var o=this.getData();return(o.getSource()||o).createFiltered(e,t,n,i,r)},first:function(e){return this.getData().first(e)||null},last:function(e){return this.getData().last(e)||null},sum:function(e,t){var n=this.getData();return t&&this.isGrouped()?n.sumByGroup(e):n.sum(e)},count:function(e){var t=this.getData();return e&&this.isGrouped()?t.countByGroup():t.count()},min:function(e,t){var n=this.getData();return t&&this.isGrouped()?n.minByGroup(e):n.min(e)},max:function(e,t){var n=this.getData();return t&&this.isGrouped()?n.maxByGroup(e):n.max(e)},average:function(e,t){var n=this.getData();return t&&this.isGrouped()?n.averageByGroup(e):n.average(e)},aggregate:function(e,t,n,i){var r,o,a,s,l,d=this;if(n&&d.isGrouped()){for(r=d.getGroups().items,o=r.length,a={},l=0;o>l;++l)s=r[l],a[s.getGroupKey()]=d.getAggregate(e,t||d,s.items,i);return a}return d.getAggregate(e,t,d.getData().items,i)},getAggregate:function(e,t,n,i){var r,o=[],a=n.length;for(r=0;a>r;++r)o[r]=n[r].get(i);return e.call(t||this,n,o)},addObserver:function(e){var t=this.observers;t||(this.observers=t=new Ext.util.Collection),t.add(e)},removeObserver:function(e){var t=this.observers;t&&t.remove(e)},callObservers:function(e,t){var n,i,r,o,a,s=this.observers;if(s)for(i=s.items,t?t.unshift(this):t=[this],r=0,n=i.length;n>r;++r)a=i[r],o="onSource"+e,a[o]&&a[o].apply(a,t)},queryRecordsBy:function(e,t){var n,i,r,o=this.getData(),a=[];for(o=(o.getSource()||o).items,t=t||this,i=0,n=o.length;n>i;++i)r=o[i],e.call(t,r)===!0&&a.push(r);return a},queryRecords:function(e,t){var n,i,r,o=this.getData(),a=[];for(o=(o.getSource()||o).items,i=0,n=o.length;n>i;++i)r=o[i],r.get(e)===t&&a.push(r);return a},privates:{isLast:function(e){return e===this.last()}}},0,0,0,0,0,0,[Ext.data,"LocalStore"],0),Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",isRemote:!0,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:"_dc",timeout:3e4,api:{create:void 0,read:void 0,update:void 0,destroy:void 0},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(e,t){this.getExtraParams()[e]=t},buildRequest:function(e){var t,n,i,r=this,o=Ext.apply({},e.getParams()),a=Ext.applyIf(o,r.getExtraParams()||{});return Ext.applyIf(a,r.getParams(e)),n=e.getId(),i=r.getIdParam(),void 0!==n&&void 0===a[i]&&(a[i]=n),t=new Ext.data.Request({params:a,action:e.getAction(),records:e.getRecords(),url:e.getUrl(),operation:e,proxy:r}),t.setUrl(r.buildUrl(t)),e.setRequest(t),t},processResponse:function(e,t,n,i){var r,o,a,s=this;s.fireEvent("beginprocessresponse",s,i,t),e===!0?(o=s.getReader(),a=204===i.status?o.getNullResultSet():o.read(s.extractResponseData(i),{recordCreator:t.getRecordCreator()}),t.process(a,n,i),r=!t.wasSuccessful()):(s.setException(t,i),r=!0),r&&s.fireEvent("exception",s,i,t),s.afterRequest(n,e),s.fireEvent("endprocessresponse",s,i,t)},setException:function(e,t){e.setException({status:t.status,statusText:t.statusText,response:t})},extractResponseData:Ext.identityFn,applyEncoding:function(e){return Ext.encode(e)},encodeSorters:function(e,t){var n,i=[],r=e.length;for(n=0;r>n;n++)i[n]=e[n].serialize();return this.applyEncoding(t?i[0]:i)},encodeFilters:function(e){var t,n=[],i=e.length;for(t=0;i>t;t++)n[t]=e[t].serialize();return this.applyEncoding(n)},getParams:function(e){if(!e.isReadOperation)return{};var t,n,i=this,r={},o=e.getGrouper(),a=e.getSorters(),s=e.getFilters(),l=e.getPage(),d=e.getStart(),u=e.getLimit(),c=i.getSimpleSortMode(),h=i.getSimpleGroupMode(),p=i.getPageParam(),f=i.getStartParam(),g=i.getLimitParam(),m=i.getGroupParam(),x=i.getGroupDirectionParam(),v=i.getSortParam(),y=i.getFilterParam(),E=i.getDirectionParam();return p&&l&&(r[p]=l),f&&(d||0===d)&&(r[f]=d),g&&u&&(r[g]=u),t=m&&o,t&&(h?(r[m]=o.getProperty(),r[x]=o.getDirection()):r[m]=i.encodeSorters([o],!0)),v&&a&&a.length>0&&(c?(n=0,a.length>1&&t&&(n=1),r[v]=a[n].getProperty(),r[E]=a[n].getDirection()):r[v]=i.encodeSorters(a)),y&&s&&s.length>0&&(r[y]=i.encodeFilters(s)),r},buildUrl:function(e){var t=this,n=t.getUrl(e);return t.getNoCache()&&(n=Ext.urlAppend(n,Ext.String.format("{0}={1}",t.getCacheString(),Ext.Date.now()))),n},getUrl:function(e){var t;return e&&(t=e.getUrl()||this.getApi()[e.getAction()]),t?t:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(){},afterRequest:Ext.emptyFn,destroy:function(){Ext.data.proxy.Proxy.prototype.destroy.call(this),Ext.destroy(this.getReader(),this.getWriter()),this.reader=this.writer=null}},0,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0),Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:!1,headers:void 0,paramsAsJson:!1,withCredentials:!1,useDefaultXhrHeader:!0,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(e){var t,n,i=this,r=i.getWriter(),o=i.buildRequest(e),a=i.getMethod(o);return r&&e.allowWrite()&&(o=r.write(o)),o.setConfig({binary:i.getBinary(),headers:i.getHeaders(),timeout:i.getTimeout(),scope:i,callback:i.createRequestCallback(o,e),method:a,useDefaultXhrHeader:i.getUseDefaultXhrHeader(),disableCaching:!1}),"GET"!==a.toUpperCase()&&i.getParamsAsJson()&&(n=o.getParams(),n&&(t=o.getJsonData(),t=t?Ext.Object.merge({},t,n):n,o.setJsonData(t),o.setParams(void 0))),i.getWithCredentials()&&(o.setWithCredentials(!0),o.setUsername(i.getUsername()),o.setPassword(i.getPassword())),i.sendRequest(o)},sendRequest:function(e){return e.setRawRequest(Ext.Ajax.request(e.getCurrentConfig())),this.lastRequest=e,e},abort:function(e){e=e||this.lastRequest,e&&Ext.Ajax.abort(e.getRawRequest())},getMethod:function(e){var t,n=this.getActionMethods(),i=e.getAction();return n&&(t=n[i]),t||this.defaultActionMethods[i]},createRequestCallback:function(e,t){var n=this;return function(i,r,o){e===n.lastRequest&&(n.lastRequest=null),n.processResponse(r,t,e,o)}},destroy:function(){this.lastRequest=null,Ext.data.proxy.Server.prototype.destroy.call(this)}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0),Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,metaProperty:"metaData",useSimpleAccessors:!1,preserveRawData:!1},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(e,t,n){var i,r=this;return r.getMeta?(i=r.getMeta(e),i&&r.onMetaChange(i)):e.metaData&&r.onMetaChange(e.metaData),Ext.data.reader.Reader.prototype.readRecords.call(this,e,t,n)},getResponseData:function(e){try{return Ext.decode(e.responseText)}catch(t){return Ext.Logger.warn("Unable to parse the JSON returned by the server"),this.createReadError(t.message)}},buildExtractors:function(){var e,t,n=this;Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)&&(e=n.getMetaProperty(),t=n.getRootProperty(),t?n.getRoot=n.getAccessor(t):n.getRoot=Ext.identityFn,e&&(n.getMeta=n.getAccessor(e)))},extractData:function(e,t){var n,i,r=this.getRecord(),o=[];if(r)for(n=e.length,!n&&Ext.isObject(e)&&(n=1,e=[e]),i=0;n>i;i++)o[i]=e[i][r];else o=e;return Ext.data.reader.Reader.prototype.extractData.call(this,o,t)},getModelData:function(e){return this.getPreserveRawData()?Ext.apply({},e):e},createAccessor:function(){var e=/[\[\.]/;return function(t){var n,i,r,o,a,s,l,d,u,c,h,p,f,g,m=this,x=m.getUseSimpleAccessors();if(t||0===t){if("function"==typeof t)return t;if(x||(n=(t+"").search(e)),x===!0||0>n)i=function(e){return e[t]};else{for(r="raw",o=[],a="",s=0,g=t.length,p=0;g>=p;++p)h=t[p],l="."===h,d="["===h,u="]"===h,c=l||d||u||!h,!c||s>1||s&&!u?a+=h:c&&(f=!1,d?++s:u&&(--s,f=!0),a&&(a=f?"["+a+"]":"."+a,r+=a,o.push(""+r),a=""));i=o.join(" && "),i=Ext.functionFactory("raw","return "+i)}return i}}}(),createFieldAccessor:function(e){var t=this,n=e.mapping,i=n||0===n,r=i?n:e.name;return i?"function"==typeof r?function(n){return e.mapping(n,t)}:t.createAccessor(r):void 0},getAccessorKey:function(e){var t=this.getUseSimpleAccessors()?"simple":"";return this.$className+t+e},privates:{copyFrom:function(e){Ext.data.reader.Reader.prototype.copyFrom.call(this,e),this.getRoot=e.getRoot}}},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0),Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:void 0,encode:!1,allowSingle:!0,expandData:!1},getExpandedData:function(e){for(var t,n,i,r,o,a=e.length,s=0,l=function(e,t){var n={};return n[e]=t,n};a>s;s++){t=e[s];for(n in t)if(t.hasOwnProperty(n)&&(i=n.split("."),r=i.length-1,r>0)){for(o=t[n];r>0;r--)o=l(i[r],o);t[i[0]]=t[i[0]]||{},Ext.Object.merge(t[i[0]],o),delete t[n]}}return e},writeRecords:function(e,t){var n,i,r,o=this,a=o.getRootProperty();return o.getExpandData()&&(t=o.getExpandedData(t)),o.getAllowSingle()&&1===t.length&&(t=t[0],i=!0),r=this.getTransform(),r&&(t=r(t,e)),o.getEncode()?a&&e.setParam(a,Ext.encode(t)):(i||t&&t.length)&&(n=e.getJsonData()||{},a?n[a]=t:n=t,e.setJsonData(n)),e}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0),Ext.cmd.derive("Ext.util.Group",Ext.util.Collection,{config:{groupKey:null},$endUpdatePriority:2001},0,0,0,0,0,0,[Ext.util,"Group"],0),Ext.cmd.derive("Ext.util.SorterCollection",Ext.util.Collection,{isSorterCollection:!0,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(e){var t=this;t.sortFn=Ext.util.Sorter.createComparator(t),Ext.util.Collection.prototype.constructor.call(this,e),t.setDecoder(t.decodeSorter)},addSort:function(e,t,n){var i,r,o,a,s,l,d,u=this;e?(a=u.getOptions(),e instanceof Array?(d=e,n=t,t=null):Ext.isString(e)?d=(l=u.get(e))?[l]:[{property:e,direction:t||a.getDefaultSortDirection()}]:Ext.isFunction(e)?d=[{sorterFn:e,direction:t||a.getDefaultSortDirection()}]:(d=[e],n=t,t=null),n=u._sortModes[n||"replace"],s=u.getAt(0),i=u.length,r=n.append?i:0,u.beginUpdate(),u.splice(r,n.replace?i:0,d),n.multi&&(i=u.length,o=a.getMultiSortLimit(),i>o&&u.removeAt(o,i)),l&&t?l.setDirection(t):0===r&&s&&s===u.getAt(0)&&s.toggle(),u.endUpdate()):(u.beginUpdate(),u.endUpdate())},getSortFn:function(){return this.sortFn},getByProperty:function(e){var t,n,i=this.items,r=i.length;for(t=0;r>t;++t)if(n=i[t],n.getProperty()===e)return n;return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(e,t){var n,i,r,o=this,a=o.getOptions(),s=a.getRootProperty(),l=o.getSorterOptionsFn();if(e.isSorter)e.getRoot()||e.setRoot(s);else{if(i={direction:a.getDefaultSortDirection(),root:s},r=typeof e,"string"===r){if(n=o.get(e))return n;i.property=e}else"function"===r?i.sorterFn=e:(i=Ext.apply(i,e),i.fn&&(i.sorterFn=i.fn,delete i.fn));e=Ext.create(t||"Ext.util.Sorter",i)}return l&&l.call(o.getSorterOptionsScope()||o,e),e},setSorterConfigure:function(e,t){this.setSorterOptionsFn(e),this.setSorterOptionsScope(t)},decodeRemoveItems:function(e,t){var n=this,i=void 0===t?e:e[t];if(!i||!i.$cloned){(e.length>t+1||!Ext.isIterable(i))&&(i=Ext.Array.slice(e,t));var r,o,a,s,l,d=n.items,u=i.length,c=[];for(r=0;u>r;r++)if(s=i[r],s&&s.isSorter)c.push(s);else if(l=typeof s,"string"===l)s=n.get(s),s&&c.push(s);else if("function"===l)for(a=d.length;a-->0;)o=d[a],o.getSorterFn()===s&&c.push(o);i=c,i.$cloned=!0}return i},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,"SorterCollection"],0),Ext.cmd.derive("Ext.util.FilterCollection",Ext.util.Collection,{isFilterCollection:!0,$filterable:null,filterFn:null,constructor:function(e){var t=this;t.filterFn=Ext.util.Filter.createFilterFn(t),Ext.util.Collection.prototype.constructor.call(this,e),t.setDecoder(t.decodeFilter)},filterData:function(e){return this.filtered?Ext.Array.filter(e,this.filterFn):e},getFilterFn:function(){return this.filterFn},isItemFiltered:function(e){return!this.filterFn(e)},decodeFilter:function(e){var t,n=this.getOptions(),i=n.getRootProperty();if(e.isFilter)e.getRoot()||e.setRoot(i);else{if(t={root:i},Ext.isFunction(e))t.filterFn=e;else if(t=Ext.apply(t,e),t.fn&&(t.filterFn=t.fn,delete t.fn),Ext.util.Filter.isInvalid(t))return!1;e=new Ext.util.Filter(t)}return e},decodeRemoveItems:function(e,t){var n=this,i=void 0===t?e:e[t];if(!i.$cloned){(e.length>t+1||!Ext.isIterable(i))&&(i=Ext.Array.slice(e,t));var r,o,a,s,l,d,u,c,h,p=n.items,f=i.length,g=[];for(o=0;f>o;o++)if(r=i[o],r&&r.isFilter)g.push(r);else for(h=typeof r,a="function"===h,s=void 0!==r.property&&void 0!==r.value,l="string"===h,c=p.length;c-->0;)d=p[c],u=!1,l?u=d.getProperty()===r:a?u=d.getFilterFn()===r:s&&(u=d.getProperty()===r.property&&d.getValue()===r.value),u&&g.push(d);i=g,i.$cloned=!0}return i},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,"FilterCollection"],0),Ext.cmd.derive("Ext.util.GroupCollection",Ext.util.Collection,{isGroupCollection:!0,config:{grouper:null,itemRoot:null},observerPriority:-100,onCollectionAdd:function(e,t){this.addItemsToGroups(e,t.items)},onCollectionBeforeItemChange:function(e,t){this.changeDetails=t},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(e,t){var n=t.item;t.indexChanged||this.syncItemGrouping(e,n,e.getKey(n),t.oldKey,t.oldIndex),this.changeDetails=null},onCollectionRefresh:function(e){this.removeAll(),this.addItemsToGroups(e,e.items)},onCollectionRemove:function(e,t){var n,i,r,o,a,s,l,d=this,u=d.changeDetails;for(u?(l=u.item,r=d.findGroupForItem(l),n=[],r&&n.push({group:r,items:[l]})):n=d.groupItems(e,t.items,!1),o=0,a=n.length;a>o;++o)r=(i=n[o]).group,r&&(r.remove(i.items),r.length||(s||(s=[])).push(r));s&&d.remove(s)},onCollectionSort:function(e){var t,n,i,r,o=this,a=e.getSorters(!1);if(a)for(t=o.items,n=o.length,i=0;n>i;++i)r=t[i],r.getSorters()!==a&&r.setSorters(a)},onCollectionUpdateKey:function(e,t){var n=t.index,i=t.item;t.indexChanged||(n=e.indexOf(i),this.syncItemGrouping(e,i,t.newKey,t.oldKey,n))},addItemsToGroups:function(e,t){this.groupItems(e,t,!0)},groupItems:function(e,t,n){var i,r,o,a,s,l,d,u,c=this,h={},p=[],f=e.getGrouper(),g=c.itemGroupKeys;for(a=0,d=t.length;d>a;++a)o=f.getGroupString(s=t[a]),l=e.getKey(s),n?(g||(c.itemGroupKeys=g={}))[l]=o:g&&delete g[l],(i=h[o])||(!(r=c.getByKey(o))&&n&&(u||(u=[])).push(r=c.createGroup(e,o)),p.push(h[o]=i={group:r,items:[]})),i.items.push(s);for(a=0,d=p.length;d>a;++a)i=p[a],i.group.add(i.items);return u&&c.add(u),p},syncItemGrouping:function(e,t,n,i,r){var o,a,s,l,d,u=this,c=u.itemGroupKeys||(u.itemGroupKeys={}),h=e.getGrouper(),p=h.getGroupString(t),f=0,g=-1;i?(l=c[i],delete c[i]):l=c[n],c[n]=p,(a=u.get(p))||(a=u.createGroup(e,p),o=[a]),a.get(n)!==t?(a.getCount()>0&&0===e.getSorters().getCount()&&(d=e.indexOf(a.items[0]),g=d>r?0:r-d),-1===g?a.add(t):a.insert(g,t)):a.itemChanged(t),p===l||0!==l&&!l||(s=u.get(l),s&&(s.remove(t),s.length||(f=[s]))),o?u.splice(0,f,o):f&&u.splice(0,f)},createGroup:function(e,t){var n=new Ext.util.Group({groupKey:t,rootProperty:this.getItemRoot(),sorters:e.getSorters()});return n},getKey:function(e){return e.getGroupKey()},createSortFn:function(){var e=this,t=e.getGrouper(),n=e.getSorters().getSortFn();return t?function(e,i){return t.sort(e.items[0],i.items[0])||n(e,i)}:n},updateGrouper:function(e){var t=this;t.grouped=!(!e||!t.$groupable.getAutoGroup()),t.onSorterChange(),t.onEndUpdateSorters(t.getSorters())},destroy:function(){this.$groupable=null,Ext.util.Collection.prototype.destroy.call(this)},privates:{findGroupForItem:function(e){var t,n,i=this.items,r=i.length;for(t=0;r>t;++t)if(n=i[t],n.contains(e))return n}}},0,0,0,0,0,0,[Ext.util,"GroupCollection"],0),Ext.cmd.derive("Ext.data.Store",Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:!0,clearOnPageLoad:!0,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:!0},loadCount:0,complete:!1,moveMapCount:0,constructor:function(e){var t,n=this;return e&&e.buffered?new Ext.data.BufferedStore(e):(Ext.data.ProxyStore.prototype.constructor.call(this,e),n.getData().addObserver(n),t=n.inlineData,void(t&&(delete n.inlineData,n.loadInlineData(t))))},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(e,t){var n=this;return n.getFields(),n.getModel(),e&&e.isCollection?t=e:(t||(t=n.constructDataCollection()),e&&(n.isInitializing?n.inlineData=e:n.loadData(e))),t},loadInlineData:function(e){var t,n=this,i=n.getProxy();i&&i.isMemoryProxy?(i.setData(e),t=n.blockLoadCounter,n.blockLoadCounter=0,n.suspendEvents(),n.read(),n.resumeEvents(),n.blockLoadCounter=t):(n.removeAll(!0),n.suspendEvents(),n.loadData(e),n.resumeEvents())},onCollectionAdd:function(e,t){this.onCollectionAddItems(e,t.items,t)},onCollectionFilterAdd:function(e,t){this.onCollectionAddItems(e,t)},onCollectionAddItems:function(e,t,n){var i,r,o,a,s=this,l=t.length,d=n?!n.next:!1,u=s.getRemovedRecords(),c=s.ignoreCollectionAdd,h=s.getSession(),p=n&&n.replaced;for(i=0;l>i;++i)o=t[i],h&&h.adopt(o),c||(o.join(s),u&&u.length&&Ext.Array.remove(u,o),r=r||o.phantom||o.dirty);if(!c){if(p){a=[];do Ext.Array.push(a,p.items),p=p.next;while(p);s.setMoving(a,!0)}n&&(s.fireEvent("add",s,t,n.at),d&&s.fireEvent("datachanged",s)),a&&s.setMoving(a,!1),s.needsSync=s.needsSync||r}},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(e,t){var n=this,i=t.item,r=t.modified||null,o=t.meta;n.fireChangeEvent(i)&&(n.onUpdate(i,o,r,t),n.fireEvent("update",n,i,o,r,t))},fireChangeEvent:function(e){var t=this.getData();return t=t.getSource()||t,t.contains(e)},afterChange:function(e,t,n){this.getData().itemChanged(e,t||null,void 0,n)},afterCommit:function(e,t){this.afterChange(e,t,Ext.data.Model.COMMIT)},afterEdit:function(e,t){this.needsSync=this.needsSync||e.dirty,this.afterChange(e,t,Ext.data.Model.EDIT)},afterReject:function(e){this.afterChange(e,null,Ext.data.Model.REJECT)},afterDrop:function(e){this.getData().remove(e)},afterErase:function(e){this.removeFromRemoved(e)},addSorted:function(e){var t,n=this,i=n.getRemoteSort(),r=n.getData();return i&&r.setSorters(n.getSorters()),t=r.findInsertionIndex(e),i&&r.setSorters(null),n.insert(t,e)},remove:function(e,t,n){var i,r,o,a,s=this,l=s.getData();if(e)if(e.isModel)s.indexOf(e)>-1?(o=[e],i=1):i=0;else{for(o=[],r=0,i=e.length;i>r;++r){if(a=e[r],a&&a.isEntity){if(!l.contains(a))continue}else if(!(a=l.getAt(a)))continue;o.push(a)}i=o.length}return i?(s.removeIsMove=t===!0,s.removeIsSilent=n,l.remove(o),s.removeIsSilent=!1,o):[]},onCollectionRemove:function(e,t){var n,i,r=this,o=r.removed,a=t.items,s=a.length,l=t.at,d=r.removeIsMove,u=r.removeIsSilent,c=!t.next,h=t.replacement,p=r.getData();if(!r.ignoreCollectionRemove){for(p=p.getSource()||p,h&&r.setMoving(h.items,!0),n=0;s>n;++n)i=a[n],p.contains(i)||(!o||d||i.phantom||i.erasing?i.unjoin(r):(i.removedFrom=l+n,o.push(i),r.needsSync=!0));u||(r.fireEvent("remove",r,a,l,d),c&&r.fireEvent("datachanged",r)),h&&r.setMoving(h.items,!1)}},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments),this.callObservers("Filter")},removeAt:function(e,t){var n=this.getData();if(e=Math.max(e,0),e<n.length){if(1===arguments.length)t=1;else if(!t)return;n.removeAt(e,t)}},removeAll:function(e){var t=this,n=t.getData(),i=(t.hasListeners.clear,n.getRange());return n.length&&(t.removeIsSilent=!0,t.callObservers("BeforeRemoveAll"),n.removeAll(),t.removeIsSilent=!1,e||(t.fireEvent("clear",t,i),t.fireEvent("datachanged",t)),t.callObservers("AfterRemoveAll",[!!e])),i},setRecords:function(e){var t=this.getCount();++this.loadCount,t?this.getData().splice(0,t,e):this.add(e)},splice:function(e,t,n){return this.getData().splice(e,t,n)},load:function(e){var t,n=this,i=n.getPageSize();return e="function"==typeof e?{callback:e}:Ext.apply({},e),n.getRemoteSort()&&!e.grouper&&n.getGrouper()&&(e.grouper=n.getGrouper()),(i||"start"in e||"limit"in e||"page"in e)&&(e.page=null!=e.page?e.page:n.currentPage,e.start=void 0!==e.start?e.start:(e.page-1)*i,e.limit=null!=e.limit?e.limit:i,n.currentPage=e.page),e.addRecords=e.addRecords||!1,e.recordCreator||(t=n.getSession(),t&&(e.recordCreator=t.recordCreator)),Ext.data.ProxyStore.prototype.load.call(this,e)},onProxyLoad:function(e){var t=this,n=e.getResultSet(),i=e.getRecords(),r=e.wasSuccessful();t.isDestroyed||(n&&(t.totalCount=n.getTotal()),r?(i=t.processAssociation(i),t.loadRecords(i,e.getAddRecords()?{addRecords:!0}:void 0)):t.loading=!1,t.hasListeners.load&&t.fireEvent("load",t,i,r,e),t.callObservers("AfterLoad",[i,r,e]))},getUnfiltered:function(){var e=this.getData();return e.getSource()||e},getNewRecords:function(){return this.getUnfiltered().createFiltered(this.filterNew).getRange()},getUpdatedRecords:function(){return this.getUnfiltered().createFiltered(this.filterUpdated).getRange()},loadData:function(e,t){var n,i=this,r=e.length,o=[];for(n=0;r>n;n++)o.push(i.createModel(e[n]));o=i.processAssociation(o),i.loadRecords(o,t?i.addRecordsOptions:void 0)},loadRawData:function(e,t){var n=this,i=n.getSession(),r=n.getProxy().getReader().read(e,i?{recordCreator:i.recordCreator}:void 0),o=r.getRecords(),a=r.getSuccess();return a&&(n.totalCount=r.getTotal(),n.loadRecords(o,t?n.addRecordsOptions:void 0)),a},loadRecords:function(e,t){var n,i,r,o=this,a=e.length,s=o.getData();for(t&&(n=t.addRecords),o.getRemoteSort()||o.getSortOnLoad()||(r=!0,s.setAutoSort(!1)),n||o.clearData(!0),o.loading=!1,o.ignoreCollectionAdd=!0,o.callObservers("BeforePopulate"),s.add(e),o.ignoreCollectionAdd=!1,r&&s.setAutoSort(!0),i=0;a>i;i++)e[i].join(o);++o.loadCount,o.complete=!0,o.fireEvent("datachanged",o),o.fireEvent("refresh",o),o.callObservers("AfterPopulate")},loadPage:function(e,t){var n=this,i=n.getPageSize();n.currentPage=e,t=Ext.apply({page:e,start:(e-1)*i,limit:i,addRecords:!n.getClearOnPageLoad()},t),n.read(t)},nextPage:function(e){this.loadPage(this.currentPage+1,e)},previousPage:function(e){this.loadPage(this.currentPage-1,e)},clearData:function(e){var t,n,i,r,o=this,a=o.removed,s=o.getData(),l=o.getClearRemovedOnLoad(),d=a&&e&&!l;if(s=s.getSource()||s){for(t=s.items,i=0,r=t.length;r>i;++i)n=t[i],d&&Ext.Array.contains(a,n)||n.unjoin(o);o.ignoreCollectionRemove=!0,o.callObservers("BeforeClear"),s.removeAll(),o.ignoreCollectionRemove=!1,o.callObservers("AfterClear")}!a||e&&!l||(a.length=0)},onIdChanged:function(e,t,n){this.getData().updateKey(e,t),this.fireEvent("idchanged",this,e,t,n)},commitChanges:function(){var e=this,t=e.getModifiedRecords(),n=t.length,i=0;for(Ext.suspendLayouts(),e.beginUpdate();n>i;i++)t[i].commit();e.cleanRemoved(),e.endUpdate(),Ext.resumeLayouts(!0)},filterNewOnly:function(e){return e.phantom===!0},filterRejects:function(e){return e.phantom||e.dirty},getRejectRecords:function(){return this.getData().createFiltered(this.filterRejects).getRange()},rejectChanges:function(){var e,t,n,i,r,o,a=this,s=a.getRejectRecords(),l=s.length;for(Ext.suspendLayouts(),a.beginUpdate(),e=0;l>e;e++)t=s[e],t.phantom?(n=n||[],n.push(t)):t.reject();if(n)for(a.remove(n),e=0,l=n.length;l>e;++e)n[e].reject();if(s=a.removed){for(l=s.length,i=!a.getRemoteSort()&&a.isSorted(),i&&(r=a.getData(),o=r.getAutoSort(),r.setAutoSort(!1)),e=l-1;e>=0;e--)t=s[e],t.reject(),i||a.insert(t.removedFrom||0,t);i&&(r.setAutoSort(o),a.add(s)),s.length=0}a.endUpdate(),Ext.resumeLayouts(!0)},onDestroy:function(){var e=this,t=e.loadTask,n=e.getData(),i=n.getSource();Ext.data.ProxyStore.prototype.onDestroy.call(this),e.setSession(null),e.observers=null,t&&(t.cancel(),e.loadTask=null),e.clearData(),n.destroy(),i&&i.destroy(),e.setData(null)},privates:{onBeforeLoad:function(e){this.callObservers("BeforeLoad",[e])},onRemoteFilterSet:function(e,t){e&&this.getData().setFilters(t?null:e),Ext.data.ProxyStore.prototype.onRemoteFilterSet.call(this,e,t)},onRemoteSortSet:function(e,t){var n=this.getData();e&&n.setSorters(t?null:e),n.setAutoGroup(!t),Ext.data.ProxyStore.prototype.onRemoteSortSet.call(this,e,t)},isMoving:function(e,t){var n,i,r=this.moveMap,o=0;if(r)if(e)if(Ext.isArray(e))for(i=0,n=e.length;n>i;++i)o+=r[e[i].id]?1:0;else r[e.id]&&++o;else o=t?r:this.moveMapCount;return o},setMoving:function(e,t){var n,i,r=this,o=r.moveMap||(r.moveMap={}),a=e.length;for(n=0;a>n;++n)i=e[n].id,t?o[i]?++o[i]:(o[i]=1,++r.moveMapCount):0===--o[i]&&(delete o[i],--r.moveMapCount);0===r.moveMapCount&&(r.moveMap=null)},processAssociation:function(e){var t=this,n=t.getAssociatedEntity();return n&&(e=t.getRole().processLoad(t,n,e,t.getSession())),e}}},1,0,0,0,["store.store"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"Store"],0),Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:void 0,successProperty:void 0},createFieldAccessor:function(e){var t,n=e.mapping,i=e.hasMapping()?n:e.ordinal;return e.mapping=i,t=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments),e.mapping=n,t},getModelData:function(){return{}}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0),Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(e,t){if(this.expandData){for(var n=[],i=0,r=e.length;r>i;i++)n[n.length]=[e[i]];e=n}Ext.data.Store.prototype.loadData.call(this,e,t)}},0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore",Ext.data,"SimpleStore"],0),Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:!0,register:function(){for(var e,t=0;e=arguments[t];t++)this.add(e)},unregister:function(){for(var e,t=0;e=arguments[t];t++)this.remove(this.lookup(e))},lookup:function(e){if(Ext.isArray(e)){var t,n,i=["field1"],r=!Ext.isArray(e[0]),o=e;if(r)for(o=[],t=0,n=e.length;n>t;++t)o.push([e[t]]);else for(t=2,n=e[0].length;n>=t;++t)i.push("field"+t);return new Ext.data.ArrayStore({data:o,fields:i,autoDestroy:!0,autoCreated:!0,expanded:r})}return Ext.isString(e)?this.get(e):Ext.Factory.store(e)},getKey:function(e){return e.storeId}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(e,t){var n;if(Ext.isObject(e))t=e;else{if(Ext.data.StoreManager.containsKey(e))return Ext.data.StoreManager.lookup(e);t.storeId=e}return n=t instanceof Ext.data.Store?t:new Ext.data.Store(t),Ext.data.StoreManager.register(n),n},Ext.getStore=function(e){return Ext.data.StoreManager.lookup(e)};var e=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:!1});e.isEmptyStore=!0}),Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:!0,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var e=this;e.callParent(),e.monitor(Ext.data.AbstractStore)},match:function(e,t){var n=!1,i=e.alias;return"*"===t?n=!0:this.idMatchRe.test(t)?n=e.getStoreId()===t.substring(1):i&&(n=Ext.Array.indexOf(i,this.prefix+t)>-1),n}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0),Ext.cmd.derive("Ext.app.route.Queue",Ext.Base,{queue:null,token:null,constructor:function(e){Ext.apply(this,e),this.queue=new Ext.util.MixedCollection},queueAction:function(e,t){this.queue.add({route:e,args:t})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var e,t=this.queue,n=t.removeAt(0);n&&(e=n&&n.route,e.execute(this.token,n.args,this.onActionExecute,this))},onActionExecute:function(e){e?this.clearQueue():this.runQueue()}},1,0,0,0,0,0,[Ext.app.route,"Queue"],0),Ext.cmd.derive("Ext.app.route.Route",Ext.Base,{action:null,conditions:null,controller:null,allowInactive:!1,url:null,before:null,caseInsensitive:!1,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(e){var t,n=this;Ext.apply(n,e,{conditions:{}}),t=n.url,n.paramMatchingRegex=RegExp(/:([0-9A-Za-z\_]*)/g),n.paramsInMatchString=t.match(n.paramMatchingRegex)||[],n.matcherRegex=n.createMatcherRegex(t)},recognize:function(e){var t,n,i=this,r=i.controller;return(i.allowInactive||r.isActive())&&i.recognizes(e)?(t=i.matchesFor(e),
n=e.match(i.matcherRegex),n.shift(),Ext.applyIf(t,{controller:r,action:i.action,historyUrl:e,args:n})):!1},recognizes:function(e){return this.matcherRegex.test(e)},execute:function(e,t,n,i){var r=t.args||[],o=this.before,a=this.controller,s=this.createCallback(t,n,i);o?(r.push(s),Ext.isString(o)&&(o=this.before=a[o]),o&&o.apply(a,r)):s.resume()},matchesFor:function(e){var t={},n=this.paramsInMatchString,i=e.match(this.matcherRegex),r=0,o=n.length;for(i.shift();o>r;r++)t[n[r].replace(":","")]=i[r];return t},createMatcherRegex:function(e){for(var t,n,i,r=this.paramsInMatchString,o=this.conditions,a=0,s=r.length,l=Ext.util.Format.format,d=this.caseInsensitive?"i":"";s>a;a++)t=r[a],n=o[t],i=l("{0}",n||"([%a-zA-Z0-9\\-\\_\\s,]+)"),e=e.replace(RegExp(t),i);return RegExp("^"+e+"$",d)},createCallback:function(e,t,n){var i=this;return n=n||i,{resume:function(){var r,o=i.controller,a=i.action;Ext.isString(a)&&(a=o[a]),e=e&&e.args?e.args:[],r=e.pop(),r&&!Ext.isObject(r)&&e.push(r),a&&(i.action=a,a.apply(o,e)),t&&t.call(n)},stop:function(e){t&&t.call(n,e)}}}},1,0,0,0,0,0,[Ext.app.route,"Route"],0),Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:!0,alternateClassName:"Ext.History",useTopWindow:!1,constructor:function(){var e=this;e.hiddenField=null,e.ready=!1,e.currentToken=null,e.mixins.observable.constructor.call(e)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(e){try{this.win.location.hash=e,this.currentToken=e}catch(t){}},handleStateChange:function(e){this.currentToken=e,this.fireEvent("change",e)},startUp:function(){var e=this;e.currentToken=e.getHash(),Ext.supports.Hashchange?Ext.get(e.win).on("hashchange",e.onHashChange,e):Ext.TaskManager.start({fireIdleEvent:!1,run:e.onHashChange,interval:50,scope:e}),e.ready=!0,e.fireEvent("ready",e)},onHashChange:function(){var e=this,t=e.getHash();t!==e.hash&&(e.hash=t,e.handleStateChange(t))},init:function(e,t){var n=this;return n.ready?void Ext.callback(e,t,[n]):Ext.isReady?(n.win=n.useTopWindow?window.top:window,n.hash=n.getHash(),e&&n.on("ready",e,t,{single:!0}),void n.startUp()):void Ext.onInternalReady(function(){n.init(e,t)})},add:function(e,t){var n=this,i=!1;return(t===!1||n.getToken()!==e)&&(n.setHash(e),i=!0),i},back:function(){var e=this.useTopWindow?window.top:window;e.history.go(-1)},forward:function(){var e=this.useTopWindow?window.top:window;e.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0),Ext.cmd.derive("Ext.app.route.Router",Ext.Base,{singleton:!0,multipleToken:"|",queueRoutes:!0,constructor:function(){var e=Ext.util.History;e.ready||e.init(),e.on("change",this.onStateChange,this),this.clear()},onStateChange:function(e){for(var t,n,i,r,o,a=this,s=a.application,l=a.routes,d=l.length,u=a.queueRoutes,c=e.split(a.multipleToken),h=0,p=c.length;p>h;h++){for(e=c[h],o=!1,u&&(n=new Ext.app.route.Queue({token:e})),t=0;d>t;t++)i=l[t],r=i.recognize(e),r&&(o=!0,u?n.queueAction(i,r):i.execute(e,r));u&&n.runQueue(),!o&&s&&s.fireEvent("unmatchedroute",e)}},connect:function(e,t,n){var i={url:e,action:t,controller:n};Ext.isObject(t)&&Ext.merge(i,t),this.routes.push(new Ext.app.route.Route(i))},disconnectAll:function(e){var t,n,i=this.routes,r=i.length,o=[];for(t=0;r>t;++t)n=i[t],n.controller!==e&&o.push(n);this.routes=o},recognize:function(e){for(var t,n,i=this.routes||[],r=0,o=i.length;o>r;r++)if(t=i[r],n=t.recognize(e))return{route:t,args:n};return!1},draw:function(e){e.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,"Router"],0),Ext.cmd.derive("Ext.app.Controller",Ext.app.BaseController,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\.controller\./,createGetter:function(e,t){return function(){return this[e](t)}},getGetterName:function(e,t){var n,i="get",r=e.split("."),o=r.length;for(n=0;o>n;n++)i+=Ext.String.capitalize(r[n]);return i+=t},resolveNamespace:function(e,t){var n,i,r,o=Ext.app.Controller,a=o.controllerRegex;return n=Ext.getClassName(e),i=t.$namespace||t.namespace||Ext.app.getNamespace(n)||(r=a.exec(n))&&r[1]},processDependencies:function(e,t,n,i,r){if(r&&r.length){var o,a,s,l,d,u,c,h,p=this,f=p.strings[i];for(Ext.isArray(r)||(r=[r]),d=0,u=r.length;u>d;d++)l=r[d],o=p.getFullName(l,i,n),a=o.absoluteName,s=o.shortName,t.push(a),c=p.getGetterName(s,f.upper),e[c]=h=p.createGetter(f.getter,l),"controller"!==i&&(h["Ext.app.getter"]=!0)}},getFullName:function(e,t,n){var i,r,o=e;return(i=e.indexOf("@"))>0?(o=e.substring(0,i),r=e.substring(i+1)+"."+o):e.indexOf(".")>0&&(Ext.ClassManager.isCreated(e)||this.hasRegisteredPrefix(e))?r=e:n?(r=n+"."+t+"."+e,o=e):r=e,{absoluteName:r,shortName:o}},hasRegisteredPrefix:function(e){var t=Ext.ClassManager,n=t.getPrefix(e);return n&&n!==e}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:!0,moduleClassName:null},onClassExtended:function(e,t,n){var i=n.onBeforeCreated;n.onBeforeCreated=function(e,t){var n,r,o=Ext.app.Controller,a=[];r=e.prototype,n=o.resolveNamespace(e,t),n&&(r.$namespace=n),o.processDependencies(r,a,n,"model",t.models),o.processDependencies(r,a,n,"view",t.views),o.processDependencies(r,a,n,"store",t.stores),o.processDependencies(r,a,n,"controller",t.controllers),Ext.require(a,Ext.Function.pass(i,arguments,this))}},constructor:function(){this.initAutoGetters(),Ext.app.BaseController.prototype.constructor.apply(this,arguments)},normalizeRefs:function(e){var t=this,n=[];return e&&(Ext.isObject(e)?Ext.Object.each(e,function(e,t){Ext.isString(t)&&(t={selector:t}),t.ref=e,n.push(t)}):Ext.isArray(e)&&(n=Ext.Array.merge(n,e))),e=t.refs,e&&(t.refs=null,e=t.normalizeRefs(e),e&&(n=Ext.Array.merge(n,e))),n},getRefMap:function(){var e,t,n,i,r=this,o=r._refMap;if(!o&&(e=r.getRefs(),o=r._refMap={},e))for(i=0,n=e.length;n>i;i++)t=e[i],o[t.ref]=t.selector;return o},applyRefs:function(e){return this.normalizeRefs(Ext.clone(e))},updateRefs:function(e){e&&this.ref(e)},initAutoGetters:function(){var e,t,n=this.self.prototype;for(e in n)t=n[e],t&&t["Ext.app.getter"]&&t.call(this)},doInit:function(e){var t=this;t._initialized||(t.init(e),t._initialized=!0)},finishInit:function(e){var t,n,i,r=this,o=r.controllers;if(r._initialized&&o&&o.length)for(n=0,i=o.length;i>n;n++)t=r.getController(o[n]),t.finishInit(e)},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(!0)},deactivate:function(){this.setActive(!1)},isActive:function(){return this.getActive()},ref:function(e){var t,n,i,r=this,o=0,a=e.length;for(e=Ext.Array.from(e),r.references=r.references||[];a>o;o++)t=e[o],n=t.ref,i="get"+Ext.String.capitalize(n),r[i]||(r[i]=Ext.Function.pass(r.getRef,[n,t],r)),r.references.push(n.toLowerCase())},addRef:function(e){this.ref(e)},getRef:function(e,t,n){var i=this,r=i.refCache||(i.refCache={}),o=r[e];return t=t||{},n=n||{},Ext.apply(t,n),t.forceCreate?Ext.ComponentManager.create(t,"component"):(o||(t.selector&&(r[e]=o=Ext.ComponentQuery.query(t.selector)[0]),!o&&t.autoCreate&&(r[e]=o=Ext.ComponentManager.create(t,"component")),o&&o.on("beforedestroy",function(){r[e]=null})),o)},hasRef:function(e){var t=this.references;return t&&-1!==Ext.Array.indexOf(t,e.toLowerCase())},getController:function(e){var t=this.getApplication();return e===this.getId()?this:t&&t.getController(e)},getStore:function(e){var t,n;return t=-1===e.indexOf("@")?e:e.split("@")[0],n=Ext.StoreManager.get(t),n||(e=Ext.app.Controller.getFullName(e,"store",this.$namespace),e&&(n=Ext.create(e.absoluteName,{storeId:t}))),n},getModel:function(e){var t=Ext.app.Controller.getFullName(e,"model",this.$namespace),n=Ext.ClassManager.get(t.absoluteName);return n||(n=Ext.data.schema.Schema.lookupEntity(e)),n},getProfile:function(e){return e=Ext.app.Controller.getFullName(e,"profile",this.$namespace)},getView:function(e){var t=Ext.app.Controller.getFullName(e,"view",this.$namespace);return t&&Ext.ClassManager.get(t.absoluteName)},ensureId:function(){var e=this.getId();e||this.setId(this.getModuleClassName(this.$className,"controller"))},destroy:function(e,t){var n,i,r=this,o=r.application;if(!t&&o&&o.unregister(r),r.application=null,e){n=r.refCache;for(i in n)n.hasOwnProperty(i)&&Ext.destroy(n[i])}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,"Controller"],0),Ext.define("BP.overrides.app.Controller",{override:"Ext.app.Controller",doScriptRun:function(){var e,t,n=this;t=arguments[0],Ext.isFunction(t)&&(e=[].slice.call(arguments,1),setTimeout(function(){t.apply(n,e)},0))}}),Ext.cmd.derive("Ext.app.Application",Ext.app.Controller,{isApplication:!0,scope:void 0,namespaces:[],paths:null,appFolder:"app",config:{name:"",appProperty:"app",profiles:[],currentProfile:null,mainView:{$value:null,lazy:!0},defaultToken:null,glyphFontFamily:null},onClassExtended:function(e,t,n){var i,r,o,a,s,l=Ext.app.Controller,d=e.prototype,u=[];if(o=t.name||e.superclass.name,s=t.appFolder||e.superclass.appFolder,o&&(t.$namespace=o,Ext.app.addNamespaces(o)),t.namespaces&&Ext.app.addNamespaces(t.namespaces),t["paths processed"])delete t["paths processed"];else if(o&&s&&Ext.Loader.setPath(o,s),r=t.paths)for(a in r)r.hasOwnProperty(a)&&Ext.Loader.setPath(a,r[a]);l.processDependencies(d,u,o,"profile",t.profiles),d.getDependencies(e,t,u),u.length&&(i=n.onBeforeCreated,n.onBeforeCreated=function(){var e=Ext.Array.clone(arguments);Ext.require(u,function(){return i.apply(this,e)})})},getDependencies:Ext.emptyFn,constructor:function(){var e=this;Ext.app.route.Router.application=e,Ext.app.Controller.prototype.constructor.apply(this,arguments),e.doInit(e),e.initNamespace();var t=this.getProfiles();t&&t.length?Ext.require(t,this.onProfilesLoaded,this):this.onProfilesReady()},onProfilesReady:function(){var e=this;e.initControllers(),e.onBeforeLaunch(),e.finishInitControllers()},initNamespace:function(){var e,t=this,n=t.getAppProperty();e=Ext.namespace(t.getName()),e&&(e.getApplication=function(){return t},n&&(e[n]||(e[n]=t)))},initControllers:function(){var e=this,t=Ext.Array.from(e.controllers);e.controllers=new Ext.util.MixedCollection;for(var n=0,i=t.length;i>n;n++)e.getController(t[n])},finishInitControllers:function(){var e,t,n,i=this;for(e=i.controllers.getRange(),t=0,n=e.length;n>t;t++)e[t].finishInit(i)},launch:Ext.emptyFn,onBeforeLaunch:function(){var e,t,n,i,r,o=this,a=Ext.util.History,s=o.getDefaultToken(),l=o.getCurrentProfile();for(o.initMainView(),l&&l.launch(),o.launch.call(o.scope||o),o.launched=!0,o.fireEvent("launch",o),e=o.controllers.items,n=e.length,t=0;n>t;t++)i=e[t],i.onLaunch(o);a.ready||a.init(),r=a.getToken(),r?Ext.app.route.Router.onStateChange(r):s&&a.add(s)},getModuleClassName:function(e,t){return Ext.app.Controller.getFullName(e,t,this.getName()).absoluteName},initMainView:function(){var e,t=this,n=t.getCurrentProfile();n&&(e=n.getMainView()),e?t.setMainView(e):t.getMainView()},applyMainView:function(e){var t;return t=this.getView(e),t.create()},createController:function(e){return this.getController(e)},destroyController:function(e){"string"==typeof e&&(e=this.getController(e,!0)),Ext.destroy(e)},getController:function(e,t){var n,i,r,o,a,s,l=this,d=l.controllers;if(i=d.get(e),!i)for(s=d.items,o=0,r=s.length;r>o;++o)if(a=s[o],n=a.getModuleClassName(),n&&n===e){i=a;break}return i||t||(n=l.getModuleClassName(e,"controller"),i=Ext.create(n,{application:l,moduleClassName:e}),d.add(i),l._initialized&&i.doInit(l)),i},unregister:function(e){this.controllers.remove(e)},getApplication:function(){return this},destroy:function(e){var t=this,n=t.controllers,i=Ext.namespace(t.getName()),r=t.getAppProperty();Ext.destroy(t.viewport),n&&n.each(function(t){t.destroy(e,!0)}),t.controllers=null,Ext.app.Controller.prototype.destroy.call(this,e,!0),i&&i[r]===t&&delete i[r]},updateGlyphFontFamily:function(e){Ext.setGlyphFontFamily(e)},applyProfiles:function(e){var t=this;return Ext.Array.map(e,function(e){return t.getModuleClassName(e,"profile")})},onProfilesLoaded:function(){var e,t,n,i,r,o,a,s,l,d,u,c,h=this,p=h.getProfiles(),f=p.length,g=[];for(t=0;f>t;t++)g[t]=Ext.create(p[t],{application:h}),g[t].isActive()&&!e&&(e=g[t],n=e.getDependencies(),i=n.all,h.setCurrentProfile(e),o=n.controller,o.length&&(r=h.controllers=h.controllers||[],r.push.apply(r,o)),s=n.view,s.length&&(a=h.views=h.views||[],a.push.apply(a,s)),d=n.store,d.length&&(l=h.stores=h.stores||[],l.push.apply(l,d)),c=n.model,c.length&&(u=h.models=h.models||[],u.push.apply(u,c)));i?Ext.require(i,h.onProfilesReady,h):h.onProfilesReady()}},1,0,0,0,0,0,[Ext.app,"Application"],0),Ext.application=function(e){var t,n=function(e){Ext.onReady(function(){Ext.app.Application.instance=new e})},i=e.paths;if("string"==typeof e)Ext.require(e,function(){n(Ext.ClassManager.get(e))});else{if(e=Ext.apply({extend:"Ext.app.Application"},e),Ext.Loader.setPath(e.name,e.appFolder||"app"),i)for(t in i)i.hasOwnProperty(t)&&Ext.Loader.setPath(t,i[t]);e["paths processed"]=!0,Ext.define(e.name+".$application",e,function(){n(this)})}},Ext.define("Ext.overrides.app.Application",{override:"Ext.app.Application",autoCreateViewport:!1,config:{enableQuickTips:!0},applyMainView:function(e){var t,n,i=this.getView(e),r=i.prototype;return r.isViewport||(n=r.plugins,n=["viewport"].concat(n?Ext.Array.from(n,!0):[]),t={plugins:n}),i.create(t)},getDependencies:function(e,t,n){var i=Ext.app.Controller,r=e.prototype,o=t.$namespace,a=t.autoCreateViewport;a&&(a===!0?a="Viewport":n.push("Ext.plugin.Viewport"),i.processDependencies(r,n,o,"view",a))},onBeforeLaunch:function(){var e=this,t=e.autoCreateViewport;e.getEnableQuickTips()&&e.initQuickTips(),t&&e.initViewport(),arguments.callee.$previous.apply(this,arguments)},getViewportName:function(){var e=null,t=this.autoCreateViewport;return t&&(e=t===!0?"Viewport":t),e},initViewport:function(){this.setMainView(this.getViewportName())},initQuickTips:function(){Ext.tip.QuickTipManager.init()}}),Ext.cmd.derive("Ext.app.domain.View",Ext.app.EventDomain,{isInstance:!0,constructor:function(e){Ext.app.EventDomain.prototype.constructor.apply(this,arguments),this.controller=e,this.monitoredClasses=[Ext.Component]},match:function(e,t,n){var i=!1;return i="#"===t?n===e.getController():e.is(t)},destroy:function(){this.controller=null,Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,"View"],0),Ext.cmd.derive("Ext.app.ViewController",Ext.app.BaseController,{isViewController:!0,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},constructor:function(){this.compDomain=new Ext.app.domain.View(this),Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var e=this,t=e.compDomain;t&&(t.unlisten(e),t.destroy()),e.compDomain=e.view=null,Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var e,t=this.getView();t&&(e=this.getCloseViewAction(),t[e]())},control:function(e,t){var n=e;Ext.isString(e)&&(n={},n[e]=t),this.compDomain.listen(n,this)},listen:function(e,t){var n=e.component;n&&(e=Ext.apply({},e),delete e.component,this.control(n)),this.callParent([e,t])},getReferences:function(){return this.view.getReferences()},getView:function(){return this.view},lookupReference:function(e){var t=this.view;return t&&t.lookupReference(e)},getSession:function(){var e=this.view;return e&&e.lookupSession()},getViewModel:function(){var e=this.view;return e&&e.lookupViewModel()},getStore:function(e){var t=this.getViewModel();return t?t.getStore(e):null},fireViewEvent:function(){var e=this.view,t=!1;return e&&(t=e.fireEvent.apply(e,arguments)),t},privates:{view:null,ensureId:function(){var e=this.getId();e||this.setId(Ext.id(null,"controller-"))},attachReference:function(e){var t=this.view;t&&t.attachReference(e)},clearReference:function(e){var t=this.view;t&&t.clearReference(e)},clearReferences:function(){var e=this.view;e&&e.clearReferences()},setView:function(e){this.view=e,this.beforeInit.$nullFn||this.beforeInit(e)}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,"ViewController"],0),Ext.cmd.derive("BP.config",Ext.Base,{singleton:!0},0,0,0,0,0,0,[BP,"config"],function(){this.destroy(),delete BP.config,BP.config=Ext.emptyFn}),Ext.cmd.derive("BP.translate",Ext.Base,{singleton:!0},0,0,0,0,0,0,[BP,"translate"],function(){this.destroy(),delete BP.translate,BP.translate=Ext.emptyFn}),Ext.cmd.derive("BP.localSettings",Ext.Base,{singleton:!0},0,0,0,0,0,0,[BP,"localSettings"],function(){this.destroy(),delete BP.localSettings,BP.localSettings=Ext.emptyFn}),Ext.cmd.derive("BP.ux.mediator.Mediator",Ext.Base,{singleton:!0,constructor:function(e){this.mixins.observable.constructor.call(this,e)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[BP.ux.mediator,"Mediator"],0),Ext.cmd.derive("BP.ux.mediator.mixin.Mediator",Ext.Mixin,{mixinConfig:{id:"mediator",before:{init:"doInit"}},doInit:function(){var e=this;Ext.isObject(e.subscribe)&&Ext.Object.each(e.subscribe,e.addSubscription,e)},publish:function(){return BP.ux.mediator.Mediator.fireEvent.apply(BP.ux.mediator.Mediator,arguments)},addSubscription:function(e,t){var n=this;Ext.isString(t)&&(t=Ext.isFunction(n[t])?n[t]:n.warnFn),Ext.isString(e)||(e=""+e),n.addManagedListener(BP.ux.mediator.Mediator,e,t,n)},warnFn:function(){}},0,0,0,0,0,0,[BP.ux.mediator.mixin,"Mediator"],0),Ext.define("BP.overrides.app.ViewController",{override:"Ext.app.ViewController",mixins:[BP.ux.mediator.mixin.Mediator],constructor:function(){this.cfg=BP.config,this.l10n=BP.translate,this.localSettings=BP.localSettings,(arguments.callee.$previous||Ext.app.BaseController.prototype.constructor).apply(this,arguments)},init:function(){this.listen({component:{"#":{beforerender:"onTranslate"}}}),this.listen({component:{"#":{beforerender:"onTheme"}}})},onTranslate:function(e){var t,n,i=this,r=e.getViewModel();r&&(t=r.getData(),n=t.translate||{},n=Object.getPrototypeOf(n),Ext.iterate(n,function(e,t){t=i.l10n(t),e="translate."+e,r.set(e,t)}))},onTranslateAll:function(){var e=Ext.ComponentQuery.query("[controller]");Ext.each(e,function(e){e.getController().onTranslate(e)})},onTheme:function(e){var t=e.getTheme();t&&e.setTheme(t)},onThemeAll:function(){var e=Ext.ComponentQuery.query("[controller]");Ext.each(e,function(e){e.getController().onTheme(e)})}}),Ext.cmd.derive("Ext.util.Bag",Ext.Base,{isBag:!0,constructor:function(){this.items=[],this.map={}},generation:0,length:0,add:function(e){var t,n=this,i=n.getKey(e),r=n.map,o=n.items,a=r[i];return void 0===a?(o.push(e),r[i]=n.length++,t=e):(t=o[a],o[a]=e),++n.generation,t},clear:function(){var e=this,t=e.generation||e.length,n=t?e.items:[];return t&&(e.items=[],e.length=0,e.map={},++e.generation),n},clone:function(){var e=this,t=new e.self,n=e.length;return n&&(Ext.apply(t.map,e.map),t.items=e.items.slice(),t.length=e.length),t},contains:function(e){var t,n=!1,i=this.map;return null!=e&&(t=this.getKey(e),t in i&&(n=this.items[i[t]]===e)),n},containsKey:function(e){return e in this.map},destroy:function(){this.items=this.map=null,this.callParent()},getAt:function(e){var t=null;return e<this.length&&(t=this.items[e]),t},getByKey:function(e){var t=this.map,n=null;return e in t&&(n=this.items[t[e]]),n},getCount:function(){return this.length},getKey:function(e){return e.id||e.getId()},remove:function(e){var t,n,i,r=this,o=r.map,a=r.items,s=null;return r.length&&(t=o[n=r.getKey(e)],void 0!==t&&(delete o[n],s=a[t],i=a.pop(),t<--r.length&&(a[t]=i,o[r.getKey(i)]=t),++r.generation)),s},removeByKey:function(e){var t=this.getByKey(e);return t&&this.remove(t),t||null},sort:function(e){var t,n=this,i=n.items,r=i.length;if(r){for(Ext.Array.sort(i,e),n.map={};r-->0;)t=i[r],n.map[n.getKey(t)]=r;++n.generation}}},1,0,0,0,0,0,[Ext.util,"Bag"],0),Ext.cmd.derive("Ext.util.Scheduler",Ext.Base,{busyCounter:0,lastBusyCounter:0,destroyed:!1,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},constructor:function(e){this.mixins.observable.constructor.call(this,e),this.items=new Ext.util.Bag},destroy:function(){var e=this,t=e.timer;t&&(window.clearTimeout(t),e.timer=null),e.destroyed=!0,e.items.destroy(),e.items=e.orderedItems=null,e.destroy=Ext.emptyFn},add:function(e){var t=this,n=t.items;n===t.firing&&(t.items=n=n.clone()),e.id=e.id||++t.nextId,e.scheduler=t,n.add(e),t.sortMap||(t.orderedItems=null)},remove:function(e){var t=this,n=t.items;t.destroyed||(n===t.firing&&(t.items=n=n.clone()),e.scheduled&&(t.unscheduleItem(e),e.scheduled=!1),n.remove(e),t.orderedItems=null)},sort:function(){var e,t,n=this,i=n.items,r={},o=n.getPreSort();for(n.orderedItems=[],n.sortMap=r,o&&i.sort(o),i=i.items,e=0;e<i.length;++e)t=i[e],r[t.id]||n.sortItem(t);n.sortMap=null},sortItem:function(e){var t,n=this,i=n.sortMap,r=n.orderedItems;return e.scheduler||n.add(e),t=e.id,t in i||(i[t]=0,e.sort.$nullFn||e.sort(),i[t]=1,e.order=n.orderedItems.length,r.push(e)),n},sortItems:function(e){var t=this,n=t.sortItem;return e&&(e instanceof Array?Ext.each(e,n,t):Ext.Object.eachValue(e,n,t)),t},applyPreSort:function(e){if("function"==typeof e)return e;var t,n,i,r=e.split(","),o=[],a=r.length;for(n=0;a>n;++n)o[n]=1,i=r[n],"-"===(t=i.charAt(0))?o[n]=-1:"+"!==t&&(t=0),t&&(r[n]=i.substring(1));return function(e,t){var n,i,s,l,d=0;for(n=0;!d&&a>n;++n)i=r[n],s=e[i],l=t[i],d=o[n]*(l>s?-1:s>l?1:0);return d}},notify:function(){var e,t,n,i,r,o,a=this,s=a.timer,l=a.getCycleLimit(),d=Ext.GlobalEvents;for(s&&(window.clearTimeout(s),a.timer=null);a.scheduledCount;){if(!l){a.firing=null;break}if(--l,o||(o=!0,d.hasListeners.beforebindnotify&&d.fireEvent("beforebindnotify",a)),++a.passes,(r=a.orderedItems)||(a.sort(),r=a.orderedItems),i=r.length)for(a.firing=a.items,t=0;i>t&&(n=r[t],!n.scheduled||(n.scheduled=!1,--a.scheduledCount,a.notifyIndex=t,n.react(),a.scheduledCount));++t);}a.firing=null,a.notifyIndex=-1,(e=a.busyCounter)!==a.lastBusyCounter&&((a.lastBusyCounter=e)||a.fireEvent("idle",a))},onTick:function(){this.timer=null,this.notify()},scheduleItem:function(){var e=this;++e.scheduledCount,e.timer||e.firing||e.scheduleTick()},scheduleTick:function(){var e=this;e.destroyed||e.timer||(e.timer=Ext.Function.defer(e.onTick,e.getTickDelay(),e))},unscheduleItem:function(){this.scheduledCount&&--this.scheduledCount},adjustBusy:function(e){var t=this,n=t.busyCounter+e;t.busyCounter=n,n?t.lastBusyCounter||(t.lastBusyCounter=n,t.fireEvent("busy",t)):t.lastBusyCounter&&!t.timer&&t.scheduleTick()},isBusy:function(){return!this.isIdle()},isIdle:function(){return!(this.busyCounter+this.lastBusyCounter)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Scheduler"],0),Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{pauseOnException:!1},current:-1,total:0,running:!1,complete:!1,exception:!1,constructor:function(e){var t=this;t.mixins.observable.constructor.call(t,e),t.operations=[],t.exceptions=[]},add:function(e){var t,n,i=this;if(Ext.isArray(e))for(t=0,n=e.length;n>t;++t)i.add(e[t]);else i.total++,e.setBatch(i),i.operations.push(e);return i},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(e,t){var n=e.order-t.order;if(n)return n;var i,r=e.entityType,o=t.entityType;return r&&o?((i=r.rank)||(r.schema.rankEntities(),i=r.rank),(i-o.rank)*e.foreignKeyDirection):0},start:function(e){var t=this;return!t.operations.length||t.running?t:(t.exceptions.length=0,t.exception=!1,t.running=!0,t.runOperation(Ext.isDefined(e)?e:t.current+1))},retry:function(){return this.start(this.current)},runNextOperation:function(){var e=this;return e.running&&e.runOperation(e.current+1),e},pause:function(){return this.running=!1,this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var e=null,t=this.current;return-1===t||this.complete||(e=this.operations[t]),e},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(e){var t=this,n=t.operations,i=n[e];return void 0===i?(t.running=!1,t.complete=!0,t.fireEvent("complete",t,n[n.length-1])):(t.current=e,i.setInternalCallback(t.onOperationComplete),i.setInternalScope(t),i.execute()),t},onOperationComplete:function(e){var t=this,n=e.hasException();n&&(t.exception=!0,t.exceptions.push(e),t.fireEvent("exception",t,e)),n&&t.getPauseOnException()?t.pause():(t.fireEvent("operationcomplete",t,e),t.runNextOperation())}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0),Ext.cmd.derive("Ext.data.matrix.Slice",Ext.Base,{stub:null,constructor:function(e,t){this.id=t,this.side=e,this.members={}},attach:function(e){var t=this;t.store=e,e.matrix=t,e.on("load",t.onStoreLoad,t,{single:!0})},changeId:function(e){var t,n,i,r=this,o=r.id,a=r.side,s=a.slices,l=s[o],d=l.members,u=a.index,c=a.inverse.slices;r.id=e,s[e]=l,delete s[o];for(n in d)t=d[n],t[u]=e,i=c[n].members,i[e]=i[o],delete i[o]},onStoreLoad:function(e){this.update(e.getData().items,0)},update:function(e,t){var n,i,r,o,a,s,l,d=this,u=Ext.data.matrix.Slice,c=d.side,h=c.index,p=e.length,f=d.id,g=d.members,m=c.inverse,x=m.slices;for(r=0;p>r;++r)i=l=null,o=e[r],a=o.isEntity?(l=o).id:o,n=g[a],0>t&&n&&1===n[2]?(delete g[a],s=x[a],s&&delete s.members[f],i=1):n?t!==n[2]&&0!==t&&(n[2]=t,s=x[a],i=1):(n=[a,a,t],n[h]=f,g[a]=n,s=x[a],s||(x[a]=s=new u(m,a)),s.members[f]=n,i=1),i&&(d.notify&&d.notify.call(d.scope,d,a,t),s&&s.notify&&s.notify.call(s.scope,s,f,t))},destroy:function(){var e=this,t=e.store;t&&(t.matrix=null,t.un("load",e.onStoreLoad,e)),e.notify=e.scope=e.store=e.side=e.members=null,e.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Slice"],0),Ext.cmd.derive("Ext.data.matrix.Side",Ext.Base,{constructor:function(e,t,n){var i=this;i.matrix=e,i.index=t,i.role=n,i.slices={}},get:function(e,t){var n=this,i=n.slices,r=i[e]||(i[e]=new Ext.data.matrix.Slice(n,e));return t||0===t?r.members[t]:r},update:function(e,t,n){var i=this.get(e);return i.update(t,n)},destroy:function(){var e,t=this,n=t.slices;for(e in n)n[e].destroy();t.inverse=t.matrix=t.role=t.slices=null,t.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Side"],0),Ext.cmd.derive("Ext.data.matrix.Matrix",Ext.Base,{constructor:function(e,t){var n=this,i=t.isManyToMany?t:e.getSchema().getAssociation(t),r=Ext.data.matrix.Side,o=new r(n,0,i.left),a=new r(n,1,i.right);n.association=i,n.session=e,n.left=o,n.right=a,o.inverse=a,a.inverse=o},update:function(e,t,n){return this.left.update(e,t,n)},destroy:function(){var e=this;e.left.destroy(),e.right.destroy(),e.association=e.session=e.left=e.right=null,e.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Matrix"],0),Ext.cmd.derive("Ext.data.session.ChangesVisitor",Ext.Base,{constructor:function(e){var t,n=this;n.session=e,t=e.getCrudProperties(),n.result=null,n.writerOptions={},n.createKey=t.create,n.readKey=t.read,n.updateKey=t.update,n.dropKey=t.drop},onDirtyRecord:function(e){var t,n,i,r,o=this,a=o.crud,s=e.phantom,l=e.dropped,d=e.$className,u=s||l?"allDataOptions":"partialDataOptions",c=o.writerOptions,h=e.entityName;return s&&l?!1:(a=s?o.createKey:l?o.dropKey:o.updateKey,c=c[d]||(c[d]={}),l&&((t=c.drop)||(c.drop=t={all:e.getProxy().getWriter().getWriteAllFields()}),t.all||(i=e.id)),i||((t=c[u])||(t=e.getProxy().getWriter().getConfig(u),c[u]=t=Ext.Object.chain(t),o.setupOptions(t)),i=e.getData(t)),r=o.result||(o.result={}),n=r[h]||(r[h]={}),n=n[a]||(n[a]=[]),void n.push(i))},setupOptions:function(e){e.serialize=!0},onMatrixChange:function(e,t,n,i){var r,o,a=this,s=e.left.type,l=e.right.role,d=0>i?a.dropKey:a.createKey;o=a.result||(a.result={}),r=o[s]||(o[s]={}),r=r[l]||(r[l]={}),r=r[d]||(r[d]={}),r=r[t]||(r[t]=[]),r.push(n)}},1,0,0,0,0,0,[Ext.data.session,"ChangesVisitor"],0),Ext.cmd.derive("Ext.data.session.ChildChangesVisitor",Ext.data.session.ChangesVisitor,{constructor:function(){this.seen={},Ext.data.session.ChangesVisitor.prototype.constructor.apply(this,arguments)},setupOptions:function(e){Ext.data.session.ChangesVisitor.prototype.setupOptions.call(this,e),e.serialize=!1},onDirtyRecord:function(e){Ext.data.session.ChangesVisitor.prototype.onDirtyRecord.apply(this,arguments)!==!1&&(e.$source||!e.dropped&&e.phantom||this.readEntity(e))},readEntity:function(e){var t,n,i=this,r=i.readKey,o=e.entityName,a=e.id,s=i.seen,l=o+a;s[l]||(s[l]=!0,t=i.result||(i.result={}),n=t[o]||(t[o]={}),n=n[r]||(n[r]=[]),n.push(Ext.apply({},e.modified,e.data)))}},1,0,0,0,0,0,[Ext.data.session,"ChildChangesVisitor"],0),Ext.cmd.derive("Ext.data.session.BatchVisitor",Ext.Base,{map:null,constructor:function(e){this.batch=e},getBatch:function(e){var t,n,i,r,o,a=this.map,s=this.batch;if(a){s||(s=new Ext.data.Batch);for(i in a){t=a[i],n=t.entity,o=n.getProxy(),delete t.entity;for(r in t)r=o.createOperation(r,{records:t[r]}),r.entityType=n,s.add(r)}}return s&&e!==!1&&s.sort(),s},onDirtyRecord:function(e){var t=this,n=e.phantom?"create":e.dropped?"destroy":"update",i=e.$className,r=t.map||(t.map={}),o=r[i]||(r[i]={entity:e.self});o=o[n]||(o[n]=[]),o.push(e)}},1,0,0,0,0,0,[Ext.data.session,"BatchVisitor"],0),Ext.cmd.derive("Ext.data.Session",Ext.Base,{isSession:!0,config:{schema:"default",parent:null,autoDestroy:!0,crudProperties:{create:"C",read:"R",update:"U",drop:"D"}},destroyed:!1,crudOperations:[{type:"R",entityMethod:"readEntities"},{type:"C",entityMethod:"createEntities"},{type:"U",entityMethod:"updateEntities"},{type:"D",entityMethod:"dropEntities"}],crudKeys:{C:1,R:1,U:1,D:1},constructor:function(e){var t=this;t.data={},t.matrices={},t.identifierCache={},t.recordCreator=t.recordCreator.bind(t),t.initConfig(e)},destroy:function(){var e,t,n,i,r=this,o=r.matrices,a=r.data;for(i in o)o[i].destroy();for(e in a){t=a[e];for(i in t)n=t[i].record,n&&(n.$source=n.session=null)}r.recordCreator=r.matrices=r.data=null,r.setSchema(null),r.callParent()},adopt:function(e){var t,n=this,i=e.associations;if(e.session!==n&&(e.session=n,n.add(e),i))for(t in i)i[t].adoptAssociated(e,n)},commit:function(){var e,t,n,i,r=this.data;for(e in r){t=r[e];for(n in t)i=t[n].record,i&&i.commit()}},createRecord:function(e,t){var n,i=e.$isClass?e:this.getSchema().getEntity(e),r=this.getParent();return t&&r&&(n=i.getIdFromData(t),r.peekRecord(i,n)&&Ext.Error.raise("A parent session already contains an entry for "+i.entityName+": "+n)),new i(t,this)},getChanges:function(){var e=new Ext.data.session.ChangesVisitor(this);return this.visitData(e),e.result},getChangesForParent:function(){var e=new Ext.data.session.ChildChangesVisitor(this);return this.visitData(e),e.result},getRecord:function(e,t,n){var i,r,o,a=this,s=a.peekRecord(e,t);return s||(i=e.$isClass?e:a.getSchema().getEntity(e),r=a.getParent(),r&&(o=r.peekRecord(i,t)),o&&!o.isLoading()?(s=o.copy(void 0,a),s.$source=o):(s=i.createWithId(t,null,a),n!==!1&&s.load(Ext.isObject(n)?n:void 0))),s},getSaveBatch:function(e){var t=new Ext.data.session.BatchVisitor;return this.visitData(t),t.getBatch(e)},onInvalidAssociationEntity:function(e,t){Ext.Error.raise("Unable to read association entity: "+this.getModelIdentifier(e,t))},onInvalidEntityCreate:function(e,t){Ext.Error.raise("Cannot create, record already not exists: "+this.getModelIdentifier(e,t))},onInvalidEntityDrop:function(e,t){Ext.Error.raise("Cannot drop, record does not exist: "+this.getModelIdentifier(e,t))},onInvalidEntityRead:function(e,t){Ext.Error.raise("Cannot read, record already not exists: "+this.getModelIdentifier(e,t))},onInvalidEntityUpdate:function(e,t,n){n?Ext.Error.raise("Cannot update, record dropped: "+this.getModelIdentifier(e,t)):Ext.Error.raise("Cannot update, record does not exist: "+this.getModelIdentifier(e,t));
},peekRecord:function(e,t,n){var i,r,o=e.$isClass?e:this.getSchema().getEntity(e),a=o.entityName,s=this.data[a];return s=s&&s[t],i=s&&s.record,!i&&n&&(r=this.getParent(),i=r&&r.peekRecord(e,t,n)),i||null},save:function(){var e=new Ext.data.session.ChildChangesVisitor(this);this.visitData(e),this.getParent().update(e.result)},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(e){var t,n,i,r,o,a,s,l,d,u,c=this,h=c.getSchema(),p=c.crudOperations,f=p.length,g=c.crudKeys;c.getSchema().processKeyChecks(!0);for(t in e)for(n=h.getEntity(t),i=e[t],r=0;f>r;++r)o=p[r],a=i[o.type],a&&c[o.entityMethod](n,a);for(t in e){n=h.getEntity(t),s=n.associations,i=e[t];for(l in i)g[l]||(d=s[l],u=i[d.role],d.processUpdate(c,u))}},privates:{add:function(e){var t,n,i=this,r=e.id,o=i.getEntry(e.self,r);o.record=e,i.registerReferences(e),t=e.associations;for(n in t)t[n].checkMembership(i,e)},afterErase:function(e){this.evict(e)},applySchema:function(e){return Ext.data.schema.Schema.get(e)},createEntities:function(e,t){var n,i,r,o,a=t.length;for(n=0;a>n;++n)i=t[n],o=e.getIdFromData(i),r=this.peekRecord(e,o),r?this.onInvalidEntityCreate(e,o):r=this.createRecord(e,i),r.phantom=!0},dropEntities:function(e,t){var n,i,r,o,a=t.length;for(a&&(o=Ext.isObject(t[0])),n=0;a>n;++n)r=t[n],o&&(r=e.getIdFromData(r)),i=this.peekRecord(e,r),i?i.drop():this.onInvalidEntityDrop(e,r)},evict:function(e){var t=e.entityName,n=this.data[t],i=e.id;n&&delete n[i]},getEntityList:function(e,t){var n,i,r,o,a=t.length;for(n=0;a>n;++n)i=t[n],r=this.peekRecord(e,i),r?t[n]=r:(o=!0,t[n]=null,this.onInvalidAssociationEntity(e,i));return o&&(t=Ext.Array.clean(t)),t},getEntry:function(e,t){e.isModel&&(t=e.getId(),e=e.self);var n,i=e.$isClass?e:this.getSchema().getEntity(e),r=i.entityName,o=this.data;return n=o[r]||(o[r]={}),n=n[t]||(n[t]={})},getRefs:function(e,t,n){var i,r,o,a=this.getEntry(e),s=a&&a.refs&&a.refs[t.role],l=n&&this.getParent();if(l&&(i=l.getRefs(e,t))){for(r in i)o=i[r],s&&s[r]||this.getRecord(o.self,o.id);s=a&&a.refs&&a.refs[t.role]}return s||null},getIdentifier:function(e){var t,n,i,r,o=this.getParent();return o?r=o.getIdentifier(e):(t=this.identifierCache,n=e.identifier,i=n.id||e.entityName,r=t[i],r||(r=n.clone?n.clone({cache:t}):n,t[i]=r)),r},getMatrix:function(e,t){var n,i=e.isManyToMany?e.name:e,r=this.matrices;return n=r[i],n||t||(n=r[i]=new Ext.data.matrix.Matrix(this,e)),n||null},getMatrixSlice:function(e,t){var n=this.getMatrix(e.association),i=n[e.side];return i.get(t)},getModelIdentifier:function(e,t){return t+"@"+e.entityName},onIdChanged:function(e,t,n){var i,r,o,a,s,l,d,u,c=this,h=e.entityName,p=e.id,f=c.data[h],g=f[t],m=e.associations,x=g.refs,v=c._setNoRefs;delete f[t],f[n]=g;for(l in m)s=m[l],s.isMany&&(u=s.getAssociatedItem(e),u&&(o=u.matrix,o&&o.changeId(n)));if(x)for(l in x)if(d=x[l],s=m[l],i=s.association,i.isManyToMany);else{r=i.field.name;for(a in d)d[a].set(r,p,v)}c.registerReferences(e,t)},processManyBlock:function(e,t,n,i){var r,o,a,s,l=this;if(n)for(r in n)o=l.peekRecord(e,r),o?(a=l.getEntityList(t.cls,n[r]),s=t.getAssociatedItem(o),l[i](t,s,o,a)):l.onInvalidAssociationEntity(e,r)},processManyCreate:function(e,t,n,i){t?t.add(i):n[e.getterName](null,null,i)},processManyDrop:function(e,t,n,i){t&&t.remove(i)},processManyRead:function(e,t,n,i){t?t.setRecords(i):n[e.getterName](null,null,i)},readEntities:function(e,t){var n,i,r,o,a=t.length;for(n=0;a>n;++n)i=t[n],o=e.getIdFromData(i),r=this.peekRecord(e,o),r?this.onInvalidEntityRead(e,o):r=this.createRecord(e,i),r.phantom=!1},recordCreator:function(e,t){var n=this,i=t.getIdFromData(e),r=n.peekRecord(t,i,!0);return r=r?n.getRecord(t,i):new t(e,n)},registerReferences:function(e,t){var n,i,r,o,a,s,l,d,u=e.entityName,c=e.id,h=e.data,p=t||0===t;for(o=(s=e.references).length,i=0;o>i;++i)a=s[i],r=h[a.name],(r||0===r)&&(a=a.reference,u=a.type,d=a.inverse.role,n=this.getEntry(a.cls,r),l=n.refs||(n.refs={}),l=l[d]||(l[d]={}),l[c]=e,p&&delete l[t])},updateEntities:function(e,t){var n,i,r,o,a,s=t.length;if(Ext.isArray(t))for(n=0;s>n;++n)i=t[n],o=e.getIdFromData(i),r=this.peekRecord(e,o),r?r.set(i):this.onInvalidEntityUpdate(e,o);else for(o in t)i=t[o],r=this.peekRecord(e,o),r&&!r.dropped?a=r.set(i):this.onInvalidEntityUpdate(e,o,!!r)},updateReference:function(e,t,n,i){var r,o,a=t.reference,s=a.type,l=a.inverse.role,d=e.id;(i||0===i)&&(o=this.getEntry(s,i).refs[l],delete o[d]),(n||0===n)&&(r=this.getEntry(s,n),o=r.refs||(r.refs={}),o=o[l]||(o[l]={}),o[d]=e)},visitData:function(e){var t,n,i,r,o,a,s,l,d,u,c,h=this,p=h.data,f=h.matrices;h.getSchema().processKeyChecks(!0);for(s in p){t=p[s];for(i in t)l=t[i].record,l&&(l.phantom||l.dirty||l.dropped?e.onDirtyRecord&&e.onDirtyRecord(l):e.onCleanRecord&&e.onCleanRecord(l))}if(e.onMatrixChange)for(s in f){o=f[s].left,u=o.slices,n=o.role.association;for(i in u){d=u[i],a=d.members;for(r in a)c=(l=a[r])[2],c&&e.onMatrixChange(n,l[0],l[1],c)}}return e},_setNoRefs:{refs:!1}}},1,0,0,0,0,0,[Ext.data,"Session"],0),Ext.cmd.derive("Ext.util.Schedulable",Ext.Base,{"abstract":!0,isSchedulable:!0,scheduled:!1,constructor:function(){this.getScheduler().add(this)},destroy:function(){var e=this,t=e.getScheduler();t&&t.remove(e),e.destroyed=!0,e.scheduler=null,e.schedule=e.destroy=e.react=Ext.emptyFn},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var e,t=this;t.scheduled||(e=t.getScheduler(),e&&(t.scheduled=!0,t.onSchedule&&t.onSchedule(),e.scheduleItem(t)))},unschedule:function(){var e,t=this;t.scheduled&&(e=t.getScheduler(),e&&e.unscheduleItem(t),t.scheduled=!1)},sort:function(){}}},1,0,0,0,0,0,[Ext.util,"Schedulable"],0),Ext.cmd.derive("Ext.app.bind.BaseBinding",Ext.util.Schedulable,{calls:0,kind:20,defaultOptions:{},lastValue:void 0,constructor:function(e,t,n,i){var r=this;r.options=i,r.owner=e,r.scope=n,r.callback=t,r.lateBound=Ext.isString(t),i&&i.deep&&(r.deep=!0),Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var e=this,t=e.owner;Ext.util.Schedulable.prototype.destroy.call(this),t&&t.onBindDestroy(),e.scope=e.callback=e.owner=null},privates:{getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},getSession:function(){var e=this.owner;return e.isSession?e:e.getSession()},notify:function(e){var t=this,n=t.options||t.defaultOptions,i=t.lastValue;(!t.calls||t.deep||i!==e||Ext.isArray(e))&&(++t.calls,t.lastValue=e,t.lateBound?t.scope[t.callback](e,i,t):t.callback.call(t.scope,e,i,t),n.single&&t.destroy())}}},1,0,0,0,0,0,[Ext.app.bind,"BaseBinding"],0),Ext.cmd.derive("Ext.app.bind.Binding",Ext.app.bind.BaseBinding,{constructor:function(e,t,n,i){var r=this;Ext.app.bind.BaseBinding.prototype.constructor.call(this,e.owner,t,n,i),r.stub=e,r.depth=e.depth,e.isLoading()||e.scheduled||r.schedule()},destroy:function(e){var t=this,n=t.stub;n&&!e&&(n.unbind(t),t.stub=null),Ext.app.bind.BaseBinding.prototype.destroy.call(this)},bindValidation:function(e,t){var n=this.stub;return n&&n.bindValidation(e,t)},bindValidationField:function(e,t){var n=this.stub;return n&&n.bindValidationField(e,t)},getFullName:function(){return this.fullName||(this.fullName="@("+this.stub.getFullName()+")")},getValue:function(){var e=this,t=e.stub,n=t&&t.getValue();return e.transform&&(n=e.transform(n)),n},isLoading:function(){var e=this.stub;return e&&e.isLoading()},isReadOnly:function(){var e=this.stub,t=this.options;return t&&t.twoWay===!1||!e?!0:e.isReadOnly()},refresh:function(){},setValue:function(e){this.stub.set(e)},privates:{getDataObject:function(){var e=this.stub;return e&&e.getDataObject()},getRawValue:function(){var e=this,t=e.stub,n=t&&t.getRawValue();return e.transform&&(n=e.transform(n)),n},isDescendantOf:function(e){var t=this.stub;return t?e===t||t.isDescendantOf(e):!1},react:function(){this.notify(this.getValue())},schedule:function(){this.stub.scheduled||Ext.app.bind.BaseBinding.prototype.schedule.call(this)},sort:function(){var e=this.stub;e.scheduler.sortItem(e)}}},1,0,0,0,0,0,[Ext.app.bind,"Binding"],0),Ext.cmd.derive("Ext.app.bind.AbstractStub",Ext.util.Schedulable,{children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(e,t){var n=this;n.owner=e,n.name=t,Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var e,t,n,i=this,r=i.children,o=i.bindings;if(o)for(t=0,e=o.length;e>t;++t)o[t].destroy(!0);for(n in r)r[n].destroy();Ext.util.Schedulable.prototype.destroy.call(this),i.bindings=i.children=i.owner=null},add:function(e){var t=this;(t.children||(t.children={}))[e.name]=e,e.depth=t.depth+1,e.parent=t},getChild:function(e){var t=Ext.isString(e)?e.split("."):e;return t&&t.length?this.descend(t,0):this},getFullName:function(){var e,t=this,n=t.fullName,i=t.parent;return n||(n=t.name||t.id,i&&(e=i.getFullName())&&(n=(":"!==e.charAt(e.length-1)?e+".":e)+n),t.fullName=n),n},getSession:function(){var e=this.owner;return e.isSession?e:e.getSession()},bind:function(e,t,n){var i=this,r=new Ext.app.bind.Binding(i,e,t,n),o=i.bindings||(i.bindings=[]);return r.depth=i.depth,o.push(r),r},getValue:function(){return this.isLoading()?null:this.getRawValue()},graft:function(e){var t,n=this,i=n.bindings,r=n.name;if(n.parent=n.bindings=null,n.destroy(),e.depth=n.depth,e.bindings=i,e.generation=n.generation+1,e.name=r,e.id=n.id,e.path=n.path,i)for(t=i.length;t-->0;)i[t].stub=e;return e},isDescendantOf:function(e){for(var t=this;t=t.parent;)if(t===e)return!0;return!1},onSchedule:function(){for(var e,t,n,i,r=this.parent;r;r=r.parent)if(i=r.bindings)for(e=0,t=i.length;t>e;++e)n=i[e],n.deep&&!n.scheduled&&n.schedule()},react:function(){var e,t,n,i=this.bindings;if(i)for(t=0,n=i.length;n>t;++t)e=i[t],e.scheduled||e.schedule()},unbind:function(e){var t=this.bindings;t&&t.length&&Ext.Array.remove(t,e)},privates:{collect:function(){var e,t,n=this.children,i=this.bindings,r=0,o=0;if(n)for(t in n)e=n[t],o=e.collect(),0===o&&(e.destroy(),delete n[t]),r+=o;return i&&(r+=i.length),r},getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},sort:function(){var e=this.parent;e&&this.scheduler.sortItem(e)}}},1,0,0,0,0,0,[Ext.app.bind,"AbstractStub"],0),Ext.cmd.derive("Ext.app.bind.Stub",Ext.app.bind.AbstractStub,{isStub:!0,dirty:!0,formula:null,validationKey:"validation",statics:{trackHadValue:function(e,t,n,i){var r,o,a=i&&i.children;if(o=void 0!==e,t.hadValue[n]||(t.hadValue[n]=o),i&&(i.hadValue=o),e&&(e.constructor===Object||e.isModel)){e.isModel&&(e=e.data);for(r in e)Ext.app.bind.Stub.trackHadValue(e[r],t,n+"."+r,a&&a[r])}}},constructor:function(e,t,n){var i=this,r=t;Ext.app.bind.AbstractStub.prototype.constructor.call(this,e,t),i.boundValue=null,n&&(n.add(i),n.isRootStub||(r=n.path+"."+t)),i.hadValue=e.hadValue[r],i.path=r},destroy:function(){var e=this,t=e.formula,n=(e.parent,e.storeBinding);t&&t.destroy(),n&&n.destroy(),e.detachBound(),e.parentValue=e.formula=e.storeBinding=null,Ext.app.bind.AbstractStub.prototype.destroy.call(this)},bindValidation:function(e,t){var n=this.parent;return n&&n.descend([this.validationKey,this.name]).bind(e,t)},bindValidationField:function(e,t){var n,i=this.parent,r=this.name,o="string"==typeof e;return i&&(n=i.bind(function(n){var i=null;n&&n.isModel&&(i=n.getField(r)),o?t[e](i,null,this):e.call(t,i,null,this)})),n||null},descend:function(e,t){var n,i=this,r=i.children||(i.children={}),o=t||0,a=e[o++];return(n=r[a])||(n=new Ext.app.bind.Stub(i.owner,a,i)),o<e.length&&(n=n.descend(e,o)),n},getChildValue:function(e){var t,n=this,i=n.name;return e||Ext.isString(e)?(t=n.inspectValue(e),t||(t=e.isEntity?e.data[i]:e[i])):t=n.hadValue?null:void 0,t},getDataObject:function(){var e,t=this,n=t.parent.getDataObject(),i=t.name,r=n?n[i]:null;return!r&&n&&n.isEntity&&(e=n.associations,e&&i in e&&(r=n[e[i].getterName]())),r&&(r.$className||Ext.isObject(r))||(n[i]=r={},t.hadValue=t.owner.hadValue[t.path]=!0,t.invalidate(!0,!0)),r},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(e){var t,n=this,i=n.parent,r=n.children,o=n.name;if(e.parent=i,e.children=r,i&&(i.children[o]=e),r)for(t in r)r[t].parent=e;return n.children=null,Ext.app.bind.AbstractStub.prototype.graft.call(this,e)},isLoading:function(){var e,t,n,i,r=this,o=r.parent,a=!1;return o&&!(a=o.isLoading())&&(t=r.getParentValue(),n=r.inspectValue(t),n?a=n.isLoading():(t&&t.isModel&&(e=t.associations,e&&r.name in e||(a=!1,i=!0)),i||(a=!r.hadValue&&void 0===r.getRawValue()))),a},invalidate:function(e,t){var n,i=this,r=i.children;if(i.dirty=!0,t||i.isLoading()||i.scheduled||i.schedule(),e&&r)for(n in r)r[n].invalidate(e,t)},isReadOnly:function(){var e=this.formula;return!(!e||e.set)},set:function(e){var t,n,i,r,o=this,a=o.parent,s=o.name,l=o.formula;return l&&!l.settingValue&&l.set?void l.setValue(e):o.isLinkStub&&(r=o.getLinkFormulaStub(),l=r?r.formula:null)?void l.setValue(e):(t=a.getDataObject(),void(t.isEntity?(n=t.associations,n&&s in n?(i=n[s],t[i.setterName](e),o.invalidate(!0)):t.set(s,e)):(e&&e.constructor===Object||e!==t[s])&&(o.setByLink(e)||(void 0===e?delete t[s]:(t[s]=e,Ext.app.bind.Stub.trackHadValue(e,o.owner,o.path,o)),o.inspectValue(t),o.invalidate(!0)))))},onStoreLoad:function(){this.invalidate(!0)},afterLoad:function(){this.invalidate(!0)},afterCommit:function(e){this.afterEdit(e,null)},afterEdit:function(e,t){var n,i,r,o=this.children,a=t&&t.length,s=e.associations;if(o)if(a)for(i=0;a>i;++i)r=o[t[i]],r&&r.invalidate();else for(n in o)s&&n in s||o[n].invalidate();this.invalidate()},afterReject:function(e){this.afterEdit(e,null)},setByLink:function(e){var t,n,i,r,o=this,a=0;for(r=o;r;r=r.parent){if(r.isLinkStub){if(n=r,a)for(i=[],t=0,r=o;r!==n;r=r.parent)++t,i[a-t]=r.name;break}++a}return n&&(r=n.getTargetStub())?(i&&(r=r.descend(i)),r.set(e),!0):!1},setFormula:function(e){var t=this,n=t.formula;n&&n.destroy(),t.formula=new Ext.app.bind.Formula(t,e)},react:function(){var e,t=this,n=this.boundValue,i=t.children;if(n)if(n.isValidation){if(n.refresh(),e=n.generation,t.lastValidationGeneration===e)return;t.lastValidationGeneration=e}else if(n.isModel)i&&i[t.validationKey]&&n.isValid();else if(n.isStore&&n.isLoading()&&!n.loadCount)return;Ext.app.bind.AbstractStub.prototype.react.call(this)},privates:{collect:function(){var e=this,t=Ext.app.bind.AbstractStub.prototype.collect.call(this),n=e.storeBinding?1:0,i=e.formula?1:0;return t+n+i},getLinkFormulaStub:function(){for(var e=this;e.isLinkStub;)e=e.binding.stub;return e.formula?e:null},getParentValue:function(){var e=this;return e.dirty&&(e.parentValue=e.parent.getValue(),e.dirty=!1),e.parentValue},setStore:function(e){this.storeBinding=e},inspectValue:function(e){var t,n,i,r,o=this,a=o.name,s=o.boundValue,l=null;return e&&e.isEntity?(t=e.associations,t&&a in t?(l=e[t[a].getterName](),l&&l.isStore&&(l.$associatedStore=!0)):a===o.validationKey&&(l=e.getValidation(),o.lastValidationGeneration=null)):e&&(n=e[a],n&&(n.isModel||n.isStore)&&(l=n)),i=s!==l,i&&(s&&o.detachBound(),l&&(l.isModel?l.join(o):(r=l.associatedEntity,!r||r.phantom||l.complete||l.hasPendingLoad()||l.load(),l.on("load",o.onStoreLoad,o,{single:!0}))),o.boundValue=l),l},detachBound:function(){var e=this,t=e.boundValue;t&&(t.isModel?t.unjoin(e):t.un("load",e.onStoreLoad,e))},sort:function(){var e=this,t=e.formula,n=e.scheduler,i=e.storeBinding;Ext.app.bind.AbstractStub.prototype.sort.call(this),i&&n.sortItem(i),t&&n.sortItem(t)}}},1,0,0,0,0,0,[Ext.app.bind,"Stub"],0),Ext.cmd.derive("Ext.app.bind.LinkStub",Ext.app.bind.Stub,{isLinkStub:!0,binding:null,destroy:function(){var e=this,t=e.binding,n=e.owner;t&&(e.binding=null,t.destroy(),n&&delete n.linkData[e.name]),e.target=null,Ext.app.bind.Stub.prototype.destroy.call(this)},getFullName:function(){var e=this;return e.fullName||(e.fullName="("+Ext.app.bind.Stub.prototype.getFullName.call(this)+" -> "+e.binding.getFullName()+")")},getDataObject:function(){var e=this.binding;return e&&e.getDataObject()},getRawValue:function(){var e=this.binding;return e&&e.getRawValue()},getValue:function(){var e=this.binding;return e&&e.getValue()},getTargetStub:function(){var e=this.binding;return e&&e.stub},isLoading:function(){var e=this.binding;return e?e.isLoading():!1},link:function(e,t){var n=this,i=n.binding;i&&i.destroy(),t=n.target=t||n.owner,n.linkDescriptor=e,n.binding=t.bind(e,n.onChange,n),n.binding.deep=!0},onChange:function(){this.invalidate(!0)},react:function(){var e=this,t=e.owner.linkData;t[e.name]=e.getValue(),Ext.app.bind.Stub.prototype.react.call(this)},privates:{collect:function(){var e=this,t=Ext.app.bind.Stub.prototype.collect.call(this),n=e.binding?1:0;return t+n},sort:function(){var e=this.binding;e&&this.scheduler.sortItem(e)}}},0,0,0,0,0,0,[Ext.app.bind,"LinkStub"],0),Ext.cmd.derive("Ext.app.bind.RootStub",Ext.app.bind.AbstractStub,{isRootStub:!0,depth:0,createRootChild:function(e,t){var n,i,r=this,o=r.owner,a=o.getData(),s=r.children,l=s&&s[e],d=l?null:r;return t||a.hasOwnProperty(e)||!(n=o.getParent())?i=new Ext.app.bind.Stub(o,e,d):(i=new Ext.app.bind.LinkStub(o,e,l?null:d),i.link("{"+e+"}",n)),l&&l.graft(i),i},createStubChild:function(e){return this.createRootChild(e,!0)},descend:function(e,t){var n=this,i=n.children,r=t||0,o=e[r++],a=i&&i[o]||n.createRootChild(o);return r<e.length&&(a=a.descend(e,r)),a},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+":")},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return!1},isLoading:function(){return!1},set:function(e){var t,n,i,r,o=this,a=o.children||(o.children={}),s=o.owner,l=s.data,d=s.getParent();for(r in e)void 0!==(i=e[r])?((n=a[r])?n.isLinkStub&&(n.getLinkFormulaStub()||(t=n,n=new Ext.app.bind.Stub(s,r),t.graft(n))):n=new Ext.app.bind.Stub(s,r,o),n.set(i)):l.hasOwnProperty(r)&&(delete l[r],n=a[r],n&&!n.isLinkStub&&d&&(n=o.createRootChild(r)),n.invalidate(!0))},schedule:Ext.emptyFn,unschedule:Ext.emptyFn},0,0,0,0,0,0,[Ext.app.bind,"RootStub"],0),Ext.cmd.derive("Ext.app.bind.Multi",Ext.app.bind.BaseBinding,{isMultiBinding:!0,missing:1,deep:!0,constructor:function(e,t,n,i,r){var o=this,a=r&&r.trackStatics;Ext.app.bind.BaseBinding.prototype.constructor.call(this,t,n,i,r),o.bindings=[],o.literal=e.$literal,e.constructor===Object?(a&&(o.staticKeys=[]),o.addObject(e,o.lastValue={},o.staticKeys)):o.addArray(e,o.lastValue=[]),--o.missing||o.scheduled||o.schedule()},destroy:function(){var e=this;e.bindings=Ext.destroy(e.bindings),Ext.app.bind.BaseBinding.prototype.destroy.call(this)},add:function(e,t,n){var i,r,o=this,a=o.owner,s=o.bindings,l=o.literal?e.reference?"bindEntity":"bindExpression":"bind";return++o.missing,i=a[l](e,function(e){t[n]=e,1===i.calls&&--o.missing,o.missing||o.scheduled||o.schedule()},o,null),r=i.depth,(!s.length||r<o.depth)&&(o.depth=r),s.push(i),!this.isBindingStatic(i)},addArray:function(e,t){var n,i,r,o=this,a=e.length,s=!1;for(r=0;a>r;++r)i=e[r],i&&(i.reference||Ext.isString(i))?n=o.add(i,t,r):Ext.isArray(i)?n=o.addArray(i,t[r]=[]):i&&i.constructor===Object?n=o.addObject(i,t[r]={}):(t[r]=i,n=!1),s=s||n;return s},addObject:function(e,t,n){var i,r,o,a=this,s=!1;for(o in e)r=e[o],r&&(r.reference||Ext.isString(r))?i=a.add(r,t,o):Ext.isArray(r)?i=a.addArray(r,t[o]=[]):r&&r.constructor===Object?i=a.addObject(r,t[o]={}):(t[o]=r,i=!1),n&&!i&&n.push(o),s=s||i;return s},getFullName:function(){var e,t=this,n=t.fullName,i=t.bindings,r=i.length;if(!n){for(n="@[",e=0;r>e;++e)e&&(n+=","),n+=i[e].getFullName();n+="]",t.fullName=n}return n},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return!1},isLoading:function(){for(var e=this.bindings,t=e.length;t-->0;)if(e[t].isLoading())return!0;return!1},isBindingStatic:function(e){return e.isTemplateBinding&&e.isStatic},isStatic:function(){var e,t,n=this.bindings,i=n.length;for(e=0;i>e;++e)if(t=n[e],!this.isBindingStatic(t))return!1;return!0},pruneStaticKeys:function(){var e,t=Ext.apply({},this.lastValue),n=this.staticKeys,i=n.length;for(e=0;i>e;++e)delete t[n[e]];return t},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}},1,0,0,0,0,0,[Ext.app.bind,"Multi"],0),Ext.cmd.derive("Ext.app.bind.Formula",Ext.util.Schedulable,{statics:{getFormulaParser:function(e){var t,n,i=this.formulaCache;return i||(i=this.formulaCache=new Ext.util.LruCache({maxSize:20})),t=i.get(e),t||(n="[^\\.a-z0-9_]"+e+"\\(\\s*(['\"])(.*?)\\1\\s*\\)",t=RegExp(n,"gi"),i.add(e,t)),t}},isFormula:!0,calculation:null,explicit:!1,set:null,single:!1,argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,constructor:function(e,t){var n,i,r,o,a=this,s=e.owner;a.owner=s,a.stub=e,Ext.util.Schedulable.prototype.constructor.call(this),t instanceof Function?a.get=r=t:(a.get=r=t.get,a.set=t.set,i=t.bind,t.single&&(a.single=t.single),i&&(n=i.bindTo,n&&(o=Ext.apply({},i),delete o.bindTo,i=n))),i?a.explicit=!0:i=r.$expressions||a.parseFormula(r),a.binding=s.bind(i,a.onChange,a,o)},destroy:function(){var e=this,t=e.binding,n=e.stub;t&&(t.destroy(),e.binding=null),n&&(n.formula=null),Ext.util.Schedulable.prototype.destroy.call(this),e.getterFn=e.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+"="+Ext.util.Schedulable.prototype.getFullName.call(this)+")")},getRawValue:function(){return this.calculation},onChange:function(){this.scheduled||this.schedule()},parseFormula:function(e){var t,n,i,r,o=""+e,a={$literal:!0};for(t=this.argumentNamesRe.exec(o),n=t?t[1]:"get",i=Ext.app.bind.Formula.getFormulaParser(n);t=i.exec(o);)r=t[2],a[r]=r;return a.$literal=!0,e.$expressions=a,a},react:function(){var e,t=this,n=t.owner,i=t.binding.lastValue;t.getterFn,e=t.explicit?i:n.getFormulaFn(i),t.settingValue=!0,t.stub.set(t.calculation=t.get.call(n,e)),t.settingValue=!1,t.single&&t.destroy()},setValue:function(e){this.set.call(this.stub.owner,e)},privates:{getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},sort:function(){var e=this,t=e.binding;t.destroyed||e.scheduler.sortItem(t)}}},1,0,0,0,0,0,[Ext.app.bind,"Formula"],0),Ext.cmd.derive("Ext.app.bind.Template",Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(e){var t,n=this,i=n._initters;n.text=e;for(t in i)n[t]=i[t]},_initters:{apply:function(e,t){return this.parse().apply(e,t)},getTokens:function(){return this.parse().getTokens()}},apply:function(e,t){var n,i,r,o=this,a=o.slots,s=o.buffer,l=a.length;for(n=0;l>n;++n)i=a[n],i&&(null==(r=e[i.pos])&&(r=""),i.not&&(r=!r),i.format&&(r=i.format(r,t)),s[n]=r);return s.join("")},getTokens:function(){return this.tokens},parse:function(){var e,t,n,i,r,o,a,s=this,l=s.text,d=[],u=[],c=[],h={},p=0,f=s.tokenRe,g=0;for(t in s._initters)delete s[t];for(s.buffer=d,s.slots=u,s.tokens=c;i=f.exec(l);)n=i.index-p,n&&(d[g++]=l.substring(p,p+n),p+=n),p+=(r=i[0]).length,o={fmt:e=i[3]||null,index:i[1]?parseInt(i[1],10):null,not:"!"===r.charAt(1),token:i[2]||null},a=o.token||o.index+"",a in h?o.pos=h[a]:(h[a]=o.pos=c.length,c.push(a)),e&&("this."===e.substring(0,5)?o.fmt=e.substring(5):o.scope=Ext.util.Format,s.parseArgs(i[4],o)),u[g++]=o;return p<l.length&&(d[g++]=l.substring(p)),s},parseArgs:function(e,t){var n,i,r,o,a=this,s=a.numberRe,l=a.stringRe;for(i=e?e.indexOf(",")<0?[e]:e.split(","):[],t=t||{},o=i.length,t.args=i,r=0;o>r;++r)if(n=i[r],"true"===n)i[r]=!0;else if("false"===n)i[r]=!1;else if("null"===n)i[r]=null;else if(s.test(n))i[r]=parseFloat(n);else{if(!l.test(n)){t.fn=Ext.functionFactory("return ["+e+"];"),t.format=a._formatEval;break}i[r]=n.substring(1,n.length-1)}return t.format||(i.unshift(0),t.format=a._formatArgs),t},parseFormat:function(e){var t,n=this,i=n.formatRe.exec(e),r={fmt:e,scope:Ext.util.Format};return t=i[2],t?(r.fmt=i[1],n.parseArgs(t,r)):(r.args=[0],r.format=n._formatArgs),r},_formatArgs:function(e,t){return t=this.scope||t,this.args[0]=e,t[this.fmt].apply(t,this.args)},_formatEval:function(e,t){var n=this.fn();return n.unshift(e),t=this.scope||t,t[this.fmt].apply(t,n)}},1,0,0,0,0,0,[Ext.app.bind,"Template"],0),Ext.cmd.derive("Ext.app.bind.TemplateBinding",Ext.app.bind.BaseBinding,{isTemplateBinding:!0,lastValue:void 0,value:void 0,constructor:function(e,t,n,i,r){var o=this,a=new Ext.app.bind.Template(e),s=a.getTokens();Ext.app.bind.BaseBinding.prototype.constructor.call(this,t,n,i,r),o.tpl=a,o.tokens=s,s.$literal=!0,s.length?o.multiBinding=new Ext.app.bind.Multi(s,t,o.onBindData,o):(o.isStatic=!0,o.onData(a.text))},destroy:function(){var e=this;Ext.destroy(e.multiBinding),e.tpl=e.multiBinding=null,Ext.app.bind.BaseBinding.prototype.destroy.call(this)},getFullName:function(){var e=this.multiBinding;return this.fullName||(this.fullName="$"+(e?e.getFullName():Ext.app.bind.BaseBinding.prototype.getFullName.call(this)))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isDescendantOf:function(){return!1},isLoading:function(){var e=this.multiBinding;return e?e.isLoading():!1},onBindData:function(e){this.onData(this.tpl.apply(e,this.getTemplateScope()))},onData:function(e){var t=this,n=t.value;n!==(t.value=e)&&(t.lastValue=n,t.schedule())},react:function(){this.notify(this.value)},refresh:function(){var e=this.multiBinding;e&&e.refresh()},privates:{sort:function(){var e=this.multiBinding;e&&this.scheduler.sortItem(e)}}},1,0,0,0,0,0,[Ext.app.bind,"TemplateBinding"],0),Ext.cmd.derive("Ext.data.ChainedStore",Ext.data.AbstractStore,{config:{source:null,remoteFilter:!1,remoteSort:!1},constructor:function(){Ext.data.AbstractStore.prototype.constructor.apply(this,arguments),this.getData().addObserver(this)},blockLoad:Ext.emptyFn,unblockLoad:Ext.emptyFn,remove:function(){var e=this.getSource();return e.remove.apply(e,arguments)},getData:function(){var e=this,t=e.data;return t||(e.data=t=e.constructDataCollection()),t},getSession:function(){return this.getSource().getSession()},applySource:function(e){return e&&(e=Ext.data.StoreManager.lookup(e)),e},updateSource:function(e,t){var n,i=this;t&&t.removeObserver(i),e&&(n=i.getData(),n.setSource(e.getData()),i.isInitializing||(i.fireEvent("refresh",i),i.fireEvent("datachanged",i)),e.addObserver(i))},getModel:function(){return this.getSource().getModel()},getProxy:function(){return null},onCollectionAdd:function(e,t){var n=this,i=t.items,r=!t.next;n.ignoreCollectionAdd||(n.fireEvent("add",n,i,t.at),r&&n.fireEvent("datachanged",n))},onCollectionItemChange:function(e,t){var n=this,i=t.item,r=t.modified||null,o=t.meta;n.onUpdate(i,o,r,t),n.fireEvent("update",n,i,o,r,t)},onUpdate:Ext.emptyFn,onCollectionRemove:function(e,t){var n=this,i=t.items,r=!t.next;n.ignoreCollectionRemove||(n.fireEvent("remove",n,i,t.at,!1),r&&n.fireEvent("datachanged",n))},onSourceBeforeLoad:function(e,t){this.fireEvent("beforeload",this,t)},onSourceAfterLoad:function(e,t,n,i){this.fireEvent("load",this,t,n,i)},onFilterEndUpdate:function(){Ext.data.AbstractStore.prototype.onFilterEndUpdate.apply(this,arguments),this.callObservers("Filter")},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=!0,this.callObservers("BeforePopulate")},onSourceAfterPopulate:function(){var e=this;e.ignoreCollectionAdd=!1,e.fireEvent("datachanged",e),e.fireEvent("refresh",e),this.callObservers("AfterPopulate")},onSourceBeforeClear:function(){this.ignoreCollectionRemove=!0,this.callObservers("BeforeClear")},onSourceAfterClear:function(){this.ignoreCollectionRemove=!1,this.callObservers("AfterClear")},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=!0,this.callObservers("BeforeRemoveAll")},onSourceAfterRemoveAll:function(e,t){var n=this;n.ignoreCollectionRemove=!1,t||(n.fireEvent("clear",n),n.fireEvent("datachanged",n)),this.callObservers("AfterRemoveAll",[t])},onSourceFilter:function(){var e=this;e.fireEvent("refresh",e),e.fireEvent("datachanged",e)},hasPendingLoad:function(){return this.getSource().hasPendingLoad()},isLoaded:function(){return this.getSource().isLoaded()},isLoading:function(){return this.getSource().isLoading()},onDestroy:function(){var e=this;e.observers=null,e.setSource(null),e.getData().destroy(!0),e.data=null},privates:{isMoving:function(){var e=this.getSource();return e.isMoving?e.isMoving.apply(e,arguments):!1},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}},1,0,0,0,["store.chained"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"ChainedStore"],0),Ext.cmd.derive("Ext.app.ViewModel",Ext.Base,{isViewModel:!0,factoryConfig:{name:"viewModel"},destroyed:!1,collectTimeout:100,expressionRe:/^(?:\{[!]?(?:(\d+)|([a-z_][\w\-\.]*))\})$/i,$configStrict:!1,config:{data:!0,formulas:{$value:null,merge:function(e,t,n,i){return this.mergeNew(e,t,n,i)}},links:null,parent:null,root:!0,scheduler:null,schema:"default",session:null,stores:null,view:null},constructor:function(e){this.hadValue={},this.initConfig(e)},destroy:function(){var e,t,n,i=this,r=i._scheduler,o=i.storeInfo,a=i.getParent(),s=i.collectTask,l=i.children;if(i.destroying=!0,s&&(s.cancel(),i.collectTask=null),l)for(e in l)l[e].destroy();if(o)for(e in o)t=o[e],n=t.autoDestroy,(n||!t.$wasInstance&&n!==!1)&&t.destroy(),Ext.destroy(t.$binding);a&&a.unregisterChild(i),i.getRoot().destroy(),r&&r.$owner===i&&(r.$owner=null,r.destroy()),i.hadValue=i.children=i.storeInfo=i._session=i._view=i._scheduler=i._root=i._parent=i.formulaFn=i.$formulaData=null,i.callParent()},bind:function(e,t,n,i){var r,o=this;return n=n||o,i||void 0===e.bindTo||Ext.isString(e)||(i=e,e=i.bindTo),Ext.isString(e)?o.expressionRe.test(e)?(e=e.substring(1,e.length-1),r=o.bindExpression(e,t,n,i)):r=new Ext.app.bind.TemplateBinding(e,o,t,n,i):r=new Ext.app.bind.Multi(e,o,t,n,i),r},getSession:function(){var e,t=this,n=t._session;return!n&&(e=t.getParent())&&t.setSession(n=e.getSession()),n||null},getStore:function(e){var t,n=this.storeInfo;return n&&(t=n[e]),t||null},linkTo:function(e,t){var n,i,r,o,a,s=this,l=s.getStub(e);t.isModel&&(t={type:t.entityName,id:t.id}),r=t.type||t.reference,n=t.create,r?(i=t.id,n&&(i=void 0),a=s.getRecord(r,i),Ext.isObject(n)&&(a.set(n),a.commit(),a.phantom=!0),l.set(a)):(l.isLinkStub||(o=new Ext.app.bind.LinkStub(s,l.name),l.graft(o),l=o),l.link(t))},notify:function(){this.getScheduler().notify()},get:function(e){return this.getStub(e).getValue()},set:function(e,t){var n,i,r=this;r.getData(),void 0===t&&e&&e.constructor===Object?(i=r.getRoot(),t=e):e&&e.indexOf(".")<0?(n={},n[e]=t,t=n,i=r.getRoot()):i=r.getStub(e),i.set(t)},privates:{registerChild:function(e){var t=this.children;t||(this.children=t={}),t[e.getId()]=e},unregisterChild:function(e){var t=this.children;!this.destroying&&t&&delete t[e.getId()]},getRecord:function(e,t){var n,i=this.getSession(),r=e,o=void 0!==t;return i?n=o?i.getRecord(e,t):i.createRecord(e):(r.$isClass||(r=this.getSchema().getEntity(r)),o?(n=r.createWithId(t),n.load()):n=new r),n},notFn:function(e){return!e},bindExpression:function(e,t,n,i){var r,o=e.charAt(0),a="!"===o,s=a?e.substring(1):e,l=this.getStub(s);return r=l.bind(t,n,i),a&&(r.transform=this.notFn),r},applyScheduler:function(e){return e&&!e.isInstance&&(e=new Ext.util.Scheduler(e),e.$owner=this),e},getScheduler:function(){var e,t=this,n=t._scheduler;return n||((e=t.getParent())?n=e.getScheduler():(n=new Ext.util.Scheduler({preSort:"kind,-depth"}),n.$owner=t),t.setScheduler(n)),n},getStub:function(e){var t=this.getRoot();return e?t.getChild(e):t},collect:function(){var e=this,t=e.getParent(),n=e.collectTask;return t?void t.collect():(n||(n=e.collectTask=new Ext.util.DelayedTask(e.doCollect,e)),void(0===e.collectTimeout?e.doCollect():n.delay(e.collectTimeout)))},doCollect:function(){var e,t=this.children;if(t)for(e in t)t[e].doCollect();this.getRoot().collect()},onBindDestroy:function(){var e,t=this;t.destroying||(e=t.getParent(),e?e.onBindDestroy():t.collect())},applyData:function(e,t){
var n,i,r=this;r.getSession(),t||(i=r.getParent(),r.linkData=n=i?Ext.Object.chain(i.getData()):{},r.data=r._data=Ext.Object.chain(n)),e&&e.constructor===Object&&r.getRoot().set(e)},applyParent:function(e){return e&&e.registerChild(this),e},applyStores:function(e){var t,n,i,r,o,a=this,s=a.getRoot();a.storeInfo={},a.listenerScopeFn=function(){return a.getView().getInheritedConfig("defaultListenerScope")};for(t in e)n=e[t],n.isStore?(n.$wasInstance=!0,a.setupStore(n,t)):(n=Ext.isString(n)?{source:n}:Ext.apply({},n),o=n.listeners,delete n.listeners,i=a.bind(n,a.onStoreBind,a,{trackStatics:!0}),i.isStatic()?(i.destroy(),a.createStore(t,n,o)):(i.$storeKey=t,i.$listeners=o,r=s.createStubChild(t),r.setStore(i)))},onStoreBind:function(e,t,n){var i,r=this.storeInfo,o=n.$storeKey,a=r[o];a?(e=Ext.merge({},n.pruneStaticKeys()),i=e.proxy,delete e.type,delete e.model,delete e.fields,delete e.proxy,delete e.listeners,i&&(delete i.reader,delete i.writer,a.getProxy().setConfig(i)),a.blockLoad(),a.setConfig(e),a.unblockLoad(!0)):this.createStore(o,e,n.$listeners,n)},createStore:function(e,t,n,i){var r,o=this.getSession();t=Ext.apply({},t),t.session&&(t.session=o),t.source&&(t.type=t.type||"chained"),t.listeners=n,r=Ext.Factory.store(t),r.$binding=i,this.setupStore(r,e)},setupStore:function(e,t){e.resolveListenerScope=this.listenerScopeFn,this.storeInfo[t]=e,this.set(t,e)},applyFormulas:function(e){var t,n,i=this,r=i.getRoot();i.getData();for(t in e)r.createStubChild(t),n=i.getStub(t),n.setFormula(e[t]);return e},applyLinks:function(e){for(var t in e)this.linkTo(t,e[t])},applySchema:function(e){return Ext.data.schema.Schema.get(e)},applyRoot:function(){var e=new Ext.app.bind.RootStub(this),t=this.getParent();return t&&(e.depth=t.getRoot().depth-1e3),e},getFormulaFn:function(e){var t=this,n=t.formulaFn;return n||(n=t.formulaFn=function(e){return t.$formulaData[e]}),t.$formulaData=e,n}}},1,0,0,0,["viewmodel.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.app,"ViewModel"],0),Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:!0,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var e=this;e.callParent(),e.monitor(Ext.app.BaseController)},match:function(e,t){var n=!1,i=e.alias;return"*"===t?n=!0:"#"===t?n=!!e.isApplication:this.idMatchRe.test(t)?n=e.getId()===t.substring(1):i&&(n=Ext.Array.indexOf(i,this.prefix+t)>-1),n}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0),Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{config:{store:null,pageSize:0,rootProperty:""},clear:function(){var e=this;e.pageMapGeneration=(e.pageMapGeneration||0)+1,e.indexMap={},Ext.util.LruCache.prototype.clear.apply(this,arguments)},forEach:function(e,t){var n,i,r,o,a,s=this,l=Ext.Object.getKeys(s.map),d=l.length,u=s.getPageSize();for(n=0;d>n;n++)l[n]=+l[n];for(Ext.Array.sort(l,Ext.Array.numericSortFn),t=t||s,n=0;d>n;n++)for(r=l[n],o=s.getPage(r),a=o.length,i=0;a>i;i++)if(e.call(t,o[i],(r-1)*u+i)===!1)return},findBy:function(e,t){var n=this,i=null;return t=t||n,n.forEach(function(n,r){return e.call(t,n,r)?(i=n,!1):void 0}),i},findIndexBy:function(e,t){var n=this,i=-1;return t=t||n,n.forEach(function(n,r){return e.call(t,n)?(i=r,!1):void 0}),i},find:function(e,t,n,i,r,o){if(Ext.isEmpty(t,!1))return null;var a=Ext.String.createRegex(t,i,r,o),s=this.getRootProperty();return this.findBy(function(t){return t&&a.test((s?t[s]:t)[e])},null,n)},findIndex:function(e,t,n,i,r,o){if(Ext.isEmpty(t,!1))return null;var a=Ext.String.createRegex(t,i,r,o),s=this.getRootProperty();return this.findIndexBy(function(t){return t&&a.test((s?t[s]:t)[e])},null,n)},getPageFromRecordIndex:function(e){return Math.floor(e/this.getPageSize())+1},addAll:function(e){this.addPage(1,e)},addPage:function(e,t){var n,i,r,o,a=this,s=a.getPageSize(),l=e+Math.floor((t.length-1)/s),d=(e-1)*s,u=a.indexMap;for(n=0;l>=e;e++,n+=s){for(i=Ext.Array.slice(t,n,n+s),r=0,o=i.length;o>r;r++)u[i[r].internalId]=d++;a.add(e,i),a.fireEvent("pageadd",a,e,i)}},getCount:function(){var e=Ext.util.LruCache.prototype.getCount.call(this);return e&&(e=(e-1)*this.getPageSize()+this.last.value.length),e},getByInternalId:function(e){var t=this.indexMap[e];return-1!==t?this.getAt(t):void 0},indexOf:function(e){var t=-1;return e&&(t=this.indexMap[e.internalId],null==t&&(t=-1)),t},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(e){var t,n,i,r=this,o=r.getPage(e);if(o&&r.fireEvent("beforepageremove",r,e,o)!==!1){for(t=o.length,n=0;t>n;n++)delete r.indexMap[o[n].internalId];i=Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments),r.fireEvent("pageremove",r,e,o),o.length=0}return i},getPage:function(e){return this.get(e)},hasRange:function(e,t){for(var n=this.getPageFromRecordIndex(e),i=this.getPageFromRecordIndex(t);i>=n;n++)if(!this.hasPage(n))return!1;return!0},hasPage:function(e){return!!this.get(e)},peekPage:function(e){return this.map[e]},getAt:function(e){return this.getRange(e,e+1)[0]},getRange:function(e,t){t--,this.hasRange(e,t)||Ext.Error.raise("PageMap asked for range which it does not have");for(var n,i,r,o=this,a=o.getPageSize(),s=o.getPageFromRecordIndex(e),l=o.getPageFromRecordIndex(t),d=(s-1)*a,u=l*a-1,c=s,h=[];l>=c;c++)c===s?(n=e-d,r=!0):(n=0,r=!1),c===l&&(i=a-(u-t),r=!0),r?Ext.Array.push(h,Ext.Array.slice(o.getPage(c),n,i)):Ext.Array.push(h,o.getPage(c));return h}},0,0,0,0,0,0,[Ext.data,"PageMap"],0),Ext.cmd.derive("Ext.data.BufferedStore",Ext.data.ProxyStore,{isBufferedStore:!0,buffered:!0,config:{data:0,pageSize:25,remoteSort:!0,remoteFilter:!0,sortOnLoad:!1,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:!1},applyData:function(){var e=this.data||(this.data=this.createDataCollection());return e},applyProxy:function(e){return e=Ext.data.ProxyStore.prototype.applyProxy.call(this,e),e&&e.setEnablePaging&&e.setEnablePaging(!0),e},createFiltersCollection:function(){return new Ext.util.FilterCollection},createSortersCollection:function(){return new Ext.util.SorterCollection},updateGroupField:function(e){var t=this;t.isInitializing&&t.blockLoad(),t.group(e),t.isInitializing&&t.unblockLoad()},getGrouper:function(){return this.grouper},isGrouped:function(){return!!this.grouper},createDataCollection:function(){var e=this,t=new Ext.data.PageMap({store:e,rootProperty:"data",pageSize:e.getPageSize(),maxSize:e.getPurgePageCount(),listeners:{clear:e.onPageMapClear,scope:e}});return e.relayEvents(t,["beforepageremove","pageadd","pageremove"]),e.pageRequests={},t},removeAll:function(e){var t=this,n=t.getData();n&&(e&&t.suspendEvent("clear"),n.clear(),e&&t.resumeEvent("clear"))},load:function(e){var t=this;return e=e||{},t.getData().clear(),e.page=1,e.start=0,e.limit=t.getViewSize()||t.getDefaultViewSize(),e.loadCallback=e.callback,delete e.callback,t.loadToPrefetch(e)},reload:function(e){var t,n,i,r,o,a,s,l,d=this,u=d.getData(),c=Number.MAX_VALUE;if(!d.loading&&(e||(e={}),u.clear(!0),a=function(){d.rangeCached(t,n)&&(d.loading=!1,u.un("pageadd",a),l=u.getRange(t,n+1),d.fireEvent("load",d,l,!0),d.fireEvent("refresh",d))},s=Math.ceil((d.getLeadingBufferZone()+d.getTrailingBufferZone())/2),d.lastRequestStart?(t=d.lastRequestStart,n=d.lastRequestEnd,c=d.getTotalCount()):(t=e.start||0,n=t+(e.count||d.getPageSize())-1),delete d.totalCount,t=Math.max(t-s,0),n=Math.min(n+s,c),i=d.getPageFromRecordIndex(t),r=d.getPageFromRecordIndex(n),d.fireEvent("beforeload",d,e)!==!1))for(d.loading=!0,u.on("pageadd",a),o=i;r>=o;o++)d.prefetchPage(o,e)},filter:function(){this.getData().clear(),Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},clearFilter:function(){this.getData().clear(),Ext.data.ProxyStore.prototype.clearFilter.apply(this,arguments)},filterBy:function(){},loadData:function(){},loadPage:function(e,t){var n=this;return t=t||{},t.page=n.currentPage=e,t.start=(e-1)*n.getPageSize(),t.limit=n.getViewSize()||n.getDefaultViewSize(),t.loadCallback=t.callback,delete t.callback,n.loadToPrefetch(t)},clearData:function(){var e=this,t=e.getData();t&&t.clear()},getCount:function(){return this.totalCount||0},getRange:function(e,t,n){var i,r,o,a,s,l=this,d=l.totalCount-1,u=l.lastRequestStart,c=[],h=l.getData();return n=Ext.apply({prefetchStart:e,prefetchEnd:t},n),t=t>=l.totalCount?d:t,r=0===e?0:e-1,o=t===d?t:t+1,l.lastRequestStart=e,l.lastRequestEnd=t,l.rangeCached(r,o)?(l.onRangeAvailable(n),c=h.getRange(e,t+1)):(l.fireEvent("cachemiss",l,e,t),a=l.getPageFromRecordIndex(r),s=l.getPageFromRecordIndex(o),i=function(d,u){u>=a&&s>=u&&l.rangeCached(r,o)&&(l.fireEvent("cachefilled",l,e,t),h.un("pageadd",i),l.onRangeAvailable(n))},h.on("pageadd",i),l.prefetchRange(e,t)),l.primeCache(e,t,u>e?-1:1),c},getById:function(e){var t=this.data.findBy(function(t){return t.getId()===e});return t},getAt:function(e){var t=this.getData();return t.hasRange(e,e)?t.getAt(e):void 0},getByInternalId:function(e){return this.data.getByInternalId(e)},indexOf:function(e){return this.getData().indexOf(e)},indexOfId:function(e){return this.indexOf(this.getById(e))},group:function(e,t){var n,i=this;e&&"string"==typeof e?(n=i.grouper,n?void 0===t?n.toggle():n.setDirection(t):i.grouper=new Ext.util.Grouper({property:e,direction:t||"ASC",root:"data"})):i.grouper=e?i.getSorters().decodeSorter(e,"Ext.util.Grouper"):null,i.isLoadBlocked()||(i.getData().clear(),i.loadPage(1,{callback:function(){i.fireEvent("groupchange",i,i.getGrouper())}}))},getPageFromRecordIndex:function(e){return Math.floor(e/this.getPageSize())+1},calculatePageCacheSize:function(e){var t=this,n=t.getPurgePageCount();return n?Math.max(t.getData().getMaxSize()||0,2*Math.ceil((e+t.getTrailingBufferZone()+t.getLeadingBufferZone())/t.getPageSize())+n):0},loadToPrefetch:function(e){var t,n,i,r,o=this,a=e,s=e.start,l=e.start+e.limit-1,d=o.getViewSize()||e.limit,u=Math.min(l,e.start+d-1),c=o.getPageFromRecordIndex(Math.max(s-o.getTrailingBufferZone(),0)),h=o.getPageFromRecordIndex(l+o.getLeadingBufferZone()),p=o.getData(),f=function(){n=n||[],e.loadCallback&&e.loadCallback.call(e.scope||o,n,r,!0),e.callback&&e.callback.call(e.scope||o,n,s||0,l||0,e)},g=function(){o.fireEvent("datachanged",o),o.fireEvent("refresh",o),o.fireEvent("load",o,n,!0)},m=function(){o.rangeCached(s,u)&&(o.loading=!1,n=p.getRange(s,u+1),p.un("pageadd",m),o.hasListeners.guaranteedrange&&o.guaranteeRange(s,u,e.callback,e.scope),f(),g())};p.setMaxSize(o.calculatePageCacheSize(d)),o.fireEvent("beforeload",o,e)!==!1&&(delete o.totalCount,o.loading=!0,e.callback&&(a=Ext.apply({},e),delete a.callback),o.on("prefetch",function(e,n,s,l){if(r=l,s)if(i=o.getTotalCount())for(p.on("pageadd",m),u=Math.min(u,i-1),h=o.getPageFromRecordIndex(Math.min(u+o.getLeadingBufferZone(),i-1)),t=c+1;h>=t;++t)o.prefetchPage(t,a);else f(),g();else f(),o.fireEvent("load",o,n,!1)},null,{single:!0}),o.prefetchPage(c,a))},prefetch:function(e){var t,n=this,i=n.getPageSize(),r=n.getData();return i?(n.lastPageSize&&i!=n.lastPageSize&&Ext.Error.raise("pageSize cannot be dynamically altered"),r.getPageSize()||r.setPageSize(i)):n.pageSize=r.setPageSize(i=e.limit),n.lastPageSize=i,e.page||(e.page=n.getPageFromRecordIndex(e.start),e.start=(e.page-1)*i,e.limit=Math.ceil(e.limit/i)*i),n.pageRequests[e.page]||(e=Ext.apply({action:"read",filters:n.getFilters().items,sorters:n.getSorters().items,grouper:n.getGrouper(),internalCallback:n.onProxyPrefetch,internalScope:n},e),t=n.createOperation("read",e),t.pageMapGeneration=r.pageMapGeneration,n.fireEvent("beforeprefetch",n,t)!==!1&&(n.pageRequests[e.page]=t.execute(),n.getProxy().isSynchronous&&delete n.pageRequests[e.page])),n},onPageMapClear:function(){var e,t,n=this,i=n.wasLoading,r=n.pageRequests,o=n.getData();o.clearListeners(),o.on("clear",n.onPageMapClear,n),n.relayEvents(o,["beforepageremove","pageadd","pageremove"]),n.loading=!0,n.totalCount=0;for(t in r)r.hasOwnProperty(t)&&(e=r[t],delete r[t],delete e.callback);n.fireEvent("clear",n),n.loading=i},prefetchPage:function(e,t){var n=this,i=n.getPageSize(),r=(e-1)*i,o=n.totalCount;(void 0===o||n.data.getCount()!==o)&&n.prefetch(Ext.applyIf({page:e,start:r,limit:i},t))},onProxyPrefetch:function(e){var t=this,n=e.getResultSet(),i=e.getRecords(),r=e.wasSuccessful(),o=e.getPage(),a=t.totalCount;e.pageMapGeneration===t.getData().pageMapGeneration&&(n&&(t.totalCount=n.getTotal(),t.totalCount!==a&&t.fireEvent("totalcountchange",t.totalCount)),void 0!==o&&delete t.pageRequests[o],t.loading=!1,t.fireEvent("prefetch",t,i,r,e),r&&t.cachePage(i,e.getPage()),Ext.callback(e.getCallback(),e.getScope()||t,[i,e,r]))},cachePage:function(e,t){var n,i=this,r=e.length;for(Ext.isDefined(i.totalCount)||(i.totalCount=e.length,i.fireEvent("totalcountchange",i.totalCount)),n=0;r>n;n++)e[n].join(i);i.getData().addPage(t,e)},rangeCached:function(e,t){return this.getData().hasRange(e,t)},pageCached:function(e){return this.getData().hasPage(e)},pagePending:function(e){return!!this.pageRequests[e]},rangeSatisfied:function(e,t){return this.rangeCached(e,t)},onRangeAvailable:function(e){var t,n=this,i=n.getTotalCount(),r=e.prefetchStart,o=e.prefetchEnd>i-1?i-1:e.prefetchEnd;o=Math.max(0,o),t=n.getData().getRange(r,o+1),e.fireEvent!==!1&&n.fireEvent("guaranteedrange",t,r,o,e),e.callback&&e.callback.call(e.scope||n,t,r,o,e)},guaranteeRange:function(e,t,n,i,r){r=Ext.apply({callback:n,scope:i},r),this.getRange(e,t+1,r)},prefetchRange:function(e,t){var n,i,r,o=this,a=o.getData();if(!o.rangeCached(e,t))for(n=o.getPageFromRecordIndex(e),i=o.getPageFromRecordIndex(t),a.setMaxSize(o.calculatePageCacheSize(t-e+1)),r=n;i>=r;r++)o.pageCached(r)||o.prefetchPage(r)},primeCache:function(e,t,n){var i=this,r=i.getLeadingBufferZone(),o=i.getTrailingBufferZone(),a=i.getPageSize(),s=i.totalCount;-1===n?(e=Math.max(e-r,0),t=Math.min(t+o,s-1)):1===n?(e=Math.max(Math.min(e-o,s-a),0),t=Math.min(t+r,s-1)):(e=Math.min(Math.max(Math.floor(e-(r+o)/2),0),s-i.pageSize),t=Math.min(Math.max(Math.ceil(t+(r+o)/2),0),s-1)),i.prefetchRange(e,t)},sort:function(e,t,n){0===arguments.length?this.clearAndLoad():this.getSorters().addSort(e,t,n)},onSorterEndUpdate:function(){var e=this,t=e.getSorters().getRange();t.length?e.clearAndLoad({callback:function(){e.fireEvent("sort",e,t)}}):e.fireEvent("sort",e,t)},clearAndLoad:function(e){this.isLoadBlocked()||(this.getData().clear(),this.loadPage(1,e))},privates:{isLast:function(e){return this.indexOf(e)===this.getTotalCount()-1},isMoving:function(){return!1}}},0,0,0,0,["store.buffered"],0,[Ext.data,"BufferedStore"],0),Ext.cmd.derive("Ext.data.JsonP",Ext.Base,{singleton:!0,requestCount:0,requests:{},timeout:3e4,disableCaching:!0,disableCachingParam:"_dc",callbackKey:"callback",request:function(e){e=Ext.apply({},e);var t,n,i=this,r=Ext.isDefined(e.disableCaching)?e.disableCaching:i.disableCaching,o=e.disableCachingParam||i.disableCachingParam,a=++i.requestCount,s=e.callbackName||"callback"+a,l=e.callbackKey||i.callbackKey,d=Ext.isDefined(e.timeout)?e.timeout:i.timeout,u=Ext.apply({},e.params),c=e.url,h=Ext.name;return r&&!u[o]&&(u[o]=Ext.Date.now()),e.params=u,u[l]=h+".data.JsonP."+s,n=i.createScript(c,u,e),i.requests[a]=t={url:c,params:u,script:n,id:a,scope:e.scope,success:e.success,failure:e.failure,callback:e.callback,callbackKey:l,callbackName:s},d>0&&(t.timeout=Ext.defer(i.handleTimeout,d,i,[t])),i.setupErrorHandling(t),i[s]=Ext.bind(i.handleResponse,i,[t],!0),i.loadScript(t),t},abort:function(e){var t,n=this,i=n.requests;if(e)e.id||(e=i[e]),n.handleAbort(e);else for(t in i)i.hasOwnProperty(t)&&n.abort(i[t])},setupErrorHandling:function(e){e.script.onerror=Ext.bind(this.handleError,this,[e])},handleAbort:function(e){e.errorType="abort",this.handleResponse(null,e)},handleError:function(e){e.errorType="error",this.handleResponse(null,e)},cleanupErrorHandling:function(e){e.script.onerror=null},handleTimeout:function(e){e.errorType="timeout",this.handleResponse(null,e)},handleResponse:function(e,t){var n=!0,i=Ext.GlobalEvents;t.timeout&&clearTimeout(t.timeout),delete this[t.callbackName],delete this.requests[t.id],this.cleanupErrorHandling(t),Ext.fly(t.script).destroy(),t.errorType?(n=!1,Ext.callback(t.failure,t.scope,[t.errorType])):Ext.callback(t.success,t.scope,[e]),Ext.callback(t.callback,t.scope,[n,e,t.errorType]),i.hasListeners.idle&&i.fireEvent("idle")},createScript:function(e,t){var n=document.createElement("script");return n.setAttribute("src",Ext.urlAppend(e,Ext.Object.toQueryString(t))),n.setAttribute("async",!0),n.setAttribute("type","text/javascript"),n},loadScript:function(e){Ext.getHead().appendChild(e.script)}},0,0,0,0,0,0,[Ext.data,"JsonP"],0),Ext.cmd.derive("Ext.data.NodeInterface",Ext.Base,{statics:{decorate:function(e){var t,n,i,r=Ext.data.schema.Schema.lookupEntity(e),o=r.prototype;r.prototype.isObservable||r.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable),o.isNode||(t=o.idProperty,n=r.getField(t),i=n.type,r.override(this.getPrototypeBody()),r.addFields([{name:"parentId",type:i,defaultValue:null,allowNull:n.allowNull},{name:"index",type:"int",defaultValue:-1,persist:!1,convert:null},{name:"depth",type:"int",defaultValue:0,persist:!1,convert:null},{name:"expanded",type:"bool",defaultValue:!1,persist:!1,convert:null},{name:"expandable",type:"bool",defaultValue:!0,persist:!1,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"leaf",type:"bool",defaultValue:!1},{name:"cls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"icon",type:"string",defaultValue:"",persist:!1,convert:null},{name:"root",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isLast",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isFirst",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"allowDrop",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"allowDrag",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"loaded",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"loading",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"href",type:"string",defaultValue:"",persist:!1,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:!1,convert:null},{name:"children",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"visible",type:"boolean",defaultValue:!0,persist:!1},{name:"text",type:"string",persist:!1}]))},getPrototypeBody:function(){var e={idchanged:!0,append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0},t={silent:!0};return{isNode:!0,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){var e=this;return e.mixins.observable.constructor.call(e),e.callParent(arguments),e.childNodes=[],e},createNode:function(e){var t,n,i,r,o,a,s=this,l=s.childType,d=s.self;return e.isModel||(l?d=s.schema.getEntity(l):(t=s.getTreeStore(),n=t&&t.getProxy().getReader(),i=s.getProxy(),r=i?i.getReader():null,o=!n||r&&r.initialConfig.typeProperty?r:n,o&&(a=o.getTypeProperty(),a&&(d=o.getChildType(s.schema,e,a)))),e=new d(e)),e.childNodes||(e.firstChild=e.lastChild=e.parentNode=e.previousSibling=e.nextSibling=null,e.childNodes=[]),e},isLeaf:function(){return this.get("leaf")===!0},setFirstChild:function(e){this.firstChild=e},setLastChild:function(e){this.lastChild=e},updateInfo:function(e,t){var n,i,r,o,a,s,l,d,u=this,c=u.data,h=c.depth,p={},f=u.childNodes,g=f.length,m=u.phantom,x=u.fields,v=u.modified||(u.modified={}),y=t.parentId;for(n in t)if(r=x[u.fieldOrdinals[n]],i=t[n],l=r&&r.persist,o=c[n],s=l&&"index"===n&&-1!==o&&y&&y!==v.parentId,(s||!u.isEqual(o,i))&&(c[n]=i,l))if(!s&&v.hasOwnProperty(n)){if(u.isEqual(v[n],i)){delete v[n],u.dirty=!1;for(a in v)if(v.hasOwnProperty(a)){u.dirty=!0;break}}}else u.dirty=!0,v[n]=o;if(e&&(u.commit(),u.phantom=m),u.data.depth!==h)for(p={depth:u.data.depth+1},d=0;g>d;d++)f[d].updateInfo(e,p)},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var e=this;return e.get("expandable")?!(e.isLeaf()||e.isLoaded()&&!e.phantom&&!e.hasChildNodes()):!1},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(e,t,n){var i,r,o,a,s,l,d=this,u={isLast:!0,parentId:d.getId(),depth:(d.data.depth||0)+1},c=d.getTreeStore(),h=c&&c.bulkUpdate;if(Ext.suspendLayouts(),Ext.isArray(e)){for(r=e.length,l=Array(r),d.callTreeStore("beginFill"),i=0;r>i;i++)l[i]=d.appendChild(e[i],t,n);d.callTreeStore("endFill",[l])}else{if(e=d.createNode(e),t!==!0&&d.fireEventArgs("beforeappend",[d,e])===!1)return Ext.resumeLayouts(!0),!1;if(o=d.childNodes.length,a=e.parentNode){if(t!==!0&&e.fireEventArgs("beforemove",[e,a,d,o])===!1)return Ext.resumeLayouts(!0),!1;if(a.removeChild(e,!1,t,a.getTreeStore()===c)===!1)return Ext.resumeLayouts(!0),!1}c&&c.beginUpdate(),o=d.childNodes.length,0===o&&d.setFirstChild(e),d.childNodes[o]=e,e.parentNode=d,e.nextSibling=null,d.setLastChild(e),s=d.childNodes[o-1],s?(e.previousSibling=s,s.nextSibling=e,s.updateInfo(n,{isLast:!1}),h||s.triggerUIUpdate()):e.previousSibling=null,u.isFirst=0===o,u.index=o,e.updateInfo(n,u),d.isLeaf()&&d.set("leaf",!1),d.isLoaded()?1!==d.childNodes.length||h||d.triggerUIUpdate():h?d.data.loaded=!0:d.set("loaded",!0),o&&d.childNodes[o-1].isExpanded()&&!h&&d.childNodes[o-1].cascadeBy(d.triggerUIUpdate),c&&(c.registerNode(d,!h),h&&c.registerNode(e)),t!==!0&&(d.fireEventArgs("append",[d,e,o]),a&&e.fireEventArgs("move",[e,a,d,o])),d.callTreeStore("onNodeAppend",[e,o]),l=e,c&&c.endUpdate()}return Ext.resumeLayouts(!0),l},getOwnerTree:function(){var e=this.getTreeStore();return e?e.ownerTree:void 0},getTreeStore:function(){for(var e=this;e&&!e.treeStore;)e=e.parentNode;return e&&e.treeStore},removeChild:function(e,n,i,r){var o,a,s,l,d=this,u=d.indexOf(e),c=d.getTreeStore(),h=c&&c.bulkUpdate;if(-1===u||i!==!0&&d.fireEventArgs("beforeremove",[d,e,!!r])===!1)return!1;if(Ext.suspendLayouts(),c&&c.beginUpdate(),Ext.Array.erase(d.childNodes,u,1),d.firstChild===e&&d.setFirstChild(e.nextSibling),d.lastChild===e&&d.setLastChild(e.previousSibling),s=e.previousSibling,s&&(e.previousSibling.nextSibling=e.nextSibling),e.nextSibling)for(e.nextSibling.previousSibling=e.previousSibling,0===u&&e.nextSibling.updateInfo(!1,{isFirst:!0}),o=u,a=d.childNodes.length;a>o;o++)d.childNodes[o].updateInfo(!1,{index:o});else s&&(s.updateInfo(!1,{isLast:!0}),h||(s.isExpanded()?s.cascadeBy(d.triggerUIUpdate):s.triggerUIUpdate()));return d.childNodes.length||h||d.triggerUIUpdate(),Ext.resumeLayouts(!0),i!==!0&&(l={parentNode:e.parentNode,previousSibling:e.previousSibling,nextSibling:e.nextSibling},d.callTreeStore("beforeNodeRemove",[[e],!!r]),e.previousSibling=e.nextSibling=e.parentNode=null,d.fireEventArgs("remove",[d,e,!!r,l]),d.callTreeStore("onNodeRemove",[[e],!!r])),n?e.erase(!0):e.clear(),r||e.set({parentId:null,lastParentId:d.getId()},t),c&&c.endUpdate(),e},copy:function(e,t){var n,i=this,r=i.callParent([e]),o=i.childNodes?i.childNodes.length:0;if(t)for(n=0;o>n;n++)r.appendChild(i.childNodes[n].copy(void 0,!0));return r},clear:function(e){var t=this;t.parentNode=t.previousSibling=t.nextSibling=null,e&&(t.firstChild=t.lastChild=t.childNodes=null)},drop:function(){var e,t,n,i=this,r=i.childNodes,o=i.parentNode,a=r?r.length:0;for(i.callParent(),o?(n=i.getTreeStore(),o.removeChild(i)):i.get("root")&&(n=i.getTreeStore(),n.setRoot(null)),n&&n.beginUpdate(),e=0;a>e;e++)t=r[e],t.clear(),t.drop();n&&n.endUpdate()},erase:function(e){var t,n,i=this,r=i.childNodes,o=r&&r.length;for(i.remove(),i.clear(!0),i.callParent([e]),t=0;o>t;t++)n=r[t],n.parentNode=null,n.erase(e)},insertBefore:function(e,t,n){var i,r,o,a=this,s=a.indexOf(t),l=e.parentNode,d=s,u=a.getTreeStore(),c=u&&u.bulkUpdate;if(!t)return a.appendChild(e);if(e===t)return!1;if(e=a.createNode(e),n!==!0&&a.fireEventArgs("beforeinsert",[a,e,t])===!1)return!1;if(l===a&&a.indexOf(e)<s&&d--,l){if(n!==!0&&e.fireEventArgs("beforemove",[e,l,a,s,t])===!1)return!1;if(l.removeChild(e,!1,n,l.getTreeStore()===u)===!1)return!1}for(u&&u.beginUpdate(),0===d&&a.setFirstChild(e),Ext.Array.splice(a.childNodes,d,0,e),e.parentNode=a,e.nextSibling=t,t.previousSibling=e,r=a.childNodes[d-1],r?(e.previousSibling=r,r.nextSibling=e):e.previousSibling=null,e.updateInfo(!1,{parentId:a.getId(),index:d,isFirst:0===d,isLast:!1,depth:(a.data.depth||0)+1}),o=d+1,i=a.childNodes.length;i>o;o++)a.childNodes[o].updateInfo(!1,{index:o});return a.isLoaded()?1!==a.childNodes.length||c||a.triggerUIUpdate():c?a.data.loaded=!0:a.set("loaded",!0),u&&u.registerNode(a,!c),n!==!0&&(a.fireEventArgs("insert",[a,e,t]),l&&e.fireEventArgs("move",[e,l,a,d,t])),a.callTreeStore("onNodeInsert",[e,d]),u&&u.endUpdate(),e},insertChild:function(e,t){var n=this.childNodes[e];return n?this.insertBefore(t,n):this.appendChild(t)},isLastVisible:function(){var e=this,t=e.data.isLast,n=e.nextSibling;if(!t&&e.getTreeStore().isFiltered()){for(;n;){if(n.data.visible)return!1;n=n.nextSibling}return!0}return t},remove:function(e,t){var n=this,i=n.parentNode;return i?i.removeChild(n,e,t):e&&n.erase(!0),n},removeAll:function(e,t,n){var i,r,o,a=this,s=a.childNodes,l=s.length;if(l){for(n||(r=a.getTreeStore(),r&&(r.beginUpdate(),r.suspendEvent("remove"),a.callTreeStore("beforeNodeRemove",[s,!1]))),o=0;l>o;++o)i=s[o],i.previousSibling=i.nextSibling=i.parentNode=null,a.fireEventArgs("remove",[a,i,!1]),e?i.erase(!0):i.removeAll(!1,t,!0);return!n&&r&&(r.resumeEvent("remove"),a.callTreeStore("onNodeRemove",[s,!1]),r.endUpdate()),a.firstChild=a.lastChild=null,s.length=0,n||a.triggerUIUpdate(),a}},getChildAt:function(e){return this.childNodes[e]},replaceChild:function(e,t,n){var i=t?t.nextSibling:null;return this.removeChild(t,!1,n),this.insertBefore(e,i,n),t},indexOf:function(e){return Ext.Array.indexOf(this.childNodes,e)},indexOfId:function(e){for(var t=this.childNodes,n=t.length,i=0;n>i;++i)if(t[i].getId()===e)return i;return-1},getPath:function(e,t){e=e||this.idProperty,t=t||"/";for(var n=[this.get(e)],i=this.parentNode;i;)n.unshift(i.get(e)),i=i.parentNode;return t+n.join(t)},getDepth:function(){return this.get("depth")},bubble:function(e,t,n){for(var i=this;i&&e.apply(t||i,n||[i])!==!1;)i=i.parentNode},cascadeBy:function(e,t,n,i){var r=this;if(1!==arguments.length||Ext.isFunction(e)||(i=e.after,t=e.scope,n=e.args,e=e.before),!e||e.apply(t||r,n||[r])!==!1){var o,a=r.childNodes,s=a.length;for(o=0;s>o;o++)a[o].cascadeBy.call(a[o],e,t,n,i);i&&i.apply(t||r,n||[r])}},eachChild:function(e,t,n){var i,r=this.childNodes,o=r.length;for(i=0;o>i&&e.apply(t||this,n||[r[i]])!==!1;i++);},findChild:function(e,t,n){return this.findChildBy(function(){return this.get(e)==t},null,n)},findChildBy:function(e,t,n){for(var i,r,o=this.childNodes,a=o.length,s=0;a>s;s++){if(i=o[s],e.call(t||i,i)===!0)return i;if(n&&(r=i.findChildBy(e,t,n),null!==r))return r}return null},contains:function(e){return e.isAncestor(this)},isAncestor:function(e){for(var t=this.parentNode;t;){if(t===e)return!0;t=t.parentNode}return!1},sort:function(e,t,n){var i,r,o=this,a=o.childNodes,s=a.length,l={isFirst:!0};if(s>0){for(e||(e=o.getTreeStore().getSortFn()),Ext.Array.sort(a,e),o.setFirstChild(a[0]),o.setLastChild(a[s-1]),i=0;s>i;i++)r=a[i],r.previousSibling=a[i-1],r.nextSibling=a[i+1],l.isLast=i===s-1,l.index=i,r.updateInfo(!1,l),l.isFirst=!1,t&&!r.isLeaf()&&r.sort(e,!0,!0);n!==!0&&(o.fireEventArgs("sort",[o,a]),o.callTreeStore("onNodeSort",[a]))}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isBranchLoaded:function(){var e=!this.isLeaf()&&this.isLoaded();return e&&this.cascadeBy(function(t){return t.isLeaf()||(e=e||t.isBranchLoaded()),e}),e},isLoading:function(){return this.get("loading")},isRoot:function(){return!this.parentNode},isVisible:function(){for(var e=this.parentNode;e;){if(!e.isExpanded())return!1;e=e.parentNode}return!0},expand:function(e,t,n){var i,r,o=this;o.isLeaf()?Ext.callback(t,n||o):o.isLoading()?o.on("expand",function(){o.expand(e,t,n)},o,{single:!0}):o.isExpanded()?e?o.expandChildren(!0,t,n):Ext.callback(t,n||o,[o.childNodes]):o.fireEventArgs("beforeexpand",[o])!==!1&&(e&&(o.parentNode&&o.parentNode.isSynchronousRecursiveExpand?o.isSynchronousRecursiveExpand=!0:(i=o.getTreeStore(),(i.getProxy().isSynchronous||o.isBranchLoaded())&&(o.isSynchronousRecursiveExpand=!0,i.suspendEvent("add"),r=!0))),o.callTreeStore("onBeforeNodeExpand",[o.onChildNodesAvailable,o,[e,t,n]]),r&&(i.resumeEvent("add"),i.fireEvent("refresh",i)),o.isSynchronousRecursiveExpand=!1)},onChildNodesAvailable:function(e,t,n,i){var r,o,a,s=this,l=s.getTreeStore(),d=l&&l.bulkUpdate;for(Ext.suspendLayouts(),r=s.parentNode;r;r=r.parentNode)r.isExpanded()||(a||(a=[])).unshift(r);if(d?s.data.expanded=!0:s.set("expanded",!0),a){for(o=1;o<a.length;o++)r=a[o],d?r.data.expanded=!0:r.set("expanded",!0);for(a[0].expand(),o=1;o<a.length;o++)r=a[o],r.fireEventArgs("expand",[r,r.childNodes])}else s.callTreeStore("onNodeExpand",[e,!1]);s.fireEventArgs("expand",[s,e]),t?s.expandChildren(!0,n,i):Ext.callback(n,i||s,[s.childNodes]),Ext.resumeLayouts(!0)},expandChildren:function(e,t,n,i){var r,o,a,s,l,d,u,c=this;for(Ext.isBoolean(t)&&(r=t,t=n,n=i,i=r),void 0===i&&(u=c.getTreeStore(),i=u&&u.singleExpand),a=c.childNodes,s=[],l=i?Math.min(a.length,1):a.length,o=0;l>o;++o)d=a[o],d.isLeaf()||(s[s.length]=d);for(l=s.length,o=0;l>o;++o)s[o].expand(e);t&&Ext.callback(t,n||c,[c.childNodes])},collapse:function(e,t,n){var i,r,o=this,a=o.isExpanded(),s=o.getTreeStore(),l=s&&s.bulkUpdate,d=o.childNodes.length;if(!o.isLeaf()&&(!a&&e||o.fireEventArgs("beforecollapse",[o])!==!1)){if(Ext.suspendLayouts(),o.isExpanded())e?(r=function(){for(i=0;d>i;i++)o.childNodes[i].setCollapsed(!0)},t=t?Ext.Function.createSequence(r,Ext.Function.bind(t,n,[o.childNodes])):r):t&&(t=Ext.Function.bind(t,n,[o.childNodes])),l?o.data.expanded=!1:o.set("expanded",!1),o.callTreeStore("onNodeCollapse",[o.childNodes,t,n]),o.fireEventArgs("collapse",[o,o.childNodes]),t=null;else if(e)for(i=0;d>i;i++)o.childNodes[i].setCollapsed(!0);Ext.resumeLayouts(!0)}Ext.callback(t,n||o,[o.childNodes])},setCollapsed:function(e){var t,n=this,i=n.childNodes.length;if(!n.isLeaf()&&n.fireEventArgs("beforecollapse",[n])!==!1&&(n.data.expanded=!1,n.fireEventArgs("collapse",[n,n.childNodes]),e))for(t=0;i>t;t++)n.childNodes[t].setCollapsed(!0)},collapseChildren:function(e,t,n){var i,r,o=this,a=o.childNodes,s=a.length,l=[];for(i=0;s>i;++i)r=a[i],!r.isLeaf()&&r.isLoaded()&&r.isExpanded()&&l.push(r);if(s=l.length)for(i=0;s>i;++i)r=l[i],i===s-1?r.collapse(e,t,n):r.collapse(e);else Ext.callback(t,n)},fireEvent:function(e){return this.fireEventArgs(e,Ext.Array.slice(arguments,1))},fireEventArgs:function(t,n){var i,r,o,a=Ext.mixin.Observable.prototype.fireEventArgs;if(e[t]){for(r=this;i!==!1&&r;r=(o=r).parentNode)r.hasListeners&&r.hasListeners[t]&&(i=a.call(r,t,n));return i!==!1&&(r=o.getTreeStore(),r&&r.hasListeners&&r.hasListeners[t="node"+t]&&(i=r.fireEventArgs(t,n))),i}return a.apply(this,arguments)},serialize:function(e){var t,n,i=e||new Ext.data.writer.Json({writeAllFields:!0}),r=i.getRecordData(this),o=this.childNodes,a=o.length;if(a>0)for(r.children=t=[],n=0;a>n;n++)t.push(o[n].serialize(i));return r},callTreeStore:function(e,t){var n=this,i=n.getTreeStore(),r=i&&i[e];i&&r&&(t=t||[],t[0]!==n&&t.unshift(n),r.apply(i,t))},privates:{join:function(e){e.isTreeStore?this.isRoot()&&(this.treeStore=this.store=e):this.callParent([e])},callJoined:function(e,t){this.callParent([e,t]),this.callTreeStore(e,t)}}}}}},0,0,0,0,0,0,[Ext.data,"NodeInterface"],0),
Ext.cmd.derive("Ext.data.NodeStore",Ext.data.Store,{isNodeStore:!0,config:{node:null,recursive:!1,rootVisible:!1,folderSort:!1},isExpandingOrCollapsing:0,getTotalCount:function(){return this.getCount()},afterEdit:function(e,t){if(this.getNode()&&t){if(-1!==Ext.Array.indexOf(t,"loaded"))return this.add(this.retrieveChildNodes(e));if(-1!==Ext.Array.indexOf(t,"expanded"))return this.filter();if(-1!==Ext.Array.indexOf(t,"sorted"))return this.sort()}Ext.data.Store.prototype.afterEdit.apply(this,arguments)},afterReject:function(e){var t=this;t.contains(e)&&(t.onUpdate(e,Ext.data.Model.REJECT,null),t.fireEvent("update",t,e,Ext.data.Model.REJECT,null))},afterCommit:function(e,t){var n=this;t||(t=null),n.contains(e)&&(n.onUpdate(e,Ext.data.Model.COMMIT,t),n.fireEvent("update",n,e,Ext.data.Model.COMMIT,t))},onNodeAppend:function(e,t){this.add([t].concat(this.retrieveChildNodes(t)))},onNodeInsert:function(e,t){this.add([t].concat(this.retrieveChildNodes(t)))},onNodeRemove:function(e,t){this.remove([t].concat(this.retrieveChildNodes(t)))},onNodeExpand:function(e,t){this.loadRecords(t)},applyNode:function(e){return e&&Ext.data.NodeInterface.decorate(e),e},updateNode:function(e,t){var n,i=this;t&&!t.isDestroyed&&(t.un({append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",load:"onNodeLoad",scope:i}),t.unjoin(i)),e&&(e.on({scope:i,append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",load:"onNodeLoad"}),e.join(i),n=[],e.childNodes.length&&(n=n.concat(i.retrieveChildNodes(e))),i.getRootVisible()?n.push(e):(e.isLoaded()||e.isLoading())&&e.set("expanded",!0),i.getData().clear(),i.fireEvent("clear",i),i.suspendEvents(),i.add(n),i.resumeEvents(),0===n.length&&(i.loaded=e.loaded=!0),i.fireEvent("refresh",i,i.data))},retrieveChildNodes:function(e){var t=this.getNode(),n=this.getRecursive(),i=[],r=e;if(!e.childNodes.length||!n&&e!==t)return i;if(!n)return e.childNodes;for(;r;)if(r._added){if(delete r._added,r===e)break;r=r.nextSibling||r.parentNode}else r!==e&&i.push(r),r.firstChild?(r._added=!0,r=r.firstChild):r=r.nextSibling||r.parentNode;return i},isVisible:function(e){var t=e.parentNode;if(!this.getRecursive()&&t!==this.getNode())return!1;for(;t;){if(!t.isExpanded())return!1;if(t===this.getNode())break;t=t.parentNode}return!0}},0,0,0,0,["store.node"],0,[Ext.data,"NodeStore"],0),Ext.cmd.derive("Ext.data.Request",Ext.Base,{config:{action:void 0,params:void 0,method:"GET",url:null,operation:null,proxy:null,disableCaching:!1,headers:{},callbackKey:null,rawRequest:null,jsonData:void 0,xmlData:void 0,withCredentials:!1,username:null,password:null,binary:!1,callback:null,scope:null,timeout:3e4,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(e){this.initConfig(e)},getParam:function(e){var t,n=this.getParams();return n?n[e]:t},setParam:function(e,t){var n=this.getParams()||{};n[e]=t,this.setParams(n)}},1,0,0,0,0,0,[Ext.data,"Request"],0),Ext.cmd.derive("Ext.mixin.Queryable",Ext.Base,{mixinId:"queryable",isQueryable:!0,query:function(e){return e=e||"*",Ext.ComponentQuery.query(e,this.getQueryRoot())},queryBy:function(e,t){for(var n,i=[],r=this.getQueryRoot().getRefItems(!0),o=0,a=r.length;a>o;++o)n=r[o],e.call(t||n,n)!==!1&&i.push(n);return i},queryById:function(e){return this.down(Ext.makeIdSelector(e))},child:function(e){var t=this.getQueryRoot().getRefItems();return e&&e.isComponent?this.matchById(t,e.getItemId()):(e&&(t=Ext.ComponentQuery.query(e,t)),t.length?t[0]:null)},down:function(e){return e&&e.isComponent?this.matchById(this.getRefItems(!0),e.getItemId()):(e=e||"",this.query(e)[0]||null)},visitPreOrder:function(e,t,n,i){Ext.ComponentQuery._visit(!0,e,this.getQueryRoot(),t,n,i)},visitPostOrder:function(e,t,n,i){Ext.ComponentQuery._visit(!1,e,this.getQueryRoot(),t,n,i)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(e,t){var n,i,r=e.length;for(n=0;r>n;++n)if(i=e[n],i.getItemId()===t)return i;return null}}},0,0,0,0,0,0,[Ext.mixin,"Queryable"],0),Ext.cmd.derive("Ext.data.TreeModel",Ext.data.Model,{getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode}},0,0,0,0,0,[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.data,"TreeModel"],function(){Ext.data.NodeInterface.decorate(this)}),Ext.cmd.derive("Ext.data.TreeStore",Ext.data.NodeStore,{isTreeStore:!0,config:{root:null,rootVisible:!1,recursive:!0,defaultRootProperty:"children",parentIdProperty:null,clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",folderSort:!1},lazyFill:!1,fillCount:0,bulkUpdate:0,_silentOptions:{silent:!0},constructor:function(e){var t=this;t.byIdMap={},Ext.data.NodeStore.prototype.constructor.call(this,e)},applyFields:function(e){var t=this;e&&(t.defaultRootProperty!==t.self.prototype.config.defaultRootProperty&&(e=e.concat({name:t.defaultRootProperty,type:"auto",defaultValue:null,persist:!1})),t.setModel(Ext.define(null,{extend:"Ext.data.TreeModel",fields:e,proxy:t.getProxy()})),t.implicitModel=!0)},onSorterEndUpdate:function(){var e=this,t=e.getSorters(),n=t.getRange(),i=e.getRoot(),r=e.getFolderSort();i&&(r||n.length)?e.getRemoteSort()?n.length&&e.attemptLoad({callback:function(){e.fireEvent("sort",e,n)}}):(i.sort(this.getSortFn(),!0),e.fireEvent("datachanged",e),e.fireEvent("refresh",e),e.fireEvent("sort",e,n)):e.fireEvent("sort",e,n)},updateFolderSort:function(e){this.needsFolderSort=e,this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var e=this,t=this.sorters.getSortFn();return function(n,i){var r,o,a=0;return e.needsFolderSort&&(r=n.data.leaf?1:0,o=i.data.leaf?1:0,a=r-o),e.needsIndexSort&&0===a&&(a=n.data.index-i.data.index),a||t(n,i)}},afterEdit:function(e,t){var n=this;n.needsLocalFilter()&&n.doFilter(e),Ext.data.NodeStore.prototype.afterEdit.call(this,e,t)},fireChangeEvent:function(e){return!!this.byIdMap[e.id]},updateRootVisible:function(e){var t,n=this.getRoot();n&&(t=this.getData(),e?t.insert(0,n):t.remove(n))},updateTrackRemoved:function(){Ext.data.NodeStore.prototype.updateTrackRemoved.apply(this,arguments),this.removedNodes=this.removed,this.removed=null},getRemovedRecords:function(){return this.removedNodes},onDestroyRecords:function(e,t,n){n&&(this.removedNodes.length=0)},updateProxy:function(e){var t;e&&(e.setIdParam&&e.setIdParam(this.getNodeParam()),t=e.getReader(),Ext.isEmpty(t.getRootProperty())&&t.setRootProperty(this.getDefaultRootProperty()))},setProxy:function(e){this.changingProxy=!0,(arguments.callee.$previous||Ext.data.NodeStore.prototype.setProxy).call(this,e),this.changingProxy=!1},applyModel:function(){return Ext.data.NodeStore.prototype.applyModel.apply(this,arguments)||Ext.data.TreeModel},updateModel:function(e){var t=e.prototype.isNode;Ext.data.NodeInterface.decorate(e),t||this.changingProxy||this.getProxy().getReader().buildExtractors(!0)},onFilterEndUpdate:function(e){var t,n,i,r,o=this,a=e.length,s=o.getRoot();if(o.getRemoteFilter())Ext.data.NodeStore.prototype.onFilterEndUpdate.call(this,e);else{if(a?o.doFilter(s):s.cascadeBy({after:function(e){e.set("visible",!0,o._silentOptions)}}),a)for(i=[],t=s.childNodes,r=0,a=t.length;a>r;r++)n=t[r],n.get("visible")&&i.push(n);else i=s.childNodes;o.onNodeFilter(s,i),s.fireEvent("filterchange",s,i),o.fireEvent("filterchange",o,e),o.suppressNextFilter=!0,Ext.data.NodeStore.prototype.onFilterEndUpdate.call(this,e),o.suppressNextFilter=!1}},onNodeFilter:function(e,t){var n=this,i=n.getData(),r=[];n.getRootVisible()&&(t.length?r.push(e):e.set("visible",!1,n._silentOptions)),n.handleNodeExpand(e,t,r),n.suspendEvents(),i.splice(0,i.getCount(),r),n.resumeEvents(),n.suppressNextFilter||(n.fireEvent("datachanged",n),n.fireEvent("refresh",n))},onBeforeNodeExpand:function(e,t,n,i){var r,o,a,s,l,d,u=this;e.isLoaded()?(d=[e.childNodes],i&&d.push.apply(d,i),Ext.callback(t,n||e,d)):e.isLoading()?u.on("load",function(){d=[e.childNodes],i&&d.push.apply(d,i),Ext.callback(t,n||e,d)},u,{single:!0,priority:1001}):(r=u.getProxy().getReader(),o=e.getProxy(),a=o?o.getReader():null,s=a&&a.initialConfig.rootProperty?a:r,l=s.getRoot(e.raw||e.data),l||e.phantom&&!e.isRoot()?(l&&u.fillNode(e,s.extractData(l,{model:e.childType,recordCreator:u.recordCreator})),d=[e.childNodes],i&&d.push.apply(d,i),Ext.callback(t,n||e,d)):(e.isRoot()&&u.clearLoadTask(),u.read({node:e,onChildNodesAvailable:function(){delete u.lastOptions.onChildNodesAvailable,d=[e.childNodes],i&&d.push.apply(d,i),Ext.callback(t,n||e,d)}})))},onNodeExpand:function(e,t){var n=this,i=n.indexOf(e)+1,r=[];n.handleNodeExpand(e,t,r),n.refreshCounter||!e.isRoot()||e.get("visible")?n.insert(i,r):n.loadRecords(r)},handleNodeExpand:function(e,t,n){var i,r,o=this,a=t?t.length:0;if((e===this.getRoot()||o.isVisible(e))&&a)for(i=0;a>i;i++)r=t[i],r.get("visible")&&(n.push(r),r.isExpanded()&&(r.isLoaded()?o.handleNodeExpand(r,r.childNodes,n):(r.set("expanded",!1),r.expand())))},onNodeCollapse:function(e,t,n,i){var r,o=this,a=o.indexOf(e)+1;(o.recursive||e===o.getRoot())&&(o.needsLocalFilter()&&(t=Ext.Array.filter(t,o.filterVisible)),t.length&&o.data.contains(t[0])&&(r=o.indexOfNextVisibleNode(e),o.removeAt(a,r-a)),Ext.callback(n,i))},indexOfNextVisibleNode:function(e){for(var t;e.parentNode;){for(t=e.nextSibling;t&&!t.get("visible");t=t.nextSibling);if(t)return this.indexOf(t);e=e.parentNode}return this.getCount()},filterNew:function(e){return!e.get("root")&&Ext.data.NodeStore.prototype.filterNew.call(this,e)},filterRejects:function(e){return!e.get("root")&&Ext.data.NodeStore.prototype.filterRejects.call(this,e)},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(e,t){Ext.isArray(t)||(t=[t]);var n,i,r=this,o=t.length;for(n=0;!i&&o>n;n++)t[n].get("visible")&&(i=t[n]);i?(r.startRemoveIndex=r.indexOf(t[0]),r.lastRemoveIndexPlusOne=r.indexOfNextVisibleNode(t[t.length-1])):(r.startRemoveIndex=-1,r.lastRemoveIndexPlusOne=0)},afterDrop:Ext.emptyFn,onNodeRemove:function(e,t,n){var i,r=this,o=r.removedNodes,a=t.length,s=r.startRemoveIndex,l=r.lastRemoveIndexPlusOne;for(r.suspendAutoSync(),-1!==s&&(r.removeIsMove=n,r.removeAt(s,l-s),r.removeIsMove=!1),i=0;a>i;i++)t[i].cascadeBy(function(e){r.unregisterNode(e),o&&!n&&(e.phantom||e.erasing||r.loading||(e.removedFrom=r.indexOf(e),o.push(e),r.needsSync=!0))});r.resumeAutoSync()},onNodeAppend:function(e,t,n){this.onNodeInsert(e,t,n)},onNodeInsert:function(e,t,n){var i,r,o,a,s,l,d,u=this,c=t.raw||t.data;if(e&&u.needsLocalFilter()&&u.doFilter(e),u.beginUpdate(),u.isVisible(t)){if(0!==n&&t.previousSibling){for(r=t.previousSibling;r&&!r.get("visible");r=r.previousSibling);for(;r.isExpanded()&&r.lastChild;)r=r.lastChild;i=r}else i=e;u.insert(u.indexOf(i)+1,t),!t.isLeaf()&&t.isExpanded()&&(t.isLoaded()?u.onNodeExpand(t,t.childNodes):u.fillCount||(t.set("expanded",!1),t.expand()))}u.needsSync=u.needsSync||t.phantom||t.dirty,t.isLeaf()||t.isLoaded()||u.lazyFill||(o=u.getProxy().getReader(),a=t.getProxy(),s=a?a.getReader():null,l=s&&s.initialConfig.rootProperty?s:o,d=l.getRoot(c),d&&u.fillNode(t,l.extractData(d,{model:t.childType,recordCreator:u.recordCreator}))),u.endUpdate()},registerNode:function(e,t){var n,i,r,o=this;if(o.byIdMap[e.id]=e,t===!0)for(n=e.childNodes,i=n.length,r=0;i>r;r++)o.registerNode(n[r],!0)},unregisterNode:function(e,t){var n,i,r,o=this;if(delete o.byIdMap[e.id],t===!0)for(n=e.childNodes,i=n.length,r=0;i>r;r++)o.unregisterNode(n[r],!0)},onNodeSort:function(e,t){var n=this;n.suspendAutoSync(),(-1!==n.indexOf(e)||e===n.getRoot()&&!n.getRootVisible()&&e.isExpanded())&&(Ext.suspendLayouts(),n.onNodeCollapse(e,t),n.onNodeExpand(e,t),Ext.resumeLayouts(!0)),n.resumeAutoSync(n.autoSync)},applyRoot:function(e){var t=this,n=t.getModel(),i=n.prototype.idProperty,r=t.getDefaultRootId();return e&&!e.isNode&&(e=Ext.apply({text:t.getDefaultRootText(),root:!0,isFirst:!0,isLast:!0,depth:0,index:0,parentId:null,allowDrag:!1},e),r&&void 0===e[i]&&(e[i]=r),e=new n(e),e.store=e.treeStore=t),e},updateRoot:function(e,t){var n,i,r=this,o=!t;if(r.byIdMap={},r.getTrackRemoved(),r.suspendEvent("add","remove"),t&&t.isModel&&(i=r.rootVisible?[t]:t.childNodes,r.beforeNodeRemove(null,i),t.set("root",!1),r.onNodeRemove(null,i),t.fireEvent("remove",null,t,!1),t.fireEvent("rootchange",null),t.clearListeners(),t.store=t.treeStore=null),r.getData().clear(),e)if(e.fireEventArgs("beforeappend",[null,e])===!1)e=null;else{if(n=e.parentNode){if(!n.removeChild(e,!1,!1,n.getTreeStore()===r))return}else(n=e.getTreeStore())&&n!==r&&e===n.getRoot()&&n.setRoot(null);e.set("root",!0),e.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null}),r.registerNode(e,!0),e.fireEvent("append",null,e,!1),e.fireEvent("rootchange",e),r.onNodeAppend(null,e,0),e.phantom=!0}return r.fireEvent("rootchange",e,t),e&&(r.getAutoLoad()||e.isExpanded())?e.isLoaded()?(r.onNodeExpand(e,e.childNodes),r.fireEvent("datachanged",r),r.fireEvent("refresh",r)):(e.data.expanded=!1,e.expand(!1,function(){r.fireEvent("datachanged",r),r.fireEvent("refresh",r)})):o||(r.fireEvent("datachanged",r),r.fireEvent("refresh",r)),r.resumeEvent("add","remove"),e},getNodeById:function(e){return this.byIdMap[e]||null},findNode:function(e,t,n,i,r){if(Ext.isEmpty(t,!1))return null;if(t===this.model.idProperty&&arguments.length<3)return this.byIdMap[t];var o=Ext.String.createRegex(t,n,i,r),a=null;return Ext.Object.eachValue(this.byIdMap,function(t){return t&&o.test(t.get(e))?(a=t,!1):void 0}),a},load:function(e){e=e||{},e.params=e.params||{};var t,n,i=this,r=e.node||i.getRoot(),o=e.callback,a=e.scope,s=i.getClearOnLoad(),l=r&&r.isRoot()&&r.isLoaded()&&s;return r?(r.data.expanded&&!l&&(r.data.loaded=!1,s&&(r.data.expanded=!1),e.callback=function(e,t,n){s||r.collapse(),r.expand(),Ext.callback(o,a,[e,t,n])}),e.id=r.getId(),e=Ext.apply({filters:i.getFilters().items,sorters:i.getSorters().items,node:e.node||r,internalScope:i,internalCallback:i.onProxyLoad},e),i.lastOptions=Ext.apply({},e),e.isReload=l,t=i.createOperation("read",e),i.fireEvent("beforeload",i,t)!==!1&&(i.loading=!0,i.clearLoadTask(),l?(i.getClearRemovedOnLoad()&&(i.removedNodes.length=0),i.unregisterNode(r,!0),r.childNodes.length=0,n=!0):s&&(i.getTrackRemoved()&&i.getClearRemovedOnLoad()&&i.clearRemoved(r),r.removeAll(!1)),i.loading&&r&&r.set("loading",!0),n&&(i.clearData(!0),i.getRootVisible()&&(i.suspendEvents(),i.add(r),i.resumeEvents())),t.execute()),i):void i.setRoot({expanded:!0})},onProxyLoad:function(e){var t=this,n=e.initialConfig,i=e.wasSuccessful(),r=e.getRecords(),o=n.node,a=n.isReload,s=e.getScope()||t,l=[r,e,i];t.isDestroyed||(t.loading=!1,o.set("loading",!1),i&&(++t.loadCount,t.getClearOnLoad()||(r=t.cleanRecords(o,r)),t.getParentIdProperty()&&(r=t.treeify(o,r)),a&&t.suspendEvent("add","update"),r=t.fillNode(o,r)),a?(t.resumeEvent("add","update"),t.callObservers("BeforePopulate"),t.fireEvent("datachanged",t),t.fireEvent("refresh",t),t.callObservers("AfterPopulate")):Ext.callback(n.onChildNodesAvailable,s,l),t.fireEvent("load",t,r,i,e,o))},clearRemoved:function(e){var t,n,i,r=this,o=r.removedNodes,a=e.getId(),s=o.length,l=s,d={},u=[],c={};if(e===r.getRoot())return void(r.removedNodes.length=0);for(;l--;)t=o[l],c[t.getId()]=t;for(l=s;l--;){for(t=o[l],n=t;n&&n.getId()!==a;)i=n.get("parentId")||n.get("lastParentId"),n=n.parentNode||r.getNodeById(i)||c[i];n&&(d[t.getId()]=t)}for(l=0;s>l;l++)t=o[l],d[t.getId()]||u.push(t);r.removedNodes=u},fillNode:function(e,t){var n,i,r,o,a=this,s=t?t.length:0,l=a.getSorters(),d=!1,u=a.sortOnLoad&&s>1&&!a.getRemoteSort()&&a.getFolderSort()||l.length;if(++a.bulkUpdate,s){for(a.needsLocalFilter()&&(o=a.getFilters().getFilterFn(),t[0].set("visible",o(t[0]))),r=1;s>r;r++)n=t[r],i=t[r-1],o&&n.set("visible",o(n)),d=n.data.index!==i.data.index;u?(a.needsIndexSort=!0,Ext.Array.sort(t,a.getSortFn()),a.needsIndexSort=!1):d&&Ext.Array.sort(t,a.sortByIndex)}return 1===a.bulkUpdate?e.set("loaded",!0):e.data.loaded=!0,t.length&&e.appendChild(t,void 0,!0),--a.bulkUpdate,t},beginFill:function(){var e=this;e.fillCount++||(e.beginUpdate(),e.suspendEvent("add","update"),e.suspendAutoSync(),e.fillArray=[])},endFill:function(e,t){var n,i,r,o=this,a=o.fillArray;if(a.push(t),!--o.fillCount){for(o.resumeAutoSync(),o.resumeEvent("add","update"),n=0,i=a.length;i>n;n++)r=o.indexOf(a[n][0]),-1!==r&&o.fireEvent("add",o,a[n],r);o.fillArray=null,o.endUpdate()}},sortByIndex:function(e,t){return e.data.index-t.data.index},onIdChanged:function(e,t,n){var i,r=e.childNodes,o=r&&r.length;for(Ext.data.NodeStore.prototype.onIdChanged.apply(this,arguments),delete this.byIdMap[t],this.byIdMap[n]=e,i=0;o>i;i++)r[i].set("parentId",n)},treeify:function(e,t){var n,i,r,o=this,a=e.getId(),s=o.getParentIdProperty(),l=t.length,d=[],u={};for(n=0;l>n;n++)i=t[n],u[i.id]=i;for(n=0;l>n;n++)i=t[n],r=i.data[s],!r&&0!==r||r===a?d.push(i):u[r].appendChild(i),o.registerNode(i);return d},cleanRecords:function(e,t){for(var n,i={},r=e.childNodes,o=0,a=r.length,s=[];a>o;++o)i[r[o].getId()]=!0;for(o=0,a=t.length;a>o;++o)n=t[o],i[n.getId()]||s.push(n);return s},removeAll:function(){this.suspendEvents(),this.setRoot(null),this.resumeEvents(),Ext.data.NodeStore.prototype.removeAll.call(this)},doSort:function(e){var t=this;t.getRemoteSort()?t.load():(t.tree.sort(e,!0),t.fireEvent("datachanged",t),t.fireEvent("refresh",t)),t.fireEvent("sort",t,t.sorters.getRange())},filterVisible:function(e){return e.get("visible")},isVisible:function(e){for(var t=e.parentNode,n=e.data.visible,i=this.getRoot();n&&t;)n=t.data.expanded&&t.data.visible,t=t.parentNode;return n&&!(e===i&&!this.getRootVisible())},commitChanges:function(){var e=this.removedNodes;e&&(e.length=0),Ext.data.NodeStore.prototype.commitChanges.call(this)},getRootNode:function(){return this.getRoot()},setRootNode:function(e){return this.setRoot(e),this.getRoot()},privates:{recordCreator:function(e,t){return new t(e)},doFilter:function(e){var t=this.getRoot(),n=this.getFilters().getFilterFn();this.filterNodes(t,e,n)},filterNodes:function(e,t,n){var i,r=!1,o=t.childNodes,a=o&&o.length;if(a)for(i=0;a>i;++i)this.filterNodes(e,o[i],n);return r=t===e||n(t),t.set("visible",r,this._silentOptions),r},needsLocalFilter:function(){return!this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(e){var t=this.getData();t.setFilters(null),e&&e.on("endupdate",this.onFilterEndUpdate,this)},onRemoteSortSet:function(e){var t=this.getData();t.setSorters(null),e&&e.on("endupdate",this.onSorterEndUpdate,this)}},deprecated:{5:{properties:{tree:null}}}},1,0,0,0,["store.tree"],0,[Ext.data,"TreeStore"],0),Ext.cmd.derive("Ext.data.Validation",Ext.data.Model,{isValidation:!0,syncGeneration:0,attach:function(e){this.record=e,delete this.data.id},getValidation:function(){return null},isValid:function(){var e=this;return e.syncGeneration!==e.record.generation&&e.refresh(),!e.dirty},refresh:function(e){var t,n,i,r,o,a,s,l,d,u=this,c=u.data,h=u.record,p=h.fields,f=h.generation,g=h.data,m=h.validationSeparator,x=null;if(e||u.syncGeneration!==f){for(u.syncGeneration=f,o=0,a=p.length;a>o;++o)r=p[o],d=r.name,l=g[d],t=r.defaultInvalidMessage,i=0,d in c?n=c[d]:c[d]=n=!0,r.validate!==Ext.emptyFn&&(s=r.validate(l,m),s!==!0&&(i=s||t)),i||(i=!0),i!==n&&((x||(x={}))[d]=i);x&&u.set(x)}}},0,0,0,0,0,0,[Ext.data,"Validation"],0),Ext.cmd.derive("Ext.dom.Helper",Ext.Base,function(){var e="afterbegin",t="afterend",n="beforebegin",i="beforeend",r=["BeforeBegin","previousSibling"],o=["AfterEnd","nextSibling"],a={beforebegin:r,afterend:o},s={beforebegin:r,afterend:o,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:!0,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){function e(e,t,n){return t+"-"+n.toLowerCase()}var t=/([a-z])([A-Z])/g,n={};return function(i){return n[i]||(n[i]=i.replace(t,e))}}(),generateMarkup:function(e,t){var n,i,r,o,a,s=this,l=typeof e;if("string"===l||"number"===l)t.push(e);else if(Ext.isArray(e))for(o=0;o<e.length;o++)e[o]&&s.generateMarkup(e[o],t);else{r=e.tag||"div",t.push("<",r);for(n in e)e.hasOwnProperty(n)&&(i=e[n],void 0===i||s.confRe.test(n)||("object"==typeof i?(t.push(" ",n,'="'),s.generateStyles(i,t,!0).push('"')):t.push(" ",s.attributeTransform[n]||n,'="',i,'"')));s.emptyTags.test(r)?t.push("/>"):(t.push(">"),(i=e.tpl)&&i.applyOut(e.tplData,t),(i=e.html)&&t.push(i),(i=e.cn||e.children)&&s.generateMarkup(i,t),a=s.closeTags,t.push(a[r]||(a[r]="</"+r+">")))}return t},generateStyles:function(e,t,n){var i,r,o=t||[];for(i in e)e.hasOwnProperty(i)&&(r=e[i],i=this.decamelizeName(i),n&&Ext.String.hasHtmlCharacters(r)&&(r=Ext.String.htmlEncode(r)),o.push(i,":",r,";"));return t||o.join("")},markup:function(e){if("string"==typeof e)return e;var t=this.generateMarkup(e,[]);return t.join("")},applyStyles:function(e,t){Ext.fly(e).applyStyles(t)},createContextualFragment:function(e){var t,n,i=this.detachedDiv,r=document.createDocumentFragment();for(i.innerHTML=e,n=i.childNodes,t=n.length;t--;)r.appendChild(n[0]);return r},createDom:function(e){var t,n=this,i=n.markup(e),r=n.detachedDiv;return r.innerHTML=i,t=r.firstChild,Ext.supports.ChildContentClearedWhenSettingInnerHTML?t.cloneNode(!0):t},insertHtml:function(r,o,l){var d,u,c,h,p,f=this;if(r=r.toLowerCase(),!o.insertAdjacentHTML){if(3===o.nodeType&&(r=r===e?n:r,r=r===i?t:r),u=Ext.supports.CreateContextualFragment?o.ownerDocument.createRange():void 0,h="setStart"+(this.endRe.test(r)?"After":"Before"),a[r])return u?(u[h](o),p=u.createContextualFragment(l)):p=this.createContextualFragment(l),o.parentNode.insertBefore(p,r===n?o:o.nextSibling),o[(r===n?"previous":"next")+"Sibling"];if(c=(r===e?"first":"last")+"Child",o.firstChild){if(u)try{u[h](o[c]),p=u.createContextualFragment(l)}catch(g){p=this.createContextualFragment(l)}else p=this.createContextualFragment(l);r===e?o.insertBefore(p,o.firstChild):o.appendChild(p)}else o.innerHTML=l;return o[c]}return f.ieInsertHtml&&(p=f.ieInsertHtml(r,o,l))?p:(d=s[r])?(o.insertAdjacentHTML(d[0],l),o[d[1]]):void 0},insertBefore:function(e,t,i){return this.doInsert(e,t,i,n)},insertAfter:function(e,n,i){return this.doInsert(e,n,i,t)},insertFirst:function(t,n,i){return this.doInsert(t,n,i,e)},append:function(e,t,n){return this.doInsert(e,t,n,i)},overwrite:function(e,t,n){var i,r=this;return e=Ext.getDom(e),t=r.markup(t),r.ieOverwrite&&(i=r.ieOverwrite(e,t)),i||(e.innerHTML=t,i=e.firstChild),n?Ext.get(i):i},doInsert:function(r,o,s,l){var d,u=this;return r=r.dom||Ext.getDom(r),"innerHTML"in r?d=u.insertHtml(l,r,u.markup(o)):(d=u.createDom(o,null),3===r.nodeType&&(l=l===e?n:l,l=l===i?t:l),a[l]?r.parentNode.insertBefore(d,l===n?r:r.nextSibling):r.firstChild&&l===e?r.insertBefore(d,r.firstChild):r.appendChild(d)),s?Ext.get(d):d},createTemplate:function(e){var t=this.markup(e);return new Ext.Template(t)},createHtml:function(e){return this.markup(e)}}},0,0,0,0,0,0,[Ext.dom,"Helper",Ext,"DomHelper",Ext.core,"DomHelper"],0),Ext.define("Ext.overrides.dom.Helper",function(){var e=/^(?:table|thead|tbody|tr|td)$/i,t=/td|tr|tbody|thead/i,n="<table>",i="</table>",r=n+"<tbody>",o="</tbody>"+i,a=r+"<tr>",s="</tr>"+o;return{override:"Ext.dom.Helper",ieInsertHtml:function(t,n,i){var r=null;return Ext.isIE9m&&e.test(n.tagName)&&(r=this.insertIntoTable(n.tagName.toLowerCase(),t,n,i)),r},ieOverwrite:function(t,n){if(Ext.isIE9m&&e.test(t.tagName)){for(;t.firstChild;)t.removeChild(t.firstChild);if(n)return this.insertHtml("afterbegin",t,n)}},ieTable:function(e,t,n,i){var r,o,a=-1,s=this.detachedDiv;for(s.innerHTML=""+t+n+i;++a<e;)s=s.firstChild;if(r=s.nextSibling)for(r=s,s=document.createDocumentFragment();r;)o=r.nextSibling,s.appendChild(r),r=o;return s},insertIntoTable:function(e,l,d,u){var c,h,p="beforebegin"===l,f="afterbegin"===l,g="beforeend"===l,m="afterend"===l;return"td"===e&&(f||g)||!t.test(e)&&(p||m)?null:(h=p?d:m?d.nextSibling:f?d.firstChild:null,(p||m)&&(d=d.parentNode),c="td"===e||"tr"===e&&(g||f)?this.ieTable(4,a,u,s):("tbody"===e||"thead"===e)&&(g||f)||"tr"===e&&(p||m)?this.ieTable(3,r,u,o):this.ieTable(2,n,u,i),d.insertBefore(c,h),c)}}}()),Ext.cmd.derive("Ext.dom.Query",Ext.Base,function(){function children(e){for(var t,n=e.firstChild,i=-1;n;)t=n.nextSibling,3!=n.nodeType||nonSpace.test(n.nodeValue)?n.nodeIndex=++i:e.removeChild(n),n=t;return this}function attrValue(e,t){return e.tagName||void 0===e.length||(e=e[0]),e?"for"==t?e.htmlFor:"class"==t||"className"==t?e.className:e.getAttribute(t)||e[t]:null}function getNodes(e,t,n){var i,r,o,a,s,l,d,u,c,h=[],p=-1;if(!e)return h;if(n=n.replace("|",":")||"*",void 0!==e.getElementsByTagName&&(e=[e]),t){if("/"==t||">"==t)for(d=n.toUpperCase(),r=0;o=e[r];r++)for(l=o.childNodes,a=0;c=l[a];a++)(c.nodeName==d||c.nodeName==n||"*"==n)&&(h[++p]=c);else if("+"==t)for(d=n.toUpperCase(),r=0;u=e[r];r++){for(;(u=u.nextSibling)&&1!=u.nodeType;);!u||u.nodeName!=d&&u.nodeName!=n&&"*"!=n||(h[++p]=u)}else if("~"==t)for(d=n.toUpperCase(),r=0;u=e[r];r++)for(;u=u.nextSibling;)(u.nodeName==d||u.nodeName==n||"*"==n)&&(h[++p]=u)}else if(n=unescapeCssSelector(n),!supportsColonNsSeparator&&DQ.isXml(e[0])&&-1!==n.indexOf(":"))for(r=0;o=e[r];r++)for(i=o.getElementsByTagName(n.split(":").pop()),a=0;s=i[a];a++)s.tagName===n&&(h[++p]=s);else for(r=0;o=e[r];r++)for(i=o.getElementsByTagName(n),a=0;s=i[a];a++)h[++p]=s;return h}function concat(e,t){return e.push.apply(e,t),e}function byTag(e,t){if((e.tagName||e===doc)&&(e=[e]),!t)return e;var n,i,r=[],o=-1;for(t=t.toLowerCase(),n=0;i=e[n];n++)1==i.nodeType&&i.tagName.toLowerCase()==t&&(r[++o]=i);return r}function byId(e,t){if(t=unescapeCssSelector(t),(e.tagName||e===doc)&&(e=[e]),!t)return e;var n,i,r=[],o=-1;for(n=0;i=e[n];n++)if(i&&i.id==t)return r[++o]=i,r;return r}function byAttribute(e,t,n,i,r){var o,a,s,l,d,u=[],c=-1,h="{"==r,p=DQ.operators[i];for(n=unescapeCssSelector(n),l=0;d=e[l];l++)1===d.nodeType&&(s||(a=DQ.isXml(d),s=!0),o=a?d.getAttribute(t):h?DQ.getStyle(d,t):"class"==t||"className"==t?d.className:"for"==t?d.htmlFor:"href"==t?d.getAttribute("href",2):d.getAttribute(t),(p&&p(o,n)||!p&&o)&&(u[++c]=d));return u}function byPseudo(e,t,n){return n=unescapeCssSelector(n),DQ.pseudos[t](e,n)}function nodupIEXml(e){var t,n,i,r,o=++key;for(e[0].setAttribute("_nodup",o),t=[e[0]],n=1,i=e.length;i>n;n++)r=e[n],!r.getAttribute("_nodup")!=o&&(r.setAttribute("_nodup",o),t[t.length]=r);for(n=0,i=e.length;i>n;n++)e[n].removeAttribute("_nodup");return t}function nodup(e){if(!e)return[];var t,n,i,r,o,a=e.length,s=e,l=-1;if(!a||void 0!==e.nodeType||1==a)return e;if(isIE&&void 0!==e[0].selectSingleNode)return nodupIEXml(e);for(r=++key,e[0]._nodup=r,n=1;t=e[n];n++){if(t._nodup==r){for(s=[],o=0;n>o;o++)s[++l]=e[o];for(o=n+1;i=e[o];o++)i._nodup!=r&&(i._nodup=r,s[++l]=i);return s}t._nodup=r}return s}function quickDiffIEXml(e,t){var n,i,r=++key,o=[];for(n=0,i=e.length;i>n;n++)e[n].setAttribute("_qdiff",r);for(n=0,i=t.length;i>n;n++)t[n].getAttribute("_qdiff")!=r&&(o[o.length]=t[n]);for(n=0,i=e.length;i>n;n++)e[n].removeAttribute("_qdiff");return o}function quickDiff(e,t){var n,i,r=e.length,o=++key,a=[];if(!r)return t;if(isIE&&void 0!==e[0].selectSingleNode)return quickDiffIEXml(e,t);for(n=0;r>n;n++)e[n]._qdiff=o;for(n=0,i=t.length;i>n;n++)t[n]._qdiff!=o&&(a[a.length]=t[n]);return a}function quickId(e,t,n,i){if(e==n){i=unescapeCssSelector(i);var r=n.ownerDocument||n;return r.getElementById(i)}return e=getNodes(e,t,"*"),byId(e,i)}var DQ,doc=document,cache,simpleCache,valueCache,useClassList=!!doc.documentElement.classList,useElementPointer=!!doc.documentElement.firstElementChild,useChildrenCollection=function(){var e=doc.createElement("div");return e.innerHTML="<!-- -->text<!-- -->",e.children&&0===e.children.length}(),nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*\|\\]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,startIdRe=/^\s*#/,isIE=window.ActiveXObject?!0:!1,key=30803,longHex=/\\([0-9a-fA-F]{6})/g,shortHex=/\\([0-9a-fA-F]{1,6})\s{0,1}/g,nonHex=/\\([^0-9a-fA-F]{1})/g,escapes=/\\/g,num,hasEscapes,supportsColonNsSeparator=function(){var e,t='<r><a:b xmlns:a="n"></a:b></r>';return window.DOMParser?e=(new DOMParser).parseFromString(t,"application/xml"):(e=new ActiveXObject("Microsoft.XMLDOM"),e.loadXML(t)),!!e.getElementsByTagName("a:b").length}(),longHexToChar=function(e,t){return String.fromCharCode(parseInt(t,16))},shortToLongHex=function(e,t){for(;t.length<6;)t="0"+t;return"\\"+t},charToLongHex=function(e,t){return num=t.charCodeAt(0).toString(16),1===num.length&&(num="0"+num),"\\0000"+num},unescapeCssSelector=function(e){return hasEscapes?e.replace(longHex,longHexToChar):e},setupEscapes=function(e){return hasEscapes=e.indexOf("\\")>-1,hasEscapes&&(e=e.replace(shortHex,shortToLongHex).replace(nonHex,charToLongHex).replace(escapes,"\\\\")),e};return eval("var batch = 30803, child, next, prev, byClassName;"),child=useChildrenCollection?function(e,t){return e.children[t]}:function(e,t){for(var n=0,i=e.firstChild;i;){if(1==i.nodeType&&++n==t)return i;i=i.nextSibling}return null},next=useElementPointer?function(e){return e.nextElementSibling}:function(e){for(;(e=e.nextSibling)&&1!=e.nodeType;);return e},prev=useElementPointer?function(e){return e.previousElementSibling}:function(e){for(;(e=e.previousSibling)&&1!=e.nodeType;);return e},byClassName=useClassList?function(e,t){if(t=unescapeCssSelector(t),!t)return e;var n,i,r,o=[],a=-1;for(n=0;i=e[n];n++)r=i.classList,r?r.contains(t)&&(o[++a]=i):-1!==(" "+i.className+" ").indexOf(t)&&(o[++a]=i);return o}:function(e,t){if(t=unescapeCssSelector(t),!t)return e;var n,i,r=[],o=-1;for(n=0;i=e[n];n++)-1!==(" "+i.className+" ").indexOf(t)&&(r[++o]=i);return r},{singleton:!0,alternateClassName:["Ext.core.DomQuery","Ext.DomQuery"],_init:function(){DQ=this,DQ.operators=Ext.Object.chain(Ext.util.Operators),DQ._cache=cache=new Ext.util.LruCache({maxSize:200}),DQ._valueCache=valueCache=new Ext.util.LruCache({maxSize:200}),DQ._simpleCache=simpleCache=new Ext.util.LruCache({maxSize:200})},clearCache:function(){cache.clear(),valueCache.clear(),simpleCache.clear()},getStyle:function(e,t){return Ext.fly(e,"_DomQuery").getStyle(t)},compile:function(path,type){type=type||"select";var fn=["var f = function(root) {\n var mode; ++batch; var n = root || document;\n"],lastPath,matchers=DQ.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe),tokenMatch,matched,j,t,m;for(path=setupEscapes(path),lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',path=path.replace(lmode[1],""));"/"==path.substr(0,1);)path=path.substr(1);for(;path&&lastPath!=path;){for(lastPath=path,tokenMatch=path.match(tagTokenRe),"select"==type?tokenMatch?("#"==tokenMatch[1]?fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],"")):"@"!=path.substr(0,1)&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tokenMatch&&("#"==tokenMatch[1]?fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");':fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],""));!(modeMatch=path.match(modeRe));){for(matched=!1,j=0;matchersLn>j;j++)if(t=matchers[j],m=path.match(t.re)){fn[fn.length]=t.select.replace(tplRe,function(e,t){return m[t]}),path=path.replace(m[0],""),matched=!0;break}matched||Ext.Error.raise({sourceClass:"Ext.DomQuery",sourceMethod:"compile",msg:'Error parsing selector. Parsing failed at "'+path+'"'})}modeMatch[1]&&(fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";',path=path.replace(modeMatch[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),
f},jsSelect:function(e,t,n){t=t||doc,"string"==typeof t&&(t=doc.getElementById(t));var i,r,o,a,s,l=Ext.splitAndUnescape(e,","),d=[];for(r=0,o=l.length;o>r;r++)a=l[r].replace(trimRe,""),i=cache.get(a),i?setupEscapes(a):(i=DQ.compile(a,n),i||Ext.Error.raise({sourceClass:"Ext.DomQuery",sourceMethod:"jsSelect",msg:a+" is not a valid selector"}),cache.add(a,i)),s=i(t),s&&s!==doc&&(d=d.concat(s));return l.length>1?nodup(d):d},isXml:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1},select:doc.querySelectorAll?function(e,t,n,i){if(t=t||doc,!DQ.isXml(t))try{return t.parentNode&&9!==t.nodeType&&-1===e.indexOf(",")&&!startIdRe.test(e)&&(e=Ext.makeIdSelector(Ext.id(t))+" "+e,t=t.parentNode),i?[t.querySelector(e)]:Ext.Array.toArray(t.querySelectorAll(e))}catch(r){}return DQ.jsSelect.call(this,e,t,n)}:function(e,t,n){return DQ.jsSelect.call(this,e,t,n)},selectNode:function(e,t){return Ext.DomQuery.select(e,t,null,!0)[0]},selectValue:function(e,t){e=e.replace(trimRe,"");var n,i=valueCache.get(e);return i?setupEscapes(e):(i=DQ.compile(e,"select"),valueCache.add(e,i)),n=i(t),DQ.getNodeValue(n[0]?n[0]:n)},getNodeValue:function(e,t){"function"==typeof e.normalize&&e.normalize();var n=e&&e.firstChild?e.firstChild.nodeValue:null;return null===n||void 0===n||""===n?t:n},selectNumber:function(e,t,n){var i=DQ.selectValue(e,t,n||0);return parseFloat(i)},is:function(e,t){"string"==typeof e&&(e=doc.getElementById(e));var n=Ext.isArray(e),i=DQ.filter(n?e:[e],t);return n?i.length==e.length:i.length>0},filter:function(e,t,n){t=t.replace(trimRe,"");var i,r=simpleCache.get(t);return r?setupEscapes(t):(r=DQ.compile(t,"simple"),simpleCache.add(t,r)),i=r(e),n?quickDiff(i,e):i},matchers:[{re:/^\.([\w\-\\]+)/,select:useClassList?'n = byClassName(n, "{1}");':'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w\-\\]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-\.]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],pseudos:{"first-child":function(e){var t,n,i,r=[],o=-1;for(n=0;i=t=e[n];n++){for(;(t=t.previousSibling)&&1!=t.nodeType;);t||(r[++o]=i)}return r},"last-child":function(e){var t,n,i,r=[],o=-1;for(n=0;i=t=e[n];n++){for(;(t=t.nextSibling)&&1!=t.nodeType;);t||(r[++o]=i)}return r},"nth-child":function(e,t){var n,i,r,o,a,s=[],l=-1,d=nthRe.exec("even"==t&&"2n"||"odd"==t&&"2n+1"||!nthRe2.test(t)&&"n+"+t||t),u=(d[1]||1)-0,c=d[2]-0;for(n=0;i=e[n];n++){if(a=i.parentNode,batch!=a._batch){for(r=0,o=a.firstChild;o;o=o.nextSibling)1==o.nodeType&&(o.nodeIndex=++r);a._batch=batch}1==u?(0===c||i.nodeIndex==c)&&(s[++l]=i):(i.nodeIndex+c)%u===0&&(s[++l]=i)}return s},"only-child":function(e){var t,n,i=[],r=-1;for(t=0;n=e[t];t++)prev(n)||next(n)||(i[++r]=n);return i},empty:function(e){var t,n,i,r,o,a,s=[],l=-1;for(t=0;n=e[t];t++){for(i=n.childNodes,r=0,a=!0;o=i[r];)if(++r,1==o.nodeType||3==o.nodeType){a=!1;break}a&&(s[++l]=n)}return s},contains:function(e,t){var n,i,r=[],o=-1;for(n=0;i=e[n];n++)-1!=(i.textContent||i.innerText||i.text||"").indexOf(t)&&(r[++o]=i);return r},nodeValue:function(e,t){var n,i,r=[],o=-1;for(n=0;i=e[n];n++)i.firstChild&&i.firstChild.nodeValue==t&&(r[++o]=i);return r},checked:function(e){var t,n,i=[],r=-1;for(t=0;n=e[t];t++)n.checked===!0&&(i[++r]=n);return i},not:function(e,t){return DQ.filter(e,t,!0)},any:function(e,t){var n,i,r,o,a=t.split("|"),s=[],l=-1;for(i=0;r=e[i];i++)for(o=0;n=a[o];o++)if(DQ.is(r,n)){s[++l]=r;break}return s},odd:function(e){return this["nth-child"](e,"odd")},even:function(e){return this["nth-child"](e,"even")},nth:function(e,t){return e[t-1]||[]},first:function(e){return e[0]||[]},last:function(e){return e[e.length-1]||[]},has:function(e,t){var n,i,r=DQ.select,o=[],a=-1;for(n=0;i=e[n];n++)r(t,i).length>0&&(o[++a]=i);return o},next:function(e,t){var n,i,r,o=DQ.is,a=[],s=-1;for(n=0;i=e[n];n++)r=next(i),r&&o(r,t)&&(a[++s]=i);return a},prev:function(e,t){var n,i,r,o=DQ.is,a=[],s=-1;for(n=0;i=e[n];n++)r=prev(i),r&&o(r,t)&&(a[++s]=i);return a},focusable:function(e){for(var t,n=e.length,i=[],r=0;n>r;r++)t=e[r],Ext.fly(t,"_DomQuery").isFocusable()&&i.push(t);return i},visible:function(e,t){for(var n,i=e.length,r=[],o=0;i>o;o++)n=e[o],Ext.fly(n,"_DomQuery").isVisible(t)&&r.push(n);return r},isScrolled:function(e){var t,n,i,r=[],o=-1;for(t=0;n=e[t];t++)i=Ext.fly(n,"_DomQuery").getScroll(),(i.top>0||i.left>0)&&(r[++o]=n);return r}}}},0,0,0,0,0,0,[Ext.dom,"Query",Ext.core,"DomQuery",Ext,"DomQuery"],function(){this._init()}),Ext.cmd.derive("Ext.data.identifier.Uuid",Ext.data.identifier.Generator,{isUnique:!0,config:{id:null},constructor:function(e){Ext.data.identifier.Generator.prototype.constructor.call(this,e),this.reconfigure(e)},reconfigure:function(e){var t=this.self;this.generate=e&&1===e.version?t.createSequential(e.salt,e.timestamp,e.clockSeq):t.createRandom()},clone:null,statics:{createRandom:function(){var e="xxxxxxxx-xxxx-4xxx-Rxxx-xMxxxxxxxxxx".split(""),t="0123456789abcdef".split(""),n=e.length,i=[];return function(){for(var r,o,a=0;n>a;++a)o=e[a],"-"!==o&&"4"!==o&&(r=16*Math.random(),r="R"===o?3&r|8:r|("M"===o?1:0),o=t[r]),i[a]=o;return i.join("")}},createSequential:function(e,t,n){var i=[],r=Math.pow(2,32),o=e.lo,a=e.hi,s=t.lo,l=t.hi,d=function(e,t){var n=e.toString(16).toLowerCase();return n.length>t?n=n.substring(n.length-t):n.length<t&&(n=Ext.String.leftPad(n,t,"0")),n};return"number"==typeof e&&(a=Math.floor(e/r),o=Math.floor(e-a*r)),"number"==typeof t&&(l=Math.floor(t/r),s=Math.floor(t-l*r)),a|=256,i[3]=d(128|n>>>8&63,2)+d(255&n,2),i[4]=d(a,4)+d(o,8),function(){return i[0]=d(s,8),i[1]=d(65535&l,4),i[2]=d(l>>>16&4095|4096,4),++s,s>=r&&(s=0,++l),i.join("-")}}}},1,0,0,0,["data.identifier.uuid"],0,[Ext.data.identifier,"Uuid"],function(){this.Global=new this({id:"uuid"})}),Ext.cmd.derive("Ext.data.proxy.WebStorage",Ext.data.proxy.Client,{alternateClassName:"Ext.data.WebStorageProxy",config:{id:void 0},constructor:function(){Ext.data.proxy.Client.prototype.constructor.apply(this,arguments),this.cache={},this.initialize()},create:function(e){var t,n,i,r,o=this,a=e.getRecords(),s=a.length,l=o.getIds();for(void 0===o.isHierarchical&&(o.isHierarchical=!!a[0].isNode,o.isHierarchical&&o.getStorageObject().setItem(o.getTreeKey(),!0)),i=0;s>i;i++)n=a[i],n.phantom?(n.phantom=!1,r=n.identifier,t=r&&r.isUnique?n.getId():o.getNextId()):t=n.getId(),o.setRecord(n,t),n.commit(),l.push(t);o.setIds(l),e.setSuccessful(!0)},read:function(e){var t,n,i,r,o,a,s,l,d,u,c,h,p,f=this,g=[],m=!0,x=f.getModel(),v=0,y=e.getRecordCreator();if(f.isHierarchical)g=f.getTreeData();else if(l=f.getIds(),d=l.length,c=e.getId())u=f.getRecord(c),null!==u&&(s=y?y(u,x):new x(u)),s?g.push(s):m=!1;else{for(i=e.getSorters(),n=e.getFilters(),r=e.getLimit(),t=[],h=0;d>h;h++)u=f.getRecord(l[h]),s=y?y(u,x):new x(u),t.push(s);for(i&&Ext.Array.sort(t,Ext.util.Sorter.createComparator(i)),h=e.getStart()||0;d>h;h++){if(s=t[h],a=!0,n)for(p=0,o=n.length;o>p;p++)a=n[p].filter(s);if(a&&(g.push(s),v++),r&&v===r)break}}m?(e.setResultSet(new Ext.data.ResultSet({records:g,total:g.length,loaded:!0})),e.setSuccessful(!0)):e.setException("Unable to load records")},update:function(e){var t,n,i,r=e.getRecords(),o=r.length,a=this.getIds();for(i=0;o>i;i++)t=r[i],this.setRecord(t),t.commit(),n=t.getId(),void 0!==n&&-1===Ext.Array.indexOf(a,n)&&a.push(n);this.setIds(a),e.setSuccessful(!0)},erase:function(e){for(var t,n=this,i=e.getRecords(),r=n.getIds(),o=r.length,a=[],s={},l=i.length;l--;)Ext.apply(s,n.removeRecord(i[l]));for(l=0;o>l;l++)t=r[l],s[t]||a.push(t);n.setIds(a),e.setSuccessful(!0)},getRecord:function(e){var t=this,n=t.cache,i=n[e]?n[e]:Ext.decode(t.getStorageObject().getItem(t.getRecordKey(e)));return i?(n[e]=i,i[t.getModel().prototype.idProperty]=e,Ext.merge({},i)):null},setRecord:function(e,t){t?e.set("id",t,{commit:!0}):t=e.getId();for(var n,i,r,o,a=this,s=e.getData(),l={},d=a.getModel(),u=d.getFields(),c=u.length,h=0;c>h;h++)n=u[h],i=n.name,n.persist&&(l[i]=s[i]);delete l[d.prototype.idProperty],e.isNode&&1===e.get("depth")&&delete l.parentId,r=a.getStorageObject(),o=a.getRecordKey(t),a.cache[t]=l,r.removeItem(o),r.setItem(o,Ext.encode(l))},removeRecord:function(e){var t,n,i=this,r=e.getId(),o={};if(o[r]=e,i.getStorageObject().removeItem(i.getRecordKey(r)),delete i.cache[r],e.childNodes)for(n=e.childNodes,t=n.length;t--;)Ext.apply(o,i.removeRecord(n[t]));return o},getRecordKey:function(e){return e.isModel&&(e=e.getId()),Ext.String.format("{0}-{1}",this.getId(),e)},getRecordCounterKey:function(){return Ext.String.format("{0}-counter",this.getId())},getTreeKey:function(){return Ext.String.format("{0}-tree",this.getId())},getIds:function(){var e,t=this,n=(t.getStorageObject().getItem(t.getId())||"").split(","),i=n.length,r=this.getIdField().isStringField;if(1===i&&""===n[0])n=[];else for(e=0;i>e;e++)n[e]=r?n[e]:+n[e];return n},getIdField:function(){return this.getModel().prototype.idField},setIds:function(e){var t=this.getStorageObject(),n=e.join(","),i=this.getId();t.removeItem(i),Ext.isEmpty(n)||t.setItem(i,n)},getNextId:function(){var e,t=this,n=t.getStorageObject(),i=t.getRecordCounterKey(),r=t.getIdField().isStringField;return e=t.idGenerator.generate(),n.setItem(i,e),r&&(e+=""),e},getTreeData:function(){for(var e,t,n,i,r,o,a=this,s=a.getIds(),l=s.length,d=[],u={},c=[],h=0,p=a.getModel(),f=p.prototype.idProperty;l>h;h++)o=s[h],t=a.getRecord(o),d.push(t),u[o]=t,t.parentId||c.push(t);for(e=c.length,Ext.Array.sort(d,a.sortByParentId),h=e;l>h;h++)t=d[h],i=t.parentId,n&&n[f]===i||(n=u[i],n.children=r=[]),r.push(t);for(h=l;h--;)t=d[h],t.children||t.leaf||(t.loaded=!0);for(h=e;h--;)t=c[h],c[h]=new p(t);return c},sortByParentId:function(e,t){return(e.parentId||0)-(t.parentId||0)},initialize:function(){var e=this,t=e.getStorageObject(),n=+t.getItem(e.getRecordCounterKey()),i=e.getId();t.setItem(i,t.getItem(i)||""),t.getItem(e.getTreeKey())&&(e.isHierarchical=!0),e.idGenerator=new Ext.data.identifier.Sequential({seed:n?n+1:1})},clear:function(){var e,t=this,n=t.getStorageObject(),i=t.getIds(),r=i.length;for(e=0;r>e;e++)n.removeItem(t.getRecordKey(i[e]));n.removeItem(t.getRecordCounterKey()),n.removeItem(t.getTreeKey()),n.removeItem(t.getId()),t.cache={}},getStorageObject:function(){}},1,0,0,0,0,0,[Ext.data.proxy,"WebStorage",Ext.data,"WebStorageProxy"],0),Ext.cmd.derive("Ext.data.proxy.LocalStorage",Ext.data.proxy.WebStorage,{alternateClassName:"Ext.data.LocalStorageProxy",getStorageObject:function(){return window.localStorage}},0,0,0,0,["proxy.localstorage"],0,[Ext.data.proxy,"LocalStorage",Ext.data,"LocalStorageProxy"],0),Ext.cmd.derive("Ext.dom.GarbageCollector",Ext.Base,{singleton:!0,interval:3e4,constructor:function(){var e=this;e.collect=Ext.Function.bind(e.collect,e),e.lastTime=Ext.now(),e.resume()},collect:function(){var e,t,n,i,r,o=this,a=Ext.cache;for(e in a)if(a.hasOwnProperty(e)&&(n=a[e],!n.skipGarbageCollection)){t=n.dom;try{r=Ext.isGarbage(t)}catch(s){delete a[e];continue}r&&n&&n.dom&&n.collect()}if(Ext.isIE9m){i={};for(e in a)a.hasOwnProperty(e)&&(i[e]=a[e]);Ext.cache=Ext.dom.Element.cache=i}o.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var e=this,t=e.lastTime;Ext.enableGarbageCollector&&Ext.now()-t>e.interval&&e.collect(),e.timerId=Ext.interval(e.collect,e.interval)}},1,0,0,0,0,0,[Ext.dom,"GarbageCollector"],0),Ext.cmd.derive("Ext.event.gesture.Recognizer",Ext.Base,{priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(e){this.initConfig(e),Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return!1},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,"Recognizer"],0),Ext.cmd.derive("Ext.event.gesture.SingleTouch",Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(e){return e.touches.length>1?this.fail(this.self.NOT_SINGLE_TOUCH):void 0},onTouchCancel:function(){return!1}},0,0,0,0,0,0,[Ext.event.gesture,"SingleTouch"],0),Ext.cmd.derive("Ext.event.gesture.DoubleTap",Ext.event.gesture.SingleTouch,{priority:300,inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(e){var t,n=this;return Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1?!1:(t=n.lastStartPoint=e.changedTouches[0].point,n.startPoint=n.startPoint||t,n.startTime=e.time,void clearTimeout(n.singleTapTimer))},onTouchMove:function(e){var t=this,n=e.changedTouches[0].point;return Math.abs(n.getDistanceTo(t.lastStartPoint))>=t.getMoveDistance()?(t.startPoint=null,t.fail(t.self.TOUCH_MOVED)):void 0},onTouchEnd:function(e){var t,n=this,i=n.getMaxDuration(),r=e.time,o=e.target,a=n.lastTapTime,s=n.lastTarget,l=e.changedTouches[0].point;return n.lastTapTime=r,n.lastTarget=o,a&&(t=r-a,i>=t&&Math.abs(l.getDistanceTo(n.startPoint))<=n.getTapDistance())?o!==s?n.fail(n.self.DIFFERENT_TARGET):(n.lastTarget=null,n.lastTapTime=0,n.fire("doubletap",e,{touch:e.changedTouches[0],duration:t}),void(n.startPoint=null)):void(r-n.startTime>i?n.fireSingleTap(e):n.setSingleTapTimer(e))},setSingleTapTimer:function(e){var t=this;t.singleTapTimer=Ext.defer(function(){t.fireSingleTap(e)},t.getMaxDuration())},fireSingleTap:function(e,t){this.fire("singletap",e,{touch:t}),this.startPoint=null},reset:function(){var e=this;e.startTime=e.lastTapTime=0,e.lastStartPoint=e.startPoint=e.singleTapTimer=null}},0,0,0,0,0,0,[Ext.event.gesture,"DoubleTap"],function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.doubleTap)}),Ext.cmd.derive("Ext.event.gesture.Drag",Ext.event.gesture.SingleTouch,{priority:100,isStarted:!1,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments),this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(e){return Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1?(this.isStarted&&null!==this.lastMoveEvent&&(this.lastMoveEvent.isStopped=!1,this.onTouchEnd(this.lastMoveEvent)),!1):(this.startTime=e.time,void(this.startPoint=e.changedTouches[0].point))},tryDragStart:function(e){var t=this.startPoint,n=e.changedTouches[0],i=n.point,r=this.getMinDistance(),o=this.info;Math.abs(i.getDistanceTo(t))>=r&&(this.isStarted=!0,this.previousPoint=this.lastPoint=i,this.resetInfo("x",e,n),this.resetInfo("y",e,n),o.time=e.time,this.fire("dragstart",e,o))},onTouchMove:function(e){if(this.isStarted||this.tryDragStart(e),this.isStarted){var t=e.changedTouches[0],n=t.point;this.lastPoint&&(this.previousPoint=this.lastPoint),this.lastPoint=n,this.lastMoveEvent=e,this.updateInfo("x",e,t),this.updateInfo("y",e,t),this.info.time=e.time,this.fire("drag",e,this.info)}},onAxisDragEnd:function(e,t){var n=t.time-t.previousTime[e];n>0&&(t.flick.velocity[e]=(t[e]-t.previous[e])/n)},resetInfo:function(e,t,n){var i=this.lastPoint[e],r=this.startPoint[e],o=i-r,a=e.toUpperCase(),s=this.info;s.touch=n,s.delta[e]=o,s.absDelta[e]=Math.abs(o),s.previousTime[e]=this.startTime,s.previous[e]=r,s[e]=i,s.direction[e]=0,s["start"+a]=this.startPoint[e],s["previous"+a]=s.previous[e],s["page"+a]=s[e],s["delta"+a]=s.delta[e],s["absDelta"+a]=s.absDelta[e],s["previousDelta"+a]=0,s.startTime=this.startTime},updateInfo:function(e,t,n){var i=this,r=i.lastPoint[e],o=i.previousPoint[e],a=i.startPoint[e],s=r-a,l=i.info,d=l.direction,u=e.toUpperCase(),c=l.previous[e];l.touch=n,l.delta[e]=s,l.absDelta[e]=Math.abs(s),r!==c&&r!==l[e]&&(l.previous[e]=l[e],l.previousTime[e]=l.time),l[e]=r,r>o?d[e]=1:o>r&&(d[e]=-1),l["start"+u]=a,l["previous"+u]=l.previous[e],l["page"+u]=l[e],l["delta"+u]=l.delta[e],l["absDelta"+u]=l.absDelta[e],l["previousDelta"+u]=l.previous[e]-a,l.startTime=i.startTime},onTouchEnd:function(e){this.doEnd(e)},onTouchCancel:function(e){return this.doEnd(e,!0),!1},doEnd:function(e,t){if(this.isStarted||this.tryDragStart(e),this.isStarted){var n=e.changedTouches[0],i=n.point,r=this.info;this.isStarted=!1,this.lastPoint=i,this.updateInfo("x",e,n),this.updateInfo("y",e,n),r.time=e.time,this.onAxisDragEnd("x",r),this.onAxisDragEnd("y",r),this.fire(t?"dragcancel":"dragend",e,r),this.startPoint=null,this.previousPoint=null,this.lastPoint=null,this.lastMoveEvent=null}},reset:function(){var e=this;e.isStarted=e.lastPoint=e.startPoint=e.previousPoint=e.lastPoint=e.lastMoveEvent=null,e.initInfo()}},1,0,0,0,0,0,[Ext.event.gesture,"Drag"],function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.drag)}),Ext.cmd.derive("Ext.event.gesture.Swipe",Ext.event.gesture.SingleTouch,{priority:500,handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1e3},onTouchStart:function(e){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1)return!1;var t=e.changedTouches[0];this.startTime=e.time,this.isHorizontal=!0,this.isVertical=!0,this.startX=t.pageX,this.startY=t.pageY},onTouchMove:function(e){var t,n,i=e.changedTouches[0],r=i.pageX,o=i.pageY,a=r-this.startX,s=o-this.startY,l=Math.abs(r-this.startX),d=Math.abs(o-this.startY),u=e.time-this.startTime,c=this.getMinDistance(),h=e.time;return h-this.startTime>this.getMaxDuration()?this.fail(this.self.MAX_DURATION_EXCEEDED):(this.isHorizontal&&d>this.getMaxOffset()&&(this.isHorizontal=!1),this.isVertical&&l>this.getMaxOffset()&&(this.isVertical=!1),this.isVertical&&this.isHorizontal||(this.isHorizontal&&c>l?(t=0>a?"left":"right",n=l):this.isVertical&&c>d&&(t=0>s?"up":"down",n=d)),t&&!this.started&&(this.started=!0,this.fire("swipestart",e,{touch:i,direction:t,distance:n,duration:u})),this.isHorizontal||this.isVertical?void 0:this.fail(this.self.MAX_OFFSET_EXCEEDED))},onTouchEnd:function(e){if(this.onTouchMove(e)===!1)return!1;var t,n,i=e.changedTouches[0],r=i.pageX,o=i.pageY,a=r-this.startX,s=o-this.startY,l=Math.abs(a),d=Math.abs(s),u=this.getMinDistance(),c=e.time-this.startTime;if(this.isVertical&&u>d&&(this.isVertical=!1),this.isHorizontal&&u>l&&(this.isHorizontal=!1),this.isHorizontal)t=0>a?"left":"right",n=l;else{if(!this.isVertical)return this.fail(this.self.DISTANCE_NOT_ENOUGH);t=0>s?"up":"down",n=d}this.started=!1,this.fire("swipe",e,{touch:i,direction:t,distance:n,duration:c})},onTouchCancel:function(e){return this.fire("swipecancel",e),!1},reset:function(){var e=this;e.startTime=e.isHorizontal=e.isVertical=e.startX=e.startY=null}},0,0,0,0,0,0,[Ext.event.gesture,"Swipe"],function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.swipe)}),Ext.cmd.derive("Ext.event.gesture.EdgeSwipe",Ext.event.gesture.Swipe,{priority:800,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(e){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===!1)return!1;var t=e.changedTouches[0];this.started=!1,this.direction=null,this.isHorizontal=!0,this.isVertical=!0,this.startX=t.pageX,this.startY=t.pageY},onTouchMove:function(e){var t,n,i=e.changedTouches[0],r=i.pageX,o=i.pageY,a=r-this.startX,s=o-this.startY,l=Math.abs(o-this.startY),d=Math.abs(r-this.startX),u=this.getMinDistance(),c=this.getMaxOffset(),h=e.time-this.startTime,p=Ext.Viewport&&Ext.Element.getViewportWidth(),f=Ext.Viewport&&Ext.Element.getViewportHeight();if(this.isVertical&&d>c&&(this.isVertical=!1),this.isHorizontal&&l>c&&(this.isHorizontal=!1),this.isVertical&&this.isHorizontal&&(l>d?this.isHorizontal=!1:this.isVertical=!1),this.isHorizontal?(t=0>a?"left":"right",n=a):this.isVertical&&(t=0>s?"up":"down",n=s),t=this.direction||(this.direction=t),"up"===t?n=-1*s:"left"===t&&(n=-1*a),this.distance=n,!n)return this.fail(this.self.DISTANCE_NOT_ENOUGH);if(this.started)this.fire("edgeswipe",e,{touch:i,direction:t,distance:n,duration:h});else{if("right"===t&&this.startX>u)return this.fail(this.self.NOT_NEAR_EDGE);if("down"===t&&this.startY>u)return this.fail(this.self.NOT_NEAR_EDGE);if("left"===t&&p-this.startX>u)return this.fail(this.self.NOT_NEAR_EDGE);if("up"===t&&f-this.startY>u)return this.fail(this.self.NOT_NEAR_EDGE);this.started=!0,this.startTime=e.time,this.fire("edgeswipestart",e,{touch:i,direction:t,distance:n,duration:h})}},onTouchEnd:function(e){var t;this.onTouchMove(e)!==!1&&(t=e.time-this.startTime,this.fire("edgeswipeend",e,{touch:e.changedTouches[0],direction:this.direction,distance:this.distance,duration:t}))},onTouchCancel:function(e){return this.fire("edgeswipecancel",e,{touch:e.changedTouches[0]}),!1},reset:function(){var e=this;e.started=e.direction=e.isHorizontal=e.isVertical=e.startX=e.startY=e.startTime=e.distance=null}},0,0,0,0,0,0,[Ext.event.gesture,"EdgeSwipe"],function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.edgeSwipe)}),Ext.cmd.derive("Ext.event.gesture.LongPress",Ext.event.gesture.SingleTouch,{priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1e3},handledEvents:["longpress","taphold"],fireLongPress:function(e){this.fire("longpress",e,{touch:e.changedTouches[0],duration:this.getMinDuration()}),this.isLongPress=!0},onTouchStart:function(e){return Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1?!1:(this.startPoint=e.changedTouches[0].point,this.isLongPress=!1,void this.setLongPressTimer(e))},setLongPressTimer:function(e){var t=this;t.timer=Ext.defer(function(){t.fireLongPress(e)},t.getMinDuration())},onTouchMove:function(e){var t=e.changedTouches[0].point;return Math.abs(t.getDistanceTo(this.startPoint))>=this.getMoveDistance()?this.fail(this.self.TOUCH_MOVED):void 0},onTouchEnd:function(){return this.isLongPress?void 0:this.fail(this.self.DURATION_NOT_ENOUGH)},fail:function(){return clearTimeout(this.timer),Ext.event.gesture.SingleTouch.prototype.fail.apply(this,arguments)},reset:function(){this.isLongPress=this.startPoint=null},fire:function(e){if("longpress"===e){var t=Array.prototype.slice.call(arguments);t[0]="taphold",this.fire.apply(this,t)}return Ext.event.gesture.SingleTouch.prototype.fire.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"LongPress"],function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.longPress)}),Ext.cmd.derive("Ext.event.gesture.MultiTouch",Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:!1,isStarted:!1,onTouchStart:function(e){var t=this.requiredTouchesCount,n=e.touches,i=n.length;i===t?this.start(e):i>t&&this.end(e)},onTouchEnd:function(e){this.end(e)},onTouchCancel:function(e){return this.end(e,!0),!1},start:function(){this.isTracking||(this.isTracking=!0,this.isStarted=!1)},end:function(e,t){this.isTracking&&(this.isTracking=!1,this.isStarted&&(this.isStarted=!1,this[t?"fireCancel":"fireEnd"](e)))},reset:function(){this.isTracking=this.isStarted=!1}},0,0,0,0,0,0,[Ext.event.gesture,"MultiTouch"],0),Ext.cmd.derive("Ext.event.gesture.Pinch",Ext.event.gesture.MultiTouch,{priority:600,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(e){if(this.isTracking){var t,n,i,r=e.touches;t=r[0].point,n=r[1].point,i=t.getDistanceTo(n),0!==i&&(this.isStarted?this.fire("pinch",e,{touches:r,distance:i,scale:i/this.startDistance}):(this.isStarted=!0,this.startDistance=i,this.fire("pinchstart",e,{touches:r,distance:i,scale:1})))}},fireEnd:function(e){this.fire("pinchend",e)},fireCancel:function(e){this.fire("pinchcancel",e)},fail:function(){return Ext.event.gesture.MultiTouch.prototype.fail.apply(this,arguments)},reset:function(){this.lastTouches=null,this.startDistance=0,Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Pinch"],function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.pinch)}),Ext.cmd.derive("Ext.event.gesture.Rotate",Ext.event.gesture.MultiTouch,{priority:700,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(e){if(this.isTracking){var t,n,i,r,o,a,s=e.touches,l=this.lastAngle;t=s[0].point,n=s[1].point,i=t.getAngleTo(n),null!==l&&(a=Math.abs(l-i),r=i+360,o=i-360,Math.abs(r-l)<a?i=r:Math.abs(o-l)<a&&(i=o)),this.lastAngle=i,this.isStarted?this.fire("rotate",e,{touches:s,angle:i,rotation:i-this.startAngle}):(this.isStarted=!0,this.startAngle=i,this.fire("rotatestart",e,{touches:s,angle:i,rotation:0})),this.lastTouches=Ext.Array.clone(s)}},fireEnd:function(e){this.lastAngle=null,this.fire("rotateend",e)},fireCancel:function(e){this.lastAngle=null,this.fire("rotatecancel",e)},reset:function(){var e=this;e.lastTouches=e.lastAngle=e.startAngle=null,Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Rotate"],function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.rotate)}),Ext.cmd.derive("Ext.event.gesture.Tap",Ext.event.gesture.SingleTouch,{priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(e){return Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,e)===!1?!1:void(this.startPoint=e.changedTouches[0].point)},onTouchMove:function(e){var t=e.changedTouches[0],n=t.point;return Math.abs(n.getDistanceTo(this.startPoint))>=this.getMoveDistance()?(this.fire("tapcancel",e,{touch:t}),this.fail(this.self.TOUCH_MOVED)):void 0},onTouchEnd:function(e){this.fire("tap",e,{touch:e.changedTouches[0]})},onTouchCancel:function(e){return this.fire("tapcancel",e,{touch:e.changedTouches[0]}),!1},reset:function(){this.startPoint=null}},0,0,0,0,0,0,[Ext.event.gesture,"Tap"],function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.tap)}),Ext.cmd.derive("Ext.fx.State",Ext.Base,{isAnimatable:{"background-color":!0,"background-image":!0,"background-position":!0,"border-bottom-color":!0,"border-bottom-width":!0,"border-color":!0,"border-left-color":!0,"border-left-width":!0,"border-right-color":!0,"border-right-width":!0,"border-spacing":!0,"border-top-color":!0,"border-top-width":!0,"border-width":!0,bottom:!0,color:!0,crop:!0,"font-size":!0,"font-weight":!0,height:!0,left:!0,"letter-spacing":!0,"line-height":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,opacity:!0,"outline-color":!0,"outline-offset":!0,"outline-width":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,right:!0,"text-indent":!0,"text-shadow":!0,top:!0,"vertical-align":!0,visibility:!0,width:!0,"word-spacing":!0,"z-index":!0,zoom:!0,transform:!0},constructor:function(e){this.data={},this.set(e)},setConfig:function(e){return this.set(e),this},setRaw:function(e){return this.data=e,this},clear:function(){return this.setRaw({})},setTransform:function(e,t){var n,i,r=this.data,o=Ext.isArray(t),a=r.transform;if(a||(a=r.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}),"string"==typeof e)switch(e){case"translate":if(o){if(n=t.length,0==n)break;if(a.translateX=t[0],1==n)break;if(a.translateY=t[1],2==n)break;a.translateZ=t[2]}else a.translateX=t;break;case"rotate":if(o){if(n=t.length,0==n)break;if(a.rotateX=t[0],1==n)break;if(a.rotateY=t[1],2==n)break;a.rotateZ=t[2]}else a.rotate=t;break;case"scale":if(o){if(n=t.length,0==n)break;if(a.scaleX=t[0],1==n)break;if(a.scaleY=t[1],2==n)break;a.scaleZ=t[2]}else a.scaleX=t,a.scaleY=t;break;case"skew":if(o){if(n=t.length,0==n)break;if(a.skewX=t[0],1==n)break;a.skewY=t[1]}else a.skewX=t;break;default:a[e]=t}else for(i in e)e.hasOwnProperty(i)&&(t=e[i],this.setTransform(i,t))},set:function(e,t){var n,i=this.data;if("string"!=typeof e)for(n in e)t=e[n],"transform"===n?this.setTransform(t):i[n]=t;else"transform"===e?this.setTransform(t):i[e]=t;return this},unset:function(e){var t=this.data;return t.hasOwnProperty(e)&&delete t[e],this},getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,"State"],0),Ext.cmd.derive("Ext.fx.animation.Abstract",Ext.Evented,{isAnimation:!0,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:!1,replacePrevious:!0},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){return this.states={},Ext.Evented.prototype.constructor.apply(this,arguments),this},applyElement:function(e){return Ext.get(e)},applyBefore:function(e,t){return e?Ext.factory(e,Ext.fx.State,t):void 0},applyAfter:function(e,t){return e?Ext.factory(e,Ext.fx.State,t):void 0},setFrom:function(e){return this.setState(this.STATE_FROM,e)},setTo:function(e){return this.setState(this.STATE_TO,e)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(e){var t,n=this.stateNameRegex;for(t in e)n.test(t)&&this.setState(t,e[t]);return this},getStates:function(){return this.states},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop(),Ext.Evented.prototype.destroy.call(this)},setState:function(e,t){var n,i=this.getStates();return n=Ext.factory(t,Ext.fx.State,i[e]),n&&(i[e]=n),this},getState:function(e){return this.getStates()[e]},getData:function(){var e,t,n,i=this.getStates(),r={},o=this.getBefore(),a=this.getAfter(),s=i[this.STATE_FROM],l=i[this.STATE_TO],d=s.getData(),u=l.getData();for(t in i)i.hasOwnProperty(t)&&(n=i[t],e=n.getData(),r[t]=e);return Ext.browser.is.AndroidStock2&&(r["0.0001%"]=d),{before:o?o.getData():{},after:a?a.getData():{},states:r,from:d,to:u,duration:this.getDuration(),iteration:this.getIteration(),direction:this.getDirection(),easing:this.getEasing(),delay:this.getDelay(),onEnd:this.getOnEnd(),onBeforeEnd:this.getOnBeforeEnd(),onBeforeStart:this.getOnBeforeStart(),scope:this.getScope(),preserveEndState:this.getPreserveEndState(),replacePrevious:this.getReplacePrevious()}}},1,0,0,0,0,0,[Ext.fx.animation,"Abstract"],0),Ext.cmd.derive("Ext.fx.animation.Slide",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.SlideIn",config:{direction:"left",out:!1,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:!0,useCssTransform:!0},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(e){return"auto"===e?"ease-"+(this.getOut()?"in":"out"):e},getContainerBox:function(){var e=this._containerBox;return"auto"===e&&(e=this.getElement().getParent().getBox()),e},getElementBox:function(){var e=this._elementBox;return this.getIsElementBoxFit()?this.getContainerBox():("auto"===e&&(e=this.getElement().getBox()),e)},getData:function(){var e,t,n,i,r=this.getElementBox(),o=this.getContainerBox(),a=r?r:o,s=this.getFrom(),l=this.getTo(),d=this.getOut(),u=this.getOffset(),c=this.getDirection(),h=this.getUseCssTransform(),p=this.getReverse(),f=0,g=0;switch(p&&(c=this.reverseDirectionMap[c]),c){case this.DIRECTION_UP:g=d?o.top-a.top-a.height-u:o.bottom-a.bottom+a.height+u;
break;case this.DIRECTION_DOWN:g=d?o.bottom-a.bottom+a.height+u:o.top-a.height-a.top-u;break;case this.DIRECTION_RIGHT:f=d?o.right-a.right+a.width+u:o.left-a.left-a.width-u;break;case this.DIRECTION_LEFT:f=d?o.left-a.left-a.width-u:o.right-a.right+a.width+u}return e=d?0:f,t=d?0:g,h?s.setTransform({translateX:e,translateY:t}):(s.set("left",e),s.set("top",t)),n=d?f:0,i=d?g:0,h?l.setTransform({translateX:n,translateY:i}):(l.set("left",n),l.set("top",i)),Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.slide","animation.slideIn"],0,[Ext.fx.animation,"Slide",Ext.fx.animation,"SlideIn"],0),Ext.cmd.derive("Ext.fx.animation.SlideOut",Ext.fx.animation.Slide,{config:{out:!0}},0,0,0,0,["animation.slideOut"],0,[Ext.fx.animation,"SlideOut"],0),Ext.cmd.derive("Ext.fx.animation.Fade",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.FadeIn",config:{out:!1,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(e){var t=this.getTo(),n=this.getFrom();e?(n.set("opacity",1),t.set("opacity",0)):(n.set("opacity",0),t.set("opacity",1))}},0,0,0,0,["animation.fade","animation.fadeIn"],0,[Ext.fx.animation,"Fade",Ext.fx.animation,"FadeIn"],0),Ext.cmd.derive("Ext.fx.animation.FadeOut",Ext.fx.animation.Fade,{config:{out:!0,before:{}}},0,0,0,0,["animation.fadeOut"],0,[Ext.fx.animation,"FadeOut"],0),Ext.cmd.derive("Ext.fx.animation.Flip",Ext.fx.animation.Abstract,{config:{easing:"ease-in",direction:"right",half:!1,out:null},getData:function(){var e=this.getFrom(),t=this.getTo(),n=this.getDirection(),i=this.getOut(),r=this.getHalf(),o=r?90:180,a=1,s=1,l=0,d=0,u=0,c=0;switch(i?s=.8:a=.8,n){case this.DIRECTION_UP:i?u=o:l=-o;break;case this.DIRECTION_DOWN:i?u=-o:l=o;break;case this.DIRECTION_RIGHT:i?c=o:d=-o;break;case this.DIRECTION_LEFT:i?c=-o:d=o}return e.setTransform({rotateX:l,rotateY:d,scale:a}),t.setTransform({rotateX:u,rotateY:c,scale:s}),Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.flip"],0,[Ext.fx.animation,"Flip"],0),Ext.cmd.derive("Ext.fx.animation.Pop",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.PopIn",config:{out:!1,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var e=this.getTo(),t=this.getFrom(),n=this.getOut();return n?(t.set("opacity",1),t.setTransform({scale:1}),e.set("opacity",0),e.setTransform({scale:0})):(t.set("opacity",0),t.setTransform({scale:0}),e.set("opacity",1),e.setTransform({scale:1})),Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.pop","animation.popIn"],0,[Ext.fx.animation,"Pop",Ext.fx.animation,"PopIn"],0),Ext.cmd.derive("Ext.fx.animation.PopOut",Ext.fx.animation.Pop,{config:{out:!0,before:{}}},0,0,0,0,["animation.popOut"],0,[Ext.fx.animation,"PopOut"],0),Ext.cmd.derive("Ext.fx.Animation",Ext.Base,{constructor:function(e){var t,n=Ext.fx.animation.Abstract;return"string"==typeof e?(t=e,e={}):e&&e.type&&(t=e.type),t&&(Ext.browser.is.AndroidStock2&&("pop"==t&&(t="fade"),"popIn"==t&&(t="fadeIn"),"popOut"==t&&(t="fadeOut")),n=Ext.ClassManager.getByAlias("animation."+t)),Ext.factory(e,n)}},1,0,0,0,0,0,[Ext.fx,"Animation"],0),Ext.cmd.derive("Ext.fx.runner.Css",Ext.Evented,{prefixedProperties:{transform:!0,"transform-origin":!0,perspective:!0,"transform-style":!0,transition:!0,"transition-property":!0,"transition-duration":!0,"transition-timing-function":!0,"transition-delay":!0,animation:!0,"animation-name":!0,"animation-duration":!0,"animation-iteration-count":!0,"animation-direction":!0,"animation-timing-function":!0,"animation-delay":!0},lengthProperties:{top:!0,right:!0,bottom:!0,left:!0,width:!0,height:!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,"border-bottom-width":!0,"border-left-width":!0,"border-right-width":!0,"border-spacing":!0,"border-top-width":!0,"border-width":!0,"outline-width":!0,"letter-spacing":!0,"line-height":!0,"text-indent":!0,"word-spacing":!0,"font-size":!0,translate:!0,translateX:!0,translateY:!0,translateZ:!0,translate3d:!0},durationProperties:{"transition-duration":!0,"transition-delay":!0,"animation-duration":!0,"animation-delay":!0},angleProperties:{rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skew:!0,skewX:!0,skewY:!0},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},constructor:function(){var e=Ext.feature.has.Css3dTransforms;e?this.transformMethods=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"]:this.transformMethods=["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],this.vendorPrefix=Ext.browser.getStyleDashPrefix(),this.ruleStylesCache={},Ext.Evented.prototype.constructor.call(this)},getStyleSheet:function(){var e,t,n=this.styleSheet;return n||(e=document.createElement("style"),e.type="text/css",(document.head||document.getElementsByTagName("head")[0]).appendChild(e),t=document.styleSheets,this.styleSheet=n=t[t.length-1]),n},applyRules:function(e){var t,n,i,r,o,a,s,l=this.getStyleSheet(),d=this.ruleStylesCache,u=l.cssRules;for(t in e){n=e[t],i=d[t],void 0===i&&(o=u.length,l.insertRule(t+"{}",o),i=d[t]=u.item(o).style),r=i.$cache,r||(r=i.$cache={});for(a in n)s=this.formatValue(n[a],a),a=this.formatName(a),r[a]!==s&&(r[a]=s,null===s?i.removeProperty(a):i.setProperty(a,s,"important"))}return this},applyStyles:function(e){var t,n,i,r,o,a;for(t in e)if(e.hasOwnProperty(t)){if(n=document.getElementById(t),!n)return this;i=n.style,r=e[t];for(o in r)r.hasOwnProperty(o)&&(a=this.formatValue(r[o],o),o=this.formatName(o),null===a?i.removeProperty(o):i.setProperty(o,a,"important"))}return this},formatName:function(e){var t=this.formattedNameCache,n=t[e];return n||(n=!Ext.os.is.Tizen&&Ext.feature.has.CssTransformNoPrefix||!this.prefixedProperties[e]?e:this.vendorPrefix+e,t[e]=n),n},formatValue:function(e,t){var n,i,r,o,a,s,l,d=typeof e,u=this.DEFAULT_UNIT_LENGTH;if(null===e)return"";if("string"==d)return!this.lengthProperties[t]||(l=e.match(this.lengthUnitRegex)[1],l.length>0)?e:e+u;if("number"==d){if(0==e)return"0";if(this.lengthProperties[t])return e+u;if(this.angleProperties[t])return e+this.DEFAULT_UNIT_ANGLE;if(this.durationProperties[t])return e+this.DEFAULT_UNIT_DURATION}else{if("transform"===t){for(n=this.transformMethods,a=[],r=0,o=n.length;o>r;r++)i=n[r],a.push(i+"("+this.formatValue(e[i],i)+")");return a.join(" ")}if(Ext.isArray(e)){for(s=[],r=0,o=e.length;o>r;r++)s.push(this.formatValue(e[r],t));return s.length>0?s.join(", "):"none"}}return e}},1,0,0,0,0,0,[Ext.fx.runner,"Css"],0),Ext.cmd.derive("Ext.fx.runner.CssTransition",Ext.fx.runner.Css,{alternateClassName:"Ext.Animator",singleton:!0,listenersAttached:!1,constructor:function(){return this.runningAnimationsData={},this.callParent(arguments)},attachListeners:function(){this.listenersAttached=!0,Ext.getWin().on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(e){var t=e.target,n=t.id;n&&this.runningAnimationsData.hasOwnProperty(n)&&this.refreshRunningAnimationsData(Ext.get(t),[e.browserEvent.propertyName])},onAnimationEnd:function(e,t,n,i,r){var o,a,s,l,d,u=e.getId(),c=this.runningAnimationsData[u],h={},p={};if(n.un("stop","onAnimationStop",this),c&&(o=c.nameMap),h[u]=p,t.onBeforeEnd&&t.onBeforeEnd.call(t.scope||this,e,i),n.fireEvent("animationbeforeend",n,e,i),this.fireEvent("animationbeforeend",this,n,e,i),r||!i&&!t.preserveEndState)for(a=t.toPropertyNames,s=0,l=a.length;l>s;s++)d=a[s],o&&!o.hasOwnProperty(d)&&(p[d]=null);t.after&&Ext.merge(p,t.after),this.applyStyles(h),t.onEnd&&t.onEnd.call(t.scope||this,e,i),n.fireEvent("animationend",n,e,i),this.fireEvent("animationend",this,n,e,i),Ext.AnimationQueue.stop(Ext.emptyFn,n)},onAllAnimationsEnd:function(e){var t=e.getId(),n={};delete this.runningAnimationsData[t],n[t]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null},this.applyStyles(n),this.fireEvent("animationallend",this,e)},hasRunningAnimations:function(e){var t=e.getId(),n=this.runningAnimationsData;return n.hasOwnProperty(t)&&n[t].sessions.length>0},refreshRunningAnimationsData:function(e,t,n,i){var r=e.getId(),o=this.runningAnimationsData,a=o[r];if(a){var s,l,d,u,c,h,p,f,g=a.nameMap,m=a.nameList,x=a.sessions,v=!1;if(n=!!n,i=!!i,!x)return this;if(s=x.length,0===s)return this;if(i){for(a.nameMap={},m.length=0,c=0;s>c;c++)h=x[c],this.onAnimationEnd(e,h.data,h.animation,n,i);x.length=0}else for(c=0;s>c;c++){for(h=x[c],p=h.map,f=h.list,l=0,d=t.length;d>l;l++)u=t[l],p[u]&&(delete p[u],Ext.Array.remove(f,u),h.length--,0==--g[u]&&(delete g[u],Ext.Array.remove(m,u)));0==h.length&&(x.splice(c,1),c--,s--,v=!0,this.onAnimationEnd(e,h.data,h.animation,n))}i||n||0!=x.length||!v||this.onAllAnimationsEnd(e)}},getRunningData:function(e){var t=this.runningAnimationsData;return t.hasOwnProperty(e)||(t[e]={nameMap:{},nameList:[],sessions:[]}),t[e]},getTestElement:function(){var e,t,n,i=this.testElement;return i||(e=document.createElement("iframe"),e.setAttribute("tabindex",-1),n=e.style,n.setProperty("visibility","hidden","important"),n.setProperty("width","0px","important"),n.setProperty("height","0px","important"),n.setProperty("position","absolute","important"),n.setProperty("border","0px","important"),n.setProperty("zIndex","-1000","important"),document.body.appendChild(e),t=e.contentDocument,t.open(),t.writeln("</body>"),t.close(),this.testElement=i=t.createElement("div"),i.style.setProperty("position","absolute","important"),t.body.appendChild(i),this.testElementComputedStyle=window.getComputedStyle(i)),i},getCssStyleValue:function(e,t){var n=this.getTestElement(),i=this.testElementComputedStyle,r=n.style;return r.setProperty(e,t),Ext.browser.is.Firefox&&n.offsetHeight,t=i.getPropertyValue(e),r.removeProperty(e),t},run:function(e){var t,n,i,r,o,a,s,l,d,u,c,h,p,f,g,m,x,v,y,E,b,C,w,S,T,P,I,k,B=this,M=this.lengthProperties,D={},R={},A={};for(this.listenersAttached||this.attachListeners(),e=Ext.Array.from(e),h=0,f=e.length;f>h;h++){g=e[h],g=Ext.factory(g,Ext.fx.Animation),t=g.getElement(),Ext.AnimationQueue.start(Ext.emptyFn,g),v=window.getComputedStyle(t.dom),n=t.getId(),A=Ext.merge({},g.getData()),g.onBeforeStart&&g.onBeforeStart.call(g.scope||this,t),g.fireEvent("animationstart",g),this.fireEvent("animationstart",this,g),A[n]=A,o=A.before,i=A.from,r=A.to,A.fromPropertyNames=a=[],A.toPropertyNames=s=[];for(E in r)r.hasOwnProperty(E)&&(r[E]=b=this.formatValue(r[E],E),y=this.formatName(E),S=M.hasOwnProperty(E),S||(b=this.getCssStyleValue(y,b)),i.hasOwnProperty(E)?(i[E]=w=this.formatValue(i[E],E),S||(w=this.getCssStyleValue(y,w)),b!==w&&(a.push(y),s.push(y))):(C=v.getPropertyValue(y),b!==C&&s.push(y)));if(m=s.length,0!==m){for(u=this.getRunningData(n),I=u.sessions,I.length>0&&this.refreshRunningAnimationsData(t,Ext.Array.merge(a,s),!0,A.replacePrevious),T=u.nameMap,P=u.nameList,x={},p=0;m>p;p++)E=s[p],x[E]=!0,T.hasOwnProperty(E)?T[E]++:(T[E]=1,P.push(E));k={element:t,map:x,list:s.slice(),length:m,data:A,animation:g},I.push(k),g.on("stop","onAnimationStop",this),c=Ext.apply({},o),Ext.apply(c,i),P.length>0&&(a=Ext.Array.difference(P,a),s=Ext.Array.merge(a,s),c["transition-property"]=a),D[n]=c,R[n]=Ext.apply({},r),R[n]["transition-property"]=s,R[n]["transition-duration"]=A.duration,R[n]["transition-timing-function"]=A.easing,R[n]["transition-delay"]=A.delay,g.startTime=Date.now()}else this.onAnimationEnd(t,A,g)}d=this.$className,this.applyStyles(D),l=function(e){e.data===d&&e.source===window&&(window.removeEventListener("message",l,!1),B.applyStyles(R))},Ext.browser.is.IE?Ext.Function.requestAnimationFrame(function(){window.addEventListener("message",l,!1),window.postMessage(d,"*")}):(window.addEventListener("message",l,!1),window.postMessage(d,"*"))},onAnimationStop:function(e){var t,n,i,r,o,a,s=this.runningAnimationsData;for(t in s)if(s.hasOwnProperty(t))for(n=s[t],i=n.sessions,r=0,o=i.length;o>r;r++)a=i[r],a.animation===e&&this.refreshRunningAnimationsData(a.element,a.list.slice(),!1)}},1,0,0,0,0,0,[Ext.fx.runner,"CssTransition",Ext,"Animator"],0),Ext.cmd.derive("Ext.mixin.Responsive",Ext.Mixin,function(e){return{mixinConfig:{id:"responsive",after:{destroy:"destroy"}},config:{responsiveConfig:{$value:void 0,merge:function(e,t,n,i){if(!e)return t;var r,o=t?Ext.Object.chain(t):{};for(r in e)i&&r in o||(o[r]={fn:null,config:e[r]});return o}},responsiveFormulas:{$value:0,merge:function(e,t,n,i){return this.mergeNew(e,t,n,i)}}},destroy:function(){e.unregister(this),this.callParent()},privates:{statics:{active:!1,all:{},context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){e.active=!0,e.updateContext(),Ext.on("resize",e.onResize,e)},deactivate:function(){e.active=!1,Ext.un("resize",e.onResize,e)},notify:function(){var t,n=e.all,i=e.context,r=Ext.GlobalEvents,o=e.timer;o&&(e.timer=null,Ext.Function.cancelAnimationFrame(o)),e.updateContext(),Ext.suspendLayouts(),r.fireEvent("beforeresponsiveupdate",i);for(t in n)n[t].setupResponsiveContext();r.fireEvent("beginresponsiveupdate",i);for(t in n)n[t].updateResponsiveState();r.fireEvent("responsiveupdate",i),Ext.resumeLayouts(!0)},onResize:function(){e.timer||(e.timer=Ext.Function.requestAnimationFrame(e.onTimer))},onTimer:function(){e.timer=null,e.notify()},processConfig:function(e,t,n){var i,r,o=t&&t[n],a=e.config;o&&(r=e.getConfigurator(),i=r.configs[n],a[n]=i.merge(o,a[n],e))},register:function(t){var n=t.$responsiveId;n||(t.$responsiveId=n=++e.nextId,e.all[n]=t,1===++e.count&&e.activate())},unregister:function(t){var n=t.$responsiveId;n in e.all&&(t.$responsiveId=null,delete e.all[n],0===--e.count&&e.deactivate())},updateContext:function(){var t=Ext.Element,n=t.getViewportWidth(),i=t.getViewportHeight(),r=e.context;r.width=n,r.height=i,r.tall=i>n,r.wide=!r.tall,r.landscape=r.portrait=!1,r.platform||(r.platform=Ext.platformTags),r[Ext.dom.Element.getOrientation()]=!0}},afterClassMixedIn:function(e){var t,n=e.prototype,i=n.responsiveConfig,r=n.responsiveFormulas;(i||r)&&(t={},i&&(delete n.responsiveConfig,t.responsiveConfig=i),r&&(delete n.responsiveFormulas,t.responsiveFormulas=r),e.getConfigurator().add(t))},applyResponsiveConfig:function(e){for(var t in e)e[t].fn=Ext.createRuleFn(t);return e},applyResponsiveFormulas:function(e){var t,n,i={};if(e)for(n in e)Ext.isString(t=e[n])&&(t=Ext.createRuleFn(t)),i[n]=t;return i},getResponsiveState:function(){var t,n,i=e.context,r=this.getResponsiveConfig(),o={};if(r)for(n in r)t=r[n],t.fn.call(this,i)&&Ext.merge(o,t.config);return o},setupResponsiveContext:function(){var t,n=this.getResponsiveFormulas(),i=e.context;if(n)for(t in n)i[t]=n[t].call(this,i)},transformInstanceConfig:function(t){var n,i=this;return e.register(i),t&&(e.processConfig(i,t,"responsiveConfig"),e.processConfig(i,t,"responsiveFormulas")),i.setupResponsiveContext(),n=i.getResponsiveState(),t&&(n=Ext.merge({},t,n),delete n.responsiveConfig,delete n.responsiveFormulas),n},updateResponsiveState:function(){var e=this.getResponsiveState();this.setConfig(e)}}}},0,0,0,0,0,0,[Ext.mixin,"Responsive"],0),Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,function(){function e(e,t){e.sum+=t,e.min=Math.min(e.min,t),e.max=Math.max(e.max,t)}function t(t){var n=t?t:l()-this.time,i=this,r=i.accum;++r.count,--r.depth||e(r.total,n),e(r.pure,n-i.childTime),a=i.parent,a&&(++a.accum.childCount,a.childTime+=n)}function n(){return{min:Number.MAX_VALUE,max:0,sum:0}}function i(e,t){return function(){var n=e.enter(),i=t.apply(this,arguments);return n.leave(),i}}function r(e,t,n,i){var r={avg:0,min:i.min,max:i.max,sum:0};return e&&(n=n||0,r.sum=i.sum-t*n,r.avg=r.sum/e),r}var o,a=null,s=Ext.global.chrome,l=function(){l=Ext.now;var e,t;if(Ext.isChrome&&s&&s.Interval)e=new s.Interval,e.start(),l=function(){return e.microseconds()/1e3};else if(window.ActiveXObject)try{t=new ActiveXObject("SenchaToolbox.Toolbox"),Ext.senchaToolbox=t,l=function(){return t.milliseconds}}catch(n){}return Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=l,l()};return{constructor:function(e){var t=this;t.count=t.childCount=t.depth=t.maxDepth=0,t.pure=n(),t.total=n(),t.name=e},statics:{getTimestamp:l},format:function(e){o||(o=new Ext.XTemplate('{name} - {count} call(s)<tpl if="count"><tpl if="childCount"> ({childCount} children)</tpl><tpl if="depth - 1"> ({depth} deep)</tpl><tpl for="times">, {type}: {[this.time(values.sum)]} msec (avg={[this.time(values.sum / parent.count)]})</tpl></tpl>',{time:function(e){return Math.round(100*e)/100}}));var t=this.getData(e);return t.name=this.name,t.pure.type="Pure",t.total.type="Total",t.times=[t.pure,t.total],o.apply(t)},getData:function(e){var t=this;return{count:t.count,childCount:t.childCount,depth:t.maxDepth,pure:r(t.count,t.childCount,e,t.pure),total:r(t.count,t.childCount,e,t.total)}},enter:function(){var e=this,n={accum:e,leave:t,childTime:0,parent:a};return++e.depth,e.maxDepth<e.depth&&(e.maxDepth=e.depth),a=n,n.time=l(),n},monitor:function(e,t,n){var i=this.enter();n?e.apply(t,n):e.call(t),i.leave()},report:function(){Ext.log(this.format())},tap:function(e,t){var n,r,o,a,s,l,d,u,c=this,h="string"==typeof t?[t]:t;return u=function(){if("string"==typeof e)for(n=Ext.global,a=e.split("."),o=0,s=a.length;s>o;++o)n=n[a[o]];else n=e;for(o=0,s=h.length;s>o;++o)l=h[o],r="!"===l.charAt(0),r?l=l.substring(1):r=!(l in n.prototype),d=r?n:n.prototype,d[l]=i(c,d[l])},Ext.ClassManager.onCreated(u,c,e),c}}},1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}),Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:!0,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[],this.accumulatorsByName={}},calibrate:function(){var e,t,n,i=new Ext.perf.Accumulator("$"),r=i.total,o=Ext.perf.Accumulator.getTimestamp,a=0;n=o();do e=i.enter(),e.leave(),++a;while(r.sum<100);return t=o(),(t-n)/a},get:function(e){var t=this,n=t.accumulatorsByName[e];return n||(t.accumulatorsByName[e]=n=new Ext.perf.Accumulator(e),t.accumulators.push(n)),n},enter:function(e){return this.get(e).enter()},monitor:function(e,t,n){this.get(e).monitor(t,n)},report:function(){var e=this,t=e.accumulators,n=e.calibrate();t.sort(function(e,t){return e.name<t.name?-1:t.name<e.name?1:0}),e.updateGC(),Ext.log("Calibration: "+Math.round(100*n)/100+" msec/sample"),Ext.each(t,function(e){Ext.log(e.format(n))})},getData:function(e){var t={},n=this.accumulators;return Ext.each(n,function(n){(e||n.count)&&(t[n.name]=n.getData())}),t},reset:function(){Ext.each(this.accumulators,function(e){var t=e;t.count=t.childCount=t.depth=t.maxDepth=0,t.pure={min:Number.MAX_VALUE,max:0,sum:0},t.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var e,t=this.accumulatorsByName.GC,n=Ext.senchaToolbox;t&&(t.count=n.garbageCollectionCounter||0,t.count&&(e=t.pure,t.total.sum=e.sum=n.garbageCollectionMilliseconds,e.min=e.max=e.sum/t.count,e=t.total,e.min=e.max=e.sum/t.count))},watchGC:function(){Ext.perf.getTimestamp();var e=Ext.senchaToolbox;e&&(this.get("GC"),e.watchGarbageCollector(!1))},setup:function(e){e||(e={render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}}),this.currentConfig=e;var t,n,i,r,o;for(t in e)if(e.hasOwnProperty(t)){n=e[t],i=Ext.Perf.get(t);for(r in n)n.hasOwnProperty(r)&&(o=n[r],i.tap(r,o))}this.watchGC()}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0),Ext.cmd.derive("Ext.plugin.Abstract",Ext.Base,{alternateClassName:"Ext.AbstractPlugin",isPlugin:!0,constructor:function(e){e&&(this.pluginConfig=e,this.initConfig(e))},clonePlugin:function(e){return new this.self(Ext.apply({},e,this.pluginConfig))},setCmp:function(e){this.cmp=e},getCmp:function(){return this.cmp},init:Ext.emptyFn,onClassExtended:function(e,t){var n=t.alias;n&&!t.ptype&&(Ext.isArray(n)&&(n=n[0]),e.prototype.ptype=n.split("plugin.")[1])},resolveListenerScope:function(e){var t,n=this,i=n.getCmp();return i&&(t=i.resolveSatelliteListenerScope(n,e)),t||n.mixins.observable.resolveListenerScope.call(n,e)}},1,0,0,0,0,0,[Ext.plugin,"Abstract",Ext,"AbstractPlugin"],0),Ext.define("Ext.overrides.plugin.Abstract",{override:"Ext.plugin.Abstract",$configStrict:!1,$configPrefixed:!1,disabled:!1,getState:null,applyState:null,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}}),Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:!0},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0),Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(e,t,n){var i=this,r=i.shared;return r||(r=i.shared=new i(e,n)),r.bind(e),r.setFixedWidth(n||"auto"),r.getSize(t)},destroy:function(){var e=this;Ext.destroy(e.shared),e.shared=null}},constructor:function(e,t){var n=this,i=Ext.getBody().createChild({role:"presentation",cls:"x-textmetrics"});n.measure=i,e&&n.bind(e),i.position("absolute"),i.setLocalXY(-1e3,-1e3),i.hide(),t&&i.setWidth(t)},getSize:function(e){var t,n=this.measure;return n.setHtml(e),t=n.getSize(),n.setHtml(""),t},bind:function(e){var t=this;t.el=Ext.get(e),t.measure.setStyle(t.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(e){this.measure.setWidth(e)},getWidth:function(e){return this.measure.dom.style.width="auto",this.getSize(e).width},getHeight:function(e){return this.getSize(e).height},destroy:function(){var e=this;e.measure.destroy(),delete e.el,delete e.measure}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.override({getTextWidth:function(e,t,n){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(e,this.dom.innerHTML,!0)).width,t||0,n||1e6)}})}),Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(e,t,n){return e.getTarget().setHtml(t.responseText,n.scripts===!0),!0}}},url:null,params:null,baseParams:null,autoLoad:!1,target:null,loadMask:!1,ajaxOptions:null,scripts:!1,isLoader:!0,constructor:function(e){var t,n=this;e=e||{},Ext.apply(n,e),n.mixins.observable.constructor.call(n),n.setTarget(n.target),n.autoLoad&&(t=n.autoLoad,t===!0&&(t=null),n.load(t))},setTarget:function(e){var t=this;e=Ext.get(e),t.target&&t.target!==e&&t.abort(),t.target=e},getTarget:function(){return this.target||null},abort:function(){var e=this.active;void 0!==e&&(Ext.Ajax.abort(e.request),e.mask&&this.removeMask(),delete this.active)},removeMask:function(){this.target.unmask()},addMask:function(e){this.target.mask(e===!0?null:e)},load:function(e){e=Ext.apply({},e);var t=this,n=Ext.isDefined(e.loadMask)?e.loadMask:t.loadMask,i=Ext.apply({},e.params),r=Ext.apply({},e.ajaxOptions),o=e.callback||t.callback,a=e.scope||t.scope||t,s=e.rendererScope||t.rendererScope||t;Ext.applyIf(r,t.ajaxOptions),Ext.applyIf(e,r),Ext.applyIf(i,t.params),Ext.apply(i,t.baseParams),Ext.applyIf(e,{url:t.url}),Ext.apply(e,{scope:t,params:i,callback:t.onComplete}),t.fireEvent("beforeload",t,e)!==!1&&(n&&t.addMask(n),t.active={options:e,mask:n,scope:a,rendererScope:s,callback:o,success:e.success||t.success,failure:e.failure||t.failure,renderer:e.renderer||t.renderer,scripts:Ext.isDefined(e.scripts)?e.scripts:t.scripts},t.active.request=Ext.Ajax.request(e),t.setOptions(t.active,e))},setOptions:Ext.emptyFn,onComplete:function(e,t,n){var i,r,o=this,a=o.active;a&&(r=a.scope,i=a.rendererScope,t&&(t=o.getRenderer(a.renderer).call(i,o,n,a)!==!1),t?(Ext.callback(a.success,r,[o,n,e]),o.fireEvent("load",o,n,e)):(Ext.callback(a.failure,r,[o,n,e]),o.fireEvent("exception",o,n,e)),Ext.callback(a.callback,r,[o,t,n,e]),a.mask&&o.removeMask()),delete o.active},getRenderer:function(e){return Ext.isFunction(e)?e:this.statics().Renderer.Html},startAutoRefresh:function(e,t){var n=this;n.stopAutoRefresh(),n.autoRefresh=Ext.interval(function(){n.load(t)},e)},stopAutoRefresh:function(){clearInterval(this.autoRefresh),delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var e=this;e.stopAutoRefresh(),delete e.target,e.abort(),e.clearListeners()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext,"ElementLoader"],0),Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(e,t){var n=!0;try{e.getTarget().update(Ext.decode(t.responseText))}catch(i){n=!1}return n},Component:function(e,t,n){var i=!0,r=e.getTarget(),o=[];try{o=Ext.decode(t.responseText)}catch(a){i=!1}return i&&(r.suspendLayouts(),n.removeAll&&r.removeAll(),r.add(o),r.resumeLayouts(!0)),i}}},target:null,loadOnRender:!1,loadMask:!1,renderer:"html",setTarget:function(e){var t=this;Ext.isString(e)&&(e=Ext.getCmp(e)),t.target&&t.target!==e&&t.abort(),t.target=e,e&&t.loadOnRender&&(e.rendered?t.doLoadOnRender():t.mon(e,"render",t.doLoadOnRender,t))},doLoadOnRender:function(){var e=this.loadOnRender;this.load(Ext.isObject(e)?e:null)},removeMask:function(){this.target.setLoading(!1)},addMask:function(e){this.target.setLoading(e)},setOptions:function(e,t){e.removeAll=Ext.isDefined(t.removeAll)?t.removeAll:this.removeAll},getRenderer:function(e){if(Ext.isFunction(e))return e;var t=this.statics().Renderer;switch(e){case"component":return t.Component;case"data":return t.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0),Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(e){var t,n=this,i=n.self,r=i.sizeModelsArray;Ext.apply(n,e),n[t=n.name]=!0,n.fixed=!(n.auto=n.natural||n.shrinkWrap),r[n.ordinal=r.length]=i[t]=i.sizeModels[t]=n},statics:{sizeModelsArray:[],sizeModels:{}},calculated:!1,configured:!1,constrainedMax:!1,constrainedMin:!1,natural:!1,shrinkWrap:!1,calculatedFromConfigured:!1,calculatedFromNatural:!1,calculatedFromShrinkWrap:!1,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var e,t,n,i,r,o=this,a=o.sizeModelsArray;for(new o({name:"calculated"}),new o({name:"configured",names:{width:"width",height:"height"}}),new o({name:"natural"}),new o({name:"shrinkWrap"}),new o({name:"calculatedFromConfigured",configured:!0,calculatedFrom:!0,names:{width:"width",height:"height"}}),new o({name:"calculatedFromNatural",natural:!0,calculatedFrom:!0}),new o({name:"calculatedFromShrinkWrap",shrinkWrap:!0,calculatedFrom:!0}),new o({name:"constrainedMax",configured:!0,constrained:!0,names:{width:"maxWidth",height:"maxHeight"}}),new o({name:"constrainedMin",configured:!0,constrained:!0,names:{width:"minWidth",height:"minHeight"}}),new o({name:"constrainedDock",configured:!0,constrained:!0,constrainedByMin:!0,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}}),e=0,n=a.length;n>e;++e)for(r=a[e],r.pairsByHeightOrdinal=i=[],t=0;n>t;++t)i.push({width:r,height:a[t]})}),Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{factoryConfig:{type:"layout"},isLayout:!0,initialized:!1,running:!1,needsItemSize:!0,setsItemSize:!0,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:!1,$configStrict:!1,constructor:function(e){var t=this;t.id=Ext.id(null,t.type+"-"),t.initConfig(e),delete t.type,t.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(e){var t,n=this,i=n.context;n.lastWidthModel!==e.widthModel&&(n.lastWidthModel&&(t=!0),n.lastWidthModel=e.widthModel),n.lastHeightModel!==e.heightModel&&(n.lastWidthModel&&(t=!0),n.lastHeightModel=e.heightModel),t&&((i=e.context).clearTriggers(n,!1),i.clearTriggers(n,!0),n.triggerCount=0)},finishedLayout:function(e){this.lastWidthModel=e.widthModel,this.lastHeightModel=e.heightModel,this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(){return!1},isItemLayoutRoot:function(e){var t=e.getSizeModel(),n=t.width,i=t.height;return e.componentLayout.lastComponentSize||!n.calculated&&!i.calculated?!n.shrinkWrap&&!i.shrinkWrap:!1},isItemShrinkWrap:function(e){return e.shrinkWrap},isRunning:function(){return!!this.ownerContext},getItemsRenderTree:function(e,t){var n,i,r,o,a=e.length;if(a)for(o=[],n=0;a>n;++n)i=e[n],i.rendered||(t&&void 0!==t[i.id]?r=t[i.id]:(this.configureItem(i),r=i.getRenderTree(),t&&(t[i.id]=r)),r&&o.push(r));return o},finishRender:Ext.emptyFn,finishRenderItems:function(e,t){var n,i,r=t.length;for(n=0;r>n;n++)i=t[n],i.rendering&&i.finishRender(n)},renderChildren:function(){var e=this,t=e.getLayoutItems(),n=e.getRenderTarget();e.renderItems(t,n)},renderItems:function(e,t){var n,i=this,r=e.length,o=0;if(r){for(Ext.suspendLayouts();r>o;o++)n=e[o],n&&!n.rendered?i.renderItem(n,t,o):i.isValidParent(n,t,o)?i.configureItem(n):i.moveItem(n,t,o);Ext.resumeLayouts(!0)}},isValidParent:function(e,t,n){var i=t&&t.dom||t,r=this.getItemLayoutEl(e);return r&&i?"number"==typeof n?(n=this.getPositionOffset(n),r===i.childNodes[n]):r.parentNode===i:!1},getItemLayoutEl:function(e){var t,n=e.el?e.el.dom:Ext.getDom(e),i=n.parentNode;return i&&(t=i.className,t&&-1!==t.indexOf("x-resizable-wrap")&&(n=n.parentNode)),n},getPositionOffset:function(e){return e},configureItem:function(e){e.ownerLayout=this},renderItem:function(e,t,n){var i=this;e.rendered||(i.configureItem(e),e.render(t,n))},moveItem:function(e,t,n){t=t.dom||t,"number"==typeof n&&(n=t.childNodes[n]),t.insertBefore(e.el.dom,n||null),e.container=Ext.get(t),this.configureItem(e)},onContentChange:function(){return this.owner.updateLayout(),!0},initLayout:function(){this.initialized=!0},setOwner:function(e){this.owner=e},getLayoutItems:function(){return[]},onAdd:function(e){e.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(e){var t,n=this,i=e.el,r=n.owner;e.rendered&&(t=[].concat(n.itemCls||[]),r.itemCls&&(t=Ext.Array.push(t,r.itemCls)),t.length&&i.removeCls(t)),delete e.ownerLayout},afterCollapse:function(e,t){t&&this.onContentChange(e)},afterExpand:function(e,t){t&&this.onContentChange(e)},destroy:function(){var e,t=this;t.targetCls&&(e=t.getTarget(),e&&e.removeCls(t.targetCls)),t.onDestroy()},sortWeightedItems:function(e,t){for(var n=0,i=e.length;i>n;++n)e[n].$i=n;for(Ext.Array.sort(e,function(e,n){var i=n.weight-e.weight;return i||(i=e.$i-n.$i,e[t]&&(i=-i)),i}),n=0;i>n;++n)delete e[n].$i}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,"Layout"],function(){var e=this;e.prototype.sizeModels=e.sizeModels=Ext.layout.SizeModel.sizeModels}),Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:!0,usesContainerWidth:!0,usesHeight:!0,usesWidth:!0,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments),this.mixins.elementCt.constructor.call(this)},destroy:function(){Ext.layout.Layout.prototype.destroy.call(this),this.mixins.elementCt.destroy.call(this)},beginLayout:function(e){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments),e.targetContext=e.paddingContext=e.getEl("getTarget",this),this.cacheChildItems(e)},beginLayoutCycle:function(e,t){var n=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments),t&&(n.usesContainerHeight&&++e.consumersContainerHeight,n.usesContainerWidth&&++e.consumersContainerWidth)},cacheChildItems:function(e){var t,n,i,r,o,a=this;if(a.needsItemSize||a.setsItemSize)for(t=e.context,n=e.childItems=[],i=e.visibleItems=a.getVisibleItems(),r=i.length,o=0;r>o;++o)n.push(t.getCmp(i[o]))},cacheElements:function(){var e=this.owner;this.attachChildEls(e.el,e)},calculate:function(e){var t=e.props,n=e.el;e.widthModel.shrinkWrap&&isNaN(t.width)&&e.setContentWidth(n.getWidth()),e.heightModel.shrinkWrap&&isNaN(t.height)&&e.setContentHeight(n.getHeight());
},configureItem:function(e){var t,n,i=this,r=i.itemCls,o=i.owner.itemCls;e.ownerLayout=i,r&&("string"==typeof r?n=[r]:(n=r,t=!!n)),o&&(t&&(n=Ext.Array.clone(n)),n=Ext.Array.push(n||[],o)),n&&e.addCls(n)},doRenderBody:function(e,t){this.renderItems(e,t),this.renderContent(e,t)},doRenderContainer:function(e,t){var n=t.$comp.layout,i=n.getRenderTpl(),r=n.getRenderData();i.applyOut(r,e)},doRenderItems:function(e,t){var n=t.$layout,i=n.getRenderTree();i&&Ext.DomHelper.generateMarkup(i,e)},finishRender:function(){var e,t,n=this;Ext.layout.Layout.prototype.finishRender.call(this),n.cacheElements(),e=n.getRenderTarget(),t=n.getLayoutItems(),n.finishRenderItems(e,t)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(e,t){var n,i,r,o,a=e.targetContext,s=a.getFrameInfo(),l=e.paddingContext.getPaddingInfo(),d=0,u=0;return e.widthModel.shrinkWrap||(++u,r=t?a.getDomProp("width"):a.getProp("width"),n="number"==typeof r,n&&(++d,r-=s.width+l.width,0>r&&(r=0))),e.heightModel.shrinkWrap||(++u,o=t?a.getDomProp("height"):a.getProp("height"),i="number"==typeof o,i&&(++d,o-=s.height+l.height,0>o&&(o=0))),{width:r,height:o,needed:u,got:d,gotAll:d===u,gotWidth:n,gotHeight:i}},getPositionOffset:function(e){if(!this.createsInnerCt){var t=this.owner.itemNodeOffset;t&&(e+=t)}return e},getLayoutItems:function(){var e=this.owner,t=e&&e.items;return t&&t.items||[]},getRenderData:function(){var e=this.owner;return{$comp:e,$layout:this,ownerId:e.id}},getRenderedItems:function(){var e,t,n=this,i=n.getRenderTarget(),r=n.getLayoutItems(),o=r.length,a=[];for(e=0;o>e;e++)t=r[e],t.rendered&&n.isValidParent(t,i,e)&&a.push(t);return a},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var e=this,t=Ext.XTemplate.getTpl(this,"renderTpl");return t.renderContent||e.owner.setupRenderTpl(t),t},getRenderTree:function(){var e,t,n=this.owner.items,i={};do t=n.generation,e=this.getItemsRenderTree(this.getLayoutItems(),i);while(n.generation!==t);return e},renderChildren:function(){var e,t,n=this,i=n.owner.items,r=n.getRenderTarget();do e=i.generation,t=n.getLayoutItems(),n.renderItems(t,r);while(i.generation!==e)},getScrollbarsNeeded:function(e,t,n,i){var r=Ext.getScrollbarSize(),o="number"==typeof e,a="number"==typeof t,s=0,l=0;return r.width?(a&&i>t&&(l=2,e-=r.width),o&&n>e&&(s=1,!l&&a&&(t-=r.height,i>t&&(l=2))),l+s):0},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var e,t,n=this.getRenderTarget(),i=this.getLayoutItems(),r=i.length,o=[];for(e=0;r>e;e++)t=i[e],t.rendered&&this.isValidParent(t,n,e)&&t.hidden!==!0&&!t.floated&&o.push(t);return o},getMoveAfterIndex:function(e){return this.owner.items.indexOf(e)+1},moveItemBefore:function(e,t){var n,i=this.owner,r=i.items,o=r.indexOf(e);return e===t?e:(t?(n=r.indexOf(t),o>-1&&n>o&&--n):n=r.length,i.insert(n,e))},setupRenderTpl:function(e){e.renderBody=this.doRenderBody,e.renderContainer=this.doRenderContainer,e.renderItems=this.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(e){e.liquidLayout||++this.activeItemCount,Ext.layout.Layout.prototype.onAdd.call(this,e)},onRemove:function(e){e.liquidLayout||--this.activeItemCount,Ext.layout.Layout.prototype.onRemove.call(this,e)}},1,0,0,0,["layout.container"],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0),Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:!1,managePadding:!0,manageOverflow:!1,needsItemSize:!1,setsItemSize:!1,lastOverflowAdjust:{width:0,height:0},outerCtCls:"x-autocontainer-outerCt",innerCtCls:"x-autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(e){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments),this.initContextItems(e)},beforeLayoutCycle:function(e){var t=this.owner,n=t.inheritedState,i=t.inheritedStateInner;(!n||n.invalid)&&(n=t.getInherited(),i=t.inheritedStateInner),e.widthModel.shrinkWrap?i.inShrinkWrapTable=!0:delete i.inShrinkWrapTable},beginLayoutCycle:function(e){var t,n,i,r,o,a=this,s=a.outerCt,l=a.lastOuterCtWidth||"",d=a.lastOuterCtHeight||"",u=a.lastOuterCtTableLayout||"",c=e.state;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments),n=i=r="",e.widthModel.shrinkWrap||(n="100%",o=a.owner.inheritedStateInner,t=a.getOverflowXStyle(e),r=o.inShrinkWrapTable||"auto"===t||"scroll"===t?"":"fixed"),e.heightModel.shrinkWrap||Ext.supports.PercentageHeightOverflowBug||(i="100%"),(n!==l||a.hasOuterCtPxWidth)&&(s.setStyle("width",n),a.lastOuterCtWidth=n,a.hasOuterCtPxWidth=!1),r!==u&&(s.setStyle("table-layout",r),a.lastOuterCtTableLayout=r),(i!==d||a.hasOuterCtPxHeight)&&(s.setStyle("height",i),a.lastOuterCtHeight=i,a.hasOuterCtPxHeight=!1),a.hasInnerCtPxHeight&&(a.innerCt.setStyle("height",""),a.hasInnerCtPxHeight=!1),c.overflowAdjust=c.overflowAdjust||a.lastOverflowAdjust},calculate:function(e){var t=this,n=e.state,i=t.getContainerSize(e,!0),r=n.calculatedItems||(n.calculatedItems=t.calculateItems?t.calculateItems(e,i):!0);return t.setCtSizeIfNeeded(e,i),r&&e.hasDomProp("containerChildrenSizeDone")&&(t.calculateContentSize(e),i.gotAll)?void(!t.manageOverflow||e.state.secondPass||t.reserveScrollbar||t.calculateOverflow(e,i)):void(t.done=!1)},calculateContentSize:function(e){var t=this,n=(e.widthModel.shrinkWrap?1:0)|(e.heightModel.shrinkWrap?2:0),i=1&n||void 0,r=2&n||void 0,o=0,a=e.props;i&&(isNaN(a.contentWidth)?++o:i=void 0),r&&(isNaN(a.contentHeight)?++o:r=void 0),o&&(i&&!e.setContentWidth(t.measureContentWidth(e))&&(t.done=!1),r&&!e.setContentHeight(t.measureContentHeight(e))&&(t.done=!1))},calculateOverflow:function(e){var t,n,i,r,o,a,s,l=this;o="auto"===l.getOverflowXStyle(e),a="auto"===l.getOverflowYStyle(e),(o||a)&&(i=Ext.getScrollbarSize(),s=e.overflowContext.el.dom,r=0,s.scrollWidth>s.clientWidth&&(r|=1),s.scrollHeight>s.clientHeight&&(r|=2),t=a&&2&r?i.width:0,n=o&&1&r?i.height:0,(t!==l.lastOverflowAdjust.width||n!==l.lastOverflowAdjust.height)&&(l.done=!1,e.invalidate({state:{overflowAdjust:{width:t,height:n},overflowState:r,secondPass:!0}})))},completeLayout:function(e){this.lastOverflowAdjust=e.state.overflowAdjust},doRenderBody:function(e,t){var n=t.$layout,i=Ext.XTemplate,r=n.beforeBodyTpl,o=n.afterBodyTpl;r&&i.getTpl(n,"beforeBodyTpl").applyOut(t,e),this.renderItems(e,t),this.renderContent(e,t),o&&i.getTpl(n,"afterBodyTpl").applyOut(t,e)},doRenderPadding:function(e,t){var n=t.$layout,i=t.$layout.owner,r=i[i.contentPaddingProperty];n.managePadding&&r&&e.push("padding:",i.unitizeBox(r))},finishedLayout:function(){var e=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments),Ext.isIE8&&e.repaint(),Ext.isOpera&&(e.setStyle("position","relative"),e.dom.scrollWidth,e.setStyle("position",""))},getContainerSize:function(e){var t=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),n=e.state.overflowAdjust;return n&&(t.width-=n.width,t.height-=n.height),t},getRenderData:function(){var e=this,t=Ext.layout.container.Container.prototype.getRenderData.call(this);return t.innerCtCls=e.innerCtCls,t.outerCtCls=e.outerCtCls,t},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(e){return e.overflowXStyle||(e.overflowXStyle=this.owner.scrollFlags.overflowX||e.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(e){return e.overflowYStyle||(e.overflowYStyle=this.owner.scrollFlags.overflowY||e.overflowContext.getStyle("overflow-y"))},initContextItems:function(e){var t=this,n=e.target,i=t.owner.getOverflowEl();e.outerCtContext=e.getEl("outerCt",t),e.innerCtContext=e.getEl("innerCt",t),e.overflowContext=i===e.el?e:e.getEl(i),void 0!==n[n.contentPaddingProperty]&&(e.paddingContext=e.innerCtContext)},initLayout:function(){var e=this,t=Ext.getScrollbarSize().width,n=e.owner;Ext.layout.container.Container.prototype.initLayout.call(this),t&&e.manageOverflow&&!e.hasOwnProperty("lastOverflowAdjust")&&(n.scrollable||e.reserveScrollbar)&&(e.lastOverflowAdjust={width:t,height:0})},measureContentHeight:function(e){var t=this.outerCt.getHeight(),n=e.target;return this.managePadding&&void 0===n[n.contentPaddingProperty]&&(t+=e.targetContext.getPaddingInfo().height),t},measureContentWidth:function(e){var t,n,i,r,o;return this.chromeCellMeasureBug&&(t=this.innerCt.dom,n=t.style,i=n.display,"table-cell"===i&&(n.display="",t.offsetWidth,n.display=i)),Ext.isSafari&&(t=this.outerCt.dom,n=t.style,n.display="table-cell",t.offsetWidth,t.style.display=""),r=this.outerCt.getWidth(),o=e.target,this.managePadding&&void 0===o[o.contentPaddingProperty]&&(r+=e.targetContext.getPaddingInfo().width),r},setCtSizeIfNeeded:function(e,t){var n,i,r=this,o=t.height,a=e.paddingContext.getPaddingInfo(),s=r.getTarget(),l=r.getOverflowXStyle(e),d="auto"===l||"scroll"===l,u=Ext.getScrollbarSize();o&&!e.heightModel.shrinkWrap&&(Ext.supports.PercentageHeightOverflowBug&&(n=!0),Ext.isIE8&&(i=!0),(n||i)&&d&&s.dom.scrollWidth>s.dom.clientWidth&&(o=Math.max(o-u.height,0)),n&&(e.outerCtContext.setProp("height",o+a.height),r.hasOuterCtPxHeight=!0),i&&(e.innerCtContext.setProp("height",o),r.hasInnerCtPxHeight=!0))},setupRenderTpl:function(e){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments),e.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}),Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9e3,activeCounter:0},constructor:function(e){var t=this;t.id=Ext.id(null,"zindex-mgr-"),t.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(e,t){var n=(e.alwaysOnTop||0)-(t.alwaysOnTop||0);return n||(n=e.getActiveCounter()-t.getActiveCounter()),n}},filters:{filterFn:function(e){return e.isVisible()}}}),t.zIndexStack.addObserver(t),t.front=null,t.globalListeners=Ext.GlobalEvents.on({hide:t.onComponentShowHide,show:t.onComponentShowHide,scope:t,destroyable:!0}),e?e.isContainer?(e.on("resize",t.onContainerResize,t),t.zseed=Ext.Number.from(t.rendered?e.getEl().getStyle("zIndex"):void 0,t.getNextZSeed()),t.targetEl=e.getTargetEl(),t.container=e):(Ext.on("resize",t.onContainerResize,t),t.zseed=t.getNextZSeed(),t.targetEl=Ext.get(e)):(t.zseed=t.getNextZSeed(),Ext.onInternalReady(function(){Ext.on("resize",t.onContainerResize,t),t.targetEl=Ext.getBody()}))},getId:function(){return this.id},getNextZSeed:function(){return Ext.ZIndexManager.zBase+=1e4},setBase:function(e){return this.zseed=e,this.onCollectionSort()},onCollectionSort:function(){var e,t,n,i,r=this,o=r.front,a=r.zseed,s=r.zIndexStack.getRange(),l=s.length,d=!1;for(e=0;l>e;e++)t=s[e],a=t.setZIndex(a),t.hidden||(i=t,t.modal&&(n=t));return i!==o&&(o&&!o.destroying&&o.setActive(!1),i&&(d=i.modal||(!o||o.isVisible())&&i.focusOnToFront&&!i.preventFocusOnActivate&&i.isFocusable(!0),i.setActive(!0,d))),r.front=i,n?r.showModalMask(n):r.hideModalMask(),a},onComponentUpdate:function(e){this.zIndexStack.contains(e)&&this.zIndexStack.sort()},onComponentRender:function(e){this.zIndexStack.itemChanged(e,"hidden")},onComponentShowHide:function(e){var t=this.zIndexStack;e.isFloating()&&!this.hidingAll&&(t.getSource()||t).contains(e)&&(t.itemChanged(e,"hidden"),t.sort())},register:function(e){var t=this;e.zIndexManager&&e.zIndexManager.unregister(e),e.zIndexManager=t,e.rendered||e.on("render",t.onComponentRender,t,{single:!0}),t.zIndexStack.add(e)},unregister:function(e){var t=this;delete e.zIndexManager,e.un("render",t.onComponentRender,t),t.zIndexStack.remove(e),t.onCollectionSort()},get:function(e){return e.isComponent?e:this.zIndexStack.get(e)},bringToFront:function(e,t){var n,i,r=this,o=r.zIndexStack,a=o.last();return e=r.get(e),!e||o.find("alwaysOnTop",!0)?!1:(i=e.preventFocusOnActivate,e.preventFocusOnActivate=t,e.setActiveCounter(++Ext.ZIndexManager.activeCounter),e.preventFocusOnActivate=i,n=o.last(),n===e&&n!==a)},sendToBack:function(e){return e=this.get(e),e&&e.setActiveCounter(0),e||null},hideAll:function(){var e,t=this.zIndexStack.getRange(),n=t.length;for(this.hidingAll=!0,e=0;n>e;e++)t[e].hide();this.hidingAll=!1},hide:function(){var e,t,n=this,i=Ext.Element.getActiveElement(),r=n.tempHidden=n.zIndexStack.getRange(),o=r.length;for(n.focusRestoreElement=null,e=0;o>e;e++)t=r[e],t.el.contains(i)&&(n.focusRestoreElement=i),t.el.hide(),t.hidden=!0},show:function(){var e,t,n=this,i=n.tempHidden,r=i?i.length:0;for(e=0;r>e;e++)t=i[e],t.el.show(),t.hidden=!1,t.setPosition(t.x,t.y);n.tempHidden=null,n.focusRestoreElement&&n.focusRestoreElement.focus()},getActive:function(){return this.zIndexStack.last()},getBy:function(e,t){return this.zIndexStack.filterBy(e,t).getRange()},each:function(e,t){this.zIndexStack.each(e,t)},eachBottomUp:function(e,t){var n,i,r=this.zIndexStack.getRange(),o=r.length;for(n=0;o>n;n++)if(i=r[n],i.isComponent&&e.call(t||i,i)===!1)return},eachTopDown:function(e,t){var n,i,r=this.zIndexStack.getRange();for(n=r.length;n-->0;)if(i=r[n],i.isComponent&&e.call(t||i,i)===!1)return},destroy:function(){var e,t=this,n=t.zIndexStack.getRange(),i=n.length;for(e=0;i>e;e++)Ext.destroy(n[e]);Ext.destroy(t.mask,t.maskShim,t.zIndexStack,t.globalListeners),t.zIndexStack=t.container=t.targetEl=t.globalListeners=null},privates:{getMaskBox:function(){var e=this.mask.maskTarget;return e.dom===document.body?{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}:e.getBox()},hideModalMask:function(){var e,t,n=this.mask,i=this.maskShim;n&&n.isVisible()&&(e=n.maskTarget,t="data-savedtabindex-"+e.getId(),e.restoreChildrenTabbableState(t),e.restoreTabbableState(t),n.maskTarget=void 0,n.hide(),i&&i.hide())},onContainerResize:function(){var e,t=this,n=t.mask,i=t.maskShim;n&&n.isVisible()&&(n.hide(),i&&i.hide(),e=t.getMaskBox(),i&&(i.setSize(e),i.show()),n.setSize(e),n.show())},onMaskClick:function(){this.front&&this.front.focus()},showModalMask:function(e){var t,n,i,r,o=this,a=e.el,s=a.getStyle("zIndex")-4,l=e.floatParent?e.floatParent.getTargetEl():e.container,d=o.mask,u=o.maskShim;d?o.hideModalMask():(o.mask=d=Ext.getBody().createChild({role:"presentation",cls:"x-mask x-border-box",style:"height:0;width:0"}),d.setVisibilityMode(Ext.Element.DISPLAY),d.on("click",o.onMaskClick,o)),d.maskTarget=l,t=o.getMaskBox(),u&&(u.setStyle("zIndex",s),u.show(),u.setBox(t)),d.setStyle("zIndex",s),n="data-savedtabindex-"+l.getId(),i=n+"-temp",r=a.findTabbableElements(),r.length&&(a.saveTabbableState(i),a.saveChildrenTabbableState(i)),l.saveTabbableState(n),l.saveChildrenTabbableState(n),r.length&&(a.restoreChildrenTabbableState(i),a.restoreTabbableState(i)),d.show(),d.setBox(t)}}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this}),Ext.cmd.derive("Ext.container.Container",Ext.Component,{alternateClassName:["Ext.Container","Ext.AbstractContainer"],renderTpl:"{%this.renderContainer(out,values)%}",isContainer:!0,autoDestroy:!0,defaultType:"panel",detachOnRemove:!0,items:void 0,layout:"auto",suspendLayout:!1,_applyDefaultsOptions:{defaults:!0,strict:!1},ariaRole:"presentation",baseCls:"x-container",layoutCounter:0,add:function(){var e,t,n,i,r,o,a,s,l=this,d=Ext.Array.slice(arguments),u="number"==typeof d[0]?d.shift():-1,c=l.getLayout(),h=!1;for(1===d.length&&Ext.isArray(d[0])?(t=d[0],e=!0):t=d,l.rendered&&Ext.suspendLayouts(),a=t=l.prepareItems(t,!0),i=t.length,e||1!==i||(a=t[0]),n=0;i>n;n++)r=t[n],o=0>u?l.items.length:u+n,s=!!r.instancedCmp,delete r.instancedCmp,r.floating?(l.floatingItems.add(r),r.onAdded(l,o,s),delete r.initOwnerCt,l.hasListeners.add&&l.fireEvent("add",l,r,o)):l.hasListeners.beforeadd&&l.fireEvent("beforeadd",l,r,o)===!1||l.onBeforeAdd(r)===!1||(l.items.insert(o,r),r.onAdded(l,o,s),delete r.initOwnerCt,l.onAdd(r,o),c.onAdd(r,o),h=!0,l.hasListeners.add&&l.fireEvent("add",l,r,o));return h&&l.updateLayout(),l.rendered&&Ext.resumeLayouts(!0),a},onAdded:function(e,t,n){Ext.Component.prototype.onAdded.apply(this,arguments),n&&Ext.ComponentManager.markReferencesDirty()},onRemoved:function(e){var t;e||(t=this.lookupReferenceHolder(),t&&(Ext.ComponentManager.markReferencesDirty(),t.clearReferences())),Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var e,t,n=this.floatingItems.items,i=n.length;for(Ext.Component.prototype.afterComponentLayout.apply(this,arguments),e=0;i>e;e++)t=n[e],!t.rendered&&t.autoShow&&t.show()},afterLayout:function(e){var t=this,n=t.getScrollable();++t.layoutCounter,n&&t.layoutCounter>1&&n.refresh(),t.hasListeners.afterlayout&&t.fireEvent("afterlayout",t,e)},onDestroy:function(){Ext.Component.prototype.onDestroy.call(this),this.refs=null},beforeDestroy:function(){var e,t=this,n=t.items,i=t.floatingItems;if(n)for(;e=n.first();)t.doRemove(e,!0);if(i)for(;e=i.first();)t.doRemove(e,!0);Ext.destroy(t.layout),Ext.Component.prototype.beforeDestroy.call(this)},beforeRender:function(){var e,t=this,n=t.getLayout();t.preventChildDisable=!0,Ext.Component.prototype.beforeRender.call(this),t.preventChildDisable=!1,n.initialized||n.initLayout(),e=n.targetCls,e&&t.applyTargetCls(e)},cascade:function(e,t,n){var i,r=this,o=r.items?r.items.items:[],a=o.length,s=0,l=n?n.concat(r):[r],d=l.length-1;if(e.apply(t||r,l)!==!1)for(;a>s;s++)i=o[s],i.cascade?i.cascade(e,t,n):(l[d]=i,e.apply(t||i,l));return this},contains:function(e,t){var n=!1;return t?(this.cascade(function(t){return t.contains&&t.contains(e)?(n=!0,!1):void 0}),n):this.items.contains(e)||this.floatingItems.contains(e)},disable:function(e,t){var n,i,r,o=this,a=o.disabled;if(Ext.Component.prototype.disable.call(this,e,t),!t&&!o.preventChildDisable&&!a)for(n=o.getChildItemsToDisable(),i=n.length,r=0;i>r;r++)n[r].disable(e,!0);return o},doLayout:function(){return this.updateLayout(),this},enable:function(e,t){var n,i,r,o=this,a=o.disabled;if(Ext.Component.prototype.enable.call(this,e,t),a)for(n=o.getChildItemsToDisable(),i=n.length,r=0;i>r;r++)n[r].enable(e,!0);return o},getChildByElement:function(e,t){var n,i,r=0,o=this.getRefItems(),a=o.length;for(e=Ext.getDom(e);a>r;r++)if(n=o[r],i=n.getEl(),i&&(i.dom===e||i.contains(e)))return t&&n.getChildByElement?n.getChildByElement(e,t):n;return null},getComponent:function(e){Ext.isObject(e)&&(e=e.getItemId());var t=this.items.get(e);return t||"number"==typeof e||(t=this.floatingItems.get(e)),t},getFocusEl:function(){var e=this.getDefaultFocus();return e?e:this.focusable?this.getTargetEl():void 0},getLayout:function(){var e=this,t=e.layout;return t&&t.isLayout||e.setLayout(t),e.layout},getRefItems:function(e){for(var t,n=this,i=n.items.items,r=i.length,o=0,a=[];r>o;o++)t=i[o],a[a.length]=t,e&&t.getRefItems&&a.push.apply(a,t.getRefItems(!0));for(i=n.floatingItems.items,r=i.length,o=0;r>o;o++)t=i[o],a[a.length]=t,e&&t.getRefItems&&a.push.apply(a,t.getRefItems(!0));return a},getDefaultFocus:function(){var e,t=this.defaultFocus;return t&&(e=this.down(t)),e},initComponent:function(){var e=this;Ext.Component.prototype.initComponent.call(this),e.getLayout(),e.constructing=!0,e.initItems(),e.disabled&&(e.disabled=!1,e.disable(!0)),delete e.constructing},getReferences:function(){var e=Ext.ComponentManager;return e.referencesDirty&&e.fixReferences(),this.refs||null},lookupReference:function(e){var t=this.getReferences();return t&&t[e]||null},initItems:function(){var e=this,t=e.items;t&&t.isMixedCollection||(e.items=new Ext.util.AbstractMixedCollection(!1,e.getComponentId),e.floatingItems=new Ext.util.MixedCollection(!1,e.getComponentId),t&&(Ext.isArray(t)||(t=[t]),e.add(t)))},initInheritedState:function(e,t){var n=this,i=n.controller,r=n.layout,o=n.session,a=n.viewModel,s=n.reference,l=n.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,e,t),n.collapsed&&(e.collapsed=!0),i?(e.referenceHolder=i,l=!0):l&&(e.referenceHolder=n),l?e.referencePath="":s&&n.isParentReference&&(e.referencePath=n.referenceKey+"."),o&&(e.session=o),a?e.viewModelPath="":s&&n.isParentReference&&(e.viewModelPath=n.viewModelKey+"."),r&&r.initInheritedState&&r.initInheritedState(e,t)},insert:function(e,t){var n;return t&&t.isComponent&&(n=this.items.indexOf(t),-1!==n)?this.move(n,e):this.add(e,t)},lookupComponent:function(e){return e.isComponent||(e="string"==typeof e?Ext.ComponentManager.get(e):Ext.ComponentManager.create(e,this.defaultType)),e},move:function(e,t){var n,i=this,r=i.items;if(e.isComponent&&(e=r.indexOf(e)),n=r.getAt(e),e!==t){if(n=r.removeAt(e),n===!1)return!1;t=Math.min(t,r.getCount()),r.insert(t,n),i.onMove(n,e,t),i.hasListeners.childmove&&i.fireEvent("childmove",i,n,e,t),i.updateLayout()}return n},moveBefore:function(e,t){return e!==t&&(e=this.layout.moveItemBefore(e,t)),e},moveAfter:function(e,t){var n,i=this.layout;return e!==t&&(n=t?i.getMoveAfterIndex(t):0,e=i.moveItemBefore(e,this.items.getAt(n))),e},nextChild:function(e,t){var n,i=this,r=i.items,o=r.indexOf(e),a=0,s=r.length;if(-1!==o){if(t)for(;s>a&&(n=r.getAt(o+a),n&&!Ext.ComponentQuery.is(n,t));a++);else n=r.getAt(o+1);!n&&i.ownerCt&&(n=i.ownerCt.nextChild(i,t))}return n},onAdd:Ext.emptyFn,onBeforeAdd:function(e){var t=e.ownerCt;t&&t!==this&&t.remove(e,!1)},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments),this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments),this.repositionFloatingItems()},prevChild:function(e,t){var n,i=this,r=i.items,o=r.indexOf(e),a=0,s=r.length;if(-1!==o){if(t)for(;s>a&&(n=r.getAt(o-a),n&&!Ext.ComponentQuery.is(n,t));a++);else n=r.getAt(o-1);!n&&i.ownerCt&&(n=i.ownerCt.nextChild(i,t))}return n},remove:function(e,t){var n=this,i=n.getComponent(e);return!i||n.hasListeners.beforeremove&&n.fireEvent("beforeremove",n,i)===!1||(n.doRemove(i,t),n.hasListeners.remove&&n.fireEvent("remove",n,i),n.destroying||i.floating||n.updateLayout()),i},removeAll:function(e){var t,n=this,i=n.items.items.slice().concat(n.floatingItems.items),r=[],o=0,a=i.length;for(Ext.suspendLayouts(),n.removingAll=!0;a>o;o++)t=i[o],n.remove(t,e),t.ownerCt!==n&&r.push(t);return n.removingAll=!1,Ext.resumeLayouts(!!a),r},setLayout:function(e){var t,n,i=this,r=i.layout,o=r&&r.isLayout;"string"==typeof e&&(e={type:e}),n=e.type,!o||n&&n!==r.type?(o&&r.setOwner(null),t=i.self.prototype.layout,"string"==typeof t?e.type=n||t:Ext.merge(Ext.merge({},t),e),e=this.layout=Ext.Factory.layout(e),e.setOwner(this)):(delete e.type,r.setConfig(e)),i.rendered&&i.updateLayout()},setActiveItem:function(e){return this.getLayout().setActiveItem(e)},privates:{applyDefaults:function(e){var t=this,n=t.defaults;return n&&(Ext.isFunction(n)&&(n=n.call(t,e)),Ext.isString(e)&&(e=Ext.ComponentManager.get(e)),e.isComponent?e.setConfig(n,null,t._applyDefaultsOptions):e=t.getConfigurator().merge(t,Ext.Object.fork(n),e)),e},applyReference:function(e){var t;return e&&">"===e.charAt(t=e.length-1)&&(this.isParentReference=!0,e=e.substring(0,t)),e},applyTargetCls:function(e){this.layoutTargetCls=e},attachReference:function(e){var t,n,i=this;i.destroying||i.isDestroyed||(n=i.refs||(i.refs={}),t=e.referenceKey,n[t]=e)},clearReference:function(e){var t=this.refs,n=e.referenceKey;t&&n&&(e.viewModelKey=e.referenceKey=t[n]=null)},clearReferences:function(){this.refs=null},detachComponent:function(e){Ext.getDetachedBody().appendChild(e.getEl())},doRemove:function(e,t){t=t===!0||t!==!1&&this.autoDestroy;var n=this,i=n.layout,r=i&&n.rendered,o=e.destroying||t,a=e.floating;a?n.floatingItems.remove(e):n.items.remove(e),r&&!a&&(i.running&&Ext.Component.cancelLayout(e,o),i.onRemove(e,o)),e.onRemoved(o),n.onRemove(e,o),t?e.destroy():(r&&!a&&i.afterRemove(e),n.detachOnRemove&&e.rendered&&n.detachComponent(e))},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var e=this.getLayout();e&&e.finishRender()},getChildItemsToDisable:function(){return this.query("[isFormField],[isFocusableContainer],button")},getComponentId:function(e){return e.getItemId&&e.getItemId()},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getScrollerEl:function(){return this.layout.getScrollerEl()||Ext.Component.prototype.getScrollerEl.call(this)},prepareItems:function(e,t){e=Ext.isArray(e)?e.slice():[e];for(var n,i=this,r=0,o=e.length;o>r;r++)n=e[r],null==n?(Ext.Array.erase(e,r,1),--r,--o):(t&&(n=this.applyDefaults(n)),n.initOwnerCt=i,n.isComponent&&(n.instancedCmp=!0),e[r]=i.lookupComponent(n),delete n.initOwnerCt);return e},repositionFloatingItems:function(){var e,t,n=this.floatingItems.items,i=n.length;for(e=0;i>e;e++)t=n[e],t.el&&!t.hidden&&t.setPosition(t.x,t.y)},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){for(var e,t=this.items.items,n=t.length,i=this._noMargin;n--;)e=t[n],e.margin$=null,e.el.setStyle(i)},setupRenderTpl:function(e){Ext.Component.prototype.setupRenderTpl.apply(this,arguments),this.getLayout().setupRenderTpl(e)}}},0,["container"],["component","box","container"],{component:!0,box:!0,container:!0},["widget.container"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.container,"Container",Ext,"Container",Ext,"AbstractContainer"],0),Ext.cmd.derive("Ext.Img",Ext.Component,{autoEl:"img",baseCls:"x-img",src:"",alt:"",title:"",imgCls:"",ariaRole:"img",maskOnDisable:!1,initComponent:function(){this.glyph&&(this.autoEl="div"),Ext.Component.prototype.initComponent.call(this)},getElConfig:function(){var e,t,n=this,i=n.autoEl,r=Ext.Component.prototype.getElConfig.call(this),o=Ext._glyphFontFamily,a=n.glyph;return"img"===i||Ext.isObject(i)&&"img"===i.tag?e=r:n.glyph?("string"==typeof a&&(t=a.split("@"),a=t[0],o=t[1]||o),r.html="&#"+a+";",o&&(r.style=r.style||{},r.style.fontFamily=o)):r.cn=[e={tag:"img",role:n.ariaRole,id:n.id+"-img"}],e&&(n.imgCls&&(e.cls=(e.cls?e.cls+" ":"")+n.imgCls),e.src=n.src||Ext.BLANK_IMAGE_URL),n.alt&&((e||r).alt=n.alt),n.title&&((e||r).title=n.title),r},onRender:function(){var e,t=this,n=t.autoEl;Ext.Component.prototype.onRender.apply(this,arguments),e=t.el,"img"===n||Ext.isObject(n)&&"img"===n.tag?t.imgEl=e:t.imgEl=e.getById(t.id+"-img")},onDestroy:function(){var e=this,t=e.imgEl;t&&e.el!==t&&t.destroy(),this.imgEl=null,Ext.Component.prototype.onDestroy.call(this)},setSrc:function(e){var t=this,n=t.imgEl;t.src=e,n&&(n.dom.src=e||Ext.BLANK_IMAGE_URL)},setGlyph:function(e){var t,n=this,i=Ext._glyphFontFamily,r=n.glyph,o=n.el;n.glyph=e,n.rendered&&e!==r&&("string"==typeof e&&(t=e.split("@"),e=t[0],i=t[1]||i),o.dom.innerHTML="&#"+e+";",i&&o.setStyle("font-family",i))}},0,["image","imagecomponent"],["component","box","image","imagecomponent"],{component:!0,box:!0,image:!0,imagecomponent:!0},["widget.image","widget.imagecomponent"],0,[Ext,"Img"],0),Ext.cmd.derive("Ext.util.StoreHolder",Ext.Base,{mixinId:"storeholder",bindStore:function(e,t,n){n=n||"store";var i=this,r=t?null:i[n];return e!==r&&(r&&(i.onUnbindStore(r,t,n),i.isComponent&&"store"===n&&r.autoDestroy?r.destroy():i.unbindStoreListeners(r)),e?(i[n]=e=Ext.data.StoreManager.lookup(e),i.bindStoreListeners(e),i.onBindStore(e,t,n,r)):i[n]=null),i},getStore:function(){return this.store},setStore:function(e){this.bindStore(e)},unbindStoreListeners:function(e){var t=this.storeListeners;t&&e.un(t)},bindStoreListeners:function(e){var t=this.getStoreListeners(e);t&&(t=Ext.apply({},t),t.scope||(t.scope=this),this.storeListeners=t,e.on(t))},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"StoreHolder"],0),Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:!0,msg:"Loading...",msgCls:"x-mask-loading",msgWrapCls:"x-mask-msg",useMsg:!0,useTargetEl:!1,cls:"x-mask",componentCls:"x-border-box",ariaRole:"status",focusable:!0,tabIndex:0,autoEl:{tag:"div",role:"status"},childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',"x-","mask-msg-text",'{childElCls}">{msg}</div>',"</div>","</div>"],constructor:function(e){var t,n=this;2===arguments.length?(t=n.target=e,e=arguments[1]):t=e.target,Ext.Component.prototype.constructor.call(this,e),t.isComponent?(n.ownerCt=t,n.hidden=!0,n.renderTo=n.getMaskTarget(),n.external=n.renderTo===Ext.getBody(),n.bindComponent(t)):(t=Ext.get(t),n.isElement=!0,n.renderTo=n.target),n.render(n.renderTo),n.store&&n.bindStore(n.store,!0)},initRenderData:function(){var e=Ext.Component.prototype.initRenderData.apply(this,arguments);return e.msg=this.msg||"",e},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments),this.maskEl=this.el},bindComponent:function(e){var t=this,n={scope:this,resize:t.sizeMask};t.external&&(n.added=t.onComponentAdded,n.removed=t.onComponentRemoved,e.floating?(n.move=t.sizeMask,t.activeOwner=e):e.ownerCt&&t.onComponentAdded(e.ownerCt)),t.mon(e,n),t.external&&t.mon(Ext.GlobalEvents,{show:t.onContainerShow,hide:t.onContainerHide,expand:t.onContainerExpand,collapse:t.onContainerCollapse,scope:t})},onComponentAdded:function(e){var t=this;delete t.activeOwner,t.floatParent=e,e.floating||(e=e.up("[floating]")),e?(t.activeOwner=e,t.mon(e,"move",t.sizeMask,t),t.mon(e,"tofront",t.onOwnerToFront,t)):t.preventBringToFront=!0,e=t.floatParent.ownerCt,t.rendered&&t.isVisible()&&e&&(t.floatOwner=e,t.mon(e,"afterlayout",t.sizeMask,t,{single:!0}))},onComponentRemoved:function(){var e=this,t=e.activeOwner,n=e.floatOwner;t&&(e.mun(t,"move",e.sizeMask,e),e.mun(t,"tofront",e.onOwnerToFront,e)),n&&e.mun(n,"afterlayout",e.sizeMask,e),delete e.activeOwner,delete e.floatOwner},afterRender:function(){var e=this;Ext.Component.prototype.afterRender.apply(this,arguments),Ext.isIE&&e.el.on("mousedown",e.onMouseDown,e),this.el.skipGarbageCollection=!0},onMouseDown:function(e){var t=this.el;e.within(t)&&(e.preventDefault(),t.focus())},onOwnerToFront:function(e,t){this.el.setStyle("zIndex",t+1)},onContainerShow:function(){this.isHierarchicallyHidden()||this.onComponentShow()},onContainerHide:function(){this.isHierarchicallyHidden()&&this.onComponentHide()},onContainerExpand:function(){this.isHierarchicallyHidden()||this.onComponentShow()},onContainerCollapse:function(){this.isHierarchicallyHidden()&&this.onComponentHide()},onComponentHide:function(){var e=this;e.rendered&&e.isVisible()&&(e.hide(),e.showNext=!0)},onComponentShow:function(){this.showNext&&this.show(),delete this.showNext},sizeMask:function(){var e=this,t=e.activeOwner||e.target,n=e.external?e.getOwner().el:e.getMaskTarget();e.rendered&&e.isVisible()&&(e.external&&(!e.isElement&&t.floating&&e.onOwnerToFront(t,t.el.getZIndex()),e.el.setSize(n.getSize()).alignTo(n,"tl-tl")),e.msgWrapEl.center(e.el))},bindStore:function(e){var t=this;t.mixins.storeholder.bindStore.apply(t,arguments),e=t.store,e&&e.isLoading()&&t.onBeforeLoad()},getStoreListeners:function(e){var t=this.onLoad,n=this.onBeforeLoad,i={cachemiss:n,cachefilled:{fn:t,buffer:100}};return e.loadsSynchronously()||(i.beforeload=n,i.load=t),i},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments),
this.loading&&this.onLoad()},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var e=this.getOwner();return this.isElement?this.target:this.useTargetEl?e.getTargetEl():e.getMaskTarget()||Ext.getBody()},onBeforeLoad:function(){var e,t=this,n=t.getOwner();t.disabled||(t.loading=!0,n.componentLayoutCounter?t.maybeShow():(e=n.afterComponentLayout,n.afterComponentLayout=function(){n.afterComponentLayout=e,e.apply(n,arguments),t.maybeShow()}))},maybeShow:function(){var e=this,t=e.getOwner();t.isVisible(!0)?e.loading&&t.rendered&&e.show():e.showNext=!0},hide:function(){var e=this,t=e.ownerCt;return e.isElement?(t.unmask(),void e.fireEvent("hide",this)):(t.enableTabbing(),t.setMasked(!1),delete e.showNext,Ext.Component.prototype.hide.apply(this,arguments))},show:function(){var e=this;return e.isElement?(e.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls),void e.fireEvent("show",this)):Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var e=this,t=e.ownerCt,n=e.el;e.loading=!0,Ext.Component.prototype.afterShow.apply(this,arguments),e.hasOwnProperty("msgWrapCls")&&(n.dom.className=e.msgWrapCls),e.useMsg?e.msgTextEl.setHtml(e.msg):e.msgEl.hide(),e.shim||Ext.useShims?n.enableShim(null,!0):n.disableShim(),t.disableTabbing(),t.setMasked(!0),n.restoreTabbableState(),t.containsFocus&&e.focus(),e.sizeMask()},onLoad:function(){this.loading=!1,this.hide()},beforeDestroy:function(){this.ownerCt=null,this.bindStore(null),Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var e=this;e.isElement&&e.ownerCt.unmask(),Ext.Component.prototype.onDestroy.call(this)},privates:{getFocusEl:function(){return this.el}}},1,["loadmask"],["component","box","loadmask"],{component:!0,box:!0,loadmask:!0},["widget.loadmask"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,"LoadMask"],0),Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:!0,nullBox:{},usesContentHeight:!0,usesContentWidth:!0,usesHeight:!0,usesWidth:!0,widthCache:{},heightCache:{},beginLayoutCycle:function(e,t){var n,i,r,o,a=this,s=a.owner,l=e.ownerCtContext,d=e.heightModel,u=e.widthModel,c=s.el.dom===document.body,h=s.lastBox||a.nullBox,p=s.el.lastBox||a.nullBox,f=!c,g=e.isTopLevel;Ext.layout.Layout.prototype.beginLayoutCycle.call(this,e,t),t&&(a.usesContentWidth&&++e.consumersContentWidth,a.usesContentHeight&&++e.consumersContentHeight,a.usesWidth&&++e.consumersWidth,a.usesHeight&&++e.consumersHeight,l&&!l.hasRawContent&&(n=s.ownerLayout,n&&(n.usesWidth&&++e.consumersWidth,n.usesHeight&&++e.consumersHeight))),u.configured?(r=s[u.names.width],g&&u.calculatedFrom&&(r=h.width),c||(f=a.setWidthInDom||(t?r!==p.width:u.constrained)),e.setWidth(r,f)):g&&(u.calculated&&(i=h.width,e.setWidth(i,i!==p.width)),i=h.x,e.setProp("x",i,i!==p.x)),d.configured?(o=s[d.names.height],g&&d.calculatedFrom&&(o=h.height),c||(f=t?o!==p.height:d.constrained),e.setHeight(o,f)):g&&(d.calculated&&(i=h.height,e.setHeight(i,i!==p.height)),i=h.y,e.setProp("y",i,i!==p.y))},finishedLayout:function(e){var t,n,i,r,o,a=this,s=e.children,l=a.owner;if(s)for(t=s.length,n=0;t>n;n++)i=s[n],i.el.lastBox=i.props;e.previousSize=a.lastComponentSize,a.lastComponentSize=l.el.lastBox=o=e.props,r=l.lastBox||(l.lastBox={}),r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height,r.invalid=!1,Ext.layout.Layout.prototype.finishedLayout.call(this,e)},notifyOwner:function(e){var t=this,n=t.lastComponentSize,i=e.previousSize,r=[n.width,n.height,void 0,void 0];i&&(r[2]=i.width,r[3]=i.height),t.owner.afterComponentLayout.apply(t.owner,r)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(e){var t,n=this,i=n.targetInfo;return i||(t=e.getEl("getTarget",n),n.targetInfo=i={padding:t.getPaddingInfo(),border:t.getBorderInfo()}),i},measureAutoDimensions:function(e,t){var n,i,r,o,a,s,l,d,u=this,c=u.owner,h=c.layout,p=e.heightModel,f=e.widthModel,g=e.boxParent,m=e.isBoxParent,x=e.target,v=e.props,y={gotWidth:!1,gotHeight:!1,isContainer:n=!e.hasRawContent},E=t||3,b=0,C=0;return f.shrinkWrap&&e.consumersContentWidth?(++b,i=!(1&E),n?i?(y.contentWidth=0,y.gotWidth=!0,++C):void 0!==(y.contentWidth=e.getProp("contentWidth"))&&(y.gotWidth=!0,++C):(a=v.contentWidth,"number"==typeof a?(y.contentWidth=a,y.gotWidth=!0,++C):(o=i?!0:e.hasDomProp("containerChildrenSizeDone")?m||!g||g.widthModel.shrinkWrap?!0:g.hasDomProp("width"):!1,o&&(i?s=0:h&&h.measureContentWidth?s=h.measureContentWidth(e):x.cacheWidth?(l=x.xtype+"-"+x.ui,d=u.widthCache,s=d[l]||(d[l]=u.measureContentWidth(e))):s=u.measureContentWidth(e),isNaN(y.contentWidth=s)||(e.setContentWidth(s,!0),y.gotWidth=!0,++C))))):f.natural&&e.consumersWidth&&(++b,a=v.width,"number"==typeof a?(y.width=a,y.gotWidth=!0,++C):(o=m||!g?!0:g.hasDomProp("width"),o&&(isNaN(y.width=u.measureOwnerWidth(e))||(e.setWidth(y.width,!1),y.gotWidth=!0,++C)))),p.shrinkWrap&&e.consumersContentHeight?(++b,r=!(2&E),n?r?(y.contentHeight=0,y.gotHeight=!0,++C):void 0!==(y.contentHeight=e.getProp("contentHeight"))&&(y.gotHeight=!0,++C):(a=v.contentHeight,"number"==typeof a?(y.contentHeight=a,y.gotHeight=!0,++C):(o=r?!0:e.hasDomProp("containerChildrenSizeDone")?c.noWrap?!0:f.shrinkWrap?m||!g||g.widthModel.shrinkWrap?!0:g.hasDomProp("width"):(e.bodyContext||e).hasDomProp("width"):!1,o&&(r?s=0:h&&h.measureContentHeight?s=h.measureContentHeight(e):x.cacheHeight?(l=x.xtype+"-"+x.ui,d=u.heightCache,s=d[l]||(d[l]=u.measureContentHeight(e))):s=u.measureContentHeight(e),isNaN(y.contentHeight=s)||(e.setContentHeight(s,!0),y.gotHeight=!0,++C))))):p.natural&&e.consumersHeight&&(++b,a=v.height,"number"==typeof a?(y.height=a,y.gotHeight=!0,++C):(o=m||!g?!0:g.hasDomProp("width"),o&&(isNaN(y.height=u.measureOwnerHeight(e))||(e.setHeight(y.height,!1),y.gotHeight=!0,++C)))),g&&e.onBoxMeasured(),y.gotAll=C===b,y},measureContentWidth:function(e){return e.el.getWidth()-e.getFrameInfo().width},measureContentHeight:function(e){return e.el.getHeight()-e.getFrameInfo().height},measureOwnerHeight:function(e){return e.el.getHeight()},measureOwnerWidth:function(e){return e.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0),Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:!1,setWidthInDom:!1,waitForOuterHeightInDom:!1,waitForOuterWidthInDom:!1,beginLayoutCycle:function(e){var t=this,n=t.lastWidthModel,i=t.lastHeightModel,r=t.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments),n&&n.fixed&&e.widthModel.shrinkWrap&&r.setWidth(null),i&&i.fixed&&e.heightModel.shrinkWrap&&r.setHeight(null)},calculate:function(e){var t,n,i=this,r=i.measureAutoDimensions(e),o=e.heightModel,a=e.widthModel;r.gotWidth?a.shrinkWrap?i.publishOwnerWidth(e,r.contentWidth):i.publishInnerWidth&&i.publishInnerWidth(e,r.width):!a.auto&&i.publishInnerWidth&&(t=i.waitForOuterWidthInDom?e.getDomProp("width"):e.getProp("width"),void 0===t?i.done=!1:i.publishInnerWidth(e,t)),r.gotHeight?o.shrinkWrap?i.publishOwnerHeight(e,r.contentHeight):i.publishInnerHeight&&i.publishInnerHeight(e,r.height):!o.auto&&i.publishInnerHeight&&(n=i.waitForOuterHeightInDom?e.getDomProp("height"):e.getProp("height"),void 0===n?i.done=!1:i.publishInnerHeight(e,n)),r.gotAll||(i.done=!1)},calculateOwnerHeightFromContentHeight:function(e,t){return t+e.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(e,t){return t+e.getFrameInfo().width},publishOwnerHeight:function(e,t){var n,i,r,o=this,a=o.owner,s=o.calculateOwnerHeightFromContentHeight(e,t);isNaN(s)?o.done=!1:(n=Ext.Number.constrain(s,a.minHeight,a.maxHeight),n===s?i=o.setHeightInDom:(r=o.sizeModels[s>n?"constrainedMax":"constrainedMin"],s=n,e.heightModel.calculatedFromShrinkWrap?e.heightModel=r:e.invalidate({heightModel:r})),e.setHeight(s,i))},publishOwnerWidth:function(e,t){var n,i,r,o=this,a=o.owner,s=o.calculateOwnerWidthFromContentWidth(e,t);isNaN(s)?o.done=!1:(n=Ext.Number.constrain(s,a.minWidth,a.maxWidth),n===s?i=o.setWidthInDom:(r=o.sizeModels[s>n?"constrainedMax":"constrainedMin"],s=n,e.widthModel.calculatedFromShrinkWrap?e.widthModel=r:e.invalidate({widthModel:r})),e.setWidth(s,i))}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0),Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(e){var t,n,i=this;if(Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments),!e.textEls)if(n=i.owner.textEl,n.isComposite)for(e.textEls=[],n=n.elements,t=n.length;t--;)e.textEls[t]=e.getEl(Ext.get(n[t]));else e.textEls=[e.getEl("textEl")]},calculate:function(e){var t,n,i,r=this;if(Ext.layout.component.Auto.prototype.calculate.apply(this,arguments),Ext.isNumber(i=e.getProp("width")))for(i-=e.getBorderInfo().width,n=e.textEls,t=n.length;t--;)n[t].setWidth(i);else r.done=!1}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0),Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{config:{value:0,textTpl:null},baseCls:"x-progress",animate:!1,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var e=this,t=e.value||0;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{internalText:!e.hasOwnProperty("textEl"),text:e.text||"&#160;",percentage:100*t})},onRender:function(){var e=this;Ext.Component.prototype.onRender.apply(this,arguments),e.textEl?(e.textEl=Ext.get(e.textEl),e.updateText(e.text)):e.textEl=e.el.select("."+e.baseCls+"-text")},applyValue:function(e){return e||0},updateValue:function(e){this.updateProgress(e,Math.round(100*e)+"%")},updateProgress:function(e,t,n){e=e||0;var i=this,r=i.value,o=i.getTextTpl();return i.value=e||(e=0),null!=t?i.updateText(t):o&&i.updateText(o.apply({value:e,percent:100*e})),i.rendered&&!i.isDestroyed&&(n===!0||n!==!1&&i.animate?(i.bar.stopAnimation(),i.bar.animate(Ext.apply({from:{width:100*r+"%"},to:{width:100*e+"%"}},i.animate))):i.bar.setStyle("width",100*e+"%")),i.fireEvent("update",i,e,t),i},updateText:function(e){var t=this;return t.text=e,t.rendered&&t.textEl.setHtml(t.text),t},applyTextTpl:function(e){return e.isTemplate||(e=new Ext.XTemplate(e)),e},applyText:function(e){this.updateText(e)},getText:function(){return this.text},wait:function(e){var t,n=this;return n.waitTimer||(t=n,e=e||{},n.updateText(e.text),n.waitTimer=Ext.TaskManager.start({run:function(t){var i=e.increment||10;t-=1,n.updateProgress(((t+i)%i+1)*(100/i)*.01,null,e.animate)},interval:e.interval||1e3,duration:e.duration,onStop:function(){e.fn&&e.fn.apply(e.scope||n),n.reset()},scope:t})),n},isWaiting:function(){return null!==this.waitTimer},reset:function(e){var t=this;return t.updateProgress(0),t.clearTimer(),e===!0&&t.hide(),t},clearTimer:function(){var e=this;e.waitTimer&&(e.waitTimer.onStop=null,Ext.TaskManager.stop(e.waitTimer),e.waitTimer=null)},onDestroy:function(){var e=this,t=e.bar;e.clearTimer(),e.rendered&&(e.textEl.isComposite&&e.textEl.clear(),Ext.destroyMembers(e,"textEl","progressBar"),t&&e.animate&&t.stopAnimation()),Ext.Component.prototype.onDestroy.call(this)}},0,["progressbar"],["component","box","progressbar"],{component:!0,box:!0,progressbar:!0},["widget.progressbar"],0,[Ext,"ProgressBar"],0),Ext.cmd.derive("Ext.panel.Bar",Ext.container.Container,{vertical:!1,_verticalSides:{left:1,right:1},initComponent:function(){var e=this,t=e.vertical;e.dock=e.dock||(t?"left":"top"),e.layout=Ext.apply(t?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},e.layout),Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(e,t,n){this.initOrientation(),Ext.container.Container.prototype.onAdded.call(this,e,t,n)},onRemoved:function(e){this.removeClsWithUI(this.uiCls),Ext.container.Container.prototype.onRemoved.call(this,e)},beforeRender:function(){var e=this;(e.forceOrientation||!e.ownerCt)&&e.initOrientation(),Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(e){var t,n,i=this;e!==i.dock&&(Ext.suspendLayouts(),i.clearOrientation(),Ext.container.Container.prototype.setDock.call(this,e),i.initOrientation(),n=i.vertical,t=i.layout,t.setVertical(n),t.setAlignRoundingMethod(n?"ceil":"floor"),Ext.resumeLayouts(!0))},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var e=this,t=e.dock,n=e.vertical=t?t in e._verticalSides:e.vertical;e.addClsWithUI([n?"vertical":"horizontal",e.getDockName()])}}},0,0,["component","box","container"],{component:!0,box:!0,container:!0},0,0,[Ext.panel,"Bar"],0),Ext.define("Ext.rtl.panel.Bar",{override:"Ext.panel.Bar",rtlPositions:{top:"top",right:"left",bottom:"bottom",left:"right"},_rtlRotationClasses:{1:"x-title-rotate-left",2:"x-title-rotate-right"},_rtlRotationAngles:{1:270,2:90},onAdded:function(e,t,n){var i=this;i.isParentRtl()&&(i._rotationClasses=i._rtlRotationClasses,i._rotationAngles=i._rtlRotationAngles),(arguments.callee.$previous||Ext.container.Container.prototype.onAdded).call(this,e,t,n)},privates:{getDockName:function(){var e=this,t=e.dock;return e.isParentRtl()?e.rtlPositions[t]:t}}}),Ext.cmd.derive("Ext.panel.Title",Ext.Component,{isTitle:!0,noWrap:!0,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{unselectable:"on"},childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="headerRole"> role="{headerRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl></div></div>',_textAlignClasses:{left:"x-title-align-left",center:"x-title-align-center",right:"x-title-align-right"},_iconAlignClasses:{top:"x-title-icon-top",right:"x-title-icon-right",bottom:"x-title-icon-bottom",left:"x-title-icon-left"},_rotationClasses:{0:"x-title-rotate-none",1:"x-title-rotate-right",2:"x-title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:"x-title",_titleSuffix:"-title",_glyphCls:"x-title-glyph",_iconWrapCls:"x-title-icon-wrap",_baseIconCls:"x-title-icon",_itemCls:"x-title-item",_textCls:"x-title-text",afterComponentLayout:function(){var e,t,n,i=this,r=i.getRotation();r&&!Ext.isIE8&&(n=i.el,e=i.lastBox,t=e.x,n.setStyle(i._getVerticalAdjustDirection(),t+(1===r?e.width:-e.height)+"px")),Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var e=this,t=e.getRotation(),n=e.el;Ext.Component.prototype.onRender.call(this),t&&n.setVertical(e._rotationAngles[t]),Ext.supports.FixedTableWidthBug&&(n._needsTableWidthFix=!0)},applyText:function(e){return e||(e="&#160;"),e},beforeRender:function(){var e=this;Ext.Component.prototype.beforeRender.call(this),e.addCls(e._rotationClasses[e.getRotation()]),e.addCls(e._textAlignClasses[e.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var e,t=this,n=t.getIcon(),i=t.getIconCls(),r=t.getGlyph(),o=Ext._glyphFontFamily,a=t.getIconAlign();return"string"==typeof r&&(e=r.split("@"),r=e[0],o=e[1]),{id:t.id,ui:t.ui,itemCls:t._itemCls,iconUrl:n,iconCls:i,iconWrapCls:t._iconWrapCls,baseIconCls:t._baseIconCls,iconAlignCls:t._iconAlignClasses[a],glyph:r,glyphCls:r?t._glyphCls:"",glyphFontFamily:o}},initRenderData:function(){var e,t,n=this;return t=Ext.apply({text:n.getText(),headerRole:n.headerRole,id:n.id,ui:n.ui,itemCls:n._itemCls,textCls:n._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this)),n._hasIcon()&&(e=n.getIconAlign(),t.iconMarkup=n.getIconMarkup(),t.iconBeforeTitle="top"===e||"left"===e),t},onAdded:function(e,t,n){var i=this,r=i._titleSuffix,o=e.baseCls;i.addCls([o+r,o+r+"-"+e.ui]),Ext.Component.prototype.onAdded.call(this,e,t,n)},updateGlyph:function(e,t){e=e||0;var n,i,r,o=this,a=o._glyphCls;o.glyph=e,o.rendered&&(o._syncIconVisibility(),n=o.iconEl,"string"==typeof e&&(r=e.split("@"),e=r[0],i=r[1]||Ext._glyphFontFamily),e?t!==e&&(n.dom.innerHTML="&#"+e+";",n.addCls(a)):(n.dom.innerHTML="",n.removeCls(a)),i&&n.setStyle("font-family",i),o._didIconStateChange(t,e)&&o.updateLayout())},updateIcon:function(e,t){e=e||"";var n,i=this;i.rendered&&e!==t&&(i._syncIconVisibility(),n=i.iconEl,n.setStyle("background-image",e?"url("+e+")":""),i._didIconStateChange(t,e)&&i.updateLayout())},updateIconAlign:function(e,t){var n,i,r=this,o=r.iconWrapEl;r.iconWrapEl&&(n=r.el,i=r._iconAlignClasses,t&&o.removeCls(i[t]),o.addCls(i[e]),"top"===e||"left"===e?n.insertFirst(o):n.appendChild(o),r.updateLayout())},updateIconCls:function(e,t){e=e||"";var n,i=this;i.rendered&&t!==e&&(i._syncIconVisibility(),n=i.iconEl,t&&n.removeCls(t),n.addCls(e),i._didIconStateChange(t,e)&&i.updateLayout())},updateRotation:function(e,t){var n,i,r=this;r.rendered&&(n=r.el,i=r._rotationClasses,r.removeCls(i[t]),r.addCls(i[e]),n.setHorizontal(),e&&n.setVertical(r._rotationAngles[e]),n.setStyle({right:"",left:"",top:"",height:"",width:""}),r.lastBox=null,r.updateLayout())},updateText:function(e){this.rendered&&(this.textEl.setHtml(e),this.updateLayout())},updateTextAlign:function(e,t){var n=this,i=n._textAlignClasses;n.rendered&&(t&&n.removeCls(i[t]),n.addCls(i[e]),n.updateLayout())},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(e,t){var n=Ext.isEmpty(t);return Ext.isEmpty(e)?!n:n},_hasIcon:function(){return!!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var e,t,n=this,i=n.el,r=n._hasIcon(),o=n.iconWrapEl;r&&!o&&(t=n.iconAlign,e="left"===t||"top"===t,i.dom.insertAdjacentHTML(e?"afterbegin":"beforeend",n.getIconMarkup()),o=n.iconWrapEl=i[e?"first":"last"](),n.iconEl=o.first()),o&&o.setDisplayed(r)}}},0,["title"],["component","box","title"],{component:!0,box:!0,title:!0},["widget.title"],0,[Ext.panel,"Title"],0),Ext.define("Ext.rtl.panel.Title",{override:"Ext.panel.Title",getIconRenderData:function(){var e=this,t=arguments.callee.$previous.call(this),n=e.ownerCt;return n&&n.isParentRtl()&&(t.childElCls=" "+e._rtlCls),t},privates:{_getVerticalAdjustDirection:function(){var e=this.ownerCt;return e&&e.isParentRtl()?"right":"left"}}}),Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{isTool:!0,focusable:!0,baseCls:"x-tool",disabledCls:"x-tool-disabled",toolPressedCls:"x-tool-pressed",toolOverCls:"x-tool-over",ariaRole:"button",childEls:["toolEl"],renderTpl:['<img id="{id}-toolEl" data-ref="toolEl" src="{blank}" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"/>'],toolOwner:null,tooltipType:"qtip",stopEvent:!0,cacheHeight:!0,cacheWidth:!0,initComponent:function(){var e=this;e.type=e.type||e.id,Ext.applyIf(e.renderData,{baseCls:e.baseCls,blank:Ext.BLANK_IMAGE_URL,type:e.type}),e.tooltip=e.tooltip||e.qtip,Ext.Component.prototype.initComponent.call(this)},afterRender:function(){var e,t=this;Ext.Component.prototype.afterRender.apply(this,arguments),t.el.on({click:t.onClick,mousedown:t.onMouseDown,mouseover:t.onMouseOver,mouseout:t.onMouseOut,scope:t}),e=t.tooltip,e&&t.setTooltip(e)},tipAttrs:{qtip:"data-qtip"},setTooltip:function(e,t){var n,i=this,r=i.tooltip,o=i.tooltipType,a=i.id,s=i.el;r&&Ext.quickTipsActive&&Ext.isObject(r)&&Ext.tip.QuickTipManager.unregister(a),i.tooltip=e,t&&(i.tooltipType=t),e&&(Ext.quickTipsActive&&Ext.isObject(e)?Ext.tip.QuickTipManager.register(Ext.apply({target:a},e)):s&&(t&&o&&t!==o&&(n=i.tipAttrs[o]||"title",s.dom.removeAttribute(n)),n=i.tipAttrs[t||o]||"title",s.dom.setAttribute(n,e)))},setType:function(e){var t=this,n=t.type;return t.type=e,t.rendered?(n&&t.toolEl.removeCls(t.baseCls+"-"+n),t.toolEl.addCls(t.baseCls+"-"+e)):t.renderData.type=e,t},onDestroy:function(){var e=this,t=e.keyMap;e.setTooltip(null),t&&(t.destroy(),e.keyMap=null),delete e.toolOwner,Ext.Component.prototype.onDestroy.call(this)},privates:{getFocusEl:function(){return this.el},onClick:function(e,t){var n=this;return n.disabled?!1:(n.el.removeCls(n.toolPressedCls+" "+n.toolOverCls),n.stopEvent!==!1&&e.stopEvent(),n.handler?Ext.callback(n.handler,n.scope,[e,t,n.ownerCt,n],0,n):n.callback&&Ext.callback(n.callback,n.scope,[n.toolOwner||n.ownerCt,n,e],0,n),n.fireEvent("click",n,e,n.toolOwner||n.ownerCt),!0)},onMouseDown:function(){return this.disabled?!1:void this.el.addCls(this.toolPressedCls)},onMouseOver:function(){return this.disabled?!1:void this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,["tool"],["component","box","tool"],{component:!0,box:!0,tool:!0},["widget.tool"],0,[Ext.panel,"Tool"],0),Ext.cmd.derive("Ext.panel.Header",Ext.panel.Bar,{isHeader:!0,defaultType:"tool",indicateDrag:!1,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{ariaRole:"presentation",xtype:"title",flex:1},merge:function(e,t){return"string"==typeof e&&(e={text:e}),Ext.merge(t?Ext.Object.chain(t):{},e)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:"x-header",initComponent:function(){var e=this,t=e.items,n=e.itemPosition,i=[e.headerCls];e.tools=e.tools||[],e.items=t=t?t.slice():[],void 0!==n&&(e._userItems=t.slice(),e.items=t=[]),e.indicateDragCls=e.headerCls+"-draggable",e.indicateDrag&&i.push(e.indicateDragCls),e.addCls(i),e.syncNoBorderCls(),Ext.Array.push(t,e.tools),e.tools.length=0,Ext.panel.Bar.prototype.initComponent.call(this),e.on({dblclick:e.onDblClick,click:e.onClick,element:"el",scope:e})},addTool:function(e){this.add(Ext.ComponentManager.create(e,"tool"))},afterLayout:function(){var e,t,n,i,r=this;r.vertical&&(t=r.frameTR,t&&(e=r.frameBR,n=r.frameTL,i=r.getWidth()-t.getPadding("r")-(n?n.getPadding("l"):r.el.getBorderWidth("l"))+"px",e.setStyle("background-position-x",i),t.setStyle("background-position-x",i))),Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(e,t){var n,i,r=this;return e=e||"",n="string"==typeof e,n&&(e={text:e}),t?(Ext.suspendLayouts(),t.setConfig(e),Ext.resumeLayouts(!0),e=t):(n&&(e.xtype="title"),e.ui=r.ui,e.headerRole=r.headerRole,i="rotation"in e,e=Ext.create(e),!i&&r.vertical&&"default"===r.titleRotation&&(e.rotation=1)),e},applyTitlePosition:function(e){var t=this.items.getCount();return this._titleInItems&&--t,Math.max(Math.min(e,t),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this),this.syncBeforeAfterTitleClasses()},beforeRender:function(){var e=this,t=e.itemPosition;e.protoEl.unselectable(),Ext.panel.Bar.prototype.beforeRender.call(this),void 0!==t&&e.insert(t,e._userItems)},getTools:function(){return this.tools.slice()},onAdd:function(e,t){var n=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,e,t),e.isTool&&(n.push(e),n[e.type]=e)},onAdded:function(e,t,n){this.syncNoBorderCls(),Ext.panel.Bar.prototype.onAdded.call(this,e,t,n)},onRemoved:function(e,t,n){this.syncNoBorderCls(),Ext.panel.Bar.prototype.onRemoved.call(this,e,t,n)},setDock:function(e){var t=this,n=t.getTitle(),i=t.getTitleRotation(),r=n.getRotation();Ext.suspendLayouts(),Ext.panel.Bar.prototype.setDock.call(this,e),"default"===i&&(i=t.vertical?1:0,i!==r&&n.setRotation(i),t.rendered&&t.resetItemMargins()),Ext.resumeLayouts(!0)},updateGlyph:function(e){this.getTitle().setGlyph(e)},updateIcon:function(e){this.getTitle().setIcon(e)},updateIconAlign:function(e){this.getTitle().setIconAlign(e)},updateIconCls:function(e){this.getTitle().setIconCls(e)},updateTitle:function(e,t){t||(this.insert(this.getTitlePosition(),e),this._titleInItems=!0),this.titleCmp=e},updateTitleAlign:function(e){this.getTitle().setTextAlign(e)},updateTitlePosition:function(e){this.insert(e,this.getTitle())},updateTitleRotation:function(e){"default"===e&&(e=this.vertical?1:0),this.getTitle().setRotation(e)},privates:{fireClickEvent:function(e,t){var n="."+Ext.panel.Tool.prototype.baseCls;t.getTarget(n)||this.fireEvent(e,this,t)},getFocusEl:function(){return this.el},getFramingInfoCls:function(){var e=this,t=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),n=e.ownerCt;return!e.expanding&&n&&(n.collapsed||e.isCollapsedExpander)&&(t+="-"+n.collapsedCls),t+"-"+e.dock},onClick:function(e){this.fireClickEvent("click",e)},onDblClick:function(e){this.fireClickEvent("dblclick",e)},syncBeforeAfterTitleClasses:function(e){var t,n,i,r,o=this,a=o.items,s=a.items,l=o.getTitlePosition(),d=s.length,u=a.generation,c=o.syncBeforeAfterGen;if(e||c!==u)for(o.syncBeforeAfterGen=u,i=0;d>i;++i)r=s[i],t=r.afterTitleCls||(r.afterTitleCls=r.baseCls+"-after-title"),n=r.beforeTitleCls||(r.beforeTitleCls=r.baseCls+"-before-title"),!o.title||l>i?(c&&r.removeCls(t),r.addCls(n)):i>l&&(c&&r.removeCls(n),r.addCls(t))},syncNoBorderCls:function(){var e=this,t=this.ownerCt,n=e.headerCls+"-noborder";(t?t.border!==!1||t.frame:e.border!==!1)?e.removeCls(n):e.addCls(n)}}},0,["header"],["component","box","container","header"],{component:!0,box:!0,container:!0,header:!0},["widget.header"],0,[Ext.panel,"Header"],0),Ext.define("BP.overrides.panel.Header",{override:"Ext.panel.Header",constructor:function(){this.ui=this.getTheme(),(arguments.callee.$previous||Ext.panel.Bar.prototype.constructor).apply(this,arguments)}}),Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",factoryConfig:{defaultType:"none"},isBoxOverflowHandler:!0,$configPrefixed:!1,$configStrict:!1,constructor:function(e){this.initConfig(e)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(e){var t,n=this,i=e.state.boxPlan;i&&i.tooNarrow?(t=n.handleOverflow(e),t&&t.reservedSpace&&n.layout.publishInnerCtSize(e,t.reservedSpace)):n.clearOverflow()},completeLayout:Ext.emptyFn,finishedLayout:function(){var e,t,n=this,i=n.layout.owner;i.hasListeners.overflowchange&&(e=i.query(">[hidden]"),t=e.length,t!==n.lastHiddenCount&&(i.fireEvent("overflowchange",n.lastHiddenCount,t,e),n.lastHiddenCount=t))},onRemove:Ext.emptyFn,getItem:function(e){return this.layout.owner.getComponent(e)},getOwnerType:function(e){var t;return t=e.isToolbar?"toolbar":e.isTabBar?"tab-bar":e.isMenu?"menu":e.isBreadcrumb?"breadcrumb":e.getXType()},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var e=this,t=e.layout,n=t.innerCt;n.removeCls(e.getOverflowCls(t.oppositeDirection)),n.addCls(e.getOverflowCls(t.direction))}},1,0,0,0,["box.overflow.None","box.overflow.none"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0),Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(e,t){var n=this;n.el=Ext.get(e),n.el.unselectable(),Ext.apply(n,t),Ext.util.Observable.prototype.constructor.call(this),n.disabled||(n.disabled=!0,n.enable()),n.handler&&n.on("click",n.handler,n.scope||n)},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),Ext.isIE8&&this.el.on("dblclick",this.handleDblClick,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(e){(e||!this.disabled)&&(clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.clearListeners()),this.disabled=!0},setDisabled:function(e){this[e?"disable":"enable"]()},eventOptions:function(e){this.preventDefault&&e.preventDefault(),this.stopDefault&&e.stopEvent()},destroy:function(){this.disable(!0),this.clearListeners()},handleDblClick:function(e){clearTimeout(this.timer),this.fireEvent("mousedown",this,e),this.fireEvent("click",this,e)},handleMouseDown:function(e){clearTimeout(this.timer),this.pressedCls&&this.el.addCls(this.pressedCls),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this,e),this.fireEvent("click",this,e),this.accelerate&&(this.delay=400),this.timer=Ext.defer(this.click,this.delay||this.interval,this,[e])},click:function(e){this.fireEvent("click",this,e),this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12e3):this.interval,this,[e])},easeOutExpo:function(e,t,n,i){return e===i?t+n:n*(-Math.pow(2,-10*e/i)+1)+t},handleMouseOut:function(){clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(e){this.el.un("mouseover",this.handleMouseReturn,this),this.pressedCls&&this.el.addCls(this.pressedCls),this.click(e)},handleMouseUp:function(e){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.pressedCls&&this.el.removeCls(this.pressedCls),this.fireEvent("mouseup",this,e)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0),Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:"x-box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(e){var t=this;t.mixins.observable.constructor.call(t,e),t.scrollPosition=0,t.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(e){var t=this,n=t.layout,i=n.owner,r=t.getOwnerType(i),o=t.scrollerCls,a=o+" "+o+"-"+n.names[e]+" "+o+"-"+r+" "+o+"-"+r+"-"+i.ui;return i.plain&&(a+=" "+o+"-plain"),a},getOverflowCls:function(e){return this.scrollerCls+"-body-"+e},beginLayout:function(e){e.innerCtScrollPos=this.getScrollPosition(),Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(e){var t,n=this,i=e.state.boxPlan,r=n.layout,o=r.names,a=Math.min(n.getMaxScrollPosition(),e.innerCtScrollPos);i&&i.tooNarrow&&(t=e.childItems[e.childItems.length-1].props,n.scrollSize=t[o.x]+t[o.width],n.updateScrollButtons()),r.innerCt[o.setScrollLeft](a),Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,e)},handleOverflow:function(e){var t,n,i,r,o=this,a=o.layout.names,s=a.getWidth,l=a.parallelMargins;return o.showScrollers(),i=o.getBeforeScroller(),r=o.getAfterScroller(),
t=i[s]()+r[s]()+i.getMargin(l)+r.getMargin(l),n=e.targetContext.getPaddingInfo()[a.width],{reservedSpace:Math.max(t-n,0)}},getBeforeScroller:function(){var e=this;return e._beforeScroller||(e._beforeScroller=e.createScroller(e.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var e=this;return e._afterScroller||(e._afterScroller=e.createScroller(e.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(e,t,n){var i,r=this,o=r.layout.owner,a=r.scrollerCls;return i=o.el.getById(o.id+e),i.addClsOnOver(a+"-hover"),i.addClsOnClick(a+"-pressed"),i.setVisibilityMode(Ext.Element.DISPLAY),r[t]=new Ext.util.ClickRepeater(i,{interval:r.scrollRepeatInterval,handler:n,scope:r}),i},createWheelListener:function(){var e=this;e.wheelListener=e.layout.innerCt.on("mousewheel",e.onMouseWheel,e,{destroyable:!0})},onMouseWheel:function(e){e.stopEvent(),this.scrollBy(this.getWheelDelta(e)*this.wheelIncrement*-1,!1)},getWheelDelta:function(e){return e.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var e=this;e.wheelListener||e.createWheelListener(),e.getBeforeScroller().show(),e.getAfterScroller().show(),e.layout.owner.addClsWithUI("vertical"===e.layout.direction?"vertical-scroller":"scroller")},hideScrollers:function(){var e=this,t=e.getBeforeScroller(),n=e.getAfterScroller();t&&(t.hide(),n.hide(),e.layout.owner.removeClsWithUI("vertical"===e.layout.direction?"vertical-scroller":"scroller"))},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener")},scrollBy:function(e,t){this.scrollTo(this.getScrollPosition()+e,t)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var e,t=this,n=t.getBeforeScroller(),i=t.getAfterScroller();n&&i&&(e=t.scrollerCls+"-disabled",n[t.atExtremeBefore()?"addCls":"removeCls"](e),i[t.atExtremeAfter()?"addCls":"removeCls"](e),t.scrolling=!1)},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var e,t=this,n=t.layout;return e=isNaN(t.scrollPosition)?n.innerCt[n.names.getScrollLeft]():t.scrollPosition},getMaxScrollPosition:function(){var e=this,t=e.layout,n=e.scrollSize-t.innerCt[t.names.getWidth]();return 0>n?0:n},atExtremeBefore:function(){return!this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var e=this,t=e.getBeforeScroller(),n=e.getAfterScroller(),i=e.layout.names,r=e.scrollerCls;t.removeCls(r+"-"+i.beforeY),n.removeCls(r+"-"+i.afterY),t.addCls(r+"-"+i.beforeX),n.addCls(r+"-"+i.afterX),Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(e,t){var n=this,i=n.layout,r=i.names,o=n.getScrollPosition(),a=Ext.Number.constrain(e,0,n.getMaxScrollPosition());a===o||n.scrolling||(n.scrollPosition=NaN,void 0===t&&(t=n.animateScroll),i.innerCt[r.scrollTo](r.beforeScrollX,a,t?n.getScrollAnim():!1),t?n.scrolling=!0:n.updateScrollButtons(),n.fireEvent("scroll",n,a,t?n.getScrollAnim():!1))},scrollToItem:function(e,t){var n,i,r,o=this,a=o.layout,s=a.owner,l=a.names,d=a.innerCt;e=o.getItem(e),void 0!==e&&(e===s.items.first()?r=0:e===s.items.last()?r=o.getMaxScrollPosition():(n=o.getItemVisibility(e),n.fullyVisible||(i=e.getBox(!1,!0),r=i[l.x],n.hiddenEnd&&(r-=d[l.getWidth]()-i[l.width]))),void 0!==r&&o.scrollTo(r,t))},getItemVisibility:function(e){var t=this,n=t.getItem(e).getBox(!0,!0),i=t.layout,r=i.names,o=n[r.x],a=o+n[r.width],s=t.getScrollPosition(),l=s+i.innerCt[r.getWidth]();return{hiddenStart:s>o,hiddenEnd:a>l,fullyVisible:o>=s&&l>=a}}},1,0,0,0,["box.overflow.Scroller","box.overflow.scroller"],[["observable",Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0),Ext.define("Ext.rtl.layout.container.boxOverflow.Scroller",{override:"Ext.layout.container.boxOverflow.Scroller",getWheelDelta:function(e){var t=this.layout,n=e.getWheelDelta();return"horizontal"===t.direction&&t.owner.getInherited().rtl&&(n=-n),n}}),Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:!0,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,dragCls:"x-dd-drag-current",_execOnAll:function(e,t){var n,i,r,o,a=this.ids;for(n in a)if(a.hasOwnProperty(n)){o=a[n];for(i in o)if(o.hasOwnProperty(i)){if(r=o[i],!this.isTypeOfDD(r))continue;r[e].apply(r,t)}}},addListeners:function(){var e=this;e.init(),Ext.getDoc().on({mouseup:e.handleMouseUp,mousemove:{fn:e.handleMouseMove,capture:!1},dragstart:e.preventDrag,drag:e.preventDrag,dragend:e.preventDrag,capture:!0,scope:e}),Ext.getWin().on({unload:e._onUnload,resize:e._onResize,scope:e})},preventDrag:function(e){this.isMouseDown&&e.stopPropagation()},_onResize:function(){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:8,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(e,t){this.initialized||this.init(),this.ids[t]||(this.ids[t]={}),this.ids[t][e.id]=e},removeDDFromGroup:function(e,t){this.ids[t]||(this.ids[t]={});var n=this.ids[t];n&&n[e.id]&&delete n[e.id]},_remove:function(e,t){var n,i=this,r=i.ids,o=e.groups;if(!i.clearingAll){i.dragCurrent===e&&(i.dragCurrent=null);for(n in o)o.hasOwnProperty(n)&&(t?delete r[n]:r[n]&&delete r[n][e.id]);delete i.handleIds[e.id]}},regHandle:function(e,t){this.handleIds[e]||(this.handleIds[e]={}),this.handleIds[e][t]=t},isDragDrop:function(e){return this.getDDById(e)?!0:!1},getRelated:function(e,t){var n,i,r,o=[];for(n in e.groups)for(i in this.ids[n])r=this.ids[n][i],this.isTypeOfDD(r)&&(!t||r.isTarget)&&(o[o.length]=r);return o},isLegalTarget:function(e,t){var n,i,r=this.getRelated(e,!0);for(n=0,i=r.length;i>n;++n)if(r[n].id===t.id)return!0;return!1},isTypeOfDD:function(e){return e&&e.__ygDragDrop},isHandle:function(e,t){return this.handleIds[e]&&this.handleIds[e][t]},getDDById:function(e,t){var n,i;for(n in this.ids)if(i=this.ids[n][e],i instanceof Ext.dd.DDTarget||t)return i;return null},handleMouseDown:function(e,t){var n,i,r=this;r.isMouseDown=!0,Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddDisable(),r.currentPoint=e.getPoint(),r.dragCurrent&&r.handleMouseUp(e),r.mousedownEvent=e,r.currentTarget=e.getTarget(),r.dragCurrent=t,i=t.getEl(),Ext.fly(i).setCapture(),n=e.getXY(),r.startX=n[0],r.startY=n[1],r.offsetX=r.offsetY=0,r.deltaX=r.startX-i.offsetLeft,r.deltaY=r.startY-i.offsetTop,r.dragThreshMet=!1},startDrag:function(e,t){var n,i=this,r=i.dragCurrent;clearTimeout(i.clickTimeout),r&&(r.b4StartDrag(e,t),r.startDrag(e,t),n=r.getDragEl(),n&&Ext.fly(n).addCls(i.dragCls)),i.dragThreshMet=!0},handleMouseUp:function(e){var t=this;t.isMouseDown=!1,Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddEnable(),t.dragCurrent&&(Ext.isIE&&document.releaseCapture&&document.releaseCapture(),clearTimeout(t.clickTimeout),t.dragThreshMet&&t.fireEvents(e,!0),t.stopDrag(e),t.stopEvent(e))},stopEvent:function(e){this.stopPropagation&&e.stopPropagation(),this.preventDefault&&e.preventDefault()},stopDrag:function(e){var t,n=this,i=n.dragCurrent;i&&(n.dragThreshMet&&(t=i.getDragEl(),t&&Ext.fly(t).removeCls(n.dragCls),i.b4EndDrag(e),i.endDrag(e)),n.dragCurrent.onMouseUp(e)),n.dragCurrent=null,n.dragOvers={}},handleMouseMove:function(e){var t,n,i=this,r=i.dragCurrent,o=i.currentPoint=e.getPoint(),a=o.x,s=o.y;return i.offsetX=a-i.startX,i.offsetY=s-i.startY,r?(i.dragThreshMet||(t=Math.abs(i.offsetX),n=Math.abs(i.offsetY),(t>i.clickPixelThresh||n>i.clickPixelThresh)&&i.startDrag(i.startX,i.startY)),i.dragThreshMet&&(r.b4Drag(e),r.onDrag(e),r.moveOnly||i.fireEvents(e,!1)),i.stopEvent(e),!0):!0},fireEvents:function(e,t){var n,i,r,o,a,s,l,d,u=this,c=Ext.supports.Touch,h=u.dragCurrent,p=u.currentPoint,f=p.x,g=p.y,m=[],x=[],v=[],y=[],E=[],b=[],C=c?document.documentElement.clientWidth/window.innerWidth:1;if(h&&!h.isLocked()){d=!(h.deltaX<0||h.deltaY<0),(c||!u.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&d)&&(n=h.getDragEl(),d&&(n.style.visibility="hidden"),e.target=document.elementFromPoint(f/C,g/C),d&&(n.style.visibility="visible"));for(a in u.dragOvers)i=u.dragOvers[a],delete u.dragOvers[a],u.isTypeOfDD(i)&&!i.isDestroyed&&(u.notifyOccluded?this.isOverTarget(p,i,u.mode)||v.push(i):e.within(i.getEl())||v.push(i),x[a]=!0);for(l in h.groups)if("string"==typeof l)for(a in u.ids[l])if(i=u.ids[l][a],u.isTypeOfDD(i)&&(r=i.getEl())&&i.isTarget&&!i.isLocked()&&Ext.fly(r).isVisible(!0)&&(i!==h||h.ignoreSelf===!1))if(u.notifyOccluded)-1!==(i.zIndex=u.getZIndex(r))&&(o=!0),m.push(i);else if(e.within(i.getEl())){m.push(i);break}for(o&&Ext.Array.sort(m,u.byZIndex),a=0,s=m.length;s>a&&(i=m[a],!u.isOverTarget(p,i,u.mode)||(t?E.push(i):(x[i.id]?y.push(i):b.push(i),u.dragOvers[i.id]=i),u.notifyOccluded));a++);if(u.mode)v.length&&(h.b4DragOut(e,v),h.onDragOut(e,v)),b.length&&h.onDragEnter(e,b),y.length&&(h.b4DragOver(e,y),h.onDragOver(e,y)),E.length&&(h.b4DragDrop(e,E),h.onDragDrop(e,E));else{for(a=0,s=v.length;s>a;++a)h.b4DragOut(e,v[a].id),h.onDragOut(e,v[a].id);for(a=0,s=b.length;s>a;++a)h.onDragEnter(e,b[a].id);for(a=0,s=y.length;s>a;++a)h.b4DragOver(e,y[a].id),h.onDragOver(e,y[a].id);for(a=0,s=E.length;s>a;++a)h.b4DragDrop(e,E[a].id),h.onDragDrop(e,E[a].id)}t&&!E.length&&h.onInvalidDrop(e)}},getZIndex:function(e){var t,n=document.body,i=-1;for(e=Ext.getDom(e);e!==n;)isNaN(t=+Ext.fly(e).getStyle("zIndex"))||(i=t),e=e.parentNode;return i},byZIndex:function(e,t){return e.zIndex<t.zIndex},getBestMatch:function(e){var t,n,i=null,r=e.length;if(1===r)i=e[0];else for(t=0;r>t;++t){if(n=e[t],n.cursorIsOver){i=n;break}(!i||i.overlap.getArea()<n.overlap.getArea())&&(i=n)}return i},refreshCache:function(e){var t,n,i,r;for(t in e)if("string"==typeof t)for(n in this.ids[t])i=this.ids[t][n],this.isTypeOfDD(i)&&(r=this.getLocation(i),r?this.locationCache[i.id]=r:delete this.locationCache[i.id])},verifyEl:function(e){if(e){var t;if(Ext.isIE)try{t=e.offsetParent}catch(n){}else t=e.offsetParent;if(t)return!0}return!1},getLocation:function(e){if(!this.isTypeOfDD(e))return null;if(e.getRegion)return e.getRegion();var t,n,i,r,o,a,s,l,d,u=e.getEl();try{t=Ext.fly(u).getXY()}catch(c){}return t?(n=t[0],i=n+u.offsetWidth,r=t[1],o=r+u.offsetHeight,a=r-e.padding[0],s=i+e.padding[1],l=o+e.padding[2],d=n-e.padding[3],new Ext.util.Region(a,s,l,d)):null},isOverTarget:function(e,t,n){var i,r,o,a,s,l=this.locationCache[t.id];return l&&this.useCache||(l=this.getLocation(t),this.locationCache[t.id]=l),l?(t.cursorIsOver=l.contains(e),i=this.dragCurrent,i&&i.getTargetCoord&&(n||i.constrainX||i.constrainY)?(t.overlap=null,r=i.getTargetCoord(e.x,e.y),o=i.getDragEl(),a=new Ext.util.Region(r.y,r.x+o.offsetWidth,r.y+o.offsetHeight,r.x),s=a.intersect(l),s?(t.overlap=s,n?!0:t.cursorIsOver):!1):t.cursorIsOver):!1},_onUnload:function(){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var e,t=this,n=t.elementCache;t.dragCurrent&&(t.stopDrag(),t.dragCurrent=null),t.clearingAll=!0,t._execOnAll("unreg",[]),delete t.clearingAll;for(e in n)delete n[e];t.elementCache={},t.ids={},t.handleIds={}},elementCache:{},getElWrapper:function(e){var t=this.elementCache[e];return t&&t.el||(t=this.elementCache[e]=new this.ElementWrapper(Ext.getDom(e))),t},getElement:function(e){return Ext.getDom(e)},getCss:function(e){var t=Ext.getDom(e);return t?t.style:null},ElementWrapper:function(e){this.el=e||null,this.id=this.el&&e.id,this.css=this.el&&e.style},getPosX:function(e){return Ext.fly(e).getX()},getPosY:function(e){return Ext.fly(e).getY()},swapNode:function(e,t){if(e.swapNode)e.swapNode(t);else{var n=t.parentNode,i=t.nextSibling;i===e?n.insertBefore(e,t):t===e.nextSibling?n.insertBefore(t,e):(e.parentNode.replaceChild(t,e),n.insertBefore(e,i))}},getScroll:function(){var e=window.document,t=e.documentElement,n=e.body,i=0,r=0;return t&&(t.scrollTop||t.scrollLeft)?(i=t.scrollTop,r=t.scrollLeft):n&&(i=n.scrollTop,r=n.scrollLeft),{top:i,left:r}},getStyle:function(e,t){return Ext.fly(e).getStyle(t)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(e,t){var n=Ext.fly(t).getXY();Ext.fly(e).setXY(n)},numericSort:function(e,t){return e-t},handleWasClicked:function(e,t){if(this.isHandle(t,e.id))return!0;for(var n=e.parentNode;n;){if(this.isHandle(t,n.id))return!0;n=n.parentNode}return!1}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(e){Ext.onInternalReady(function(){e.addListeners()})}),Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',"x-","collapse-el ","x-",'layout-split-{collapseDir}{childElCls}">&#160;',"</div>","</tpl>"],isSplitter:!0,baseCls:"x-splitter",collapsedClsInternal:"x-splitter-collapsed",canResize:!0,collapsible:null,collapseOnDblClick:!0,defaultSplitMin:40,defaultSplitMax:1e3,collapseTarget:"next",horizontal:!1,vertical:!1,size:5,tracker:null,ariaRole:"separator",focusable:!0,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var e=this,t=e.getCollapseTarget(),n=e.collapsible;Ext.Component.prototype.beforeRender.call(this),t.collapsed&&e.addCls(e.collapsedClsInternal),e.canResize||e.addCls(e.baseCls+"-noresize"),Ext.applyIf(e.renderData,{collapseDir:e.getCollapseDirection(),collapsible:null!==n?n:t.collapsible}),e.protoEl.unselectable()},onRender:function(){var e,t=this;Ext.Component.prototype.onRender.apply(this,arguments),t.performCollapse!==!1&&(t.renderData.collapsible&&t.mon(t.collapseEl,"click",t.toggleTargetCmp,t),t.collapseOnDblClick&&t.mon(t.el,"dblclick",t.toggleTargetCmp,t)),t.getCollapseTarget().on({collapse:t.onTargetCollapse,expand:t.onTargetExpand,beforeexpand:t.onBeforeTargetExpand,beforecollapse:t.onBeforeTargetCollapse,scope:t}),t.canResize&&(t.tracker=Ext.create(t.getTrackerConfig()),t.relayEvents(t.tracker,["beforedragstart","dragstart","dragend"])),e=t.collapseEl,e&&(e.lastCollapseDirCls=t.collapseDirProps[t.collapseDirection].cls)},getCollapseDirection:function(){var e,t,n,i,r=this,o=r.collapseDirection;return o||(e=r.collapseTarget,e.isComponent&&(o=e.collapseDirection),o||(i=r.ownerCt.layout.type,e.isComponent?(n=r.ownerCt.items,t=+(n.indexOf(e)===n.indexOf(r)-1)<<1|+("hbox"===i)):t=+("prev"===r.collapseTarget)<<1|+("hbox"===i),o=["bottom","right","top","left"][t]),r.collapseDirection=o),r.setOrientation("top"===o||"bottom"===o?"horizontal":"vertical"),o},getCollapseTarget:function(){var e=this;return e.collapseTarget.isComponent?e.collapseTarget:"prev"===e.collapseTarget?e.previousSibling():e.nextSibling()},setCollapseEl:function(e){var t=this.collapseEl;t&&t.setDisplayed(e)},onBeforeTargetExpand:function(){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(e){var t=this;e===t.getCollapseTarget()&&e["vertical"===t.orientation?"collapsedHorizontal":"collapsedVertical"]()&&t.el.addCls(t.collapsedClsInternal+" "+(t.collapsedCls||"")),t.setCollapseEl("")},onTargetExpand:function(){var e=this;e.el.removeCls(e.collapsedClsInternal+" "+(e.collapsedCls||"")),e.setCollapseEl("")},collapseDirProps:{top:{cls:"x-layout-split-top"},right:{cls:"x-layout-split-right"},bottom:{cls:"x-layout-split-bottom"},left:{cls:"x-layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var e,t=this,n=t.collapseEl,i=t.collapseDirProps[t.collapseDirection];n&&(e=n.lastCollapseDirCls,e&&n.removeCls(e),n.addCls(n.lastCollapseDirCls=i.cls))},applyOrientation:function(){var e=this,t=e.orientation,n=e.orientationProps[t],i=e.size,r=n.fixedAxis,o=n.stretchedAxis,a=e.baseCls+"-";e[t]=!0,e[n.opposite]=!1,e.hasOwnProperty(r)&&"100%"!==e[r]||(e[r]=i),e.hasOwnProperty(o)&&e[o]!==i||(e[o]="100%"),e.removeCls(a+n.opposite),e.addCls(a+t)},setOrientation:function(e){var t=this;t.orientation!==e&&(t.orientation=e,t.applyOrientation())},updateOrientation:function(){delete this.collapseDirection,this.getCollapseDirection(),this.applyCollapseDirection()},toggleTargetCmp:function(){var e,t=this.getCollapseTarget(),n=t.placeholder;Ext.isFunction(t.expand)&&Ext.isFunction(t.collapse)&&(e=n&&!n.hidden?!0:!t.hidden,e&&(t.collapsed?t.expand():t.collapseDirection?t.collapse():t.collapse(this.renderData.collapseDir)))},setSize:function(){var e=this;Ext.Component.prototype.setSize.apply(this,arguments),Ext.isIE&&e.el&&e.el.repaint()},beforeDestroy:function(){Ext.destroy(this.tracker),Ext.Component.prototype.beforeDestroy.call(this)}},0,["splitter"],["component","box","splitter"],{component:!0,box:!0,splitter:!0},["widget.splitter"],0,[Ext.resizer,"Splitter"],0),Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:!1,enableSplitters:!0,overflowHandler:{$value:null,merge:function(e,t){return"string"==typeof e&&(e={type:e}),Ext.merge(t?Ext.Object.chain(t):{},e)}},padding:0,pack:"start",stretchMaxPartner:void 0,vertical:!1,alignRoundingMethod:"round"},itemCls:"x-box-item",targetCls:"x-box-layout-ct",targetElCls:"x-box-target",innerCls:"x-box-inner",manageMargins:!0,createsInnerCt:!0,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:!0,definitions:"var dh=Ext.DomHelper;"}],constructor:function(){var e,t=this;Ext.layout.container.Container.prototype.constructor.apply(this,arguments),t.setVertical(t.vertical),t.flexSortFn=t.flexSort.bind(t),e=typeof t.padding,("string"===e||"number"===e)&&(t.padding=Ext.util.Format.parseBox(t.padding),t.padding.height=t.padding.top+t.padding.bottom,t.padding.width=t.padding.left+t.padding.right)},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(e,t){var n=this,i=n.sizePolicy,r=n.align,o=e.flex,a=r,s=n.names,l=s.height,d=s.width,u=e[d],c=e[l],h=n._percentageRe,p=h.test(u),f="stretch"===r,g="stretchmax"===r,m=n.constrainAlign;return!t&&(f||o||p||m&&!g)&&(t=n.owner.getSizeModel()),f?!h.test(c)&&t[l].shrinkWrap&&(a="stretchmax"):g||(a=h.test(c)?"stretch":m&&!t[l].shrinkWrap?"stretchmax":""),(o||p)&&(t[d].shrinkWrap||(i=i.flex)),i[a]},flexSort:function(e,t){var n,i,r,o,a,s,l=this.names.maxWidth,d=this.names.minWidth,u=1/0,c=e.target,h=t.target,p=c.flex,f=h.flex,g=0;return r=c[l]||u,o=h[l]||u,n=c[d]||0,i=h[d]||0,a=isFinite(n)||isFinite(i),s=isFinite(r)||isFinite(o),(a||s)&&(s&&(g=r-o),0===g&&a&&(g=i-n),0===g&&(g=s?f-p:p-f)),g},isItemBoxParent:function(){return!0},isItemShrinkWrap:function(){return!0},roundFlex:function(e){return Math.floor(e)},beginCollapse:function(e){var t=this;"vertical"===t.direction&&e.collapsedVertical()?(e.collapseMemento.capture(["flex"]),delete e.flex):"horizontal"===t.direction&&e.collapsedHorizontal()&&(e.collapseMemento.capture(["flex"]),delete e.flex)},beginExpand:function(e){e.collapseMemento.restore(["flex"])},beginLayout:function(e){var t=this,n=t.owner,i=n.stretchMaxPartner,r=t.innerCt.dom.style,o=t.names,a=t.overflowHandler,s=n.getScrollable();e.boxNames=o,a&&a.beginLayout(e),"string"==typeof i&&(i=Ext.getCmp(i)||n.query(i)[0]),e.stretchMaxPartner=i&&e.context.getCmp(i),Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments),e.innerCtContext=e.getEl("innerCt",t),e.targetElContext=e.getEl("targetEl",t),e.ownerScrollable=s=n.getScrollable(),s&&(e.scrollRestore=s.getPosition()),r.width="",r.height=""},beginLayoutCycle:function(e,t){var n,i,r=this,o=e.state,a=e.ownerScrollable,s=r.align,l=e.boxNames,d=r.pack,u=r._centerRe,c=r.overflowHandler,h=e.state.canScroll;c&&c.beginLayoutCycle(e,t),Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments),e.parallelSizeModel=n=e[l.widthModel],e.perpendicularSizeModel=i=e[l.heightModel],e.boxOptions={align:s={stretch:"stretch"===s,stretchmax:"stretchmax"===s,center:u.test(s),bottom:r._endRe.test(s)},pack:d={center:u.test(d),end:"end"===d}},a&&(h||(o.canScroll={parallel:!n.shrinkWrap&&a[l.getX](),perpendicular:!i.shrinkWrap&&a[l.getY]()}),o.actualScroll||(o.actualScroll={parallel:!1,perpendicular:!1})),s.stretch&&i.shrinkWrap&&(s.stretchmax=!0,s.stretch=!1),s.nostretch=!(s.stretch||s.stretchmax),n.shrinkWrap&&(d.center=d.end=!1),r.cacheFlexes(e),r.targetEl.setWidth(2e4)},cacheFlexes:function(e){for(var t,n,i,r,o,a,s,l,d=this,u=e.boxNames,c=u.widthModel,h=u.heightModel,p=e.boxOptions.align.nostretch,f=0,g=e.childItems,m=g.length,x=[],v=0,y=0,E=0,b=u.minWidth,C=u.minHeight,w=d._percentageRe,S=0,T=0;m--;)n=g[m],t=n.target,a=n[c],a.calculated&&(n.flex=i=t.flex,i?(f+=i,x.push(n),v+=t[b]||0):(r=w.exec(t[u.width]),n.percentageParallel=parseFloat(r[1])/100,++S)),s=a.configured?t[u.width]:t[b]||0,E+=s,o=n[h],p&&o.calculated&&(r=w.exec(t[u.height]),n.percentagePerpendicular=parseFloat(r[1])/100,++T),l=o.configured?t[u.height]:t[C]||0,l>y&&(y=l);e.flexedItems=x,e.flexedMinWidth=v,e.smallestWidth=E,e.smallestHeight=y,e.totalFlex=f,e.percentageWidths=S,e.percentageHeights=T,Ext.Array.sort(x,d.flexSortFn)},calculate:function(e){var t=this,n=e.boxNames,i=e.state,r=i.actualScroll,o=i.needsScroll,a=i.canScroll,s=i.boxPlan||(i.boxPlan={}),l=t.overflowHandler;if(s.targetSize=t.getContainerSize(e),a&&!o&&(i.needsScroll=o={parallel:a.parallel&&s.targetSize[n.width]<e.smallestWidth,perpendicular:a.perpendicular&&s.targetSize[n.height]<e.smallestHeight}),i.parallelDone||(i.parallelDone=t.calculateParallel(e,n,s)),i.perpendicularDone||(i.perpendicularDone=t.calculatePerpendicular(e,n,s)),i.parallelDone&&i.perpendicularDone){if(a&&!i.scrollPass&&(o.parallel!==r.parallel||o.perpendicular!==r.perpendicular))return e.invalidate({state:{scrollPass:!0,canScroll:a,needsScroll:r}}),void(t.done=!1);t.publishInnerCtSize(e),t.done&&e.boxOptions.align.stretchmax&&!i.stretchMaxDone&&(t.calculateStretchMax(e,n,s),i.stretchMaxDone=!0),l&&l.calculate(e)}else t.done=!1},calculateParallel:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p,f=this,g=e.parallelSizeModel.shrinkWrap,m=t.width,x=e.childItems,v=t.beforeX,y=t.afterX,E=t.setWidth,b=x.length,C=e.flexedItems,w=C.length,S=e.boxOptions.pack,T=f.padding,P=n.targetSize,I=P[m],k=e.state,B=k.needsScroll,M=k.canScroll,D=0,R=T[v],A=R+T[y],F=Ext.getScrollbarSize(),L=F[t.width],O=F[t.height];if(!g&&!P[t.gotWidth])return!1;for(i=0;b>i;++i)if(s=x[i],r=s.marginInfo||s.getMarginInfo(),D+=r[m],!s[t.widthModel].calculated&&(c=s.getProp(m),A+=c,isNaN(A)))return!1;if(A+=D,e.percentageWidths){if(h=I-D,isNaN(h))return!1;for(i=0;b>i;++i)s=x[i],s.percentageParallel&&(c=Math.ceil(h*s.percentageParallel),c=s.setWidth(c),A+=c)}for(g?(p=0,n.tooNarrow=!1):(p=I-A,B&&B.perpendicular&&(p-=O),n.tooNarrow=p<e.flexedMinWidth,n.tooNarrow&&M&&M.parallel&&(k.actualScroll.parallel=!0)),u=A,o=p,a=e.totalFlex,i=0;w>i;i++)s=C[i],l=s.flex,d=f.roundFlex(l/a*o),d=s[E](d),u+=d,o=Math.max(0,o-d),a-=l;for(S.center?(R+=o/2,0>R&&(R=0)):S.end&&(R+=o),i=0;b>i;++i)s=x[i],r=s.marginInfo,R+=r[v],s.setProp(t.x,R),R+=r[y]+s.props[m];return u+=e.targetContext.getPaddingInfo()[m],e.state.contentWidth=u,B&&B.perpendicular&&(g&&(u+=L),e[t.hasOverflowY]=!0,e.target.componentLayout[t.setWidthInDom]=!0,e[t.invalidateScrollY]=Ext.isIE8),e[t.setContentWidth](u),!0},calculatePerpendicular:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p,f=this,g=e.state,m=g.needsScroll,x=g.canScroll,v=e.perpendicularSizeModel.shrinkWrap,y=n.targetSize,E=e.childItems,b=E.length,C=Math.max,w=t.height,S=t.setHeight,T=t.beforeY,P=t.y,I=f.padding,k=I[T],B=y[w]-k-I[t.afterY],M=e.boxOptions.align,D=M.stretch,R=M.stretchmax,A=M.center,F=M.bottom,L=f.constrainAlign,O=0,V=0,N=f.onBeforeConstrainInvalidateChild,H=f.onAfterConstrainInvalidateChild,z=Ext.getScrollbarSize().height;if(!v&&!y[t.gotHeight])return!1;if((D||(A||F)&&!v)&&isNaN(B))return!1;if(m&&m.parallel&&(v?h=!0:(B-=z,n.targetSize[w]-=z)),D)l=B,O=C(l,e.smallestHeight);else for(r=0;b>r;r++){if(d=E[r],a=(d.marginInfo||d.getMarginInfo())[w],p=d.percentagePerpendicular){if(++V,v)continue;o=p*B-a,o=d[t.setHeight](o)}else o=d.getProp(w);if(!v&&L&&d[t.heightModel].shrinkWrap&&o>B&&(d.invalidate({before:N,after:H,layout:f,childHeight:B,names:t}),e.state.parallelDone=!1),isNaN(O=C(O,o+a,d.target[t.minHeight]||0)))return!1}if(h&&(O+=z,e[t.hasOverflowX]=!0,e.target.componentLayout[t.setHeightInDom]=!0,e[t.invalidateScrollX]=Ext.isIE8),u=e.stretchMaxPartner,u&&(e.setProp("maxChildHeight",O),c=u.childItems,c&&c.length&&(O=C(O,u.getProp("maxChildHeight")),isNaN(O))))return!1;for(e[t.setContentHeight](O+f.padding[w]+e.targetContext.getPaddingInfo()[w]),h&&(O-=z),O>y[w]&&x&&x.perpendicular&&(g.actualScroll.perpendicular=!0),n.maxSize=O,R?l=O:(A||F||V)&&(l=L?v?O:B:v?O:C(B,O),l-=e.innerCtContext.getBorderInfo()[w]),r=0;b>r;r++)d=E[r],a=d.marginInfo||d.getMarginInfo(),i=k+a[T],D?d[S](l-a[w]):(p=d.percentagePerpendicular,v&&p&&(a=d.marginInfo||d.getMarginInfo(),o=p*l-a[w],o=d.setHeight(o)),A?(s=l-d.props[w],s>0&&(i=k+Math[f.alignRoundingMethod](s/2))):F&&(i=C(0,l-i-d.props[w]))),d.setProp(P,i);return!0},onBeforeConstrainInvalidateChild:function(e,t){var n=t.names.heightModel;e[n].constrainedMin||(e[n]=Ext.layout.SizeModel.calculated)},onAfterConstrainInvalidateChild:function(e,t){var n=t.names;e.setProp(n.beforeY,0),e[n.heightModel].calculated&&e[n.setHeight](t.childHeight)},calculateStretchMax:function(e,t,n){var i,r,o,a,s=this,l=t.height,d=t.width,u=e.childItems,c=u.length,h=n.maxSize,p=s.onBeforeStretchMaxInvalidateChild,f=s.onAfterStretchMaxInvalidateChild;for(o=0;c>o;++o)i=u[o],r=i.props,a=h-i.getMarginInfo()[l],(a!==r[l]||i[t.heightModel].constrained)&&i.invalidate({before:p,after:f,layout:s,childWidth:r[d],childHeight:a,childX:r.x,childY:r.y,names:t})},onBeforeStretchMaxInvalidateChild:function(e,t){var n=t.names.heightModel;e[n].constrainedMax||(e[n]=Ext.layout.SizeModel.calculated)},onAfterStretchMaxInvalidateChild:function(e,t){var n=t.names,i=t.childHeight,r=t.childWidth;e.setProp("x",t.childX),e.setProp("y",t.childY),e[n.heightModel].calculated&&e[n.setHeight](i),e[n.widthModel].calculated&&e[n.setWidth](r)},completeLayout:function(e){var t,n,i,r,o,a=this,s=(e.boxNames,e.invalidateScrollX),l=e.invalidateScrollY,d=a.overflowHandler,u=e.scrollRestore;d&&d.completeLayout(e),(s||l)&&(n=a.getTarget(),t=n.dom,o=t.style,s&&(i=n.getStyle("overflowX"),"auto"===i?(i=o.overflowX,o.overflowX="scroll"):s=!1),l&&(r=n.getStyle("overflowY"),"auto"===r?(r=o.overflowY,o.overflowY="scroll"):l=!1),(s||l)&&(t.scrollWidth,s&&(o.overflowX=i),l&&(o.overflowY=r))),u&&e.ownerScrollable.scrollTo(u.x,u.y)},finishedLayout:function(e){var t=this.overflowHandler;t&&t.finishedLayout(e),Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments)},getLayoutItems:function(){var e,t,n,i,r,o,a,s=Ext.layout.container.Container.prototype.getLayoutItems.call(this),l=s.length;for(n=0;l>n;++n)(i=s[n]).isSplitter||(a=i.splitter,i.hidden?a&&(a.hidden||(a.hidden=!0,a.el&&a.el.hide())):(o=a?"next"===a.collapseTarget:!1,t=null,e&&r?(r.hidden&&(r.hidden=!1,r.el&&r.el.show()),o&&(t=!0)):o&&(t=!e),null!==t&&a.hidden!==t&&(a.hidden=t,a.el&&a.el.setVisible(!t)),r=!o&&a,e=i));return e&&r&&!r.hidden&&(r.hidden=!0,r.el&&r.el.hide()),s},getScrollerEl:function(){return this.innerCt},insertSplitter:function(e,t,n,i){var r={xtype:"splitter",id:e.id+"-splitter",hidden:n,splitterFor:e,synthetic:!0},o=t+("prev"===i.collapseTarget?1:0);r[this.names.height]="100%",i&&Ext.apply(r,i),e.splitter=this.owner.add(o,r)},publishInnerCtSize:function(e,t){t=t||0;var n,i,r=this,o=e.state,a=e.boxNames,s=a.height,l=a.width,d=e.boxOptions.align,u=r.padding,c=o.boxPlan,h=c.targetSize,p=c.maxSize,f=o.needsScroll,g=e.innerCtContext;e.parallelSizeModel.shrinkWrap||c.tooNarrow&&o.canScroll?n=o.contentWidth-e.targetContext.getPaddingInfo()[l]:(n=h[l],f&&f.perpendicular&&(n-=Ext.getScrollbarSize()[l])),n-=t,r.owner.tooNarrow=c.tooNarrow,d.stretch?i=p:(i=c.maxSize+u[a.beforeY]+u[a.afterY]+g.getBorderInfo()[s],e.perpendicularSizeModel.shrinkWrap||!d.center&&!d.bottom||(i=Math.max(h[s],i))),g[a.setWidth](n),g[a.setHeight](i),e.targetElContext.setWidth(e.innerCtContext.props.width-(r.vertical?0:t||0)),isNaN(n+i)&&(r.done=!1)},onAdd:function(e,t){var n=this,i=n.enableSplitters&&e.split&&!e.isButton;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments),i&&(i=i===!0?{collapseTarget:"next"}:Ext.isString(i)?{collapseTarget:"before"===i?"next":"prev"}:Ext.apply({collapseTarget:"before"===i.side?"next":"prev"},i),n.insertSplitter(e,t,!!e.hidden,i))},onRemove:function(e,t){var n,i=this,r=i.names,o=i.owner,a=e.splitter,s=i.overflowHandler;Ext.layout.container.Container.prototype.onRemove.apply(this,arguments),a&&o.contains(a)&&(o.doRemove(a,!0),e.splitter=null),s&&s.onRemove(e),e.layoutMarginCap===i.id&&delete e.layoutMarginCap,o.destroying||t||!e.rendered||(n=e.getEl(),n&&(n.setStyle(r.beforeY,""),n.setStyle(r.beforeX,""),n.setStyle("margin","")))},applyOverflowHandler:function(e,t){var n;return"string"==typeof e&&(e={type:e}),n=e.type,t&&t.type===e.type?(delete e.type,t.setConfig(e),t):(e.layout=this,Ext.Factory.boxOverflow(e))},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var e=this;Ext.destroy(e.innerCt,e.overflowHandler),e.flexSortFn=e.innerCt=null,Ext.layout.container.Container.prototype.destroy.apply(this,arguments)},getRenderData:function(){var e=Ext.layout.container.Container.prototype.getRenderData.call(this);return e.targetElCls=this.targetElCls,e},updateVertical:function(e){var t=this,n=t.overflowHandler,i=t.owner,r=t._props;Ext.apply(t,e?r.vbox:r.hbox),n&&i&&i.rendered&&n.setVertical(e)},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:!0,vertical:!1,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{
readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:!1,vertical:!0,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0),Ext.define("Ext.rtl.layout.container.Box",{override:"Ext.layout.container.Box",initLayout:function(){var e=this;e.owner.getInherited().rtl&&(e.names=Ext.Object.chain(e.names),Ext.apply(e.names,e.rtlNames)),(arguments.callee.$previous||Ext.layout.container.Container.prototype.initLayout).apply(this,arguments)},getRenderData:function(){var e=(arguments.callee.$previous||Ext.layout.container.Container.prototype.getRenderData).call(this);return this.owner.getInherited().rtl&&(e.targetElCls=(e.targetElCls||"")+" x-rtl"),e}}),Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:!1},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0),Ext.define("Ext.rtl.layout.container.HBox",{override:"Ext.layout.container.HBox",rtlNames:{beforeX:"right",afterX:"left",getScrollLeft:"rtlGetScrollLeft",setScrollLeft:"rtlSetScrollLeft",scrollTo:"rtlScrollTo",beforeScrollerSuffix:"-after-scroller",afterScrollerSuffix:"-before-scroller"}}),Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:!0},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0),Ext.define("Ext.rtl.layout.container.VBox",{override:"Ext.layout.container.VBox",rtlNames:{beforeY:"right",afterY:"left",scrollTo:"rtlScrollTo"}}),Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(e){var t=this;return 1!==arguments.length||"string"==typeof e||e.dom||e.tagName||e===document||e.isComponent?void t.legacyConstructor.apply(t,arguments):(Ext.apply(t,e),t.bindings=[],t.target.isComponent||(t.target=Ext.get(t.target)),t.binding?t.addBinding(t.binding):e.key&&t.addBinding(e),void t.enable())},legacyConstructor:function(e,t,n){var i=this;Ext.apply(i,{target:Ext.get(e),eventName:n||i.eventName,bindings:[]}),t&&i.addBinding(t),i.enable()},addBinding:function(e){var t,n,i=this,r=e.key;if(i.processing&&(i.bindings=i.bindings.slice(0)),Ext.isArray(e))for(t=0,n=e.length;n>t;t++)i.addBinding(e[t]);else i.bindings.push(Ext.apply({keyCode:i.processKeys(r)},e))},removeBinding:function(e){var t,n,i,r=this,o=r.bindings,a=o.length;for(r.processing&&(r.bindings=o.slice(0)),i=r.processKeys(e.key),t=0;a>t;++t)if(n=o[t],(n.fn||n.handler)===(e.fn||e.handler)&&n.scope===e.scope&&e.alt===n.alt&&e.crtl===n.crtl&&e.shift===n.shift&&Ext.Array.equals(n.keyCode,i))return void Ext.Array.erase(r.bindings,t,1)},processKeys:function(e){var t,n,i,r,o,a=!1;if(e.test)return e;if(Ext.isString(e)){for(n=[],i=e.toUpperCase(),o=0,r=i.length;r>o;++o)n.push(i.charCodeAt(o));e=n,a=!0}if(Ext.isArray(e)||(e=[e]),!a)for(o=0,r=e.length;r>o;++o)t=e[o],Ext.isString(t)&&(e[o]=t.toUpperCase().charCodeAt(0));return e},handleTargetEvent:function(e){var t,n,i,r=this;if(r.enabled&&(t=r.bindings,n=0,i=t.length,e=r.processEvent.apply(r.processEventScope||r,arguments))){if(r.lastKeyEvent=e,r.ignoreInputFields&&Ext.fly(e.target).isInputField())return;if(!e.getKey)return e;for(r.processing=!0;i>n;++n)r.processBinding(t[n],e);r.processing=!1}},processEvent:Ext.identityFn,processBinding:function(e,t){if(this.checkModifiers(e,t)){var n,i,r=t.getKey(),o=e.fn||e.handler,a=e.scope||this,s=e.keyCode,l=e.defaultEventAction;if(s.test)s.test(String.fromCharCode(t.getCharCode()))&&o.call(a,r,t)!==!0&&l&&t[l]();else if(s.length)for(n=0,i=s.length;i>n;++n)if(r===s[n]){o.call(a,r,t)!==!0&&l&&t[l]();break}}},checkModifiers:function(e,t){for(var n,i,r=["shift","ctrl","alt"],o=0,a=r.length;a>o;++o)if(i=r[o],n=e[i],void 0!==n&&n!==t[i+"Key"])return!1;return!0},on:function(e,t,n){var i,r,o,a;Ext.isObject(e)&&!Ext.isArray(e)?(i=e.key,r=e.shift,o=e.ctrl,a=e.alt):i=e,this.addBinding({key:i,shift:r,ctrl:o,alt:a,fn:t,scope:n})},un:function(e,t,n){var i,r,o,a;Ext.isObject(e)&&!Ext.isArray(e)?(i=e.key,r=e.shift,o=e.ctrl,a=e.alt):i=e,this.removeBinding({key:i,shift:r,ctrl:o,alt:a,fn:t,scope:n})},isEnabled:function(){return this.enabled},enable:function(){var e=this;e.enabled||(e.target.on(e.eventName,e.handleTargetEvent,e,{capture:e.capture}),e.enabled=!0)},disable:function(){var e=this;e.enabled&&(e.target.removeListener(e.eventName,e.handleTargetEvent,e),e.enabled=!1)},setDisabled:function(e){e?this.disable():this.enable()},destroy:function(e){var t=this,n=t.target;t.bindings=[],t.disable(),e&&n.destroy(),delete t.target}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0),Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",disabled:!1,defaultEventAction:!1,forceKeyDown:!1,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(e){var t=this;return 2===arguments.length?void t.legacyConstructor.apply(t,arguments):void t.doConstruction(e)},legacyConstructor:function(e,t){this.doConstruction(Ext.apply({target:e},t))},doConstruction:function(e){var t,n=this,i={target:e.target,ignoreInputFields:e.ignoreInputFields,eventName:n.getKeyEvent("forceKeyDown"in e?e.forceKeyDown:n.forceKeyDown,e.eventName),capture:e.capture};n.map&&n.map.destroy(),n.initConfig(e),e.processEvent&&(i.processEvent=e.processEvent,i.processEventScope=e.processEventScope||n),e.keyMap?t=n.map=e.keyMap:(t=n.map=new Ext.util.KeyMap(i),n.destroyKeyMap=!0),this.addBindings(e),t.disable(),e.disabled||t.enable()},addBindings:function(e){var t,n,i=this,r=i.map,o=Ext.util.KeyNav.keyOptions,a=e.scope||i;for(t in e)n=e[t],!n||1!==t.length&&!(t=o[t])&&isNaN(t=parseInt(t,10))||("function"==typeof n&&(n={handler:n,defaultEventAction:void 0!==e.defaultEventAction?e.defaultEventAction:i.defaultEventAction}),r.addBinding({key:t,ctrl:n.ctrl,shift:n.shift,alt:n.alt,handler:Ext.Function.bind(i.handleEvent,n.scope||a,[n.handler||n.fn,i],!0),defaultEventAction:void 0!==n.defaultEventAction?n.defaultEventAction:i.defaultEventAction}))},handleEvent:function(e,t,n,i){return i.lastKeyEvent=t,n.call(this,t)},destroy:function(e){this.destroyKeyMap&&this.map.destroy(e),delete this.map},enable:function(){this.map&&(this.map.enable(),this.disabled=!1)},disable:function(){this.map&&this.map.disable(),this.disabled=!0},setDisabled:function(e){this.map.setDisabled(e),this.disabled=e},getKeyEvent:function(e,t){return e||Ext.supports.SpecialKeyDownRepeat&&!t?"keydown":t||this.eventName}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0),Ext.cmd.derive("Ext.util.FocusableContainer",Ext.Mixin,{mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer",onFocusEnter:"onFocusEnter"},after:{afterRender:"initFocusableContainer",onFocusLeave:"onFocusLeave"}},isFocusableContainer:!0,enableFocusableContainer:!0,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(){this.enableFocusableContainer&&this.doInitFocusableContainer()},doInitFocusableContainer:function(){var e,t=this;e=t.getFocusableContainerEl(),t.activateFocusableContainerEl(e),t.mon(e,"mousedown",t.onFocusableContainerMousedown,t),t.focusableKeyNav=t.createFocusableContainerKeyNav(e)},createFocusableContainerKeyNav:function(e){var t=this;return new Ext.util.KeyNav(e,{ignoreInputFields:!0,scope:t,tab:t.onFocusableContainerTabKey,enter:t.onFocusableContainerEnterKey,space:t.onFocusableContainerSpaceKey,up:t.onFocusableContainerUpKey,down:t.onFocusableContainerDownKey,left:t.onFocusableContainerLeftKey,right:t.onFocusableContainerRightKey})},destroyFocusableContainer:function(){this.enableFocusableContainer&&this.doDestroyFocusableContainer()},doDestroyFocusableContainer:function(){var e=this.focusableKeyNav;e&&(e.destroy(),delete this.focusableKeyNav)},getFocusables:function(){return this.items.items},initDefaultFocusable:function(e){var t,n,i,r,o,a=this,s=a.activeChildTabIndex,l=!1;if(t=a.getFocusables(),r=t.length){for(i=0;r>i;i++)if(n=t[i],n.focusable&&(l=!0,o=n.getTabIndex(),null!=o&&o>=s))return n;if(l)return n=a.findNextFocusableChild(null,!0,t,e),n&&a.activateFocusable(n),n}},clearFocusables:function(){var e,t,n=this,i=n.getFocusables(),r=i.length;for(t=0;r>t;t++)e=i[t],e.focusable&&n.deactivateFocusable(e)},activateFocusable:function(e,t){var n=null!=t?t:this.activeChildTabIndex;e.setTabIndex(n)},deactivateFocusable:function(e,t){var n=null!=t?t:this.inactiveChildTabIndex;e.setTabIndex(n)},onFocusableContainerTabKey:function(){return!0},onFocusableContainerEnterKey:function(){return!0},onFocusableContainerSpaceKey:function(){return!0},onFocusableContainerUpKey:function(e){return this.moveChildFocus(e,!1)},onFocusableContainerLeftKey:function(e){return this.moveChildFocus(e,!1)},onFocusableContainerRightKey:function(e){return this.moveChildFocus(e,!0)},onFocusableContainerDownKey:function(e){return this.moveChildFocus(e,!0)},getFocusableFromEvent:function(e){var t=Ext.Component.fromElement(e.getTarget());return t},moveChildFocus:function(e,t){var n=this.getFocusableFromEvent(e);return this.focusChild(n,t,e)},focusChild:function(e,t){var n=this.findNextFocusableChild(e,t);return n&&n.focus(),n},findNextFocusableChild:function(e,t,n,i){var r,o,a,s;for(n=n||this.getFocusables(),o=Ext.Array.indexOf(n,e),t=t===!0?1:t===!1?-1:t,s=n.length,a=t>0?s>o?o+t:0:o>0?o+t:s-1;;a+=t){if(0>o&&(a>=s||0>a))return null;if(a>=s)a=-1;else if(0>a)a=s;else{if(a===o)return null;if(r=n[a],r&&r.focusable&&(i||r.isFocusable&&r.isFocusable()))return r}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(e){return this.doFocusableChildAdd(e)},activateFocusableContainerEl:function(e){e=e||this.getFocusableContainerEl(),e.set({tabindex:this.activeChildTabIndex})},deactivateFocusableContainerEl:function(e){e=e||this.getFocusableContainerEl(),e.set({tabindex:this.inactiveChildTabIndex})},doFocusableChildAdd:function(e){e.focusable&&(e.focusableContainer=this,this.deactivateFocusable(e))},onFocusableChildRemove:function(e){return this.doFocusableChildRemove(e)},doFocusableChildRemove:function(e){e===this.lastFocusedChild&&(this.lastFocusedChild=null,this.activateFocusableContainerEl()),delete e.focusableContainer},onFocusableContainerMousedown:function(e,t){var n=Ext.Component.fromElement(t);this.mousedownTimestamp=n===this?Ext.Date.now():0},onFocusEnter:function(e){var t,n=this,i=e.toComponent,r=n.mousedownTimestamp,o=50;return n.mousedownTimestamp=0,i===n?(!r||Ext.Date.now()-r>o)&&(t=n.initDefaultFocusable(),t&&(n.deactivateFocusableContainerEl(),t.focus())):n.deactivateFocusableContainerEl(),i},onFocusLeave:function(){var e=this,t=e.lastFocusedChild;e.isDestroyed||(e.clearFocusables(),t?e.activateFocusable(t):e.activateFocusableContainerEl())},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(e){var t=this;t.clearFocusables(),t.activateFocusable(e),e.needArrowKeys&&t.guardFocusableChild(e)},guardFocusableChild:function(e){var t,n=this,i=n.activeChildTabIndex;t=n.findNextFocusableChild(e,-1),t&&t.setTabIndex(i),t=n.findNextFocusableChild(e,1),t&&t.setTabIndex(i)},afterFocusableChildFocus:function(e){this.lastFocusedChild=e},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildEnable:Ext.privateFn,onFocusableChildDisable:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,"FocusableContainer"],0),Ext.define("Ext.rtl.util.FocusableContainer",{override:"Ext.util.FocusableContainer",privates:{moveChildFocus:function(e,t){var n=this.getInherited().rtl?!t:t;return arguments.callee.$previous.call(this,e,n)}}}),Ext.cmd.derive("Ext.toolbar.Toolbar",Ext.container.Container,{alternateClassName:"Ext.Toolbar",isToolbar:!0,baseCls:"x-toolbar",ariaRole:"toolbar",defaultType:"button",layout:void 0,vertical:void 0,enableOverflow:!1,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:!0,itemCls:"x-toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var e=this,t=e.layout,n=e.vertical;void 0===n&&(e.vertical=n="right"===e.dock||"left"===e.dock),e.layout=t=Ext.applyIf(Ext.isString(t)?{type:t}:t||{},{type:n?"vbox":"hbox",align:n?"stretchmax":"middle"}),e.overflowHandler?t.overflowHandler=e.overflowHandler:e.enableOverflow&&(t.overflowHandler="menu"),n&&e.addClsWithUI("vertical"),"footer"===e.ui&&(e.ignoreBorderManagement=!0),Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(e){var t,n=this,i=Ext.container.Container.prototype.getRefItems.apply(this,arguments),r=n.layout;return e&&(n.enableOverflow||"menu"===n.overflowHandler)&&(t=r.overflowHandler,t&&t.menu&&(i=i.concat(t.menu.getRefItems(e)))),i},lookupComponent:function(e){var t,n,i=arguments;return"string"==typeof e&&(n=Ext.toolbar.Toolbar,t=n.shortcutsHV[this.vertical?1:0][e]||n.shortcuts[e],e="string"==typeof t?{xtype:t}:t?Ext.apply({},t):{xtype:"tbtext",text:e},this.applyDefaults(e),i=[e]),Ext.container.Container.prototype.lookupComponent.apply(this,i)},onBeforeAdd:function(e){var t=this,n="footer"===t.ui,i=n?t.defaultFooterButtonUI:t.defaultButtonUI;e.isSegmentedButton?"default"!==e.getDefaultUI()||e.config.hasOwnProperty("defaultUI")||e.setDefaultUI(i):"default"!==e.ui||e.hasOwnProperty("ui")||(e.isButton?e.ui=i:e.isFormField&&(e.ui=n?t.defaultFooterFieldUI:t.defaultFieldUI)),e instanceof Ext.toolbar.Separator&&e.setUI(t.vertical?"vertical":"horizontal"),Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(e){Ext.container.Container.prototype.onAdd.apply(this,arguments),this.trackMenu(e)},onRemove:function(e){Ext.container.Container.prototype.onRemove.apply(this,arguments),this.trackMenu(e,!0)},privates:{applyDefaults:function(e){return Ext.isString(e)||(e=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)),e},trackMenu:function(e,t){var n=this;n.trackMenus&&e.menu&&e[t?"un":"on"]({mouseover:n.onButtonOver,menushow:n.onButtonMenuShow,menuhide:n.onButtonMenuHide,scope:n})},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(e,t){var n=this.activeMenuBtn;n&&n!==e&&(n.hideMenu(),e.focus(),e.showMenu(t),this.activeMenuBtn=e)},onButtonMenuShow:function(e){this.activeMenuBtn=e},onButtonMenuHide:function(){this.activeMenuBtn=null}}},0,["toolbar"],["component","box","container","toolbar"],{component:!0,box:!0,container:!0,toolbar:!0},["widget.toolbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.toolbar,"Toolbar",Ext,"Toolbar"],0),Ext.define("Ext.classic.toolbar.Toolbar",{override:"Ext.toolbar.Toolbar",defaultFieldUI:"toolbar"}),Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(e,t,n){e&&this.init(e,t,n)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,triggerEvent:"mousedown",b4StartDrag:function(){},startDrag:function(){},b4Drag:function(){},onDrag:function(){},onDragEnter:function(){},b4DragOver:function(){},onDragOver:function(){},b4DragOut:function(){},onDragOut:function(){},b4DragDrop:function(){},onDragDrop:function(){},onInvalidDrop:function(){},b4EndDrag:function(){},endDrag:function(){},b4MouseDown:function(){},onMouseDown:function(){},onMouseUp:function(){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(e,t){Ext.isNumber(t)&&(t={left:t,right:t,top:t,bottom:t}),t=t||this.defaultPadding;var n,i,r,o,a=Ext.get(this.getEl()).getBox(),s=Ext.get(e),l=s.getScroll(),d=s.dom;d===document.body?n={x:l.left,y:l.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}:(i=s.getXY(),n={x:i[0],y:i[1],width:d.clientWidth,height:d.clientHeight}),r=a.y-n.y,o=a.x-n.x,this.resetConstraints(),this.setXConstraint(o-(t.left||0),n.width-o-a.width-(t.right||0),this.xTickSize),this.setYConstraint(r-(t.top||0),n.height-r-a.height-(t.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(e,t,n){var i=this;i.el=i.el||Ext.get(e),i.initTarget(e,t,n),Ext.get(i.id).on(i.triggerEvent,i.handleMouseDown,i)},initTarget:function(e,t,n){this.config=n||{},this.DDMInstance=Ext.dd.DragDropManager,this.groups={},"string"!=typeof e&&(e=Ext.id(e)),this.id=e,this.addToGroup(t?t:"default"),this.handleElId=e,this.setDragElId(e),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=this.config.isTarget!==!1,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(e,t,n,i){t||0===t?n||0===n?this.padding=[e,t,n,i]:this.padding=[e,t,e,t]:this.padding=[e,e,e,e]},setInitPosition:function(e,t){var n,i,r,o=this.getEl();this.DDMInstance.verifyEl(o)&&(n=e||0,i=t||0,r=Ext.fly(o).getXY(),this.initPageX=r[0]-n,this.initPageY=r[1]-i,this.lastPageX=r[0],this.lastPageY=r[1],this.setStartPosition(r))},setStartPosition:function(e){var t=e||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null,this.startPageX=t[0],this.startPageY=t[1]},addToGroup:function(e){this.groups[e]=!0,this.DDMInstance.regDragDrop(this,e)},removeFromGroup:function(e){this.groups[e]&&delete this.groups[e],this.DDMInstance.removeDDFromGroup(this,e)},setDragElId:function(e){this.dragElId=e},setHandleElId:function(e){"string"!=typeof e&&(e=Ext.id(e)),this.handleElId=e,this.DDMInstance.regHandle(this.id,e)},setOuterHandleElId:function(e){"string"!=typeof e&&(e=Ext.id(e)),Ext.get(e).on(this.triggerEvent,this.handleMouseDown,this),this.setHandleElId(e),this.hasOuterHandles=!0},unreg:function(){var e,t=this;t._domRef&&(e=Ext.fly(t.id),e&&e.un(t.triggerEvent,t.handleMouseDown,t)),t._domRef=null,t.DDMInstance._remove(t,t.autoGroup)},destroy:function(){this.unreg(),this.isDestroyed=!0},isLocked:function(){return this.DDMInstance.isLocked()||this.locked},handleMouseDown:function(e){var t=this;t.primaryButtonOnly&&e.button||t.isLocked()||(t.DDMInstance.refreshCache(t.groups),(t.hasOuterHandles||t.DDMInstance.isOverTarget(e.getPoint(),t))&&t.clickValidator(e)&&(t.setStartPosition(),t.b4MouseDown(e),t.onMouseDown(e),t.DDMInstance.handleMouseDown(e,t),t.DDMInstance.stopEvent(e)))},clickValidator:function(e){var t=e.getTarget();return this.isValidHandleChild(t)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(t,this.id))},addInvalidHandleType:function(e){var t=e.toUpperCase();this.invalidHandleTypes[t]=t},addInvalidHandleId:function(e){"string"!=typeof e&&(e=Ext.id(e)),this.invalidHandleIds[e]=e},addInvalidHandleClass:function(e){this.invalidHandleClasses.push(e)},removeInvalidHandleType:function(e){var t=e.toUpperCase();delete this.invalidHandleTypes[t]},removeInvalidHandleId:function(e){"string"!=typeof e&&(e=Ext.id(e)),delete this.invalidHandleIds[e]},removeInvalidHandleClass:function(e){var t,n=this.invalidHandleClasses,i=n.length;for(t=0;i>t;++t)n[t]===e&&delete n[t]},isValidHandleChild:function(e){var t,n,i,r=!0;try{t=e.nodeName.toUpperCase()}catch(o){t=e.nodeName}for(r=r&&!this.invalidHandleTypes[t],r=r&&!this.invalidHandleIds[e.id],n=0,i=this.invalidHandleClasses.length;r&&i>n;++n)r=!Ext.fly(e).hasCls(this.invalidHandleClasses[n]);return r},setXTicks:function(e,t){this.xTicks=[],this.xTickSize=t;var n,i={};for(n=this.initPageX;n>=this.minX;n-=t)i[n]||(this.xTicks[this.xTicks.length]=n,i[n]=!0);for(n=this.initPageX;n<=this.maxX;n+=t)i[n]||(this.xTicks[this.xTicks.length]=n,i[n]=!0);Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(e,t){this.yTicks=[],this.yTickSize=t;var n,i={};for(n=this.initPageY;n>=this.minY;n-=t)i[n]||(this.yTicks[this.yTicks.length]=n,i[n]=!0);for(n=this.initPageY;n<=this.maxY;n+=t)i[n]||(this.yTicks[this.yTicks.length]=n,i[n]=!0);Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(e,t,n){this.leftConstraint=e,this.rightConstraint=t,this.minX=this.initPageX-e,this.maxX=this.initPageX+t,n&&this.setXTicks(this.initPageX,n),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(e,t,n){this.topConstraint=e,this.bottomConstraint=t,this.minY=this.initPageY-e,this.maxY=this.initPageY+t,n&&this.setYTicks(this.initPageY,n),this.constrainY=!0},resetConstraints:function(){if(this.initPageX||0===this.initPageX){var e=this.maintainOffset?this.lastPageX-this.initPageX:0,t=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(e,t)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(e,t){if(t){if(t[0]>=e)return t[0];var n,i,r,o,a;for(n=0,i=t.length;i>n;++n)if(r=n+1,t[r]&&t[r]>=e)return o=e-t[n],a=t[r]-e,a>o?t[n]:t[r];return t[t.length-1]}return e},toString:function(){return"DragDrop "+this.id}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0),Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(e,t,n){e&&this.init(e,t,n)},scroll:!0,autoOffset:function(e,t){var n=e-this.startPageX,i=t-this.startPageY;this.setDelta(n,i)},setDelta:function(e,t){this.deltaX=e,this.deltaY=t},setDragElPos:function(e,t){var n=this.getDragEl();this.alignElWithMouse(n,e,t)},alignElWithMouse:function(e,t,n){var i,r,o,a,s=this.getTargetCoord(t,n),l=e.dom?e:Ext.fly(e,"_dd"),d=l.getSize(),u=Ext.Element;return this.deltaSetXY?(i=this.cachedViewportSize,this.setLocalXY(l,Math.max(0,Math.min(s.x+this.deltaSetXY[0],i.width-d.width)),Math.max(0,Math.min(s.y+this.deltaSetXY[1],i.height-d.height)))):(i=this.cachedViewportSize={width:u.getDocumentWidth(),height:u.getDocumentHeight()},r=[Math.max(0,Math.min(s.x,i.width-d.width)),Math.max(0,Math.min(s.y,i.height-d.height))],l.setXY(r),o=this.getLocalX(l),a=l.getLocalY(),this.deltaSetXY=[o-s.x,a-s.y]),this.cachePosition(s.x,s.y),this.autoScroll(s.x,s.y,e.offsetHeight,e.offsetWidth),s},cachePosition:function(e,t){if(e)this.lastPageX=e,this.lastPageY=t;else{var n=Ext.fly(this.getEl()).getXY();this.lastPageX=n[0],this.lastPageY=n[1]}},autoScroll:function(e,t,n,i){if(this.scroll){var r=Ext.Element.getViewportHeight(),o=Ext.Element.getViewportWidth(),a=this.DDMInstance.getScrollTop(),s=this.DDMInstance.getScrollLeft(),l=n+t,d=i+e,u=r+a-t-this.deltaY,c=o+s-e-this.deltaX,h=40,p=document.all?80:30;l>r&&h>u&&window.scrollTo(s,a+p),a>t&&a>0&&h>t-a&&window.scrollTo(s,a-p),d>o&&h>c&&window.scrollTo(s+p,a),s>e&&s>0&&h>e-s&&window.scrollTo(s-p,a)}},getTargetCoord:function(e,t){var n=e-this.deltaX,i=t-this.deltaY;return this.constrainX&&(n<this.minX&&(n=this.minX),n>this.maxX&&(n=this.maxX)),this.constrainY&&(i<this.minY&&(i=this.minY),i>this.maxY&&(i=this.maxY)),n=this.getTick(n,this.xTicks),i=this.getTick(i,this.yTicks),{x:n,y:i}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this),this.scroll=this.config.scroll!==!1},b4MouseDown:function(e){var t=e.getXY();this.autoOffset(t[0],t[1])},b4Drag:function(e){var t=e.getXY();this.setDragElPos(t[0],t[1])},toString:function(){return"DD "+this.id},getLocalX:function(e){return e.getLocalX()},setLocalXY:function(e,t,n){e.setLocalXY(t,n)}},3,0,0,0,0,0,[Ext.dd,"DD"],0),Ext.define("Ext.rtl.dd.DD",{override:"Ext.dd.DD",getLocalX:function(e){return Ext.rootInheritedState.rtl?e.rtlGetLocalX():e.getLocalX()},setLocalXY:function(e,t,n){Ext.rootInheritedState.rtl?e.rtlSetLocalXY(t,n):e.setLocalXY(t,n)}}),Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(e,t,n){e&&(this.init(e,t,n),this.initFrame())},resizeFrame:!0,centerFrame:!1,createFrame:function(){var e,t,n=this,i=document.body;return i&&i.firstChild?(e=this.getDragEl(),void(e||(e=document.createElement("div"),e.id=this.dragElId,e.setAttribute("role","presentation"),t=e.style,t.position="absolute",t.visibility="hidden",t.cursor="move",t.border="2px solid #aaa",t.zIndex=999,i.insertBefore(e,i.firstChild)))):void Ext.defer(function(){n.createFrame()},50)},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this),this.resizeFrame=this.config.resizeFrame!==!1,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,t){var n=this,i=n.getDragEl(),r=i.style;n._resizeProxy(),n.centerFrame&&n.setDelta(Math.round(parseInt(r.width,10)/2),Math.round(parseInt(r.height,10)/2)),n.setDragElPos(e,t),Ext.fly(i).show()},_resizeProxy:function(){if(this.resizeFrame){var e=this.getEl();Ext.fly(this.getDragEl()).setSize(e.offsetWidth,e.offsetHeight)}},b4MouseDown:function(e){var t=e.getXY(),n=t[0],i=t[1];this.autoOffset(n,i),this.setDragElPos(n,i)},b4StartDrag:function(e,t){this.showFrame(e,t)},b4EndDrag:function(){Ext.fly(this.getDragEl()).hide()},endDrag:function(){var e=this.getEl(),t=this.getDragEl();t.style.visibility="",this.beforeMove(),e.style.visibility="hidden",Ext.dd.DDM.moveToEl(e,t),t.style.visibility="hidden",e.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0),Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:!1,childEls:["ghost"],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:"x-dd-drag-repair",ariaRole:"presentation",constructor:function(e){var t=this;e=e||{},Ext.apply(t,{hideMode:"visibility",hidden:!0,floating:!0,id:t.id||Ext.id(),cls:"x-dd-drag-proxy "+this.dropNotAllowed,shadow:e.shadow||!1,renderTo:Ext.getDetachedBody()}),Ext.Component.prototype.constructor.apply(this,arguments),this.dropStatus=this.dropNotAllowed},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(e){e=e||this.dropNotAllowed,this.dropStatus!==e&&(this.el.replaceCls(this.dropStatus,e),this.dropStatus=e)},reset:function(e){var t=this,n="x-dd-drag-proxy ";t.el.replaceCls(n+t.dropAllowed,n+t.dropNotAllowed),t.dropStatus=t.dropNotAllowed,e&&t.ghost.setHtml("")},update:function(e){"string"==typeof e?this.ghost.setHtml(e):(this.ghost.setHtml(""),e.style.margin="0",this.ghost.dom.appendChild(e));var t=this.ghost.dom.firstChild;t&&Ext.fly(t).setStyle("float","none")},getGhost:function(){return this.ghost},hide:function(e){Ext.Component.prototype.hide.call(this),e&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},sync:function(){this.el.syncUnderlays()},repair:function(e,t,n){var i=this;i.callback=t,i.scope=n,e&&i.animRepair!==!1?(i.el.addCls(i.repairCls),i.el.setUnderlaysVisible(!1),i.anim=i.el.animate({duration:i.repairDuration||500,easing:"ease-out",to:{x:e[0],y:e[1]},stopAnimation:!0,callback:i.afterRepair,scope:i})):i.afterRepair()},afterRepair:function(){var e=this;e.hide(!0),e.el.removeCls(e.repairCls),"function"==typeof e.callback&&e.callback.call(e.scope||e),delete e.callback,delete e.scope}},1,0,["component","box"],{component:!0,box:!0},0,0,[Ext.dd,"StatusProxy"],0),Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",animRepair:!0,repairHighlightColor:"c3daf9",constructor:function(e,t){this.el=Ext.get(e),this.dragData||(this.dragData={}),Ext.apply(this,t),this.proxy||(this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})),Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0}),this.dragging=!1},getDragData:function(){return this.dragData},onDragEnter:function(e,t){var n,i=Ext.dd.DragDropManager.getDDById(t);this.cachedTarget=i,this.beforeDragEnter(i,e,t)!==!1&&(i.isNotifyTarget?(n=i.notifyEnter(this,e,this.dragData),this.proxy.setStatus(n)):this.proxy.setStatus(this.dropAllowed),this.afterDragEnter&&this.afterDragEnter(i,e,t))},beforeDragEnter:function(){return!0},onDragOver:function(e,t){var n,i=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t);this.beforeDragOver(i,e,t)!==!1&&(i.isNotifyTarget&&(n=i.notifyOver(this,e,this.dragData),this.proxy.setStatus(n)),this.afterDragOver&&this.afterDragOver(i,e,t))},beforeDragOver:function(){return!0},onDragOut:function(e,t){var n=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t);this.beforeDragOut(n,e,t)!==!1&&(n.isNotifyTarget&&n.notifyOut(this,e,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(n,e,t)),this.cachedTarget=null},beforeDragOut:function(){return!0},onDragDrop:function(e,t){var n=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t);this.beforeDragDrop(n,e,t)!==!1&&(n.isNotifyTarget?n.notifyDrop(this,e,this.dragData)!==!1?this.onValidDrop(n,e,t):this.onInvalidDrop(n,e,t):this.onValidDrop(n,e,t),this.afterDragDrop&&this.afterDragDrop(n,e,t)),delete this.cachedTarget},beforeDragDrop:function(){return!0},onValidDrop:function(e,t,n){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(e,t,n)},getRepairXY:function(){return this.el.getXY()},onInvalidDrop:function(e,t,n){var i=this;t||(t=e,e=null,n=t.getTarget().id),
i.beforeInvalidDrop(e,t,n)!==!1&&(i.cachedTarget&&(i.cachedTarget.isNotifyTarget&&i.cachedTarget.notifyOut(i,t,i.dragData),i.cacheTarget=null),i.proxy.repair(i.getRepairXY(t,i.dragData),i.afterRepair,i),i.afterInvalidDrop&&i.afterInvalidDrop(t,n))},afterRepair:function(){var e=this;Ext.enableFx&&e.el.highlight(e.repairHighlightColor),e.dragging=!1},beforeInvalidDrop:function(){return!0},handleMouseDown:function(e){if(!this.dragging){var t=this.getDragData(e);t&&this.onBeforeDrag(t,e)!==!1&&(this.dragData=t,this.proxy.stop(),Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments))}},onBeforeDrag:function(){return!0},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){return this.proxy.ensureAttachedToBody(!0),Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(e,t){this.proxy.reset(),this.proxy.hidden=!1,this.dragging=!0,this.proxy.update(""),this.onInitDrag(e,t),this.proxy.show()},onInitDrag:function(e,t){var n=this.el.dom.cloneNode(!0);return n.id=Ext.id(),this.proxy.update(n),this.onStartDrag(e,t),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(){},endDrag:function(e){this.onEndDrag(this.dragData,e)},onEndDrag:function(){},autoOffset:function(){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DDProxy.prototype.destroy.call(this),Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0),Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:!0,constructor:function(e,t){var n=this;n.panel=e,n.id=n.panel.id+"-ddproxy",Ext.apply(n,t)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var e=this;e.ghost&&(e.proxy&&(e.proxy.destroy(),delete e.proxy),e.panel.unghost(null,e.moveOnDrag),delete e.ghost)},show:function(){var e,t=this;t.ghost||(e=t.panel.getSize(),t.panel.el.setVisibilityMode(Ext.Element.DISPLAY),t.ghost=t.panel.ghost(),t.insertProxy&&(t.proxy=t.panel.el.insertSibling({role:"presentation",cls:"x-panel-dd-spacer"}),t.proxy.setSize(e)))},repair:function(e,t,n){this.hide(),Ext.callback(t,n||this)},moveProxy:function(e,t){this.proxy&&e.insertBefore(this.proxy.dom,t)}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0),Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(e,t){var n=this;n.panel=e,n.dragData={panel:e},n.panelProxy=new Ext.panel.Proxy(e,t),n.proxy=n.panelProxy.proxy,Ext.dd.DragSource.prototype.constructor.call(this,e.el,t),n.setupEl(e)},setupEl:function(e){var t=this,n=e.header,i=e.body;n&&(t.setHandleElId(n.id),i=n.el),i?(i.setStyle("cursor","move"),t.scroll=!1):e.on("boxready",t.setupEl,t,{single:!0})},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(){this.panelProxy.show()},b4MouseDown:function(e){var t=e.getXY(),n=t[0],i=t[1];this.autoOffset(n,i)},onInitDrag:function(e,t){return this.onStartDrag(e,t),!0},createFrame:Ext.emptyFn,getDragEl:function(){var e=this.panelProxy.ghost;return e?e.el.dom:void 0},endDrag:function(){this.panelProxy.hide(),this.panel.saveState()},autoOffset:function(e,t){e-=this.startPageX,t-=this.startPageY,this.setDelta(e,t)},onInvalidDrop:function(e,t,n){var i=this;i.beforeInvalidDrop(e,t,n)!==!1&&(i.cachedTarget&&(i.cachedTarget.isNotifyTarget&&i.cachedTarget.notifyOut(i,t,i.dragData),i.cacheTarget=null),i.afterInvalidDrop&&i.afterInvalidDrop(t,n))}},1,0,0,0,0,0,[Ext.panel,"DD"],0),Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:!0,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:!1,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:!0,x:!0},verticalCollapsePolicy:{height:!0,y:!0},finishRender:function(){var e,t,n=this;Ext.layout.component.Component.prototype.finishRender.call(this),e=n.getRenderTarget(),t=n.getDockedItems(),n.finishRenderItems(e,t)},isItemBoxParent:function(){return!0},isItemShrinkWrap:function(){return!0},noBorderClasses:["x-docked-noborder-top","x-docked-noborder-right","x-docked-noborder-bottom","x-docked-noborder-left"],noBorderClassesSides:{top:"x-docked-noborder-top",right:"x-docked-noborder-right",bottom:"x-docked-noborder-bottom",left:"x-docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:"x-docked",handleItemBorders:function(){var e,t,n,i,r,o,a,s=this,l=s.owner,d=s.lastDockedItems,u=s.borders,c=l.dockedItems.generation,h=s.noBorderClassesSides,p=s.borderWidthProps,f=s.collapsed;if(!(s.initializedBorders===c||l.border&&!l.manageBodyBorders||l.collapsed&&"mini"===l.collapseMode)){for(s.initializedBorders=c,s.collapsed=!1,s.lastDockedItems=t=s.getLayoutItems(),s.collapsed=f,e={top:[],right:[],bottom:[],left:[]},n=0,i=t.length;i>n;n++)r=t[n],o=r.dock,r.ignoreBorderManagement||(e[o].satisfied||(e[o].push(r),e[o].satisfied=!0),e.top.satisfied||"bottom"===o||e.top.push(r),e.right.satisfied||"left"===o||e.right.push(r),e.bottom.satisfied||"top"===o||e.bottom.push(r),e.left.satisfied||"right"===o||e.left.push(r));if(d)for(n=0,i=d.length;i>n;n++)r=d[n],r.isDestroyed||r.ignoreBorderManagement||l.manageBodyBorders||r.removeCls(s.noBorderClasses);if(u)for(a in u)l.manageBodyBorders&&u[a].satisfied&&l.setBodyStyle(p[a],"");for(a in e)if(i=e[a].length,l.manageBodyBorders)e[a].satisfied&&l.setBodyStyle(p[a],"1px");else{for(n=0;i>n;n++)e[a][n].addCls(h[a]);!e[a].satisfied&&!l.bodyBorder||l.bodyBorder===!1?l.addBodyCls(h[a]):l.removeBodyCls(h[a])}s.borders=e}},beforeLayoutCycle:function(e){var t,n,i=this,r=i.owner,o=i.sizeModels.shrinkWrap,a=r.shrinkWrapDock;r.collapsed&&(r.collapsedVertical()?(n=!0,e.measureDimensions=1):(t=!0,e.measureDimensions=2)),e.collapsedVert=n,e.collapsedHorz=t,n?e.heightModel=o:t&&(e.widthModel=o),a=a===!0?3:a||0,e.shrinkWrapDockHeight=1&a&&e.heightModel.shrinkWrap,e.shrinkWrapDockWidth=2&a&&e.widthModel.shrinkWrap},beginLayout:function(e){var t,n,i,r,o,a,s,l=this,d=l.owner,u=l.getLayoutItems(),c=e.context,h=u.length,p=l.lastCollapsedState;for(Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments),a=d.getCollapsed(),a!==p&&void 0!==p&&(l.owner.collapsed?(e.isCollapsingOrExpanding=1,d.addClsWithUI(d.collapsedCls)):(e.isCollapsingOrExpanding=2,d.removeClsWithUI(d.collapsedCls),e.lastCollapsedState=l.lastCollapsedState)),l.lastCollapsedState=a,e.dockedItems=t=[],n=0;h>n;n++)i=u[n],i.rendered&&(s=i.dock,r=c.getCmp(i),r.dockedAt={x:0,y:0},r.offsets=o=Ext.Element.parseBox(i.offsets||0),r.horizontal="top"===s||"bottom"===s,o.width=o.left+o.right,o.height=o.top+o.bottom,t.push(r));e.bodyContext=e.getEl("body")},beginLayoutCycle:function(e){var t,n,i,r=this,o=e.dockedItems,a=o.length,s=r.owner,l=s.frameBody,d=r.lastHeightModel;for(Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments),r.owner.manageHeight?r.lastBodyDisplay&&(s.body.dom.style.display=r.lastBodyDisplay=""):("inline-block"!==r.lastBodyDisplay&&(s.body.dom.style.display=r.lastBodyDisplay="inline-block"),d&&d.shrinkWrap&&!e.heightModel.shrinkWrap&&(s.body.dom.style.marginBottom="")),e.widthModel.auto&&(e.widthModel.shrinkWrap&&s.el.setWidth(null),s.body.setWidth(null),l&&l.setWidth(null)),e.heightModel.auto&&(s.body.setHeight(null),l&&l.setHeight(null)),e.collapsedVert?e.setContentHeight(0):e.collapsedHorz&&e.setContentWidth(0),t=0;a>t;t++)if(n=o[t].target,i=n.dock,"right"===i)n.setLocalX(0);else if("left"!==i)continue},calculate:function(e){var t,n,i,r,o,a=this,s=a.measureAutoDimensions(e,e.measureDimensions),l=e.state,d=l.horzDone,u=l.vertDone,c=e.bodyContext;for(e.borderInfo||e.getBorderInfo(),e.paddingInfo||e.getPaddingInfo(),e.frameInfo||e.getFrameInfo(),c.borderInfo||c.getBorderInfo(),c.paddingInfo||c.getPaddingInfo(),e.frameBorder||((t=e.framing)?(e.frameBorder=t.border,e.framePadding=t.padding):(e.frameBorder=e.borderInfo,e.framePadding=e.paddingInfo)),n=!d&&a.createAxis(e,s.contentWidth,e.widthModel,a.horzAxisProps,e.collapsedHorz),i=!u&&a.createAxis(e,s.contentHeight,e.heightModel,a.vertAxisProps,e.collapsedVert),r=0,o=e.dockedItems.length;o--;++r)n&&a.dockChild(e,n,o,r),i&&a.dockChild(e,i,o,r);n&&a.finishAxis(e,n)&&(l.horzDone=d=n),i&&a.finishAxis(e,i)&&(l.vertDone=u=i),d&&u&&a.finishConstraints(e,d,u)?a.finishPositions(e,d,u):a.done=!1},createAxis:function(e,t,n,i,r){var o,a,s,l,d=this,u=0,c=d.owner,h=c[i.maxSize],p=c[i.minSize]||0,f=i.dockBegin,g=i.dockEnd,m=i.pos,x=i.size,v=null!=h,y=n.shrinkWrap;return y?r?l=0:(o=e.bodyContext,l=t+o.borderInfo[x]):(a=e.frameBorder,s=e.framePadding,u=a[f]+s[f],l=e.getProp(x)-(a[g]+s[g])),{shrinkWrap:n.shrinkWrap,sizeModel:n,initialBegin:u,begin:u,end:l,collapsed:r,horizontal:i.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:l-u,maxChildSize:0,hasMinMaxConstraints:(p||v)&&n.shrinkWrap,minSize:p,maxSize:v?h:1e9,bodyPosProp:d.owner.manageHeight?m:i.marginBegin,dockBegin:f,dockEnd:g,posProp:m,sizeProp:x,setSize:i.setSize,shrinkWrapDock:e[i.shrinkWrapDock],sizeModelName:i.sizeModel,dockedPixelsEnd:0}},dockChild:function(e,t,n,i){var r,o,a=this,s=e.dockedItems[t.shrinkWrap?n:i],l=s.target,d=l.dock,u=t.sizeProp;l.ignoreParentFrame&&e.isCollapsingOrExpanding&&s.clearMarginCache(),s.marginInfo||s.getMarginInfo(),d===t.dockBegin?r=t.shrinkWrap?a.dockOutwardBegin(e,s,l,t):a.dockInwardBegin(e,s,l,t):d===t.dockEnd?r=t.shrinkWrap?a.dockOutwardEnd(e,s,l,t):a.dockInwardEnd(e,s,l,t):t.shrinkWrapDock?(o=s.getProp(u)+s.marginInfo[u],t.maxChildSize=Math.max(t.maxChildSize,o),r=0):r=a.dockStretch(e,s,l,t),s.dockedAt[t.posProp]=r},dockInwardBegin:function(e,t,n,i){var r,o,a,s=i.begin,l=i.sizeProp,d=n.ignoreParentFrame;return d&&(i.ignoreFrameBegin=t,a=n.dock,r=e.frameBorder[a],s-=r+e.framePadding[a]),n.overlay||(o=t.getProp(l)+t.marginInfo[l],i.begin+=o,d&&(i.begin-=r)),s},dockInwardEnd:function(e,t,n,i){var r,o=i.sizeProp,a=t.getProp(o)+t.marginInfo[o],s=i.end-a;return n.overlay||(i.end=s),n.ignoreParentFrame&&(i.ignoreFrameEnd=t,r=e.frameBorder[n.dock],s+=r+e.framePadding[n.dock],i.end+=r),s},dockOutwardBegin:function(e,t,n,i){var r,o=i.begin,a=i.sizeProp;return i.collapsed?i.ignoreFrameBegin=i.ignoreFrameEnd=t:n.ignoreParentFrame&&(i.ignoreFrameBegin=t),n.overlay||(r=t.getProp(a)+t.marginInfo[a],o-=r,i.begin=o),o},dockOutwardEnd:function(e,t,n,i){var r,o=i.end,a=i.sizeProp;return r=t.getProp(a)+t.marginInfo[a],i.collapsed?i.ignoreFrameBegin=i.ignoreFrameEnd=t:n.ignoreParentFrame&&(i.ignoreFrameEnd=t),n.overlay||(i.end=o+r,i.dockedPixelsEnd+=r),o},dockStretch:function(e,t,n,i){var r,o,a=n.dock,s=i.sizeProp,l="top"===a||"bottom"===a,d=e.frameBorder,u=t.offsets,c=e.framePadding,h=l?"right":"bottom",p=l?"left":"top",f=i.begin+u[p];return n.stretch!==!1&&(o=i.end-f-u[h],n.ignoreParentFrame&&(f-=c[p]+d[p],o+=c[s]+d[s]),r=t.marginInfo,o-=r[s],t[i.setSize](o)),f},finishAxis:function(e,t){if(isNaN(t.maxChildSize))return!1;var n,i,r,o,a=t.begin,s=t.end-a,l=t.collapsed,d=t.setSize,u=t.dockBegin,c=t.dockEnd,h=e.framePadding,p=e.frameBorder,f=p[u],g=e.framing,m=g&&g[u],x=l?0:h[u],v=t.sizeProp,y=t.ignoreFrameBegin,E=t.ignoreFrameEnd,b=e.bodyContext,C=Math.max(f+x-m,0);return t.shrinkWrap?(i=t.initialSize,g?(r=-a+f+x,n=r-m-C):(n=-a,r=n+x),l||(s+=h[v]),y?(r-=f,n-=f,y.dockedAt[t.posProp]-=x):s+=f,l||(E?E.dockedAt[t.posProp]+=h[c]:s+=p[c]),t.size=s,t.horizontal||this.owner.manageHeight||(o=!1)):(g?(r=0,n=a-m-C):(r=-f,n=a-x-f),i=s),t.delta=r,b[d](i,o),b.setProp(t.bodyPosProp,n),!isNaN(s)},beforeInvalidateShrinkWrapDock:function(e,t){var n=t.axis.sizeModelName;e[n].constrainedMin||(e[n]=Ext.layout.SizeModel.calculated)},afterInvalidateShrinkWrapDock:function(e,t){var n,i=t.axis,r=t.layout;e[i.sizeModelName].calculated&&(n=r.dockStretch(t.ownerContext,e,e.target,i),e.setProp(i.posProp,i.delta+n))},finishConstraints:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p=this,f=p.sizeModels,g=t.shrinkWrap,m=n.shrinkWrap,x=p.owner;if(g&&(l=t.size,d=t.collapsed?0:t.minSize,u=t.maxSize,c=t.maxChildSize,h=Math.max(l,c),h>u?(s=f.constrainedMax,o=u):d>h?(s=f.constrainedMin,o=d):c>l?(s=f.constrainedDock,x.dockConstrainedWidth=o=c):o=l),m&&(l=n.size,d=n.collapsed?0:n.minSize,u=n.maxSize,c=n.maxChildSize,h=Math.max(l,c+l-n.initialSize),h>u?(a=f.constrainedMax,r=u):d>h?(a=f.constrainedMin,r=d):c>l?(a=f.constrainedDock,x.dockConstrainedHeight=r=c):(e.collapsedVert||x.manageHeight||(i=!1,e.bodyContext.setProp("margin-bottom",n.dockedPixelsEnd)),r=l)),s||a){if(s&&a&&s.constrainedMax&&a.constrainedByMin)return e.invalidate({widthModel:s}),!1;if(!e.widthModel.calculatedFromShrinkWrap&&!e.heightModel.calculatedFromShrinkWrap)return e.invalidate({widthModel:s,heightModel:a}),!1}else p.invalidateAxes(e,t,n);return g&&(e.setWidth(o),s&&(e.widthModel=s)),m&&(e.setHeight(r,i),a&&(e.heightModel=a)),!0},invalidateAxes:function(e,t,n){var i,r,o,a,s,l,d,u,c=this.beforeInvalidateShrinkWrapDock,h=this.afterInvalidateShrinkWrapDock,p=t.end-t.begin,f=n.initialSize,g=t.shrinkWrapDock&&t.maxChildSize<=p,m=n.shrinkWrapDock&&n.maxChildSize<=f;if(g||m)for(m&&(n.begin=n.initialBegin,n.end=n.begin+n.initialSize),i=e.dockedItems,o=0,r=i.length;r>o;++o)a=i[o],l=a.horizontal,d=null,g&&l?(u=t.sizeProp,s=p,d=t):m&&!l&&(u=n.sizeProp,s=f,d=n),d&&(s-=a.getMarginInfo()[u],s!==a.props[u]&&a.invalidate({before:c,after:h,axis:d,ownerContext:e,layout:this}))},finishPositions:function(e,t,n){var i,r,o=e.dockedItems,a=o.length,s=t.delta,l=n.delta;for(i=0;a>i;++i)r=o[i],r.setProp("x",s+r.dockedAt.x),r.setProp("y",l+r.dockedAt.y)},finishedLayout:function(e){var t=e.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments),e.animatePolicy||(1===e.isCollapsingOrExpanding?t.afterCollapse(!1):2===e.isCollapsingOrExpanding&&t.afterExpand(!1))},getAnimatePolicy:function(e){var t,n,i=this;return 1===e.isCollapsingOrExpanding?t=i.lastCollapsedState:2===e.isCollapsingOrExpanding&&(t=e.lastCollapsedState),"left"===t||"right"===t?n=i.horizontalCollapsePolicy:("top"===t||"bottom"===t)&&(n=i.verticalCollapsePolicy),n},getDockedItems:function(e,t){var n,i,r,o,a,s,l=this,d="visual"===e,u=d?Ext.ComponentQuery.query("[rendered]",l.owner.dockedItems.items):l.owner.dockedItems.items,c=u&&u.length&&e!==!1;if(null==t)r=c&&!d?u.slice():u;else{for(r=[],o=0,s=u.length;s>o;++o)i=u[o].dock,a="top"===i||"left"===i,(t?a:!a)&&r.push(u[o]);c=c&&r.length}return c&&(n="render"===(e=e||"render"),Ext.Array.sort(r,function(t,i){var r,o;return!n||(r=l.owner.dockOrder[t.dock])===(o=l.owner.dockOrder[i.dock])||r+o?(r=l.getItemWeight(t,e),o=l.getItemWeight(i,e),void 0!==r&&void 0!==o?r-o:0):r-o})),r||[]},getItemWeight:function(e,t){var n=e.weight||this.owner.defaultDockWeights[e.dock];return n[t]||n},getLayoutItems:function(){var e,t,n,i,r,o=this;if(o.owner.collapsed)r=o.owner.getCollapsedDockedItems();else for(e=o.getDockedItems("visual"),t=e.length,r=[],i=0;t>i;i++)n=e[i],n.hidden||r.push(n);return r},measureContentWidth:function(e){var t=e.bodyContext;return t.el.getWidth()-t.getBorderInfo().width},measureContentHeight:function(e){var t=e.bodyContext;return t.el.getHeight()-t.getBorderInfo().height},redoLayout:function(e){var t=this,n=t.owner;1===e.isCollapsingOrExpanding?(n.reExpander&&n.reExpander.el.show(),n.addClsWithUI(n.collapsedCls),e.redo(!0)):2===e.isCollapsingOrExpanding&&(n.removeClsWithUI(n.collapsedCls),e.bodyContext.redo())},renderChildren:function(){var e=this,t=e.getDockedItems(),n=e.getRenderTarget();e.handleItemBorders(),e.renderItems(t,n)},renderItems:function(e,t){var n,i,r,o,a=this,s=e.length,l=0,d=0,u=0,c=a.getRenderTarget().dom.childNodes,h=c.length;for(n=0,i=0;h>n&&(r=c[n],1!==r.nodeType||!Ext.fly(r).hasCls("x-resizable-handle"));n++){for(i=0;s>i&&(o=e[i],!o.rendered||o.el.dom!==r);i++);i===s&&u++}for(;s>l;l++,d++)o=e[l],l!==d||"right"!==o.dock&&"bottom"!==o.dock||(d+=u),o&&!o.rendered?a.renderItem(o,t,d):a.isValidParent(o,t,d)||a.moveItem(o,t,d)},undoLayout:function(e){var t=this,n=t.owner;1===e.isCollapsingOrExpanding?(n.reExpander&&n.reExpander.el.hide(),n.removeClsWithUI(n.collapsedCls),e.undo(!0)):2===e.isCollapsingOrExpanding&&(n.addClsWithUI(n.collapsedCls),e.bodyContext.undo())},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(e,t){var n,i,r=this,o=r.sizePolicy,a=r.owner.shrinkWrapDock;return e.stretch===!1?o.nostretch:(n=e.dock,i="left"===n||"right"===n,a=a===!0?3:a||0,i?(o=o.vert,a=1&a):(o=o.horz,a=2&a),a&&(t||(t=r.owner.getSizeModel()),t[i?"height":"width"].shrinkWrap)?o.shrinkWrap:o.stretch)},configureItem:function(e){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments),e.addCls(this._itemCls),e.ignoreBorderManagement||e.addClsWithUI(this.getDockCls(e.dock))},getDockCls:function(e){return"docked-"+e},afterRemove:function(e){var t;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments),e.removeCls(this._itemCls),e.ignoreBorderManagement||e.removeClsWithUI(this.getDockCls(e.dock)),t=e.el.dom,!e.destroying&&t&&t.parentNode.removeChild(t),this.childrenChanged=!0},borderCollapseMap:{},getBorderCollapseTable:function(){var e,t=this,n=t.borderCollapseMap,i=t.owner,r=i.baseCls,o=i.ui;return n=n[r]||(n[r]={}),e=n[o],e||(r+="-"+o+"-outer-border-",n[o]=e=[0,r+"l",r+"b",r+"bl",r+"r",r+"rl",r+"rb",r+"rbl",r+"t",r+"tl",r+"tb",r+"tbl",r+"tr",r+"trl",r+"trb",r+"trbl"]),e}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0),Ext.define("Ext.rtl.layout.component.Dock",{override:"Ext.layout.component.Dock",rtlPositions:{top:"top",right:"left",bottom:"bottom",left:"right"},getDockCls:function(e){return"docked-"+(this.owner.getInherited().rtl?this.rtlPositions[e]:e)},getBorderClassTable:function(){var e=this;return e.borderTablesInited||e.initBorderTables(),e.owner.getInherited().rtl?e.noBorderClassTableRtl:e.noBorderClassTableLtr},getBorderCollapseTable:function(){var e=this,t=arguments.callee.$previous.call(this);return t.rtl||e.setupBorderTable(t,t.rtl=[]),e.owner.getInherited().rtl?t.rtl:t},initBorderTables:function(){var e=Ext.layout.component.Dock.prototype,t=e.noBorderClassTable,n=[];e.setupBorderTable(t,n),e.noBorderClassTableLtr=t,e.noBorderClassTableRtl=n,e.borderTablesInited=!0},setupBorderTable:function(e,t){t[0]=e[0],t[1]=e[4],t[2]=e[2],t[3]=e[6],t[4]=e[1],t[5]=e[5],t[6]=e[3],t[7]=e[7],t[8]=e[8],t[9]=e[12],t[10]=e[10],t[11]=e[14],t[12]=e[9],t[13]=e[13],t[14]=e[11],t[15]=e[15]}}),Ext.cmd.derive("Ext.util.Memento",Ext.Base,function(){function e(e,t,n,i){e[i?i+n:n]=t[n]}function t(e,t,n){delete e[n]}function n(e,t,n,r){var o=r?r+n:n,a=e[o];(a||e.hasOwnProperty(o))&&i(t,n,a)}function i(e,t,n){Ext.isDefined(n)?e[t]=n:delete e[t]}function r(e,t,n,i,r){if(t)if(Ext.isArray(i)){var o,a=i.length;for(o=0;a>o;o++)e(t,n,i[o],r)}else e(t,n,i,r)}return{data:null,target:null,constructor:function(e,t){this.data={},e&&(this.target=e,t&&this.capture(t))},capture:function(t,n,i){var o=this;r(e,o.data||(o.data={}),n||o.target,t,i)},remove:function(e){r(t,this.data,null,e)},restore:function(e,t,i,o){r(n,this.data,i||this.target,e,o),t!==!1&&this.remove(e)},restoreAll:function(e,t){var n,r=this,o=t||this.target,a=r.data;e=e!==!1;for(n in a)a.hasOwnProperty(n)&&(i(o,n,a[n]),e&&delete a[n])}}}(),1,0,0,0,0,0,[Ext.util,"Memento"],0),Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:!0,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,addDocked:function(e,t){var n,i,r,o,a=this,s=a.rendered,l=0,d=a.dockedItems,u=d.getCount();for(e=a.prepareItems(e),o=e.length,s&&Ext.suspendLayouts(),t=void 0===t?u:Math.min(t,u);o>l;l++)r=e[l],r.dock=r.dock||"top",("left"===r.dock||"right"===r.dock)&&a.horizontalDocks++,n=t+l,d.insert(n,r),i=!!r.instancedCmp,delete r.instancedCmp,r.onAdded(a,n,i),delete r.initOwnerCt,a.onDockedAdd!==Ext.emptyFn&&a.onDockedAdd(r),a.hasListeners.dockedadd&&a.fireEvent("dockedadd",a,r,n);return a.rendered&&(a.updateLayout(),Ext.resumeLayouts(!0)),e},destroyDockedItems:function(){var e,t=this.dockedItems;if(t)for(;e=t.first();)this.removeDocked(e,!0)},doRenderDockedItems:function(e,t,n){var i,r,o=t.$comp,a=o.componentLayout;a.getDockedItems&&!t.$skipDockedItems&&(i=a.getDockedItems("render",!n),r=i&&a.getItemsRenderTree(i),r&&Ext.DomHelper.generateMarkup(r,e))},getDockedComponent:function(e){return Ext.isObject(e)&&(e=e.getItemId()),this.dockedItems.get(e)},getDockedItems:function(e,t){var n=this.getComponentLayout().getDockedItems("render",t);return e&&n.length&&(n=Ext.ComponentQuery.query(e,n)),n},getDockingRefItems:function(e,t){var n,i=e&&"*,* *",r=this.getDockedItems(i,!0);return r.push.apply(r,t),n=this.getDockedItems(i,!1),r.push.apply(r,n),r},initDockingItems:function(){var e=this,t=e.dockedItems;t&&t.isMixedCollection||(e.dockedItems=new Ext.util.AbstractMixedCollection(!1,e.getComponentId),t&&e.addDocked(t))},insertDocked:function(e,t){this.addDocked(t,e)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(e,t){var n,i,r=this;return t=t===!0||t!==!1&&r.autoDestroy,r.dockedItems.contains(e)?(("left"===e.dock||"right"===e.dock)&&r.horizontalDocks--,n=r.componentLayout,i=n&&r.rendered,i&&n.onRemove(e),r.dockedItems.remove(e),e.onRemoved(e.destroying||t),r.onDockedRemove(e),t?e.destroy():i&&n.afterRemove(e),r.hasListeners.dockedremove&&r.fireEvent("dockedremove",r,e),r.destroying||r.updateLayout(),e):e},moveDocked:function(e,t){var n=this;n.rendered&&Ext.suspendLayouts(),n.removeDocked(e,!1),e.dock=t,n.addDocked(e),n.rendered&&(e.frame&&(Ext.getDetachedBody().appendChild(e.el),e.updateFrame()),Ext.resumeLayouts(!0))},setupDockingRenderTpl:function(e){e.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0),Ext.cmd.derive("Ext.panel.Panel",Ext.container.Container,{alternateClassName:"Ext.Panel",childEls:["body"],renderTpl:["{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyRole"> role="{bodyRole}"<tpl else> role="presentation"</tpl>','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:!0,closable:!1,closeAction:"destroy",collapsed:!1,collapsedCls:"collapsed",collapseFirst:!0,collapsible:void 0,constrain:!1,constrainHeader:!1,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:!0,frame:!1,frameHeader:!0,hideCollapseTool:!1,manageHeight:!0,maskElement:"el",minButtonWidth:75,preventHeader:!1,shrinkWrapDock:!1,titleCollapse:void 0,baseCls:"x-panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:!0,defaultBindProperty:"title",addBodyCls:function(e){var t=this,n=t.rendered?t.body:t.getProtoBody();return n.addCls(e),t},addTool:function(e){Ext.isArray(e)||(e=[e]);var t,n,i=this,r=i.header,o=e.length,a=i.tools;for(r&&r.isHeader||(r=null,a||(i.tools=a=[])),t=0;o>t;t++)n=e[t],n.toolOwner=i,r?r.addTool(n):a.push(n);i.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(e){var t=this,n=t.collapsible,i=t.collapseTool;t.collapsible=e,e&&!n?(t.updateCollapseTool(),i=t.collapseTool,i&&i.show()):!e&&n&&i&&i.hide()},addUIClsToElement:function(e){var t=this,n=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);return t.addBodyCls(["x-"+e,t.baseCls+"-body-"+e,t.baseCls+"-body-"+t.ui+"-"+e]),n},afterCollapse:function(e){var t=this,n=t.ownerLayout;t.isCollapsingOrExpanding=0,t.updateCollapseTool(),e&&t.removeCls("x-animating-size"),n&&n.afterCollapse(t,e),t.setHiddenDocked(),t.fireEvent("collapse",t)},afterExpand:function(e){var t=this,n=t.ownerLayout;t.isCollapsingOrExpanding=0,t.updateCollapseTool(),e&&t.removeCls("x-animating-size"),n&&n.afterExpand(t,e),t.fireEvent("expand",t),t.fireHierarchyEvent("expand")},beforeDestroy:function(){var e=this;Ext.destroy(e.placeholder,e.ghostPanel,e.dd),this.destroyDockedItems(),Ext.container.Container.prototype.beforeDestroy.call(this)},beforeRender:function(){var e,t=this;Ext.container.Container.prototype.beforeRender.call(this),t.initTools(),t.preventHeader||t.header===!1||t.updateHeader(),t.afterHeaderInit=!0,t.collapsed&&(t.isPlaceHolderCollapse()?t.hidden||(t.setHiddenState(!0),t.preventCollapseFire=!0,t.placeholderCollapse(),delete t.preventCollapseFire,e=t.collapsed,t.collapsed=!1):(t.beginCollapse(),t.addClsWithUI(t.collapsedCls))),e&&(t.collapsed=e)},getMemento:function(e){var t=this;return e&&"string"==typeof e?(e+="Memento",t[e]||(t[e]=new Ext.util.Memento(t))):void 0},beginCollapse:function(){var e,t=this,n=t.lastBox,i=t.rendered,r=t.getMemento("collapse"),o=t.getSizeModel(),a=t.header;r.capture(["height","minHeight","width","minWidth"]),n&&r.capture(t.restoreDimension(),n,"last."),t.collapsedVertical()?(o.width.shrinkWrap&&(t.width=i?t.getWidth():t.width||t.minWidth||100),delete t.height,t.minHeight=0):t.collapsedHorizontal()&&(o.height.shrinkWrap&&(t.height=i?t.getHeight():t.height||t.minHeight||100),delete t.width,t.minWidth=0),t.ownerCt&&t.ownerCt.getLayout().beginCollapse(t),t.isPlaceHolderCollapse()||a===!1||(a===(e=t.getReExpander())?(a.collapseImmune=!0,a.getInherited().collapseImmune=!0,a.addClsWithUI(t.getHeaderCollapsedClasses(a)),a.rendered&&a.updateFrame()):e.el&&(e.el.show(),e.hidden=!1)),t.resizer&&t.resizer.disable()},beginDrag:function(){this.floatingDescendants&&this.floatingDescendants.hide()},beginExpand:function(){var e,t=this,n=t.lastBox,i=t.getMemento("collapse"),r=t.restoreDimension(),o=t.header;i&&(i.restore(["minHeight","minWidth",r]),n&&i.restore(r,!0,n,"last.")),t.ownerCt&&t.ownerCt.getLayout().beginExpand(t),t.isPlaceHolderCollapse()||o===!1||(o===(e=t.getReExpander())?(delete o.collapseImmune,delete o.getInherited().collapseImmune,o.removeClsWithUI(t.getHeaderCollapsedClasses(o)),o.rendered&&(o.expanding=!0,o.updateFrame(),delete o.expanding)):(e.hidden=!0,e.el.hide())),t.resizer&&t.resizer.enable()},bridgeToolbars:function(){function e(e,t,n){return Ext.isArray(e)?e={xtype:"toolbar",items:e}:e.xtype||(e.xtype="toolbar"),e.dock=t,n&&(e.layout=Ext.applyIf(e.layout||{},{pack:{left:"start",center:"center"}[i.buttonAlign]||"end"})),e}var t,n,i=this,r=[],o=i.minButtonWidth;i.tbar&&(r.push(e(i.tbar,"top")),i.tbar=null),i.bbar&&(r.push(e(i.bbar,"bottom")),i.bbar=null),i.buttons&&(i.fbar=i.buttons,i.buttons=null),i.fbar&&(t=e(i.fbar,"bottom",!0),t.ui="footer",o&&(n=t.defaults,t.defaults=function(e){var t,i=n||{},r=!e.xtype||e.isButton;return r||(t=Ext.ClassManager.getByAlias("widget."+e.xtype),t&&(r=t.prototype.isButton)),!r||"minWidth"in i||(i=Ext.apply({minWidth:o},i)),i}),r.push(t),i.fbar=null),i.lbar&&(r.push(e(i.lbar,"left")),i.lbar=null),i.rbar&&(r.push(e(i.rbar,"right")),i.rbar=null),i.dockedItems?i.dockedItems.isMixedCollection?i.addDocked(r):(Ext.isArray(i.dockedItems)||(i.dockedItems=[i.dockedItems]),i.dockedItems=i.dockedItems.concat(r)):i.dockedItems=r},close:function(){this.fireEvent("beforeclose",this)!==!1&&this.doClose()},collapse:function(e,t){var n=this,i=e||n.collapseDirection,r=n.ownerCt,o=n.ownerLayout,a=n.rendered;return n.isCollapsingOrExpanding?n:(arguments.length<2&&(t=n.animCollapse),n.collapsed||n.fireEvent("beforecollapse",n,e,t)===!1?n:o&&o.onBeforeComponentCollapse&&o.onBeforeComponentCollapse(n)===!1?n:a&&r&&n.isPlaceHolderCollapse()?n.placeholderCollapse(e,t):(n.collapsed=i,a&&n.beginCollapse(),n.getInherited().collapsed=!0,n.fireHierarchyEvent("collapse"),a&&n.doCollapseExpand(1,t),n))},collapsedHorizontal:function(){var e=this.getCollapsed();return"left"===e||"right"===e},collapsedVertical:function(){var e=this.getCollapsed();return"top"===e||"bottom"===e},convertCollapseDir:function(e){return e.substr(0,1)},createGhost:function(e){var t=this,n=t.header,i=t.frame&&!t.alwaysFramed;return{xtype:"panel",hidden:!1,header:n?{titleAlign:n.getTitleAlign()}:null,ui:i?t.ui.replace(/-framed$/,""):t.ui,id:t.id+"-ghost",renderTo:Ext.getBody(),resizable:!1,draggable:!1,closable:!1,floating:!0,shadow:!1,frame:i,shim:t.shim,alwaysFramed:t.alwaysFramed,overlapHeader:t.overlapHeader,headerPosition:t.getHeaderPosition(),titleRotation:t.getTitleRotation(),baseCls:t.baseCls,getRefOwner:function(){return t.getRefOwner()},cls:t.baseCls+"-ghost "+(e||"")}},createReExpander:function(e,t){var n=this,i="left"===e,r="right"===e,o=i||r,a=n.ownerCt,s=Ext.apply({hideMode:"offsets",title:n.getTitle(),titleAlign:n.getTitleAlign(),vertical:o,textCls:n.headerTextCls,icon:n.getIcon(),iconCls:n.getIconCls(),iconAlign:n.getIconAlign(),glyph:n.getGlyph(),baseCls:n.self.prototype.baseCls+"-header",ui:n.ui,frame:n.frame&&n.frameHeader,ignoreParentFrame:n.frame||n.overlapHeader,ignoreBorderManagement:n.frame||n.ignoreHeaderBorderManagement,indicateDrag:n.draggable,collapseImmune:!0,headerRole:n.headerRole,ownerCt:a&&"placeholder"===n.collapseMode?a:n,ownerLayout:n.componentLayout,forceOrientation:!0,margin:n.margin},t);return"mini"===n.collapseMode&&(o?s.width=1:s.height=1),n.hideCollapseTool||((i||r&&n.isPlaceHolderCollapse())&&(s.titlePosition=1),s.tools=[{xtype:"tool",type:"expand-"+n.getOppositeDirection(e),uiCls:["top"],handler:n.toggleCollapse,scope:n}]),s=new Ext.panel.Header(s),s.addClsWithUI(n.getHeaderCollapsedClasses(s)),s},doClose:function(){this.fireEvent("close",this),this[this.closeAction]()},doCollapseExpand:function(e,t){var n=this,i=n.animCollapse,r=n.ownerLayout;return n.animCollapse=t,n.isCollapsingOrExpanding=e,t&&n.addCls("x-animating-size"),r&&!t?r.onContentChange(n):n.updateLayout({isRoot:!0}),n.animCollapse=i,n},endDrag:function(){this.floatingDescendants&&this.floatingDescendants.show()},expand:function(e){var t=this,n=t.ownerLayout,i=t.rendered;return t.isCollapsingOrExpanding?t:(arguments.length||(e=t.animCollapse),t.collapsed||t.floatedFromCollapse?t.fireEvent("beforeexpand",t,e)===!1?t:n&&n.onBeforeComponentExpand&&n.onBeforeComponentExpand(t)===!1?t:(delete t.getInherited().collapsed,i&&t.isPlaceHolderCollapse()?t.placeholderExpand(e):(t.restoreHiddenDocked(),i&&t.beginExpand(),t.collapsed=!1,t.rendered&&t.doCollapseExpand(2,e),t)):t)},findReExpander:function(e){var t,n,i=this,r=Ext.Component,o=i.dockedItems.items,a=o.length;if("mini"!==i.collapseMode)switch(e){case r.DIRECTION_TOP:case r.DIRECTION_BOTTOM:for(n=0;a>n;n++)if(t=o[n],!t.hidden&&t.isHeader&&(!t.dock||"top"===t.dock||"bottom"===t.dock))return t;break;case r.DIRECTION_LEFT:case r.DIRECTION_RIGHT:for(n=0;a>n;n++)if(t=o[n],!t.hidden&&t.isHeader&&("left"===t.dock||"right"===t.dock))return t;break;default:throw"Panel#findReExpander must be passed a valid collapseDirection";
}},floatCollapsedPanel:function(){var e,t,n,i=this,r=i.placeholder,o=r.getSize(),a="x-border-region-slide-in",s=i.collapsed,l=i.ownerCt||i;if(!i.isSliding){if(i.el.hasCls(a))return void i.slideOutFloatedPanel();switch(i.isSliding=!0,r.el.hide(),r.hidden=!0,i.el.show(),i.setHiddenState(!1),i.collapsed=!1,l.updateLayout(),r.el.show(),r.hidden=!1,i.el.hide(),i.setHiddenState(!0),i.collapsed=s,l.updateLayout(),n=i.getBox(!1,!0),i.slideOutTask=i.slideOutTask||new Ext.util.DelayedTask(i.slideOutFloatedPanel,i),Ext.supports.Touch&&Ext.on("mousedown",t=function(e){e.within(i.el)||(Ext.un("mousedown",t),i.slideOutFloatedPanel())}),i.placeholderListener||(i.placeholderListener=r.on({resize:i.onPlaceholderResize,scope:i,destroyable:!0})),r.el.on("mouseleave",i.onMouseLeaveFloated,i),i.el.on("mouseleave",i.onMouseLeaveFloated,i),r.el.on("mouseenter",i.onMouseEnterFloated,i),i.el.on("mouseenter",i.onMouseEnterFloated,i),i.el.addCls(a),i.floated=s,i.collapseTool&&i.collapseTool.el.hide(),i.collapsed){case"top":i.width=o.width,i.setLocalXY(n.x,n.y+o.height);break;case"right":i.height=o.height,i.setLocalXY(n.x-o.width,n.y);break;case"bottom":i.width=o.width,i.setLocalXY(n.x,n.y-o.height);break;case"left":i.height=o.height,i.setLocalXY(n.x+o.width,n.y)}e=i.convertCollapseDir(i.collapsed),i.floatedFromCollapse=i.collapsed,i.collapsed=!1,i.setHiddenState(!1),i.el.slideIn(e,{preserveScroll:!0,duration:Ext.Number.from(i.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){i.isSliding=!1,i.fireEvent("float",i)}}})}},onPlaceholderResize:function(e,t,n){var i=this,r=i.getBox(!1,!0),o=e.getBox(!1,!0);switch(i.floated){case"top":i.width=t,i.setLocalY(o.y+o.height);break;case"right":i.height=n,i.setLocalX(o.x-r.width);break;case"bottom":i.width=t,i.setLocalY(o.y-r.height);break;case"left":i.height=n,i.setLocalX(o.x+o.width)}i.updateLayout({isRoot:!0})},getAnimationProps:function(){var e,t=this,n=t.animCollapse;return e=Ext.container.Container.prototype.getAnimationProps.call(this),"number"==typeof n&&(e.duration=n),e},getCollapsed:function(){var e=this;return e.collapsed===!0?e.collapseDirection:e.collapsed},getCollapsedDockedItems:function(){var e=this;return e.header===!1||"placeholder"===e.collapseMode?e.emptyArray:[e.getReExpander()]},getComponent:function(e){var t=Ext.container.Container.prototype.getComponent.apply(this,arguments);return void 0!==t||Ext.isNumber(e)||(t=this.getDockedComponent(e)),t},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(e){var t,n=this,i=n.collapsedCls;return t=[i,i+"-"+e.getDockName()],n.border&&(!n.frame||n.frame&&Ext.supports.CSS3BorderRadius)&&t.push(i+"-border-"+e.getDockName()),t},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(e){var t=Ext.Component;switch(e){case t.DIRECTION_TOP:return t.DIRECTION_BOTTOM;case t.DIRECTION_RIGHT:return t.DIRECTION_LEFT;case t.DIRECTION_BOTTOM:return t.DIRECTION_TOP;case t.DIRECTION_LEFT:return t.DIRECTION_RIGHT}},getPlaceholder:function(e){var t=this,n=e||t.collapseDirection,i=null,r=t.placeholder,o=t.floatable,a=t.titleCollapse;return r||((o||t.collapsible&&a)&&(i={click:{fn:!a&&o?t.floatCollapsedPanel:t.toggleCollapse,element:"el",scope:t}}),t.placeholder=r=Ext.widget(t.createReExpander(n,{id:t.id+"-placeholder",listeners:i}))),r.placeholderFor||(r.isComponent||(t.placeholder=r=t.lookupComponent(r)),Ext.applyIf(r,{margin:t.margin,placeholderFor:t,synthetic:!0}),r.addCls(["x-region-collapsed-placeholder","x-region-collapsed-"+n+"-placeholder",t.collapsedCls])),r},getProtoBody:function(){var e=this,t=e.protoBody;return t||(e.protoBody=t=new Ext.util.ProtoElement({cls:e.bodyCls,style:e.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:!0})),t},getReExpander:function(e){var t=this,n=e||t.collapseDirection,i=t.reExpander||t.findReExpander(n);return t.expandDirection=t.getOppositeDirection(n),i||(t.reExpander=i=t.createReExpander(n,{dock:n,cls:"x-docked "+t.baseCls+"-"+t.ui+"-collapsed",isCollapsedExpander:!0}),t.dockedItems.insert(0,i)),i},getRefItems:function(e){var t=Ext.container.Container.prototype.getRefItems.apply(this,arguments);return this.getDockingRefItems(e,t)},getState:function(){var e,t=this,n=Ext.container.Container.prototype.getState.call(this)||{},i=t.collapsed,r=t.floated;return r&&(t.collapsed=r),n=t.addPropertyToState(n,"collapsed"),r&&(t.collapsed=i),t.getCollapsed()&&(e=t.getMemento("collapse").data,n=t.addPropertyToState(n,"collapsed",e),t.collapsedVertical()?(delete n.height,e&&(n=t.addPropertyToState(n,"height",e.height))):(delete n.width,e&&(n=t.addPropertyToState(n,"width",e.width)))),n},applyState:function(e){var t,n=this,i={};e&&(t=e.collapsed,t&&(i=n.getMemento("collapse"),Ext.Object.merge(i.data,t),e.collapsed=!0),Ext.container.Container.prototype.applyState.apply(this,arguments))},ghost:function(e){var t,n,i,r,o,a,s=this,l=s.ghostPanel,d=s.getBox(),u=s.header;if(l?l.el.show():(s.ghostPanel=l=Ext.widget(s.createGhost(e)),l.el.dom.removeAttribute("tabIndex")),l.setHiddenState(!1),l.floatParent=s.floatParent,l.toFront(),u&&!s.preventHeader){for(t=l.header,t.suspendLayouts(),n=t.query("tool"),a=n.length;a--;)t.remove(n[a]);t.setTitlePosition(0),l.addTool(s.ghostTools()),l.setTitle(s.getTitle()),t.setTitlePosition(u.titlePosition),r=s.getIconCls(),r?l.setIconCls(r):(i=s.getIcon(),i?l.setIcon(i):(o=s.getGlyph(),o&&l.setGlyph(o))),t.addCls("x-header-ghost"),t.resumeLayouts()}return l.setPagePosition(d.x,d.y),l.setSize(d.width,d.height),s.el.hide(),l},ghostTools:function(){var e,t,n,i=[],r=this.header,o=r?r.query("tool[hidden=false]"):[];if(o.length)for(e=0,t=o.length;t>e;e++)n=o[e],i.push({type:n.type});else i=[{type:"placeholder"}];return i},initBodyBorder:function(){var e=this;e.frame&&e.bodyBorder&&(Ext.isNumber(e.bodyBorder)||(e.bodyBorder=1),e.getProtoBody().setStyle("border-width",this.unitizeBox(e.bodyBorder)))},initBodyStyles:function(){var e=this,t=e.getProtoBody();void 0!==e.bodyPadding&&(e.layout.managePadding?t.setStyle("padding",0):t.setStyle("padding",this.unitizeBox(e.bodyPadding===!0?5:e.bodyPadding))),e.initBodyBorder()},initBorderProps:function(){var e=this;e.frame&&e.border&&void 0===e.bodyBorder&&(e.bodyBorder=!1),e.frame&&e.border&&(e.bodyBorder===!1||0===e.bodyBorder)&&(e.manageBodyBorders=!0)},initComponent:function(){var e=this;e.collapsible&&e.addStateEvents(["expand","collapse"]),e.unstyled&&e.setUI("plain"),e.frame&&e.setUI(e.ui+"-framed"),e.bridgeToolbars(),e.initBorderProps(),Ext.container.Container.prototype.initComponent.call(this),e.collapseDirection=e.collapseDirection||e.getHeaderPosition()||Ext.Component.DIRECTION_TOP,e.hiddenOnCollapse=new Ext.dom.CompositeElement},initItems:function(){Ext.container.Container.prototype.initItems.call(this),this.initDockingItems()},initRenderData:function(){var e=this,t=Ext.container.Container.prototype.initRenderData.call(this);return e.initBodyStyles(),e.protoBody.writeTo(t),delete e.protoBody,t},calculateConstrainedPosition:function(e,t,n,i){var r,o,a=this,s=a.header;return a.constrainHeader&&(r=s.lastBox,i?i=s.vertical?[r?r.width:i[0],i[1]]:[i[0],r?r.height:i[1]]:r&&(i=[r.width,r.height]),o=a.floatParent,e=e||a.constrainTo||(o?o.getTargetEl():null)||a.container||a.el.parent()),Ext.container.Container.prototype.calculateConstrainedPosition.call(this,e,t,n,i)},initTools:function(){var e,t,n=this,i=n.tools;for(n.tools=[],e=i&&i.length;e;)--e,n.tools[e]=t=i[e],t.toolOwner=n;!n.collapsible||n.hideCollapseTool||n.header===!1||n.preventHeader||(n.updateCollapseTool(),n.collapseFirst&&n.tools.unshift(n.collapseTool)),n.addTools(),n.pinnable&&n.initPinnable(),n.closable&&(n.addClsWithUI("closable"),n.addTool({xtype:"tool",type:"close",scope:n,handler:n.close})),n.collapseTool&&!n.collapseFirst&&n.addTool(n.collapseTool)},isLayoutRoot:function(){return this.floatedFromCollapse?!0:Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return"placeholder"===this.collapseMode},isVisible:function(e){var t=this;return t.collapsed&&t.placeholder?t.placeholder.isVisible(e):Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){Ext.container.Container.prototype.onBoxReady.apply(this,arguments),this.collapsed&&this.setHiddenDocked()},onHide:function(e,t,n){var i=this,r=i.dd;i.floatedFromCollapse&&i.slideOutFloatedPanel(!0),i.draggable&&r&&r.endDrag(),i.collapsed&&i.placeholder?(i.splitter&&(Ext.suspendLayouts(),i.splitter.hide(),Ext.resumeLayouts()),i.placeholder.hide()):Ext.container.Container.prototype.onHide.call(this,e,t,n)},onMouseEnterFloated:function(){this.slideOutTask.cancel()},onMouseLeaveFloated:function(){this.slideOutTask.delay(500)},onRemoved:function(e){var t=this;t.placeholder&&!e&&t.ownerCt.remove(t.placeholder,!1),Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var e=this;e.collapsed&&e.isPlaceHolderCollapse()?(e.splitter&&(Ext.suspendLayouts(),e.splitter.show(),Ext.resumeLayouts()),e.setHiddenState(!0),e.placeholderCollapse()):Ext.container.Container.prototype.onShow.apply(this,arguments)},placeholderCollapse:function(e,t){var n,i=this,r=i.ownerCt,o=e||i.collapseDirection,a="x-border-region-slide-in",s=i.getPlaceholder(o);return i.isCollapsingOrExpanding=1,i.setHiddenState(!0),i.collapsed=o,s.rendered?(s.el.dom.parentNode!==i.el.dom.parentNode&&i.el.dom.parentNode.insertBefore(s.el.dom,i.el.dom),s.hidden=!1,s.setHiddenState(!1),s.el.show(),r.updateLayout()):r.insert(r.items.indexOf(i),s),i.rendered?(i.el.setVisibilityMode(i.placeholderCollapseHideMode),t?(i.el.addCls(a),s.el.hide(),n=i.convertCollapseDir(o),i.el.slideOut(n,{preserveScroll:!0,duration:Ext.Number.from(t,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){i.el.removeCls(a),s.el.show().setStyle("display","none").slideIn(n,{easing:"linear",duration:100,listeners:{afteranimate:function(){s.focus(),s.setHiddenState(!1),i.isCollapsingOrExpanding=0,i.fireEvent("collapse",i)}}})}}})):(i.el.hide(),s.setHiddenState(!1),i.isCollapsingOrExpanding=0,i.fireEvent("collapse",i))):(i.isCollapsingOrExpanding=0,i.preventCollapseFire||i.fireEvent("collapse",i)),i},placeholderExpand:function(e){var t,n,i=this,r=i.collapsed,o="x-border-region-slide-in",a=i.ownerLayout?i.ownerLayout.centerRegion:null;return Ext.Component.layoutSuspendCount&&(e=!1),i.floatedFromCollapse&&(n=i.getPosition(!0),i.slideOutFloatedPanelBegin(),i.slideOutFloatedPanelEnd(),i.floated=!1),e?(Ext.suspendLayouts(),i.placeholder.hide(),i.el.show(),i.collapsed=!1,i.setHiddenState(!1),a&&!n&&(a.hidden=!0),Ext.resumeLayouts(!0),a.hidden=!1,i.el.addCls(o),i.isCollapsingOrExpanding=2,n?(t=i.getXY(),i.setLocalXY(n[0],n[1]),i.setXY([t[0],t[1]],{duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){i.el.removeCls(o),i.isCollapsingOrExpanding=0,i.fireEvent("expand",i)}}})):(i.el.hide(),i.placeholder.el.show(),i.placeholder.hidden=!1,i.setHiddenState(!1),i.el.slideIn(i.convertCollapseDir(r),{preserveScroll:!0,duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){i.el.removeCls(o),i.placeholder.hide(),i.updateLayout(),i.isCollapsingOrExpanding=0,i.fireEvent("expand",i)}}}))):(i.floated=i.collapsed=!1,i.el.removeCls(o),Ext.suspendLayouts(),i.placeholder.hide(),i.show(),Ext.resumeLayouts(!0),i.fireEvent("expand",i)),i},remove:function(e,t){return this.dockedItems.contains(e)?this.removeDocked(e,t):Ext.container.Container.prototype.remove.call(this,e,t),e},removeBodyCls:function(e){var t=this,n=t.rendered?t.body:t.getProtoBody();return n.removeCls(e),t},removeUIClsFromElement:function(e){var t=this,n=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);return t.removeBodyCls(["x-"+e,t.baseCls+"-body-"+e,t.baseCls+"-body-"+t.ui+"-"+e]),n},restoreDimension:function(){var e=this.collapseDirection;return"top"===e||"bottom"===e?"height":"width"},restoreHiddenDocked:function(){var e=this.hiddenOnCollapse;e.setStyle("visibility",""),e.clear()},setBodyStyle:function(e,t){var n=this,i=n.rendered?n.body:n.getProtoBody();return Ext.isFunction(e)&&(e=e()),1===arguments.length?(Ext.isString(e)&&(e=Ext.Element.parseStyles(e)),i.setStyle(e)):i.setStyle(e,t),n},setBorder:function(e,t){if(!t){var n=this,i=n.header;e=e?e===!0?"1px":n.unitizeBox(e):0,i&&(i.isHeader?i.setBorder(e):i.border=e),n.rendered&&n.bodyBorder!==!1&&n.body.setStyle("border-width",e),n.updateLayout(),n.border=e}},setCollapsed:function(e){this[e?"collapse":"expand"]()},setGlyph:function(e){var t=this,n=t.glyph,i=t.header,r=t.placeholder;e!==n&&(t.glyph=e,i?i.isHeader?i.setGlyph(e):i.glyph=e:(t.rendered||t.afterHeaderInit)&&t.updateHeader(),r&&r.setGlyph&&r.setGlyph(e),t.fireEvent("glyphchange",t,e,n))},setIcon:function(e){var t=this,n=t.icon,i=t.header,r=t.placeholder;e!==n&&(t.icon=e,i?i.isHeader?i.setIcon(e):i.icon=e:(t.rendered||t.afterHeaderInit)&&t.updateHeader(),r&&r.setIcon&&r.setIcon(e),t.fireEvent("iconchange",t,e,n))},setIconCls:function(e){var t=this,n=t.iconCls,i=t.header,r=t.placeholder;e!==n&&(t.iconCls=e,i?i.isHeader?i.setIconCls(e):i.iconCls=e:(t.rendered||t.afterHeaderInit)&&t.updateHeader(),r&&r.setIconCls&&r.setIconCls(e),t.fireEvent("iconclschange",t,e,n))},setTitle:function(e){var t=this,n=t.title,i=t.header,r=t.reExpander,o=t.placeholder;e!==n&&(t.title=e,i?i.isHeader&&i.setTitle(e):(t.rendered||t.afterHeaderInit)&&t.updateHeader(),r&&r.setTitle(e),o&&o.setTitle&&o.setTitle(e),t.fireEvent("titlechange",t,e,n))},setHiddenDocked:function(){var e,t,n=this,i=n.hiddenOnCollapse,r=n.getDockedItems(),o=r.length,a=0;for(n.header!==!1&&(t=n.getReExpander()),i.add(n.body);o>a;a++)e=r[a],e&&e!==t&&e.el&&i.add(e.el);i.setStyle("visibility","hidden")},setUI:function(e){var t=this;Ext.container.Container.prototype.setUI.apply(this,arguments),t.header&&t.header.rendered&&t.header.setUI(e)},toggleCollapse:function(){return this.collapsed||this.floatedFromCollapse?this.expand():this.collapse()},updateCollapseTool:function(){var e=this,t=e.collapseTool;!t&&e.collapsible&&(e.collapseDirection=e.collapseDirection||e.getHeaderPosition()||"top",e.collapseTool=e.expandTool=t=Ext.widget({xtype:"tool",handler:e.toggleCollapse,scope:e})),t&&(e.collapsed&&!e.isPlaceHolderCollapse()?t.setType("expand-"+e.getOppositeDirection(e.collapseDirection)):t.setType("collapse-"+e.collapseDirection))},updateHeaderPosition:function(e){var t=this.header;t&&t.isHeader&&t.setDock(e)},updateIconAlign:function(e){var t=this.header;t&&t.isHeader&&t.setIconAlign(e)},updateTitleAlign:function(e){var t=this.header;t&&t.isHeader&&t.setTitleAlign(e)},updateTitleRotation:function(e){var t=this.header;t&&t.isHeader&&t.setTitleRotation(e)},unghost:function(e,t,n){var i=this,r=i.ghostPanel;r&&(e!==!1&&(i.el.show(),t!==!1&&(i.setPagePosition(r.getXY()),"offsets"===i.hideMode&&delete i.el.hideModeStyles),n&&i.focus(!1,10)),r.el.hide(),r.setHiddenState(!0))},updateHeader:function(e){var t=this,n=t.header,i=t.getTitle(),r=t.tools,o=t.getIcon(),a=t.getGlyph(),s=t.getIconCls(),l=a||o||s,d=t.getHeaderPosition(),u="left"===d||"right"===d;Ext.isObject(n)||n!==!1&&(e||i||l||r&&r.length||t.collapsible&&!t.titleCollapse)?n&&n.isHeader?n.show():(n=t.header=Ext.widget(Ext.merge({xtype:"header",title:i,titleAlign:t.getTitleAlign(),vertical:u,dock:t.getHeaderPosition()||"top",titleRotation:t.getTitleRotation(),textCls:t.headerTextCls,iconCls:s,iconAlign:t.getIconAlign(),icon:o,glyph:a,baseCls:t.baseCls+"-header",tools:r,ui:t.ui,id:t.id+"_header",overCls:t.headerOverCls,indicateDrag:t.draggable,frame:(t.frame||t.alwaysFramed)&&t.frameHeader,ignoreParentFrame:t.frame||t.overlapHeader,ignoreBorderManagement:t.frame||t.ignoreHeaderBorderManagement,headerRole:t.headerRole,ownerCt:t,synthetic:!0,listeners:t.collapsible&&t.titleCollapse?{click:t.toggleCollapse,scope:t}:null},t.header)),t.addDocked(n,0)):n&&n.hide()},privates:{addUIToElement:function(){var e=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments),e.addBodyCls(e.baseCls+"-body-"+e.ui)},applyTargetCls:function(e){this.getProtoBody().addCls(e)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var e=this;return e.body||e.protoBody||e.frameBody||e.el},initDraggable:function(){var e=this;e.simpleDrag?e.initSimpleDraggable():e.dd=new Ext.panel.DD(e,Ext.isBoolean(e.draggable)?null:e.draggable)},initResizable:function(){Ext.container.Container.prototype.initResizable.apply(this,arguments),this.collapsed&&this.resizer.disable()},initSimpleDraggable:function(){var e,t,n=this;n.header||n.updateHeader(!0),n.header&&(e=Ext.applyIf({el:n.el,delegate:"#"+n.header.id},n.draggable),(n.constrain||n.constrainHeader)&&(e.constrain=n.constrain,e.constrainDelegate=n.constrainHeader,e.constrainTo=n.constrainTo||n.container),t=n.dd=new Ext.util.ComponentDragger(n,e),n.relayEvents(t,["dragstart","drag","dragend"]),n.maximized&&t.disable())},removeUIFromElement:function(){var e=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments),e.removeBodyCls(e.baseCls+"-body-"+e.ui)},setupRenderTpl:function(e){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments),this.setupDockingRenderTpl(e)},slideOutFloatedPanel:function(e){var t,n=this,i=n.el,r=function(){n.slideOutFloatedPanelEnd(),n.el.removeCls("x-border-region-slide-in")};if(!n.isSliding&&!n.isDestroyed){if(n.isSliding=!0,n.floated=!1,n.slideOutFloatedPanelBegin(),e)return i.hide(),r();"string"==typeof n.collapsed&&(t=n.convertCollapseDir(n.collapsed)),i.slideOut(t,{preserveScroll:!0,duration:Ext.Number.from(n.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:r}})}},slideOutFloatedPanelBegin:function(){var e=this,t=e.placeholder.el,n=e.el;e.collapsed=e.floatedFromCollapse,e.setHiddenState(!0),e.floatedFromCollapse=null,t.un("mouseleave",e.onMouseLeaveFloated,e),n.un("mouseleave",e.onMouseLeaveFloated,e),t.un("mouseenter",e.onMouseEnterFloated,e),n.un("mouseenter",e.onMouseEnterFloated,e)},slideOutFloatedPanelEnd:function(e){var t=this;t.collapseTool&&t.collapseTool.el.show(),t.slideOutTask.cancel(),t.isSliding=!1,e||t.fireEvent("unfloat",t)}}},0,["panel"],["component","box","container","panel"],{component:!0,box:!0,container:!0,panel:!0},["widget.panel"],[["docking",Ext.container.DockingContainer]],[Ext.panel,"Panel",Ext,"Panel"],function(){var e=this.prototype;e.animCollapse=Ext.enableFx,e.placeholderCollapseHideMode=Ext.Element.VISIBILITY}),Ext.define("Ext.rtl.panel.Panel",{override:"Ext.panel.Panel",rtlCollapseDirs:{top:"top",right:"left",bottom:"bottom",left:"right"},convertCollapseDir:function(e){return!!Ext.rootInheritedState.rtl!==this.isLocalRtl()&&(e=this.rtlCollapseDirs[e]),arguments.callee.$previous.apply(this,arguments)}}),Ext.cmd.derive("Ext.form.Labelable",Ext.Mixin,{isLabelable:!0,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="alert" aria-live="polite" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{id}-inputEl">',"</div>","</div>","</tpl>",{disableFormats:!0}],activeErrorsTpl:void 0,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel"><div>{fieldLabel}</div></tpl>',"</tpl>",'<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel">{fieldLabel}\n</tpl>',"</tpl>",'<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:!0,formItemCls:"x-form-item",labelCls:"x-form-item-label",topLabelCls:"x-form-item-label-top",rightLabelCls:"x-form-item-label-right",labelInnerCls:"x-form-item-label-inner",topLabelSideErrorCls:"x-form-item-label-top-side-error",errorMsgCls:"x-form-error-msg",errorWrapCls:"x-form-error-wrap",errorWrapSideCls:"x-form-error-wrap-side",errorWrapUnderCls:"x-form-error-wrap-under",errorWrapUnderSideLabelCls:"x-form-error-wrap-under-side-label",baseBodyCls:"x-form-item-body",invalidIconCls:"x-form-invalid-icon",invalidUnderCls:"x-form-invalid-under",noLabelCls:"x-form-item-no-label",fieldBodyCls:"",invalidCls:"x-form-invalid",fieldLabel:void 0,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:!1,hideEmptyLabel:!0,preventMark:!1,autoFitErrors:!0,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:!0,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var e,t,n=this.tip;n||(e={id:"ext-form-error-tip",ui:"form-invalid"},Ext.supports.Touch&&(e.dismissDelay=0,e.anchor="top",e.showDelay=0,e.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}),n=this.tip=Ext.create("Ext.tip.QuickTip",e),t=Ext.apply({},n.tagConfig),t.attribute="errorqtip",n.setTagConfig(t))},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var e=this,t=e.padding;t&&(e.padding=void 0,e.extraMargins=Ext.Element.parseBox(t)),Ext.isIE8&&(e.restoreDisplay=Ext.Function.createDelayed(e.doRestoreDisplay,0,e)),e.activeErrorsTpl||("title"===e.msgTarget?e.activeErrorsTpl=e.plaintextActiveErrorsTpl:e.activeErrorsTpl=e.htmlActiveErrorsTpl),e.addCls([e.formItemCls,e.formItemCls+"-"+e.ui]),e.lastActiveError="",e.enableBubble("errorchange")},trimLabelSeparator:function(){var e=this,t=e.labelSeparator,n=e.fieldLabel||"",i=n.substr(n.length-1);return i===t?n.slice(0,-1):n},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(e){e=e||"";var t=this,n=t.labelSeparator,i=t.labelEl,r=t.errorWrapEl,o="top"!==t.labelAlign,a=t.noLabelCls,s=t.errorWrapUnderSideLabelCls;t.fieldLabel=e,t.rendered&&(Ext.isEmpty(e)&&t.hideEmptyLabel?(t.addCls(a),o&&r&&r.removeCls(s)):(n&&(e=t.trimLabelSeparator()+n),i.dom.firstChild.innerHTML=e,t.removeCls(a),o&&r&&r.addCls(s)),t.updateLayout())},setHideLabel:function(e){var t=this;e!==t.hideLabel&&(t.hideLabel=e,t.rendered&&(t[e?"addCls":"removeCls"](t.noLabelCls),t.updateLayout()))},setHideEmptyLabel:function(e){var t,n=this;e!==n.hideEmptyLabel&&(n.hideEmptyLabel=e,n.rendered&&!n.hideLabel&&(t=e&&!n.getFieldLabel(),n[t?"addCls":"removeCls"](n.noLabelCls),n.updateLayout()))},getInsertionRenderData:function(e,t){for(var n,i,r=t.length;r--;)n=t[r],i=this[n],i&&"string"!=typeof i&&(i.isTemplate||(i=Ext.XTemplate.getTpl(this,n)),i=i.apply(e)),e[n]=i||"";return e},getLabelableRenderData:function(){var e,t,n=this,i=n.labelAlign,r="top"===i,o="right"===i,a="side"===n.msgTarget,s="under"===n.msgTarget,l=n.errorMsgCls,d=n.labelPad,u=n.labelWidth,c=n.labelClsExtra||"",h=a?n.errorWrapSideCls:n.errorWrapUnderCls,p="",f="",g=n.hasVisibleLabel(),m=n.autoFitErrors,x=n.defaultBodyWidth;return r?(c+=" "+n.topLabelCls,d&&(f="padding-bottom:"+d+"px;"),a&&!m&&(c+=" "+n.topLabelSideErrorCls)):(o&&(c+=" "+n.rightLabelCls),d&&(p+=n.getHorizontalPaddingStyle()+d+"px;"),p+="width:"+(u+(d?d:0))+"px;",f="width:"+u+"px"),g&&!r&&s&&(h+=" "+n.errorWrapUnderSideLabelCls),x&&(e="min-width:"+x+"px;max-width:"+x+"px;"),t={id:n.id,inputId:n.getInputId(),labelCls:n.labelCls,labelClsExtra:c,labelStyle:p+(n.labelStyle||""),labelInnerStyle:f,labelInnerCls:n.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:e,baseBodyCls:n.baseBodyCls,fieldBodyCls:n.fieldBodyCls,extraFieldBodyCls:n.extraFieldBodyCls,errorWrapCls:n.errorWrapCls,errorWrapExtraCls:h,renderError:a||s,invalidMsgCls:a?n.invalidIconCls:s?n.invalidUnderCls:"",errorMsgCls:l,growCls:n.grow?n.growCls:"",errorWrapStyle:a&&!m?"visibility:hidden":"display:none",fieldLabel:n.getFieldLabel(),labelSeparator:n.labelSeparator},n.getInsertionRenderData(t,n.labelableInsertions),t},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var e=this;e.setFieldDefaults(e.getInherited().fieldDefaults),e.ownerLayout&&e.addCls("x-"+e.ownerLayout.type+"-form-item"),e.hasVisibleLabel()||e.addCls(e.noLabelCls)},onLabelRender:function(){var e,t,n=this,i={},r=Ext.Element,o=n.errorWrapEl;if(o&&o.setVisibilityMode("side"!==n.msgTarget||n.autoFitErrors?r.DISPLAY:r.VISIBILITY),n.extraMargins){e=n.el.getMargin();for(t in e)e.hasOwnProperty(t)&&(i["margin-"+t]=e[t]+n.extraMargins[t]+"px");n.el.setStyle(i)}},hasVisibleLabel:function(){return this.hideLabel?!1:!(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return!!this.getActiveError()},setActiveError:function(e){this.setActiveErrors(e)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(e){var t,n,i,r=this,o=r.errorWrapEl,a=r.msgTarget,s="side"===a,l="qtip"===a;e=Ext.Array.from(e),n=r.getTpl("activeErrorsTpl"),r.activeErrors=e,t=r.activeError=n.apply({fieldLabel:r.fieldLabel,errors:e,listCls:"x-list-plain"}),r.renderActiveError(),r.rendered&&(s?r.errorEl.dom.setAttribute("data-errorqtip",t):l?r.getActionEl().dom.setAttribute("data-errorqtip",t):"title"===a&&r.getActionEl().dom.setAttribute("title",t),(s||l)&&Ext.form.Labelable.initTip(),r.msgTargets[a]||(i=Ext.get(a),i&&(i.dom.innerHTML=t))),o&&(o.setVisible(e.length>0),s&&r.autoFitErrors&&r.labelEl.addCls(r.topLabelSideErrorCls),r.updateLayout())},unsetActiveError:function(){var e,t=this,n=t.errorWrapEl,i=t.msgTarget,r=t.restoreDisplay;t.hasActiveError()&&(delete t.activeError,delete t.activeErrors,t.renderActiveError(),t.rendered&&("qtip"===i?t.getActionEl().dom.removeAttribute("data-errorqtip"):"title"===i&&t.getActionEl().dom.removeAttribute("title"),t.msgTargets[i]||(e=Ext.get(i),e&&(e.dom.innerHTML="")),n&&(n.hide(),"side"===i&&t.autoFitErrors&&t.labelEl.removeCls(t.topLabelSideErrorCls),t.updateLayout(),r&&(t.el.dom.style.display="block",t.restoreDisplay()))))},doRestoreDisplay:function(){var e=this.el;e&&e.dom&&(e.dom.style.display="")},renderActiveError:function(){var e=this,t=e.getActiveError(),n=!!t;t!==e.lastActiveError&&(e.lastActiveError=t,e.fireEvent("errorchange",e,t)),!e.rendered||e.isDestroyed||e.preventMark||(e.toggleInvalidCls(n),e.errorEl&&(e.errorEl.dom.innerHTML=t))},toggleInvalidCls:function(e){this.el[e?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(e){var t;for(t in e)this.hasOwnProperty(t)||(this[t]=e[t])}},0,0,0,0,0,0,[Ext.form,"Labelable"],function(){Ext.supports.Touch&&(this.prototype.msgTarget="side")}),Ext.define("Ext.rtl.form.Labelable",{override:"Ext.form.Labelable",getHorizontalPaddingStyle:function(){return this.getInherited().rtl?"padding-left:":"padding-right:"}}),Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{mixinId:"field",isFormField:!0,config:{validation:null,validationField:null},disabled:!1,submitValue:!0,validateOnChange:!0,valuePublishEvent:"change",suspendCheckChange:0,dirty:!1,initField:function(){var e,t,n=this,i=n.valuePublishEvent;if(n.initValue(),Ext.isString(i))n.on(i,n.publishValue,n);else for(t=0,e=i.length;e>t;++t)n.on(i[t],n.publishValue,n)},initValue:function(){var e=this;"value"in e&&(e.suspendCheckChange++,e.setValue(e.value),e.suspendCheckChange--),e.initialValue=e.originalValue=e.lastValue=e.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(e){var t=this;return t.value=e,t.checkChange(),t},isEqual:function(e,t){return e+""==t+""},isEqualAsString:function(e,t){return Ext.valueFrom(e,"")+""==Ext.valueFrom(t,"")+""},getSubmitData:function(){var e=this,t=null;return!e.disabled&&e.submitValue&&(t={},t[e.getName()]=""+e.getValue()),t},getModelData:function(e,t){var n=this,i=null;return n.disabled||!n.submitValue&&t||(i={},i[n.getFieldIdentifier()]=n.getValue()),i},reset:function(){var e=this;e.beforeReset(),e.setValue(e.originalValue),e.clearInvalid(),delete e.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue(),this.checkDirty()},checkChange:function(){var e,t,n=this;n.suspendCheckChange||(e=n.getValue(),t=n.lastValue,!n.isDestroyed&&n.didValueChange(e,t)&&(n.lastValue=e,n.fireEvent("change",n,e,t),n.onChange(e,t)))},didValueChange:function(e,t){return!this.isEqual(e,t)},onChange:function(){var e=this;e.validateOnChange&&e.validate(),e.checkDirty()},publishValue:function(){var e=this;e.rendered&&!e.getErrors().length&&e.publishState("value",e.getValue())},isDirty:function(){var e=this;return!e.disabled&&!e.isEqual(e.getValue(),e.originalValue)},checkDirty:function(){var e=this,t=e.isDirty();t!==e.wasDirty&&(e.dirty=t,e.fireEvent("dirtychange",e,t),e.onDirtyChange(t),e.wasDirty=t)},onDirtyChange:Ext.emptyFn,getErrors:function(e){var t,n=[],i=this.getValidationField(),r=this.getValidation();return i&&(t=i.validate(e),t!==!0&&n.push(t)),r&&r!==!0&&n.push(r),n},isValid:function(){var e=this;return e.disabled||Ext.isEmpty(e.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(e){var t=this;return e!==t.wasValid&&(t.wasValid=e,t.fireEvent("validitychange",t,e)),e},batchChanges:function(e){try{this.suspendCheckChange++,e()}catch(t){throw t}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return!1},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(e,t){t&&this.validate()},privates:{resetToInitialValue:function(){var e=this,t=e.originalValue;e.originalValue=e.initialValue,e.reset(),e.originalValue=t}}},0,0,0,0,0,0,[Ext.form.field,"Field"],0),Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:!0,shrinkWrap:!0,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:!0}],defaultBindProperty:"value",subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:!0,invalidText:"The value in this field is invalid",fieldCls:"x-form-field",focusCls:"form-focus",dirtyCls:"x-form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],
ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:!0,readOnly:!1,readOnlyCls:"x-form-readonly",validateOnBlur:!0,hasFocus:!1,baseCls:"x-field",fieldBodyCls:"x-field-body",maskOnDisable:!1,stretchInputElFixed:!0,initComponent:function(){var e=this;Ext.Component.prototype.initComponent.call(this),e.subTplData=e.subTplData||{},e.initLabelable(),e.initField(),e.name||(e.name=e.getInputId()),e.readOnly&&e.addCls(e.readOnlyCls),e.addCls("x-form-type-"+e.inputType)},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(e){var t,n=this,i=n.inputType,r=n.getInputId();return t=Ext.apply({ui:n.ui,id:r,cmpId:n.id,name:n.name||r,disabled:n.disabled,readOnly:n.readOnly,value:n.getRawValue(),type:i,fieldCls:n.fieldCls,fieldStyle:n.getFieldStyle(),childElCls:e.childElCls,tabIdx:n.tabIndex,inputCls:n.inputCls,typeCls:"x-form-"+(n.isTextInput?"text":i),role:n.ariaRole},n.subTplData),n.getInsertionRenderData(t,n.subTplInsertions),t},getSubTplMarkup:function(e){var t=this,n=t.getSubTplData(e),i=t.getTpl("preSubTpl"),r=t.getTpl("postSubTpl"),o="";return i&&(o+=i.apply(n)),o+=t.getTpl("fieldSubTpl").apply(n),r&&(o+=r.apply(n)),o},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(e){var t=this,n=t.inputEl;n&&n.applyStyles(e),t.fieldStyle=e},getFieldStyle:function(){var e=this.fieldStyle;return Ext.isObject(e)?Ext.DomHelper.generateStyles(e,null,!0):e||""},onRender:function(){this.callParent(arguments),this.mixins.labelable.self.initTip(),this.renderActiveError()},onFocusLeave:function(e){Ext.Component.prototype.onFocusLeave.call(this,e),this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return"file"===this.inputType},getSubmitData:function(){var e,t=this,n=null;return!t.disabled&&t.submitValue&&(e=t.getSubmitValue(),null!==e&&(n={},n[t.getName()]=e)),n},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var e=this,t=e.inputEl?e.inputEl.getValue():Ext.valueFrom(e.rawValue,"");return e.rawValue=t,t},setRawValue:function(e){var t=this,n=t.rawValue;return t.transformRawValue.$nullFn||(e=t.transformRawValue(e)),e=Ext.valueFrom(e,""),(void 0===n||n!==e||t.valueContainsPlaceholder)&&(t.rawValue=e,t.inputEl&&(t.bindChangeEvents(!1),t.inputEl.dom.value=e,t.bindChangeEvents(!0)),t.rendered&&t.reference&&t.publishState("rawValue",e)),e},transformRawValue:Ext.identityFn,valueToRaw:function(e){return""+Ext.valueFrom(e,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var e=this,t=e.rawToValue(e.processRawValue(e.getRawValue()));return e.value=t,t},setValue:function(e){var t=this;return t.setRawValue(t.valueToRaw(e)),t.mixins.field.setValue.call(t,e)},onBoxReady:function(){var e=this;Ext.Component.prototype.onBoxReady.apply(this,arguments),e.setReadOnlyOnBoxReady&&e.setReadOnly(e.readOnly)},onDisable:function(){var e=this,t=e.inputEl;Ext.Component.prototype.onDisable.call(this),t&&(t.dom.disabled=!0,e.hasActiveError()&&(e.clearInvalid(),e.hadErrorOnDisable=!0)),e.wasValid===!1&&e.checkValidityChange(!0)},onEnable:function(){var e,t=this,n=t.inputEl,i=t.preventMark;Ext.Component.prototype.onEnable.call(this),n&&(n.dom.disabled=!1),void 0!==t.wasValid&&(t.forceValidation=!0,t.preventMark=!t.hadErrorOnDisable,e=t.isValid(),t.forceValidation=!1,t.preventMark=i,t.checkValidityChange(e)),delete t.hadErrorOnDisable},setReadOnly:function(e){var t=this,n=t.inputEl,i=t.readOnly;e=!!e,t[e?"addCls":"removeCls"](t.readOnlyCls),t.readOnly=e,n?n.dom.readOnly=e:t.rendering&&(t.setReadOnlyOnBoxReady=!0),e!==i&&t.fireEvent("writeablechange",t,e)},fireKey:function(e){e.isSpecialKey()&&this.fireEvent("specialkey",this,e)},initEvents:function(){var e,t,n=this,i=n.inputEl,r=n.onFieldMutation,o=n.checkChangeEvents,a=o.length;if(i)for(n.mon(i,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",n.fireKey,n),e=0;a>e;++e)t=o[e],"propertychange"===t&&(n.usesPropertychange=!0),"textInput"===t&&(n.usesTextInput=!0),n.mon(i,t,r,n);Ext.Component.prototype.initEvents.call(this)},onFieldMutation:function(e){var t=this,n=t.checkChangeTask;t.readOnly||"propertychange"===e.type&&t.ignoreChangeRe.test(e.browserEvent.propertyName)||(n||(t.checkChangeTask=n=new Ext.util.DelayedTask(t.doCheckChangeTask,t)),t.bindNotifyListener||(t.bindNotifyListener=Ext.on("beforebindnotify",t.onBeforeNotify,t,{destroyable:!0})),n.delay(t.checkChangeBuffer))},doCheckChangeTask:function(){var e=this.bindNotifyListener;e&&(e.destroy(),this.bindNotifyListener=null),this.checkChange()},publishValue:function(){var e=this;e.rendered&&!e.getErrors().length&&e.publishState("value",e.getValue())},onDirtyChange:function(e){var t=this;t[e?"addCls":"removeCls"](t.dirtyCls),t.rendered&&t.reference&&t.publishState("dirty",e)},isValid:function(){var e=this,t=e.disabled,n=e.forceValidation||!t;return n?e.validateValue(e.processRawValue(e.getRawValue())):t},validateValue:function(e){var t=this,n=t.getErrors(e),i=Ext.isEmpty(n);return t.preventMark||(i?t.clearInvalid():t.markInvalid(n)),i},markInvalid:function(e){var t,n=this,i=n.getActiveError();n.setActiveErrors(Ext.Array.from(e)),t=n.getActiveError(),i!==t&&n.setError(t)},clearInvalid:function(){var e=this,t=e.hasActiveError();delete e.hadErrorOnDisable,e.unsetActiveError(),t&&e.setError("")},setError:function(e){var t,n=this,i=n.msgTarget;n.rendered&&("title"===i||"qtip"===i?(t="qtip"===i?"data-errorqtip":"title",n.getActionEl().dom.setAttribute(t,e||"")):n.updateLayout())},renderActiveError:function(){var e=this,t=e.hasActiveError(),n=e.invalidCls+"-field";e.inputEl&&e.inputEl[t?"addCls":"removeCls"]([n,n+"-"+e.ui]),e.mixins.labelable.renderActiveError.call(e)},beforeDestroy:function(){var e=this,t=e.checkChangeTask;t&&t.cancel(),e.checkChangeTask=e.bindNotifyListener=Ext.destroy(e.bindNotifyListener),Ext.Component.prototype.beforeDestroy.call(this)},privates:{applyBind:function(e,t){var n,i,r=this,o=t&&t.value;return n=Ext.Component.prototype.applyBind.call(this,e,t),i=n.value,r.hasBindingValue=!!i,i!==o&&r.getInherited().modelValidation&&r.updateValueBinding(n),n},applyRenderSelectors:function(){var e=this;Ext.Component.prototype.applyRenderSelectors.call(this),e.inputEl||(e.inputEl=e.el.getById(e.getInputId()))},bindChangeEvents:function(e){var t=e?"resumeEvent":"suspendEvent",n=this.inputEl;this.usesPropertychange&&n[t]("propertychange"),this.usesTextInput&&n[t]("textInput")},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var e=this;return e.hasOwnProperty("renderTpl")||(e.renderTpl=e.getTpl("labelableRenderTpl")),Ext.Component.prototype.initRenderTpl.call(this)},onBeforeNotify:function(){this.checkChangeTask.cancel(),this.checkChange()},updateValueBinding:function(e){var t=this,n=e.value,i=e.$fieldBinding;i&&(i.destroy(),e.$fieldBinding=null),n&&n.bindValidationField&&(t.fieldBinding=n.bindValidationField("setValidationField",t))}},deprecated:{5:{methods:{doComponentLayout:function(){this.bindChangeEvents(!1),this.callParent(arguments),this.bindChangeEvents(!0)}}}}},0,["field"],["component","box","field"],{component:!0,box:!0,field:!0},["widget.field"],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0),Ext.define("BP.overrides.form.field.Base",{override:"Ext.form.field.Base"}),Ext.cmd.derive("Ext.form.field.Display",Ext.form.field.Base,{alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],ariaRole:"textbox",fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:!0,disableFormats:!0}],focusable:!1,readOnly:!0,fieldCls:"x-form-display-field",fieldBodyCls:"x-form-display-field-body",htmlEncode:!1,noWrap:!1,validateOnChange:!1,initEvents:Ext.emptyFn,submitValue:!1,getValue:function(){return this.value},valueToRaw:function(e){return e||0===e||e===!1?e:""},isDirty:function(){return!1},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(e){var t=this;return e=Ext.valueFrom(e,""),t.rawValue=e,t.rendered&&(t.inputEl.dom.innerHTML=t.getDisplayValue(),t.updateLayout()),e},getDisplayValue:function(){var e,t=this,n=this.getRawValue();return e=t.renderer?t.renderer.call(t.scope||t,n,t):t.htmlEncode?Ext.util.Format.htmlEncode(n):n},getSubTplData:function(){var e=Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments);return e.value=this.getDisplayValue(),e}},0,["displayfield"],["component","box","field","displayfield"],{component:!0,box:!0,field:!0,displayfield:!0},["widget.displayfield"],0,[Ext.form.field,"Display",Ext.form,"DisplayField",Ext.form,"Display"],0),Ext.cmd.derive("Ext.layout.container.Fit",Ext.layout.container.Container,{alternateClassName:"Ext.layout.FitLayout",itemCls:"x-fit-item",type:"fit",manageMargins:!0,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e,t){var n=t||this.owner.getSizeModel(),i=(n.width.shrinkWrap?0:1)|(n.height.shrinkWrap?0:2);return this.sizePolicies[i]},beginLayoutCycle:function(e,t){var n,i,r,o,a,s,l,d,u,c,h=this,p=h.lastHeightModel&&h.lastHeightModel.calculated,f=h.lastWidthModel&&h.lastWidthModel.calculated,g=f||p,m=0,x=0;for(Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments),g&&"TD"!==e.targetContext.el.dom.tagName.toUpperCase()&&(g=f=p=!1),i=e.childItems,a=i.length,r=0;a>r;++r)o=i[r],t&&(n=o.target,l=n.minHeight,d=n.minWidth,(d||l)&&(s=o.marginInfo||o.getMarginInfo(),l+=s.height,d+=s.height,l>m&&(m=l),d>x&&(x=d))),g&&(u=o.el.dom.style,p&&(u.height=""),f&&(u.width=""));t&&(e.maxChildMinHeight=m,e.maxChildMinWidth=x),n=e.target,e.overflowX=!e.widthModel.shrinkWrap&&e.maxChildMinWidth&&n.scrollFlags.x||c,e.overflowY=!e.heightModel.shrinkWrap&&e.maxChildMinHeight&&n.scrollFlags.y||c},calculate:function(e){var t,n,i,r,o,a,s=this,l=e.childItems,d=l.length,u=s.getContainerSize(e),c={length:d,ownerContext:e,targetSize:u},h=e.widthModel.shrinkWrap,p=e.heightModel.shrinkWrap,f=e.overflowX,g=e.overflowY;if(e.state.info=c,(f||g)&&(t=s.getScrollbarsNeeded(f&&u.width,g&&u.height,e.maxChildMinWidth,e.maxChildMinHeight),t&&(n=Ext.getScrollbarSize(),1&t&&(u.height-=n.height),2&t&&(u.width-=n.width))),d>0)for(r=0;d>r;++r)c.index=r,s.fitItem(l[r],c);else c.contentWidth=c.contentHeight=0;(p||h)&&(i=e.targetContext.getPaddingInfo(),h&&(g&&!u.gotHeight?s.done=!1:(o=c.contentWidth+i.width,2&t&&(o+=n.width),e.setContentWidth(o)||(s.done=!1))),p&&(f&&!u.gotWidth?s.done=!1:(a=c.contentHeight+i.height,1&t&&(a+=n.height),e.setContentHeight(a)||(s.done=!1))))},fitItem:function(e,t){var n=this;return e.invalid?void(n.done=!1):(t.margins=e.getMarginInfo(),t.needed=t.got=0,n.fitItemWidth(e,t),n.fitItemHeight(e,t),void(t.got!==t.needed&&(n.done=!1)))},fitItemWidth:function(e,t){var n,i;if(t.ownerContext.widthModel.shrinkWrap)i=e.getProp("width")+t.margins.width,n=t.contentWidth,void 0===n?t.contentWidth=i:t.contentWidth=Math.max(n,i);else if(e.widthModel.calculated){if(++t.needed,!t.targetSize.gotWidth)return;++t.got,this.setItemWidth(e,t)}this.positionItemX(e,t)},fitItemHeight:function(e,t){var n,i;if(t.ownerContext.heightModel.shrinkWrap)i=e.getProp("height")+t.margins.height,n=t.contentHeight,void 0===n?t.contentHeight=i:t.contentHeight=Math.max(n,i);else if(e.heightModel.calculated){if(++t.needed,!t.targetSize.gotHeight)return;++t.got,this.setItemHeight(e,t)}this.positionItemY(e,t)},positionItemX:function(e,t){var n=t.margins;(t.index||n.left)&&e.setProp("x",n.left),n.width&&e.setProp("margin-right",n.width)},positionItemY:function(e,t){var n=t.margins;(t.index||n.top)&&e.setProp("y",n.top),n.height&&e.setProp("margin-bottom",n.height)},setItemHeight:function(e,t){e.setHeight(t.targetSize.height-t.margins.height)},setItemWidth:function(e,t){e.setWidth(t.targetSize.width-t.margins.width)}},0,0,0,0,["layout.fit"],0,[Ext.layout.container,"Fit",Ext.layout,"FitLayout"],0),Ext.cmd.derive("Ext.panel.Table",Ext.panel.Panel,{extraBaseCls:"x-grid",extraBodyCls:"x-grid-body",defaultBindProperty:"store",layout:"fit",ariaRole:"grid",config:{selection:null},publishes:["selection"],twoWayBindable:["selection"],autoLoad:!1,variableRowHeight:!1,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:!1,viewType:null,deferRowRender:!1,sortableColumns:!0,multiColumnSort:!1,enableLocking:!1,scrollerOwner:!0,enableColumnMove:!0,sealedColumns:!1,enableColumnResize:!0,rowLines:!0,bufferedRenderer:!0,ownerGrid:null,colLinesCls:"x-grid-with-col-lines",rowLinesCls:"x-grid-with-row-lines",noRowLinesCls:"x-grid-no-row-lines",hiddenHeaderCtCls:"x-grid-header-ct-hidden",hiddenHeaderCls:"x-grid-header-hidden",resizeMarkerCls:"x-grid-resize-marker",emptyCls:"x-grid-empty",focusable:!0,constructor:function(e){var t,n=this;n.ownerGrid=e&&e.ownerGrid||n,Ext.panel.Panel.prototype.constructor.call(this,e),t=this.store,t.trackStateChanges=!0,n.autoLoad&&(t.unblockLoad(),t.load())},initComponent:function(){var e,t,n,i,r,o,a=this,s=a.columns||a.colModel||[],l=a.store=Ext.data.StoreManager.lookup(a.store||"ext-empty-store");if(a.enableLocking=a.enableLocking||a.hasLockedColumns(s),a.autoLoad&&a.store.blockLoad(),a.plugins&&(a.plugins=a.constructPlugins()),a.columnLines&&a.addBodyCls(a.colLinesCls),a.addBodyCls(a.rowLines?a.rowLinesCls:a.noRowLinesCls),a.addBodyCls(a.extraBodyCls),a.enableLocking?(a.self.mixin("lockable",Ext.grid.locking.Lockable),a.injectLockable()):(s.isRootHeader?(a.hideHeaders&&(s.setHeight(0),s.hiddenHeaders=!0),a.headerCt=s,a.headerCt.grid=a,a.headerCt.forceFit=!!a.forceFit,a.columnManager=s.columnManager,a.visibleColumnManager=s.visibleColumnManager):(Ext.isArray(s)&&(s={items:s}),Ext.apply(s,{grid:a,forceFit:a.forceFit,sortable:a.sortableColumns,enableColumnMove:a.enableColumnMove,enableColumnResize:a.enableColumnResize,columnLines:a.columnLines,sealed:a.sealedColumns}),a.hideHeaders&&(s.height=0,s.hiddenHeaders=!0),Ext.isDefined(a.enableColumnHide)&&(s.enableColumnHide=a.enableColumnHide),a.headerCt=new Ext.grid.header.Container(s)),a.headerCt.setScrollable({x:!1,y:!1})),a.columns=r=a.headerCt.getGridColumns(),a.scrollTask=new Ext.util.DelayedTask(a.syncHorizontalScroll,a),a.cls=(a.cls||"")+(" "+a.extraBaseCls),delete a.autoScroll,i=a.plugins&&Ext.Array.findBy(a.plugins,function(e){return e.isBufferedRenderer}),i&&(a.bufferedRenderer=i),!a.hasView){if(l.isBufferedStore&&!l.getRemoteSort())for(t=0,n=r.length;n>t;t++)r[t].sortable=!1;a.hideHeaders&&(a.headerCt.addCls(a.hiddenHeaderCtCls),a.addCls(a.hiddenHeaderCls)),a.relayHeaderCtEvents(a.headerCt),a.features=a.features||[],Ext.isArray(a.features)||(a.features=[a.features]),a.dockedItems=[].concat(a.dockedItems||[]),a.dockedItems.unshift(a.headerCt),a.viewConfig=a.viewConfig||{},e=a.getView(),a.items=[e],a.hasView=!0,a.hideHeaders||(o=e.getScrollable(),o&&a.headerCt.getScrollable().addPartner(o,"x")),a.bindStore(l,!0),a.mon(e,{viewready:a.onViewReady,refresh:a.onRestoreHorzScroll,scope:a})}a.selModel=a.view.getSelectionModel(),a.selModel.isRowModel&&a.selModel.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection}),a.relayEvents(a.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforeitemkeyup","itemkeyup","beforeitemkeypress","itemkeypress","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","beforecontainerkeyup","beforecontainerkeypress","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","containerkeyup","containerkeypress","selectionchange","beforeselect","select","beforedeselect","deselect"]),Ext.panel.Panel.prototype.initComponent.apply(this,arguments),a.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},beforeRender:function(){var e=this,t=e.bufferedRenderer;e.lockable||(t&&e.getSizeModel().height.auto&&(e.bufferedRenderer=t=!1),t&&!t.isBufferedRenderer&&(t={xclass:"Ext.grid.plugin.BufferedRenderer"},Ext.copyTo(t,e,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer"),e.bufferedRenderer=e.addPlugin(t))),Ext.panel.Panel.prototype.beforeRender.apply(this,arguments)},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getHeaderContainer().getGridColumns()},getVisibleColumns:function(){return this.getHeaderContainer().getVisibleGridColumns()},focus:function(){this.getView().focus()},disableColumnHeaders:function(){this.headerCt.disable()},enableColumnHeaders:function(){this.headerCt.enable()},hasLockedColumns:function(e){var t,n,i;for(e.isRootHeader?e=e.items.items:Ext.isObject(e)&&(e=e.items),t=0,n=e.length;n>t;t++)if(i=e[t],!i.processed&&i.locked)return!0},relayHeaderCtEvents:function(e){this.relayEvents(e,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var e=this,t=Ext.panel.Panel.prototype.getState.call(this),n=e.store.getState();return t=e.addPropertyToState(t,"columns",e.headerCt.getColumnsState()),n&&(t.storeState=n),t},applyState:function(e){var t=this,n=e.sort,i=e.storeState,r=t.store,o=e.columns;delete e.columns,Ext.panel.Panel.prototype.applyState.apply(this,arguments),o&&t.headerCt.applyColumnsState(o),n?r.getRemoteSort()?r.sort({property:n.property,direction:n.direction,root:n.root},null,!1):r.sort(n.property,n.direction):i&&r.applyState(i)},getStore:function(){return this.store},getView:function(){var e,t,n,i=this;return i.view||(n=i.viewConfig,e=n.scroll||i.scroll,t=i.scrollable,null==t&&null==n.scrollable&&null!==e&&(e===!0||"both"===e?t=!0:e===!1||"none"===e?t=!1:"vertical"===e?t={x:!1,y:!0}:"horizontal"===e&&(t={x:!0,y:!1})),n=Ext.apply({grid:i,ownerGrid:i.ownerGrid,deferInitialRefresh:i.deferRowRender,variableRowHeight:i.variableRowHeight,preserveScrollOnRefresh:!0,trackOver:i.trackMouseOver!==!1,throttledUpdate:i.throttledUpdate===!0,xtype:i.viewType,store:i.store,headerCt:i.headerCt,columnLines:i.columnLines,rowLines:i.rowLines,navigationModel:"grid",features:i.features,panel:i,emptyText:i.emptyText||""},i.viewConfig),null!=t&&(n.scrollable=t,i.scrollable=null),Ext.create(n),i.view.emptyText&&(i.view.emptyText='<div class="'+i.emptyCls+'">'+i.view.emptyText+"</div>"),i.view.getComponentLayout().headerCt=i.headerCt,i.mon(i.view,{uievent:i.processEvent,scope:i}),i.headerCt.view=i.view,i.hasListeners.viewcreated&&i.fireEvent("viewcreated",i,i.view)),i.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,applyScrollable:function(e){return this.view&&this.view.setScrollable(e),e},getScrollable:function(){return null},processEvent:function(e,t,n,i,r,o){var a=o.position.column;return a?a.processEvent.apply(a,arguments):void 0},ensureVisible:function(e,t){this.doEnsureVisible(e,t)},scrollByDeltaY:function(e,t){this.getView().scrollBy(0,e,t)},scrollByDeltaX:function(e,t){this.getView().scrollBy(e,0,t)},afterCollapse:function(){this.saveScrollPos(),Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){Ext.panel.Panel.prototype.afterExpand.apply(this,arguments),this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){var e,t=this.view.getScrollable();t&&(e=t.getSize(),e&&t.setSize({x:this.headerCt.getTableWidth(),y:e.y}))},onHeaderMove:function(e,t,n,i,r){var o=this;o.optimizedColumnMove===!1?o.view.refreshView():o.view.moveColumn(i,r,n),o.delayScroll()},onHeaderHide:function(e){var t=this.view;!e.childHideCount&&t.refreshCounter&&t.refreshView()},onHeaderShow:function(){var e=this.view;e.refreshCounter&&e.refreshView()},onHeadersChanged:function(){var e=this;e.rendered&&!e.reconfiguring&&(e.view.refreshView(),e.delayScroll())},delayScroll:function(){var e=this.view;e&&this.scrollTask.delay(10,null,null,[e])},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var e=this,t=e.scrollXPos;t&&e.syncHorizontalScroll(e,!0)},getScrollerOwner:function(){var e=this;return this.scrollerOwner||(e=this.up("[scrollerOwner]")),e},getLhsMarker:function(){var e=this;return e.lhsMarker||(e.lhsMarker=Ext.DomHelper.append(e.el,{role:"presentation",cls:e.resizeMarkerCls},!0))},getRhsMarker:function(){var e=this;return e.rhsMarker||(e.rhsMarker=Ext.DomHelper.append(e.el,{role:"presentation",cls:e.resizeMarkerCls},!0))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(e){var t,n=this;n.ignoreNextSelection||(n.ignoreNextSelection=!0,t=n.getSelectionModel(),e?t.select(e):t.deselectAll(),n.ignoreNextSelection=!1)},updateBindSelection:function(e,t){var n=this,i=null;n.ignoreNextSelection||(n.ignoreNextSelection=!0,t.length&&(i=e.getLastSelected(),n.hasHadSelection=!0),n.hasHadSelection&&n.setSelection(i),n.ignoreNextSelection=!1)},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){return this.getView().getSelectionModel()},getScrollTarget:function(){var e=this.getScrollerOwner().query("tableview");return e[e.length-1]},syncHorizontalScroll:function(e,t){var n,i=this,r=i.view.getScrollX();t=t===!0,i.rendered&&(t||r!==i.scrollXPos)&&(t&&(n=i.getScrollTarget(),n.setScrollX(r)),i.headerCt.setScrollX(r),i.scrollXPos=r)},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(e){var t=this,n=t.getView();e?(t.store=e,n.store!==e&&n.bindStore(e,!1),t.mon(e,{load:t.onStoreLoad,scope:t}),t.storeRelayers=t.relayEvents(e,["filterchange","groupchange"])):t.unbindStore()},unbindStore:function(){var e,t=this,n=t.store;n&&(t.store=null,t.mun(n,{load:t.onStoreLoad,scope:t}),Ext.destroy(t.storeRelayers),e=t.view,e.store&&e.bindStore(null))},setColumns:function(e){(e.length||this.getColumnManager().getColumns().length)&&this.reconfigure(void 0,e)},setStore:function(e){this.reconfigure(e)},reconfigure:function(e,t){var n,i,r=this,o=r.store,a=r.headerCt,s=r.lockable,l=a?a.items.getRange():r.columns,d=r.getView();1===arguments.length&&Ext.isArray(e)&&(t=e,e=null),t&&(t=Ext.Array.slice(t)),r.reconfiguring=!0,e&&(e=Ext.StoreManager.lookup(e)),r.fireEvent("beforereconfigure",r,e,t,o,l),Ext.suspendLayouts(),s?r.reconfigureLockable(e,t):(n=d.blockRefresh,d.blockRefresh=!0,e&&e!==o&&(r.unbindStore(),r.bindStore(e)),t&&(delete r.scrollXPos,a.removeAll(),a.add(t)),d.blockRefresh=n,i=d.refreshCounter),Ext.resumeLayouts(!0),s?r.afterReconfigureLockable():d.refreshCounter===i&&d.refreshView(),r.fireEvent("reconfigure",r,e,t,o,l),delete r.reconfiguring},beforeDestroy:function(){var e=this,t=e.scrollTask;t&&(t.cancel(),e.scrollTask=null),Ext.destroy(e.focusEnterLeaveListeners),Ext.panel.Panel.prototype.beforeDestroy.call(this)},onDestroy:function(){var e=this;e.lockable&&e.destroyLockable(),e.unbindStore(),Ext.panel.Panel.prototype.onDestroy.call(this),e.columns=e.storeRelayers=e.columnManager=e.visibleColumnManager=null},destroy:function(){var e=this;Ext.panel.Panel.prototype.destroy.call(this),e.isDestroyed&&(e.view=e.selModel=e.headerCt=null)},privates:{initFocusableElement:function(){},doEnsureVisible:function(e,t){if(this.lockable)return this.ensureLockedVisible(e,t);"number"==typeof e||e.isEntity||(e=this.store.getById(e));var n,i,r,o,a,s,l=this,d=l.getView(),u=d.getNode(e);l.rendered&&d.refreshCounter&&(t&&(n=t.callback,i=t.scope,r=t.animate,o=t.highlight,a=t.select,s=t.focus),u?(d.getScrollable().scrollIntoView(u,null,r,o),e.isEntity||(e=d.getRecord(u)),a&&d.getSelectionModel().select(e),s&&d.getNavigationModel().setPosition(e,0),Ext.callback(n,i||l,[!0,e,u])):d.bufferedRenderer?d.bufferedRenderer.scrollTo(e,{animate:r,highlight:o,select:a,focus:s,callback:function(e,t,r){Ext.callback(n,i||l,[!0,t,r])}}):Ext.callback(n,i||l,[!1,null]))},getFocusEl:function(){return this.getView().getFocusEl()}}},1,["tablepanel"],["component","box","container","panel","tablepanel"],{component:!0,box:!0,container:!0,panel:!0,tablepanel:!0},["widget.tablepanel"],0,[Ext.panel,"Table"],0),Ext.cmd.derive("Ext.selection.Model",Ext.mixin.Observable,{alternateClassName:"Ext.AbstractSelectionModel",factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:!1,$configStrict:!1,config:{store:null,selected:{}},isSelectionModel:!0,allowDeselect:void 0,toggleOnClick:!0,selected:null,pruneRemoved:!0,suspendChange:0,ignoreRightMouseSelection:!1,constructor:function(e){var t=this;t.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0},Ext.mixin.Observable.prototype.constructor.call(this,e),t.setSelectionMode(t.mode),"SINGLE"!==t.selectionMode&&(t.allowDeselect=!0)},updateStore:function(e,t){this.bindStore(e,!t)},applySelected:function(e){return e.isCollection||(e=new Ext.util.Collection(Ext.apply({rootProperty:"data"},e))),e},onBindStore:function(e,t){var n=this;n.mixins.storeholder.onBindStore.call(n,[e,t]),e&&!n.preventRefresh&&n.refresh()},getStoreListeners:function(){var e=this;return{add:e.onStoreAdd,clear:e.onStoreClear,remove:e.onStoreRemove,update:e.onStoreUpdate,idchanged:e.onIdChanged,load:e.onStoreLoad,refresh:e.onStoreRefresh,pageadd:e.onPageAdd,pageremove:e.onPageRemove}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){this.suspendChange&&--this.suspendChange},selectAll:function(e){var t=this,n=t.store.getRange(),i=t.getSelection().length;t.suspendChanges(),t.doSelect(n,!0,e),t.resumeChanges(),e||t.isDestroyed||t.maybeFireSelectionChange(t.getSelection().length!==i)},deselectAll:function(e){var t,n,i,r=this,o=r.getSelection(),a={},s=r.store,l=o.length;for(t=0,n=o.length;n>t;t++)i=o[t],a[i.id]=s.indexOf(i);o=Ext.Array.sort(o,function(e,t){var n=a[e.id],i=a[t.id];return i>n?-1:1}),r.suspendChanges(),r.doDeselect(o,e),r.resumeChanges(),e||r.isDestroyed||r.maybeFireSelectionChange(r.getSelection().length!==l)},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(e){this.selectionStart=e},selectWithEvent:function(e,t){var n=this,i=n.isSelected(e),r=t.shiftKey;switch(n.selectionMode){case"MULTI":n.selectWithEventMulti(e,t,i);break;case"SIMPLE":n.selectWithEventSimple(e,t,i);break;case"SINGLE":n.selectWithEventSingle(e,t,i)}r||(n.isSelected(e)?n.selectionStart=e:n.selectionStart=null)},vetoSelection:function(e){return"keydown"===e.type||0===e.button?"mousedown"===e.type:this.ignoreRightMouseSelection||this.isSelected(e.record)?!0:void 0},onNavigate:function(e){if(e.record&&!this.vetoSelection(e.keyEvent)){this.onBeforeNavigate(e);var t=this,n=e.keyEvent,i=n.ctrlKey||e.ctrlKey,r=e.recordIndex,o=e.record,a=e.previousRecord,s=t.isSelected(o),l=t.selectionStart&&t.isSelected(e.previousRecord)?t.selectionStart:t.selectionStart=e.previousRecord,d=e.previousRecordIndex,u=n.getCharCode(),c=u===n.SPACE,h=u===n.UP||u===n.PAGE_UP?"up":u===n.DOWN||u===n.DOWN?"down":null;switch(t.selectionMode){case"MULTI":t.setSelectionStart(e.selectionStart),u===n.A&&i?(t.selected.beginUpdate(),t.selectRange(0,t.store.getCount()-1),t.selected.endUpdate()):c?n.shiftKey?t.selectRange(l,o,i):s?t.allowDeselect&&t.doDeselect(o):t.doSelect(o,i):n.shiftKey&&l?("up"===h&&r>=d?t.deselectRange(a,r+1):"down"===h&&d>=r?t.deselectRange(a,r-1):l!==o&&t.selectRange(l,o,i),t.lastSelected=o):u?i||t.doSelect(o,!1):t.selectWithEvent(o,n);break;case"SIMPLE":u===n.A&&i?(t.selected.beginUpdate(),t.selectRange(0,t.store.getCount()-1),t.selected.endUpdate()):s?t.doDeselect(o):t.doSelect(o,!0);break;case"SINGLE":h?i||t.doSelect(o,!1):s?t.allowDeselect&&t.doDeselect(o):t.doSelect(o)}n.shiftKey||t.isDestroyed||t.isSelected(o)&&(t.selectionStart=o)}},selectRange:function(e,t,n){var i,r,o,a,s,l,d,u=this,c=u.store,h=u.selected.items;if(!u.isLocked()){for(i=u.normalizeRowRange(e,t),e=i[0],t=i[1],a=[],r=e;t>=r;r++)u.isSelected(c.getAt(r))||a.push(c.getAt(r));if(!n){for(s=[],u.suspendChanges(),r=0,o=h.length;o>r;++r)d=h[r],l=c.indexOf(d),(e>l||l>t)&&s.push(d);for(r=0,o=s.length;o>r;++r)u.doDeselect(s[r]);u.resumeChanges()}u.isDestroyed||(a.length?u.doMultiSelect(a,!0):s&&u.maybeFireSelectionChange(s.length>0))}},deselectRange:function(e,t){var n,i,r,o,a=this,s=a.store;if(!a.isLocked()){for(n=a.normalizeRowRange(e,t),e=n[0],t=n[1],r=[],i=e;t>=i;i++)o=s.getAt(i),a.isSelected(o)&&r.push(o);r.length&&a.doDeselect(r)}},normalizeRowRange:function(e,t){var n,i=this.store;return Ext.isNumber(e)||(e=i.indexOf(e)),e=Math.max(0,e),Ext.isNumber(t)||(t=i.indexOf(t)),t=Math.min(t,i.getCount()-1),e>t&&(n=t,t=e,e=n),[e,t]},select:function(e,t,n){!Ext.isDefined(e)||Ext.isArray(e)&&!e.length||this.doSelect(e,t,n)},deselect:function(e,t){this.doDeselect(e,t)},doSelect:function(e,t,n){var i,r=this;if(!r.locked){if("number"==typeof e){if(i=r.store.getAt(e),!i)return;e=[i]}"SINGLE"===r.selectionMode&&e?(i=e.length?e[0]:e,r.doSingleSelect(i,n)):r.doMultiSelect(e,t,n)}},doMultiSelect:function(e,t,n){var i,r,o,a,s,l=this,d=l.selected,u=!1;if(!l.locked){if(e=Ext.isArray(e)?e:[e],o=e.length,!t&&d.getCount()>0){if(i=l.deselectDuringSelect(e,n),l.isDestroyed)return;if(i[0])return void l.maybeFireSelectionChange(i[1]>0&&!n);u=i[1]>0}for(s=function(){d.getCount()||(l.selectionStart=a),d.add(a),u=!0},r=0;o>r;r++)if(a=e[r],!l.isSelected(a)&&(l.onSelectChange(a,!0,n,s),l.isDestroyed))return;l.lastSelected=a,l.maybeFireSelectionChange(u&&!n)}},deselectDuringSelect:function(e,t){var n,i,r=this,o=r.selected.getRange(),a=o.length,s=0,l=!1;for(r.suspendChanges(),r.deselectingDuringSelect=!0,i=0;a>i;++i)if(n=o[i],Ext.Array.contains(e,n)||(r.doDeselect(n,t)?++s:l=!0),r.isDestroyed){l=!0,s=0;break}return r.deselectingDuringSelect=!1,r.resumeChanges(),[l,s]},doDeselect:function(e,t){var n,i,r,o=this,a=o.selected,s=0,l=0,d=0;if(o.locked||!o.store)return!1;if("number"==typeof e){if(i=o.store.getAt(e),!i)return!1;e=[i]}else Ext.isArray(e)||(e=[e]);for(r=function(){++d,a.remove(i),i===o.selectionStart&&(o.selectionStart=null)},n=e.length,o.suspendChanges();n>s;s++)if(i=e[s],o.isSelected(i)&&(o.lastSelected===i&&(o.lastSelected=a.last()),++l,o.onSelectChange(i,!1,t,r),o.isDestroyed))return!1;return o.resumeChanges(),o.maybeFireSelectionChange(d>0&&!t),d===l},doSingleSelect:function(e,t){var n,i=this,r=!1,o=i.selected;i.locked||i.isSelected(e)||(n=function(){if(o.getCount()){i.suspendChanges();var n=i.deselectDuringSelect([e],t);if(i.isDestroyed)return;if(i.resumeChanges(),n[0])return!1}i.lastSelected=e,o.getCount()||(i.selectionStart=e),o.add(e),r=!0},i.onSelectChange(e,!0,t,n),r&&!i.isDestroyed&&i.maybeFireSelectionChange(!t))},maybeFireSelectionChange:function(e){var t=this;e&&!t.suspendChange&&t.fireEvent("selectionchange",t,t.getSelection());
},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(e){e=e?e.toUpperCase():"SINGLE",this.selectionMode=this.modes[e]?e:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(e){this.locked=!!e},isRangeSelected:function(e,t){var n,i,r=this,o=r.store;for(i=r.normalizeRowRange(e,t),e=i[0],t=i[1],n=e;t>=n;n++)if(!r.isSelected(o.getAt(n)))return!1;return!0},isSelected:function(e){return e=Ext.isNumber(e)?this.store.getAt(e):e,this.selected.contains(e)},hasSelection:function(){var e=this.getSelected();return!(!e||!e.getCount())},refresh:function(){var e,t,n,i,r,o,a=this,s=a.store,l=[],d=[],u=a.getSelection(),c=u.length,h=a.getSelected();if(s&&(h.isCollection||h.isRows)&&h.getCount()){for(n=s.getData(),n.getSource&&(t=n.getSource(),t&&(n=t)),a.refreshing=!0,h.beginUpdate(),a.suspendChanges(),o=0;c>o&&(i=u[o],r=n.get(i.getId()),r?l.push(r):a.pruneRemoved||d.push(i),"SINGLE"!==a.mode||!d.length);o++);h.getCount()!==l.length+d.length&&(e=!0),a.clearSelections(),l.length&&a.doSelect(l,!1,!0),d.length&&(h.add(d),a.lastSelected||(a.lastSelected=d[d.length-1])),a.resumeChanges(),e?h.endUpdate():h.updating--,a.refreshing=!1,a.maybeFireSelectionChange(e)}},clearSelections:function(){var e=this.getSelected();e&&e.clear(),this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){!this.store.isLoading()&&this.hasSelection()&&(this.clearSelections(),this.maybeFireSelectionChange(!0))},onStoreRemove:function(e,t,n,i){var r,o,a,s,l=this,d=t;if(l.selectionStart&&Ext.Array.contains(t,l.selectionStart)&&(l.selectionStart=null),!i&&!l.locked&&l.pruneRemoved){if(s=e.isMoving(null,!0))for(d=null,r=0,o=t.length;o>r;++r)a=t[r],s[a.id]||(d||(d=[])).push(a);d&&l.deselect(d)}},onPageRemove:function(e,t,n){this.onStoreRemove(this.store,n)},onPageAdd:function(e,t,n){var i,r,o=n.length;for(i=0;o>i;i++)r=n[i],this.selected.get(r.id)&&this.selected.replace(r)},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var e=this;e.clearListeners(),e.clearSelections(),e.bindStore(null),e.selected=Ext.destroy(e.selected),Ext.mixin.Observable.prototype.destroy.call(this)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(e,t,n){this.selected.updateKey(t,n)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(e){var t,n,i,r,o,a,s=this,l=s.getStore(),d=s.lastSelected,u=0,c=s.pruneRemovedOnRefresh();if(!l.isBufferedStore){for(t=e.getRange(),n=t.length,d&&(s.lastSelected=l.getById(d.id),a=s.lastSelected!==d),s.refreshing=!0,i=0;n>i;++i)r=t[i],o=l.getById(r.id),o?o!==r&&e.replace(o):c&&(e.remove(r),++u);s.refreshing=!1,s.maybeFireSelectionChange(u>0),a&&s.fireEvent("lastselectedchanged",s,s.getSelection(),s.lastSelected)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(e,t,n,i){var r=this,o=t?"select":"deselect";(n||r.fireEvent("before"+o,r,e))!==!1&&i()!==!1&&(n||r.fireEvent(o,r,e))},onEditorKey:Ext.emptyFn,beforeViewRender:function(e){Ext.Array.include(this.views||(this.views=[]),e)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(e){var t,n=this.view;return n&&(t=n.resolveSatelliteListenerScope(this,e)),t||Ext.mixin.Observable.prototype.resolveListenerScope.call(this,e)},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,selectWithEventMulti:function(e,t,n){var i,r,o,a=this,s=t.shiftKey,l=t.ctrlKey,d=s?a.getSelectionStart():null,u=a.getSelection(),c=u.length;if(s&&d)a.selectRange(d,e,l);else if(l&&n)a.allowDeselect&&a.doDeselect(e,!1);else if(l)a.doSelect(e,!0,!1);else if(n&&!s&&!l&&c>1){if(a.allowDeselect){for(i=[],r=0;c>r;++r)o=u[r],o!==e&&i.push(o);a.doDeselect(i)}}else n||a.doSelect(e,!1)},selectWithEventSimple:function(e,t,n){n?this.doDeselect(e):this.doSelect(e,!0)},selectWithEventSingle:function(e,t,n){var i=this,r=i.allowDeselect;r&&!t.ctrlKey&&(r=i.toggleOnClick),r&&n?i.doDeselect(e):i.doSelect(e,!1)}}},1,0,0,0,["selection.abstract"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0),Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:!0,bindComponent:function(e){var t,n=this;n.view!==e&&(n.view&&(n.navigationModel=null,Ext.destroy(n.viewListeners,n.navigationListeners)),n.view=e,e&&(t=n.getViewListeners(),t.scope=n,t.destroyable=!0,n.navigationModel=e.getNavigationModel(),n.viewListeners=e.on(t),n.navigationListeners=n.navigationModel.on({navigate:n.onNavigate,scope:n,destroyable:!0})))},getViewListeners:function(){var e=this,t={};return t[e.view.triggerCtEvent]=e.onContainerClick,t},onUpdate:function(e){var t=this.view;t&&this.isSelected(e)&&t.onItemSelect(e)},onContainerClick:function(){this.deselectOnContainerClick&&this.deselectAll()},onSelectChange:function(e,t,n,i){var r=this,o=r.view,a=t?"select":"deselect",s=r.store.indexOf(e);(n||r.fireEvent("before"+a,r,e,s))!==!1&&i()!==!1&&(o&&(t?o.onItemSelect(e):o.onItemDeselect(e)),n||r.fireEvent(a,r,e,s))},destroy:function(){this.bindComponent(),Ext.destroy(this.keyNav),Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,["selection.dataviewmodel"],0,[Ext.selection,"DataViewModel"],0),Ext.cmd.derive("Ext.view.NavigationModel",Ext.Base,{focusCls:"x-view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(e){this.view!==e&&(this.view=e,this.bindView(e))},bindView:function(e){var t,n=this,i=e.dataSource;n.initKeyNav(e),n.dataSource!==i&&(n.dataSource=i,t=n.getStoreListeners(),t.destroyable=!0,n.dataSourceListeners=e.dataSource.on(t)),t=n.getViewListeners(),t.destroyable=!0,n.viewListeners=n.viewListeners||[],n.viewListeners.push(e.on(t))},getStoreListeners:function(){var e=this;return{clear:e.onStoreClear,remove:e.onStoreRemove,scope:e}},getViewListeners:function(){var e=this;return{containermousedown:e.onContainerMouseDown,itemmousedown:e.onItemMouseDown,itemclick:e.onItemClick,itemcontextmenu:e.onItemMouseDown,scope:e}},initKeyNav:function(e){var t=this;t.keyNav=new Ext.util.KeyNav({target:e,ignoreInputFields:!0,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:t.processViewEvent,up:t.onKeyUp,down:t.onKeyDown,right:t.onKeyRight,left:t.onKeyLeft,pageDown:t.onKeyPageDown,pageUp:t.onKeyPageUp,home:t.onKeyHome,end:t.onKeyEnd,tab:t.onKeyTab,space:t.onKeySpace,enter:t.onKeyEnter,A:{ctrl:!0,handler:t.onSelectAllKeyPress},scope:t})},processViewEvent:function(e,t,n,i,r){return r},addKeyBindings:function(e){this.keyNav.addBindings(e)},enable:function(){this.keyNav.enable(),this.disabled=!1},disable:function(){this.keyNav.disable(),this.disabled=!0},onContainerMouseDown:function(e,t){this.view.containsFocus&&t.preventDefault()},onItemMouseDown:function(e,t,n,i,r){var o=r.parentEvent;o&&"touchstart"===o.type||this.setPosition(i)},onItemClick:function(e,t,n,i,r){this.record===t?this.fireNavigateEvent(r):this.setPosition(i,r)},beforeViewRefresh:function(){this.focusRestorePosition=this.view.dataSource.isBufferedStore?this.recordIndex:this.record},onViewRefresh:function(){null!=this.focusRestorePosition&&(this.setPosition(this.focusRestorePosition),this.focusRestorePosition=null)},onStoreClear:function(){this.setPosition()},onStoreRemove:function(){this.setPosition(this.getRecord(),null,null,!0)},setPosition:function(e,t,n,i){var r,o,a=this,s=a.view,l=s.getSelectionModel(),d=s.dataSource;return null!=e&&s.all.getCount()?"number"==typeof e?(o=Math.max(Math.min(e,d.getCount()-1),0),r=d.getAt(e)):e.isEntity?(r=d.getById(e.id),o=d.indexOf(r),-1===o&&(r=d.getAt(0),o=0)):e.tagName?(r=s.getRecord(e),o=d.indexOf(r)):r=o=null:a.record=a.recordIndex=null,r===a.record?(a.recordIndex=o,a.focusPosition(o)):(a.item&&a.item.removeCls(a.focusCls),a.previousRecordIndex=a.recordIndex,a.previousRecord=a.record,a.previousItem=a.item,a.recordIndex=o,a.record=r,i=i||a.record===a.lastFocused,r?a.focusPosition(a.recordIndex):a.item=null,n||l.fireEvent("focuschange",l,a.previousRecord,a.record),void(!i&&t&&a.fireNavigateEvent(t)))},focusPosition:function(e){var t=this;null!=e&&-1!==e?(e.isEntity&&(e=t.view.dataSource.indexOf(e)),t.item=t.view.all.item(e),t.item?(t.lastFocused=t.record,t.lastFocusedIndex=t.recordIndex,t.focusItem(t.item)):t.record=null):t.item=null},focusItem:function(e){e.addCls(this.focusCls),e.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){return-1===this.view.dataSource.indexOf(this.lastFocused)?null:this.lastFocused},onKeyUp:function(e){var t=this.recordIndex-1;0>t&&(t=this.view.all.getCount()-1),this.setPosition(t,e)},onKeyDown:function(e){var t=this.recordIndex+1;t>this.view.all.getCount()-1&&(t=0),this.setPosition(t,e)},onKeyRight:function(e){var t=this.recordIndex+1;t>this.view.all.getCount()-1&&(t=0),this.setPosition(t,e)},onKeyLeft:function(e){var t=this.recordIndex-1;0>t&&(t=this.view.all.getCount()-1),this.setPosition(t,e)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(e){this.setPosition(0,e)},onKeyEnd:function(e){this.setPosition(this.view.all.getCount()-1,e)},onKeyTab:function(){var e=this.view;return e.toggleChildrenTabbability(!1),!0},onKeySpace:function(e){this.fireNavigateEvent(e)},onKeyEnter:function(e){e.stopEvent(),e.view.fireEvent("itemclick",e.view,e.record,e.item,e.recordIndex,e)},onSelectAllKeyPress:function(e){this.fireNavigateEvent(e)},fireNavigateEvent:function(e){var t=this;t.fireEvent("navigate",{navigationModel:t,keyEvent:e,previousRecordIndex:t.previousRecordIndex,previousRecord:t.previousRecord,previousItem:t.previousItem,recordIndex:t.recordIndex,record:t.record,item:t.item})},destroy:function(){var e=this;Ext.destroy(e.dataSourceListeners,e.viewListeners,e.keyNav),e.keyNav=e.dataSourceListeners=e.viewListeners=e.dataSource=null,e.callParent()}},1,0,0,0,["view.navigation.default"],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.view,"NavigationModel"],0),Ext.define("Ext.rtl.view.NavigationModel",{override:"Ext.view.NavigationModel",initKeyNav:function(e){var t=this,n=t.self.prototype;e.getInherited().rtl&&(t.onKeyLeft=n.onKeyRight,t.onKeyRight=n.onKeyLeft),arguments.callee.$previous.call(this,e)}}),Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{inheritableStatics:{getRecord:function(e){return this.getBoundView(e).getRecord(e)},getBoundView:function(e){return Ext.getCmp(e.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:document.createElement("div"),statics:{updateDelay:200,queueRecordChange:function(e,t,n,i,r){var o,a,s,l,d,u,c,h=this,p=h.changeQueue||(h.changeQueue={}),f=n.internalId;if(o=p[f]||(p[f]={operation:i,record:n,data:{},views:[]}),a=o.data,Ext.Array.include(o.views,e),r&&(s=r.length)){for(l=0;s>l;l++)d=r[l],u=n.data[d],a.hasOwnProperty(d)?n.isEqual(a[d],u)&&(delete a[d],c=!0):a[d]=u;c&&!Ext.Object.getKeys(a).length&&delete p[f]}else Ext.apply(a,n.data);h.flushQueueTask||(h.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(h.onFlushTick,h):Ext.Function.bind(h.onFlushTick,h),interval:Ext.view.AbstractView.updateDelay,repeat:1})),h.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var e,t,n,i,r,o,a,s=this;if(Ext.isScrolling)return void s.flushQueueTask.start();n=s.changeQueue,this.changeQueue={};for(r in n)for(i=n[r],e=i.views,t=e.length,o=0;t>o;o++)a=e[o],a.isDestroyed||a.handleUpdate(a.dataSource,i.record,i.operation,Ext.Object.getKeys(i.data));Ext.AnimationQueue.stop(s.flushChangeQueue,s)}},config:{selection:null,store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:!1,deferInitialRefresh:!1,itemCls:"x-dataview-item",loadingText:"Loading...",loadMask:!0,loadingUseMsg:!0,selectedItemCls:"x-item-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,preserveScrollOnRefresh:!1,ariaRole:"listbox",itemAriaRole:"option",last:!1,focusable:!0,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:!0,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(e){e&&e.selModel&&(e.selectionModel=e.selModel),Ext.Component.prototype.constructor.call(this,e)},initComponent:function(){var e=this,t=(Ext.isDefined,e.itemTpl),n={};t&&(Ext.isArray(t)?t=t.join(""):Ext.isObject(t)&&(n=Ext.apply(n,t.initialConfig),t=t.html),e.itemSelector||(e.itemSelector="."+e.itemCls),t=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',e.itemCls,t,e.itemAriaRole),e.tpl=new Ext.XTemplate(t,n)),Ext.Component.prototype.initComponent.call(this),e.tpl=e.getTpl("tpl"),e.overItemCls&&(e.trackOver=!0),e.addCmpEvents(),e.store=Ext.data.StoreManager.lookup(e.store||"ext-empty-store"),e.dataSource||(e.dataSource=e.store),e.getNavigationModel().bindComponent(this),e.bindStore(e.dataSource,!0,"dataSource"),e.all||(e.all=new Ext.CompositeElementLite),e.scrollState={top:0,left:0},e.savedTabIndexAttribute="data-savedtabindex-"+e.id},getElConfig:function(){var e=this.mixins.renderable.getElConfig.call(this);return this.focusable&&(e.tabIndex=0),e},onRender:function(){var e=this.loadMask;Ext.Component.prototype.onRender.apply(this,arguments),e&&this.createMask(e)},beforeLayout:function(){var e=this;Ext.Component.prototype.beforeLayout.apply(this,arguments),e.refreshNeeded&&!e.pendingRefresh&&(e.refreshCounter?e.refresh():e.doFirstRefresh(e.dataSource))},onMaskBeforeShow:function(){var e=this,t=e.loadingHeight;t&&t>e.getHeight()&&(e.hasLoadingHeight=!0,e.oldMinHeight=e.minHeight,e.minHeight=t,e.updateLayout())},onMaskHide:function(){var e=this;!e.destroying&&e.hasLoadingHeight&&(e.minHeight=e.oldMinHeight,e.updateLayout(),delete e.hasLoadingHeight)},beforeRender:function(){Ext.Component.prototype.beforeRender.apply(this,arguments),this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments),this.focusable&&(this.focusEl=this.el)},getRefItems:function(){var e=this.loadMask,t=[];return e&&e.isComponent&&t.push(e),t},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(e){var t,n=this;n.ignoreNextSelection||(n.ignoreNextSelection=!0,t=n.getSelectionModel(),e?t.select(e):t.deselectAll(),n.ignoreNextSelection=!1)},updateBindSelection:function(e,t){var n=this,i=null;n.ignoreNextSelection||(n.ignoreNextSelection=!0,t.length&&(i=e.getLastSelected(),n.hasHadSelection=!0),n.hasHadSelection&&n.setSelection(i),n.ignoreNextSelection=!1)},applySelectionModel:function(e,t){var n,i=this;return t?(t.un({scope:i,lastselectedchanged:i.updateBindSelection,selectionchange:i.updateBindSelection}),Ext.destroy(i.selModelRelayer),e=Ext.Factory.selection(e)):e&&e.isSelectionModel?e.locked=i.disableSelection:(n=i.simpleSelect?"SIMPLE":i.multiSelect?"MULTI":"SINGLE","string"==typeof e&&(e={type:e}),e=Ext.Factory.selection(Ext.apply({allowDeselect:i.allowDeselect||i.multiSelect,mode:n,locked:i.disableSelection},e))),i.selModelRelayer=i.relayEvents(e,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),e.on({scope:i,lastselectedchanged:i.updateBindSelection,selectionchange:i.updateBindSelection}),e},updateSelectionModel:function(e){this.selModel=e},applyNavigationModel:function(e){return Ext.Factory.viewNavigation(e)},onFocusEnter:function(e){var t,n=this,i=n.getNavigationModel();!n.itemFocused&&n.all.getCount()&&(t=i.getLastFocused(),i.setPosition(t||0,e.event,null,!t),n.itemFocused=null!=i.getPosition()),n.itemFocused&&this.el.dom.setAttribute("tabindex","-1")},onFocusLeave:function(e){var t=this;t.itemFocused&&(t.getNavigationModel().setPosition(null,e.event,null,!0),t.itemFocused=!1,t.el.dom.setAttribute("tabindex",0))},onRemoved:function(e){Ext.Component.prototype.onRemoved.call(this,e),this.onFocusLeave({})},refresh:function(){var e,t,n,i,r,o=this,a=o.all,s=a.getCount(),l=o.refreshCounter,d=o.getSelectionModel(),u=o.getNavigationModel(),c=l&&a.getCount()&&o.preserveScrollOnRefresh&&!o.bufferedRenderer;!o.rendered||o.isDestroyed||o.preventRefresh||o.hasListeners.beforerefresh&&o.fireEvent("beforerefresh",o)===!1||(o.refreshing=!0,u.beforeViewRefresh(o),e=o.getTargetEl(),i=o.getViewRange(),n=e.dom,c&&(t=o.getOverflowEl(),r=t.getScroll()),l?(o.clearViewEl(),o.refreshCounter++):o.refreshCounter=1,o.tpl.append(e,o.collectData(i,a.startIndex||0)),i.length<1?(o.addEmptyText(),a.clear()):(o.collectNodes(e.dom),o.updateIndexes(0)),u.onViewRefresh(),o.refreshSelmodelOnRefresh!==!1&&d.refresh(),o.refreshNeeded=!1,o.refreshSize(a.getCount()!==s),o.fireEvent("refresh",o,i),c&&(t.setScrollLeft(r.left),t.setScrollTop(r.top)),o.viewReady||(o.viewReady=!0,o.fireEvent("viewready",o)),o.refreshing=!1,o.refreshScroll())},addEmptyText:function(){var e=this;e.emptyText&&!e.getStore().isLoading()&&(!e.deferEmptyText||e.refreshCounter>1)&&(e.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",e.getTargetEl().dom,e.emptyText))},toggleChildrenTabbability:function(e){var t=this.savedTabIndexAttribute,n=this.getTargetEl();e?n.restoreChildrenTabbableState(t):n.saveChildrenTabbableState(t)},collectNodes:function(e){var t=this.all;t.fill(Ext.fly(e).query(this.getItemSelector()),t.startIndex||0),this.focusable&&t.set({tabindex:"-1"})},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(e){var t=this,n=t.getSizeModel(),i=t.getScrollable();n.height.shrinkWrap||n.width.shrinkWrap||e?t.updateLayout():t.touchScroll&&!t.bufferedRenderer&&(i?i.refresh():t.on({boxready:t.refreshScroll,scope:t,single:!0}))},onResize:function(){var e=this,t=e.getScrollable();t&&!e._hasScrollListener&&(t.on({scroll:e.onViewScroll,scope:e,onFrame:!!Ext.global.requestAnimationFrame}),e._hasScrollListener=!0),Ext.Component.prototype.onResize.apply(this,arguments)},clearViewEl:function(){var e=this,t=e.getTargetEl(),n=e.getNodeContainer()===t;e.clearEmptyEl(),e.all.clear(!n),n&&(t.dom.innerHTML="")},clearEmptyEl:function(){var e=this.emptyEl;e&&Ext.removeNode(e),this.emptyEl=null},onViewScroll:function(e,t,n){this.fireEvent("scroll",this,t,n)},saveScrollState:function(){var e=this,t=e.scrollState;e.rendered&&(t.left=e.getScrollX(),t.top=e.getScrollY())},restoreScrollState:function(){var e=this,t=e.scrollState;e.rendered&&(e.setScrollX(t.left),e.setScrollY(t.top))},prepareData:function(e,t,n){var i,r,o;if(n){i=n.getAssociatedData();for(r in i)i.hasOwnProperty(r)&&(o||(e=Ext.Object.chain(e),o=!0),e[r]=i[r])}return e},collectData:function(e,t){for(var n,i=[],r=0,o=e.length;o>r;r++)n=e[r],i[r]=this.prepareData(n.data,t+r,n);return i},bufferRender:function(e,t){var n,i,r,o=this,a=o.renderBuffer,s=document.createDocumentFragment();for(o.tpl.overwrite(a,o.collectData(e,t)),n=Ext.fly(a).query(o.getItemSelector()),r=0,i=n.length;i>r;r++)s.appendChild(n[r]);return{fragment:s,children:n}},nodeContainerSelector:null,getNodeContainer:function(){var e=this.getTargetEl(),t=this.nodeContainerSelector;return t?e.down(t,!0):e},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(e,t,n,i,r){var o=this,a=r&&r.filtered;!a&&o.getNode(t)&&(o.throttledUpdate?o.statics().queueRecordChange(o,e,t,n,i):o.handleUpdate.apply(o,arguments))},handleUpdate:function(e,t){var n,i,r=this,o=r.getSelectionModel();return r.viewReady&&(n=r.dataSource.indexOf(t),n>-1&&r.getNode(t))?(i=r.bufferRender([t],n).children[0],r.all.replaceElement(n,i,!0),r.updateIndexes(n,n),o.onUpdate(t),r.refreshSizePending=!0,o.isSelected(t)&&r.onItemSelect(t),r.hasListeners.itemupdate&&r.fireEvent("itemupdate",t,n,i),i):void 0},onReplace:function(e,t,n,i){var r,o,a,s,l,d,u,c=this,h=c.all,p=c.getSelectionModel();if(c.rendered){if(o=c.bufferRender(i,t,!0),d=o.fragment,u=o.children,a=h.item(t),a?h.item(t).insertSibling(d,"before",!0):c.appendNodes(d),h.insert(t,u),t+=i.length,r=t+n.length-1,h.removeRange(t,r,!0),c.refreshSelmodelOnRefresh!==!1&&p.refresh(),c.updateIndexes(t),c.hasListeners.itemremove)for(s=n.length,l=r;s>=0;--s,--l)c.fireEvent("itemremove",n[s],l,c);c.hasListeners.itemadd&&c.fireEvent("itemadd",i,t,u),c.refreshSize()}},onAdd:function(e,t,n){var i,r=this,o=r.getSelectionModel();r.rendered&&(0===r.all.getCount()?(r.refresh(),i=r.all.slice()):(i=r.doAdd(t,n),r.refreshSelmodelOnRefresh!==!1&&o.refresh(),r.updateIndexes(n),r.refreshSizePending=!0),r.hasListeners.itemadd&&r.fireEvent("itemadd",t,n,i))},appendNodes:function(e){var t=this.all,n=t.getCount();this.nodeContainerSelector?this.getNodeContainer().appendChild(e):t.item(n-1).insertSibling(e,"after")},doAdd:function(e,t){var n=this,i=n.bufferRender(e,t,!0),r=i.fragment,o=i.children,a=n.all,s=a.getCount(),l=a.startIndex||0,d=a.endIndex||s-1;return 0===s||t>d?n.appendNodes(r):l>=t?a.item(l).insertSibling(r,"before",!0):a.item(t).insertSibling(o,"before",!0),a.insert(t,o),o},onRemove:function(e,t,n){var i,r,o,a,s,l=this,d=l.all,u=l.hasListeners.itemremove;if(d.getCount()){if(0===l.dataSource.getCount())u&&l.fireEvent("itemremove",t,n,l.getNodes(n,n+t.length-1)),l.refresh();else{for(u&&(a=[]),r=t.length-1;r>=0;--r)o=t[r],i=n+r,a&&(s=d.item(i),a[r]=s?s.dom:void 0),d.item(i)&&l.doRemove(o,i);u&&l.fireEvent("itemremove",t,n,a,l),l.updateIndexes(n)}l.refreshSizePending=!0}},doRemove:function(e,t){this.all.removeElement(t,!0)},refreshNode:function(e){Ext.isNumber(e)&&(e=this.store.getAt(e)),this.onUpdate(this.dataSource,e)},updateIndexes:function(e,t){var n,i,r=this.all.elements,o=this.getViewRange(),a=this.id;for(e=e||0,t=t||(0===t?0:r.length-1),i=e;t>=i;i++)n=r[i],n.setAttribute("data-recordIndex",i),n.setAttribute("data-recordId",o[i].internalId),n.setAttribute("data-boundView",a)},bindStore:function(e,t){var n=this,i=n.getSelectionModel();i.preventRefresh=!0,i.bindStore(e),i.bindComponent(e?n:null),i.preventRefresh=!1,n.mixins.storeholder.bindStore.apply(n,arguments),e&&n.componentLayoutCounter&&!n.preventRefresh&&n.doFirstRefresh(e,!t)},doFirstRefresh:function(e,t){var n=this;n.deferInitialRefresh&&!t?Ext.defer(n.doFirstRefresh,1,n,[e,!0]):e&&!e.isLoading()&&n.refresh()},onUnbindStore:function(e,t,n){"store"===n&&(this.setMaskBind(null),this.getSelectionModel().bindStore(null))},onBindStore:function(e,t,n){var i=this;i.setMaskBind(e),t||"store"!==n||(i.preventRefresh=!0,i.store=e,i.bindStore(e,!1,"dataSource"),i.preventRefresh=!1)},setMaskBind:function(e){var t=this.loadMask;this.rendered&&t&&e&&!t.bindStore&&(t=this.createMask()),t&&t.bindStore&&t.bindStore(e)},getStoreListeners:function(){var e=this;return{refresh:e.onDataRefresh,replace:e.onReplace,add:e.onAdd,remove:e.onRemove,update:e.onUpdate,clear:e.refresh,beginupdate:e.onBeginUpdate,endupdate:e.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter,Ext.suspendLayouts()},onEndUpdate:function(){var e=this;e.updateSuspendCounter&&--e.updateSuspendCounter,Ext.resumeLayouts(!0),e.refreshSizePending&&(e.refreshSize(!0),e.refreshSizePending=!1)},onDataRefresh:function(){this.refreshView()},refreshView:function(){var e=this,t=e.blockRefresh||!e.rendered||e.up("[collapsed],[isCollapsingOrExpanding],[hidden]");t?e.refreshNeeded=!0:e.bufferedRenderer&&e.all.getCount()?e.bufferedRenderer.refreshView():e.refresh()},findItemByChild:function(e){return Ext.fly(e).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(e){return e.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){for(var e=[],t=this.getSelectionModel().getSelection(),n=t.length,i=0;n>i;i++)e.push(this.getNode(t[i]));return e},getRecords:function(e){for(var t=[],n=0,i=e.length,r=this.dataSource.data;i>n;n++)t[t.length]=r.getByKey(e[n].getAttribute("data-recordId"));return t},getRecord:function(e){return this.dataSource.getByInternalId(Ext.getDom(e).getAttribute("data-recordId"))},isSelected:function(e){var t=this.getRecord(e);return this.getSelectionModel().isSelected(t)},select:function(e,t,n){this.getSelectionModel().select(e,t,n)},deselect:function(e,t){this.getSelectionModel().deselect(e,t)},getNode:function(e){var t,n=this;return n.rendered&&(e||0===e)&&(Ext.isString(e)?t=document.getElementById(e):e.isModel?t=n.getNodeByRecord(e):Ext.isNumber(e)?t=n.all.elements[e]:(e.target&&(e=e.target),t=Ext.fly(e).findParent(n.itemSelector,n.getTargetEl()))),t||null},getNodeByRecord:function(e){var t=this.store.indexOf(e);return this.all.elements[t]||null},getNodes:function(e,t){var n=this.all;return void 0!==t&&t++,n.slice(e,t)},indexOf:function(e){return e=this.getNode(e),e||0===e?e.getAttribute("data-recordIndex")?+e.getAttribute("data-recordIndex"):this.all.indexOf(e):-1},onDestroy:function(){var e=this,t=e.updateSuspendCounter;for(e.all.clear(),e.emptyEl=null,Ext.Component.prototype.onDestroy.call(this),e.bindStore(null),Ext.destroy(e.navigationModel,e.selectionModel);t--;)Ext.resumeLayouts(!0)},onItemSelect:function(e){var t=this.getNode(e);t&&Ext.fly(t).addCls(this.selectedItemCls)},onItemDeselect:function(e){var t=this.getNode(e);t&&Ext.fly(t).removeCls(this.selectedItemCls)},getItemSelector:function(){return this.itemSelector},addItemCls:function(e,t){var n=this.getNode(e);n&&Ext.fly(n).addCls(t)},removeItemCls:function(e,t){var n=this.getNode(e);n&&Ext.fly(n).removeCls(t)},updateStore:function(e){this.isConfiguring||(delete this.store,this.bindStore(e))},privates:{createMask:function(e){var t,n=this,i=n.getStore();return!i||i.isEmptyStore||i.loadsSynchronously()||(t={target:n,msg:n.loadingText,useMsg:n.loadingUseMsg,store:i},n.loadingCls&&(t.msgCls=n.loadingCls),Ext.isObject(e)&&(t=Ext.apply(t,e)),n.loadMask=new Ext.LoadMask(t),n.loadMask.on({scope:n,beforeshow:n.onMaskBeforeShow,hide:n.onMaskHide})),n.loadMask},getFocusEl:function(){return this.el},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():Ext.Component.prototype.getTargetEl.call(this)}}},1,0,["component","box"],{component:!0,box:!0},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection().length},getSelectedRecords:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection()},select:function(){Ext.global.console&&Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()");var e=this.getSelectionModel();return e.select.apply(e,arguments)},clearSelections:function(){Ext.global.console&&Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()");var e=this.getSelectionModel();return e.deselectAll()}})})}),Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var e=this;Ext.view.AbstractView.prototype.afterRender.call(this),e.mon(e.el,{scope:e,click:e.handleEvent,longpress:e.handleEvent,mousedown:e.handleEvent,mouseup:e.handleEvent,dblclick:e.handleEvent,contextmenu:e.handleEvent,keydown:e.handleEvent,keyup:e.handleEvent,keypress:e.handleEvent,mouseover:e.handleMouseOver,mouseout:e.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(e){var t=this,n=t.getTargetSelector(),i=e.getTarget(n);t.isDestroyed||(i?t.mouseOverItem!==i&&t.el.contains(i)&&(t.mouseOverItem=e.item=i,e.newType="mouseenter",t.handleEvent(e)):t.handleEvent(e))},handleMouseOut:function(e){var t,n=this.getTargetSelector(),i=e.getTarget(n),r=e.getRelatedTarget(n);(i!==r||null===i&&null===r)&&(this.isDestroyed||(i&&(t=this.self.getBoundView(i))?(e.item=i,e.newType="mouseleave",t.handleEvent(e),t.mouseOverItem=null):this.handleEvent(e)))},handleEvent:function(e){var t=this,n=t.keyEventRe.test(e.type),i=t.getNavigationModel();e.view=t,n&&(e.item=i.getItem(),e.record=i.getRecord()),e.item||(e.item=e.getTarget(t.itemSelector)),e.item&&!e.record&&(e.record=t.getRecord(e.item)),t.processUIEvent(e)!==!1&&t.processSpecialEvent(e),n&&!Ext.fly(e.target).isInputField()&&(e.getKey()===e.SPACE||e.isNavKeyPress(!0))&&e.preventDefault()},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(e){if(Ext.getBody().isAncestor(e.target)){var t,n=this,i=e.item,r=n.self,o=r.EventMap,a=r.TouchEventMap,s=e.record,l=e.type,d=l;if(e.newType&&(d=e.newType),i){if(d=a[d]||d,t=e.recordIndex=n.indexInStore?n.indexInStore(s):n.indexOf(i),!s||n.processItemEvent(s,i,t,e)===!1)return!1;if(n["onBeforeItem"+o[d]](s,i,t,e)===!1||n.fireEvent("beforeitem"+d,n,s,i,t,e)===!1||n["onItem"+o[d]](s,i,t,e)===!1)return!1;n.fireEvent("item"+d,n,s,i,t,e)}else{if(l=a[l]||l,n.processContainerEvent(e)===!1||n["onBeforeContainer"+o[l]](e)===!1||n.fireEvent("beforecontainer"+l,n,e)===!1||n["onContainer"+o[l]](e)===!1)return!1;n.fireEvent("container"+l,n,e)}return!0}},onItemMouseEnter:function(e,t){this.trackOver&&this.highlightItem(t)},onItemMouseLeave:function(){this.trackOver&&this.clearHighlight()},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(e){var t=this,n=t.highlightedItem,i=t.overItemCls;
n!==e&&(n&&(Ext.fly(n).removeCls(i),Ext.isIE8&&(t.repaintBorder(n),t.repaintBorder(n.nextSibling)),t.hasListeners.unhighlightitem&&t.fireEvent("unhighlightitem",t,n)),t.highlightedItem=e,e&&(Ext.fly(e).addCls(t.overItemCls),Ext.isIE8&&t.repaintBorder(e.nextSibling),t.hasListeners.highlightitem&&t.fireEvent("highlightitem",t,e)))},highlightItem:function(e){this.setHighlightedItem(e)},clearHighlight:function(){this.setHighlightedItem(void 0)},handleUpdate:function(e,t){var n,i,r,o=this;o.viewReady&&(n=o.getNode(t),i=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments),r=o.highlightedItem,r&&r===n&&(delete o.highlightedItem,i&&o.highlightItem(i)))},refresh:function(){this.clearHighlight(),Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(e){var t,n=this,i=n.getNode(e),r=n.el,o=0,a=0,s=r.getRegion();s.bottom=s.top+r.dom.clientHeight,s.right=s.left+r.dom.clientWidth,i&&(t=Ext.fly(i).getRegion(),t.top<s.top?o=t.top-s.top:t.bottom>s.bottom&&(o=t.bottom-s.bottom),t.left<s.left?a=t.left-s.left:t.right>s.right&&(a=t.right-s.right),(a||o)&&n.scrollBy(a,o,!1),Ext.fly(i).set({tabIndex:-1}),i.focus())},bindStore:function(e,t,n){var i=this,r=i[n],o=i.getSelectionModel();r&&r.isFeatureStore&&i.rendered?(o.bindStore(r.store),o.bindComponent(i),e.isFeatureStore?(i.bindStoreListeners(e),r.bindStore(r.store)):r.bindStore(e)):Ext.view.AbstractView.prototype.bindStore.call(this,e,t,n)},privates:{repaintBorder:function(e){var t=this.getNode(e);t&&(t.className=t.className)}}},0,["dataview"],["component","box","dataview"],{component:!0,box:!0,dataview:!0},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0),Ext.cmd.derive("Ext.grid.CellContext",Ext.Base,{isCellContext:!0,constructor:function(e){this.view=e},isEqual:function(e){return e?this.record===e.record&&this.column===e.column:!1},setPosition:function(e,t){var n=this;return 1===arguments.length&&(e.length?(t=e[0],t=e[1]):(e.view&&(n.view=e.view),t=e.column,e=e.row)),n.setRow(e),n.setColumn(t),n},setAll:function(e,t,n,i,r){var o=this;return o.view=e,o.rowIdx=t,o.colIdx=n,o.record=i,o.column=r,o},setRow:function(e){var t=this,n=t.view.dataSource;void 0!==e&&("number"==typeof e?(t.rowIdx=Math.max(Math.min(e,n.getCount()-1),0),t.record=n.getAt(e)):e.isModel?(t.record=e,t.rowIdx=n.indexOf(e)):e.tagName&&(t.record=t.view.getRecord(e),t.rowIdx=n.indexOf(t.record)))},setColumn:function(e){var t=this,n=t.view.getVisibleColumnManager();void 0!==e&&("number"==typeof e?(t.colIdx=e,t.column=n.getHeaderAtIndex(e)):e.isHeader&&(t.column=e,t.colIdx=n.indexOf(e)))},next:function(){var e=this,t=e.view.getVisibleColumnManager();e.colIdx++,e.colIdx===t.getColumns().length?e.setPosition(Math.min(e.rowIdx+1,e.view.dataSource.getCount()-1),e.colIdx):e.setColumn(e.colIdx)},equal:function(e){return e&&e.isCellContext&&e.view===this.view&&e.record===this.record&&e.column===this.column},clone:function(){var e=this,t=new e.self(e.view);return t.rowIdx=e.rowIdx,t.colIdx=e.colIdx,t.record=e.record,t.column=e.column,t}},1,0,0,0,0,0,[Ext.grid,"CellContext"],0),Ext.cmd.derive("Ext.view.TableLayout",Ext.layout.component.Auto,{type:"tableview",beginLayout:function(e){var t=this,n=t.owner.lockingPartner,i=e.context;t.columnFlusherId||(t.columnFlusherId=t.id+"-columns",t.rowHeightFlusherId=t.id+"-rows"),Ext.layout.component.Auto.prototype.beginLayout.call(this,e),n&&n.grid.isVisible()&&(e.lockingPartnerContext||((e.lockingPartnerContext=i.getCmp(n)).lockingPartnerContext=e),e.rowHeightSynchronizer=t.owner.syncRowHeightBegin()),(e.headerContext=i.getCmp(t.headerCt)).viewContext=e},beginLayoutCycle:function(e,t){Ext.layout.component.Auto.prototype.beginLayoutCycle.call(this,e,t),e.syncRowHeights&&(e.target.syncRowHeightClear(e.rowHeightSynchronizer),e.syncRowHeights=!1)},calculate:function(e){var t,n,i,r,o,a,s,l=this,d=e.context,u=e.lockingPartnerContext,c=e.headerContext,h=e.ownerCtContext,p=l.owner,f=c.getProp("columnsChanged"),g=e.state,m=p.body.dom;if(!(p.all.getCount()||m&&p.body.child("table")))return e.setProp("viewOverflowY",!1),void Ext.layout.component.Auto.prototype.calculate.call(this,e);if(void 0===f)return void(l.done=!1);if(f&&((t=g.columnFlusher)||d.queueFlush(g.columnFlusher=t={ownerContext:e,columnsChanged:f,layout:l,id:l.columnFlusherId,flush:l.flushColumnWidths}),!t.flushed))return void(l.done=!1);if(u){if(!(r=g.rowHeightFlusher)){if((i=g.rowHeights)||(g.rowHeights=i=e.rowHeightSynchronizer,l.owner.syncRowHeightMeasure(i),e.setProp("rowHeights",i)),!(n=u.getProp("rowHeights")))return void(l.done=!1);d.queueFlush(g.rowHeightFlusher=r={ownerContext:e,synchronizer:i,otherSynchronizer:n,layout:l,id:l.rowHeightFlusherId,flush:l.flushRowHeights})}if(!r.flushed)return void(l.done=!1)}if(Ext.layout.component.Auto.prototype.calculate.call(this,e),!e.heightModel.shrinkWrap){if(s=!1,!h.heightModel.shrinkWrap){if(a=h.target.layout.getContainerSize(h),!a.gotHeight)return void(l.done=!1);o=m.offsetHeight,s=o>a.height}e.setProp("viewOverflowY",s)}},measureContentHeight:function(e){var t=this.owner,n=t.body.dom,i=t.emptyEl,r=0;return i&&(r+=i.offsetHeight),n&&(r+=n.offsetHeight),e.headerContext.state.boxPlan.tooNarrow&&(r+=Ext.getScrollbarSize().height),r},flushColumnWidths:function(){var e,t,n,i,r=this,o=r.layout,a=r.ownerContext,s=r.columnsChanged,l=a.target,d=s.length;if(a.state.columnFlusher===r){for(t=0;d>t;t++)(e=s[t])&&(n=e.props.width,l.body.select(l.getColumnSizerSelector(e.target)).setWidth(n),i=e.lastBox,i&&(i.width=n));r.flushed=!0,o.pending||a.context.queueLayout(o)}},flushRowHeights:function(){var e=this,t=e.layout,n=e.ownerContext;n.state.rowHeightFlusher===e&&(n.target.syncRowHeightFinish(e.synchronizer,e.otherSynchronizer),e.flushed=!0,n.syncRowHeights=!0,t.pending||n.context.queueLayout(t))},finishedLayout:function(e){var t=Ext.fly(this.owner.getNodeContainer());Ext.layout.component.Auto.prototype.finishedLayout.call(this,e),t&&t.setWidth(e.headerContext.props.contentWidth)}},0,0,0,0,["layout.tableview"],0,[Ext.view,"TableLayout"],0),Ext.cmd.derive("Ext.grid.locking.RowSynchronizer",Ext.Base,{constructor:function(e,t){var n,i=this;for(i.view=e,i.rowEl=t,i.els={},i.add("data",e.rowSelector),n=e.rowTpl;n;n=n.nextTpl)n.beginRowSync&&n.beginRowSync(i)},add:function(e,t){var n=Ext.fly(this.rowEl).down(t,!0);n&&(this.els[e]={el:n})},finish:function(e){var t,n,i,r,o=this,a=o.els,s=e.els,l=0,d=0;for(i in a)t=s[i],r=t?t.height:0,n=r-a[i].height,n>0?(l+=n,Ext.fly(a[i].el).setHeight(r)):d-=n;r=e.rowHeight+d,o.rowHeight+l<r&&Ext.fly(o.rowEl).setHeight(r)},measure:function(){var e,t=this,n=t.els;t.rowHeight=t.rowEl.offsetHeight;for(e in n)n[e].height=n[e].el.offsetHeight},reset:function(){var e,t=this.els;this.rowEl.style.height="";for(e in t)t[e].el.style.height=""}},1,0,0,0,0,0,[Ext.grid.locking,"RowSynchronizer"],0),Ext.cmd.derive("Ext.view.NodeCache",Ext.Base,{statics:{range:document.createRange&&document.createRange()},constructor:function(e){this.view=e,this.clear(),this.el=new Ext.dom.Fly},clear:function(e){var t,n=this,i=n.elements,r=n.statics().range;if(n.count&&e)if(r)r.setStartBefore(i[n.startIndex]),r.setEndAfter(i[n.endIndex]),r.deleteContents();else for(t in i)Ext.removeNode(i[t]);n.elements={},n.count=n.startIndex=0,n.endIndex=-1},fill:function(e,t,n){n=n||0;var i,r=this,o=r.elements={},a=e.length-n;for(t||(t=0),i=0;a>i;i++)o[t+i]=e[i+n];return r.startIndex=t,r.endIndex=t+a-1,r.count=a,this},insert:function(e,t){var n,i=this,r=i.elements,o=t.length;if(i.count){if(e<i.count)for(n=i.endIndex+o;n>=e+o;n--)r[n]=r[n-o],r[n].setAttribute("data-recordIndex",n);i.endIndex=i.endIndex+o}else i.startIndex=e,i.endIndex=e+o-1;for(n=0;o>n;n++,e++)r[e]=t[n],r[e].setAttribute("data-recordIndex",e);i.count+=o},invoke:function(e,t){var n,i,r=this;for(e=Ext.dom.Element.prototype[e],i=r.startIndex;i<=r.endIndex;i++)n=r.item(i),n&&e.apply(n,t);return r},item:function(e,t){var n=this.elements[e],i=null;return n&&(i=t?this.elements[e]:this.el.attach(this.elements[e])),i},first:function(e){return this.item(this.startIndex,e)},last:function(e){return this.item(this.endIndex,e)},moveBlock:function(e){var t,n,i,r,o=this,a=o.elements;0>e?(r=o.startIndex-1,n=o.endIndex,i=1):(r=o.endIndex+1,n=o.startIndex,i=-1),o.startIndex+=e,o.endIndex+=e;do r+=i,t=a[r+e]=a[r],t.setAttribute("data-recordIndex",r+e),(r<o.startIndex||r>o.endIndex)&&delete a[r];while(r!==n);delete a[r]},getCount:function(){return this.count},slice:function(e,t){var n,i=this.elements,r=[];for(t=t?Math.min(this.endIndex,t-1):this.endIndex,n=e||this.startIndex;t>=n;n++)r.push(i[n]);return r},replaceElement:function(e,t,n){var i=this.elements,r="number"==typeof e?e:this.indexOf(e);return r>-1&&(t=Ext.getDom(t),n&&(e=i[r],e.parentNode.insertBefore(t,e),Ext.removeNode(e),t.setAttribute("data-recordIndex",r)),this.elements[r]=t),this},indexOf:function(e){var t,n=this.elements;for(e=Ext.getDom(e),t=this.startIndex;t<=this.endIndex;t++)if(n[t]===e)return t;return-1},removeRange:function(e,t,n){var i,r,o,a,s=this,l=s.elements;for(t=null==t?s.endIndex+1:Math.min(s.endIndex+1,t+1),null==e&&(e=s.startIndex),o=t-e,r=e,a=t;r<=s.endIndex;r++,a++)i=l[r],n&&t>r&&Ext.removeNode(i),a<=s.endIndex?(i=l[r]=l[a],i.setAttribute("data-recordIndex",r)):delete l[r];s.count-=o,s.endIndex-=o},removeElement:function(e,t){var n,i,r,o,a,s,l=this,d=l.elements,u=0;if(Ext.isArray(e)){for(n=e,e=[],o=n.length,u=0;o>u;u++)i=n[u],"number"!=typeof i&&(i=l.indexOf(i)),i>=l.startIndex&&i<=l.endIndex&&(e[e.length]=i);Ext.Array.sort(e),o=e.length}else{if(e<l.startIndex||e>l.endIndex)return;o=1,e=[e]}for(a=s=e[0],u=0;a<=l.endIndex;a++,s++)o>u&&a===e[u]&&(s++,u++,t&&Ext.removeNode(d[a])),s<=l.endIndex&&s>=l.startIndex?(r=d[a]=d[s],r.setAttribute("data-recordIndex",a)):delete d[a];l.endIndex-=o,l.count-=o},scroll:function(e,t,n){var i,r,o,a,s,l=this,d=l.view,u=d.store,c=l.elements,h=e.length,p=d.getNodeContainer(),f=d.hasListeners.itemremove,g=d.hasListeners.itemadd,m=l.statics().range;if(e.length){if(-1===t){if(n){if(m)for(m.setStartBefore(c[l.endIndex-n+1]),m.setEndAfter(c[l.endIndex]),m.deleteContents(),i=l.endIndex-n+1;i<=l.endIndex;i++)r=c[i],delete c[i],f&&d.fireEvent("itemremove",u.getByInternalId(r.getAttribute("data-recordId")),i,r,d);else for(i=l.endIndex-n+1;i<=l.endIndex;i++)r=c[i],delete c[i],Ext.removeNode(r),f&&d.fireEvent("itemremove",u.getByInternalId(r.getAttribute("data-recordId")),i,r,d);l.endIndex-=n}if(e.length){for(s=d.bufferRender(e,l.startIndex-=h),a=s.children,i=0;h>i;i++)c[l.startIndex+i]=a[i];p.insertBefore(s.fragment,p.firstChild),g&&d.fireEvent("itemadd",e,l.startIndex,a)}}else{if(n){if(o=l.startIndex+n,m)for(m.setStartBefore(c[l.startIndex]),m.setEndAfter(c[o-1]),m.deleteContents(),i=l.startIndex;o>i;i++)r=c[i],delete c[i],f&&d.fireEvent("itemremove",u.getByInternalId(r.getAttribute("data-recordId")),i,r,d);else for(i=l.startIndex;o>i;i++)r=c[i],delete c[i],Ext.removeNode(r),f&&d.fireEvent("itemremove",u.getByInternalId(r.getAttribute("data-recordId")),i,r,d);l.startIndex=o}for(s=d.bufferRender(e,l.endIndex+1),a=s.children,i=0;h>i;i++)c[l.endIndex+=1]=a[i];p.appendChild(s.fragment),g&&d.fireEvent("itemadd",e,l.endIndex+1,a)}return l.count=l.endIndex-l.startIndex+1,a}},sumHeights:function(){var e,t=0,n=this.elements;for(e=this.startIndex;e<=this.endIndex;e++)t+=n[e].offsetHeight;return t}},1,0,0,0,0,0,[Ext.view,"NodeCache"],function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)}),Ext.cmd.derive("Ext.view.Table",Ext.view.View,{alternateClassName:"Ext.grid.View",isTableView:!0,config:{selectionModel:{type:"rowmodel"}},inheritableStatics:{events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","deselect","select","beforedeselect","beforeselect","selectionchange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","rowclick","rowcontextmenu","rowdblclick","rowkeydown","rowmouseup","rowmousedown","rowkeydown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand"]},scrollable:!0,componentLayout:"tableview",baseCls:"x-grid-view",unselectableCls:"x-unselectable",firstCls:"x-grid-cell-first",lastCls:"x-grid-cell-last",itemCls:"x-grid-item",selectedItemCls:"x-grid-item-selected",selectedCellCls:"x-grid-cell-selected",focusedItemCls:"x-grid-item-focused",overItemCls:"x-grid-item-over",altRowCls:"x-grid-item-alt",dirtyCls:"x-grid-dirty-cell",rowClsRe:RegExp("(?:^|\\s*)x-grid-item-alt(?:\\s+|$)","g"),cellRe:RegExp("x-grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:!0,positionCells:!1,stripeOnUpdate:null,trackOver:!0,getRowClass:null,stripeRows:!0,markDirty:!0,ariaRole:"grid",tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="x-grid-item-container" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellPadding="0" cellSpacing="0" {ariaTableAttr} style="{itemStyle};width:0">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " x-grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}" {rowAttr:attributes} {ariaRowAttr}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {[Ext.aria ? "id=\\"" + Ext.id() + "\\"" : ""]} style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>" tabindex="-1" {ariaCellAttr} data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="x-grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</td>",{priority:0}],refreshSelmodelOnRefresh:!1,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:["x-grid-cell x-grid-td"]},constructor:function(e){e.grid.isTree&&(e.baseCls="x-tree-view"),Ext.view.View.prototype.constructor.call(this,e)},hasVariableRowHeight:function(e){var t=this;return t.variableRowHeight||t.store.isGrouped()||t.getVisibleColumnManager().hasVariableRowHeight()||!e&&t.lockingPartner&&t.lockingPartner.hasVariableRowHeight(!0)},initComponent:function(){var e=this;e.columnLines&&e.addCls(e.grid.colLinesCls),e.rowLines&&e.addCls(e.grid.rowLinesCls),e.body=new Ext.dom.Fly,e.body.id=e.id+"gridBody",e.trackOver||(e.overItemCls=null),e.headerCt.view=e,e.grid.view=e,e.initFeatures(e.grid),e.itemSelector=e.getItemSelector(),e.all=new Ext.view.NodeCache(e),Ext.view.View.prototype.initComponent.call(this)},applySelectionModel:function(e,t){var n=this,i=n.ownerGrid,r=e.type;return t||e&&e.isSelectionModel||(e=i.selModel||e),e&&(e.isSelectionModel?(e.allowDeselect=i.allowDeselect||"SINGLE"!==e.selectionMode,e.locked=i.disableSelection):("string"==typeof e?e={type:e}:e.type=i.selType||e.selType||e.type||r,e.mode||(i.simpleSelect?e.mode="SIMPLE":i.multiSelect&&(e.mode="MULTI")),e=Ext.Factory.selection(Ext.apply({allowDeselect:i.allowDeselect,locked:i.disableSelection},e)))),e},updateSelectionModel:function(e,t){var n=this;t&&(t.un({scope:n,lastselectedchanged:n.updateBindSelection,selectionchange:n.updateBindSelection}),Ext.destroy(n.selModelRelayer)),n.selModelRelayer=n.relayEvents(e,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),e.on({scope:n,lastselectedchanged:n.updateBindSelection,selectionchange:n.updateBindSelection}),n.selModel=e},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},moveColumn:function(e,t,n){var i,r,o,a,s,l,d,u=this,c=n>1,h=c&&document.createRange?document.createRange():null,p=c&&!h?document.createDocumentFragment():null,f=t,g=u.getGridColumns().length,m=g-1,x=(u.firstCls||u.lastCls)&&(0===t||t===g||0===e||e===m);if(u.rendered&&t!==e){for(o=u.el.query(u.rowSelector),t>e&&p&&(f-=1),i=0,a=o.length;a>i;i++){if(s=o[i],l=s.childNodes,x){if(1===l.length){Ext.fly(l[0]).addCls(u.firstCls),Ext.fly(l[0]).addCls(u.lastCls);continue}0===e?(Ext.fly(l[0]).removeCls(u.firstCls),Ext.fly(l[1]).addCls(u.firstCls)):e===m&&(Ext.fly(l[m]).removeCls(u.lastCls),Ext.fly(l[m-1]).addCls(u.lastCls)),0===t?(Ext.fly(l[0]).removeCls(u.firstCls),Ext.fly(l[e]).addCls(u.firstCls)):t===g&&(Ext.fly(l[m]).removeCls(u.lastCls),Ext.fly(l[e]).addCls(u.lastCls))}if(c){if(h)h.setStartBefore(l[e]),h.setEndAfter(l[e+n-1]),p=h.extractContents();else for(r=0;n>r;r++)p.appendChild(l[e]);s.insertBefore(p,l[f]||null)}else s.insertBefore(l[e],l[f]||null)}for(d=u.el.query("colgroup"),i=0,a=d.length;a>i;i++)if(s=d[i],c){if(h)h.setStartBefore(s.childNodes[e]),h.setEndAfter(s.childNodes[e+n-1]),p=h.extractContents();else for(r=0;n>r;r++)p.appendChild(s.childNodes[e]);s.insertBefore(p,s.childNodes[f]||null)}else s.insertBefore(s.childNodes[e],s.childNodes[f]||null)}},scrollToTop:Ext.emptyFn,addElListener:function(e,t,n){this.mon(this,e,t,n,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(e){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(e)},getCell:function(e,t){var n=this.getRow(e);return Ext.fly(n).down(t.getCellSelector())},getFeature:function(e){var t=this.featuresMC;return t?t.get(e):void 0},findFeature:function(e){return this.features?Ext.Array.findBy(this.features,function(t){return t.ftype===e?!0:void 0}):void 0},initFeatures:function(e){var t,n,i,r,o=this;for(o.tpl=Ext.XTemplate.getTpl(this,"tpl"),o.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl"),o.addRowTpl(Ext.XTemplate.getTpl(this,"outerRowTpl")),o.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl"),o.featuresMC=new Ext.util.MixedCollection,n=o.features=o.constructFeatures(),r=n?n.length:0,t=0;r>t;t++)i=n[t],i.view=o,i.grid=e,o.featuresMC.add(i),i.init(e)},renderTHead:function(e,t,n){var i,r,o=e.view.headerFns;if(o)for(r=0,i=o.length;i>r;++r)o[r].call(this,e,t,n)},addHeaderFn:function(e){var t=this.headerFns;t||(t=this.headerFns=[]),t.push(e)},renderTFoot:function(e,t,n){var i,r,o=e.view.footerFns;if(o)for(r=0,i=o.length;i>r;++r)o[r].call(this,e,t,n)},addFooterFn:function(e){var t=this.footerFns;t||(t=this.footerFns=[]),t.push(e)},addTpl:function(e){return this.insertTpl("tpl",e)},addRowTpl:function(e){return this.insertTpl("rowTpl",e)},addCellTpl:function(e){return this.insertTpl("cellTpl",e)},insertTpl:function(e,t){var n,i,r=this;for(t=t.isTemplate?Ext.Object.chain(t):new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",t),n=r[e];t.priority<n.priority;n=n.nextTpl)i=n;return i?i.nextTpl=t:r[e]=t,t.nextTpl=n,t},tplApplyOut:function(e,t,n){this.before&&this.before(e,t,n)===!1||(this.nextTpl.applyOut(e,t,n),this.after&&this.after(e,t,n))},constructFeatures:function(){var e,t,n,i=this,r=i.features,o=0;if(r)for(t=[],n=r.length;n>o;o++)e=r[o],e.isFeature||(e=Ext.create("feature."+e.ftype,e)),t[o]=e;return t},beforeRender:function(){var e=this;Ext.view.View.prototype.beforeRender.call(this),e.enableTextSelection||e.protoEl.unselectable()},onBindStore:function(e){var t=this,n=t.bufferedRenderer;n&&n.store!==e&&n.bindStore(e),t.all&&t.all.getCount()&&(n&&n.setBodyTop(0),t.clearViewEl()),Ext.view.View.prototype.onBindStore.apply(this,arguments)},getStoreListeners:function(){var e=Ext.view.View.prototype.getStoreListeners.call(this);return e.beforepageremove=this.beforePageRemove,e},beforePageRemove:function(e,t){var n=this.all,i=e.getPageSize();return n.startIndex>=(t-1)*i&&n.endIndex<=t*i-1?(e.get(t),!1):void 0},onViewScroll:function(e,t,n){this.ignoreScroll||Ext.view.View.prototype.onViewScroll.call(this,e,t,n)},createRowElement:function(e,t,n){var i=this,r=i.renderBuffer,o=i.collectData([e],t);return o.columns=n,i.tpl.overwrite(r,o),Ext.fly(r).down(i.getNodeContainerSelector(),!0).firstChild},bufferRender:function(e,t){var n,i=this,r=i.renderBuffer,o=document.createRange?document.createRange():null;if(i.tpl.overwrite(r,i.collectData(e,t)),r=Ext.fly(r).down(i.getNodeContainerSelector(),!0),o)o.selectNodeContents(r),n=o.extractContents();else for(n=document.createDocumentFragment();r.firstChild;)n.appendChild(r.firstChild);return{fragment:n,children:Ext.Array.toArray(n.childNodes)}},collectData:function(e,t){var n=this;return n.rowValues.view=n,n.tableValues.view=n,n.tableValues.rows=e,n.tableValues.columns=null,n.tableValues.viewStartIndex=t,n.tableValues.touchScroll=n.touchScroll,n.tableValues.tableStyle="width:"+n.headerCt.getTableWidth()+"px",n.tableValues},collectNodes:function(){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},refreshSize:function(e){var t=this,n=t.getBodySelector();n&&t.body.attach(t.el.down(n,!0)),t.hasLoadingHeight||(Ext.suspendLayouts(),Ext.view.View.prototype.refreshSize.apply(this,arguments),(e||t.hasVariableRowHeight()&&t.dataSource.getCount())&&t.grid.updateLayout(),Ext.resumeLayouts(!0))},clearViewEl:function(e){var t,n,i,r,o=this,a=o.all,s=o.getStore();for(t=a.startIndex;t<=a.endIndex;t++)n=a.item(t,!0),o.fireEvent("itemremove",s.getByInternalId(n.getAttribute("data-recordId")),t,n,o);Ext.view.View.prototype.clearViewEl.call(this),i=Ext.fly(o.getNodeContainer()),i&&!e&&(r=o.getTargetEl(),r.dom!==i.dom&&i.destroy())},getMaskTarget:function(){return this.ownerCt.body},statics:{getBoundView:function(e){return Ext.getCmp(e.getAttribute("data-boundView"))}},getRecord:function(e){var t,n=this;return n.store.isDestroyed?void 0:e.isModel?e:(e=n.getNode(e),e?!n.hasActiveFeature()&&(t=e.getAttribute("data-recordIndex"),t&&(t=parseInt(t,10),t>-1))?n.store.data.getAt(t):n.dataSource.getByInternalId(e.getAttribute("data-recordId")):void 0)},indexOf:function(e){return e=this.getNode(e),e||0===e?this.all.indexOf(e):-1},indexInStore:function(e){return e?this.dataSource.indexOf(this.getRecord(e)):-1},renderRows:function(e,t,n,i){var r,o=this.rowValues,a=e.length;for(o.view=this,o.columns=t,r=0;a>r;r++,n++)o.itemClasses.length=o.rowClasses.length=0,this.renderRow(e[r],n,i);o.view=o.columns=o.record=null},renderColumnSizer:function(e,t){var n,i,r,o=e.columns||this.getGridColumns(),a=o.length;for(t.push('<colgroup role="presentation">'),n=0;a>n;n++)i=o[n],r=i.cellWidth?i.cellWidth:Ext.grid.header.Container.prototype.defaultWidth,t.push('<col role="presentation" class="',"x-","grid-cell-",o[n].getItemId(),'" style="width:'+r+'px">');t.push("</colgroup>")},renderRow:function(e,t,n){var i,r=this,o=-1===t,a=r.selectionModel,s=r.rowValues,l=s.itemClasses,d=s.rowClasses,u=r.itemCls,c=r.rowTpl;return s.rowAttr={},s.record=e,s.recordId=e.internalId,s.recordIndex=r.store.indexOf(e),s.rowIndex=t,s.rowId=r.getRowId(e),s.itemCls=s.rowCls="",s.columns||(s.columns=r.ownerCt.getVisibleColumnManager().getColumns()),l.length=d.length=0,o||(l[0]=u,!r.ownerCt.disableSelection&&a.isRowSelected&&a.isRowSelected(e)&&l.push(r.selectedItemCls),r.stripeRows&&t%2!==0&&l.push(r.altRowCls),r.getRowClass&&(i=r.getRowClass(e,t,null,r.dataSource),i&&d.push(i))),n?void c.applyOut(s,n,r.tableValues):c.apply(s,r.tableValues)},renderCell:function(e,t,n,i,r,o){var a,s,l,d=this,u=d.selectionModel,c=d.cellValues,h=c.classes,p=t.data[e.dataIndex],f=d.cellTpl,g=d.navigationModel.getPosition();c.record=t,c.column=e,c.recordIndex=n,c.rowIndex=i,c.columnIndex=r,c.cellIndex=r,c.align=e.align,c.innerCls=e.innerCls,c.tdCls=c.tdStyle=c.tdAttr=c.style="",c.unselectableAttr=d.enableTextSelection?"":'unselectable="on"',h[1]=e.getCellId(),l=2,e.renderer&&e.renderer.call?(a=d.ownerCt.columnManager.getHeaderIndex(e),s=e.renderer.call(e.usingDefaultRenderer?e:e.scope||d.ownerCt,p,c,t,n,a,d.dataSource,d),c.css&&(t.cssWarning=!0,c.tdCls+=" "+c.css,c.css=null),c.tdCls&&(h[l++]=c.tdCls)):s=p,c.value=null==s||""===s?e.emptyCellText:s,e.tdCls&&(h[l++]=e.tdCls),d.markDirty&&t.dirty&&t.isModified(e.dataIndex)&&(h[l++]=d.dirtyCls),e.isFirstVisible&&(h[l++]=d.firstCls),e.isLastVisible&&(h[l++]=d.lastCls),d.enableTextSelection||(h[l++]=d.unselectableCls),u&&(u.isCellModel||u.isSpreadsheetModel)&&u.isCellSelected(d,n,e)&&(h[l++]=d.selectedCellCls),g&&g.record.id===t.id&&g.column===e&&(h[l++]=d.focusedItemCls),h.length=l,c.tdCls=h.join(" "),f.applyOut(c,o),c.column=null},getRow:function(e){var t;return!e&&0!==e||!this.rendered?null:(e.target&&(e=e.target),Ext.isString(e)?Ext.fly(e).down(this.rowSelector,!0):Ext.isNumber(e)?(t=this.all.item(e),t&&t.down(this.rowSelector,!0)):e.isModel?this.getRowByRecord(e):(t=Ext.fly(e),t.is(this.itemSelector)?this.getRowFromItem(t):t.findParent(this.rowSelector,this.getTargetEl())))},getRowId:function(e){return this.id+"-record-"+e.internalId},constructRowId:function(e){return this.id+"-record-"+e},getNodeById:function(e){return e=this.constructRowId(e),this.retrieveNode(e,!1)},getRowById:function(e){return e=this.constructRowId(e),this.retrieveNode(e,!0)},getNodeByRecord:function(e){return this.retrieveNode(this.getRowId(e),!1)},getRowByRecord:function(e){return this.retrieveNode(this.getRowId(e),!0)},getRowFromItem:function(e){var t,n=Ext.getDom(e).tBodies[0].childNodes,i=n.length;for(t=0;i>t;t++)if(Ext.fly(n[t]).is(this.rowSelector))return n[t]},retrieveNode:function(e,t){var n=this.el.getById(e,!0);return t&&n?Ext.fly(n).down(this.rowSelector,!0):n},updateIndexes:Ext.emptyFn,bodySelector:"div.x-grid-item-container",nodeContainerSelector:"div.x-grid-item-container",itemSelector:"table.x-grid-item",rowSelector:"tr.x-grid-row",cellSelector:"td.x-grid-cell",sizerSelector:".x-grid-cell",innerSelector:"div.x-grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(e){var t=this.sizerSelector+"-"+e.getItemId();return"td"+t+",col"+t},getItemSelector:function(){return this.itemSelector},getCellSelector:function(e){return e?e.getCellSelector():this.cellSelector},getCellInnerSelector:function(e){return this.getCellSelector(e)+" "+this.innerSelector},addRowCls:function(e,t){var n=this.getRow(e);n&&Ext.fly(n).addCls(t)},removeRowCls:function(e,t){var n=this.getRow(e);n&&Ext.fly(n).removeCls(t)},onRowSelect:function(e){var t=this;t.addItemCls(e,t.selectedItemCls),Ext.isIE8&&t.repaintBorder(e+1)},onRowDeselect:function(e){var t=this;t.removeItemCls(e,t.selectedItemCls),Ext.isIE8&&t.repaintBorder(e+1)},onCellSelect:function(e){var t=this.getCellByPosition(e);t&&t.addCls(this.selectedCellCls)},onCellDeselect:function(e){var t=this.getCellByPosition(e,!0);t&&Ext.fly(t).removeCls(this.selectedCellCls)},getCellInclusive:function(e,t){if(e){var n=this.getRow(e.row),i=this.ownerCt.getColumnManager().getHeaderAtIndex(e.column);if(i&&n)return Ext.fly(n).down(this.getCellSelector(i),t)}return!1},getCellByPosition:function(e,t){if(e){var n=e.view||this,i=n.getRow(e.record||e.row),r=e.column.isColumn?e.column:n.getVisibleColumnManager().getHeaderAtIndex(e.column);if(r&&i)return Ext.fly(i).down(n.getCellSelector(r),t)}return!1},onFocusEnter:function(e){var t,n,i,r,o,a=this,s=a.getNavigationModel(),l=a.bufferedRenderer;if(e=e.event,!a.cellFocused&&a.all.getCount()&&a.dataSource.getCount())if(o=e.getTarget(),o&&a.el.contains(o)&&o!==a.el.dom&&!Ext.fly(o).is(a.getCellSelector()))s.lastFocused&&(s.position=s.lastFocused),a.cellFocused=!0;else{if(n=i=a.getLastFocused(),i||(t=a.isNormalView?a.lockingPartner.isVisible()?a.lockingPartner:a.normalView:a,r=a.dataSource.getAt(l?l.getFirstVisibleRowIndex():0),r&&!r.isNonData&&(i=new Ext.grid.CellContext(t).setPosition({row:r,column:0}))),!i)return e.stopEvent(),void e.getTarget().blur();s.setPosition(i,null,e,null,!0),a.cellFocused=!!s.getPosition()}a.cellFocused&&a.el.dom.setAttribute("tabindex","-1")},onFocusLeave:function(e){var t=this;t.cellFocused&&(e.toComponent!==t.lockingPartner&&t.getNavigationModel().setPosition(null,null,e.event,null,!0),t.cellFocused=!1,t.focusEl=t.el,t.focusEl.dom.setAttribute("tabindex",0))},onRowFocus:function(e,t,n){var i=this;t?(i.addItemCls(e,i.focusedItemCls),n||i.focusRow(e)):i.removeItemCls(e,i.focusedItemCls),Ext.isIE8&&i.repaintBorder(e+1)},focusRow:function(e,t){var n=this,i=n.getFocusTask();return t?void i.delay(Ext.isNumber(t)?t:10,n.focusRow,n,[e,!1]):(i.cancel(),void(n.isVisible(!0)&&n.getNavigationModel().setPosition(n.getRecord(e))))},focusNode:function(e,t){this.focusRow(e,t)},scrollRowIntoView:function(e,t){e=this.getRow(e),e&&this.scrollElIntoView(e,!1,t)},focusCell:function(e,t){var n,i=this,r=i.getFocusTask();return t?void r.delay(Ext.isNumber(t)?t:10,i.focusCell,i,[e,!1]):(r.cancel(),void(i.isVisible(!0)&&(n=i.getCellByPosition(e))&&i.getNavigationModel().setPosition(e)))},getLastFocused:function(){var e=this,t=e.lastFocused;return t&&t.record&&t.column&&-1!==e.dataSource.indexOf(t.record)&&-1!==e.getVisibleColumnManager().indexOf(t.column)&&e.getNode(t.record)?t:void 0},scrollCellIntoView:function(e,t){e.isCellContext&&(e=this.getCellByPosition(e)),e&&this.scrollElIntoView(e,null,t)},scrollElIntoView:function(e,t,n){var i=this.getScrollable();i&&i.scrollIntoView(e,t,n)},syncRowHeightBegin:function(){var e,t,n,i=this,r=i.all,o=r.count,a=[],s=Ext.grid.locking.RowSynchronizer;for(e=0,t=r.startIndex;o>e;e++,t++)a[e]=n=new s(i,r.elements[t]),n.reset();return a},syncRowHeightClear:function(e){var t,n=this,i=n.all,r=i.count;for(t=0;r>t;t++)e[t].reset()},syncRowHeightMeasure:function(e){var t,n=e.length;for(t=0;n>t;t++)e[t].measure()},syncRowHeightFinish:function(e,t){var n,i=e.length,r=this.bufferedRenderer;for(n=0;i>n;n++)e[n].finish(t[n]);r&&r.syncRowHeightsFinish()},handleUpdate:function(e,t,n,i){n=n||Ext.data.Model.EDIT;var r,o,a,s,l,d,u,c,h,p,f,g,m,x,v,y,E,b,C,w,S,T=this,P=T.rowTpl,I=T.markDirty,k=T.dirtyCls,B=n!==Ext.data.Model.EDIT,M=[],D=T.variableRowHeight,R=0,A=T.ownerCt,F=T.cellFly||(T.self.prototype.cellFly=new Ext.dom.Fly);if(T.viewReady&&(o=T.getNodeByRecord(t))){for(h=T.overItemCls,p=T.ownerCt.getVisibleColumnManager().getColumns(),m=0,g=p.length;g>m;m++)f=p[m],f.preventUpdate?(v=Ext.fly(o).down(f.getCellSelector(),!0),!B&&I&&(F.attach(v),t.isModified(f.dataIndex)?F.addCls(k):F.removeCls(k))):(x=T.shouldUpdateCell(t,f,i),x&&(R|=x,M[M.length]=f,D=D||f.variableRowHeight));if(T.getRowClass||!T.getRowFromItem(o)||1&R||o.tBodies[0].childNodes.length>1){if(r=Ext.fly(o,"_internal"),
w=o._extData,s=T.createRowElement(t,T.dataSource.indexOf(t),M),r.hasCls(h)&&Ext.fly(s).addCls(h),Ext.isIE9m&&o.mergeAttributes)o.mergeAttributes(s,!0);else for(l=s.attributes,d=l.length,c=0;d>c;c++)u=l[c].name,"id"!==u&&o.setAttribute(u,l[c].value);for(w&&(w.isSynchronized=!1),p.length&&(a=T.getRow(o))&&T.updateColumns(a,Ext.fly(s).down(T.rowSelector,!0),M);P&&(!P.syncContent||P.syncContent(o,s,i?M:null)!==!1);)P=P.nextTpl}else for(m=0,g=M.length;g>m;m++)f=M[m],y=f.dataIndex,E=t.get(y),v=Ext.fly(o).down(f.getCellSelector(),!0),!B&&I&&(F.attach(v),t.isModified(f.dataIndex)?F.addCls(k):F.removeCls(k)),b=f.usingDefaultRenderer,C=b?f:f.scope,f.updater?Ext.callback(f.updater,C,[v,E,t,T,T.dataSource],0,f,A):(f.renderer&&(E=Ext.callback(f.renderer,C,[E,null,t,0,0,T.dataSource,T],0,f,A)),S=null==E||""===E,E=S?f.emptyCellText:E,f.producesHTML||S?v.childNodes[0].innerHTML=E:v.childNodes[0].childNodes[0].data=E),T.highlightClass&&(Ext.fly(v).addCls(T.highlightClass),T.changedCells||(T.self.prototype.changedCells=[],T.prototype.clearChangedTask=new Ext.util.DelayedTask(T.clearChangedCells,T.prototype),T.clearChangedTask.delay(T.unhighlightDelay)),T.changedCells.push({cell:v,cls:T.highlightClass,expires:Ext.Date.now()+1e3}));B&&I&&!t.dirty&&Ext.fly(o,"_internal").select("."+k).removeCls(k),D&&Ext.suspendLayouts(),T.fireEvent("itemupdate",t,T.store.indexOf(t),o),D&&(T.bufferedRenderer?(T.bufferedRenderer.refreshSize(),T.ownerGrid.updateLayout()):T.refreshSize(),Ext.resumeLayouts(!0))}},clearChangedCells:function(){for(var e,t=this,n=Ext.Date.now(),i=0,r=t.changedCells.length;r>i&&(e=t.changedCells[i],e.expires<=n);)Ext.fly(e.cell).removeCls(e.highlightClass),Ext.Array.erase(t.changedCells,i,1),r--;r&&t.clearChangedTask.delay(t.unhighlightDelay)},updateColumns:function(e,t,n){var i,r,o,a,s,l,d,u,c=this,h=n.length,p=c.getCellSelector();if(e.mergeAttributes)e.mergeAttributes(t,!0);else for(i=t.attributes,r=i.length,a=0;r>a;a++)o=i[a].name,"id"!==o&&e.setAttribute(o,i[a].value);for(s=0;h>s;s++)l=n[s],p=c.getCellSelector(l),d=Ext.fly(e).selectNode(p),u=Ext.fly(t).selectNode(p),Ext.fly(d).syncContent(u)},shouldUpdateCell:function(e,t,n){if(!t.preventUpdate){if(t.hasCustomRenderer)return 1;if(!n)return 2;var i,r,o=n.length;for(i=0;o>i;++i)if(r=n[i],r===t.dataIndex||r===e.idProperty)return 2}return 0},refresh:function(){var e,t=this;Ext.view.View.prototype.refresh.apply(this,arguments),t.headerCt.setSortState(),t.touchScroll&&t.el&&!t.all.getCount()&&t.headerCt&&t.headerCt.tooNarrow&&(e=t.getScrollable(),e&&e.setSize({x:t.headerCt.getTableWidth(),y:e.getSize().y}))},processContainerEvent:function(e){var t=Ext.Component.fromElement(e.target.parentNode);return t&&t.up(this.ownerCt)?!1:void 0},processItemEvent:function(e,t,n,i){var r,o,a,s,l,d,u,c,h=this,p=h.self,f=p.EventMap,g=i.type,m=h.features,x=m.length,v=h.getNavigationModel(),y=i.position=h.eventPosition||(h.eventPosition=new Ext.grid.CellContext);if(Ext.isIE&&"mouseup"===g&&!i.within(h.el))return!1;if(-1!==h.indexInStore(t)){if(u=y.rowElement=Ext.fly(t).down(h.rowSelector,!0),Ext.String.startsWith(i.type,"key")&&(d=v.getPosition())&&(c=(c=v.getCell())&&c.dom,l=d.column),c||(c=i.getTarget(h.getCellSelector(),u)),g=p.TouchEventMap[g]||g,c){if(!c.parentNode)return!1;l||(l=h.getHeaderByCell(c)),o=h.ownerCt.getColumnManager().getHeaderIndex(l)}else o=-1;if(y.setAll(h,n,l?h.getVisibleColumnManager().getHeaderIndex(l):-1,e,l),y.cellElement=c,a=h.fireEvent("uievent",g,h,c,n,o,i,e,u),a===!1||Ext.view.View.prototype.processItemEvent.apply(this,arguments)===!1)return!1;for(r=0;x>r;++r)if(s=m[r],s.wrapsItem&&s.vetoEvent(e,u,n,i)===!1)return h.processSpecialEvent(i),i.preventDefault(),!1;return c&&"mouseover"!==g&&"mouseout"!==g&&(a=!(h["onBeforeCell"+f[g]](c,o,e,u,n,i)===!1||h.fireEvent("beforecell"+g,h,c,o,e,u,n,i)===!1||h["onCell"+f[g]](c,o,e,u,n,i)===!1||h.fireEvent("cell"+g,h,c,o,e,u,n,i)===!1)),a!==!1&&(a=h.fireEvent("row"+g,h,e,u,n,i)),a}return this.processSpecialEvent(i),i.preventDefault(),!1},processSpecialEvent:function(e){var t,n,i,r,o,a,s=this,l=s.features,d=l.length,u=e.type,c=s.ownerCt;if(Ext.view.View.prototype.processSpecialEvent.apply(this,arguments),"mouseover"!==u&&"mouseout"!==u){for(u=s.self.TouchEventMap[u]||u,t=0;d>t;t++)if(n=l[t],n.hasFeatureEvent&&(r=e.getTarget(n.eventSelector,s.getTargetEl()),r&&(i=n.eventPrefix,o=n.getFireEventArgs("before"+i+u,s,r,e),a=n.getFireEventArgs(i+u,s,r,e),s.fireEvent.apply(s,o)===!1||c.fireEvent.apply(c,o)===!1||s.fireEvent.apply(s,a)===!1||c.fireEvent.apply(c,a)===!1)))return!1;return!0}},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyUp:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyUp:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(e){this.autoSizeColumn(e)},autoSizeColumn:function(e){if(Ext.isNumber(e)&&(e=this.getGridColumns()[e]),e){if(e.isGroupHeader)return void e.autoSize();delete e.flex,e.setWidth(this.getMaxContentWidth(e))}},getMaxContentWidth:function(e){var t,n=this,i=n.el.query(e.getCellInnerSelector()),r=e.getWidth(),o=0,a=i.length,s=n.body.select(n.getColumnSizerSelector(e)),l=Math.max,d=0;for(a>0&&(Ext.supports.ScrollWidthInlinePaddingBug&&(d+=n.getCellPaddingAfter(i[0])),n.columnLines&&(d+=Ext.fly(i[0].parentNode).getBorderWidth("lr"))),s.setWidth(1),e.textEl.setStyle({"text-overflow":"clip",display:"table-cell"}),t=e.textEl.dom.offsetWidth+e.titleEl.getPadding("lr"),e.textEl.setStyle({"text-overflow":"",display:""});a>o;o++)t=l(t,i[o].scrollWidth);return t+=d,t=l(t+1,40),s.setWidth(r),t},getPositionByEvent:function(e){var t=this,n=e.getTarget(t.cellSelector),i=e.getTarget(t.itemSelector),r=t.getRecord(i),o=t.getHeaderByCell(n);return t.getPosition(r,o)},getHeaderByCell:function(e){return e?this.ownerCt.getVisibleColumnManager().getHeaderById(e.getAttribute("data-columnId")):!1},walkCells:function(e,t,n,i,r,o){if(!e)return!1;var a=this,s="number"==typeof e.row?e.row:e.rowIdx,l="number"==typeof e.column?e.column:e.colIdx,d=a.dataSource.getCount(),u=a.ownerCt.getVisibleColumnManager(),c=u.getHeaderIndex(u.getFirst()),h=u.getHeaderIndex(u.getLast()),p=s,f=l,g=u.getHeaderAtIndex(l);if(!g||g.hidden||!d)return!1;switch(n=n||{},t=t.toLowerCase()){case"right":if(l===h){if(i||s===d-1)return!1;n.ctrlKey||(p=a.walkRows(s,1),p!==s&&(f=c))}else f=n.ctrlKey?h:u.getHeaderIndex(u.getNextSibling(g));break;case"left":if(l===c){if(i||0===s)return!1;n.ctrlKey||(p=a.walkRows(s,-1),p!==s&&(f=h))}else f=n.ctrlKey?c:u.getHeaderIndex(u.getPreviousSibling(g));break;case"up":if(0===s)return!1;p=n.ctrlKey?a.walkRows(-1,1):a.walkRows(s,-1);break;case"down":if(s===d-1)return!1;p=n.ctrlKey?a.walkRows(d,-1):a.walkRows(s,1)}return r&&r.call(o||a,{row:p,column:f})!==!0?!1:(f=u.getHeaderAtIndex(f),new Ext.grid.CellContext(a).setPosition(p,f))},walkRows:function(e,t){var n,i=this,r=i.dataSource,o=0,a=e,s=0>t?0:(r.isBufferedStore?r.getTotalCount():r.getCount())-1,l=s?1:-1,d=e;do{if(s?d>=s:s>=d)return a||s;d+=l,(n=Ext.fly(i.getRow(d)))&&n.isVisible(!0)&&(o+=l,a=d)}while(o!==t);return d},walkRecs:function(e,t){var n,i,r=this,o=r.dataSource,a=0,s=e,l=0>t?0:(o.isBufferedStore?o.getTotalCount():o.getCount())-1,d=l?1:-1,u=o.indexOf(e);do{if(l?u>=l:l>=u)return s;u+=d,i=o.getAt(u),!i.isCollapsedPlaceholder&&(n=Ext.fly(r.getNodeByRecord(i)))&&n.isVisible(!0)&&(a+=d,s=i)}while(a!==t);return s},getFirstVisibleRowIndex:function(){var e=this,t=e.dataSource.isBufferedStore?e.dataSource.getTotalCount():e.dataSource.getCount(),n=e.indexOf(e.all.first())-1;do if(n+=1,n===t)return;while(!Ext.fly(e.getRow(n)).isVisible(!0));return n},getLastVisibleRowIndex:function(){var e=this,t=e.indexOf(e.all.last());do if(t-=1,-1===t)return;while(!Ext.fly(e.getRow(t)).isVisible(!0));return t},getHeaderCt:function(){return this.headerCt},getPosition:function(e,t){return new Ext.grid.CellContext(this).setPosition(e,t)},onDestroy:function(){var e,t,n=this,i=n.featuresMC;if(i)for(t=0,e=i.getCount();e>t;++t)i.getAt(t).destroy();n.cellFly=n.featuresMC=null,Ext.view.View.prototype.onDestroy.apply(this,arguments)},onReplace:function(e,t,n,i){var r=this,o=r.bufferedRenderer;r.rendered&&o?o.onReplace(e,t,n,i):Ext.view.View.prototype.onReplace.apply(this,arguments),r.setPendingStripe(t)},onAdd:function(e,t,n){var i=this,r=i.bufferedRenderer;i.rendered&&r?r.onReplace(e,n,[],t):Ext.view.View.prototype.onAdd.apply(this,arguments),i.setPendingStripe(n)},onRemove:function(e,t,n){var i=this,r=i.bufferedRenderer;i.rendered&&r?r.onReplace(e,n,t,[]):Ext.view.View.prototype.onRemove.apply(this,arguments),i.setPendingStripe(n)},onDataRefresh:function(){var e=this,t=e.ownerCt;return t&&2===t.isCollapsingOrExpanding?void t.on("expand",e.onDataRefresh,e,{single:!0}):void Ext.view.View.prototype.onDataRefresh.call(this)},getViewRange:function(){var e=this;return e.bufferedRenderer?e.bufferedRenderer.getViewRange():Ext.view.View.prototype.getViewRange.call(this)},setPendingStripe:function(e){var t=this.stripeOnUpdate;t=null===t?e:Math.min(t,e),this.stripeOnUpdate=t},onEndUpdate:function(){var e=this,t=e.stripeOnUpdate,n=e.all.startIndex;e.rendered&&(t||0===t)&&(n>t&&(t=n),e.doStripeRows(t),e.stripeOnUpdate=null),Ext.view.View.prototype.onEndUpdate.apply(this,arguments)},doStripeRows:function(e,t){var n,i,r,o,a=this;if(a.rendered&&a.stripeRows)for(n=a.getNodes(e,t),r=0,i=n.length;i>r;r++)o=n[r],o.className=o.className.replace(a.rowClsRe," "),e++,e%2===0&&(o.className+=" "+a.altRowCls)},hasActiveFeature:function(){return this.isGrouping&&this.store.isGrouped()||this.isRowWrapped},getCellPaddingAfter:function(e){return Ext.fly(e).getPadding("r")},privates:{refreshScroll:function(){var e=this,t=e.bufferedRenderer;t?t.refreshSize():Ext.view.View.prototype.refreshScroll.call(this)}}},1,["tableview","gridview"],["component","box","dataview","tableview","gridview"],{component:!0,box:!0,dataview:!0,tableview:!0,gridview:!0},["widget.gridview","widget.tableview"],0,[Ext.view,"Table",Ext.grid,"View"],0),Ext.define("Ext.rtl.view.Table",{override:"Ext.view.Table",rtlCellTpl:['<td class="x-rtl {tdCls}" {tdAttr} {[Ext.aria ? "id=\\"" + Ext.id() + "\\"" : ""]} style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>" tabindex="-1" {ariaCellAttr} data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="x-rtl x-grid-cell-inner {innerCls}" ','style="text-align:{[this.getAlign(values.align)]};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</td>",{priority:0,rtlAlign:{right:"left",left:"right",center:"center"},getAlign:function(e){return this.rtlAlign[e]}}],beforeRender:function(){var e=this;(arguments.callee.$previous||Ext.view.View.prototype.beforeRender).call(this),e.getInherited().rtl&&e.addCellTpl(e.getTpl("rtlCellTpl"))},getCellPaddingAfter:function(e){return Ext.fly(e).getPadding(this.getInherited().rtl?"l":"r")}}),Ext.cmd.derive("Ext.grid.Panel",Ext.panel.Table,{alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"tableview",lockable:!1,rowLines:!0},0,["grid","gridpanel"],["component","box","container","panel","tablepanel","gridpanel","grid"],{component:!0,box:!0,container:!0,panel:!0,tablepanel:!0,gridpanel:!0,grid:!0},["widget.grid","widget.gridpanel"],0,[Ext.grid,"Panel",Ext.list,"ListView",Ext,"ListView",Ext.grid,"GridPanel"],0),Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:!0,getByName:function(e,t){return this.filterBy(function(n){return n.name===e&&n.getFormId()===t})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0),Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:!1,childEls:["boxLabelEl","innerWrapEl"],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" class="{wrapInnerCls} {noBoxLabelCls}" role="presentation">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" data-ref="inputEl" role="{role}" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}" autocomplete="off" hidefocus="true" />','<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:!0,compiled:!0}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:!0,focusCls:"form-checkbox-focus",fieldBodyCls:"x-form-cb-wrap",checked:!1,checkedCls:"x-form-cb-checked",boxLabelCls:"x-form-cb-label",boxLabelAlign:"after",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-wrap-inner-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:!1,ariaRole:"checkbox",onRe:/^on$/i,inputCls:"x-form-cb",initComponent:function(){var e=this,t=e.value;void 0!==t&&(e.checked=e.isChecked(t,e.inputValue)),Ext.form.field.Base.prototype.initComponent.apply(this,arguments),e.getManager().add(e)},initValue:function(){var e=this,t=!!e.checked;e.originalValue=e.lastValue=t,e.setValue(t)},getElConfig:function(){var e=this;return e.isChecked(e.rawValue,e.inputValue)&&e.addCls(e.checkedCls),Ext.form.field.Base.prototype.getElConfig.call(this)},getSubTplData:function(){var e=this,t=e.boxLabel,n=e.boxLabelAlign,i="before"===n;return Ext.apply(Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments),{disabled:e.readOnly||e.disabled,wrapInnerCls:e.wrapInnerCls,boxLabel:t,boxLabelCls:e.boxLabelCls,boxLabelAlign:n,labelAlignedBefore:i,afterLabelCls:i?e.afterLabelCls:"",noBoxLabelCls:t?"":e.noBoxLabelCls,role:e.ariaRole})},initEvents:function(){var e=this;Ext.form.field.Base.prototype.initEvents.call(this),e.mon(e.inputEl,"click",e.onBoxClick,e,{translate:!1})},setBoxLabel:function(e){var t=this;t.boxLabel=e,t.rendered&&(t.boxLabelEl.setHtml(e),t.innerWrapEl[e?"removeCls":"addCls"](t.noBoxLabelCls),t.updateLayout())},onBoxClick:function(){var e=this;e.disabled||e.readOnly||e.setValue(!e.checked)},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var e=this.uncheckedValue,t=Ext.isDefined(e)?e:null;return this.checked?this.inputValue:t},isChecked:function(e,t){return e===!0||"true"===e||"1"===e||1===e||((Ext.isString(e)||Ext.isNumber(e))&&t?e==t:this.onRe.test(e))},setRawValue:function(e){var t=this,n=t.inputEl,i=t.isChecked(e,t.inputValue);return n&&t[i?"addCls":"removeCls"](t.checkedCls),t.checked=t.rawValue=i,t.duringSetValue||(t.lastValue=i),i},setValue:function(e){var t,n,i,r,o=this;if(Ext.isArray(e))for(t=o.getManager().getByName(o.name,o.getFormId()).items,i=t.length,n=0;i>n;++n)r=t[n],r.setValue(Ext.Array.contains(e,r.inputValue));else o.duringSetValue=!0,Ext.form.field.Base.prototype.setValue.apply(this,arguments),delete o.duringSetValue;return o},valueToRaw:Ext.identityFn,onChange:function(e){var t=this,n=t.handler;n&&Ext.callback(n,t.scope,[t,e],0,t),Ext.form.field.Base.prototype.onChange.apply(this,arguments),t.reference&&t.publishState&&t.publishState("checked",e)},resetOriginalValue:function(e){var t,n,i,r,o=this;if(!e)for(t=o.getManager().getByName(o.name,o.getFormId()).items,i=t.length,r=0;i>r;++r)n=t[r],n!==o&&t[r].resetOriginalValue(!0);Ext.form.field.Base.prototype.resetOriginalValue.call(this)},beforeDestroy:function(){Ext.form.field.Base.prototype.beforeDestroy.call(this),this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var e=this,t=e.inputEl;Ext.form.field.Base.prototype.onEnable.call(this),t&&(t.dom.disabled=e.readOnly)},setReadOnly:function(e){var t=this,n=t.inputEl;n&&(n.dom.disabled=!!e||t.disabled),Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var e,t=this;return t.formId||(e=t.up("form"),e&&(t.formId=e.id)),t.formId}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:!0,box:!0,field:!0,checkboxfield:!0,checkbox:!0},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0),Ext.cmd.derive("Ext.selection.RowModel",Ext.selection.DataViewModel,{enableKeyNav:!0,isRowModel:!0,deselectOnContainerClick:!1,onUpdate:function(e){var t,n=this,i=n.view;i&&n.isSelected(e)&&(t=i.indexOf(e),i.onRowSelect(t),e===n.lastFocused&&i.onRowFocus(t,!0))},onSelectChange:function(e,t,n,i){var r,o,a=this,s=a.views||[a.view],l=s.length,d=a.store.indexOf(e),u=t?"select":"deselect";if((n||a.fireEvent("before"+u,a,e,d))!==!1&&i()!==!1){for(r=0;l>r;r++)o=s[r],d=o.indexOf(e),-1!==o.indexOf(e)&&(t?o.onRowSelect(d,n):o.onRowDeselect(d,n));n||a.fireEvent(u,a,e,d)}},onEditorTab:function(e,t){var n,i=this,r=e.context.view,o=e.getActiveRecord(),a=e.context,s=t.shiftKey?"left":"right";do if(n=a,a=r.walkCells(a,s,t,i.preventWrap),n&&n.isEqual(a))return;while(a&&(!a.column.getEditor(o)||!e.startEditByPosition(a)))},getCurrentPosition:function(){var e=this.selected.getAt(0);return e?new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(e),0):void 0},selectByPosition:function(e,t){e.isCellContext||(e=new Ext.grid.CellContext(this.view).setPosition(e.row,e.column)),this.select(e.record,t)},selectNext:function(e,t){var n,i=this,r=i.store,o=i.getSelection(),a=o[o.length-1],s=i.view.indexOf(a)+1;return s===r.getCount()||0===s?n=!1:(i.doSelect(s,e,t),n=!0),n},selectPrevious:function(e,t){var n,i=this,r=i.getSelection(),o=r[0],a=i.view.indexOf(o)-1;return 0>a?n=!1:(i.doSelect(a,e,t),n=!0),n},isRowSelected:function(e){return this.isSelected(e)},isCellSelected:function(e,t){return this.isSelected(t)}},0,0,0,0,["selection.rowmodel"],0,[Ext.selection,"RowModel"],0),Ext.cmd.derive("Ext.grid.ColumnLayout",Ext.layout.container.HBox,{type:"gridcolumn",firstHeaderCls:"x-column-header-first",lastHeaderCls:"x-column-header-last",initLayout:function(){Ext.layout.container.HBox.prototype.initLayout.call(this),void 0===this.scrollbarWidth&&(this.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width)},beginLayout:function(e){var t,n,i=this,r=i.owner,o=r.grid?r.grid.getView():null,a=i.firstHeaderCls,s=i.lastHeaderCls,l=[a,s],d=i.getVisibleItems(),u=d.length;for(o&&o.scrollFlags.x&&(i.viewScrollX=o.getScrollX(),r.suspendEvent("scroll"),o.suspendEvent("scroll")),Ext.layout.container.HBox.prototype.beginLayout.call(this,e),t=0;u>t;t++)n=d[t],1===u?n.addCls(l):0===t?(n.addCls(a),n.removeCls(s)):t===u-1?(n.removeCls(a),n.addCls(s)):n.removeCls(l);i.scrollbarWidth=0,r.isRootHeader&&i.determineScrollbarWidth(e),i.scrollbarWidth||(e.manageScrollbar=!1)},moveItemBefore:function(e,t){var n=e.ownerCt;return e!==t&&n&&n.remove(e,!1),Ext.layout.container.HBox.prototype.moveItemBefore.call(this,e,t)},determineScrollbarWidth:function(e){var t=this,n=t.owner,i=n.grid,r=n.reserveScrollbar===!1,o=i.reserveScrollbar&&!r,a=!o&&!r&&i.view.scrollFlags.y;e.manageScrollbar=a,i.ownerGrid.collapsed||!o&&!a||delete t.scrollbarWidth},calculate:function(e){var t,n,i,r,o,a,s,l,d,u=this,c=u.owner.grid,h=e.viewContext,p=e.state,f=e.context;if(Ext.layout.container.HBox.prototype.calculate.call(this,e),c&&p.parallelDone){if(t=h.lockingPartnerContext,n=c.ownerGrid,n.forceFit&&!p.reflexed&&u.convertWidthsToFlexes(e))return u.cacheFlexes(e),u.done=!1,void e.invalidate({state:{reflexed:!0,scrollbarAdjustment:u.getScrollbarAdjustment(e)}});if(void 0===(i=p.columnsChanged)){for(r=e.target.getVisibleGridColumns(),i=!1,a=0,o=r.length;o>a;a++)s=f.getCmp(r[a]),s.lastBox&&s.props.width===s.lastBox.width||((i||(i=[]))[a]=s);p.columnsChanged=i,e.setProp("columnsChanged",i)}if(e.manageScrollbar&&(l=u.getScrollbarAdjustment(e))){if(d=h.getProp("viewOverflowY"),void 0===d)return void(u.done=!1);d||(t&&(t.invalidate(),t.headerContext.invalidate()),h.invalidate(),e.invalidate({state:{scrollbarAdjustment:0}}))}}},finishedLayout:function(e){var t=this,n=t.owner,i=n.grid?n.grid.getView():null,r=t.viewScrollX;Ext.layout.container.HBox.prototype.finishedLayout.call(this,e),i&&i.scrollFlags.x&&(void 0!==r&&n.tooNarrow&&n.componentLayoutCounter&&n.setScrollX(r),i.resumeEvent("scroll"),n.resumeEvent("scroll"))},convertWidthsToFlexes:function(e){var t,n,i,r,o,a=this,s=0,l=a.sizeModels.calculated;for(t=e.childItems,n=t.length,i=0;n>i;i++)r=t[i],o=r.target,s+=r.props.width,o.fixed||o.resizable===!1||(o.flex=e.childItems[i].flex=r.props.width,o.width=null,r.widthModel=l);return s!==e.props.width},getScrollbarAdjustment:function(e){var t=this,n=e.state,i=t.owner.grid,r=n.scrollbarAdjustment;return void 0===r&&(r=0,(i.reserveScrollbar||e.manageScrollbar&&!i.ownerGrid.layout.ownerContext.heightModel.shrinkWrap)&&(r=t.scrollbarWidth),n.scrollbarAdjustment=r),r},getContainerSize:function(e){var t,n,i,r,o,a,s,l,d=this;return d.owner.isRootHeader?(l=Ext.layout.container.HBox.prototype.getContainerSize.call(this,e),l.gotWidth&&(l.width-=d.getScrollbarAdjustment(e)),l):(i=e.paddingContext.getPaddingInfo(),t=n=0,e.widthModel.shrinkWrap||(++n,a=e.getProp("innerWidth"),r="number"==typeof a,r&&(++t,a-=i.width,0>a&&(a=0))),e.heightModel.shrinkWrap||(++n,s=e.getProp("innerHeight"),o="number"==typeof s,o&&(++t,s-=i.height,0>s&&(s=0))),{width:a,height:s,needed:n,got:t,gotAll:t===n,gotWidth:r,gotHeight:o})},publishInnerCtSize:function(e){var t=this,n=t.owner,i=e.peek("contentWidth"),r=0;return null!=i&&n.isRootHeader&&(r=-e.state.scrollbarAdjustment),Ext.layout.container.HBox.prototype.publishInnerCtSize.call(this,e,r)}},0,0,0,0,["layout.gridcolumn"],0,[Ext.grid,"ColumnLayout"],0),Ext.define("Ext.rtl.grid.ColumnLayout",{override:"Ext.grid.ColumnLayout",determineScrollbarWidth:function(e){var t=this,n=t.owner.grid.view;arguments.callee.$previous.call(this,e),n.getInherited().rtl&&(n.bufferedRenderer&&Ext.supports.xOriginBug?t.scrollbarWidth=-Math.abs(t.scrollbarWidth):(Ext.supports.rtlVertScrollbarOverflowBug||Ext.supports.rtlVertScrollbarOnRight)&&(t.scrollbarWidth=0))},calculateParallel:function(){var e=this,t=e.owner;return t.isRootHeader&&(Ext.supports.rtlVertScrollbarOnRight&&t.ownerCt.view.getInherited().rtl||t.grid.view.bufferedRenderer&&Ext.supports.xOriginBug)&&(e.padding.right=e.scrollbarWidth),(arguments.callee.$previous||Ext.layout.container.HBox.prototype.calculateParallel).apply(this,arguments)}}),Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:!1,trackOver:!1,tolerance:5,autoStart:!1,constructor:function(e){var t=this;Ext.apply(t,e),t.dragRegion=new Ext.util.Region(0,0,0,0),t.el&&t.initEl(t.el),t.mixins.observable.constructor.call(t),t.disabled&&t.disable()},initEl:function(e){var t=this,n=t.delegate;t.el=e=Ext.get(e),n&&n.isElement&&(t.handle=n),t.delegate=t.handle?void 0:t.delegate,t.handle||(t.handle=e),t.handleListeners={scope:t,delegate:t.delegate,mousedown:t.onMouseDown,dragstart:t.onDragStart},Ext.supports.TouchEvents||!t.trackOver&&!t.overCls||Ext.apply(t.handleListeners,{mouseover:t.onMouseOver,mouseout:t.onMouseOut}),t.mon(t.handle,t.handleListeners),t.keyNav=new Ext.util.KeyNav({target:e,up:t.onResizeKeyDown,left:t.onResizeKeyDown,right:t.onResizeKeyDown,down:t.onResizeKeyDown,scope:t})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){var e=this;e.endDrag({}),e.clearListeners(),e.el=e.handle=null},onMouseOver:function(e,t){var n,i,r,o,a,s=this;if(!s.disabled&&(e.within(e.target,!0,!0)||s.delegate)){if(n=s.handleCls,s.mouseIsOut=!1,n)for(r=0,o=s.handleEls.length;o>r;r++)i=s.handleEls[r],a=i.delegateCls,a||(a=i.delegateCls=n+"-"+i.region+"-over"),i.addCls([a,s.overCls]);s.fireEvent("mouseover",s,e,s.delegate?e.getTarget(s.delegate,t):s.handle)}},onMouseOut:function(e){var t,n,i,r=this;if(r.mouseIsDown)r.mouseIsOut=!0;else{if(r.handleCls)for(n=0,i=r.handleEls.length;i>n;n++)t=r.handleEls[n],t.removeCls([t.delegateCls,r.overCls]);r.fireEvent("mouseout",r,e)}},onMouseDown:function(e,t){var n=this;n.disabled||e.dragTracked||(n.dragTarget=n.delegate?t:n.handle.dom,n.startXY=n.lastXY=e.getXY(),n.startRegion=Ext.fly(n.dragTarget).getRegion(),n.fireEvent("mousedown",n,e)!==!1&&n.fireEvent("beforedragstart",n,e)!==!1&&n.onBeforeStart(e)!==!1&&(n.mouseIsDown=!0,e.dragTracked=!0,n.el.setCapture(),e.stopPropagation(),n.preventDefault!==!1&&e.preventDefault(),Ext.getDoc().on({scope:n,capture:!0,mouseup:n.onMouseUp,mousemove:n.onMouseMove,selectstart:n.stopSelect}),n.dragEnded=!1,n.tolerance?n.autoStart&&(n.timer=Ext.defer(n.triggerStart,n.autoStart===!0?1e3:n.autoStart,n,[e])):n.triggerStart()))},onMouseMove:function(e){var t=this,n=e.getXY(),i=t.startXY;if(e.stopPropagation(),t.preventDefault!==!1&&e.preventDefault(),!t.dragEnded){if(t.lastXY=n,!t.active){if(!(Math.max(Math.abs(i[0]-n[0]),Math.abs(i[1]-n[1]))>t.tolerance))return;t.triggerStart(e)}t.fireEvent("mousemove",t,e)===!1?t.onMouseUp(e):(t.onDrag(e),t.fireEvent("drag",t,e))}},onMouseUp:function(e){var t=this;t.mouseIsDown=!1,t.mouseIsOut&&(t.mouseIsOut=!1,t.onMouseOut(e)),t.preventDefault!==!1&&e.preventDefault(),Ext.isIE&&document.releaseCapture&&document.releaseCapture(),t.fireEvent("mouseup",t,e),t.endDrag(e)},endDrag:function(e){var t=this,n=t.active;Ext.getDoc().un({mousemove:t.onMouseMove,mouseup:t.onMouseUp,selectstart:t.stopSelect,capture:!0,scope:t}),t.clearStart(),t.active=!1,n&&(t.dragEnded=!0,t.onEnd(e),t.fireEvent("dragend",t,e)),t._constrainRegion=null},triggerStart:function(e){var t=this;t.clearStart(),t.active=!0,t.onStart(e),t.fireEvent("dragstart",t,e)},clearStart:function(){var e=this.timer;e&&(clearTimeout(e),this.timer=null)},stopSelect:function(e){return e.stopEvent(),!1},onBeforeStart:function(){},onStart:function(){},onDrag:function(){},onEnd:function(){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var e=this;if(e.constrainTo){if(e.constrainTo instanceof Ext.util.Region)return e.constrainTo;e._constrainRegion||(e._constrainRegion=Ext.fly(e.constrainTo).getViewRegion())}else e._constrainRegion||(e._constrainRegion=e.getDragCt().getViewRegion());return e._constrainRegion},getXY:function(e){return e?this.constrainModes[e](this,this.lastXY):this.lastXY},getOffset:function(e){var t=this.getXY(e),n=this.startXY;return[t[0]-n[0],t[1]-n[1]]},onDragStart:function(e){e.stopPropagation()},constrainModes:{point:function(e,t){var n=e.dragRegion,i=e.getConstrainRegion();return i?(n.x=n.left=n[0]=n.right=t[0],n.y=n.top=n[1]=n.bottom=t[1],n.constrainTo(i),[n.left,n.top]):t},dragTarget:function(e,t){var n,i=e.startXY,r=e.startRegion.copy(),o=e.getConstrainRegion();return o?(r.translateBy(t[0]-i[0],t[1]-i[1]),r.right>o.right&&(t[0]+=n=o.right-r.right,r.left+=n),r.left<o.left&&(t[0]+=o.left-r.left),r.bottom>o.bottom&&(t[1]+=n=o.bottom-r.bottom,r.top+=n),r.top<o.top&&(t[1]+=o.top-r.top),t):t}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0),Ext.cmd.derive("Ext.grid.plugin.HeaderResizer",Ext.plugin.Abstract,{disabled:!1,config:{dynamic:!1},colHeaderCls:"x-column-header",minColWidth:40,maxColWidth:1e3,eResizeCursor:"col-resize",init:function(e){var t=this;t.headerCt=e,e.on("render",t.afterHeaderRender,t,{single:t}),t.minColWidth||(t.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth)},destroy:function(){var e=this.tracker;e&&(delete e.onBeforeStart,delete e.onStart,delete e.onDrag,delete e.onEnd,e.destroy(),this.tracker=null)},afterHeaderRender:function(){var e=this,t=e.headerCt,n=t.el;t.mon(n,"mousemove",e.onHeaderCtMouseMove,e),e.markerOwner=e.ownerGrid=e.headerCt.up("tablepanel"),e.markerOwner.ownerLockable&&(e.markerOwner=e.markerOwner.ownerLockable),e.tracker=new Ext.dd.DragTracker({disabled:e.disabled,onBeforeStart:e.onBeforeStart.bind(e),onStart:e.onStart.bind(e),onDrag:e.onDrag.bind(e),onEnd:e.onEnd.bind(e),tolerance:3,autoStart:300,el:n})},onHeaderCtMouseMove:function(e){var t=this;t.headerCt.dragging||t.disabled?t.activeHd&&(t.activeHd.el.dom.style.cursor="",delete t.activeHd):t.findActiveHeader(e)},findActiveHeader:function(e){var t,n,i,r,o=this,a=e.getTarget("."+o.colHeaderCls,3,!0),s=o.ownerGrid,l=s.ownerLockable;if(a){if(t=Ext.getCmp(a.id),t.isAtEndEdge(e)){if(1===o.headerCt.visibleColumnManager.getColumns().length&&o.headerCt.forceFit)return;n=t}else t.isAtStartEdge(e)&&(i=o.headerCt.visibleColumnManager.getColumns(),r=t.isGroupHeader?t.getGridColumns()[0]:t,n=i[Ext.Array.indexOf(i,r)-1],n||!l||s.isLocked||(i=l.lockedGrid.headerCt.visibleColumnManager.getColumns(),n=i[i.length-1]));n?(n.isGroupHeader&&(i=n.getGridColumns(),n=i[i.length-1]),n&&!n.fixed&&n.resizable!==!1&&(o.activeHd=n,t.el.dom.style.cursor=o.eResizeCursor,t.triggerEl&&(t.triggerEl.dom.style.cursor=o.eResizeCursor))):(t.el.dom.style.cursor="",t.triggerEl&&(t.triggerEl.dom.style.cursor=""),o.activeHd=null)}return o.activeHd},onBeforeStart:function(e){var t=this;return t.dragHd=Ext.supports.Touch?t.findActiveHeader(e):t.activeHd,t.dragHd&&!t.headerCt.dragging?(t.xDelta=t.dragHd.getX()+t.dragHd.getWidth()-t.tracker.getXY()[0],t.tracker.constrainTo=t.getConstrainRegion(),!0):(t.headerCt.dragging=!1,!1)},getConstrainRegion:function(){var e,t,n=this,i=n.dragHd.el,r=n.ownerGrid,o=r.getSizeModel().width,a=o.shrinkWrap?n.headerCt.getWidth()-n.headerCt.visibleColumnManager.getColumns().length*n.minColWidth:n.maxColWidth;return n.headerCt.forceFit?(e=n.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"),e&&n.headerInSameGrid(e)&&(a=i.getWidth()+(e.getWidth()-n.minColWidth))):r.isLocked&&o.shrinkWrap&&(a=n.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(!0)-r.getWidth()-(r.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*n.minColWidth+Ext.getScrollbarSize().width)),t=n.adjustConstrainRegion(i.getRegion(),0,0,0,n.minColWidth),t.right=i.getX()+a,t},onStart:function(){var e,t,n,i,r,o,a=this,s=a.dragHd,l=s.el.getWidth(),d=s.getRootHeaderCt();a.headerCt.dragging=!0,a.origWidth=l,a.dynamic||(n=a.markerOwner,n.frame&&n.resizable&&(a.gridOverflowSetting=n.el.dom.style.overflow,n.el.dom.style.overflow="hidden"),e=a.getLeftMarkerX(n),i=n.getLhsMarker(),r=n.getRhsMarker(),o=a.ownerGrid.body.getHeight()+d.getHeight(),t=d.getOffsetsTo(n)[1]-n.el.getBorderWidth("t"),i.setLocalY(t),r.setLocalY(t),i.setHeight(o),r.setHeight(o),a.setMarkerX(i,e),a.setMarkerX(r,e+l))},onDrag:function(){var e=this;e.dynamic?e.doResize():e.setMarkerX(e.getMovingMarker(e.markerOwner),e.calculateDragX(e.markerOwner))},getMovingMarker:function(e){return e.getRhsMarker()},onEnd:function(e){var t,n=this;n.headerCt.dragging=!1,n.dragHd&&(n.dynamic||(t=n.headerCt.up("tablepanel"),t.ownerLockable&&(t=t.ownerLockable),"gridOverflowSetting"in n&&(t.el.dom.style.overflow=n.gridOverflowSetting),n.setMarkerX(t.getLhsMarker(),-9999),n.setMarkerX(t.getRhsMarker(),-9999)),n.doResize()),n.onHeaderCtMouseMove(e)},doResize:function(){var e,t=this,n=t.dragHd,i=t.tracker.getOffset("point");n&&i[0]&&(n.flex&&delete n.flex,Ext.suspendLayouts(),t.adjustColumnWidth(i[0]-t.xDelta),t.headerCt.forceFit&&(e=n.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"),e&&!t.headerInSameGrid(e)&&(e=null),e&&(delete e.flex,e.setWidth(e.getWidth()-i[0]))),Ext.resumeLayouts(!0));
},headerInSameGrid:function(e){var t=this.dragHd.up("tablepanel");return!!e.up(t)},disable:function(){var e=this.tracker;this.disabled=!0,e&&e.disable()},enable:function(){var e=this.tracker;this.disabled=!1,e&&e.enable()},calculateDragX:function(e){return this.tracker.getXY("point")[0]+this.xDelta-e.getX()-e.el.getBorderWidth("l")},getLeftMarkerX:function(e){return this.dragHd.getX()-e.getX()-e.el.getBorderWidth("l")-1},setMarkerX:function(e,t){e.setLocalX(t)},adjustConstrainRegion:function(e,t,n,i,r){return e.adjust(t,n,i,r)},adjustColumnWidth:function(e){this.dragHd.setWidth(this.origWidth+e)}},0,0,0,0,["plugin.gridheaderresizer"],0,[Ext.grid.plugin,"HeaderResizer"],0),Ext.define("Ext.rtl.grid.plugin.HeaderResizer",{override:"Ext.grid.plugin.HeaderResizer",onBeforeStart:function(){var e=this;return this.headerCt.isOppositeRootDirection()?(e.dragHd=e.activeHd,e.dragHd&&!e.headerCt.dragging?(e.xDelta=e.dragHd.getX()-e.tracker.getXY()[0],this.tracker.constrainTo=this.getConstrainRegion(),!0):(e.headerCt.dragging=!1,!1)):arguments.callee.$previous.apply(this,arguments)},adjustColumnWidth:function(e){this.headerCt.isOppositeRootDirection()&&(e=-e),arguments.callee.$previous.call(this,e)},adjustConstrainRegion:function(e,t,n,i,r){return this.headerCt.isOppositeRootDirection()?e.adjust(t,-r,i,-n):arguments.callee.$previous.apply(this,arguments)},calculateDragX:function(e){var t=e.getX(),n=this.tracker.getXY("point")[0];return this.headerCt.isOppositeRootDirection()?n-t+this.xDelta:arguments.callee.$previous.apply(this,arguments)},getMovingMarker:function(e){return this.headerCt.isOppositeRootDirection()?e.getLhsMarker():e.getRhsMarker()},setMarkerX:function(e,t){var n=this.headerCt;n.getInherited().rtl&&!n.isOppositeRootDirection()?e.rtlSetLocalX(t):arguments.callee.$previous.apply(this,arguments)}}),Ext.cmd.derive("Ext.dd.DragZone",Ext.dd.DragSource,{constructor:function(e,t){var n=this,i=n.containerScroll;Ext.dd.DragSource.prototype.constructor.call(this,e,t),i&&(e=n.scrollEl||e,e=Ext.get(e),Ext.isObject(i)&&(e.ddScrollConfig=i),Ext.dd.ScrollManager.register(e))},getDragData:function(e){return Ext.dd.Registry.getHandleFromEvent(e)},onInitDrag:function(e,t){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(e,t),!0},getRepairXY:function(){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragSource.prototype.destroy.call(this),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}},1,0,0,0,0,0,[Ext.dd,"DragZone"],0),Ext.cmd.derive("Ext.grid.header.DragZone",Ext.dd.DragZone,{colHeaderSelector:".x-column-header",colInnerSelector:".x-column-header-inner",maxProxyWidth:120,constructor:function(e){var t=this;t.headerCt=e,t.ddGroup=t.getDDGroup(),t.autoGroup=!0,Ext.dd.DragZone.prototype.constructor.call(this,e.el),t.proxy.el.addCls("x-grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(e){if(e.getTarget(this.colInnerSelector)){var t,n,i=e.getTarget(this.colHeaderSelector);if(i&&(t=Ext.getCmp(i.id),!this.headerCt.dragging&&t.draggable&&!t.isAtStartEdge(e)&&!t.isAtEndEdge(e)))return n=document.createElement("div"),n.role="presentation",n.innerHTML=t.text,{ddel:n,header:t}}return!1},onBeforeDrag:function(){return!(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=!0,this.headerCt.hideMenu(),Ext.dd.DragZone.prototype.onInitDrag.apply(this,arguments)},onDragDrop:function(){this.headerCt.dragging=!1,Ext.dd.DragZone.prototype.onDragDrop.apply(this,arguments)},afterRepair:function(){Ext.dd.DragZone.prototype.afterRepair.call(this),this.headerCt.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}},1,0,0,0,0,0,[Ext.grid.header,"DragZone"],0),Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(e,t,n){e&&this.initTarget(e,t,n)},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0),Ext.cmd.derive("Ext.dd.ScrollManager",Ext.Base,{singleton:!0,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var e=Ext.dd.DragDropManager;e.fireEvents=Ext.Function.createSequence(e.fireEvents,this.onFire,this),e.stopDrag=Ext.Function.createSequence(e.stopDrag,this.onStop,this),this.doScroll=this.doScroll.bind(this),this.ddmInstance=e,this.els={},this.dragEl=null,this.proc={}},onStop:function(){var e=Ext.dd.ScrollManager;e.dragEl=null,e.clearProc()},triggerRefresh:function(){this.ddmInstance.dragCurrent&&this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)},doScroll:function(){var e=this;if(e.ddmInstance.dragCurrent){var t=e.proc,n=t.el,i=t.component,r=t.el.ddScrollConfig,o=r&&r.increment?r.increment:e.increment,a=r&&"animate"in r?r.animate:e.animate,s=function(){e.triggerRefresh()};a&&(a===!0?a={callback:s}:a.callback=a.callback?Ext.Function.createSequence(a.callback,s):s),i?(o*=e.dirTrans[t.dir],"up"===t.dir||"down"===t.dir?i.scrollBy(0,o,a):i.scrollBy(o,0,a)):n.scroll(t.dir,o,a),a||s()}},clearProc:function(){var e=this.proc;e.id&&clearInterval(e.id),e.id=0,e.el=null,e.dir=""},startProc:function(e,t){var n,i,r=this,o=r.proc;r.clearProc(),o.el=e,o.dir=t,n=e.ddScrollConfig?e.ddScrollConfig.ddGroup:void 0,i=e.ddScrollConfig&&e.ddScrollConfig.frequency?e.ddScrollConfig.frequency:r.frequency,(void 0===n||r.ddmInstance.dragCurrent.ddGroup===n)&&(o.id=Ext.interval(r.doScroll,i))},onFire:function(e,t){var n,i,r,o,a,s,l,d=this;if(!t&&d.ddmInstance.dragCurrent){d.dragEl&&d.dragEl===d.ddmInstance.dragCurrent||(d.dragEl=d.ddmInstance.dragCurrent,d.refreshCache()),n=e.getPoint(),i=d.proc,r=d.els;for(o in r)if(a=r[o],s=a._region,l=a.ddScrollConfig||d,s&&s.contains(n)&&a.isScrollable()){if(s.bottom-n.y<=l.vthresh)return void(i.el!==a&&d.startProc(a,"down"));if(s.right-n.x<=l.hthresh)return void(i.el!==a&&d.startProc(a,"right"));if(n.y-s.top<=l.vthresh)return void(i.el!==a&&d.startProc(a,"up"));if(n.x-s.left<=l.hthresh)return void(i.el!==a&&d.startProc(a,"left"))}d.clearProc()}},register:function(e){if(Ext.isArray(e))for(var t=0,n=e.length;n>t;t++)this.register(e[t]);else e=Ext.get(e),this.els[e.id]=e},unregister:function(e){if(Ext.isArray(e))for(var t=0,n=e.length;n>t;t++)this.unregister(e[t]);else e=Ext.get(e),delete this.els[e.id]},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:void 0,refreshCache:function(){var e,t=this.els;for(e in t)"object"==typeof t[e]&&(t[e]._region=t[e].getRegion())}},1,0,0,0,0,0,[Ext.dd,"ScrollManager"],0),Ext.cmd.derive("Ext.dd.DropTarget",Ext.dd.DDTarget,{constructor:function(e,t){this.el=Ext.get(e),Ext.apply(this,t),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),Ext.dd.DDTarget.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:!0})},containerScroll:!1,dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(){return this.overClass&&this.el.addCls(this.overClass),this.dropAllowed},notifyOver:function(){return this.dropAllowed},notifyOut:function(){this.overClass&&this.el.removeCls(this.overClass)},notifyDrop:function(){return this.overClass&&this.el.removeCls(this.overClass),!1},destroy:function(){Ext.dd.DDTarget.prototype.destroy.call(this),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}},1,0,0,0,0,0,[Ext.dd,"DropTarget"],0),Ext.cmd.derive("Ext.dd.Registry",Ext.Base,{singleton:!0,constructor:function(){this.elements={},this.handles={},this.autoIdSeed=0},getId:function(e,t){if("string"==typeof e)return e;var n=e.id;return n||t===!1||(n="extdd-"+ ++this.autoIdSeed,e.id=n),n},register:function(e,t){if(t=t||{},"string"==typeof e&&(e=document.getElementById(e)),t.ddel=e,this.elements[this.getId(e)]=t,t.isHandle!==!1&&(this.handles[t.ddel.id]=t),t.handles){var n,i,r=t.handles;for(n=0,i=r.length;i>n;n++)this.handles[this.getId(r[n])]=t}},unregister:function(e){var t,n,i,r=this.getId(e,!1),o=this.elements[r];if(o&&(delete this.elements[r],o.handles))for(t=o.handles,n=0,i=t.length;i>n;n++)delete this.handles[this.getId(t[n],!1)]},getHandle:function(e){return"string"!=typeof e&&(e=e.id),this.handles[e]},getHandleFromEvent:function(e){var t=e.getTarget();return t?this.handles[t.id]:null},getTarget:function(e){return"string"!=typeof e&&(e=e.id),this.elements[e]},getTargetFromEvent:function(e){var t=e.getTarget();return t?this.elements[t.id]||this.handles[t.id]:null}},1,0,0,0,0,0,[Ext.dd,"Registry"],0),Ext.cmd.derive("Ext.dd.DropZone",Ext.dd.DropTarget,{getTargetFromEvent:function(e){return Ext.dd.Registry.getTargetFromEvent(e)},onNodeEnter:function(){},onNodeOver:function(){return this.dropAllowed},onNodeOut:function(){},onNodeDrop:function(){return!1},onContainerOver:function(){return this.dropNotAllowed},onContainerDrop:function(){return!1},notifyEnter:function(){return this.dropNotAllowed},notifyOver:function(e,t,n){var i=this,r=i.getTargetFromEvent(t);return r?(i.lastOverNode!==r&&(i.lastOverNode&&i.onNodeOut(i.lastOverNode,e,t,n),i.onNodeEnter(r,e,t,n),i.lastOverNode=r),i.onNodeOver(r,e,t,n)):(i.lastOverNode&&(i.onNodeOut(i.lastOverNode,e,t,n),i.lastOverNode=null),i.onContainerOver(e,t,n))},notifyOut:function(e,t,n){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,e,t,n),this.lastOverNode=null)},notifyDrop:function(e,t,n){var i=this,r=i.getTargetFromEvent(t),o=r?i.onNodeDrop(r,e,t,n):i.onContainerDrop(e,t,n);return i.lastOverNode&&(i.onNodeOut(i.lastOverNode,e,t,n),i.lastOverNode=null),o},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}},0,0,0,0,0,0,[Ext.dd,"DropZone"],0),Ext.cmd.derive("Ext.grid.header.DropZone",Ext.dd.DropZone,{colHeaderCls:"x-column-header",proxyOffsets:[-4,-9],constructor:function(e){var t=this;t.headerCt=e,t.ddGroup=t.getDDGroup(),t.autoGroup=!0,Ext.dd.DropZone.prototype.constructor.call(this,e.el)},destroy:function(){Ext.dd.DropZone.prototype.destroy.call(this),Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(e){return e.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){return this.topIndicator||(this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-top",html:"&#160;"}),this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)),this.topIndicator},getBottomIndicator:function(){return this.bottomIndicator||(this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:"x-col-move-bottom",html:"&#160;"})),this.bottomIndicator},getLocation:function(e,t){var n,i=e.getXY()[0],r=Ext.fly(t).getRegion();return n=r.right-i<=(r.right-r.left)/2?"after":"before",{pos:n,header:Ext.getCmp(t.id),node:t}},positionIndicator:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p,f,g,m,x,v=this,y=e.header,E=v.getLocation(n,t),b=E.header,C=E.pos;if(b!==v.lastTargetHeader||C!==v.lastDropPos){if(i=y.nextSibling("gridcolumn:not([hidden])"),r=y.previousSibling("gridcolumn:not([hidden])"),v.lastTargetHeader=b,v.lastDropPos=C,!b.draggable&&"before"===C&&0===b.getIndex())return!1;if(e.dropLocation=E,y!==b&&("before"===C&&i!==b||"after"===C&&r!==b)&&!b.isDescendantOf(y)){for(f=Ext.dd.DragDropManager.getRelated(v),g=f.length,m=0;g>m;m++)x=f[m],x!==v&&x.invalidateDrop&&x.invalidateDrop();v.valid=!0,o=v.getTopIndicator(),a=v.getBottomIndicator(),"before"===C?(s="bc-tl",l="tc-bl"):(s="bc-tr",l="tc-br"),d=o.getAlignToXY(b.el,s),u=a.getAlignToXY(b.el,l),c=v.headerCt.el,h=c.getX()-v.indicatorXOffset,p=c.getX()+c.getWidth(),d[0]=Ext.Number.constrain(d[0],h,p),u[0]=Ext.Number.constrain(u[0],h,p),o.setXY(d),a.setXY(u),o.show(),a.show()}else v.invalidateDrop()}},invalidateDrop:function(){this.valid=!1,this.hideIndicators()},onNodeOver:function(e,t,n,i){var r,o,a,s,l=this,d=i.header;return i.header.el.dom===e?r=!1:(i.isLock=i.isUnlock=i.crossPanel=!1,o=l.getLocation(n,e).header,r=d.ownerCt===o.ownerCt,r||d.ownerCt.sealed||o.ownerCt.sealed||(r=!0,a=d.up("tablepanel"),s=o.up("tablepanel"),a!==s&&(i.crossPanel=!0,i.isLock=s.isLocked&&!a.isLocked,i.isUnlock=!s.isLocked&&a.isLocked,(i.isUnlock&&d.lockable===!1||i.isLock&&!d.isLockable())&&(r=!1)))),r?l.positionIndicator(i,e,n):l.valid=!1,l.valid?l.dropAllowed:l.dropNotAllowed},hideIndicators:function(){var e=this;e.getTopIndicator().hide(),e.getBottomIndicator().hide(),e.lastTargetHeader=e.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(e,t){var n,i=e.items;return e.isGroupHeader&&i.length&&(n=t?"last":"first",e=this.getNestedHeader(i[n](),t)),e},onNodeDrop:function(e,t,n,i){if(this.valid){var r,o,a,s,l,d=this,u=i.header,c=i.dropLocation,h=c.pos,p=c.header,f=u.ownerCt,g=f.getRootHeaderCt(),m=p.ownerCt,x=d.headerCt.visibleColumnManager,v=x.getHeaderIndex(u);i.isLock||i.isUnlock?(s=f.up("[scrollerOwner]"),r=m.items.indexOf(p),"after"===h&&r++,i.isLock?s.lock(u,r,m):s.unlock(u,r,m)):(r="after"===h?x.getHeaderIndex(d.getNestedHeader(p,1))+1:x.getHeaderIndex(d.getNestedHeader(p,0)),d.invalidateDrop(),l=u.getWidth(),Ext.suspendLayouts(),f.isDDMoveInGrid=m.isDDMoveInGrid=!i.crossPanel,u.isGroupHeader&&p.isGroupHeader&&u.setNestedParent(p),"before"===h?p.insertNestedHeader(u):(a="move"+h.charAt(0).toUpperCase()+h.substr(1),m[a](u,p)),r>=0&&(!p.isGroupHeader||p.items.length)&&v!==r&&(o=u.isGroupHeader?u.query(":not([hidden]):not([isGroupHeader])").length:1,r>=v&&o>1&&(r-=o),m.getRootHeaderCt().grid.view.moveColumn(v,r,o)),g.fireEvent("columnmove",f,u,v,r),f.isDDMoveInGrid=m.isDDMoveInGrid=!1,m.isGroupHeader&&!f.isGroupHeader?f!==m&&(u.savedFlex=u.flex,delete u.flex,u.width=l):f.isGroupHeader||u.savedFlex&&(u.flex=u.savedFlex,delete u.width),Ext.resumeLayouts(!0))}}},1,0,0,0,0,0,[Ext.grid.header,"DropZone"],0),Ext.cmd.derive("Ext.grid.plugin.HeaderReorderer",Ext.plugin.Abstract,{init:function(e){this.headerCt=e,e.on({boxready:this.onHeaderCtRender,single:!0,scope:this})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){var e=this;e.dragZone=new Ext.grid.header.DragZone(e.headerCt),e.dropZone=new Ext.grid.header.DropZone(e.headerCt),e.disabled&&e.dragZone.disable()},enable:function(){this.disabled=!1,this.dragZone&&this.dragZone.enable()},disable:function(){this.disabled=!0,this.dragZone&&this.dragZone.disable()}},0,0,0,0,["plugin.gridheaderreorderer"],0,[Ext.grid.plugin,"HeaderReorderer"],0),Ext.cmd.derive("Ext.grid.header.Container",Ext.container.Container,{border:!0,baseCls:"x-grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:!1,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:"x-column-header-open",menuSortAscCls:"x-hmenu-sort-asc",menuSortDescCls:"x-hmenu-sort-desc",menuColsIcon:"x-cols-icon",ddLock:!1,dragging:!1,sortOnClick:!0,enableFocusableContainer:!1,childHideCount:0,sortable:!0,enableColumnHide:!0,initComponent:function(){var e=this;e.headerCounter=0,e.plugins=e.plugins||[],e.defaults=e.defaults||{},e.isColumn||(e.enableColumnResize&&(e.resizer=new Ext.grid.plugin.HeaderResizer,e.plugins.push(e.resizer)),e.enableColumnMove&&(e.reorderer=new Ext.grid.plugin.HeaderReorderer,e.plugins.push(e.reorderer))),e.isColumn&&!e.isGroupHeader?e.items&&0!==e.items.length||(e.isContainer=e.isFocusableContainer=!1,e.focusable=!0,e.layout={type:"container",calculate:Ext.emptyFn}):(e.layout=Ext.apply({type:"gridcolumn",align:"stretch"},e.initialConfig.layout),e.defaults.columnLines=e.columnLines,e.isGroupHeader?(e.visibleColumnManager=new Ext.grid.ColumnManager(!0,e),e.columnManager=new Ext.grid.ColumnManager(!1,e)):(e.isRootHeader=!0,e.hiddenHeaders||(e.enableFocusableContainer=!0,e.ariaRole="row"),e.columnManager=new Ext.grid.ColumnManager(!1,e),e.visibleColumnManager=new Ext.grid.ColumnManager(!0,e),e.grid&&(e.grid.columnManager=e.columnManager,e.grid.visibleColumnManager=e.visibleColumnManager))),e.menuTask=new Ext.util.DelayedTask(e.updateMenuDisabledState,e),Ext.container.Container.prototype.initComponent.call(this)},insertNestedHeader:function(e){var t,n=this,i=e.ownerCt,r=n.ownerCt,o=r.layout.owner;i&&(n.isGroupHeader&&!r.isNestedParent&&(t=o.items.indexOf(n)),i.remove(e,!1)),void 0===t&&(t=o.items.indexOf(n)),o.insert(t,e)},isNested:function(){return!!this.getRootHeaderCt().down("[isNestedParent]")},isNestedGroupHeader:function(){var e=this,t=e.getRefOwner().query(">:not([hidden])");return 1===t.length&&t[0]===e},maybeShowNestedGroupHeader:function(){var e,t=this.items;t&&1===t.length&&(e=t.getAt(0))&&e.hidden&&e.show()},setNestedParent:function(e){e.isNestedParent=!1,e.ownerCt.isNestedParent=!(1!==this.ownerCt.items.length||1!==e.ownerCt.items.length)},initEvents:function(){var e,t,n=this;Ext.container.Container.prototype.initEvents.call(this),n.isColumn||n.isGroupHeader||(e=n.onHeaderCtEvent,t={click:e,dblclick:e,contextmenu:e,mouseover:n.onHeaderCtMouseOver,mouseout:n.onHeaderCtMouseOut,scope:n},Ext.supports.Touch&&(t.longpress=n.onHeaderCtLongPress),n.mon(n.el,t))},onHeaderCtEvent:function(e,t){var n,i,r,o=this,a=o.getHeaderElByEvent(e);return o.longPressFired?void(o.longPressFired=!1):void(a&&!o.ddLock&&(n=Ext.getCmp(a.id),n&&(i=n[n.clickTargetName],(!n.isGroupHeader&&!n.isContainer||e.within(i))&&("click"===e.type||"tap"===e.type?(r=n.onTitleElClick(e,i,o.sortOnClick),r?o.onHeaderTriggerClick(r,e,Ext.supports.Touch?r.el:r.triggerEl):o.onHeaderClick(n,e,t)):"contextmenu"===e.type?o.onHeaderContextMenu(n,e,t):"dblclick"===e.type&&n.resizable&&n.onTitleElDblClick(e,i.dom)))))},onHeaderCtMouseOver:function(e){var t,n,i;e.within(this.el,!0)||(t=e.getTarget("."+Ext.grid.column.Column.prototype.baseCls),n=t&&Ext.getCmp(t.id),n&&(i=n[n.clickTargetName],e.within(i)&&n.onTitleMouseOver(e,i.dom)))},onHeaderCtMouseOut:function(e){var t,n,i="."+Ext.grid.column.Column.prototype.baseCls,r=e.getTarget(i),o=e.getRelatedTarget(i);r!==o&&(r&&(t=Ext.getCmp(r.id),t&&(n=t[t.clickTargetName],t.onTitleMouseOut(e,n.dom))),o&&(t=Ext.getCmp(o.id),t&&(n=t[t.clickTargetName],t.onTitleMouseOver(e,n.dom))))},onHeaderCtLongPress:function(e){var t=this,n=t.getHeaderElByEvent(e),i=Ext.getCmp(n.id);i.menuDisabled||(t.longPressFired=!0,t.showMenuBy(e,n,i))},getHeaderElByEvent:function(e){return e.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){return this.hiddenHeaders?!1:Ext.container.Container.prototype.isLayoutRoot.call(this)},getRootHeaderCt:function(){var e=this;return e.isRootHeader?e:e.up("[isRootHeader]")},onDestroy:function(){var e=this;e.menu&&e.menu.un("hide",e.onMenuHide,e),e.menuTask.cancel(),Ext.container.Container.prototype.onDestroy.call(this),Ext.destroy(e.visibleColumnManager,e.columnManager,e.menu),e.columnManager=e.visibleColumnManager=null},applyColumnsState:function(e){if(e&&e.length){var t,n,i,r,o=this,a=o.items.items,s=a.length,l=0,d=e.length,u=!1,c=[],h={},p=[];for(t=0;d>t;t++)i=e[t],i.index=t,h[i.id]=i;for(l=0;s>l;l++)n=a[l],i=h[n.getStateId()],i?(r=i.index,c[r]=n,l!==r&&(u=!0),n.applyColumnState&&n.applyColumnState(i)):p.push({index:l,column:n});if(c=Ext.Array.clean(c),d=p.length)for(l=0;d>l;l++)i=p[l],r=i.index,r<c.length?(u=!0,Ext.Array.splice(c,r,0,i.column)):c.push(i.column);u&&(o.removeAll(!1),o.add(c),o.purgeCache())}},getColumnsState:function(){var e,t=this,n=[];return t.items.each(function(t){e=t.getColumnState&&t.getColumnState(),e&&n.push(e)}),n},onAdd:function(e){var t=this;e.headerId||(e.headerId=e.initialConfig.id||Ext.id(null,"header-")),void 0===e.sortable&&(e.sortable=t.sortable),e.getStateId()||(e.stateId=e.initialConfig.id||"h"+ ++t.headerCounter),Ext.container.Container.prototype.onAdd.apply(this,arguments),t.onHeadersChanged(e,t.isDDMoveInGrid)},move:function(e){var t,n=this,i=n.items;e.isComponent?(t=e,e=i.indexOf(t)):t=i.getAt(e),t.visibleFromIdx=n.getRootHeaderCt().visibleColumnManager.indexOf(t),Ext.container.Container.prototype.move.apply(this,arguments)},onMove:function(e){var t,n=this,i=n.getRootHeaderCt(),r=i.visibleColumnManager,o=1;n.onHeadersChanged(e,!0),t=r.indexOf(e),t>=e.visibleFromIdx&&t++,Ext.container.Container.prototype.onMove.apply(this,arguments),e.isGroupHeader&&(o=e.visibleColumnManager.getColumns().length),i.onHeaderMoved(e,o,e.visibleFromIdx,t)},onRemove:function(e){var t=this,n=t.ownerCt;Ext.container.Container.prototype.onRemove.apply(this,arguments),t.destroying||(t.isDDMoveInGrid||t.onHeadersChanged(e,!1),t.isGroupHeader&&!t.isNestedParent&&n&&!t.items.getCount()&&(e.rendered&&t.detachComponent(e),Ext.suspendLayouts(),n.remove(t),Ext.resumeLayouts(!0)))},onHeadersChanged:function(e,t){var n,i=this.getRootHeaderCt();this.purgeHeaderCtCache(this),i&&(i.onColumnsChanged(),e.isGroupHeader||(n=i.ownerCt,n&&!t&&n.onHeadersChanged(i,e)))},onHeaderMoved:function(e,t,n,i){var r=this,o=r.ownerCt;r.rendered&&(o&&o.onHeaderMove&&o.onHeaderMove(r,e,t,n,i),r.fireEvent("columnmove",r,e,n,i))},onColumnsChanged:function(){var e,t,n=this,i=n.menu;n.rendered&&(n.fireEvent("columnschanged",n),i&&(e=i.child("#columnItemSeparator"))&&(t=i.child("#columnItem"),e.destroy(),t.destroy()))},lookupComponent:function(){var e=Ext.container.Container.prototype.lookupComponent.apply(this,arguments);return e.isGroupHeader||void 0!==e.width||e.flex||(e.width=this.defaultWidth),e},setSortState:function(){var e,t,n,i=this.up("[store]").store,r=this.visibleColumnManager.getColumns(),o=r.length;for(e=0;o>e;e++)t=r[e],n=i.getSorters().get(t.getSortParam()),t.setSortState(n)},getHeaderMenu:function(){var e,t=this.getMenu();return t&&(e=t.child("#columnItem"))?e.menu:null},onHeaderVisibilityChange:function(e,t){var n,i=this,r=i.getHeaderMenu();i.purgeHeaderCtCache(e.ownerCt),r&&(n=i.getMenuItemForHeader(r,e),n&&n.setChecked(t,!0),r.isVisible()&&i.menuTask.delay(50))},updateMenuDisabledState:function(e){var t,n,i,r,o=this,a=o.query(":not([hidden])"),s=a.length;for(e||(e=o.getMenu()),t=0;s>t;++t)n=a[t],i=o.getMenuItemForHeader(e,n),i&&(r=n.isHideable()?"enable":"disable",i.menu&&(r+="CheckChange"),i[r]())},getMenuItemForHeader:function(e,t){return t?e.down("menucheckitem[headerId="+t.id+"]"):null},onHeaderShow:function(e){var t=this,n=t.ownerCt;n&&(t.forceFit&&delete t.flex,t.onHeaderVisibilityChange(e,!0),n.onHeaderShow(t,e),t.fireEvent("columnshow",t,e),t.fireEvent("columnschanged",this))},onHeaderHide:function(e){var t=this,n=t.ownerCt;n&&(t.onHeaderVisibilityChange(e,!1),n.onHeaderHide(t,e),t.fireEvent("columnhide",t,e),t.fireEvent("columnschanged",this))},onHeaderResize:function(e,t){var n=this,i=n.ownerCt;i&&i.onHeaderResize(n,e,t),n.fireEvent("columnresize",n,e,t)},onHeaderClick:function(e,t,n){var i=this,r=e.getView().getSelectionModel();e.fireEvent("headerclick",i,e,t,n),i.fireEvent("headerclick",i,e,t,n)!==!1&&r.onHeaderClick&&r.onHeaderClick(i,e,t)},onHeaderContextMenu:function(e,t,n){e.fireEvent("headercontextmenu",this,e,t,n),this.fireEvent("headercontextmenu",this,e,t,n)},onHeaderTriggerClick:function(e,t,n){var i=this;e.fireEvent("headertriggerclick",i,e,t,n)!==!1&&i.fireEvent("headertriggerclick",i,e,t,n)!==!1&&(e.activeMenu?t.pointerType?e.activeMenu.hide():e.activeMenu.focus():i.showMenuBy(t,n,e))},showMenuBy:function(e,t,n){var i,r=this.getMenu(),o=r.down("#ascItem"),a=r.down("#descItem");r.activeHeader=r.ownerCmp=n,n.setMenuActive(r),i=n.sortable?"enable":"disable",o&&o[i](),a&&a[i](),r.autoFocus=!e||!e.pointerType,r.showBy(t,"tl-bl?"),r.isVisible()||this.onMenuHide(r)},hideMenu:function(){this.menu&&this.menu.hide()},onMenuHide:function(e){e.activeHeader.setMenuActive(!1)},purgeHeaderCtCache:function(e){for(;e;){if(e.purgeCache(),e.isRootHeader)return;e=e.ownerCt}},purgeCache:function(){var e=this,t=e.visibleColumnManager,n=e.columnManager;e.gridVisibleColumns=e.gridDataColumns=e.hideableColumns=null,t&&(t.invalidate(),n.invalidate())},getMenu:function(){var e=this;return e.menu||(e.menu=new Ext.menu.Menu({hideOnParentHide:!1,items:e.getMenuItems(),listeners:{beforeshow:e.beforeMenuShow,hide:e.onMenuHide,scope:e}}),e.fireEvent("menucreate",e,e.menu)),e.menu},beforeMenuShow:function(e){var t,n,i=this,r=e.child("#columnItem");r||(t=i.enableColumnHide?i.getColumnMenu(i):null,n=i.sortable?2:0,t&&t.length&&e.insert(n,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:i.columnsText,iconCls:i.menuColsIcon,menu:{items:t},hideOnClick:!1}])),i.updateMenuDisabledState(i.menu)},getMenuItems:function(){var e=this,t=[],n=e.enableColumnHide?e.getColumnMenu(e):null;return e.sortable&&(t=[{itemId:"ascItem",text:e.sortAscText,iconCls:e.menuSortAscCls,handler:e.onSortAscClick,scope:e},{itemId:"descItem",text:e.sortDescText,iconCls:e.menuSortDescCls,handler:e.onSortDescClick,scope:e}]),n&&n.length&&(e.sortable&&t.push({itemId:"columnItemSeparator",xtype:"menuseparator"}),t.push({itemId:"columnItem",text:e.columnsText,iconCls:e.menuColsIcon,menu:n,hideOnClick:!1})),t},onSortAscClick:function(){var e=this.getMenu(),t=e.activeHeader;t.sort("ASC")},onSortDescClick:function(){var e=this.getMenu(),t=e.activeHeader;t.sort("DESC")},getColumnMenu:function(e){for(var t,n,i=[],r=0,o=e.query(">gridcolumn[hideable]"),a=o.length;a>r;r++)t=o[r],n=new Ext.menu.CheckItem({text:t.menuText||t.text,checked:!t.hidden,hideOnClick:!1,headerId:t.id,menu:t.isGroupHeader?this.getColumnMenu(t):void 0,checkHandler:this.onColumnCheckChange,scope:this}),i.push(n);return i.length?i:null},onColumnCheckChange:function(e,t){var n,i=Ext.getCmp(e.headerId);i.rendered?(i[t?"show":"hide"](),n=i.lastCheckedHeaderId,t&&n&&(i.getRootHeaderCt().getMenu().down("[headerId="+n+"]").setChecked(!0),i.lastCheckedHeaderId=null)):i.hidden=!t},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var e,t=0,n=this.getVisibleGridColumns(),i=n.length;for(e=0;i>e;e++)t+=n[e].getCellWidth()||0;return t},getVisibleGridColumns:function(){var e,t,n,i,r,o,a=this;if(a.gridVisibleColumns)return a.gridVisibleColumns;for(e=a.getGridColumns(),t=a.getRootHeaderCt(),n=[],i=e.length,r=0;i>r;r++)o=e[r],o.hidden||o.isColumnHidden(t)||(n[n.length]=o);return a.gridVisibleColumns=n,n},isColumnHidden:function(e){for(var t=this.getRefOwner();t&&t!==e;){if(t.hidden)return!0;t=t.getRefOwner()}return!1},getGridColumns:function(e,t){if(!e&&this.gridDataColumns)return this.gridDataColumns;var n,i,r,o,a,s=this,l=e||[];if(t=t||s.hidden,s.items&&(n=s.items.items))for(i=0,r=n.length;r>i;i++)o=n[i],o.isGroupHeader?(o.visibleIndex=l.length,o.getGridColumns(l,t)):(o.hiddenAncestor=t,l.push(o));if(e||(s.gridDataColumns=l),!e&&r){for(i=0,r=l.length;r>i;i++)o=l[i],o.fullColumnIndex=i,o.isFirstVisible=o.isLastVisible=!1,o.hidden||o.hiddenAncestor||(a||(o.isFirstVisible=!0),a=o);a&&(a.isLastVisible=!0)}return l},getHideableColumns:function(){var e=this,t=e.hideableColumns;return t||(t=e.hideableColumns=e.query("[hideable]")),t},getHeaderIndex:function(e){return this.columnManager||(this.columnManager=this.getRootHeaderCt().columnManager),this.columnManager.getHeaderIndex(e)},getHeaderAtIndex:function(e){return this.columnManager||(this.columnManager=this.getRootHeaderCt().columnManager),this.columnManager.getHeaderAtIndex(e)},getVisibleHeaderClosestToIndex:function(e){return this.visibleColumnManager||(this.visibleColumnManager=this.getRootHeaderCt().visibleColumnManager),this.visibleColumnManager.getVisibleHeaderClosestToIndex(e)},applyForceFit:function(e){function t(){for(r=0,i=g.length;i>r;r++)o=g[r],o!==e&&(o.flex=o.flex||o.width||o.getWidth(),f+=o.flex,o.width=null)}function n(){var t;for(r=0,i=g.length;i>r;r++)o=g[r],t=o===e,c&&!t?(o.flex=u,o.width=null):t||(s=o.flex||h,o.flex=Math.max(Math.ceil(s/f*p),u),o.width=null),o.setWidth(o.width||o.flex)}var i,r,o,a,s,l=this,d=l.view,u=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,c=!1,h=Ext.grid.header.Container.prototype.defaultWidth,p=l.el.dom.clientWidth-(d.el.dom.scrollHeight>d.el.dom.clientHeight?Ext.getScrollbarSize().width:0),f=0,g=l.getVisibleGridColumns(),m=e.hidden;Ext.suspendLayouts(),a=p-(g.length+1)*u,e.flex=null,m?(s=e.width||e.savedWidth,e.savedWidth=null):s=d.getMaxContentWidth(e),s>a?(e.width=a,c=!0):(e.width=s,p-=s+h,t()),n(),Ext.resumeLayouts(!0)},autoSizeColumn:function(e){var t=this.view;t&&(t.autoSizeColumn(e),this.forceFit&&this.applyForceFit(e))},privates:{beginChildHide:function(){++this.childHideCount},endChildHide:function(){--this.childHideCount},getFocusables:function(){return this.isRootHeader?this.getVisibleGridColumns():this.items.items},createFocusableContainerKeyNav:function(e){var t=this;return new Ext.util.KeyNav(e,{scope:t,down:t.showHeaderMenu,left:t.onFocusableContainerLeftKey,right:t.onFocusableContainerRightKey,space:t.onHeaderActivate,enter:t.onHeaderActivate})},showHeaderMenu:function(e){var t=this.getFocusableFromEvent(e);t&&t.isColumn&&t.triggerEl&&this.onHeaderTriggerClick(t,e,t.triggerEl)},onHeaderActivate:function(e){var t,n,i=this.getFocusableFromEvent(e);i&&i.isColumn&&(t=i.getView(),i.sortable&&this.sortOnClick&&(n=t.getNavigationModel().getLastFocused(),i.toggleSortState(),n&&t.ownerCt.ensureVisible(n.record)),this.onHeaderClick(i,e,i.el))},onFocusableContainerMousedown:function(e,t){var n=Ext.Component.fromElement(t);n===this?e.preventDefault():n.focus()}}},0,["headercontainer"],["component","box","container","headercontainer"],{component:!0,box:!0,container:!0,headercontainer:!0},["widget.headercontainer"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.grid.header,"Container"],0),Ext.cmd.derive("Ext.grid.ColumnComponentLayout",Ext.layout.component.Auto,{type:"columncomponent",setWidthInDom:!0,_paddingReset:{paddingTop:"",paddingBottom:""},columnAutoCls:"x-column-header-text-container-auto",beginLayout:function(e){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments),e.titleContext=e.getEl("titleEl")},beginLayoutCycle:function(e){var t=this,n=t.owner,i=e.widthModel.shrinkWrap;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments),i&&n.el.setWidth(""),n.textContainerEl[i?"addCls":"removeCls"](t.columnAutoCls),n.titleEl.setStyle(t._paddingReset)},publishInnerHeight:function(e,t){var n,i=this,r=i.owner;if(r.getRootHeaderCt().hiddenHeaders)return void e.setProp("innerHeight",0);if(!e.hasRawContent){if(r.headerWrap&&!e.hasDomProp("width"))return void(i.done=!1);n=t-e.getBorderInfo().height,e.setProp("innerHeight",n-r.titleEl.getHeight(),!1)}},measureContentHeight:function(e){return e.el.dom.offsetHeight},publishInnerWidth:function(e,t){e.hasRawContent||e.setProp("innerWidth",t-e.getBorderInfo().width,!1)},calculateOwnerHeightFromContentHeight:function(e,t){var n=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),i=this.owner;return e.hasRawContent?n:!i.headerWrap||e.hasDomProp("width")?t+i.titleEl.getHeight()+e.getBorderInfo().height:null},calculateOwnerWidthFromContentWidth:function(e,t){var n,i=this.owner,r=e.getPaddingInfo().width,o=this.getTriggerOffset(i,e);return n=i.isGroupHeader?t:Math.max(t,i.textEl.getWidth()+e.titleContext.getPaddingInfo().width),n+r+o},getTriggerOffset:function(e,t){var n=0;return t.widthModel.shrinkWrap&&!e.menuDisabled&&0===e.query(">:not([hidden])").length&&(n=e.getTriggerElWidth()),
n}},0,0,0,0,["layout.columncomponent"],0,[Ext.grid,"ColumnComponentLayout"],0),Ext.cmd.derive("Ext.grid.column.Column",Ext.grid.header.Container,{alternateClassName:"Ext.grid.Column",config:{triggerVisible:!1},baseCls:"x-column-header",hoverCls:"x-column-header-over",handleWidth:Ext.supports.Touch?10:4,ariaRole:"columnheader",enableFocusableContainer:!1,sortState:null,possibleSortStates:["ASC","DESC"],childEls:["titleEl","triggerEl","textEl","textContainerEl"],headerWrap:!1,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" {tipMarkup}class="',"x-",'column-header-inner<tpl if="!$comp.isContainer"> ',"x-","leaf-column-header</tpl>",'<tpl if="empty"> ',"x-",'column-header-inner-empty</tpl>">','<span id="{id}-textContainerEl" data-ref="textContainerEl" class="',"x-",'column-header-text-container">','<span class="',"x-",'column-header-text-wrapper">','<span id="{id}-textEl" data-ref="textEl" class="',"x-","column-header-text",'{childElCls}">',"{text}","</span>","</span>","</span>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" class="',"x-","column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:!0,resizable:!0,hideable:!0,menuDisabled:!1,renderer:!1,align:"left",draggable:!0,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",producesHTML:!0,isHeader:!0,isColumn:!0,tabIndex:-1,ascSortCls:"x-column-header-sort-ASC",descSortCls:"x-column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:"x-group-sub-header",groupHeaderCls:"x-group-header",clickTargetName:"titleEl",detachOnRemove:!0,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var e=this;e.rendererScope=e.initialConfig.scope,null!=e.header&&(e.text=e.header,e.header=null),e.cellWrap&&(e.tdCls=(e.tdCls||"")+" x-wrap-cell"),null!=e.columns?(e.isGroupHeader=!0,e.items=e.columns,e.columns=e.flex=e.width=null,e.cls=(e.cls||"")+" "+e.groupHeaderCls,e.sortable=e.resizable=!1,e.align="center"):e.flex&&(e.minWidth=e.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth),e.addCls("x-column-header-align-"+e.align),e.setupRenderer(),e.setupRenderer("edit"),e.setupRenderer("summary"),Ext.grid.header.Container.prototype.initComponent.apply(this,arguments)},bindFormatter:function(e){var t=this;return function(n){return e.format(n,e.scope||t.rendererScope||t.resolveListenerScope())}},bindRenderer:function(e){var t=this;return t.hasCustomRenderer=!0,function(){return Ext.callback(e,t.rendererScope,arguments,0,t)}},setupRenderer:function(e){e=e||"column";var t,n=this,i=n[n.formatterNames[e]],r=n[n.rendererNames[e]],o="column"===e;i?(t=0===i.indexOf("this."),t&&(i=i.substring(5)),i=Ext.app.bind.Template.prototype.parseFormat(i),n[n.formatterNames[e]]=null,t&&(i.scope=null),n[n.rendererNames[e]]=n.bindFormatter(i)):r?("string"==typeof r&&(r=n[n.rendererNames[e]]=n.bindRenderer(r)),o&&(n.hasCustomRenderer=r.length>1)):o&&n.defaultRenderer&&(n.renderer=n.defaultRenderer,n.usingDefaultRenderer=!0)},getView:function(){var e=this.getRootHeaderCt();return e?e.view:void 0},onResize:function(e,t,n){var i,r,o=this;Ext.grid.header.Container.prototype.onResize.apply(this,arguments),n&&o.cellWrap&&(i=o.getView(),i&&(r=i.bufferedRenderer,r&&r.onWrappedColumnWidthChange(n,e)))},onFocusLeave:function(e){Ext.grid.header.Container.prototype.onFocusLeave.call(this,e),this.activeMenu&&this.activeMenu.hide()},initItems:function(){var e=this;Ext.grid.header.Container.prototype.initItems.apply(this,arguments),e.isGroupHeader&&(e.config.hidden||!e.hasVisibleChildColumns())&&e.hide()},hasVisibleChildColumns:function(){var e,t,n=this.items.items,i=n.length;for(e=0;i>e;++e)if(t=n[e],t.isColumn&&!t.hidden)return!0;return!1},onAdd:function(e){var t=this;e.isColumn&&(e.isSubHeader=!0,e.addCls(t.groupSubHeaderCls)),t.isGroupHeader&&t.hidden&&t.hasVisibleChildColumns()&&t.show(),Ext.grid.header.Container.prototype.onAdd.call(this,e)},onRemove:function(e){var t=this;e.isSubHeader&&(e.isSubHeader=!1,e.removeCls(t.groupSubHeaderCls)),Ext.grid.header.Container.prototype.onRemove.call(this,e),t.isDestroyed||t.destroying||t.hasVisibleChildColumns()||t.ownerCt.isNested()||t.hide()},initRenderData:function(){var e=this,t="",n=e.tooltip,i=e.text,r="qtip"===e.tooltipType?"data-qtip":"title";return Ext.isEmpty(n)||(t=r+'="'+n+'" '),Ext.applyIf(Ext.grid.header.Container.prototype.initRenderData.apply(this,arguments),{text:i,empty:"&#160;"===i||" "===i||""===i,menuDisabled:e.menuDisabled,tipMarkup:t,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(e){var t=this;t.applyColumnsState(e.columns),null!=e.hidden&&(t.hidden=e.hidden),null!=e.locked&&(t.locked=e.locked),null!=e.sortable&&(t.sortable=e.sortable),null!=e.width?(t.flex=null,t.width=e.width):null!=e.flex&&(t.width=null,t.flex=e.flex)},getColumnState:function(){var e,t=this,n=t.items.items,i=n?n.length:0,r=[],o={id:t.stateId||t.getStateId()};if(t.savePropsToState(["hidden","sortable","locked","flex","width"],o),t.isGroupHeader){for(e=0;i>e;e++)r.push(n[e].getColumnState());r.length&&(o.columns=r)}return"width"in o&&delete o.flex,o},getStateId:function(){return this.stateId=this.stateId||this.headerId},setText:function(e){this.text=e,this.rendered&&this.textEl.setHtml(e)},getIndex:function(){return this.isGroupColumn?!1:this.getRootHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return null!=this.visibleIndex?this.visibleIndex:this.isGroupColumn?!1:Ext.Array.indexOf(this.getRootHeaderCt().getVisibleGridColumns(),this)},beforeRender:function(){var e=this,t=e.getRootHeaderCt();Ext.grid.header.Container.prototype.beforeRender.call(this),e.isSortable()||e.groupable||e.lockable||t.grid.enableColumnHide!==!1&&t.getHideableColumns().length||(e.menuDisabled=!0),e.cellWrap&&(e.variableRowHeight=!0),e.protoEl.unselectable()},getTriggerElWidth:function(){var e=this,t=e.triggerEl,n=e.self.triggerElWidth;return t&&void 0===n&&(t.setStyle("display","block"),n=e.self.triggerElWidth=t.getWidth(),t.setStyle("display","")),n},afterComponentLayout:function(e,t,n){var i=this,r=i.getRootHeaderCt();Ext.grid.header.Container.prototype.afterComponentLayout.apply(this,arguments),r&&(null!=n||i.flex)&&e!==n&&r.onHeaderResize(i,e)},onDestroy:function(){var e=this;Ext.destroy(e.field),e.field=null,Ext.grid.header.Container.prototype.onDestroy.apply(this,arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(e){this.triggerEl&&this.onTitleElClick(e,this.triggerEl.dom||this.el.dom)},onEnterKey:function(e){this.onTitleElClick(e,this.el.dom)},onTitleElDblClick:function(e){var t,n,i,r=this;if(r.isAtStartEdge(e))t=r.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])"),t&&t.getRootHeaderCt()===r.getRootHeaderCt()&&t.autoSize();else if(r.isAtEndEdge(e)){if(r.isGroupHeader&&e.getPoint().isContainedBy(r.layout.innerCt))return n=r.query("gridcolumn:not([hidden]):not([isGroupHeader])"),void r.getRootHeaderCt().autoSizeColumn(n[n.length-1]);if(i=r.getRootHeaderCt(),1===i.visibleColumnManager.getColumns().length&&i.forceFit)return;r.autoSize()}},autoSize:function(){var e,t,n,i,r=this;if(r.isGroupHeader){for(e=r.query("gridcolumn:not([hidden]):not([isGroupHeader])"),t=e.length,i=r.getRootHeaderCt(),Ext.suspendLayouts(),n=0;t>n;n++)i.autoSizeColumn(e[n]);return void Ext.resumeLayouts(!0)}r.getRootHeaderCt().autoSizeColumn(r)},onTitleElClick:function(e,t,n){var i,r,o=this;return Ext.supports.Touch?(r=o.previousSibling(":not([hidden])"),!o.menuDisabled&&o.isAtEndEdge(e,parseInt(o.triggerEl.getStyle("width"),10))?o.menuDisabled||(i=o):r&&!r.menuDisabled&&o.isAtStartEdge(e)&&(i=r)):i=o.triggerEl&&(e.target===o.triggerEl.dom||t===o.triggerEl||e.within(o.triggerEl))?o:null,n===!1||(i||o.isAtStartEdge(e)||o.isAtEndEdge(e))&&!e.getKey()||o.toggleSortState(),i},processEvent:function(){return this.fireEvent.apply(this,arguments)},isSortable:function(){var e=this.getRootHeaderCt(),t=e?e.grid:null,n=this.sortable;return t&&t.sortableColumns===!1&&(n=!1),n},toggleSortState:function(){this.isSortable()&&this.sort()},sort:function(e){var t=this,n=t.up("tablepanel"),i=n.store;Ext.suspendLayouts(),t.sorting=!0,i.sort(t.getSortParam(),e,n.multiColumnSort?"multi":"replace"),delete t.sorting,Ext.resumeLayouts(!0)},getSortParam:function(){return this.dataIndex},setSortState:function(e){var t,n=this,i=e&&e.getDirection(),r=n.ascSortCls,o=n.descSortCls,a=n.getRootHeaderCt();switch(i){case"DESC":n.hasCls(o)||(n.addCls(o),n.sortState="DESC",t=!0),n.removeCls(r);break;case"ASC":n.hasCls(r)||(n.addCls(r),n.sortState="ASC",t=!0),n.removeCls(o);break;default:n.removeCls([r,o]),n.sortState=null}t&&a.fireEvent("sortchange",a,n,i)},isHideable:function(){var e={hideCandidate:this,result:this.hideable};return e.result&&this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[e]),e.result},hasOtherMenuEnabledChildren:function(e){var t,n;return this.isXType("headercontainer")?(t=this.query(">:not([hidden]):not([menuDisabled])"),n=t.length,Ext.Array.contains(t,e.hideCandidate)&&n--,n?!1:void(e.hideCandidate=this)):(e.result=!1,!1)},isLockable:function(){var e={result:this.lockable!==!1};return e.result&&this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[e]),e.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(e){return this.isXType("headercontainer")?this.query(">:not([hidden])").length>1?!1:void 0:(e.result=!1,!1)},hide:function(){var e=this,t=e.getRootHeaderCt(),n=e.getRefOwner();return n.constructing?(Ext.grid.header.Container.prototype.hide.call(this),e):e.rendered&&!e.isVisible()?e:(t.forceFit&&(e.visibleSiblingCount=t.getVisibleGridColumns().length-1,e.flex&&(e.savedWidth=e.getWidth(),e.flex=null)),t.beginChildHide(),Ext.suspendLayouts(),n.isGroupHeader&&(e.isNestedGroupHeader()&&n.hide(),e.isSubHeader&&!e.isGroupHeader&&1===n.query(">:not([hidden])").length&&(n.lastCheckedHeaderId=e.id)),Ext.grid.header.Container.prototype.hide.call(this),t.endChildHide(),t.onHeaderHide(e),Ext.resumeLayouts(!0),e)},show:function(){var e=this,t=e.getRootHeaderCt(),n=e.ownerCt;return e.isVisible()?e:(e.rendered&&t.forceFit&&t.applyForceFit(e),Ext.suspendLayouts(),e.isSubHeader&&n.hidden&&n.show(!1,!0),Ext.grid.header.Container.prototype.show.apply(this,arguments),e.isGroupHeader&&e.maybeShowNestedGroupHeader(),n=e.getRootHeaderCt(),n&&n.onHeaderShow(e),Ext.resumeLayouts(!0),e)},getCellWidth:function(){var e,t=this;return t.rendered&&t.componentLayout&&t.componentLayout.lastComponentSize?e=t.componentLayout.lastComponentSize.width:t.width?e=t.width:t.isColumn||(e=t.getTableWidth()),e},getCellId:function(){return"x-grid-cell-"+this.getItemId()},getCellSelector:function(){return"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" .x-grid-cell-inner"},isAtStartEdge:function(e){return e.getXY()[0]-this.getX()<this.handleWidth},isAtEndEdge:function(e,t){return this.getX()+this.getWidth()-e.getXY()[0]<=(t||this.handleWidth)},setMenuActive:function(e){this.activeMenu=e,this.titleEl[e?"addCls":"removeCls"](this.headerOpenCls)},deprecated:{5:{methods:{bindRenderer:function(e){return function(t){return Ext.util.Format[e](t)}}}}}},0,["gridcolumn"],["component","box","container","headercontainer","gridcolumn"],{component:!0,box:!0,container:!0,headercontainer:!0,gridcolumn:!0},["widget.gridcolumn"],0,[Ext.grid.column,"Column",Ext.grid,"Column"],0),Ext.define("Ext.rtl.grid.column.Column",{override:"Ext.grid.column.Column",isAtStartEdge:function(e,t){var n=this;return!n.getInherited().rtl!=!Ext.rootInheritedState.rtl?n.getX()+n.getWidth()-e.getXY()[0]<=n.handleWidth:arguments.callee.$previous.call(this,e,t)},isAtEndEdge:function(e,t){var n=this;return!n.getInherited().rtl!=!Ext.rootInheritedState.rtl?e.getXY()[0]-n.getX()<=n.handleWidth:arguments.callee.$previous.call(this,e,t)}}),Ext.define("BP.overrides.grid.column.Column",{override:"Ext.grid.column.Column",defaultRenderer_:function(e,t,n,i,r,o,a){var s,l,d,u,c=this,h="x-",p=c.origScope||c,f=c.items,g=f.length,m=0;for(l=Ext.isFunction(c.origRenderer)?c.origRenderer.apply(p,arguments)||"":"",t.tdCls+=" x-action-col-cell";g>m;m++)s=f[m],d=s.disabled||(s.isDisabled?s.isDisabled.call(s.scope||p,a,i,r,s,n):!1),u=d?null:s.tooltip||(s.getTip?s.getTip.apply(s.scope||p,arguments):null),s.hasActionConfiguration||(s.stopSelection=c.stopSelection,s.disable=Ext.Function.bind(c.disableAction,c,[m],0),s.enable=Ext.Function.bind(c.enableAction,c,[m],0),s.hasActionConfiguration=!0),l+='<img role="button" alt="'+(s.altText||c.altText)+'" src="'+(s.icon||Ext.BLANK_IMAGE_URL)+'" class="'+c.actionIconCls+" "+h+"action-col-"+(m+"")+" "+(d?h+"item-disabled":" ")+(Ext.isFunction(s.getClass)?s.getClass.apply(s.scope||p,arguments):s.iconCls||c.iconCls||"")+'"'+(u?' data-qtip="'+u+'"':"")+" />";return l}}),Ext.cmd.derive("Ext.grid.NavigationModel",Ext.view.NavigationModel,{focusCls:"x-grid-item-focused",getViewListeners:function(){var e=this;return{containermousedown:e.onContainerMouseDown,cellmousedown:e.onCellMouseDown,cellclick:e.onCellClick,itemmousedown:e.onItemMouseDown,itemclick:e.onItemClick,itemcontextmenu:e.onItemClick,scope:e}},initKeyNav:function(e){var t=this;t.position=new Ext.grid.CellContext(e),t.keyNav=new Ext.util.KeyNav({target:e,ignoreInputFields:!0,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:function(e,t,n,i,r){return r},up:t.onKeyUp,down:t.onKeyDown,right:t.onKeyRight,left:t.onKeyLeft,pageDown:t.onKeyPageDown,pageUp:t.onKeyPageUp,home:t.onKeyHome,end:t.onKeyEnd,tab:t.onKeyTab,space:t.onKeySpace,enter:t.onKeyEnter,A:{ctrl:!0,handler:t.onSelectAllKeyPress},scope:t})},onKeyTab:function(e){var t=e.position.view,n=t.getSelectionModel(),i=t.editingPlugin;return i&&n.wasEditing?(e.preventDefault(),void n.onEditorTab(i,e)):Ext.view.NavigationModel.prototype.onKeyTab.call(this,e)},onCellMouseDown:function(e,t,n,i,r,o,a){var s=a.parentEvent,l=Ext.Component.fromElement(a.target,t);l&&l.isFocusable&&l.isFocusable()||s&&"touchstart"===s.type||this.setPosition(a.position,null,a)},onCellClick:function(e,t,n,i,r,o,a){var s=Ext.Component.fromElement(a.target,t);this.preventCellFocus=s&&s.focusable&&s.isFocusable(),this.position.isEqual(a.position)?this.fireNavigateEvent(a):this.setPosition(a.position,null,a),this.preventCellFocus=!1},onItemMouseDown:function(e,t,n,i,r){var o,a,s,l,d,u,c=this,h=r.parentEvent;if(!(h&&"touchstart"===h.type||r.position.cellElement))for(o=r.getX(),a=e.getVisibleColumnManager().getColumns(),s=a.length,l=0;s>l;l++)if(d=a[l],u=a[l].getBox(),o>=u.left&&o<u.right)return void c.setPosition(t,a[l],r)},onItemClick:function(e,t,n,i,r){r.position.cellElement||this.fireNavigateEvent(r)},beforeViewRefresh:function(e){var t=this.getPosition();t&&t.view===e?this.focusRestorePosition=t.clone():this.focusRestorePosition=null},onStoreRemove:function(){this.position&&this.setPosition(this.getPosition(),null,null,null,!0)},deferSetPosition:function(e,t,n,i,r,o){var a=this.view.getFocusTask();return a.delay(e,this.setPosition,this,[t,n,i,r,o]),a},setPosition:function(e,t,n,i,r){var o,a,s,l,d,u,c,h=this,p=null==e&&null==t,f=null==h.record&&null==h.recordIndex&&null==h.item;if(o=e&&e.isCellContext?e.view:n&&n.view?n.view:h.lastFocused?h.lastFocused.view:h.view,a=o.getSelectionModel(),s=o.dataSource,o.getFocusTask().cancel(),!(o.isDestroyed||!o.refreshCounter||p&&f)&&o.all.getCount()){if(e&&e.isCellContext)u=e.record,l=e.rowIdx,d=e.colIdx,c=e.column,-1===s.indexOf(u)&&(l=s.indexOfId(u.id),-1===l?(h.recordIndex=-1,u=s.getAt(0),l=0,d=0,c=o.getVisibleColumnManager().getColumns()[0]):u=s.getById(u.id));else{if(p)u=l=null;else if(null==t&&(t=h.lastFocused?h.lastFocused.column:0),"number"==typeof e)l=Math.max(Math.min(e,s.getCount()-1),0),u=s.getAt(e);else if(e.isEntity)u=e,l=s.indexOf(u);else if(e.tagName)u=o.getRecord(e),l=s.indexOf(u),-1===l&&(u=null);else{if(f)return;p=!0,u=l=null}u?(-1===l&&(h.recordIndex=-1,u=s.getAt(0),l=0,t=null),null==t?(c=h.column)||(d=0,c=o.getVisibleColumnManager().getColumns()[0]):"number"==typeof t?(c=o.getVisibleColumnManager().getColumns()[t],d=t):(c=t,d=o.getVisibleColumnManager().indexOf(t))):(p=!0,c=d=null)}if(l===h.recordIndex&&d===h.columnIndex)return h.focusPosition(h.position);h.cell&&h.cell.removeCls(h.focusCls),h.previousRecordIndex=h.recordIndex,h.previousRecord=h.record,h.previousItem=h.item,h.previousCell=h.cell,h.previousColumn=h.column,h.previousColumnIndex=h.columnIndex,h.previousPosition=h.position.clone(),h.selectionStart=a.selectionStart,h.position.setAll(o,h.recordIndex=l,h.columnIndex=d,h.record=u,h.column=c),p?h.item=h.cell=null:h.focusPosition(h.position,r),i||(a.fireEvent("focuschange",a,h.previousRecord,h.record),o.fireEvent("rowfocus",h.record,h.item,h.recordIndex),o.fireEvent("cellfocus",h.record,h.cell,h.position)),n&&!r&&h.cell!==h.previousCell&&h.fireNavigateEvent(n)}},focusPosition:function(e){var t,n,i=this;i.item=i.cell=null,e&&e.record&&e.column&&(t=e.view,n=e.rowElement?i.item=e.rowElement:t.getRowByRecord(e.record),n?(i.cell=e.cellElement||Ext.fly(n).down(e.column.getCellSelector(),!0),i.cell?(i.cell=new Ext.dom.Fly(i.cell),t.lastFocused=i.lastFocused=i.position.clone(),i.focusItem(i.cell),t.focusEl=i.cell):(i.position.setAll(),i.record=i.column=i.recordIndex=i.columnIndex=null)):(n=t.dataSource.indexOf(e.record),i.position.setAll(),i.record=i.column=i.recordIndex=i.columnIndex=null,-1!==n&&t.bufferedRenderer&&(i.lastKeyEvent=null,t.bufferedRenderer.scrollTo(n,!1,i.afterBufferedScrollTo,i))))},focusItem:function(e){e.addCls(this.focusCls),this.preventCellFocus||e.focus()},getCell:function(){return this.cell},getPosition:function(){var e,t,n,i=this,r=i.position;if(r.record&&r.column){if(t=r.view,n=t.dataSource,e=n.indexOf(r.record),-1===e&&(e=r.rowIdx,n.getAt(e)||(e=-1)),-1!==e&&-1!==t.getVisibleColumnManager().indexOf(r.column))return r;r.setAll(),i.record=i.column=i.recordIndex=i.columnIndex=null}return null},getLastFocused:function(){var e,t=this,n=t.lastFocused;return n&&n.record&&n.column&&(e=n.view,-1!==e.dataSource.indexOf(n.record)&&-1!==e.getVisibleColumnManager().indexOf(n.column))?n:void 0},onKeyUp:function(e){var t=e.view.walkRecs(e.record,-1);t&&this.setPosition(t,this.columnIndex,e)},onKeyDown:function(e){var t=e.record.isExpandingOrCollapsing?null:e.view.walkRecs(e.record,1);t&&this.setPosition(t,this.columnIndex,e)},onKeyRight:function(e){var t=this.move("right",e);t&&this.setPosition(t,null,e)},onKeyLeft:function(e){var t=this.move("left",e);t&&this.setPosition(t,null,e)},move:function(e){var t=this,n=t.getPosition();return n&&n.record?n.view.walkCells(n,e,null,t.preventWrap):void 0},onKeyPageDown:function(e){var t,n,i=this,r=e.view,o=i.getRowsVisible();o&&(r.bufferedRenderer?(t=Math.min(e.recordIndex+o,r.dataSource.getCount()-1),i.lastKeyEvent=e,r.bufferedRenderer.scrollTo(t,!1,i.afterBufferedScrollTo,i)):(n=r.walkRecs(e.record,o),i.setPosition(n,null,e)))},onKeyPageUp:function(e){var t,n,i=this,r=e.view,o=i.getRowsVisible();o&&(r.bufferedRenderer?(t=Math.max(e.recordIndex-o,0),i.lastKeyEvent=e,r.bufferedRenderer.scrollTo(t,!1,i.afterBufferedScrollTo,i)):(n=r.walkRecs(e.record,-o),i.setPosition(n,null,e)))},onKeyHome:function(e){var t=this,n=e.view;e.altKey?n.bufferedRenderer?(t.lastKeyEvent=e,n.bufferedRenderer.scrollTo(0,!1,t.afterBufferedScrollTo,t)):t.setPosition(n.walkRecs(e.record,-n.dataSource.indexOf(e.record)),null,e):t.setPosition(e.record,0,e)},afterBufferedScrollTo:function(e,t){this.setPosition(t,null,this.lastKeyEvent,null,!this.lastKeyEvent)},onKeyEnd:function(e){var t=this,n=e.view;e.altKey?n.bufferedRenderer?(t.lastKeyEvent=e,n.bufferedRenderer.scrollTo(n.store.getCount()-1,!1,t.afterBufferedScrollTo,t)):t.setPosition(n.walkRecs(e.record,n.dataSource.getCount()-1-n.dataSource.indexOf(e.record)),null,e):t.setPosition(e.record,e.view.getVisibleColumnManager().getColumns().length-1,e)},getRowsVisible:function(){var e,t,n=!1,i=this.view,r=i.all.first();return r&&(e=r.getHeight(),t=i.el.getHeight(),n=Math.floor(t/e)),n},fireNavigateEvent:function(e){var t=this;t.fireEvent("navigate",{view:t.position.view,navigationModel:t,keyEvent:e||new Ext.event.Event({}),previousPosition:t.previousPosition,previousRecordIndex:t.previousRecordIndex,previousRecord:t.previousRecord,previousItem:t.previousItem,previousCell:t.previousCell,previousColumnIndex:t.previousColumnIndex,previousColumn:t.previousColumn,position:t.position,recordIndex:t.recordIndex,record:t.record,selectionStart:t.selectionStart,item:t.item,cell:t.cell,columnIndex:t.columnIndex,column:t.column})}},0,0,0,0,["view.navigation.grid"],0,[Ext.grid,"NavigationModel"],0),Ext.define("Ext.rtl.grid.NavigationModel",{override:"Ext.grid.NavigationModel",initKeyNav:function(e){var t=this,n=t.self.prototype;e.getInherited().rtl&&(t.onKeyLeft=n.onKeyRight,t.onKeyRight=n.onKeyLeft),(arguments.callee.$previous||Ext.view.NavigationModel.prototype.initKeyNav).call(this,e)}}),Ext.cmd.derive("Ext.tree.NavigationModel",Ext.grid.NavigationModel,{initKeyNav:function(e){var t=this,n=t.view.ownerGrid.columns;t.isTreeGrid=n&&n.length>1,Ext.grid.NavigationModel.prototype.initKeyNav.call(this,e),t.keyNav.map.addBinding([{key:"8",shift:!0,handler:t.onAsterisk,scope:t},{key:Ext.event.Event.NUM_MULTIPLY,handler:t.onAsterisk,scope:t}]),t.view.grid.on({columnschanged:t.onColumnsChanged,scope:t})},onColumnsChanged:function(){this.isTreeGrid=this.view.ownerGrid.getVisibleColumnManager().getColumns().length>1},onKeyLeft:function(e){var t=this,n=e.view,i=t.record;return t.isTreeGrid&&!e.ctrlKey?Ext.grid.NavigationModel.prototype.onKeyLeft.call(this,e):void(e.position.column.isTreeColumn&&i.isExpanded()?n.collapse(i):(i=i.parentNode,!i||i.isRoot()&&!n.rootVisible||t.setPosition(i,null,e)))},onKeyRight:function(e){var t=this,n=t.record;return t.isTreeGrid&&!e.ctrlKey?Ext.grid.NavigationModel.prototype.onKeyRight.call(this,e):void(n.isLeaf()||(e.position.column.isTreeColumn&&!n.isExpanded()?e.view.expand(n):n.isExpanded()&&(n=n.childNodes[0],n&&t.setPosition(n))))},onKeyEnter:function(e){null!=this.record.data.checked?this.toggleCheck(e):Ext.grid.NavigationModel.prototype.onKeyEnter.call(this,e)},onKeySpace:function(e){null!=this.record.data.checked?this.toggleCheck(e):Ext.grid.NavigationModel.prototype.onKeySpace.call(this,e)},toggleCheck:function(){this.view.onCheckChange(this.record)},onAsterisk:function(){this.view.ownerCt.expandAll()}},0,0,0,0,["view.navigation.tree"],0,[Ext.tree,"NavigationModel"],0),Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,function(){var e=/^[a-zA-Z_]+$/,t=/^[a-zA-Z0-9_]+$/,n=/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,i=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:!0,alternateClassName:"Ext.form.VTypes",email:function(e){return n.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(e){return i.test(e)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(t){return e.test(t)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return t.test(e)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}(),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0),Ext.define("BP.overrides.form.field.VTypes",{override:"Ext.form.field.VTypes",time:function(e){return this.timeRe.test(e)},timeRe:/^([1-9]|1[0-9]):([0-5][0-9])(\s[a|p]m)$/i,timeText:'Not a valid time.  Must be in the format "12:34 PM".',timeMask:/[\d\s:amp]/i,phoneText:"Not a valid phone. Must be in the formats: +41 78-123-45-67, +41 78 123-45-67, +41 78 123 45 67, +41781234567.",phoneMask:/[\d\s+-]/,natural:function(e){var t=/^\d+$/i;return t.test(e)},naturalText:"Must be a natural number",naturalMask:/^[0-9]/i,phone:function(e){return this.phoneRe=this.phoneRe||this.fnPhoneRe(),this.phoneRe.test(e)},fnPhoneRe:function(){var e="99-999-99-99|99 999-99-99|99 999 99 99|999999999";return RegExp("^\\+[1-9]{1}([0-9]{1,2})?[\\s|-]?("+e.replace(/([\(\)])/g,"\\$1").replace(/9/g,"\\d").replace(/[ ]+/g,"\\s?").replace(/[-]+/g,"-?")+")$")}}),Ext.cmd.derive("Ext.form.trigger.Trigger",Ext.Base,{factoryConfig:{defaultType:"trigger"},repeatClick:!1,hidden:!1,hideOnReadOnly:void 0,weight:0,preventMouseDown:!0,baseCls:"x-form-trigger",focusCls:"x-form-trigger-focus",overCls:"x-form-trigger-over",clickCls:"x-form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(e,t){return e.weight-t.weight}},constructor:function(e){var t,n=this;Ext.apply(n,e),n.compat4Mode&&(t=n.cls,n.focusCls=[n.focusCls,t+"-focus"],n.overCls=[n.overCls,t+"-over"],n.clickCls=[n.clickCls,t+"-click"])},afterFieldRender:function(){this.initEvents()},destroy:function(){var e=this,t=e.clickRepeater;t&&t.destroy(),e.el&&e.el.destroy(),e.el=null,e.isDestroyed=!0},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var e=this,t=e.el;e.hidden=!0,t&&t.hide()},initEvents:function(){var e=this,t=e.isFieldEnabled,n=e.getStateEl(),i=e.el;n.addClsOnOver(e.overCls,t,e),n.addClsOnClick(e.clickCls,t,e),e.repeatClick?e.clickRepeater=new Ext.util.ClickRepeater(i,{preventDefault:!0,handler:e.onClick,listeners:{mousedown:e.onClickRepeaterMouseDown,scope:e},scope:e}):e.field.mon(i,{click:e.onClick,mousedown:e.onMouseDown,scope:e})},isFieldEnabled:function(){return!this.field.disabled},isVisible:function(){var e=this,t=e.field,n=!1;return(e.hidden||!t||!e.rendered||e.isDestroyed)&&(n=!0),!n},onClick:function(){var e=this,t=arguments,n=e.clickRepeater?t[1]:t[0],i=e.handler,r=e.field;i&&!r.readOnly&&e.isFieldEnabled()&&Ext.callback(e.handler,e.scope,[r,e,n],0,r)},resolveListenerScope:function(e){return this.field.resolveSatelliteListenerScope(this,e)},onMouseDown:function(e){"touch"===e.pointerType||this.field.owns(Ext.Element.getActiveElement())||this.field.inputEl.focus(),this.preventMouseDown&&e.preventDefault()},onClickRepeaterMouseDown:function(e,t){t.parentEvent&&"mousedown"!==t.parentEvent.type||this.field.inputEl.focus(),t.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var e=this,t=e.el=e.field.triggerWrap.selectNode("#"+e.domId,!1);t.setVisibilityMode(Ext.Element.DISPLAY),e.rendered=!0},renderBody:function(e){var t=this,n=t.bodyTpl;return Ext.apply(e,t.getBodyRenderData()),n?Ext.XTemplate.getTpl(t,"bodyTpl").apply(e):""},renderTrigger:function(e){var t=this,n=t.width,i=t.hidden?"display:none;":"";return n&&(i+="width:"+n),Ext.XTemplate.getTpl(t,"renderTpl").apply({$trigger:t,fieldData:e,ui:e.ui,childElCls:e.childElCls,triggerId:t.domId=t.field.id+"-trigger-"+t.id,cls:t.cls,triggerStyle:i,extraCls:t.extraCls,baseCls:t.baseCls})},setHidden:function(e){e!==this.hidden&&this[e?"hide":"show"]()},setVisible:function(e){this.setHidden(!e)},show:function(){var e=this,t=e.el;e.hidden=!1,t&&t.show()}},1,0,0,0,["trigger.trigger"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,"Trigger"],0),Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:!1,triggers:void 0},growMin:30,growMax:800,growAppend:"W",allowBlank:!0,validateBlank:!1,allowOnlyWhitespace:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:"x-form-empty-field",requiredCls:"x-form-required-field",valueContainsPlaceholder:!1,ariaRole:"textbox",editable:!0,repeatTriggerClick:!1,triggerWrapCls:"x-form-trigger-wrap",triggerWrapFocusCls:"x-form-trigger-wrap-focus",triggerWrapInvalidCls:"x-form-trigger-wrap-invalid",fieldBodyCls:"x-form-text-field-body",inputWrapCls:"x-form-text-wrap",inputWrapFocusCls:"x-form-text-wrap-focus",inputWrapInvalidCls:"x-form-text-wrap-invalid",growCls:"x-form-text-grow",monitorTab:!0,mimicing:!1,needArrowKeys:!0,childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var e=this,t=e.emptyCls;e.allowOnlyWhitespace===!1&&(e.allowBlank=!1),e.size&&(e.defaultBodyWidth=6.5*e.size+20),e.onTrigger1Click||(e.onTrigger1Click=e.onTriggerClick),Ext.form.field.Base.prototype.initComponent.call(this),e.readOnly&&e.setReadOnly(e.readOnly),e.fieldFocusCls=e.baseCls+"-focus",e.emptyUICls=t+" "+t+"-"+e.ui,e.addStateEvents("change")},initEvents:function(){var e=this,t=e.inputEl;Ext.form.field.Base.prototype.initEvents.call(this),(e.selectOnFocus||e.emptyText)&&e.mon(t,"mousedown",e.onMouseDown,e),(e.maskRe||e.vtype&&e.disableKeyFilter!==!0&&(e.maskRe=Ext.form.field.VTypes[e.vtype+"Mask"]))&&e.mon(t,"keypress",e.filterKeys,e),e.enableKeyEvents&&e.mon(t,{scope:e,keyup:e.onKeyUp,keydown:e.onKeyDown,keypress:e.onKeyPress})},isEqual:function(e,t){return this.isEqualAsString(e,t)},onChange:function(){Ext.form.field.Base.prototype.onChange.apply(this,arguments),this.autoSize()},getSubTplData:function(){var e,t=this,n=t.getRawValue(),i=t.emptyText&&n.length<1,r=t.maxLength;return t.enforceMaxLength?r===Number.MAX_VALUE&&(r=void 0):r=void 0,i&&(Ext.supports.Placeholder?e=t.emptyText:(n=t.emptyText,t.valueContainsPlaceholder=!0)),Ext.apply(Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments),{triggerWrapCls:t.triggerWrapCls,inputWrapCls:t.inputWrapCls,triggers:t.orderedTriggers,maxLength:r,readOnly:!t.editable||t.readOnly,placeholder:e,value:n,fieldCls:t.fieldCls+(i&&(e||n)?" "+t.emptyUICls:"")+(t.allowBlank?"":" "+t.requiredCls)})},onRender:function(){var e,t,n=this,i=n.getTriggers(),r=[];if(Ext.supports.FixedTableWidthBug&&(n.el._needsTableWidthFix=!0),(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this),i){this.invokeTriggers("onFieldRender");for(e in i)r.push(i[e].el);t=n.triggerEl=n.triggerCell=new Ext.CompositeElement(r,!0)}n.inputCell=n.inputWrap},afterRender:function(){var e=this;e.autoSize(),Ext.form.field.Base.prototype.afterRender.call(this),e.invokeTriggers("afterFieldRender")},onMouseDown:function(){var e=this;e.hasFocus||Ext.getDoc().on("mouseup",Ext.emptyFn,e,{single:!0,preventDefault:!0})},applyTriggers:function(e){var t,n,i,r,o,a=this,s=a.getHideTrigger(),l=a.readOnly,d=a.orderedTriggers=[],u=a.repeatTriggerClick;if(!e)for(e={},a.triggerCls&&!a.trigger1Cls&&(a.trigger1Cls=a.triggerCls),o=1;r=a["trigger"+o+"Cls"];o++)e["trigger"+o]={cls:r,extraCls:"x-trigger-index-"+o,handler:"onTrigger"+o+"Click",compat4Mode:!0,scope:a};for(t in e)e.hasOwnProperty(t)&&(n=e[t],n.field=a,n.id=t,(l&&n.hideOnReadOnly!==!1||s&&n.hidden!==!1)&&(n.hidden=!0),u&&n.repeatClick!==!1&&(n.repeatClick=!0),i=e[t]=Ext.form.trigger.Trigger.create(n),d.push(i));return Ext.Array.sort(d,Ext.form.trigger.Trigger.weightComparator),e},invokeTriggers:function(e,t){var n,i,r=this,o=r.getTriggers();if(o)for(n in o)o.hasOwnProperty(n)&&(i=o[n],
i[e].apply(i,t||[]))},getTrigger:function(e){return this.getTriggers()[e]},updateHideTrigger:function(e){this.invokeTriggers(e?"hide":"show")},setEditable:function(e){var t=this;t.editable=e,t.rendered&&t.setReadOnlyAttr(!e||t.readOnly)},setReadOnly:function(e){var t,n,i=this,r=i.getTriggers(),o=i.getHideTrigger();if(e=!!e,Ext.form.field.Base.prototype.setReadOnly.call(this,e),i.rendered&&i.setReadOnlyAttr(e||!i.editable),r)for(n in r)t=r[n],(t.hideOnReadOnly===!0||t.hideOnReadOnly!==!1&&!o)&&t.setVisible(!e)},setReadOnlyAttr:function(e){var t=this,n="readonly",i=t.inputEl.dom;e?i.setAttribute(n,n):i.removeAttribute(n)},processRawValue:function(e){var t,n=this,i=n.stripCharsRe;return i&&(t=e.replace(i,""),t!==e&&(n.setRawValue(t),e=t)),e},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this),Ext.isIE&&(this.inputEl.dom.unselectable="on")},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this),Ext.isIE&&(this.inputEl.dom.unselectable="")},onKeyDown:function(e){this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},reset:function(){Ext.form.field.Base.prototype.reset.call(this),this.applyEmptyText()},applyEmptyText:function(){var e,t=this,n=t.emptyText;t.rendered&&n&&(e=t.getRawValue().length<1&&!t.hasFocus,Ext.supports.Placeholder?t.inputEl.dom.placeholder=n:e&&(t.setRawValue(n),t.valueContainsPlaceholder=!0),e?t.inputEl.addCls(t.emptyUICls):t.inputEl.removeCls(t.emptyUICls),t.autoSize())},afterFirstLayout:function(){if(Ext.form.field.Base.prototype.afterFirstLayout.call(this),Ext.isIE&&this.disabled){var e=this.inputEl;e&&(e.dom.unselectable="on")}},toggleInvalidCls:function(e){var t=e?"addCls":"removeCls";Ext.form.field.Base.prototype.toggleInvalidCls.call(this),this.triggerWrap[t](this.triggerWrapInvalidCls),this.inputWrap[t](this.inputWrapInvalidCls)},beforeFocus:function(){var e,t=this,n=t.inputEl,i=t.emptyText;Ext.form.field.Base.prototype.beforeFocus.apply(this,arguments),i&&!Ext.supports.Placeholder&&n.dom.value===t.emptyText&&t.valueContainsPlaceholder?(t.setRawValue(""),e=!0,n.removeCls(t.emptyUICls),t.valueContainsPlaceholder=!1):Ext.supports.Placeholder&&n.removeCls(t.emptyUICls)},onFocus:function(e){var t=this;Ext.form.field.Base.prototype.onFocus.apply(this,arguments),t.selectOnFocus&&t.inputEl.dom.select(),t.emptyText&&t.autoSize(),t.addCls(t.fieldFocusCls),t.triggerWrap.addCls(t.triggerWrapFocusCls),t.inputWrap.addCls(t.inputWrapFocusCls),t.invokeTriggers("onFieldFocus",[e])},onBlur:function(e){var t=this;Ext.form.field.Base.prototype.onBlur.apply(this,arguments),t.removeCls(t.fieldFocusCls),t.triggerWrap.removeCls(t.triggerWrapFocusCls),t.inputWrap.removeCls(t.inputWrapFocusCls),t.invokeTriggers("onFieldBlur",[e])},completeEdit:function(e){Ext.form.field.Base.prototype.completeEdit.call(this,e),this.applyEmptyText()},filterKeys:function(e){if(!(e.ctrlKey&&!e.altKey||e.isSpecialKey())){var t=String.fromCharCode(e.getCharCode());this.maskRe.test(t)||e.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),"value")},applyState:function(e){Ext.form.field.Base.prototype.applyState.apply(this,arguments),e.hasOwnProperty("value")&&this.setValue(e.value)},getRawValue:function(){var e=this,t=Ext.form.field.Base.prototype.getRawValue.call(this);return t===e.emptyText&&e.valueContainsPlaceholder&&(t=""),t},setValue:function(e){var t=this,n=t.inputEl;return n&&t.emptyText&&!Ext.isEmpty(e)&&(n.removeCls(t.emptyUICls),t.valueContainsPlaceholder=!1),Ext.form.field.Base.prototype.setValue.apply(this,arguments),t.applyEmptyText(),t},getErrors:function(e){e=arguments.length?null==e?"":e:this.processRawValue(this.getRawValue());var t,n,i,r=this,o=Ext.form.field.Base.prototype.getErrors.call(this,e),a=r.validator,s=r.vtype,l=Ext.form.field.VTypes,d=r.regex,u=Ext.String.format;if(Ext.isFunction(a)&&(t=a.call(r,e),t!==!0&&o.push(t)),n=r.allowOnlyWhitespace?e:Ext.String.trim(e),n.length<1||e===r.emptyText&&r.valueContainsPlaceholder){if(r.allowBlank||o.push(r.blankText),!r.validateBlank)return o;i=!0}return!i&&e.length<r.minLength&&o.push(u(r.minLengthText,r.minLength)),e.length>r.maxLength&&o.push(u(r.maxLengthText,r.maxLength)),s&&(l[s](e,r)||o.push(r.vtypeText||l[s+"Text"])),d&&!d.test(e)&&o.push(r.regexText||r.invalidText),o},selectText:function(e,t){var n,i=this,r=i.getRawValue(),o=r.length,a=i.inputEl.dom;o>0&&(e=void 0===e?0:Math.min(e,o),t=void 0===t?o:Math.min(t,o),a.setSelectionRange?a.setSelectionRange(e,t):a.createTextRange&&(n=a.createTextRange(),n.moveStart("character",e),n.moveEnd("character",t-o),n.select()))},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var e,t,n,i,r,o,a=this;if(a.grow&&a.rendered&&a.getSizeModel().width.auto){i=a.inputEl,e=a.getTriggers(),n=0,o=Ext.util.Format.htmlEncode(a.getGrowWidth()||(a.hasFocus?"":a.emptyText)||""),o+=a.growAppend;for(t in e)n+=e[t].el.getWidth();r=i.getTextWidth(o)+n+a.inputWrap.getBorderWidth("lr")+a.triggerWrap.getBorderWidth("lr"),r=Math.min(Math.max(r,a.growMin),a.growMax),a.bodyEl.setWidth(r),a.updateLayout(),a.fireEvent("autosize",a,r)}},onDestroy:function(){var e=this;e.invokeTriggers("destroy"),Ext.destroy(e.triggerRepeater),Ext.form.field.Base.prototype.onDestroy.call(this)},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var e,t=this.getTriggers(),n=0;if(t&&this.rendered)for(e in t)t.hasOwnProperty(e)&&(n+=t[e].el.getWidth());return n}}}}},0,["textfield"],["component","box","field","textfield"],{component:!0,box:!0,field:!0,textfield:!0},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0),Ext.define("BP.overrides.form.field.Text",{override:"Ext.form.field.Text",fieldStyle:{display:"inherit"},filterKeys:function(e){if(this.maskRe||!(e.ctrlKey&&!e.altKey||e.isSpecialKey())){var t=String.fromCharCode(e.getCharCode());this.maskRe.test(t)||e.stopEvent()}}}),Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var e=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);return e.xclass="Ext.resizer.BorderSplitterTracker",e},onTargetCollapse:function(e){Ext.resizer.Splitter.prototype.onTargetCollapse.call(this,e),this.performCollapse!==!1&&"mini"==e.collapseMode&&e.addCls(e.baseCls+"-"+e.collapsedCls+"-mini")},onTargetExpand:function(e){Ext.resizer.Splitter.prototype.onTargetExpand.call(this,e),this.performCollapse!==!1&&"mini"==e.collapseMode&&e.removeCls(e.baseCls+"-"+e.collapsedCls+"-mini")}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:!0,box:!0,splitter:!0,bordersplitter:!0},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0),Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:"x-border-layout-ct",itemCls:["x-border-item","x-box-item"],type:"border",isBorderLayout:!0,padding:void 0,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:!0,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:!1,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:!0,panelCollapseAnimate:!0,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p,f=this,g=f.axisProps[n],m=!g.horizontal,x=g.sizeProp,v=0,y=e.childItems,E=y.length;for(r=0;E>r;++r)if(o=y[r],s=o.target,o.layoutPos={},s.region){if(o.region=l=s.region,o.isCenter=s.isCenter,o.isHorz=s.isHorz,o.isVert=s.isVert,o.weight=s.weight||f.regionWeights[l]||0,s.weight=o.weight,t[s.id]=o,s.isCenter){i=o,a=s.flex,e.centerRegion=i;continue}if(m!==o.isVert)continue;o.reverseWeighting=l===g.borderEnd,u=s[x],c=typeof u,s.collapsed||("string"===c&&(d=f.percentageRe.exec(u))?o.percentage=parseInt(d[1],10):s.flex&&(v+=o.flex=s.flex))}return i&&(h=i.target,(p=h.placeholderFor)?a||m!==p.collapsedVertical()||(a=0,i.collapseAxis=n):h.collapsed&&m===h.collapsedVertical()&&(a=0,i.collapseAxis=n)),null==a&&(a=1),v+=a,Ext.apply({before:m?"top":"left",totalFlex:v},g)},beginLayout:function(e){var t,n,i,r,o,a,s,l,d,u=this,c=u.getLayoutItems(),h=u.padding,p=typeof h,f=!1;for(h?("string"===p||"number"===p)&&(h=Ext.util.Format.parseBox(h)):(h=e.getEl("getTargetEl").getPaddingInfo(),f=!0),e.outerPad=h,e.padOnContainer=f,r=0,i=c.length;i>r;++r)n=c[r],a=u.getSplitterTarget(n),a&&(s=void 0,l=!!n.hidden,a.split?l!==a.hidden&&(s=!a.hidden):a.isCollapsingOrExpanding&&(s=!!a.collapsed),s?n.show():s===!1&&n.hide());for(Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments),c=e.childItems,i=c.length,o={},e.borderAxisHorz=u.beginAxis(e,o,"horz"),e.borderAxisVert=u.beginAxis(e,o,"vert"),r=0;i>r;++r)t=c[r],a=u.getSplitterTarget(t.target),a&&(d=o[a.id],d||(d=e.getEl(a.el,u),d.region=a.region),t.collapseTarget=a=d,t.weight=a.weight,t.reverseWeighting=a.reverseWeighting,a.splitter=t,t.isHorz=a.isHorz,t.isVert=a.isVert);u.sortWeightedItems(c,"reverseWeighting"),u.setupSplitterNeighbors(c)},calculate:function(e){var t,n,i,r,o,a,s=this,l=s.getContainerSize(e),d=e.childItems,u=d.length,c=e.borderAxisHorz,h=e.borderAxisVert,p=e.outerPad,f=e.padOnContainer;for(c.begin=p[s.padOnContainerProp],h.begin=p.top,o=c.end=c.flexSpace=l.width+(f?p[s.padOnContainerProp]:-p[s.padNotOnContainerProp]),a=h.end=h.flexSpace=l.height+(f?p.top:-p.bottom),t=0;u>t;++t)n=d[t],i=n.getMarginInfo(),(n.isHorz||n.isCenter)&&(c.addUnflexed(i.width),o-=i.width),(n.isVert||n.isCenter)&&(h.addUnflexed(i.height),a-=i.height),n.flex||n.percentage||(n.isHorz||n.isCenter&&"horz"===n.collapseAxis?(r=n.getProp("width"),c.addUnflexed(r),n.collapseTarget&&(o-=r)):(n.isVert||n.isCenter&&"vert"===n.collapseAxis)&&(r=n.getProp("height"),h.addUnflexed(r),n.collapseTarget&&(a-=r)));for(t=0;u>t;++t)n=d[t],i=n.getMarginInfo(),n.percentage&&(n.isHorz?(r=Math.ceil(o*n.percentage/100),r=n.setWidth(r),c.addUnflexed(r)):n.isVert&&(r=Math.ceil(a*n.percentage/100),r=n.setHeight(r),h.addUnflexed(r)));for(t=0;u>t;++t)n=d[t],n.isCenter||(s.calculateChildAxis(n,c),s.calculateChildAxis(n,h));s.finishAxis(e,h)+s.finishAxis(e,c)<2?s.done=!1:s.finishPositions(d)},calculateChildAxis:function(e,t){var n,i,r,o,a,s=e.collapseTarget,l="set"+t.sizePropCap,d=t.sizeProp,u=e.getMarginInfo()[d];s?n=s.region:(n=e.region,r=e.flex),i=n===t.borderBegin,i||n===t.borderEnd?(r?(a=Math.ceil(t.flexSpace*(r/t.totalFlex)),a=e[l](a)):a=e.percentage?e.peek(d):e.getProp(d),a+=u,i?(o=t.begin,t.begin+=a):t.end=o=t.end-a):(e[l](t.end-t.begin-u),o=t.begin),e.layoutPos[t.posProp]=o},eachItem:function(e,t,n){var i,r=this,o=r.getLayoutItems(),a=0;for(Ext.isFunction(e)&&(t=e,n=t),a;a<o.length&&(i=o[a],e&&i.region!==e||t.call(n,i)!==!1);a++);},finishAxis:function(e,t){var n=t.end-t.begin,i=e.centerRegion;return i&&(i["set"+t.sizePropCap](n-i.getMarginInfo()[t.sizeProp]),i.layoutPos[t.posProp]=t.begin),Ext.isNumber(n)?1:0},finishPositions:function(e){var t,n,i=e.length,r=this.horzPositionProp;for(t=0;i>t;++t)n=e[t],n.setProp("x",n.layoutPos.x+n.marginInfo[r]),n.setProp("y",n.layoutPos.y+n.marginInfo.top)},getLayoutItems:function(){for(var e,t,n=this.owner,i=n&&n.items&&n.items.items||[],r=i.length,o=[],a=0;r>a;a++)e=i[a],t=e.placeholderFor,!e.hidden&&(e.floated&&2!==e.isCollapsingOrExpanding||t&&2===t.isCollapsingOrExpanding)||o.push(e);return o},getPlaceholder:function(e){return e.getPlaceholder&&e.getPlaceholder()},getMaxWeight:function(e){return this.getMinMaxWeight(e)},getMinWeight:function(e){return this.getMinMaxWeight(e,!0)},getMinMaxWeight:function(e,t){var n=this,i=null;return n.eachItem(e,function(e){if(e.hasOwnProperty("weight")){if(null===i)return void(i=e.weight);(t&&e.weight<i||e.weight>i)&&(i=e.weight)}},this),i},getSplitterTarget:function(e){var t=e.collapseTarget;return t&&t.collapsed?t.placeholder||t:t},isItemBoxParent:function(){return!0},isItemShrinkWrap:function(){return!0},insertSplitter:function(e,t,n,i){var r=e.region,o=Ext.apply({xtype:"bordersplitter",collapseTarget:e,id:e.id+"-splitter",hidden:n,canResize:e.splitterResize!==!1,splitterFor:e,synthetic:!0},i),a=t+("south"===r||"east"===r?0:1);"mini"===e.collapseMode&&(o.collapsedCls=e.collapsedCls),e.splitter=this.owner.add(a,o)},getMoveAfterIndex:function(e){var t=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);return e.splitter&&t++,t},moveItemBefore:function(e,t){var n;return t&&t.splitter&&(n=t.region,("south"===n||"east"===n)&&(t=t.splitter)),Ext.layout.container.Container.prototype.moveItemBefore.call(this,e,t)},onAdd:function(e,t){var n,i,r,o,a=this,s=e.placeholderFor,l=e.region;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments),l?(Ext.apply(e,a.regionFlags[l]),e.initBorderRegion&&e.initBorderRegion(),n="center"===l,n?a.centerRegion=e:(i=e.split,r=!!e.hidden,"object"==typeof i&&(o=i,i=!0),!e.isHorz&&!e.isVert||!i&&"mini"!==e.collapseMode||a.insertSplitter(e,t,r||!i,o)),n||e.hasOwnProperty("collapseMode")||(e.collapseMode=a.panelCollapseMode),e.hasOwnProperty("animCollapse")||("placeholder"!==e.collapseMode?e.animCollapse=!1:e.animCollapse=a.panelCollapseAnimate)):s&&(Ext.apply(e,a.regionFlags[s.region]),e.region=s.region,e.weight=s.weight)},onDestroy:function(){this.centerRegion=null,Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(e,t){var n,i=this,r=e.region,o=e.splitter,a=i.owner,s=a.destroying;r&&(e.isCenter&&(i.centerRegion=null),delete e.isCenter,delete e.isHorz,delete e.isVert,o&&!a.destroying&&a.doRemove(o,!0),delete e.splitter),Ext.layout.container.Container.prototype.onRemove.apply(this,arguments),s||t||!e.rendered||(n=e.getEl(),n&&(n.setStyle("top",""),n.setStyle(i.horzPositionProp,"")))},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:!0,isHorz:!1,isVert:!1},north:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"top"},south:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"bottom"},west:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"left"},east:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"right"}},setupSplitterNeighbors:function(e){var t,n,i,r,o,a,s,l,d,u={},c=e.length,h=this.touchedRegions;for(t=0;c>t;++t)if(a=e[t].target,s=a.region,a.isCenter)i=a;else if(s){for(d=h[s],n=0,r=d.length;r>n;++n)o=u[d[n]],o&&o.neighbors.push(a);l=a.placeholderFor?a.placeholderFor.splitter:a.splitter,l&&(l.neighbors=[]),u[s]=l}if(i)for(d=h.center,n=0,r=d.length;r>n;++n)o=u[d[n]],o&&o.neighbors.push(i)},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e){var t,n,i,r,o=this,a=this.sizePolicies;return e.isCenter?(r=e.placeholderFor,r?r.collapsedVertical()?a.vert:a.horz:e.collapsed?e.collapsedVertical()?a.vert:a.horz:a.flexAll):(t=e.collapseTarget,t?t.isVert?a.vert:a.horz:e.region?(e.isVert?(n=e.height,i=a.vert):(n=e.width,i=a.horz),e.flex||"string"==typeof n&&o.percentageRe.test(n)?a.flexAll:i):o.autoSizePolicy)}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var e={addUnflexed:function(e){this.flexSpace=Math.max(this.flexSpace-e,0)}},t=this.prototype.axisProps;Ext.apply(t.horz,e),Ext.apply(t.vert,e)}),Ext.define("Ext.rtl.layout.container.Border",{override:"Ext.layout.container.Border",initLayout:function(){var e=this;e.owner.getInherited().rtl&&(e.padOnContainerProp="right",e.padNotOnContainerProp="left",e.horzPositionProp="right"),(arguments.callee.$previous||Ext.layout.container.Container.prototype.initLayout).apply(this,arguments)}}),Ext.cmd.derive("Ext.layout.container.Card",Ext.layout.container.Fit,{alternateClassName:"Ext.layout.CardLayout",type:"card",hideInactive:!0,deferredRender:!1,scrollableCache:Ext.isGecko?{}:null,getRenderTree:function(){var e=this,t=e.getActiveItem();if(t){if(t.hasListeners.beforeactivate&&t.fireEvent("beforeactivate",t)===!1?t=e.activeItem=e.owner.activeItem=null:t.hasListeners.activate&&t.on({boxready:function(){t.fireEvent("activate",t)},single:!0}),!e.deferredRender)return Ext.layout.container.Fit.prototype.getRenderTree.apply(this,arguments);if(t)return e.getItemsRenderTree([t])}},renderChildren:function(){var e=this,t=e.getActiveItem();e.deferredRender?t&&e.renderItems([t],e.getRenderTarget()):Ext.layout.container.Fit.prototype.renderChildren.call(this)},isValidParent:function(e,t){var n=e.el?e.el.dom:Ext.getDom(e);return n&&n.parentNode===(t.dom||t)||!1},getActiveItem:function(){var e=this,t=void 0===e.activeItem?e.owner&&e.owner.activeItem:e.activeItem,n=e.parseActiveItem(t);return n&&-1!==e.owner.items.indexOf(n)&&(e.activeItem=n),null==n?null:e.activeItem||e.owner.activeItem},parseActiveItem:function(e){var t;return t=e&&e.isComponent?e:"number"==typeof e||void 0===e?this.getLayoutItems()[e||0]:null===e?null:this.owner.getComponent(e)},configureItem:function(e){e.setHiddenState(e!==this.getActiveItem()),Ext.layout.container.Fit.prototype.configureItem.apply(this,arguments)},onRemove:function(e){Ext.layout.container.Fit.prototype.onRemove.call(this,e),e===this.activeItem&&(this.activeItem=void 0)},getAnimation:function(e,t){var n=(e||{}).cardSwitchAnimation;return n===!1?!1:n||t.cardSwitchAnimation},getNext:function(){var e=arguments[0],t=this.getLayoutItems(),n=Ext.Array.indexOf(t,this.activeItem);return t[n+1]||(e?t[0]:!1)},next:function(){var e=arguments[0],t=arguments[1];return this.setActiveItem(this.getNext(t),e)},getPrev:function(){var e=arguments[0],t=this.getLayoutItems(),n=Ext.Array.indexOf(t,this.activeItem);return t[n-1]||(e?t[t.length-1]:!1)},prev:function(){var e=arguments[0],t=arguments[1];return this.setActiveItem(this.getPrev(t),e)},setActiveItem:function(e){var t,n,i,r,o,a=this,s=a.scrollableCache,l=a.owner,d=a.activeItem,u=l.rendered;if(e=a.parseActiveItem(e),t=l.items.indexOf(e),-1===t&&(t=l.items.items.length,Ext.suspendLayouts(),e=l.add(e),Ext.resumeLayouts()),e&&d!==e){if(e.fireEvent("beforeactivate",e,d)===!1)return!1;if(d&&d.fireEvent("beforedeactivate",d,e)===!1)return!1;if(u){if(Ext.suspendLayouts(),e.rendered||a.renderItem(e,a.getRenderTarget(),l.items.length),d&&a.hideInactive){if(n=d.el.contains(Ext.Element.getActiveElement()),s&&(i=d.scrollable)&&(s[d.id]={position:i.getPosition()},i.scrollTo(0,0)),d.hide(),!d.hidden)return!1;d.hiddenByLayout=!0,d.fireEvent("deactivate",d,e)}e.hidden&&e.show(),e.hidden?a.activeItem=e=null:(a.activeItem=e,n&&(e.defaultFocus||(e.defaultFocus=":focusable"),e.focus())),Ext.resumeLayouts(!0),s&&(r=s[e.id])&&(o=r.position,e.scrollable.scrollTo(o.x,o.y))}else a.activeItem=e;return e.fireEvent("activate",e,d),a.activeItem}return!1}},0,0,0,0,["layout.card"],0,[Ext.layout.container,"Card",Ext.layout,"CardLayout"],0),Ext.cmd.derive("Ext.dom.ButtonElement",Ext.dom.Element,{setSize:function(e,t,n){var i=this,r=i.component;return Ext.dom.Element.prototype.setSize.call(this,e,t,n),r.btnWrap.setStyle("table-layout",e&&"auto"!==e?"fixed":""),r.btnEl.setStyle("height",t&&"auto"!==t?"auto":""),i},setStyle:function(e,t){var n,i,r=this,o=r.component;return Ext.dom.Element.prototype.setStyle.call(this,e,t),e&&(("width"===e||"string"!=typeof e&&"width"in e)&&(n=t||e.width,o.btnWrap.setStyle("table-layout",n&&"auto"!==n?"fixed":"")),("height"===e||"string"!=typeof e&&"height"in e)&&(i=t||e.height,o.btnEl.setStyle("height",i&&"auto"!==i?"auto":""))),r},setHeight:function(e,t){return Ext.dom.Element.prototype.setHeight.call(this,e,t),this.component.btnEl.setStyle("height",e&&"auto"!==e?"auto":""),this},setWidth:function(e,t){return Ext.dom.Element.prototype.setWidth.call(this,e,t),this.component.btnWrap.setStyle("table-layout",e&&"auto"!==e?"fixed":""),this}},0,0,0,0,0,0,[Ext.dom,"ButtonElement"],0),Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:!0,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,buttonSelector:".x-btn",init:function(){var e=this;e.initialized||(Ext.getDoc().on({keydown:e.onDocumentKeyDown,mouseup:e.onDocumentMouseUp,scope:e}),e.initialized=!0)},onDocumentKeyDown:function(e){var t,n=e.getKey();(n===e.SPACE||n===e.ENTER)&&(t=e.getTarget(this.buttonSelector),t&&Ext.getCmp(t.id).onClick(e))},onButtonMousedown:function(e,t){var n=this.pressedButton;n&&n.onMouseUp(t),this.pressedButton=e},onDocumentMouseUp:function(e){var t=this.pressedButton;t&&(t.onMouseUp(e),this.pressedButton=null)},toggleGroup:function(e,t){if(t){var n,i=this.groups[e.toggleGroup],r=i.length;for(n=0;r>n;n++)i[n]!==e&&i[n].toggle(!1)}},register:function(e){var t=this,n=this.groups,i=n[e.toggleGroup];t.init(),e.toggleGroup&&(i||(i=n[e.toggleGroup]=[]),i.push(e),e.on("toggle",t.toggleGroup,t))},unregister:function(e){if(e.toggleGroup){var t=this,n=t.groups[e.toggleGroup];n&&(Ext.Array.remove(n,e),e.un("toggle",t.toggleGroup,t))}},getPressed:function(e){var t,n=this.groups[e],i=0;if(n)for(t=n.length;t>i;i++)if(n[i].pressed===!0)return n[i];return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0),Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:!0,alternateClassName:"Ext.menu.MenuMgr",groups:{},visible:[],constructor:function(){var e=this;e.onShow=function(){return delete e.onShow,Ext.on("mousedown",e.checkActiveMenus,e),e.onShow.apply(e,arguments)}},checkActiveMenus:function(e){var t,n,i=this.visible,r=i.length;if(r)for(i=i.slice(),t=0;r>t;++t)n=i[t],n.owns(e)||n.hide()},onShow:function(e){e.floating&&Ext.Array.include(this.visible,e)},onHide:function(e){e.floating&&Ext.Array.remove(this.visible,e)},hideAll:function(){var e,t=this.visible,n=t.length,i=!1;if(n)for(t=t.slice(),e=0;n>e;e++)t[e].hide(),i=!0;return i},get:function(e,t){var n;return"string"==typeof e?(n=Ext.getCmp(e),n instanceof Ext.menu.Menu&&(e=n)):Ext.isArray(e)?(t=Ext.apply({items:e},t),e=new Ext.menu.Menu(t)):e.isComponent||(t=Ext.apply({},e,t),e=Ext.ComponentManager.create(t,"menu")),e},registerCheckable:function(e){var t=this.groups,n=e.group;n&&(t[n]||(t[n]=[]),t[n].push(e))},unregisterCheckable:function(e){var t=this.groups,n=e.group;n&&Ext.Array.remove(t[n],e)},onCheckChange:function(e,t){var n,i,r,o=this.groups,a=e.group,s=0;if(a&&t)for(n=o[a],i=n.length;i>s;s++)r=n[s],r!==e&&r.setChecked(!1)}},1,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0),Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:!0},isButton:!0,_syncFrameHeight:!0,liquidLayout:!0,hidden:!1,disabled:!1,pressed:!1,tabIndex:0,enableToggle:!1,menuAlign:"tl-bl?",showEmptyMenu:!1,clickEvent:"click",preventDefault:!0,handleMouseEvents:!0,tooltipType:"qtip",baseCls:"x-btn",hrefTarget:"_blank",destroyMenu:!0,focusable:!0,ariaRole:"button",defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl"],publishes:{pressed:1},_btnWrapCls:"x-btn-wrap",_btnCls:"x-btn-button",_baseIconCls:"x-btn-icon-el",_glyphCls:"x-btn-glyph",_innerCls:"x-btn-inner",_textCls:"x-btn-text",_noTextCls:"x-btn-no-text",_hasIconCls:"x-btn-icon",_pressedCls:"x-btn-pressed",overCls:"x-btn-over",_disabledCls:"x-btn-disabled",_menuActiveCls:"x-btn-menu-active",_operaArrowCls:"x-opera12m-btn-arrow",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:!1,shrinkWrap:3,frame:!0,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){this.disabled||this.doNavigate()},doNavigate:function(){"_blank"===this.hrefTarget?window.open(this.getHref(),this.hrefTarget):location.href=this.getHref()},_triggerRegion:{},initComponent:function(){var e=this;e.addCls("x-unselectable"),Ext.isOpera12m&&(e.split||e.menu)&&e.getArrowVisible()&&e.addCls(e._operaArrowCls+"-"+e.arrowAlign),Ext.Component.prototype.initComponent.call(this),e.menu&&(e.split=!0,e.setMenu(e.menu,!1,!0)),e.url&&(e.href=e.url),e.configuredWithPreventDefault=e.hasOwnProperty("preventDefault"),e.href&&!e.configuredWithPreventDefault&&(e.preventDefault=!1),Ext.isString(e.toggleGroup)&&""!==e.toggleGroup&&(e.enableToggle=!0),e.html&&!e.text&&(e.text=e.html,delete e.html)},getElConfig:function(){var e=this,t=Ext.Component.prototype.getElConfig.call(this),n=e.getHref(),i=e.hrefTarget;return"a"===t.tag&&(e.disabled||(t.tabIndex=e.tabIndex),n&&(e.disabled||(t.href=n,i&&(t.target=i)))),t},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this),this.pressed&&this.addCls(this._pressedCls)},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(e,t,n){var i,r=this,o=r.menu;o&&!n&&(t!==!1&&r.destroyMenu&&o.destroy(),o.ownerCmp=null),e?(i=e.isMenu,e=Ext.menu.Manager.get(e,{ownerCmp:r}),e.setOwnerCmp(r,i),e.menuClickBuffer=250,r.mon(e,{scope:r,show:r.onMenuShow,hide:r.onMenuHide}),!o&&r.getArrowVisible()&&(r.split=!0,r.rendered&&(r._addSplitCls(),r.updateLayout())),r.menu=e):(r.rendered&&(r._removeSplitCls(),r.updateLayout()),r.split=!1,r.menu=null)},onRender:function(){var e,t,n,i=this;Ext.Component.prototype.onRender.apply(this,arguments),t=i.el,i.tooltip&&i.setTooltip(i.tooltip,!0),i.handleMouseEvents?(n={scope:i,mouseover:i.onMouseOver,mouseout:i.onMouseOut,mousedown:i.onMouseDown},i.split&&(n.mousemove=i.onMouseMove)):n={scope:i},Ext.supports.Touch&&(n.touchstart=i.onTouchStart),i.menu&&(i.keyMap=new Ext.util.KeyMap({target:i.el,key:Ext.event.Event.prototype.DOWN,handler:i.onDownKey,scope:i})),i.repeat?i.mon(new Ext.util.ClickRepeater(t,Ext.isObject(i.repeat)?i.repeat:{}),"click",i.onRepeatClick,i):n[i.clickEvent]?e=!0:n[i.clickEvent]=i.onClick,i.mon(t,n),i.hasFrameTable()&&i.mon(i.frameTable,"click",i.frameTableListener,i),e&&i.mon(t,i.clickEvent,i.onClick,i),Ext.button.Manager.register(i)},onFocusLeave:function(e){Ext.Component.prototype.onFocusLeave.call(this,e),this.menu&&this.menu.hide()},getTemplateArgs:function(){var e,t=this,n=t._btnCls,i=t._baseIconCls,r=t.getIconAlign(),o=t.glyph,a=Ext._glyphFontFamily,s=t.text,l=t._hasIcon(),d=t._hasIconCls;return"string"==typeof o&&(e=o.split("@"),o=e[0],a=e[1]),{innerCls:t._innerCls,splitCls:t.getArrowVisible()?t.getSplitCls():"",iconUrl:t.icon,iconCls:t.iconCls,glyph:o,glyphCls:o?t._glyphCls:"",glyphFontFamily:a,text:s||"&#160;",closeText:t.closeText,textCls:s?t._textCls:"",noTextCls:s?"":t._noTextCls,hasIconCls:l?d:"",btnWrapCls:t._btnWrapCls,btnWrapStyle:t.width?"table-layout:fixed;":"",btnElStyle:t.height?"height:auto;":"",btnCls:n,baseIconCls:i,iconBeforeText:"left"===r||"top"===r,iconAlignCls:l?d+"-"+r:"",textAlignCls:n+"-"+t.getTextAlign()}},renderIcon:function(e){return this.getTpl("iconTpl").apply(e)},setHref:function(e){var t,n=this,i=n.hrefTarget;n.href=e,n.configuredWithPreventDefault||(n.preventDefault=!e),n.rendered&&(t=n.el.dom,!e||n.disabled?(t.removeAttribute("href"),t.removeAttribute("hrefTarget")):(t.href=n.getHref(),i&&(t.target=i)))},getHref:function(){var e=this,t=e.href;return t?Ext.urlAppend(t,Ext.Object.toQueryString(Ext.apply({},e.params,e.baseParams))):!1},setParams:function(e){var t,n=this;n.params=e,n.rendered&&(t=n.el.dom,n.disabled?t.removeAttribute("href"):t.href=n.getHref()||"")},getSplitCls:function(){var e=this;return e.split?e.baseCls+"-"+e.arrowCls+" "+(e.baseCls+"-"+e.arrowCls+"-"+e.arrowAlign):""},setIcon:function(e){e=e||"";var t=this,n=t.btnIconEl,i=t.icon||"";return t.icon=e,e!==i&&(n&&(n.setStyle("background-image",e?"url("+e+")":""),t._syncHasIconCls(),t.didIconStateChange(i,e)&&t.updateLayout()),t.fireEvent("iconchange",t,i,e)),t},setIconCls:function(e){e=e||"";var t=this,n=t.btnIconEl,i=t.iconCls||"";return t.iconCls=e,i!==e&&(n&&(n.removeCls(i),n.addCls(e),t._syncHasIconCls(),t.didIconStateChange(i,e)&&t.updateLayout()),t.fireEvent("iconchange",t,i,e)),t},setGlyph:function(e){e=e||0;var t,n,i=this,r=i.btnIconEl,o=i.glyph,a=i._glyphCls;return i.glyph=e,r&&("string"==typeof e&&(n=e.split("@"),e=n[0],t=n[1]||Ext._glyphFontFamily),e?o!==e&&(r.dom.innerHTML="&#"+e+";",r.addCls(a)):(r.dom.innerHTML="",r.removeCls(a)),t&&r.setStyle("font-family",t),i._syncHasIconCls(),i.didIconStateChange(o,e)&&i.updateLayout()),i.fireEvent("glyphchange",i,i.glyph,o),i},setTooltip:function(e,t){var n=this;return n.rendered?(t&&e||n.clearTip(),e&&(Ext.quickTipsActive&&Ext.isObject(e)?(Ext.tip.QuickTipManager.register(Ext.apply({target:n.el.id},e)),n.tooltip=e):n.el.dom.setAttribute(n.getTipAttr(),e))):n.tooltip=e,n},updateIconAlign:function(e,t){var n,i,r,o=this;o.rendered&&(n=o.btnEl,i=o.btnIconEl,r=o._hasIconCls,t&&n.removeCls(r+"-"+t),n.addCls(r+"-"+e),"top"===e||"left"===e?n.insertFirst(i):n.appendChild(i),o.updateLayout())},updateTextAlign:function(e,t){var n=this,i=n.btnEl,r=n._btnCls;n.rendered&&(i.removeCls(r+"-"+t),i.addCls(r+"-"+e))},getTipAttr:function(){return"qtip"===this.tooltipType?"data-qtip":"title"},getRefItems:function(e){var t,n=this.menu;return n&&(t=n.getRefItems(e),t.unshift(n)),t||[]},clearTip:function(){var e=this,t=e.el;Ext.quickTipsActive&&Ext.isObject(e.tooltip)?Ext.tip.QuickTipManager.unregister(t):t.dom.removeAttribute(e.getTipAttr())},beforeDestroy:function(){var e=this;e.rendered&&e.clearTip(),Ext.destroy(e.repeater),Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var e=this,t=e.menu;e.rendered&&(Ext.destroy(e.keyMap),delete e.keyMap),t&&e.destroyMenu&&(e.menu=Ext.destroy(t)),Ext.button.Manager.unregister(e),Ext.Component.prototype.onDestroy.call(this)},setHandler:function(e,t){return this.handler=e,arguments.length>1&&(this.scope=t),this},updateText:function(e,t){e=null==e?"":e+"",t=t||"";var n=this,i=n.btnInnerEl,r=n.btnEl;n.rendered&&(i.setHtml(e||"&#160;"),r[e?"addCls":"removeCls"](n._textCls),r[e?"removeCls":"addCls"](n._noTextCls),n.updateLayout()),n.fireEvent("textchange",n,t,e)},didIconStateChange:function(e,t){var n=Ext.isEmpty(t);return Ext.isEmpty(e)?!n:n},setPressed:function(e){return this.toggle(e!==!1)},toggle:function(e,t){var n=this;return e=void 0===e?!n.pressed:!!e,e!==n.pressed&&(n[e?"addCls":"removeCls"](n._pressedCls),n.pressed=e,t||(n.fireEvent("toggle",n,e),Ext.callback(n.toggleHandler,n.scope,[n,e],0,n),n.reference&&n.publishState&&n.publishState("pressed",e))),
n},maybeShowMenu:function(e){this.menu&&this.showMenu(e)},showMenu:function(e){var t=this,n=t.menu,i=!e||e.pointerType;return n&&t.rendered&&(t.tooltip&&Ext.quickTipsActive&&"title"!==t.getTipAttr()&&Ext.tip.QuickTipManager.getQuickTip().cancelShow(t.el),n.isVisible()?i?n.hide():n.focus():(!e||t.showEmptyMenu||n.items.getCount()>0)&&(n.autoFocus=!i,n.showBy(t.el,t.menuAlign))),t},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){var e=this.menu;return e&&e.rendered&&e.isVisible()},onRepeatClick:function(e,t){this.onClick(t)},onTouchStart:function(e){this.doPreventDefault(e)},onClick:function(e){var t=this;t.doPreventDefault(e),"keydown"!==e.type&&e.button||t.disabled||(t.doToggle(),t.maybeShowMenu(e),t.fireHandler(e))},doPreventDefault:function(e){e&&(this.preventDefault||this.disabled&&this.getHref())&&e.preventDefault()},fireHandler:function(e){var t=this;t.fireEvent("click",t,e)===!1||t.isDestroyed||Ext.callback(t.handler,t.scope,[t,e],0,t)},doToggle:function(){var e=this;!e.enableToggle||e.allowDepress===!1&&e.pressed||e.toggle()},onMouseOver:function(e){var t=this;t.disabled||e.within(t.el,!0,!0)||t.onMouseEnter(e)},onMouseOut:function(e){var t=this;e.within(t.el,!0,!0)||(t.overMenuTrigger&&t.onMenuTriggerOut(e),t.onMouseLeave(e))},onMouseMove:function(e){var t=this,n=t.overMenuTrigger;t.split&&(t.isWithinTrigger(e)?n||t.onMenuTriggerOver(e):n&&t.onMenuTriggerOut(e))},isWithinTrigger:function(e){var t,n,i=this,r=i.el;return t="right"===i.arrowAlign?e.getX()-i.getX():e.getY()-r.getY(),n=i.getTriggerRegion(),t>n.begin&&t<n.end},getTriggerRegion:function(){var e=this,t=e._triggerRegion,n="right"===e.arrowAlign,i=n?"getRight":"getBottom",r=n?e.getWidth():e.getHeight();return t.begin=r-(e.el[i]()-e.btnEl[i]()),t.end=r,t},onMouseEnter:function(e){this.fireEvent("mouseover",this,e)},onMouseLeave:function(e){this.fireEvent("mouseout",this,e)},onMenuTriggerOver:function(e){var t=this,n=t.arrowTooltip;t.overMenuTrigger=!0,t.split&&n&&t.btnWrap.dom.setAttribute(t.getTipAttr(),n),t.fireEvent("menutriggerover",t,t.menu,e)},onMenuTriggerOut:function(e){var t=this;delete t.overMenuTrigger,t.split&&t.arrowTooltip&&t.btnWrap.dom.setAttribute(t.getTipAttr(),""),t.fireEvent("menutriggerout",t,t.menu,e)},enable:function(){var e,t=this,n=t.href,i=t.hrefTarget;return Ext.Component.prototype.enable.apply(this,arguments),t.removeCls(t._disabledCls),t.rendered&&(e=t.el.dom,e.setAttribute("tabindex",t.tabIndex),n&&(e.href=n),i&&(e.target=i)),t},disable:function(){var e,t=this;return Ext.Component.prototype.disable.apply(this,arguments),t.addCls(t._disabledCls),t.removeCls(t.overCls),t.rendered&&(e=t.el.dom,e.removeAttribute("tabindex"),t.href&&e.removeAttribute("href"),t.hrefTarget&&e.removeAttribute("target")),t},setScale:function(e){var t=this,n=t.ui.replace("-"+t.scale,"");if(!Ext.Array.contains(t.allowedScales,e))throw"#setScale: scale must be an allowed scale ("+t.allowedScales.join(", ")+")";t.scale=e,t.setUI(n)},setUI:function(e){var t=this;t.scale&&!e.match(t.scale)&&(e=e+"-"+t.scale),Ext.Component.prototype.setUI.call(this,e)},onMouseDown:function(e){var t=this;(Ext.isIE||"touch"===e.pointerType)&&Ext.defer(function(){if(!e.defaultPrevented){var n=t.getFocusEl();n&&n.focus()}},1),t.disabled||0!==e.button||(Ext.button.Manager.onButtonMousedown(t,e),t.addCls(t._pressedCls))},onMouseUp:function(e){var t=this;t.isDestroyed||0!==e.button||t.pressed||t.removeCls(t._pressedCls)},onMenuShow:function(){var e=this;e.addCls(e._menuActiveCls),e.fireEvent("menushow",e,e.menu)},onMenuHide:function(){var e=this;e.removeCls(e._menuActiveCls),e.fireEvent("menuhide",e,e.menu)},onDownKey:function(e,t){var n=this;return n.menu&&!n.disabled?(n.showMenu(t),t.stopEvent(),!1):void 0},updateArrowVisible:function(e){var t=this;return t.rendered&&(e?(t.menu||t.isSplitButton)&&(t.split=!0,t._addSplitCls()):(t._removeSplitCls(),t.split=!1)),e},privates:{addOverCls:function(){this.disabled||this.addCls(this.overCls)},_addSplitCls:function(){var e=this;e.btnWrap.addCls(e.getSplitCls()),Ext.isOpera12m&&e.addCls(e._operaArrowCls+"-"+e.arrowAlign)},getFocusEl:function(){return this.el},getTdCls:function(){return"x-button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var e=this;e.btnWrap.removeCls(e.getSplitCls()),Ext.isOpera12m&&e.removeCls(e._operaArrowCls+"-"+e.arrowAlign)},_syncHasIconCls:function(){var e=this,t=e.btnEl,n=e._hasIconCls;t&&t[e._hasIcon()?"addCls":"removeCls"]([n,n+"-"+e.iconAlign])},_hasIcon:function(){return!!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(e){this.el=new Ext.dom.ButtonElement(e),Ext.Component.prototype.wrapPrimaryEl.call(this,e)}}},0,["button"],["component","box","button"],{component:!0,box:!0,button:!0},["widget.button"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.button,"Button",Ext,"Button"],0),Ext.define("Ext.rtl.button.Button",{override:"Ext.button.Button",getTriggerRegion:function(){var e=this,t=e._triggerRegion;return!Ext.rootInheritedState.rtl!=!this.getInherited().rtl&&"right"===e.arrowAlign?(t.begin=0,t.end=e.btnEl.getX()-e.el.getX()):t=arguments.callee.$previous.call(this),t}}),Ext.cmd.derive("Ext.tab.Tab",Ext.button.Button,{isTab:!0,tabIndex:-1,baseCls:"x-tab",closeElOverCls:"x-tab-close-btn-over",closeElPressedCls:"x-tab-close-btn-pressed",config:{rotation:"default",tabPosition:"top"},closable:!0,closeText:"Close Tab",active:!1,childEls:["closeEl"],scale:!1,ariaRole:"tab",_btnWrapCls:"x-tab-wrap",_btnCls:"x-tab-button",_baseIconCls:"x-tab-icon-el",_glyphCls:"x-tab-glyph",_innerCls:"x-tab-inner",_textCls:"x-tab-text",_noTextCls:"x-tab-no-text",_hasIconCls:"x-tab-icon",_activeCls:"x-tab-active",_closableCls:"x-tab-closable",overCls:"x-tab-over",_pressedCls:"x-tab-pressed",_disabledCls:"x-tab-disabled",_rotateClasses:{1:"x-tab-rotate-right",2:"x-tab-rotate-left"},_positions:{top:{"default":"top",0:"top",1:"left",2:"right"},right:{"default":"top",0:"right",1:"top",2:"bottom"},bottom:{"default":"bottom",0:"bottom",1:"right",2:"left"},left:{"default":"top",0:"left",1:"bottom",2:"top"}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){var e=this;e.card&&e.setCard(e.card),Ext.button.Button.prototype.initComponent.apply(this,arguments)},getActualRotation:function(){var e=this.getRotation();return"default"!==e?e:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var e=this,t=e._rotateClasses,n=e.getTabPosition(),i=e.getActualRotation(),r=e._rotateCls,o=e._rotateCls=t[i],a=e._positionCls,s=e._positionCls=e._positions[n][i];r!==o&&(r&&e.removeCls(r),o&&e.addCls(o)),a!==s&&(a&&e.removeClsWithUI(a),s&&e.addClsWithUI(s),e.rendered&&e.updateFrame()),e.rendered&&e.setElOrientation()},onAdded:function(e,t,n){Ext.button.Button.prototype.onAdded.call(this,e,t,n),this.syncRotationAndPosition()},getTemplateArgs:function(){var e=this,t=Ext.button.Button.prototype.getTemplateArgs.call(this);return t.closable=e.closable,t.closeText=e.closeText,t},beforeRender:function(){var e=this,t=e.up("tabbar"),n=e.up("tabpanel");Ext.button.Button.prototype.beforeRender.call(this),e.active&&e.addCls(e._activeCls),e.syncClosableCls(),e.minWidth||(e.minWidth=t?t.minTabWidth:e.minWidth,!e.minWidth&&n&&(e.minWidth=n.minTabWidth),e.minWidth&&e.iconCls&&(e.minWidth+=25)),e.maxWidth||(e.maxWidth=t?t.maxTabWidth:e.maxWidth,!e.maxWidth&&n&&(e.maxWidth=n.maxTabWidth))},onRender:function(){var e=this;e.setElOrientation(),Ext.button.Button.prototype.onRender.apply(this,arguments),e.closable&&(e.closeEl.addClsOnOver(e.closeElOverCls),e.closeEl.addClsOnClick(e.closeElPressedCls)),e.initKeyNav()},initKeyNav:function(){var e=this;e.keyNav=new Ext.util.KeyNav(e.el,{enter:e.onEnterKey,del:e.onDeleteKey,scope:e})},setElOrientation:function(){var e=this,t=e.getActualRotation(),n=e.el;t?n.setVertical(1===t?90:270):n.setHorizontal()},enable:function(){var e=this;return Ext.button.Button.prototype.enable.apply(this,arguments),e.removeCls(e._disabledCls),e},disable:function(){var e=this;return Ext.button.Button.prototype.disable.apply(this,arguments),e.addCls(e._disabledCls),e},onDestroy:function(){var e=this;Ext.destroy(e.keyNav),delete e.keyNav,Ext.button.Button.prototype.onDestroy.apply(this,arguments)},setClosable:function(e){var t=this;e=!arguments.length||!!e,t.closable!==e&&(t.closable=e,t.card&&(t.card.closable=e),t.syncClosableCls(),t.rendered&&(t.syncClosableElements(),t.updateLayout()))},syncClosableElements:function(){var e=this,t=e.closeEl;e.closable?(t||(t=e.closeEl=e.btnWrap.insertSibling({tag:"a",role:"presentation",cls:e.baseCls+"-close-btn",href:"#",title:e.closeText},"after")),t.addClsOnOver(e.closeElOverCls),t.addClsOnClick(e.closeElPressedCls)):t&&(t.destroy(),delete e.closeEl)},syncClosableCls:function(){var e=this,t=e._closableCls;e.closable?e.addCls(t):e.removeCls(t)},setCard:function(e){var t=this;t.card=e,e.iconAlign&&t.setIconAlign(e.iconAlign),e.textAlign&&t.setTextAlign(e.textAlign),t.setText(t.title||e.title),t.setIconCls(t.iconCls||e.iconCls),t.setIcon(t.icon||e.icon),t.setGlyph(t.glyph||e.glyph)},onCloseClick:function(){var e=this;if(e.fireEvent("beforeclose",e)!==!1)if(e.tabBar){if(e.tabBar.closeTab(e)===!1)return}else e.fireClose()},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(e){var t=this;t.tabBar&&t.tabBar.onClick(e,t.el)},onDeleteKey:function(){this.closable&&this.onCloseClick()},beforeClick:function(e){e||this.focus()},activate:function(e){var t=this;t.active=!0,t.addCls(t._activeCls),e!==!0&&t.fireEvent("activate",t)},deactivate:function(e){var t=this;t.active=!1,t.removeCls(t._activeCls),e!==!0&&t.fireEvent("deactivate",t)},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this._positionCls},wrapPrimaryEl:function(e){Ext.Button.superclass.wrapPrimaryEl.call(this,e)}}},0,["tab"],["component","box","button","tab"],{component:!0,box:!0,button:!0,tab:!0},["widget.tab"],0,[Ext.tab,"Tab"],0),Ext.cmd.derive("Ext.layout.component.Body",Ext.layout.component.Auto,{type:"body",beginLayout:function(e){Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments),e.bodyContext=e.getEl("body")},beginLayoutCycle:function(e){var t=this,n=t.lastWidthModel,i=t.lastHeightModel,r=t.owner.body;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments),n&&n.fixed&&e.widthModel.shrinkWrap&&r.setWidth(null),i&&i.fixed&&e.heightModel.shrinkWrap&&r.setHeight(null)},calculateOwnerHeightFromContentHeight:function(e){var t=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments);return e.targetContext!==e&&(t+=e.getPaddingInfo().height),t},calculateOwnerWidthFromContentWidth:function(e){var t=Ext.layout.component.Auto.prototype.calculateOwnerWidthFromContentWidth.apply(this,arguments);return e.targetContext!==e&&(t+=e.getPaddingInfo().width),t},measureContentWidth:function(e){return e.bodyContext.setWidth(e.bodyContext.el.dom.offsetWidth,!1)},measureContentHeight:function(e){return e.bodyContext.setHeight(e.bodyContext.el.dom.offsetHeight,!1)},publishInnerHeight:function(e,t){var n=t-e.getFrameInfo().height,i=e.targetContext;return i!==e&&(n-=e.getPaddingInfo().height),e.bodyContext.setHeight(n,!e.heightModel.natural)},publishInnerWidth:function(e,t){var n=t-e.getFrameInfo().width,i=e.targetContext;i!==e&&(n-=e.getPaddingInfo().width),e.bodyContext.setWidth(n,!e.widthModel.natural)}},0,0,0,0,["layout.body"],0,[Ext.layout.component,"Body"],0),Ext.cmd.derive("Ext.tab.Bar",Ext.panel.Bar,{baseCls:"x-tab-bar",componentLayout:"body",isTabBar:!0,config:{tabRotation:"default",tabStretchMax:!0,activateOnFocus:!0},defaultType:"tab",plain:!1,ensureActiveVisibleOnChange:!0,ariaRole:"tablist",childEls:["body","strip"],_stripCls:"x-tab-bar-strip",_baseBodyCls:"x-tab-bar-body",renderTpl:'<div id="{id}-body" data-ref="body" role="presentation" class="{baseBodyCls} {baseBodyCls}-{ui} {bodyCls} {bodyTargetCls}{childElCls}"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>{%this.renderContainer(out,values)%}</div><div id="{id}-strip" data-ref="strip" role="presentation" class="{stripCls} {stripCls}-{ui}{childElCls}"></div>',_reverseDockNames:{left:"right",right:"left"},_layoutAlign:{top:"end",right:"begin",bottom:"begin",left:"end"},initComponent:function(){var e=this,t=e.initialConfig.layout,n=t&&t.align,i=t&&t.overflowHandler;e.plain&&e.addCls(e.baseCls+"-plain"),Ext.panel.Bar.prototype.initComponent.call(this),e.setLayout({align:n||(e.getTabStretchMax()?"stretchmax":e._layoutAlign[e.dock]),overflowHandler:i||"scroller"}),e.on({click:e.onClick,element:"el",scope:e})},ensureTabVisible:function(e){var t=this,n=t.tabPanel,i=t.layout.overflowHandler;t.rendered&&i&&t.tooNarrow&&i.scrollToItem&&((e||0===e)&&(e.isTab||(Ext.isNumber(e)?e=this.items.getAt(e):e.isComponent&&n&&n.items.contains(e)&&(e=e.tab))),e||(e=t.activeTab),e&&i.scrollToItem(e))},initRenderData:function(){var e=this;return Ext.apply(Ext.panel.Bar.prototype.initRenderData.call(this),{bodyCls:e.bodyCls,baseBodyCls:e._baseBodyCls,bodyTargetCls:e.bodyTargetCls,stripCls:e._stripCls,dock:e.dock})},setDock:function(e){var t,n,i,r=this,o=r.items,a=r.ownerCt;if(o=o&&o.items)for(n=0,i=o.length;i>n;n++)t=o[n],t.isTab&&t.setTabPosition(e);r.rendered&&(r.resetItemMargins(),a&&a.isHeader&&a.resetItemMargins(),r.needsScroll=!0),Ext.panel.Bar.prototype.setDock.call(this,e)},updateTabRotation:function(e){var t,n,i,r=this,o=r.items;if(o=o&&o.items)for(t=0,n=o.length;n>t;t++)i=o[t],i.isTab&&i.setRotation(e);r.rendered&&(r.resetItemMargins(),r.needsScroll=!0,r.updateLayout())},onRender:function(){var e=this;Ext.panel.Bar.prototype.onRender.call(this),Ext.isIE8&&e.vertical&&e.el.on({mousemove:e.onMouseMove,scope:e})},afterLayout:function(){this.adjustTabPositions(),Ext.panel.Bar.prototype.afterLayout.apply(this,arguments)},onAdd:function(e,t){var n=this.onTabContentChange;this.ensureActiveVisibleOnChange&&(e.barListeners=e.on({scope:this,destroyable:!0,glyphchange:n,iconchange:n,textchange:n})),Ext.panel.Bar.prototype.onAdd.call(this,e,t)},onAdded:function(e,t,n){e.isHeader&&this.addCls(e.baseCls+"-"+e.ui+"-tab-bar"),Ext.panel.Bar.prototype.onAdded.call(this,e,t,n)},onRemove:function(e,t){var n=this;n.ensureActiveVisibleOnChange&&(t||e.barListeners.destroy(),e.barListeners=null),e===n.previousTab&&(n.previousTab=null),Ext.panel.Bar.prototype.onRemove.call(this,e,t)},onRemoved:function(e){var t=this.ownerCt;t.isHeader&&this.removeCls(t.baseCls+"-"+t.ui+"-tab-bar"),Ext.panel.Bar.prototype.onRemoved.call(this,e)},onTabContentChange:function(e){e===this.activeTab&&this.ensureTabVisible(e)},afterComponentLayout:function(){var e=this,t=e.needsScroll,n=e.layout.overflowHandler;Ext.panel.Bar.prototype.afterComponentLayout.apply(this,arguments),n&&t&&e.tooNarrow&&n.scrollToItem&&n.scrollToItem(e.activeTab),delete e.needsScroll},onMouseMove:function(e){var t,n,i=this,r=i._overTab;e.getTarget(".x-box-scroller")||(t=i.getTabInfoFromPoint(e.getXY()),n=t.tab,n!==r&&(r&&r.rendered&&(r.onMouseLeave(e),i._overTab=null),n?(n.onMouseEnter(e),i._overTab=n,n.disabled||i.el.setStyle("cursor","pointer")):i.el.setStyle("cursor","default")))},onMouseLeave:function(e){var t=this._overTab;t&&t.rendered&&t.onMouseLeave(e)},getTabInfoFromPoint:function(e){for(var t,n,i,r,o,a,s,l,d,u,c,h,p,f,g,m,x,v=this,y=v.items.items,E=y.length,b=v.layout.innerCt,C=b.getXY(),w=new Ext.util.Point(e[0],e[1]),S=0;E>S;S++)if(x=y[S],t=x.lastBox,t&&x.isTab&&(u=C[0]+t.x,c=C[1]-b.dom.scrollTop+t.y,h=t.width,p=t.height,n=new Ext.util.Region(c,u+h,c+p,u),n.contains(w))){i=x.closeEl,i&&(void 0===v._isTabReversed&&(v._isTabReversed=g=-1!==x.btnWrap.dom.currentStyle.filter.indexOf("rotation=2")),m=g?this._reverseDockNames[v.dock]:v.dock,l=i.getWidth(),d=i.getHeight(),o=v.getCloseXY(i,u,c,h,p,l,d,m),a=o[0],s=o[1],f=new Ext.util.Region(s,a+l,s+d,a),r=f.contains(w));break}return{tab:x,close:r}},getCloseXY:function(e,t,n,i,r,o,a,s){var l,d,u=e.getXY();return"right"===s?(l=t+i-(u[1]-n+a),d=n+(u[0]-t)):(l=t+(u[1]-n),d=n+t+r-u[0]-o),[l,d]},closeTab:function(e){var t,n=this,i=e.card,r=n.tabPanel;if(i&&i.fireEvent("beforeclose",i)===!1)return!1;if(t=n.findNextActivatable(e),Ext.suspendLayouts(),r&&i){if(delete e.ownerCt,i.fireEvent("close",i),r.remove(i),r.getComponent(i))return e.ownerCt=n,Ext.resumeLayouts(!0),!1;e.fireClose(),n.remove(e)}t&&(r?r.setActiveTab(t.card):n.setActiveTab(t),t.focus()),Ext.resumeLayouts(!0)},findNextActivatable:function(e){var t=this;return e.active&&t.items.getCount()>1?t.previousTab&&t.previousTab!==e&&!t.previousTab.disabled?t.previousTab:e.next("tab[disabled=false]")||e.prev("tab[disabled=false]"):void 0},setActiveTab:function(e,t){var n=this;e.disabled||e===n.activeTab||(n.activeTab&&(n.activeTab.isDestroyed?n.previousTab=null:(n.previousTab=n.activeTab,n.activeTab.deactivate(),n.deactivateFocusable(n.activeTab))),e.activate(),n.activateFocusable(e),n.activeTab=e,n.needsScroll=!0,t||(n.fireEvent("change",n,e,e.card),n.updateLayout()))},privates:{adjustTabPositions:function(){var e,t,n,i,r,o=this,a=o.items.items,s=a.length;if(!Ext.isIE8)for(r=o._getTabAdjustProp();s--;)e=a[s],n=e.el,t=e.lastBox,i=e.isTab?e.getActualRotation():0,1===i&&e.isVisible()?n.setStyle(r,t.x+t.width+"px"):2===i&&e.isVisible()&&n.setStyle(r,t.x-t.height+"px")},applyTargetCls:function(e){this.bodyTargetCls=e},_getTabAdjustProp:function(){return"left"},getTargetEl:function(){return this.body||this.frameBody||this.el},onClick:function(e,t){var n,i,r,o,a=this;e.getTarget(".x-box-scroller")||(Ext.isIE8&&a.vertical?(o=a.getTabInfoFromPoint(e.getXY()),i=o.tab,r=o.close):(n=e.getTarget("."+Ext.tab.Tab.prototype.baseCls),i=n&&Ext.getCmp(n.id),r=i&&i.closeEl&&t===i.closeEl.dom),r&&e.preventDefault(),i&&i.isDisabled&&!i.isDisabled()&&(i.beforeClick(r),i.closable&&r?i.onCloseClick():a.doActivateTab(i)))},doActivateTab:function(e){var t=this.tabPanel;t?e.disabled||t.setActiveTab(e.card):this.setActiveTab(e)},onFocusableContainerFocus:function(e){var t,n=this,i=n.mixins.focusablecontainer;t=i.onFocusableContainerFocus.call(n,e),t&&t.isTab&&n.doActivateTab(t)},onFocusableContainerFocusEnter:function(e){var t,n=this,i=n.mixins.focusablecontainer;t=i.onFocusableContainerFocusEnter.call(n,e),t&&t.isTab&&n.doActivateTab(t)},focusChild:function(e,t){var n,i=this,r=i.mixins.focusablecontainer;n=r.focusChild.call(i,e,t),i.activateOnFocus&&n&&n.isTab&&i.doActivateTab(n)}}},0,["tabbar"],["component","box","container","tabbar"],{component:!0,box:!0,container:!0,tabbar:!0},["widget.tabbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.tab,"Bar"],0),Ext.define("Ext.rtl.tab.Bar",{override:"Ext.tab.Bar",privates:{_getTabAdjustProp:function(){return this.getInherited().rtl?"right":"left"},getCloseXY:function(e,t,n,i,r,o,a,s){var l,d,u,c;return this.isOppositeRootDirection()?(l=e.getXY(),"right"===s?(d=t+l[1]-n,u=n+r-(l[0]-(t+i-r))-o):(d=t+i-(l[1]-n)-a,u=n+(l[0]-(t+i-r))),c=[d,u]):c=arguments.callee.$previous.apply(this,arguments),c}}}),Ext.cmd.derive("Ext.tab.Panel",Ext.panel.Panel,{alternateClassName:["Ext.TabPanel"],config:{tabBar:void 0,tabPosition:"top",tabRotation:"default",tabStretchMax:!0},removePanelHeader:!0,plain:!1,itemCls:"x-tabpanel-child",minTabWidth:void 0,maxTabWidth:void 0,deferredRender:!0,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var e,t=this,n=null!==t.activeTab?t.activeTab||0:null,i=t.dockedItems,r=t.header,o=t.tabBarHeaderPosition,a=t.getTabBar();t.layout=new Ext.layout.container.Card(Ext.apply({owner:t,deferredRender:t.deferredRender,itemCls:t.itemCls,activeItem:n},t.layout)),null!=o?(r=t.header=Ext.apply({},r),e=r.items=r.items?r.items.slice():[],r.itemPosition=o,e.push(a),r.hasTabBar=!0):(i=[].concat(t.dockedItems||[]),i.push(a),t.dockedItems=i),Ext.panel.Panel.prototype.initComponent.apply(this,arguments),n=t.activeTab=t.getComponent(n),n&&a.setActiveTab(n.tab,!0)},onRender:function(){var e,t=this.items.items,n=t.length;for(Ext.panel.Panel.prototype.onRender.apply(this,arguments),e=0;n>e;++e)t[e].getBind()},setActiveTab:function(e){var t,n=this;return(!Ext.isObject(e)||e.isComponent)&&(e=n.getComponent(e)),t=n.getActiveTab(),e?(Ext.suspendLayouts(),e.isComponent||(e=n.add(e)),t===e||n.fireEvent("beforetabchange",n,e,t)===!1?(Ext.resumeLayouts(!0),t):(n.activeTab=e,n.layout.setActiveItem(e),e=n.activeTab=n.layout.getActiveItem(),e&&e!==t?(n.tabBar.setActiveTab(e.tab),Ext.resumeLayouts(!0),t!==e&&n.fireEvent("tabchange",n,e,t)):Ext.resumeLayouts(!0),e)):t},setActiveItem:function(e){return this.setActiveTab(e)},getActiveTab:function(){var e=this,t=e.getComponent(e.activeTab);return t&&-1!==e.items.indexOf(t)?e.activeTab=t:e.activeTab=void 0,e.activeTab},applyTabBar:function(e){var t=this,n=null!=t.tabBarHeaderPosition?t.getHeaderPosition():t.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:t.ui,dock:n,tabRotation:t.getTabRotation(),vertical:"left"===n||"right"===n,plain:t.plain,tabStretchMax:t.getTabStretchMax(),tabPanel:t},e))},updateHeaderPosition:function(e,t){var n=this.getTabBar();n&&null!=this.tabBarHeaderPosition&&n.setDock(e),Ext.panel.Panel.prototype.updateHeaderPosition.call(this,e,t)},updateTabPosition:function(e){var t=this.getTabBar();t&&null==this.tabBarHeaderPosition&&t.setDock(e)},updateTabRotation:function(e){var t=this.getTabBar();t&&t.setTabRotation(e)},onAdd:function(e,t){var n=this,i=Ext.apply({},e.tabConfig),r=n.getTabBar(),o={xtype:"tab",title:e.title,icon:e.icon,iconCls:e.iconCls,glyph:e.glyph,ui:r.ui,card:e,disabled:e.disabled,closable:e.closable,hidden:e.hidden&&!e.hiddenByLayout,tooltip:e.tooltip,tabBar:r,tabPosition:r.dock,rotation:r.getTabRotation()};void 0!==e.closeText&&(o.closeText=e.closeText),i=Ext.applyIf(i,o),e.tab=n.tabBar.insert(t,i),e.on({scope:n,enable:n.onItemEnable,disable:n.onItemDisable,beforeshow:n.onItemBeforeShow,iconchange:n.onItemIconChange,iconclschange:n.onItemIconClsChange,glyphchange:n.onItemGlyphChange,titlechange:n.onItemTitleChange}),e.isPanel&&(n.removePanelHeader&&(e.rendered?e.header&&e.header.hide():e.header=!1),e.isPanel&&n.border&&e.setBorder(!1)),n.rendered&&e.getBind(),n.rendered&&n.loader&&void 0===n.activeTab&&null!==n.layout.activeItem&&n.setActiveTab(0)},onMove:function(e,t,n){var i=this.getTabBar();Ext.panel.Panel.prototype.onMove.call(this,e,t,n),i.items.indexOf(e.tab)!==n&&i.move(e.tab,n)},onItemEnable:function(e){e.tab.enable()},onItemDisable:function(e){e.tab.disable()},onItemBeforeShow:function(e){return e!==this.activeTab?(this.setActiveTab(e),!1):void 0},onItemGlyphChange:function(e,t){e.tab.setGlyph(t)},onItemIconChange:function(e,t){e.tab.setIcon(t)},onItemIconClsChange:function(e,t){e.tab.setIconCls(t)},onItemTitleChange:function(e,t){e.tab.setText(t)},onRemove:function(e){var t=this;e.un({scope:t,enable:t.onItemEnable,disable:t.onItemDisable,beforeshow:t.onItemBeforeShow,iconchange:t.onItemIconChange,iconclschange:t.onItemIconClsChange,glyphchange:t.onItemGlyphChange,titlechange:t.onItemTitleChange}),e.tab&&!t.destroying&&e.tab.ownerCt===t.tabBar&&t.tabBar.remove(e.tab)},privates:{doRemove:function(e){var t,n=this;n.removingAll||n.destroying||1===n.items.getCount()?n.activeTab=null:e.tab&&-1!==(t=n.tabBar.items.indexOf(n.tabBar.findNextActivatable(e.tab)))&&n.setActiveTab(t),Ext.panel.Panel.prototype.doRemove.apply(this,arguments),e.tab&&(delete e.tab.card,delete e.tab)}}},0,["tabpanel"],["component","box","container","panel","tabpanel"],{component:!0,box:!0,container:!0,panel:!0,tabpanel:!0},["widget.tabpanel"],0,[Ext.tab,"Panel",Ext,"TabPanel"],0),Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(e,t){this.comp=e,this.initialConstrainTo=t.constrainTo,Ext.dd.DragTracker.prototype.constructor.call(this,t)},onStart:function(){var e=this,t=e.comp;e.startPosition=t.getXY(),t.ghost&&!t.liveDrag&&(e.proxy=t.ghost(),e.dragTarget=e.proxy.header.el),(e.constrain||e.constrainDelegate)&&(e.constrainTo=e.calculateConstrainRegion()),t.beginDrag&&t.beginDrag()},calculateConstrainRegion:function(){var e,t,n,i=this,r=i.comp,o=i.initialConstrainTo,a=r.constraintInsets,s=i.proxy?i.proxy.el:r.el,l=s.shadow,d=l&&!i.constrainDelegate&&r.constrainShadow&&!l.disabled?l.getShadowSize():0;return o instanceof Ext.util.Region?o=o.copy():(e=Ext.fly(o),o=e.getConstrainRegion()),a&&(a=Ext.isObject(a)?a:Ext.Element.parseBox(a),o.adjust(a.top,a.right,a.bottom,a.length)),d&&o.adjust(d[0],-d[1],-d[2],d[3]),i.constrainDelegate||(t=Ext.fly(i.dragTarget).getRegion(),n=s.getRegion(),o.adjust(t.top-n.top,t.right-n.right,t.bottom-n.bottom,t.left-n.left)),o},onDrag:function(){var e=this,t=e.proxy&&!e.comp.liveDrag?e.proxy:e.comp,n=e.getOffset(e.constrain||e.constrainDelegate?"dragTarget":null);t.setPagePosition(e.startPosition[0]+n[0],e.startPosition[1]+n[1])},onEnd:function(){var e=this.comp;e.isDestroyed||e.destroying||(this.proxy&&!e.liveDrag&&e.unghost(),e.endDrag&&e.endDrag())}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0),Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:"x-window",resizable:!0,draggable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:50,minWidth:50,expandOnShow:!0,collapsible:!1,closable:!0,hidden:!0,autoRender:!0,hideMode:"offsets",floating:!0,itemCls:"x-window-item",overlapHeader:!0,ignoreHeaderBorderManagement:!0,alwaysFramed:!0,isRootCfg:{isRoot:!0},isWindow:!0,ariaRole:"dialog",initComponent:function(){var e=this;e.frame=!1,Ext.panel.Panel.prototype.initComponent.call(this),e.plain&&e.addClsWithUI("plain"),e.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var e;return e=Ext.panel.Panel.prototype.getElConfig.call(this),e.tabIndex=-1,e},getFocusEl:function(){var e=this;return Ext.enableFocusManager?e.el:e.getDefaultFocus()||e.el},getState:function(){var e,t=this,n=Ext.panel.Panel.prototype.getState.call(this)||{},i=!!t.maximized,r=t.ghostBox;return n.maximized=i,e=i?t.restorePos:r?[r.x,r.y]:t.getPosition(),Ext.apply(n,{size:i?t.restoreSize:t.getSize(),pos:e}),n},applyState:function(e){var t=this;e&&(t.maximized=e.maximized,t.maximized?(t.hasSavedRestore=!0,t.restoreSize=e.size,t.restorePos=e.pos):Ext.apply(t,{width:e.size.width,height:e.size.height,x:e.pos[0],y:e.pos[1]}))},onRender:function(){var e=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments),e.header&&e.header.on({scope:e,click:e.onHeaderClick}),e.maximizable&&e.header.on({scope:e,dblclick:e.toggleMaximize})},afterRender:function(){var e,t=this,n=t.header;t.maximized&&(t.maximized=!1,t.maximize(),n&&n.removeCls(n.indicateDragCls)),Ext.panel.Panel.prototype.afterRender.call(this),t.closable?(e=t.getKeyMap(),e.on(27,t.onEsc,t)):e=t.keyMap,e&&t.hidden&&e.disable()},onEsc:function(e,t){var n=Ext.FocusManager;Ext.enableFocusManager&&n.focusedCmp!==this||(t.stopEvent(),this.close())},beforeDestroy:function(){var e=this;e.rendered&&(Ext.un("resize",e.onWindowResize,e),delete e.animateTarget,e.hide(),Ext.destroy(e.keyMap)),Ext.panel.Panel.prototype.beforeDestroy.call(this)},addTools:function(){var e=this,t=[];Ext.panel.Panel.prototype.addTools.call(this),e.minimizable&&t.push({type:"minimize",handler:"minimize",scope:e}),e.maximizable&&t.push({type:e.maximized?"restore":"maximize",handler:"toggleMaximize",scope:e}),t.length&&e.addTool(t)},onShow:function(){var e=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments),e.expandOnShow&&e.expand(!1),e.syncMonitorWindowResize(),e.keyMap&&e.keyMap.enable()},doClose:function(){var e=this;e.hidden?(e.fireEvent("close",e),"destroy"===e.closeAction&&e.destroy()):e.hide(e.animateTarget,e.doClose,e)},afterHide:function(){var e=this;e.syncMonitorWindowResize(),e.keyMap&&e.keyMap.disable(),Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onWindowResize:function(){var e,t=this;t.isDestroyed||(t.maximized?t.fitContainer():(e=t.getSizeModel(),(e.width.natural||e.height.natural)&&t.updateLayout(),t.doConstrain()))},minimize:function(){return this.fireEvent("minimize",this),this},resumeHeaderLayout:function(e){this.header.resumeLayouts(e?this.isRootCfg:null)},afterCollapse:function(){var e=this,t=e.header,n=e.tools;t&&e.maximizable&&(t.suspendLayouts(),n.maximize.hide(),this.resumeHeaderLayout(!0)),e.resizer&&e.resizer.disable(),Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var e,t=this,n=t.header,i=t.tools;n&&(n.suspendLayouts(),t.maximizable&&(i.maximize.show(),e=!0),this.resumeHeaderLayout(e)),t.resizer&&t.resizer.enable(),Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(e){var t,n,i=this,r=i.header,o=i.tools,a=i.width,s=i.height;return i.maximized||(i.expand(!1),i.hasSavedRestore||(t=i.restoreSize={width:a?a:null,height:s?s:null},i.restorePos=i.getPosition()),r&&(r.suspendLayouts(),o.maximize&&o.maximize.setType("restore"),i.collapseTool&&(i.collapseTool.hide(),n=!0),i.resumeHeaderLayout(n)),i.el.disableShadow(),i.dd&&(i.dd.disable(),r&&r.removeCls(r.indicateDragCls)),i.resizer&&i.resizer.disable(),i.el.addCls("x-window-maximized"),i.container.addCls("x-window-maximized-ct"),i.syncMonitorWindowResize(),i.fitContainer(e=e||i.animateTarget?{callback:function(){i.maximized=!0,i.fireEvent("maximize",i)}}:null),e||(i.maximized=!0,i.fireEvent("maximize",i))),i},restore:function(e){var t,n=this,i=n.tools,r=n.header,o=n.restoreSize;return n.maximized&&(n.hasSavedRestore=null,n.removeCls("x-window-maximized"),r&&(r.suspendLayouts(),i.maximize&&i.maximize.setType("maximize"),n.collapseTool&&(n.collapseTool.show(),t=!0),n.resumeHeaderLayout(t)),o.x=n.restorePos[0],o.y=n.restorePos[1],n.setBox(o,e=e||n.animateTarget?{callback:function(){n.el.enableShadow(null,!0),n.maximized=!1,n.fireEvent("restore",n)}}:null),n.restorePos=n.restoreSize=null,n.dd&&(n.dd.enable(),r&&r.addCls(r.indicateDragCls)),n.resizer&&n.resizer.enable(),n.container.removeCls("x-window-maximized-ct"),n.syncMonitorWindowResize(),e||(n.el.enableShadow(null,!0),n.maximized=!1,n.fireEvent("restore",n))),n},syncMonitorWindowResize:function(){var e=this,t=e._monitoringResize,n=e.monitorResize||e.constrain||e.constrainHeader||e.maximized,i=e.hidden||e.destroying||e.isDestroyed;n&&!i?t||(Ext.on("resize",e.onWindowResize,e,{buffer:1}),e._monitoringResize=!0):t&&(Ext.un("resize",e.onWindowResize,e),e._monitoringResize=!1)},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var e=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);return e.xtype="window",e},getDefaultFocus:function(){var e,t,n=this,i=n.defaultButton||n.defaultFocus;return void 0!==i&&(Ext.isNumber(i)?e=n.query("button")[i]:Ext.isString(i)?(t=i,Ext.validIdRe.test(t)&&(e=n.down(Ext.makeIdSelector(t))),e||(e=n.down(t))):i.focus&&(e=i)),e},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(e,t){var n;e.el.contains(t.getTarget())&&(n=this.getDefaultFocus(),n&&n.focus())},initResizable:function(){Ext.panel.Panel.prototype.initResizable.apply(this,arguments),this.maximized&&this.resizer.disable()}}},0,["window"],["component","box","container","panel","window"],{component:!0,box:!0,container:!0,panel:!0,window:!0},["widget.window"],0,[Ext.window,"Window",Ext,"Window"],0),Ext.define("BP.overrides.window.Window",{override:"Ext.window.Window",constructor:function(){this.ui=this.getTheme(),(arguments.callee.$previous||Ext.panel.Panel.prototype.constructor).apply(this,arguments)}}),Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:!0,autoRender:!0,hidden:!0,baseCls:"x-tip",focusOnToFront:!1,closeAction:"hide",alwaysFramed:!0,frameHeader:!1,initComponent:function(){var e=this;e.floating=Ext.apply({},{
shadow:e.shadow,constrain:e.constrainPosition},e.self.prototype.floating),Ext.panel.Panel.prototype.initComponent.apply(this,arguments),e.constrain=e.constrain||e.constrainPosition},showAt:function(e){var t=this;Ext.panel.Panel.prototype.showAt.apply(this,arguments),t.isVisible()&&(t.setPagePosition(e[0],e[1]),(t.constrainPosition||t.constrain)&&t.doConstrain(),t.toFront(!0))},privates:{initDraggable:function(){var e=this;e.draggable={el:e.getDragEl(),delegate:e.header.el,constrain:e,constrainTo:e.el.dom.parentNode},Ext.Component.prototype.initDraggable.call(e)}},ghost:void 0,unghost:void 0},0,["tip"],["component","box","container","panel","tip"],{component:!0,box:!0,container:!0,panel:!0,tip:!0},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0),Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:!0,showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1e3,ariaRole:"tooltip",initComponent:function(){var e=this;Ext.tip.Tip.prototype.initComponent.apply(this,arguments),e.lastActive=new Date,e.setTarget(e.target),e.origAnchor=e.anchor},onRender:function(){var e=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments),e.anchorCls="x-tip-anchor-"+e.getAnchorPosition(),e.anchorEl=e.el.createChild({role:"presentation",cls:"x-tip-anchor "+e.anchorCls})},setTarget:function(e){var t,n=this,i=Ext.get(e);n.target&&(t=Ext.get(n.target),Ext.supports.Touch?n.mun(t,"tap",n.onTargetOver,n):n.mun(t,{mouseover:n.onTargetOver,mouseout:n.onTargetOut,mousemove:n.onMouseMove,scope:n})),n.target=i,i&&(Ext.supports.Touch?n.mon(i,{tap:n.onTargetOver,scope:n}):n.mon(i,{mouseover:n.onTargetOver,mouseout:n.onTargetOut,mousemove:n.onMouseMove,scope:n})),n.anchor&&(n.anchorTarget=n.target)},onMouseMove:function(e){var t,n,i=this;(!i.target||i.target.contains(e.target))&&(t=i.delegate?e.getTarget(i.delegate):i.triggerElement=!0,t?(i.targetXY=e.getXY(),t===i.triggerElement?!i.hidden&&i.trackMouse&&(n=i.getTargetXY(),i.constrainPosition&&(n=i.el.adjustForConstraints(n,i.el.parent())),i.setPagePosition(n)):(i.hide(),i.lastActive=new Date(0),i.onTargetOver(e))):!i.closable&&i.isVisible()&&i.autoHide!==!1&&i.delayHide())},getTargetXY:function(){var e,t,n,i,r,o,a,s,l,d,u,c,h=this;if(h.delegate&&(h.anchorTarget=h.triggerElement),h.anchor){if(h.targetCounter++,t=h.getOffsets(),n=h.anchorToTarget&&!h.trackMouse?h.getAlignToXY(h.anchorTarget,h.getAnchorAlign()):h.targetXY,i=Ext.Element.getViewportWidth()-5,r=Ext.Element.getViewportHeight()-5,o=document.documentElement,a=document.body,s=(o.scrollLeft||a.scrollLeft||0)+5,l=(o.scrollTop||a.scrollTop||0)+5,d=[n[0]+t[0],n[1]+t[1]],u=h.getSize(),c=h.constrainPosition,h.anchorEl.removeCls(h.anchorCls),h.targetCounter<2&&c){if(d[0]<s)return h.anchorToTarget&&(h.defaultAlign="l-r",h.mouseOffset&&(h.mouseOffset[0]*=-1)),h.anchor="left",h.getTargetXY();if(d[0]+u.width>i)return h.anchorToTarget&&(h.defaultAlign="r-l",h.mouseOffset&&(h.mouseOffset[0]*=-1)),h.anchor="right",h.getTargetXY();if(d[1]<l)return h.anchorToTarget&&(h.defaultAlign="t-b",h.mouseOffset&&(h.mouseOffset[1]*=-1)),h.anchor="top",h.getTargetXY();if(d[1]+u.height>r)return h.anchorToTarget&&(h.defaultAlign="b-t",h.mouseOffset&&(h.mouseOffset[1]*=-1)),h.anchor="bottom",h.getTargetXY()}return h.anchorCls="x-tip-anchor-"+h.getAnchorPosition(),h.anchorEl.addCls(h.anchorCls),h.targetCounter=0,d}return e=h.getMouseOffset(),h.targetXY?[h.targetXY[0]+e[0],h.targetXY[1]+e[1]]:e},calculateConstrainedPosition:function(e){var t,n,i,r=this;return!e&&r.isContainedFloater()?(t=r.isVisible(),t||r.el.show(),n=r.getTargetXY(),t||r.el.hide(),i=r.floatParent.getTargetEl().getViewRegion(),n[0]-=i.left,n[1]-=i.top):n=r.callOverridden(arguments),n},getMouseOffset:function(){var e=this,t=e.anchor?[0,0]:[15,18];return e.mouseOffset&&(t[0]+=e.mouseOffset[0],t[1]+=e.mouseOffset[1]),t},fadeOut:function(){var e=this;e.el.fadeOut({duration:e.fadeOutDuration,callback:function(){e.hide(),e.el.setOpacity("")}})},getAnchorPosition:function(){var e,t=this;switch(t.anchor?t.tipAnchor=t.anchor.charAt(0):(e=t.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/),t.tipAnchor=e[1].charAt(0)),t.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var e,t,n=this,i=n.getAnchorPosition().charAt(0);if(n.anchorToTarget&&!n.trackMouse)switch(i){case"t":t=[0,9];break;case"b":t=[0,-13];break;case"r":t=[-13,0];break;default:t=[9,0]}else switch(i){case"t":t=[-15-n.anchorOffset,30];break;case"b":t=[-19-n.anchorOffset,-13-n.el.dom.offsetHeight];break;case"r":t=[-15-n.el.dom.offsetWidth,-13-n.anchorOffset];break;default:t=[25,-13-n.anchorOffset]}return e=n.getMouseOffset(),t[0]+=e[0],t[1]+=e[1],t},onTargetOver:function(e){var t,n=this,i=n.delegate;n.disabled||e.within(n.target.dom,!0)||(t=i?e.getTarget(i):!0,t&&(n.triggerElement=t,n.triggerEvent=e,n.clearTimer("hide"),n.targetXY=e.getXY(),n.delayShow()))},delayShow:function(e){var t=this,n=t.el&&(e===!1||!t.trackMouse)&&t.getTargetXY();t.hidden&&!t.showTimer?Ext.Date.getElapsed(t.lastActive)<t.quickShowInterval?t.show():t.showTimer=Ext.defer(t.showFromDelay,t.showDelay,t,[n]):t.hidden||t.autoHide===!1||t.show(n)},showFromDelay:function(e){var t=this;t.disabled||(t.fromDelayShow=!0,t.show(e),delete t.fromDelayShow)},onShowVeto:function(){Ext.tip.Tip.prototype.onShowVeto.call(this),delete this.triggerElement,this.clearTimer("show")},onTargetOut:function(e){var t=this,n=t.triggerElement,i=n===!0?t.target:n;t.disabled||!n||e.within(i,!0)||(t.showTimer&&(t.clearTimer("show"),t.triggerElement=null),t.autoHide!==!1&&t.delayHide())},delayHide:function(){var e=this;e.hidden||e.hideTimer||(e.hideTimer=Ext.defer(e[e.hideAction],e.hideDelay,e))},hide:function(){var e=this;e.clearTimer("dismiss"),e.lastActive=new Date,e.anchorEl&&e.anchorEl.hide(),Ext.tip.Tip.prototype.hide.apply(this,arguments),delete e.triggerElement},show:function(e){var t=this;Ext.tip.Tip.prototype.show.call(this),this.hidden===!1&&(t.anchor&&(t.anchor=t.origAnchor),t.calledFromShowAt||t.showAt(e||t.getTargetXY()))},showAt:function(e){var t=this;t.lastActive=new Date,t.clearTimers(),t.calledFromShowAt=!0,t.isVisible()||Ext.tip.Tip.prototype.showAt.apply(this,arguments),t.isVisible()&&(t.setPagePosition(e[0],e[1]),(t.constrainPosition||t.constrain)&&t.doConstrain(),t.toFront(!0),t.el.syncUnderlays(),t.dismissDelay&&t.autoHide!==!1&&(t.dismissTimer=Ext.defer(t.hide,t.dismissDelay,t))),delete t.calledFromShowAt},syncAnchor:function(){var e,t,n,i=this;switch(i.tipAnchor.charAt(0)){case"t":e="b",t="tl",n=[20+i.anchorOffset,1];break;case"r":e="l",t="tr",n=[-1,12+i.anchorOffset];break;case"b":e="t",t="bl",n=[20+i.anchorOffset,-1];break;default:e="r",t="tl",n=[1,12+i.anchorOffset]}i.anchorEl.alignTo(i.el,e+"-"+t,n),i.anchorEl.setStyle("z-index",parseInt(i.el.getZIndex(),10)||1).setVisibilityMode(Ext.Element.DISPLAY)},afterSetPosition:function(){var e=this;Ext.tip.Tip.prototype.afterSetPosition.apply(this,arguments),e.anchor?(e.syncAnchor(),e.anchorEl.isVisible()||e.anchorEl.show()):e.anchorEl.hide()},_timerNames:{},clearTimer:function(e){var t=this,n=t._timerNames,i=n[e]||(n[e]=e+"Timer"),r=t[i];r&&(clearTimeout(r),t[i]=null)},clearTimers:function(){var e=this;e.clearTimer("show"),e.clearTimer("dismiss"),e.clearTimer("hide")},onShow:function(){var e=this;Ext.tip.Tip.prototype.onShow.call(this),e.mon(Ext.getDoc(),"mousedown",e.onDocMouseDown,e)},onHide:function(){var e=this;Ext.tip.Tip.prototype.onHide.call(this),e.mun(Ext.getDoc(),"mousedown",e.onDocMouseDown,e)},onDocMouseDown:function(e){var t=this;t.closable||e.within(t.el.dom)||(t.disable(),Ext.defer(t.doEnable,100,t))},doEnable:function(){this.isDestroyed||this.enable()},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this),this.clearTimers(),this.hide()},beforeDestroy:function(){var e=this;e.clearTimers(),Ext.destroy(e.anchorEl),delete e.anchorEl,delete e.target,delete e.anchorTarget,delete e.triggerElement,Ext.tip.Tip.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this),Ext.tip.Tip.prototype.onDestroy.call(this)}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:!0,box:!0,container:!0,panel:!0,tip:!0,tooltip:!0},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0),Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:!1,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},shrinkWrapDock:!0,initComponent:function(){var e=this;e.target=e.target||Ext.getDoc(),e.targets=e.targets||{},Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(e){this.tagConfig=Ext.apply({},e),delete this.tagConfig.attr},text:null,register:function(e){for(var t,n,i,r=Ext.isArray(e)?e:arguments,o=0,a=r.length;a>o;o++)if(e=r[o],t=e.target)if(Ext.isArray(t))for(n=0,i=t.length;i>n;n++)this.targets[Ext.id(t[n])]=e;else this.targets[Ext.id(t)]=e},unregister:function(e){delete this.targets[Ext.id(e)]},cancelShow:function(e){var t=this,n=t.activeTarget;e=Ext.get(e).dom,t.isVisible()?n&&n.el===e&&t.hide():n&&n.el===e&&t.clearTimer("show")},getTipCfg:function(e){var t,n=e.title,i=this.tagConfig,r=i.attr||(i.attr=i.namespace+i.attribute);return this.interceptTitles&&n&&Ext.isString(n)?(e.setAttribute(r,n),e.removeAttribute("title"),{text:n}):(e=Ext.fly(e).findParent(function(e){return t=e.getAttribute(r)}))?{target:e,text:t}:void 0},onTargetOver:function(e){this.doTargetOver(e.getTarget(this.delegate),null,e)},doTargetOver:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p,f,g=this;if(!g.disabled&&("string"==typeof e&&(e=Ext.getDom(e)),g.targetXY=t||(n?n.getXY():Ext.fly(e).getXY()),e&&1===e.nodeType&&e!==document.documentElement&&e!==document.body)){if(g.activeTarget&&(e===g.activeTarget.el||Ext.fly(g.activeTarget.el).contains(e)))return void(g.targetTextEmpty()?(g.onShowVeto(),delete g.activeTarget):(g.clearTimer("hide"),g.show()));if(e){c=g.targets;for(f in c)if(c.hasOwnProperty(f)&&(p=c[f],h=Ext.fly(p.target),h&&(h.dom===e||h.contains(e)))){a=h.dom;break}if(a)return g.activeTarget=g.targets[a.id],g.activeTarget.el=e,g.anchor=g.activeTarget.anchor,g.anchor&&(g.anchorTarget=e),i=parseInt(g.activeTarget.showDelay,10),i&&(o=g.showDelay,g.showDelay=i),g.delayShow(),i&&(g.showDelay=o),void((r=g.activeTarget.hideAction)?g.hideAction=r:delete g.hideAction)}a=Ext.fly(e,"_quicktip-target"),s=g.tagConfig,l=s.namespace,d=g.getTipCfg(e,n),d&&(d.target&&(e=d.target,a=Ext.fly(e,"_quicktip-target")),u=a.getAttribute(l+s.hide),g.activeTarget={el:e,text:d.text,width:+a.getAttribute(l+s.width)||null,autoHide:"user"!==u&&"false"!==u,title:a.getAttribute(l+s.title),cls:a.getAttribute(l+s.cls),align:a.getAttribute(l+s.align),showDelay:parseInt(a.getAttribute(l+s.showDelay)||0,10),hideAction:a.getAttribute(l+s.hideAction),anchorTarget:a.getAttribute(l+s.anchorTarget)},g.initialConfig.hasOwnProperty("anchor")||(g.anchor=a.getAttribute(l+s.anchor)),g.anchor&&!g.initialConfig.hasOwnProperty("anchorTarget")&&(g.anchorTarget=g.activeTarget.anchorTarget||e),i=parseInt(g.activeTarget.showDelay,10),i&&(o=g.showDelay,g.showDelay=i),g.delayShow(),i&&(g.showDelay=o))}},onTargetOut:function(e){var t,n,i=this,r=i.activeTarget;r&&e.within(i.activeTarget.el)&&!i.getTipCfg(e.getTarget(),e)||(i.clearTimer("show"),delete i.activeTarget,i.autoHide!==!1&&(t=r&&parseInt(r.hideDelay,10),t&&(n=i.hideDelay,i.hideDelay=t),i.delayHide(),t&&(i.hideDelay=n)))},targetTextEmpty:function(){var e,t,n=this,i=n.activeTarget,r=n.tagConfig;return i&&(e=i.el,e&&(t=e.getAttribute(r.namespace+r.attribute),!t&&!n.targets[Ext.id(i.target)]))?!0:!1},show:function(){var e=this,t=e.fromDelayShow;return t&&e.targetTextEmpty()?(e.onShowVeto(),void delete e.activeTarget):void Ext.tip.ToolTip.prototype.show.apply(this,arguments)},showAt:function(e){var t,n,i=this,r=i.activeTarget,o=i.header;r&&(i.rendered||(i.render(Ext.getBody()),i.activeTarget=r),i.suspendLayouts(),r.title?(i.setTitle(r.title),o.show()):o&&o.hide(),i.update(r.text),i.autoHide=r.autoHide,t=r.dismissDelay,i.dismissDelay=Ext.isNumber(t)?t:i.dismissDelay,r.mouseOffset&&(e[0]+=r.mouseOffset[0],e[1]+=r.mouseOffset[1]),n=i.lastCls,n&&(i.removeCls(n),delete i.lastCls),n=r.cls,n&&(i.addCls(n),i.lastCls=n),i.setWidth(r.width),i.anchor?i.constrainPosition=!1:r.align?(e=i.getAlignToXY(r.el,r.align),i.constrainPosition=!1):i.constrainPosition=!0,i.resumeLayouts(!0)),Ext.tip.ToolTip.prototype.showAt.call(this,e)},hide:function(){delete this.activeTarget,Ext.tip.ToolTip.prototype.hide.call(this)}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:!0,box:!0,container:!0,panel:!0,tip:!0,tooltip:!0,quicktip:!0},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0),Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:!0,alternateClassName:"Ext.QuickTips",disabled:!1,init:function(e,t){var n=this;if(!n.tip){if(!Ext.isReady)return Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(e,t)}),!1;var i=Ext.apply({disabled:n.disabled,id:"ext-quicktips-tip"},t),r=i.className,o=i.xtype;r?delete i.className:o&&(r="widget."+o,delete i.xtype),e!==!1&&(i.renderTo=document.body),n.tip=Ext.create(r||"Ext.tip.QuickTip",i),Ext.quickTipsActive=!0}},destroy:function(){Ext.destroy(this.tip),this.tip=void 0},ddDisable:function(){var e=this,t=e.tip;t&&!e.disabled&&t.disable()},ddEnable:function(){var e=this,t=e.tip;t&&!e.disabled&&t.enable()},enable:function(){var e=this,t=e.tip;t&&t.enable(),e.disabled=!1},disable:function(){var e=this,t=e.tip;t&&t.disable(),e.disabled=!0},isEnabled:function(){var e=this.tip;return void 0!==e&&!e.disabled},getQuickTip:function(){return this.tip},register:function(){var e=this.tip;e.register.apply(e,arguments)},unregister:function(){var e=this.tip;e.unregister.apply(e,arguments)},tips:function(){var e=this.tip;e.register.apply(e,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0),Ext.define("Ext.rtl.tip.QuickTipManager",{override:"Ext.tip.QuickTipManager",init:function(){var e=this;e.callParent(arguments)!==!1&&e.tip.on("beforeshow",e.onBeforeFirstShow,e,{single:!0})},onBeforeFirstShow:function(e){e._isOffsetParentRtl=void 0}}),Ext.cmd.derive("Ext.button.Split",Ext.button.Button,{alternateClassName:"Ext.SplitButton",isSplitButton:!0,arrowCls:"split",split:!0,setArrowHandler:function(e,t){this.arrowHandler=e,this.scope=t},onClick:function(e){var t=this;t.doPreventDefault(e),t.disabled||(t.isWithinTrigger(e)?(e.preventDefault(),t.maybeShowMenu(e),t.fireEvent("arrowclick",t,e),t.arrowHandler&&t.arrowHandler.call(t.scope||t,t,e)):(t.doToggle(),t.fireHandler(e)))}},0,["splitbutton"],["component","box","button","splitbutton"],{component:!0,box:!0,button:!0,splitbutton:!0},["widget.splitbutton"],0,[Ext.button,"Split",Ext,"SplitButton"],0),Ext.cmd.derive("Ext.layout.container.Table",Ext.layout.container.Container,{alternateClassName:"Ext.layout.TableLayout",type:"table",createsInnerCt:!0,targetCls:"x-table-layout-ct",tableCls:"x-table-layout",cellCls:"x-table-layout-cell",childEls:["table","tbody"],tableAttrs:null,getItemSizePolicy:function(){return this.autoSizePolicy},initInheritedState:function(e,t){t.inShrinkWrapTable=!0},getLayoutItems:function(){var e,t,n=[],i=Ext.layout.container.Container.prototype.getLayoutItems.call(this),r=i.length;for(t=0;r>t;t++)e=i[t],e.hidden||n.push(e);return n},getHiddenItems:function(){for(var e,t=[],n=this.owner.items.items,i=n.length,r=0;i>r;++r)e=n[r],e.rendered&&e.hidden&&t.push(e);return t},renderChildren:function(){var e,t,n,i,r,o,a,s,l,d,u=this,c=u.getLayoutItems(),h=u.tbody.dom,p=h.rows,f=c.length,g=u.getHiddenItems();for(e=u.calculateCells(c),s=0;f>s;s++)if(t=e[s],n=t.rowIdx,i=t.cellIdx,r=c[s],l=r.cellId||"",o=p[n],o||(o=h.insertRow(n),u.trAttrs&&o.set(u.trAttrs)),a=Ext.get(o.cells[i]||o.insertCell(i)),r.rendered?u.isValidParent(r,a,n,i,h)||u.moveItem(r,a,0):u.renderItem(r,a,0),u.tdAttrs&&a.set(u.tdAttrs),r.tdAttrs&&a.set(r.tdAttrs),d=a.getAttribute("data-cellId"),(d||l)&&d!==l&&a.setId(l||Ext.id()),a.set({colSpan:r.colspan||1,rowSpan:r.rowspan||1,"data-cellId":l,cls:u.cellCls+" "+(r.cellCls||"")}),!e[s+1]||e[s+1].rowIdx!==n)for(i++;o.cells[i];)o.deleteCell(i);for(n++;h.rows[n];)h.deleteRow(n);for(s=0,f=g.length;f>s;++s)u.ensureInDocument(g[s].getEl())},ensureInDocument:function(e){for(var t=e.dom.parentNode;t;){if("BODY"===t.tagName.toUpperCase())return;t=t.parentNode}Ext.getDetachedBody().appendChild(e)},calculate:function(e){if(e.hasDomProp("containerChildrenSizeDone")){var t=e.targetContext,n=e.widthModel.shrinkWrap,i=e.heightModel.shrinkWrap,r=i||n,o=r&&this.table.dom,a=r&&t.getPaddingInfo();n&&e.setContentWidth(o.offsetWidth+a.width,!0),i&&e.setContentHeight(o.offsetHeight+a.height,!0)}else this.done=!1},calculateCells:function(e){for(var t,n,i=[],r=0,o=0,a=0,s=this.columns||1/0,l=[],d=0,u=e.length;u>d;d++){for(n=e[d];o>=s||l[o]>0;)if(o>=s)for(o=0,a=0,r++,t=0;s>t;t++)l[t]>0&&l[t]--;else o++;for(i.push({rowIdx:r,cellIdx:a}),t=n.colspan||1;t;--t)l[o]=n.rowspan||1,++o;++a}return i},getRenderTree:function(){var e,t,n,i,r,o,a,s,l,d,u=this,c=u.getLayoutItems(),h=[],p=Ext.apply({tag:"table",id:u.owner.id+"-table","data-ref":"table",role:"presentation",cls:u.tableCls,cellspacing:0,cellpadding:0,cn:{tag:"tbody",id:u.owner.id+"-tbody","data-ref":"tbody",role:"presentation",cn:h}},u.tableAttrs),f=u.tdAttrs,g=c.length;for(t=u.calculateCells(c),e=0;g>e;e++)n=c[e],i=t[e],o=i.rowIdx,a=i.cellIdx,l=n.cellId||"",r=h[o],r||(r=h[o]={tag:"tr",role:"presentation",cn:[]},u.trAttrs&&Ext.apply(r,u.trAttrs)),s=r.cn[a]={tag:"td",role:"presentation"},f&&Ext.apply(s,f),d={colSpan:n.colspan||1,rowSpan:n.rowspan||1,"data-cellId":l,cls:u.cellCls+" "+(n.cellCls||"")},l&&(d.id=l),Ext.apply(s,d),u.configureItem(n),s.cn=n.getRenderTree();return p},isValidParent:function(e,t,n,i){return 3===arguments.length?this.table.isAncestor(e.el):e.el.dom.parentNode===this.tbody.dom.rows[n].cells[i]}},0,0,0,0,["layout.table"],0,[Ext.layout.container,"Table",Ext.layout,"TableLayout"],0),Ext.cmd.derive("Ext.container.ButtonGroup",Ext.panel.Panel,{alternateClassName:"Ext.ButtonGroup",baseCls:"x-btn-group",layout:{type:"table"},defaultType:"button",frame:!0,frameHeader:!1,titleAlign:"center",noTitleCls:"notitle",ariaRole:"group",initComponent:function(){var e=this,t=e.columns;t&&(e.layout=Ext.apply({},{columns:t},e.layout)),e.title||e.addClsWithUI(e.noTitleCls),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},onBeforeAdd:function(e){e.isButton&&(this.defaultButtonUI&&"default"===e.ui&&!e.hasOwnProperty("ui")?e.ui=this.defaultButtonUI:e.ui=e.ui+"-toolbar"),Ext.panel.Panel.prototype.onBeforeAdd.apply(this,arguments)},privates:{applyDefaults:function(e){return Ext.isString(e)||(e=Ext.panel.Panel.prototype.applyDefaults.apply(this,arguments)),e}}},0,["buttongroup"],["component","box","container","panel","buttongroup"],{component:!0,box:!0,container:!0,panel:!0,buttongroup:!0},["widget.buttongroup"],0,[Ext.container,"ButtonGroup",Ext,"ButtonGroup"],0),Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(e){Ext.apply(this,e)},bind:function(e){var t=this;t.target=e,e.on("beforedestroy",t.disable,t),t.onContainerAdd(e)},unbind:function(){var e=this,t=e.target;t&&t.un("beforedestroy",e.disable,e),e.items=null},disable:function(){++this.disabled},enable:function(){this.disabled>0&&--this.disabled},handleAdd:function(e,t){this.disabled||(t.is(this.selector)&&this.onItemAdd(t.ownerCt,t),t.isQueryable&&this.onContainerAdd(t))},onItemAdd:function(e,t){var n=this,i=n.items,r=n.addHandler;n.disabled||(r&&r.call(n.scope||t,t),i&&i.add(t))},onItemRemove:function(e,t){var n=this,i=n.items,r=n.removeHandler;n.disabled||(r&&r.call(n.scope||t,t),i&&i.remove(t))},onContainerAdd:function(e,t){var n,i,r,o,a=this,s=a.handleAdd,l=a.handleRemove;if(e.isContainer&&(e.on("add",s,a),e.on("dockedadd",s,a),e.on("remove",l,a),e.on("dockedremove",l,a)),t!==!0)for(n=e.query(a.selector),r=0,i=n.length;i>r;++r)o=n[r],a.onItemAdd(o.ownerCt,o);for(n=e.query(">container"),r=0,i=n.length;i>r;++r)a.onContainerAdd(n[r],!0)},handleRemove:function(e,t){var n=this;n.disabled||(t.is(n.selector)&&n.onItemRemove(e,t),t.isQueryable&&n.onContainerRemove(e,t))},onContainerRemove:function(e,t){var n,i,r,o,a=this;if(t.isDestroyed||t.destroying||!t.isContainer)a.invalidateItems(!0);else{for(a.removeCtListeners(t),n=t.query(a.selector),i=0,r=n.length;r>i;++i)o=n[i],a.onItemRemove(o.ownerCt,o);for(n=t.query("container"),i=0,r=n.length;r>i;++i)a.removeCtListeners(n[i])}},removeCtListeners:function(e){var t=this;e.un("add",t.handleAdd,t),e.un("dockedadd",t.handleAdd,t),e.un("remove",t.handleRemove,t),e.un("dockedremove",t.handleRemove,t)},getItems:function(){var e=this,t=e.items;return t||(t=e.items=new Ext.util.MixedCollection,t.addAll(e.target.query(e.selector))),t},invalidateItems:function(e){var t=this,n=t.invalidateHandler;e&&n&&n.call(t.scope||t,t),t.items=null}},1,0,0,0,0,0,[Ext.container,"Monitor"],0),Ext.cmd.derive("Ext.plugin.Responsive",Ext.mixin.Responsive,{pluginId:"responsive",isPlugin:!0,constructor:function(e){var t=this,n=e.cmp,i=Ext.apply({responsiveConfig:n.responsiveConfig,responsiveFormulas:n.responsiveFormulas},e);delete i.cmp,t.cmp=n,t.initConfig(i),t.transformed&&(n.setConfig(t.transformed),t.transformed=null)},init:Ext.emptyFn,privates:{transformInstanceConfig:function(e){var t=Ext.mixin.Responsive.prototype.transformInstanceConfig.call(this,e);t.ptype&&(t=Ext.apply({},t),delete t.ptype),this.transformed=t;var n=Ext.apply({},e);return delete n.ptype,delete n.responsiveConfig,delete n.responsiveFormulas,n},updateResponsiveState:function(){var e=this.getResponsiveState();this.cmp.setConfig(e)}}},1,0,0,0,["plugin.responsive"],0,[Ext.plugin,"Responsive"],0),Ext.cmd.derive("Ext.plugin.Viewport",Ext.plugin.Responsive,{setCmp:function(e){this.cmp=e,e&&!e.isViewport&&(this.decorate(e),e.renderConfigs&&e.flushRenderConfigs(),e.setupViewport())},statics:{decorate:function(e){Ext.applyIf(e.prototype||e,{ariaRole:"application",viewportCls:"x-viewport"}),Ext.override(e,{isViewport:!0,preserveElOnDestroy:!0,initComponent:function(){this.callParent(),this.setupViewport()},getSizeModel:function(){var e=Ext.layout.SizeModel.configured;return e.pairsByHeightOrdinal[e.ordinal]},handleViewportResize:function(){var e=this,t=Ext.dom.Element,n=t.getViewportWidth(),i=t.getViewportHeight();(n!==e.width||i!==e.height)&&e.setSize(n,i)},setupViewport:function(){var e=this,t=document.body;t.id||(t.id=e.id),t.setAttribute(Ext.Component.componentIdAttribute,e.id),t=e.el=Ext.getBody(),Ext.fly(document.documentElement).addCls(e.viewportCls),t.setHeight=t.setWidth=Ext.emptyFn,t.dom.scroll="no",e.allowDomMove=!1,e.renderTo=t,Ext.supports.Touch&&e.addMeta("apple-mobile-web-app-capable","yes"),Ext.getScrollbarSize(),e.width=e.height=void 0,e.initialViewportHeight=Ext.Element.getViewportHeight(),e.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(e){Ext.supports.Touch&&(document.body.scrollTop=0),this.callParent([e])},onRender:function(){var e=this;e.callParent(arguments),e.width=e.initialViewportWidth,e.height=e.initialViewportHeight,e.initialViewportWidth=e.initialViewportHeight=null,Ext.supports.TouchEvents&&e.mon(Ext.getDoc(),{touchmove:function(e){e.preventDefault()},translate:!1,delegated:!1})},initInheritedState:function(e,t){var n=this,i=Ext.rootInheritedState;e!==i?n.initInheritedState(n.inheritedState=i,n.inheritedStateInner=Ext.Object.chain(i)):n.callParent([e,t])},beforeDestroy:function(){var e,t=this,n=Ext.rootInheritedState;for(e in n)"rtl"!==e&&delete n[e];t.removeUIFromElement(),t.el.removeCls(t.baseCls),Ext.fly(document.body.parentNode).removeCls(t.viewportCls),t.callParent()},addMeta:function(e,t){var n=document.createElement("meta");n.setAttribute("name",e),n.setAttribute("content",t),Ext.getHead().appendChild(n)},privates:{applyTargetCls:function(e){this.el.addCls(e)},disableTabbing:function(){var e=this.el;e&&e.saveChildrenTabbableState()},enableTabbing:function(){var e=this.el;e&&e.restoreChildrenTabbableState()},getOverflowEl:function(){return Ext.get(document.documentElement)}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize(),Ext.plugin.Responsive.prototype.updateResponsiveState.call(this)}}},0,0,0,0,["plugin.viewport"],0,[Ext.plugin,"Viewport"],function(e){e.prototype.decorate=e.decorate}),Ext.cmd.derive("Ext.container.Viewport",Ext.container.Container,{alternateClassName:"Ext.Viewport",privates:{updateResponsiveState:function(){this.handleViewportResize(),this.mixins.responsive.updateResponsiveState.call(this)}}},0,["viewport"],["component","box","container","viewport"],{component:!0,box:!0,container:!0,viewport:!0},["widget.viewport"],[[Ext.mixin.Responsive.prototype.mixinId||Ext.mixin.Responsive.$className,Ext.mixin.Responsive]],[Ext.container,"Viewport",Ext,"Viewport"],function(){Ext.plugin.Viewport.decorate(this)}),Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:!0,setsItemSize:!0,beginLayoutCycle:function(e){var t,n,i,r,o,a=0;for(Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments),i=e.childItems,o=i.length,r=0;o>r&&(n=i[r],t=n.target.anchorSpec,!t||(n.widthModel.calculated&&t.right&&(a|=1),n.heightModel.calculated&&t.bottom&&(a|=2),3!==a));++r);e.anchorDimensions=a},calculateItems:function(e,t){var n,i,r,o,a,s,l=this,d=e.childItems,u=d.length,c=t.gotHeight,h=t.gotWidth,p=t.height,f=t.width,g=(h?1:0)|(c?2:0),m=e.anchorDimensions;if(!m)return!0;for(a=0;u>a;a++)i=d[a],r=i.getMarginInfo(),n=i.target.anchorSpec,h&&i.widthModel.calculated&&(s=n.right(f)-r.width,s=l.adjustWidthAnchor(s,i),i.setWidth(s)),c&&i.heightModel.calculated&&(o=n.bottom(p)-r.height,o=l.adjustHeightAnchor(o,i),i.setHeight(o));return(g&m)===m},anchorFactory:{offset:function(e){return function(t){return t+e}},ratio:function(e){return function(t){return Math.floor(t*e)}},standard:function(e){return function(t){return t-e}}},parseAnchor:function(e,t,n){if(e&&"none"!==e){var i,r=this.anchorFactory;if(this.parseAnchorRE.test(e))return r.standard(n-t);if(-1!==e.indexOf("%"))return r.ratio(.01*parseFloat(e.replace("%","")));if(i=parseInt(e,10),!isNaN(i))return r.offset(i)}return null},adjustWidthAnchor:function(e){return e},adjustHeightAnchor:function(e){return e},configureItem:function(e){var t,n,i,r=this,o=r.owner,a=e.anchor;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments),e.anchor||!e.items||Ext.isNumber(e.width)||(e.anchor=a=r.defaultAnchor),o.anchorSize?"number"==typeof o.anchorSize?n=o.anchorSize:(n=o.anchorSize.width,i=o.anchorSize.height):(n=o.initialConfig.width,i=o.initialConfig.height),a&&(t=a.split(" "),e.anchorSpec={right:r.parseAnchor(t[0],e.initialConfig.width,n),bottom:r.parseAnchor(t[1],e.initialConfig.height,i)})},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var t,n=e.anchorSpec,i="$",r=this.sizePolicy;return n&&(t=this.owner.getSizeModel(),n.right&&!t.width.shrinkWrap&&(r=r.r),n.bottom&&!t.height.shrinkWrap&&(i="b")),r[i]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0),Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:!0,overlayCls:"x-resizable-overlay",createDragOverlay:function(){var e,t=Ext.dom.Element;e=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"}),e.unselectable(),e.setSize(t.getDocumentWidth(),t.getDocumentHeight()),e.show()},getPrevCmp:function(){var e=this.getSplitter();return e.previousSibling(":not([hidden])")},getNextCmp:function(){var e=this.getSplitter();return e.nextSibling(":not([hidden])")},onBeforeStart:function(e){var t,n=this,i=n.getPrevCmp(),r=n.getNextCmp(),o=n.getSplitter().collapseEl,a=e.getTarget();return i&&r?o&&a===o.dom?!1:r.collapsed||i.collapsed?!1:(n.prevBox=i.getEl().getBox(),n.nextBox=r.getEl().getBox(),n.constrainTo=t=n.calculateConstrainRegion(),t?t:!1):!1},onStart:function(){var e=this.getSplitter();this.createDragOverlay(),e.addCls(e.baseCls+"-active")},onResizeKeyDown:function(e){var t,n=this,i=n.getSplitter(),r=e.getKey(),o="vertical"===i.orientation?0:1,a=r===e.UP||r===e.LEFT?-1:1;!n.active&&n.onBeforeStart(e)&&(Ext.fly(e.target).on("keyup",n.onResizeKeyUp,n),n.triggerStart(e),n.onMouseDown(e),n.startXY=i.getXY(),n.lastKeyDownXY=Ext.Array.slice(n.startXY),t=n.easing=new Ext.fx.easing.Linear,t.setStartTime(Ext.Date.now()),t.setStartValue(1),t.setEndValue(4),t.setDuration(2e3)),n.active&&(n.lastKeyDownXY[o]=Math.round(n.lastKeyDownXY[o]+a*n.easing.getValue()),n.lastXY=n.lastKeyDownXY,i.setXY(n.getXY("dragTarget")))},onResizeKeyUp:function(e){this.onMouseUp(e)},calculateConstrainRegion:function(){var e,t,n,i=this,r=i.getSplitter(),o=r.getWidth(),a=r.defaultSplitMin,s=r.orientation,l=i.prevBox,d=i.getPrevCmp(),u=i.nextBox,c=i.getNextCmp();return"vertical"===s?(n={prevCmp:d,nextCmp:c,prevBox:l,nextBox:u,defaultMin:a,splitWidth:o},e=new Ext.util.Region(l.y,i.getVertPrevConstrainRight(n),l.bottom,i.getVertPrevConstrainLeft(n)),t=new Ext.util.Region(u.y,i.getVertNextConstrainRight(n),u.bottom,i.getVertNextConstrainLeft(n))):(e=new Ext.util.Region(l.y+(d.minHeight||a),l.right,(d.maxHeight?l.y+d.maxHeight:u.bottom-(c.minHeight||a))+o,l.x),t=new Ext.util.Region((c.maxHeight?u.bottom-c.maxHeight:l.y+(d.minHeight||a))-o,u.right,u.bottom-(c.minHeight||a),u.x)),e.intersect(t)},performResize:function(e,t){for(var n,i,r=this,o=r.getSplitter(),a=o.orientation,s=r.getPrevCmp(),l=r.getNextCmp(),d=o.ownerCt,u=d.query(">[flex]"),c=u.length,h="vertical"===a,p=0,f=h?"width":"height",g=0;c>p;p++)n=u[p],i=h?n.getWidth():n.getHeight(),g+=i,n.flex=i;t=h?t[0]:t[1],s&&(i=r.prevBox[f]+t,s.flex?s.flex=i:s[f]=i),l&&(i=r.nextBox[f]-t,l.flex?l.flex=i:l[f]=i),d.updateLayout()},endDrag:function(){var e=this;e.overlay&&(e.overlay.destroy(),delete e.overlay),Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(e){var t=this,n=t.getSplitter();n.removeCls(n.baseCls+"-active"),t.performResize(e,t.getResizeOffset())},onDrag:function(){var e=this,t=e.getOffset("dragTarget"),n=e.getSplitter(),i=n.getEl(),r=n.orientation;"vertical"===r?i.setX(e.startRegion.left+t[0]):i.setY(e.startRegion.top+t[1])},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(e){return(e.prevCmp.maxWidth?e.prevBox.x+e.prevCmp.maxWidth:e.nextBox.right-(e.nextCmp.minWidth||e.defaultMin))+e.splitWidth},getVertPrevConstrainLeft:function(e){return e.prevBox.x+(e.prevCmp.minWidth||e.defaultMin)},getVertNextConstrainRight:function(e){return e.nextBox.right-(e.nextCmp.minWidth||e.defaultMin)},getVertNextConstrainLeft:function(e){return(e.nextCmp.maxWidth?e.nextBox.right-e.nextCmp.maxWidth:e.prevBox.x+(e.prevBox.minWidth||e.defaultMin))-e.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0),Ext.define("Ext.rtl.resizer.SplitterTracker",{override:"Ext.resizer.SplitterTracker",getVertPrevConstrainLeft:function(e){return!this.splitter.getInherited().rtl!=!Ext.rootInheritedState.rtl?(e.prevCmp.maxWidth?e.prevBox.right-e.prevCmp.maxWidth:e.nextBox.x+(e.nextCmp.minWidth||e.defaultMin))-e.splitWidth:arguments.callee.$previous.apply(this,arguments);
},getVertPrevConstrainRight:function(e){return!this.splitter.getInherited().rtl!=!Ext.rootInheritedState.rtl?e.prevBox.right-(e.prevCmp.minWidth||e.defaultMin):arguments.callee.$previous.apply(this,arguments)},getVertNextConstrainLeft:function(e){return!this.splitter.getInherited().rtl!=!Ext.rootInheritedState.rtl?e.nextBox.x+(e.nextCmp.minWidth||e.defaultMin):arguments.callee.$previous.apply(this,arguments)},getVertNextConstrainRight:function(e){return!this.splitter.getInherited().rtl!=!Ext.rootInheritedState.rtl?(e.nextCmp.maxWidth?e.nextBox.x+e.nextCmp.maxWidth:e.prevBox.right-(e.prevBox.minWidth||e.defaultMin))+e.splitWidth:arguments.callee.$previous.apply(this,arguments)},getResizeOffset:function(){var e=this.getOffset("dragTarget");return!this.splitter.getInherited().rtl!=!Ext.rootInheritedState.rtl&&(e[0]=-e[0]),e}}),Ext.cmd.derive("Ext.event.publisher.MouseEnterLeave",Ext.event.publisher.Dom,{type:"mouseEnterLeave"},0,0,0,0,0,0,[Ext.event.publisher,"MouseEnterLeave"],function(e){var t={mouseover:"mouseenter",mouseout:"mouseleave"};Ext.supports.MouseEnterLeave||e.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],doDelegatedEvent:function(e){var n,i,r,o,a,s;e=this.callParent([e]),n=e.getTarget(),i=e.getRelatedTarget(),i&&Ext.fly(n).contains(i)||(r=n.id,r&&(o=Ext.cache[r],o&&(a=t[e.type],e=e.chain({type:a}),o.hasListeners[a]&&(s=o.events[a],s&&(s=s.directs,s&&(e.setCurrentTarget(o.dom),s.fire(e,e.target)))))))}}),e.instance=new e}),Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:!0,constructor:function(e){e&&Ext.apply(this,e);var t=e.params;Ext.isString(t)&&(this.params=Ext.Object.fromQueryString(t))},run:Ext.emptyFn,onFailure:function(e){var t=this.form,n=t&&!t.destroying&&!t.isDestroyed;this.response=e,this.failureType=Ext.form.action.Action.CONNECT_FAILURE,n&&t.afterAction(this,!1)},processResponse:function(e){return this.response=e,e.responseText||e.responseXML?this.result=this.handleResponse(e):!0},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var e,t=this,n=t.form;return{success:t.onSuccess,failure:t.onFailure,scope:t,timeout:1e3*this.timeout||1e3*n.timeout,upload:n.fileUpload?t.onSuccess:e}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0),Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(e){var t=this.processResponse(e),n=this.form,i=n&&!n.destroying&&!n.isDestroyed;return t!==!0&&t.success&&t.data?void(i&&(n.clearInvalid(),n.setValues(t.data),n.afterAction(this,!0))):(this.failureType=Ext.form.action.Action.LOAD_FAILURE,void(i&&n.afterAction(this,!1)))},handleResponse:function(e){var t,n,i=this.form.reader;return i?(t=i.read(e),n=t.records&&t.records[0]?t.records[0].data:null,{success:t.success,data:n}):Ext.decode(e.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0),Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var e=this,t=e.form;e.clientValidation===!1||t.isValid()?e.doSubmit():(e.failureType=Ext.form.action.Action.CLIENT_INVALID,t.afterAction(e,!1))},doSubmit:function(){var e,t=this,n=Ext.apply(t.createCallback(),{url:t.getUrl(),method:t.getMethod(),headers:t.headers}),i=t.form,r=t.jsonSubmit||i.jsonSubmit,o=r?"jsonData":"params";i.hasUpload()?(e=t.buildForm(),n.form=e.formEl,n.isUpload=!0):n[o]=t.getParams(r),Ext.Ajax.request(n),e&&t.cleanup(e)},cleanup:function(e){var t,n,i=e.formEl,r=e.uploadEls,o=e.uploadFields,a=o.length;for(t=0;a>t;++t)n=o[t],n.clearOnSubmit||n.restoreInput(r[t]);i&&Ext.removeNode(i)},getParams:function(e){var t=!1,n=Ext.form.action.Action.prototype.getParams.call(this),i=this.form.getValues(t,t,this.submitEmptyText!==t,e,!0);return Ext.apply({},i,n)},buildForm:function(){var e,t,n,i,r,o,a,s,l,d=this,u=[],c=d.form,h=d.getParams(),p=[],f=[],g=c.getFields().items,m=g.length;for(n=0;m>n;++n)i=g[n],i.isFileUpload()&&p.push(i);for(r in h)if(h.hasOwnProperty(r))if(o=h[r],Ext.isArray(o))for(s=o.length,a=0;s>a;a++)u.push(d.getFieldConfig(r,o[a]));else u.push(d.getFieldConfig(r,o));for(e={tag:"form",role:"presentation",action:d.getUrl(),method:d.getMethod(),target:d.target?Ext.isString(d.target)?d.target:Ext.fly(d.target).dom.name:"_self",style:"display:none",cn:u},p.length&&(e.encoding=e.enctype="multipart/form-data"),t=Ext.DomHelper.append(Ext.getBody(),e),m=p.length,n=0;m>n;++n)l=p[n].extractFileInput(),t.appendChild(l),f.push(l);return{formEl:t,uploadFields:p,uploadEls:f}},getFieldConfig:function(e,t){return{tag:"input",type:"hidden",name:e,value:Ext.String.htmlEncode(t)}},onSuccess:function(e){var t=this.form,n=t&&!t.destroying&&!t.isDestroyed,i=!0,r=this.processResponse(e);r===!0||r.success||(r.errors&&n&&t.markInvalid(r.errors),this.failureType=Ext.form.action.Action.SERVER_INVALID,i=!1),n&&t.afterAction(this,i)},handleResponse:function(e){var t,n,i,r,o,a,s=this.form,l=s.errorReader;if(l){if(t=l.read(e),o=t.records,n=[],o)for(i=0,r=o.length;r>i;i++)n[i]=o[i].data;n.length<1&&(n=null),a={success:t.success,errors:n}}else try{a=Ext.decode(e.responseText)}catch(d){a={success:!1,errors:[]}}return a}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0),Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" role="{role}" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:!0}],growMin:60,growMax:1e3,growAppend:"\n-",enterIsSpecial:!1,preventScrollbars:!1,returnRe:/\r/g,inputCls:"x-form-textarea",extraFieldBodyCls:"x-form-textarea-body",getSubTplData:function(){var e=this,t=e.getFieldStyle(),n=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);return e.grow&&e.preventScrollbars&&(n.fieldStyle=(t||"")+";overflow:hidden;height:"+e.growMin+"px"),n},afterRender:function(){var e=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments),e.needsMaxCheck=e.enforceMaxLength&&e.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength,e.needsMaxCheck&&e.inputEl.on("paste",e.onPaste,e)},transformRawValue:function(e){return this.stripReturns(e)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(e){return e=this.stripReturns(e),Ext.form.field.Text.prototype.valueToRaw.call(this,e)},stripReturns:function(e){return e&&"string"==typeof e&&(e=e.replace(this.returnRe,"")),e},onPaste:function(){var e=this;e.pasteTask||(e.pasteTask=new Ext.util.DelayedTask(e.pasteCheck,e)),e.pasteTask.delay(1)},pasteCheck:function(){var e=this,t=e.getValue(),n=e.maxLength;t.length>n&&(t=t.substr(0,n),e.setValue(t))},fireKey:function(e){var t,n=this,i=e.getKey();e.isSpecialKey()&&(n.enterIsSpecial||i!==e.ENTER||e.hasModifier())&&n.fireEvent("specialkey",n,e),!n.needsMaxCheck||i===e.BACKSPACE||i===e.DELETE||e.isNavKeyPress()||n.isCutCopyPasteSelectAll(e,i)||(t=n.getValue(),t.length>=n.maxLength&&e.stopEvent())},isCutCopyPasteSelectAll:function(e,t){return e.ctrlKey?t===e.A||t===e.C||t===e.V||t===e.X:!1},autoSize:function(){var e,t,n,i,r=this;r.grow&&r.rendered&&r.getSizeModel().height.auto&&(e=r.inputEl,n=e.getWidth(!0),i=Ext.util.Format.htmlEncode(e.dom.value)||"&#160;",i+=r.growAppend,i=i.replace(/\n/g,"<br/>"),t=Ext.util.TextMetrics.measure(e,i,n).height+e.getPadding("tb")+r.inputWrap.getBorderWidth("tb")+r.triggerWrap.getBorderWidth("tb"),t=Math.min(Math.max(t,r.growMin),r.growMax),r.bodyEl.setHeight(t),r.updateLayout(),r.fireEvent("autosize",r,t))},beforeDestroy:function(){var e=this.pasteTask;e&&(e.cancel(),this.pasteTask=null),Ext.form.field.Text.prototype.beforeDestroy.call(this)}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:!0,box:!0,field:!0,textfield:!0,textareafield:!0,textarea:!0},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0),Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"x-message-box-info",WARNING:"x-message-box-warning",QUESTION:"x-message-box-question",ERROR:"x-message-box-error",hideMode:"offsets",closeAction:"hide",resizable:!1,scrollable:!0,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,cls:["x-message-box","x-hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon",ariaRole:"alertdialog",makeButton:function(e){var t=this.buttonIds[e];return new Ext.button.Button({handler:this.btnCallback,itemId:t,scope:this,text:this.buttonText[t],minWidth:75})},btnCallback:function(e,t){var n,i,r=this;return t&&"keydown"===t.type&&!t.isSpecialKey()?void t.getTarget(null,null,!0).on({keyup:function(t){r.btnCallback(e,t)},single:!0}):((r.cfg.prompt||r.cfg.multiline)&&(i=r.cfg.multiline?r.textArea:r.textField,n=i.getValue(),i.reset()),r.hide(),void r.userCallback(e.itemId,n,r.cfg))},hide:function(){var e=this,t=e.cfg?e.cfg.cls:"";e.progressBar.reset(),t&&e.removeCls(t),Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(){var e=this;Ext.window.Window.prototype.constructor.apply(this,arguments),e.minWidth=e.defaultMinWidth=e.minWidth||e.defaultMinWidth,e.maxWidth=e.defaultMaxWidth=e.maxWidth||e.defaultMaxWidth,e.minHeight=e.defaultMinHeight=e.minHeight||e.defaultMinHeight,e.maxHeight=e.defaultMaxHeight=e.maxHeight||e.defaultMaxHeight},initComponent:function(){var e,t,n=this,i=n.id;for(n.title=n.title||"&#160;",n.iconCls=n.iconCls||"",n.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[n.iconComponent=new Ext.Component({cls:n.baseIconCls}),n.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[n.msg=new Ext.Component({id:i+"-msg",cls:n.baseCls+"-text"}),n.textField=new Ext.form.field.Text({id:i+"-textfield",enableKeyEvents:!0,listeners:{keydown:n.onPromptKey,scope:n}}),n.textArea=new Ext.form.field.TextArea({id:i+"-textarea",height:75})]})]}),n.progressBar=new Ext.ProgressBar({id:i+"-progressbar",margin:"0 10 10 10"}),n.items=[n.topContainer,n.progressBar],n.msgButtons=[],e=0;4>e;e++)t=n.makeButton(e),n.msgButtons[t.itemId]=t,n.msgButtons.push(t);n.bottomTb=new Ext.toolbar.Toolbar({id:i+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[n.msgButtons[0],n.msgButtons[1],n.msgButtons[2],n.msgButtons[3]]}),n.dockedItems=[n.bottomTb],n.on("close",n.onClose,n),Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var e=this.header.child("[type=close]");e.itemId="cancel",this.btnCallback(e),delete e.itemId},onPromptKey:function(e,t){var n=this;(t.keyCode===t.RETURN||10===t.keyCode)&&(n.msgButtons.ok.isVisible()?n.msgButtons.ok.handler.call(n,n.msgButtons.ok):n.msgButtons.yes.isVisible()&&n.msgButtons.yes.handler.call(n,n.msgButtons.yes))},reconfigure:function(e){var t,n,i,r,o,a,s,l,d,u,c=this,h=0,p=!0,f=c.buttonText,g=c.resizer,m=c.header,x=m&&!m.isHeader,v=e&&(e.message||e.msg);for(c.updateButtonText(),c.cfg=e=e||{},u=e.wait,e.width&&(n=e.width),e.height&&(i=e.height),c.minWidth=e.minWidth||c.defaultMinWidth,c.maxWidth=e.maxWidth||c.defaultMaxWidth,c.minHeight=e.minHeight||c.defaultMinHeight,c.maxHeight=e.maxHeight||c.defaultMaxHeight,g&&(t=g.resizeTracker,g.minWidth=t.minWidth=c.minWidth,g.maxWidth=t.maxWidth=c.maxWidth,g.minHeight=t.minHeight=c.minHeight,g.maxHeight=t.maxHeight=c.maxHeight),delete c.defaultFocus,e.defaultFocus&&(c.defaultFocus=e.defaultFocus),c.animateTarget=e.animateTarget||void 0,c.modal=e.modal!==!1,c.setTitle(e.title||x&&m.title||c.title),c.setIconCls(e.iconCls||x&&m.iconCls||c.iconCls),Ext.isObject(e.buttons)?(c.buttonText=e.buttons,h=0):(c.buttonText=e.buttonText||c.buttonText,h=Ext.isNumber(e.buttons)?e.buttons:0),h|=c.updateButtonText(),c.buttonText=f,Ext.suspendLayouts(),c.width=c.height=null,(n||i)&&(n&&c.setWidth(n),i&&c.setHeight(i)),c.hidden=!1,c.rendered||c.render(Ext.getBody()),c.closable=e.closable!==!1&&!u,m=c.header,m&&(m.child("[type=close]").setVisible(c.closable),e.title||c.closable||e.iconCls?m.show():m.hide()),c.liveDrag=!e.proxyDrag,c.userCallback=Ext.Function.bindCallback(e.callback||e.fn||Ext.emptyFn,e.scope||Ext.global),c.setIcon(e.icon),s=c.msg,v?(s.setHtml(v),s.show()):s.hide(),o=c.textArea,a=c.textField,e.prompt||e.multiline?(c.multiline=e.multiline,e.multiline?(o.setValue(e.value),o.setHeight(e.defaultTextHeight||c.defaultTextHeight),o.show(),a.hide(),c.defaultFocus=o):(a.setValue(e.value),o.hide(),a.show(),c.defaultFocus=a)):(o.hide(),a.hide()),l=c.progressBar,e.progress||u?(l.show(),c.updateProgress(0,e.progressText),u&&l.wait(u===!0?e.waitConfig:u)):l.hide(),d=c.msgButtons,r=0;4>r;r++)h&Math.pow(2,r)?(c.defaultFocus||(c.defaultFocus=d[r]),d[r].show(),p=!1):d[r].hide();p?c.bottomTb.hide():c.bottomTb.show(),Ext.resumeLayouts(!0)},updateButtonText:function(){var e,t,n=this,i=n.buttonText,r=0;for(e in i)i.hasOwnProperty(e)&&(t=n.msgButtons[e],t&&(n.cfg&&n.cfg.buttonText&&(r|=Math.pow(2,Ext.Array.indexOf(n.buttonIds,e))),t.text!==i[e]&&t.setText(i[e])));return r},show:function(e){var t,n=this;return e=e||{},Ext.Component.layoutSuspendCount?(Ext.on({resumelayouts:function(){n.show(e)},single:!0}),n):(n.reconfigure(e),e.cls&&n.addCls(e.cls),t=n.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])"),n.preventFocusOnActivate=!t.length,n.hidden=!0,Ext.window.Window.prototype.show.call(this),n)},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments),this.center()},updateText:function(e){this.msg.setHtml(e)},setIcon:function(e,t,n){var i=this,r=i.iconComponent,o=i.messageIconCls;return o&&r.removeCls(o),e?(r.show(),(t||n)&&r.setSize(t||r.getWidth(),n||r.getHeight()),r.addCls("x-dlg-icon"),r.addCls(i.messageIconCls=e)):(r.removeCls("x-dlg-icon"),r.hide()),i},updateProgress:function(e,t,n){return this.progressBar.updateProgress(e,t),n&&this.updateText(n),this},onEsc:function(){this.closable!==!1&&Ext.window.Window.prototype.onEsc.apply(this,arguments)},confirm:function(e,t,n,i){return Ext.isString(e)&&(e={title:e,icon:this.QUESTION,message:t,buttons:this.YESNO,callback:n,scope:i}),this.show(e)},prompt:function(e,t,n,i,r,o){return Ext.isString(e)&&(e={prompt:!0,title:e,minWidth:this.minPromptWidth,message:t,buttons:this.OKCANCEL,callback:n,scope:i,multiline:r,value:o}),this.show(e)},wait:function(e,t,n){return Ext.isString(e)&&(e={title:t,message:e,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:n}),this.show(e)},alert:function(e,t,n,i){return Ext.isString(e)&&(e={title:e,message:t,buttons:this.OK,fn:n,scope:i,minWidth:this.minWidth}),this.show(e)},progress:function(e,t,n){return Ext.isString(e)&&(e={title:e,message:t,progress:!0,progressText:n}),this.show(e)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:!0,box:!0,container:!0,panel:!0,window:!0,messagebox:!0},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(e){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new e})}),Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(e,t){var n,i=this;i.owner=e,i.fieldMonitors={validitychange:i.checkValidityDelay,enable:i.checkValidityDelay,disable:i.checkValidityDelay,dirtychange:i.checkDirtyDelay,errorchange:i.checkErrorDelay,scope:i},i.checkValidityTask=new Ext.util.DelayedTask(i.checkValidity,i),i.checkDirtyTask=new Ext.util.DelayedTask(i.checkDirty,i),i.checkErrorTask=new Ext.util.DelayedTask(i.checkError,i),i.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:i,addHandler:i.onFieldAdd,removeHandler:i.onFieldRemove,invalidateHandler:i.onMonitorInvalidate}),i.monitor.bind(e),Ext.apply(i,t),Ext.isString(i.paramOrder)&&(i.paramOrder=i.paramOrder.split(/[\s,|]/)),n=i.reader,n&&!n.isReader&&("string"==typeof n&&(n={type:n}),i.reader=Ext.createByAlias("reader."+n.type,n)),n=i.errorReader,n&&!n.isReader&&("string"==typeof n&&(n={type:n}),i.errorReader=Ext.createByAlias("reader."+n.type,n)),Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=!0,this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:!1,waitTitle:"Please Wait...",trackResetOnLoad:!1,wasDirty:!1,destroy:function(){var e=this,t=e.monitor;t&&(t.unbind(),e.monitor=null),e.clearListeners(),e.checkValidityTask.cancel(),e.checkDirtyTask.cancel(),e.checkErrorTask.cancel(),e.checkValidityTask=e.checkDirtyTask=e.checkErrorTask=null,e.isDestroyed=!0},onFieldAdd:function(e){e.on(this.fieldMonitors),this.onMonitorInvalidate()},onFieldRemove:function(e){e.un(this.fieldMonitors),this.onMonitorInvalidate()},onMonitorInvalidate:function(){this.initialized&&this.checkValidityDelay()},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var e=this._boundItems;return e&&0!==e.getCount()||(e=this._boundItems=new Ext.util.MixedCollection,e.addAll(this.owner.query("[formBind]"))),e},hasInvalidField:function(){return!!this.getFields().findBy(function(e){var t,n=e.preventMark;return e.preventMark=!0,t=e.isValid(),e.preventMark=n,!t})},isValid:function(){var e,t=this;return Ext.suspendLayouts(),e=t.getFields().filterBy(function(e){return!e.validate()}),Ext.resumeLayouts(!0),e.length<1},checkValidity:function(){var e,t=this;t.isDestroyed||(e=!t.hasInvalidField(),e!==t.wasValid&&(t.onValidityChange(e),t.fireEvent("validitychange",t,e),t.wasValid=e))},checkValidityDelay:function(){var e=this.taskDelay;e?this.checkValidityTask.delay(e):this.checkValidity()},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var e=this.taskDelay;e?this.checkErrorTask.delay(e):this.checkError()},onValidityChange:function(e){var t,n,i,r,o=this.getBoundItems();if(o)for(t=o.items,i=t.length,n=0;i>n;n++)r=t[n],r.disabled===e&&r.setDisabled(!e)},isDirty:function(){return!!this.getFields().findBy(function(e){return e.isDirty()})},checkDirtyDelay:function(){var e=this.taskDelay;e?this.checkDirtyTask.delay(e):this.checkDirty()},checkDirty:function(){var e,t=this;t.isDestroyed||(e=this.isDirty(),e!==this.wasDirty&&(this.fireEvent("dirtychange",this,e),this.wasDirty=e))},hasUpload:function(){return!!this.getFields().findBy(function(e){return e.isFileUpload()})},doAction:function(e,t){return Ext.isString(e)&&(e=Ext.ClassManager.instantiateByAlias("formaction."+e,Ext.apply({},t,{form:this}))),this.fireEvent("beforeaction",this,e)!==!1&&(this.beforeAction(e),Ext.defer(e.run,100,e)),this},submit:function(e){e=e||{};var t,n=this;return t=e.standardSubmit||n.standardSubmit?"standardsubmit":n.api?"directsubmit":"submit",n.doAction(t,e)},load:function(e){return this.doAction(this.api?"directload":"load",e)},updateRecord:function(e){if(e=e||this._record,!e)return this;for(var t,n=e.self.fields,i=this.getFieldValues(),r={},o=0,a=n.length;a>o;++o)t=n[o].name,i.hasOwnProperty(t)&&(r[t]=i[t]);return e.beginEdit(),e.set(r),e.endEdit(),this},loadRecord:function(e){return this._record=e,this.setValues(e.getData())},getRecord:function(){return this._record},beforeAction:function(e){var t,n,i,r=this,o=e.waitMsg,a="x-mask-loading",s=r.getFields().items,l=s.length;for(t=0;l>t;t++)n=s[t],n.isFormField&&n.syncValue&&n.syncValue();o&&(i=r.waitMsgTarget,i===!0?r.owner.el.mask(o,a):i?(i=r.waitMsgTarget=Ext.get(i),i.mask(o,a)):(r.floatingAncestor=r.owner.up("[floating]"),r.floatingAncestor&&(r.savePreventFocusOnActivate=r.floatingAncestor.preventFocusOnActivate,r.floatingAncestor.preventFocusOnActivate=!0),Ext.MessageBox.wait(o,e.waitTitle||r.waitTitle)))},afterAction:function(e,t){var n=this;if(e.waitMsg){var i=Ext.MessageBox,r=n.waitMsgTarget;r===!0?n.owner.el.unmask():r?r.unmask():i.hide()}n.floatingAncestor&&(n.floatingAncestor.preventFocusOnActivate=n.savePreventFocusOnActivate),t?(e.reset&&n.reset(),Ext.callback(e.success,e.scope||e,[n,e]),n.fireEvent("actioncomplete",n,e)):(Ext.callback(e.failure,e.scope||e,[n,e]),n.fireEvent("actionfailed",n,e))},findField:function(e){return this.getFields().findBy(function(t){return t.id===e||t.name===e||t.dataIndex===e})},markInvalid:function(e){function t(e,t){var n=s.findField(e);n&&n.markInvalid(t)}var n,i,r,o,a,s=this;if(Ext.isArray(e))for(i=e.length,n=0;i>n;n++)r=e[n],t(r.id||r.field,r.msg||r.message);else if(e instanceof Ext.data.ErrorCollection)for(i=e.items.length,n=0;i>n;n++)r=e.items[n],t(r.field,r.message);else for(a in e)e.hasOwnProperty(a)&&(o=e[a],t(a,o,e));return this},setValues:function(e){function t(e,t){var n=o.findField(e);n&&(n.setValue(t),o.trackResetOnLoad&&n.resetOriginalValue())}var n,i,r,o=this;if(Ext.suspendLayouts(),Ext.isArray(e))for(i=e.length,n=0;i>n;n++)r=e[n],t(r.id,r.value);else Ext.iterate(e,t);return Ext.resumeLayouts(!0),this},getValues:function(e,t,n,i,r){var o,a,s,l,d,u,c={},h=this.getFields().items,p=h.length,f=Ext.isArray;for(u=0;p>u;u++)if(o=h[u],(!t||o.isDirty())&&(a=o[i?"getModelData":"getSubmitData"](n,r),Ext.isObject(a)))for(d in a)a.hasOwnProperty(d)&&(s=a[d],n&&""===s&&(s=o.emptyText||""),o.isRadio?c[d]=c[d]||s:c.hasOwnProperty(d)?(l=c[d],f(l)||(l=c[d]=[l]),f(s)?c[d]=l.concat(s):l.push(s)):c[d]=s);return e&&(c=Ext.Object.toQueryString(c)),c},getFieldValues:function(e){return this.getValues(!1,e,!1,!0)},clearInvalid:function(){Ext.suspendLayouts();var e,t=this,n=t.getFields().items,i=n.length;for(e=0;i>e;e++)n[e].clearInvalid();return Ext.resumeLayouts(!0),t},reset:function(e){Ext.suspendLayouts();var t,n=this,i=n.getFields().items,r=i.length;for(t=0;r>t;t++)i[t].reset();return Ext.resumeLayouts(!0),e===!0&&delete n._record,n},applyToFields:function(e){var t,n=this.getFields().items,i=n.length;for(t=0;i>t;t++)Ext.apply(n[t],e);return this},applyIfToFields:function(e){var t,n=this.getFields().items,i=n.length;for(t=0;i>t;t++)Ext.applyIf(n[t],e);return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0),Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Mixin,{mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var e=this;e.monitor=new Ext.container.Monitor({scope:e,selector:"[isFormField]:not([excludeForm])",addHandler:e.onChildFieldAdd,removeHandler:e.onChildFieldRemove}),e.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(e){var t=e.fieldDefaults,n=this.fieldDefaults;n&&(t?e.fieldDefaults=Ext.apply(Ext.Object.chain(t),n):e.fieldDefaults=n)},onChildFieldAdd:function(e){var t=this;t.mon(e,"errorchange",t.handleFieldErrorChange,t),t.mon(e,"validitychange",t.handleFieldValidityChange,t)},onChildFieldRemove:function(e){var t=this;t.mun(e,"errorchange",t.handleFieldErrorChange,t),t.mun(e,"validitychange",t.handleFieldValidityChange,t)},initFieldDefaults:function(){this.fieldDefaults||(this.fieldDefaults={})},handleFieldValidityChange:function(e,t){var n=this;e!==n&&(n.fireEvent("fieldvaliditychange",n,e,t),n.onFieldValidityChange(e,t))},handleFieldErrorChange:function(e,t){var n=this;e!==n&&(n.fireEvent("fielderrorchange",n,e,t),n.onFieldErrorChange(e,t))},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0),Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.Auto,{type:"fieldcontainer",waitForOuterHeightInDom:!0,waitForOuterWidthInDom:!0,beginLayout:function(e){var t=this.owner.containerEl;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments),e.hasRawContent=!0,t.setStyle("width",""),t.setStyle("height",""),e.containerElContext=e.getEl("containerEl")},measureContentHeight:function(e){return e.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments):NaN},measureContentWidth:function(e){return e.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentWidth.apply(this,arguments):NaN},publishInnerHeight:function(e,t){var n=this.owner;"top"===n.labelAlign&&n.hasVisibleLabel()&&(t-=n.labelEl.getHeight()),"under"===n.msgTarget&&n.hasActiveError()&&(t-=n.errorWrapEl.getHeight()),t-=n.bodyEl.getPadding("tb"),e.containerElContext.setHeight(t)},publishInnerWidth:function(e,t){var n=this.owner;"top"!==n.labelAlign&&n.hasVisibleLabel()&&(t-=n.labelWidth+(n.labelPad||0)),"side"===n.msgTarget&&n.hasActiveError()&&(t-=n.errorWrapEl.getWidth()),t-=n.bodyEl.getPadding("lr"),e.containerElContext.setWidth(t)}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0),Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:"x-form-fieldcontainer",shrinkWrap:!0,childEls:["containerEl"],combineLabels:!1,labelConnector:", ",combineErrors:!1,maskOnDisable:!1,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}" role="presentation">',"{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var e=this;e.initLabelable(),e.initFieldAncestor(),Ext.container.Container.prototype.initComponent.call(this),e.initMonitor()},onAdd:function(e){var t=this;e.isLabelable&&Ext.isGecko&&"absolute"===t.layout.type&&!t.hideLabel&&"top"!==t.labelAlign&&(e.x+=t.labelWidth+t.labelPad),Ext.container.Container.prototype.onAdd.apply(this,arguments),e.isLabelable&&t.combineLabels&&(e.oldHideLabel=e.hideLabel,e.hideLabel=!0),t.updateLabel()},onRemove:function(e,t){var n=this;Ext.container.Container.prototype.onRemove.apply(this,arguments),t||(e.isLabelable&&n.combineLabels&&(e.hideLabel=e.oldHideLabel),n.updateLabel())},initRenderData:function(){var e=this,t=Ext.container.Container.prototype.initRenderData.call(this);return t.containerElCls=e.containerElCls,Ext.applyIf(t,e.getLabelableRenderData())},getFieldLabel:function(){var e=this.fieldLabel||"";return!e&&this.combineLabels&&(e=Ext.Array.map(this.query("[isFieldLabelable]"),function(e){return e.getFieldLabel()}).join(this.labelConnector)),e},getSubTplData:function(){var e=this.initRenderData();return Ext.apply(e,this.subTplData),e},getSubTplMarkup:function(e){var t,n=this,i=n.getTpl("fieldSubTpl");return i.renderContent||n.setupRenderTpl(i),t=i.apply(n.getSubTplData(e))},updateLabel:function(){var e=this,t=e.labelEl;t&&e.setFieldLabel(e.getFieldLabel())},onFieldErrorChange:function(){if(this.combineErrors){var e=this,t=e.getActiveError(),n=Ext.Array.filter(e.query("[isFormField]"),function(e){return e.hasActiveError()}),i=e.getCombinedErrors(n);i?e.setActiveErrors(i):e.unsetActiveError(),t!==e.getActiveError()&&e.updateLayout()}},getCombinedErrors:function(e){var t,n,i,r,o,a,s,l=[],d=e.length;for(t=0;d>t;t++)for(n=e[t],i=n.getActiveErrors(),o=i.length,r=0;o>r;r++)a=i[r],s=n.getFieldLabel(),l.push((s?s+": ":"")+a);return l},privates:{applyTargetCls:function(e){var t=this.containerElCls;this.containerElCls=t?t+" "+e:e},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var e=this;return e.hasOwnProperty("renderTpl")||(e.renderTpl=e.getTpl("labelableRenderTpl")),Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:!0,box:!0,container:!0,fieldcontainer:!0},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0),Ext.cmd.derive("Ext.layout.container.CheckboxGroup",Ext.layout.container.Container,{autoFlex:!0,type:"checkboxgroup",createsInnerCt:!0,childEls:["innerCt"],renderTpl:['<table id="{ownerId}-innerCt" data-ref="innerCt" class="x-table-plain" cellpadding="0"','role="presentation" style="{tableStyle}"><tr role="presentation">','<tpl for="columns">','<td class="{parent.colCls}" valign="top" style="{style}" role="presentation">',"{% this.renderColumn(out,parent,xindex-1) %}","</td>","</tpl>","</tr></table>"],lastOwnerItemsGeneration:null,beginLayout:function(e){var t,n,i,r,o,a=this,s=0,l=0,d=a.autoFlex,u=a.innerCt.dom.style;if(Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments),t=a.columnNodes,e.innerCtContext=e.getEl("innerCt",a),e.widthModel.shrinkWrap)u.tableLayout="auto",u.width="";else{if(n=t.length,a.columnsArray){for(i=0;n>i;i++)r=a.owner.columns[i],1>r&&(s+=r,l++);for(i=0;n>i;i++)r=a.owner.columns[i],o=1>r?r/s*100+"%":r+"px",t[i].style.width=o}else for(i=0;n>i;i++)o=d?1/n*100+"%":"",t[i].style.width=o,l++;l?n>l?(u.tableLayout="fixed",u.width="100%"):(u.tableLayout="auto",d?u.width="100%":u.width=""):(u.tableLayout="fixed",u.width="")}},cacheElements:function(){var e=this;Ext.layout.container.Container.prototype.cacheElements.call(this),e.rowEl=e.innerCt.down("tr"),e.columnNodes=e.rowEl.dom.childNodes},calculate:function(e){var t,n,i,r,o,a,s=this;e.getDomProp("containerChildrenSizeDone")?(t=e.innerCtContext,n=e.widthModel.shrinkWrap,i=e.heightModel.shrinkWrap,r=i||n,o=t.el.dom,a=r&&t.getPaddingInfo(),n&&e.setContentWidth(o.offsetWidth+a.width,!0),i&&e.setContentHeight(o.offsetHeight+a.height,!0)):s.done=!1},doRenderColumn:function(e,t,n){var i,r,o,a,s,l=t.$layout,d=l.owner,u=t.columnCount,c=d.items.items,h=c.length;for(d.vertical?(o=Math.ceil(h/u),r=n*o,h=Math.min(h,r+o),a=1):(r=n,a=u);h>r;r+=a)i=c[r],l.configureItem(i),s=i.getRenderTree(),Ext.DomHelper.generateMarkup(s,e)},getColumnCount:function(){var e=this,t=e.owner,n=t.columns;return e.columnsArray?n.length:Ext.isNumber(n)?n:t.items.length},getItemSizePolicy:function(){return this.autoSizePolicy},getRenderData:function(){var e,t,n,i,r=this,o=Ext.layout.container.Container.prototype.getRenderData.call(this),a=r.owner,s=r.getColumnCount(),l=r.autoFlex,d=0,u=0;if(r.columnsArray)for(e=0;s>e;e++)t=r.owner.columns[e],1>t&&(d+=t,u++);for(o.colCls=a.groupCls,o.columnCount=s,o.columns=[],e=0;s>e;e++)n=o.columns[e]={},r.columnsArray?(t=r.owner.columns[e],i=1>t?t/d*100+"%":t+"px",n.style="width:"+i):(n.style="width:"+1/s*100+"%",u++);return o.tableStyle=u?s>u?"table-layout:fixed;width:100%":l?"table-layout:auto;width:100%":"table-layout:auto;":"table-layout:fixed;",o},initLayout:function(){var e=this,t=e.owner;e.columnsArray=Ext.isArray(t.columns),e.autoColumns=!t.columns||"auto"===t.columns,e.vertical=t.vertical,Ext.layout.container.Container.prototype.initLayout.call(this)},isValidParent:Ext.returnTrue,setupRenderTpl:function(e){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments),e.renderColumn=this.doRenderColumn},renderChildren:function(){var e=this,t=e.owner.items.generation;e.lastOwnerItemsGeneration!==t&&(e.lastOwnerItemsGeneration=t,e.renderItems(e.getLayoutItems()));
},renderItems:function(e){var t,n,i,r,o,a,s=this,l=e.length;if(l){for(Ext.suspendLayouts(),s.autoColumns&&s.addMissingColumns(l),r=s.columnNodes.length,i=Math.ceil(l/r),t=0;l>t;t++)n=e[t],o=s.getRenderRowIndex(t,i,r),a=s.getRenderColumnIndex(t,i,r),n.rendered?s.isItemAtPosition(n,o,a)||s.moveItem(n,o,a):s.renderItem(n,o,a);s.autoColumns&&s.removeExceedingColumns(l),Ext.resumeLayouts(!0)}},isItemAtPosition:function(e,t,n){return e.el.dom===this.getNodeAt(t,n)},getRenderColumnIndex:function(e,t,n){return this.vertical?Math.floor(e/t):e%n},getRenderRowIndex:function(e,t,n){var i=this;return i.vertical?e%t:Math.floor(e/n)},getNodeAt:function(e,t){return this.columnNodes[t].childNodes[e]},addMissingColumns:function(e){var t,n,i,r,o=this,a=o.columnNodes.length;if(e>a)for(t=e-a,n=o.rowEl,i=o.owner.groupCls,r=0;t>r;r++)n.createChild({cls:i,tag:"td",vAlign:"top",role:"presentation"})},removeExceedingColumns:function(e){var t,n,i,r=this,o=r.columnNodes.length;if(o>e)for(t=o-e,n=r.rowEl,i=0;t>i;i++)n.last().destroy()},renderItem:function(e,t,n){var i=this;i.configureItem(e),e.render(Ext.get(i.columnNodes[n]),t)},moveItem:function(e,t,n){var i=this,r=i.columnNodes[n],o=r.childNodes[t];r.insertBefore(e.el.dom,o||null)}},0,0,0,0,["layout.checkboxgroup"],0,[Ext.layout.container,"CheckboxGroup"],0),Ext.cmd.derive("Ext.form.CheckboxGroup",Ext.form.FieldContainer,{columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:"x-form-check-group",extraFieldBodyCls:"x-form-checkboxgroup-body",layout:"checkboxgroup",componentCls:"x-form-checkboxgroup",ariaRole:"group",initComponent:function(){var e=this;Ext.form.FieldContainer.prototype.initComponent.call(this),e.initField()},initValue:function(){var e=this,t=e.value;e.originalValue=e.lastValue=t||e.getValue(),t&&e.setValue(t)},onAdd:function(e){var t,n,i,r=this;if(e.isCheckbox)r.mon(e,"change",r.checkChange,r);else if(e.isContainer)for(t=e.items.items,i=0,n=t.length;n>i;i++)r.onAdd(t[i]);Ext.form.FieldContainer.prototype.onAdd.apply(this,arguments)},onRemove:function(e){var t,n,i,r=this;if(e.isCheckbox)r.mun(e,"change",r.checkChange,r);else if(e.isContainer)for(t=e.items.items,i=0,n=t.length;n>i;i++)r.onRemove(t[i]);Ext.form.FieldContainer.prototype.onRemove.apply(this,arguments)},isEqual:function(e,t){var n=Ext.Object.toQueryString;return n(e)===n(t)},getErrors:function(){var e=[];return!this.allowBlank&&Ext.isEmpty(this.getChecked())&&e.push(this.blankText),e},getBoxes:function(e){return this.query("[isCheckbox]"+(e||""))},eachBox:function(e,t){Ext.Array.forEach(this.getBoxes(),e,t||this)},getChecked:function(){return this.getBoxes("[checked]")},isDirty:function(){var e,t=this.getBoxes(),n=t.length;for(e=0;n>e;e++)if(t[e].isDirty())return!0},setReadOnly:function(e){var t,n=this.getBoxes(),i=n.length;for(t=0;i>t;t++)n[t].setReadOnly(e);this.readOnly=e},reset:function(){var e=this,t=e.hasActiveError(),n=e.preventMark;e.preventMark=!0,e.batchChanges(function(){var t,n=e.getBoxes(),i=n.length;for(t=0;i>t;t++)n[t].reset()}),e.preventMark=n,e.unsetActiveError(),t&&e.updateLayout()},resetOriginalValue:function(){var e,t=this,n=t.getBoxes(),i=n.length;for(e=0;i>e;e++)n[e].resetOriginalValue();t.originalValue=t.getValue(),t.checkDirty()},setValue:function(e){var t,n,i,r,o=this,a=o.getBoxes(),s=a.length;return o.batchChanges(function(){for(Ext.suspendLayouts(),t=0;s>t;t++)n=a[t],i=n.getName(),r=!1,e&&(r=Ext.isArray(e[i])?Ext.Array.contains(e[i],n.inputValue):e[i]),n.setValue(r);Ext.resumeLayouts(!0)}),o},getValue:function(){var e,t,n,i,r,o={},a=this.getBoxes(),s=a.length;for(e=0;s>e;e++)t=a[e],n=t.getName(),i=t.inputValue,t.getValue()&&(o.hasOwnProperty(n)?(r=o[n],Ext.isArray(r)||(r=o[n]=[r]),r.push(i)):o[n]=i);return o},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var e,t,n,i=this;return i.disabled?t=!0:(e=i.getErrors(),t=Ext.isEmpty(e),n=i.wasValid,t?i.unsetActiveError():i.setActiveError(e)),t!==n&&(i.wasValid=t,i.fireEvent("validitychange",i,t),i.updateLayout()),t}},0,["checkboxgroup"],["component","box","container","fieldcontainer","checkboxgroup"],{component:!0,box:!0,container:!0,fieldcontainer:!0,checkboxgroup:!0},["widget.checkboxgroup"],[["field",Ext.form.field.Field]],[Ext.form,"CheckboxGroup"],function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid","setError"])}),Ext.cmd.derive("Ext.form.FieldSet",Ext.container.Container,{focusable:!0,checkboxUI:"default",collapsed:!1,toggleOnTitleClick:!0,baseCls:"x-fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:null,autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:!1,beforeDestroy:function(){var e=this,t=e.legend;t&&(delete t.ownerCt,t.destroy(),e.legend=null),Ext.container.Container.prototype.beforeDestroy.call(this)},initComponent:function(){var e=this,t=e.baseCls;e.initFieldAncestor(),Ext.container.Container.prototype.initComponent.call(this),e.layout.managePadding=e.layout.manageOverflow=!1,e.collapsed&&(e.addCls(t+"-collapsed"),e.collapse()),(e.title||e.checkboxToggle||e.collapsible)&&(e.addTitleClasses(),e.legend=Ext.widget(e.createLegendCt())),e.initMonitor()},initRenderData:function(){var e=this,t=Ext.container.Container.prototype.initRenderData.call(this);return t.bodyTargetCls=e.bodyTargetCls,e.protoBody.writeTo(t),delete e.protoBody,t},getState:function(){var e=Ext.container.Container.prototype.getState.call(this);return e=this.addPropertyToState(e,"collapsed")},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return!0},collapsedVertical:function(){return!0},createLegendCt:function(){var e=this,t=[],n={xtype:"container",baseCls:e.baseCls+"-header",layout:"container",ui:e.ui,id:e.id+"-legend",autoEl:"legend",ariaRole:null,ariaLabelledBy:"."+e.baseCls+"-header-text",items:t,ownerCt:e,shrinkWrap:!0,ownerLayout:e.componentLayout};return e.checkboxToggle?t.push(e.createCheckboxCmp()):e.collapsible&&t.push(e.createToggleCmp()),t.push(e.createTitleCmp()),n},createTitleCmp:function(){var e=this,t={xtype:"component",html:e.title,ui:e.ui,cls:e.baseCls+"-header-text",id:e.id+"-legendTitle"};return e.collapsible&&e.toggleOnTitleClick&&(t.listeners={click:{element:"el",scope:e,fn:e.toggle}},t.cls+=" "+e.baseCls+"-header-text-collapsible"),e.titleCmp=Ext.widget(t)},createCheckboxCmp:function(){var e=this,t="-checkbox",n=e.baseCls+"-header"+t;return n+=" "+n+"-"+e.ui,e.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:!0,name:e.checkboxName||e.id+t,cls:n,id:e.id+"-legendChk",ui:e.checkboxUI,checked:!e.collapsed,msgTarget:"none",listeners:{change:e.onCheckChange,scope:e}}),e.checkboxCmp},createToggleCmp:function(){var e=this;return e.toggleCmp=Ext.widget({xtype:"tool",cacheHeight:!1,cls:e.baseCls+"-header-tool-"+e.ui,type:"toggle",handler:e.toggle,id:e.id+"-legendToggle",scope:e}),e.toggleCmp},doRenderLegend:function(e,t){var n,i=t.$comp,r=i.legend;r&&(r.ownerLayout.configureItem(r),n=r.getRenderTree(),Ext.DomHelper.generateMarkup(n,e))},getCollapsed:function(){return this.collapsed?"top":!1},getCollapsedDockedItems:function(){var e=this.legend;return e?[e]:[]},setTitle:function(e){var t=this,n=t.legend;return t.title=e,t.rendered?(n||(t.legend=n=Ext.widget(t.createLegendCt()),t.addTitleClasses(),n.ownerLayout.configureItem(n),n.render(t.el,0)),t.titleCmp.update(e)):n?t.titleCmp.update(e):(t.addTitleClasses(),t.legend=Ext.widget(t.createLegendCt())),t},addTitleClasses:function(){var e=this,t=e.title,n=e.baseCls;t&&e.addCls(n+"-with-title"),(t||e.checkboxToggle||e.collapsible)&&e.addCls(n+"-with-legend")},expand:function(){return this.setExpanded(!0)},collapse:function(){return this.setExpanded(!1)},setExpanded:function(e){var t=this,n=t.checkboxCmp,i=e?"expand":"collapse";return t.rendered&&t.fireEvent("before"+i,t)===!1||(e=!!e,n&&n.setValue(e),e?t.removeCls(t.baseCls+"-collapsed"):t.addCls(t.baseCls+"-collapsed"),t.collapsed=!e,e?delete t.getInherited().collapsed:t.getInherited().collapsed=!0,t.rendered&&(t.updateLayout({isRoot:!1}),t.fireEvent(i,t))),t},getRefItems:function(e){var t=Ext.container.Container.prototype.getRefItems.apply(this,arguments),n=this.legend;return n&&(t.unshift(n),e&&t.unshift.apply(t,n.getRefItems(!0))),t},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(e){this.bodyTargetCls=e},finishRender:function(){var e=this.legend;Ext.container.Container.prototype.finishRender.call(this),e&&e.finishRender()},getProtoBody:function(){var e=this,t=e.protoBody;return t||(e.protoBody=t=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:!0})),t},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(e){var t,n=this,i=n.getProtoBody(),r=n.padding;void 0!==r&&(Ext.isIE8&&(r=n.parseBox(r),t=Ext.Element.parseBox(0),t.top=r.top,r.top=0,i.setStyle("padding",n.unitizeBox(t))),e.setStyle("padding",n.unitizeBox(r)))},onCheckChange:function(e,t){this.setExpanded(t)},setupRenderTpl:function(e){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments),e.renderLegend=this.doRenderLegend}}},0,["fieldset"],["component","box","container","fieldset"],{component:!0,box:!0,container:!0,fieldset:!0},["widget.fieldset"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldSet"],0),Ext.cmd.derive("Ext.form.Label",Ext.Component,{autoEl:"label",maskOnDisable:!1,getElConfig:function(){var e=this;return e.html=e.text?Ext.util.Format.htmlEncode(e.text):e.html||"",Ext.apply(Ext.Component.prototype.getElConfig.call(this),{htmlFor:e.forId||""})},setText:function(e,t){var n=this;return t=t!==!1,t?(n.text=e,delete n.html):(n.html=e,delete n.text),n.rendered&&(n.el.dom.innerHTML=t!==!1?Ext.util.Format.htmlEncode(e):e,n.updateLayout()),n}},0,["label"],["component","box","label"],{component:!0,box:!0,label:!0},["widget.label"],0,[Ext.form,"Label"],0),Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",ariaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var e=this;e.frame&&(e.border=!1),e.initFieldAncestor(),Ext.panel.Panel.prototype.initComponent.call(this),e.relayEvents(e.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]),e.pollForChanges&&e.startPolling(e.pollInterval||500)},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this),this.initMonitor(),this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments),this.form.initialize()},createForm:function(){for(var e,t={},n=this.basicFormConfigs,i=n.length,r=0;i>r;++r)e=n[r],t[e]=this[e];return new Ext.form.Basic(this,t)},getForm:function(){return this.form},loadRecord:function(e){return this.getForm().loadRecord(e)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(e){return this.getForm().updateRecord(e)},getValues:function(e,t,n,i){return this.getForm().getValues(e,t,n,i)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling(),this.form.destroy(),Ext.panel.Panel.prototype.beforeDestroy.call(this)},load:function(e){this.form.load(e)},submit:function(e){this.form.submit(e)},startPolling:function(e){this.stopPolling();var t=new Ext.util.TaskRunner(e);t.start({interval:0,run:this.checkChange,scope:this}),this.pollTask=t},stopPolling:function(){var e=this.pollTask;e&&(e.stopAll(),delete this.pollTask)},checkChange:function(){var e,t=this.form.getFields().items,n=t.length;for(e=0;n>e;e++)t[e].checkChange()}},0,["form"],["component","box","container","panel","form"],{component:!0,box:!0,container:!0,panel:!0,form:!0},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0),Ext.cmd.derive("Ext.form.RadioManager",Ext.util.MixedCollection,{singleton:!0,getByName:function(e,t){return this.filterBy(function(n){return n.name===e&&n.getFormId()===t})},getWithValue:function(e,t,n){return this.filterBy(function(i){return i.name===e&&i.inputValue==t&&i.getFormId()===n})},getChecked:function(e,t){return this.findBy(function(n){return n.name===e&&n.checked&&n.getFormId()===t})}},0,0,0,0,0,0,[Ext.form,"RadioManager"],0),Ext.cmd.derive("Ext.form.field.Radio",Ext.form.field.Checkbox,{alternateClassName:"Ext.form.Radio",isRadio:!0,inputType:"radio",ariaRole:"radio",tabIndex:0,formId:null,getGroupValue:function(){var e=this.getManager().getChecked(this.name,this.getFormId());return e?e.inputValue:null},onBoxClick:function(){var e=this;e.disabled||e.readOnly||this.setValue(!0)},onRemoved:function(){Ext.form.field.Checkbox.prototype.onRemoved.apply(this,arguments),this.formId=null},setValue:function(e){var t,n=this;return Ext.isBoolean(e)?Ext.form.field.Checkbox.prototype.setValue.apply(this,arguments):(t=n.getManager().getWithValue(n.name,e,n.getFormId()).getAt(0),t&&t.setValue(!0)),n},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){var e=Ext.form.field.Checkbox.prototype.getModelData.apply(this,arguments);return e&&(e[this.getName()]=this.getSubmitValue()),e},onChange:function(e){var t,n,i,r,o=this;if(Ext.form.field.Checkbox.prototype.onChange.apply(this,arguments),e)for(r=o.getManager().getByName(o.name,o.getFormId()).items,n=r.length,t=0;n>t;t++)i=r[t],i!==o&&i.setValue(!1)},getManager:function(){return Ext.form.RadioManager}},0,["radiofield","radio"],["component","box","field","checkboxfield","checkbox","radiofield","radio"],{component:!0,box:!0,field:!0,checkboxfield:!0,checkbox:!0,radiofield:!0,radio:!0},["widget.radio","widget.radiofield"],0,[Ext.form.field,"Radio",Ext.form,"Radio"],0),Ext.cmd.derive("Ext.form.RadioGroup",Ext.form.CheckboxGroup,{allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:"x-form-radio-group",ariaRole:"radiogroup",getBoxes:function(e,t){return(t||this).query("[isRadio]"+(e||""))},checkChange:function(){var e=this.getValue(),t=Ext.Object.getKeys(e)[0];Ext.isArray(e[t])||Ext.form.CheckboxGroup.prototype.checkChange.apply(this,arguments)},setValue:function(e){var t,n,i,r,o,a,s;if(Ext.isObject(e)){Ext.suspendLayouts(),n=this.items.first(),i=n?n.getFormId():null;for(s in e)for(t=e[s],r=Ext.form.RadioManager.getWithValue(s,t,i).items,a=r.length,o=0;a>o;++o)r[o].setValue(!0);Ext.resumeLayouts(!0)}return this},privates:{getFocusables:function(){return this.getBoxes()},initDefaultFocusable:function(e){var t,n,i=this;return t=i.getChecked(),n=t.length?t[0]:i.findNextFocusableChild(null,!0,null,e),n&&i.activateFocusable(n),n},onFocusableContainerFocusLeave:function(){this.clearFocusables(),this.initDefaultFocusable()},doFocusableChildAdd:function(e){var t,n,i,r=this,o=r.mixins.focusablecontainer;for(t=e.isContainer?r.getBoxes("",e):[e],n=0,i=t.length;i>n;n++)o.doFocusableChildAdd.call(r,t[n])},doFocusableChildRemove:function(e){var t,n,i,r=this,o=r.mixins.focusablecontainer;for(t=e.isContainer?r.getBoxes("",e):[e],n=0,i=t.length;i>n;n++)o.doFocusableChildRemove.call(r,t[n])},focusChild:function(e,t,n){var i=this.mixins.focusablecontainer.focusChild.apply(this,arguments);n.ctrlKey||i.setValue(!0)}}},0,["radiogroup"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup"],{component:!0,box:!0,container:!0,fieldcontainer:!0,checkboxgroup:!0,radiogroup:!0},["widget.radiogroup"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.form,"RadioGroup"],0),Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Text,{alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},isPickerField:!0,matchFieldWidth:!0,pickerAlign:"tl-bl?",openCls:"x-pickerfield-open",isExpanded:!1,editable:!0,applyTriggers:function(e){var t=this,n=e.picker;return n.cls||(n.cls=t.triggerCls),Ext.form.field.Text.prototype.applyTriggers.call(this,e)},initEvents:function(){var e=this;Ext.form.field.Text.prototype.initEvents.call(this),e.keyNav=new Ext.util.KeyNav(e.inputEl,{down:e.onDownArrow,esc:{handler:e.onEsc,scope:e,defaultEventAction:!1},scope:e,forceKeyDown:!0}),e.editable||e.mon(e.inputEl,"click",e.onTriggerClick,e),Ext.isGecko&&e.inputEl.dom.setAttribute("autocomplete","off")},onEsc:function(e){Ext.isIE&&e.preventDefault(),this.isExpanded&&(this.collapse(),e.stopEvent())},onDownArrow:function(e){this.isExpanded||(e.stopEvent(),this.onTriggerClick())},expand:function(){var e,t,n,i,r=this;!r.rendered||r.isExpanded||r.isDestroyed||(e=r.bodyEl,t=r.getPicker(),n=Ext.getDoc(),i=r.collapseIf,t.setMaxHeight(t.initialConfig.maxHeight),r.matchFieldWidth&&(t.width=r.bodyEl.getWidth()),t.show(),r.isExpanded=!0,r.alignPicker(),e.addCls(r.openCls),r.hideListeners=n.on({mousewheel:r.collapseIf,touchstart:r.collapseIf,scope:r,delegated:!1,destroyable:!0}),Ext.on("resize",r.alignPicker,r,{buffer:1}),r.fireEvent("expand",r),r.onExpand())},onExpand:Ext.emptyFn,alignPicker:function(){if(!this.isDestroyed){var e=this.getPicker();e.isVisible()&&e.isFloating()&&this.doAlign()}},doAlign:function(){var e,t=this,n=t.picker,i="-above";t.picker.alignTo(t.triggerWrap,t.pickerAlign,t.pickerOffset),e=n.el.getY()<t.inputEl.getY(),t.bodyEl[e?"addCls":"removeCls"](t.openCls+i),n[e?"addCls":"removeCls"](n.baseCls+i)},collapse:function(){var e=this;if(e.isExpanded&&!e.isDestroyed&&!e.destroying){var t=e.openCls,n=e.picker,i="-above";n.hide(),e.isExpanded=!1,e.bodyEl.removeCls([t,t+i]),n.el.removeCls(n.baseCls+i),e.hideListeners.destroy(),Ext.un("resize",e.alignPicker,e),e.fireEvent("collapse",e),e.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(e){var t=this;t.isDestroyed||e.within(t.bodyEl,!1,!0)||t.owns(e.target)||Ext.fly(e.target).isFocusable()||t.collapse()},getPicker:function(){var e=this,t=e.picker;return t||(e.creatingPicker=!0,e.picker=t=e.createPicker(),t.ownerCmp=e,delete e.creatingPicker),e.picker},onFocusLeave:function(e){var t=this;t.collapse(),Ext.form.field.Text.prototype.onFocusLeave.call(this,e)},getRefItems:function(){var e=[];return this.picker&&(e[0]=this.picker),e},createPicker:Ext.emptyFn,onTriggerClick:function(){var e=this;e.readOnly||e.disabled||(e.isExpanded?e.collapse():e.expand())},beforeDestroy:function(){var e=this,t=e.picker;Ext.form.field.Text.prototype.beforeDestroy.call(this),Ext.un("resize",e.alignPicker,e),Ext.destroy(e.keyNav,t),t&&(e.picker=t.pickerField=null)}},0,["pickerfield"],["component","box","field","textfield","pickerfield"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0),Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.view.NavigationModel,{navigateOnSpace:!0,initKeyNav:function(e){var t=this,n=e.pickerField;return t.keyNav||(Ext.view.NavigationModel.prototype.initKeyNav.call(this,e),t.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:t.onKeyEsc,scope:t})),n?n.rendered?void(t.fieldKeyNav=new Ext.util.KeyNav({disabled:!0,target:n.inputEl,forceKeyDown:!0,up:t.onKeyUp,down:t.onKeyDown,right:t.onKeyRight,left:t.onKeyLeft,pageDown:t.onKeyPageDown,pageUp:t.onKeyPageUp,home:t.onKeyHome,end:t.onKeyEnd,tab:t.onKeyTab,space:t.onKeySpace,enter:t.onKeyEnter,A:{ctrl:!0,handler:t.onSelectAllKeyPress},scope:t})):void n.on("render",Ext.Function.bind(t.initKeyNav,t,[e],0),t,{single:!0}):void 0},processViewEvent:function(e,t,n,i,r){return r.within(e.listWrap)?r:r.getKey()===r.ESC?(Ext.fly(r.target).isInputField()&&(r.target=r.target.parentNode),r):void 0},enable:function(){this.fieldKeyNav.enable(),Ext.view.NavigationModel.prototype.enable.call(this)},disable:function(){this.fieldKeyNav.disable(),Ext.view.NavigationModel.prototype.disable.call(this)},onItemMouseDown:function(e,t,n,i,r){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,e,t,n,i,r),r.preventDefault()},onKeyUp:function(){var e=this,t=e.view,n=t.all,i=t.highlightedItem,r=i?t.indexOf(i):-1,o=r>0?r-1:n.getCount()-1;e.setPosition(o)},onKeyDown:function(){var e=this,t=e.view,n=t.all,i=t.highlightedItem,r=i?t.indexOf(i):-1,o=r<n.getCount()-1?r+1:0;e.setPosition(o)},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(e){var t=this.view,n=t.pickerField;return t.isVisible()&&(n.selectOnTab&&this.selectHighlighted(e),n.collapse&&n.collapse()),!0},onKeyEnter:function(e){var t=this.view,n=t.getSelectionModel(),i=t.pickerField,r=n.getCount();e.stopEvent(),this.selectHighlighted(e),!i.multiSelect&&r===n.getCount()&&i.collapse&&i.collapse()},onKeySpace:function(){return this.navigateOnSpace&&Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments),!0},onKeyEsc:function(){this.view.pickerField&&this.view.pickerField.collapse()},focusItem:function(e){var t=this,n=t.view;"number"==typeof e&&(e=n.all.item(e)),e&&(e=e.dom,n.highlightItem(e),n.getScrollable().scrollIntoView(e,!1))},selectHighlighted:function(e){var t,n=this,i=n.view,r=i.getSelectionModel(),o=n.recordIndex;i.all.getCount()&&(t=n.getRecord(),t&&(e.getKey()!==e.ENTER&&r.isSelected(t)||(r.selectWithEvent(t,e),i.store.data.contains(t)||n.setPosition(Math.min(o,i.store.getCount()-1)))))},destroy:function(){Ext.destroy(this.fieldKeyNav),Ext.view.NavigationModel.prototype.destroy.call(this)}},0,0,0,0,["view.navigation.boundlist"],0,[Ext.view,"BoundListKeyNav"],0),Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(e){var t=this,n=t.owner,i=n.pagingToolbar;t.scrollPos=n.listWrap.getScroll(),Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments),n.floating&&(e.savedXY=n.getXY(),n.setXY([0,-9999])),i&&(e.toolbarContext=e.context.getCmp(i)),e.listContext=e.getEl("listWrap")},beginLayoutCycle:function(e){var t=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments),e.heightModel.auto&&(t.el.setHeight("auto"),t.listWrap.setHeight("auto"))},getLayoutItems:function(){var e=this.owner.pagingToolbar;return e?[e]:[]},isValidParent:function(){return!0},finishedLayout:function(e){var t=this,n=e.savedXY,i=t.owner,r=i.listWrap,o=t.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments),n&&t.owner.setXY(n),r.setScrollLeft(o.left),r.setScrollTop(o.top)},measureContentWidth:function(){return this.owner.listWrap.getWidth()},measureContentHeight:function(){return this.owner.listWrap.getHeight()},publishInnerHeight:function(e,t){var n=e.toolbarContext,i=0;n&&(i=n.getProp("height")),void 0===i?this.done=!1:e.listContext.setHeight(t-e.getFrameInfo().height-i)},calculateOwnerHeightFromContentHeight:function(e){var t=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),n=e.toolbarContext;return n&&(t+=n.getProp("height")),t}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0),Ext.cmd.derive("Ext.toolbar.Item",Ext.Component,{alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn},0,["tbitem"],["component","box","tbitem"],{component:!0,box:!0,tbitem:!0},["widget.tbitem"],0,[Ext.toolbar,"Item",Ext.Toolbar,"Item"],0),Ext.cmd.derive("Ext.toolbar.TextItem",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.TextItem",text:"",baseCls:"x-toolbar-text",ariaRole:null,beforeRender:function(){var e=this.text;Ext.toolbar.Item.prototype.beforeRender.call(this),e&&(this.html=e)},setText:function(e){this.update(e)}},0,["tbtext"],["component","box","tbitem","tbtext"],{component:!0,box:!0,tbitem:!0,tbtext:!0},["widget.tbtext"],0,[Ext.toolbar,"TextItem",Ext.Toolbar,"TextItem"],0),Ext.define("BP.overrides.toolbar.TextItem",{override:"Ext.toolbar.TextItem",setText:function(e){var t,n=this;return n.textTpl&&(Ext.isObject(e)||(e={text:e}),t=Ext.create("Ext.Template",n.textTpl),e=t.apply(e)),n.text=e,n.rendered&&(n.el.update(e),n.updateLayout()),n}}),Ext.cmd.derive("Ext.form.trigger.Spinner",Ext.form.trigger.Trigger,{cls:"x-form-trigger-spinner",spinnerCls:"x-form-spinner",spinnerUpCls:"x-form-spinner-up",spinnerDownCls:"x-form-spinner-down",focusCls:"x-form-spinner-focus",overCls:"x-form-spinner-over",clickCls:"x-form-spinner-click",focusFieldOnClick:!0,vertical:!0,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){var e=this;e.spinnerEl&&(e.spinnerEl.destroy(),e.spinnerEl=e.upEl=e.downEl=null),Ext.form.trigger.Trigger.prototype.destroy.call(this)},getBodyRenderData:function(){var e=this;return{vertical:e.vertical,upDisabledCls:e.upEnabled?"":e.spinnerUpCls+"-disabled",downDisabledCls:e.downEnabled?"":e.spinnerDownCls+"-disabled",spinnerCls:e.spinnerCls,spinnerUpCls:e.spinnerUpCls,spinnerDownCls:e.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var e=this,t=arguments,n=e.clickRepeater?t[1]:t[0],i=e.field;i.readOnly||i.disabled||(e.upEl.contains(n.target)?Ext.callback(e.upHandler,e.scope,[i,e,n],0,i):e.downEl.contains(n.target)&&Ext.callback(e.downHandler,e.scope,[i,e,n],0,i)),i.inputEl.focus()},onFieldRender:function(){var e,t,n=this,i=n.vertical;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this),e=n.spinnerEl=n.el.select("."+n.spinnerCls,!0),t=e.elements,n.upEl=i?t[0]:t[1],n.downEl=i?t[1]:t[0]},setUpEnabled:function(e){this.upEl[e?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(e){this.downEl[e?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}},0,0,0,0,["trigger.spinner"],0,[Ext.form.trigger,"Spinner"],0),Ext.define("BP.overrides.form.trigger.Spinner",{override:"Ext.form.trigger.Spinner"}),Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Text,{alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:!0,spinDownEnabled:!0,keyNavEnabled:!0,mouseWheelEnabled:!0,repeatTriggerClick:!0,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(e){var t=this,n=e.spinner;return n.upEnabled=t.spinUpEnabled,n.downEnabled=t.spinDownEnabled,Ext.form.field.Text.prototype.applyTriggers.call(this,e)},onRender:function(){var e=this,t=e.getTrigger("spinner");(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this),e.keyNavEnabled&&(e.spinnerKeyNav=new Ext.util.KeyNav(e.inputEl,{scope:e,up:e.spinUp,down:e.spinDown})),e.mouseWheelEnabled&&e.mon(e.bodyEl,"mousewheel",e.onMouseWheel,e),e.spinUpEl=t.upEl,e.spinDownEl=t.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var e=this;e.spinUpEnabled&&!e.disabled&&(e.fireEvent("spin",e,"up"),e.fireEvent("spinup",e),e.onSpinUp())},spinDown:function(){var e=this;e.spinDownEnabled&&!e.disabled&&(e.fireEvent("spin",e,"down"),e.fireEvent("spindown",e),e.onSpinDown())},setSpinUpEnabled:function(e){var t=this,n=t.spinUpEnabled;t.spinUpEnabled=e,n!==e&&t.rendered&&t.getTrigger("spinner").setUpEnabled(e)},setSpinDownEnabled:function(e){var t=this,n=t.spinDownEnabled;t.spinDownEnabled=e,n!==e&&t.rendered&&t.getTrigger("spinner").setDownEnabled(e)},onMouseWheel:function(e){var t,n=this;n.hasFocus&&(t=e.getWheelDelta(),t>0?n.spinUp():0>t&&n.spinDown(),e.stopEvent())},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav"),Ext.form.field.Text.prototype.onDestroy.call(this)}},0,["spinnerfield"],["component","box","field","textfield","spinnerfield"],{component:!0,box:!0,field:!0,textfield:!0,spinnerfield:!0},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],0),Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:!0,allowDecimals:!0,decimalSeparator:null,submitLocaleSeparator:!0,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:!1,initComponent:function(){var e=this;null===e.decimalSeparator&&(e.decimalSeparator=Ext.util.Format.decimalSeparator),Ext.form.field.Spinner.prototype.initComponent.call(this),e.setMinValue(e.minValue),e.setMaxValue(e.maxValue)},setValue:function(e){var t,n,i=this;return i.hasFocus&&(t=i.getBind(),n=t&&t.value,n&&n.syncing&&e===i.value)?i:Ext.form.field.Spinner.prototype.setValue.call(this,e)},getErrors:function(e){e=arguments.length>0?e:this.processRawValue(this.getRawValue());var t,n=this,i=Ext.form.field.Spinner.prototype.getErrors.call(this,e),r=Ext.String.format;return e.length<1?i:(e=(e+"").replace(n.decimalSeparator,"."),isNaN(e)&&i.push(r(n.nanText,e)),t=n.parseValue(e),0===n.minValue&&0>t?i.push(this.negativeText):t<n.minValue&&i.push(r(n.minText,n.minValue)),t>n.maxValue&&i.push(r(n.maxText,n.maxValue)),i)},rawToValue:function(e){var t=this.fixPrecision(this.parseValue(e));return null===t&&(t=e||null),t},valueToRaw:function(e){var t=this,n=t.decimalSeparator;return e=t.parseValue(e),e=t.fixPrecision(e),e=Ext.isNumber(e)?e:parseFloat((e+"").replace(n,".")),e=isNaN(e)?"":(e+"").replace(".",n)},getSubmitValue:function(){var e=this,t=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);return e.submitLocaleSeparator||(t=t.replace(e.decimalSeparator,".")),t},onChange:function(){this.toggleSpinners(),Ext.form.field.Spinner.prototype.onChange.apply(this,arguments)},toggleSpinners:function(){var e,t=this,n=t.getValue(),i=null===n;(t.spinUpEnabled||t.spinUpDisabledByToggle)&&(e=i||n<t.maxValue,t.setSpinUpEnabled(e,!0)),(t.spinDownEnabled||t.spinDownDisabledByToggle)&&(e=i||n>t.minValue,t.setSpinDownEnabled(e,!0))},setMinValue:function(e){var t,n=this;n.minValue=Ext.Number.from(e,Number.NEGATIVE_INFINITY),n.toggleSpinners(),n.disableKeyFilter!==!0&&(t=n.baseChars+"",n.allowExponential?t+=n.decimalSeparator+"e+-":(n.allowDecimals&&(t+=n.decimalSeparator),n.minValue<0&&(t+="-")),t=Ext.String.escapeRegex(t),n.maskRe=RegExp("["+t+"]"),n.autoStripChars&&(n.stripCharsRe=RegExp("[^"+t+"]","gi")))},setMaxValue:function(e){this.maxValue=Ext.Number.from(e,Number.MAX_VALUE),this.toggleSpinners()},parseValue:function(e){return e=parseFloat((e+"").replace(this.decimalSeparator,".")),isNaN(e)?null:e},fixPrecision:function(e){var t=this,n=isNaN(e),i=t.decimalPrecision;return n||!e?n?"":e:((!t.allowDecimals||0>=i)&&(i=0),parseFloat(Ext.Number.toFixed(parseFloat(e),i)))},onBlur:function(e){var t=this,n=t.rawToValue(t.getRawValue());Ext.isEmpty(n)||t.setValue(n),Ext.form.field.Spinner.prototype.onBlur.call(this,e)},setSpinUpEnabled:function(e,t){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments),t?this.spinUpDisabledByToggle=!e:delete this.spinUpDisabledByToggle},onSpinUp:function(){var e=this;e.readOnly||e.setSpinValue(Ext.Number.constrain(e.getValue()+e.step,e.minValue,e.maxValue))},setSpinDownEnabled:function(e,t){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments),t?this.spinDownDisabledByToggle=!e:delete this.spinDownDisabledByToggle;
},onSpinDown:function(){var e=this;e.readOnly||e.setSpinValue(Ext.Number.constrain(e.getValue()-e.step,e.minValue,e.maxValue))},setSpinValue:function(e){var t=this;t.enforceMaxLength&&(""+t.fixPrecision(e)).length>t.maxLength||t.setValue(e)}},0,["numberfield"],["component","box","field","textfield","spinnerfield","numberfield"],{component:!0,box:!0,field:!0,textfield:!0,spinnerfield:!0,numberfield:!0},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0),Ext.define("BP.overrides.form.field.Number",{override:"Ext.form.field.Number"}),Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:!1,prependButtons:!1,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:"store",getPagingItems:function(){var e=this,t={scope:e,blur:e.onPagingBlur};return t[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=e.onPagingKeyDown,[{itemId:"first",tooltip:e.firstText,overflowText:e.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:e.moveFirst,scope:e},{itemId:"prev",tooltip:e.prevText,overflowText:e.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:e.movePrevious,scope:e},"-",e.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:"x-tbar-page-number",allowDecimals:!1,minValue:1,hideTrigger:!0,enableKeyEvents:!0,keyNavEnabled:!1,selectOnFocus:!0,submitValue:!1,isFormField:!1,width:e.inputItemWidth,margin:"-1 2 3 2",listeners:t},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(e.afterPageText,1)},"-",{itemId:"next",tooltip:e.nextText,overflowText:e.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:e.moveNext,scope:e},{itemId:"last",tooltip:e.lastText,overflowText:e.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:e.moveLast,scope:e},"-",{itemId:"refresh",tooltip:e.refreshText,overflowText:e.refreshText,iconCls:"x-tbar-loading",disabled:e.store.isLoading(),handler:e.doRefresh,scope:e}]},initComponent:function(){var e,t=this,n=t.items||t.buttons||[];t.bindStore(t.store||"ext-empty-store",!0),e=t.getPagingItems(),t.prependButtons?t.items=n.concat(e):t.items=e.concat(n),delete t.buttons,t.displayInfo&&(t.items.push("->"),t.items.push({xtype:"tbtext",itemId:"displayItem"})),Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments),this.updateBarInfo()},updateBarInfo:function(){var e=this;e.store.isLoading()||(e.calledInternal=!0,e.onLoad(),e.calledInternal=!1)},updateInfo:function(){var e,t,n=this,i=n.child("#displayItem"),r=n.store,o=n.getPageData();i&&(e=r.getCount(),t=0===e?n.emptyMsg:Ext.String.format(n.displayMsg,o.fromRecord,o.toRecord,o.total),i.setText(t))},onLoad:function(){var e,t,n,i,r,o,a,s=this;if(r=s.store.getCount(),o=0===r)t=0,n=0,i=Ext.String.format(s.afterPageText,0);else{if(e=s.getPageData(),t=e.currentPage,n=e.pageCount,t>n)return void(n>0?s.store.loadPage(n):s.getInputItem().reset());i=Ext.String.format(s.afterPageText,isNaN(n)?1:n)}Ext.suspendLayouts(),a=s.child("#afterTextItem"),a&&a.setText(i),a=s.getInputItem(),a&&a.setDisabled(o).setValue(t),s.setChildDisabled("#first",1===t||o),s.setChildDisabled("#prev",1===t||o),s.setChildDisabled("#next",t===n||o),s.setChildDisabled("#last",t===n||o),s.setChildDisabled("#refresh",!1),s.updateInfo(),Ext.resumeLayouts(!0),s.calledInternal||s.fireEvent("change",s,e||s.emptyPageData)},setChildDisabled:function(e,t){var n=this.child(e);n&&n.setDisabled(t)},getPageData:function(){var e=this.store,t=e.getTotalCount();return{total:t,currentPage:e.currentPage,pageCount:Math.ceil(t/e.pageSize),fromRecord:(e.currentPage-1)*e.pageSize+1,toRecord:Math.min(e.currentPage*e.pageSize,t)}},onLoadError:function(){this.setChildDisabled("#refresh",!1)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(e){var t,n=this.getInputItem(),i=!1;return n&&(t=n.getValue(),i=parseInt(t,10),!t||isNaN(i))?(n.setValue(e.currentPage),!1):i},onPagingBlur:function(){var e,t=this.getInputItem();t&&(e=this.getPageData().currentPage,t.setValue(e))},onPagingKeyDown:function(e,t){this.processKeyEvent(e,t)},processKeyEvent:function(e,t){var n,i=this,r=t.getKey(),o=i.getPageData(),a=t.shiftKey?10:1;r===t.RETURN?(t.stopEvent(),n=i.readPageFromInput(o),n!==!1&&(n=Math.min(Math.max(1,n),o.pageCount),n!==o.currentPage&&i.fireEvent("beforechange",i,n)!==!1&&i.store.loadPage(n))):r===t.HOME||r===t.END?(t.stopEvent(),n=r===t.HOME?1:o.pageCount,e.setValue(n)):(r===t.UP||r===t.PAGE_UP||r===t.DOWN||r===t.PAGE_DOWN)&&(t.stopEvent(),n=i.readPageFromInput(o),n&&((r===t.DOWN||r===t.PAGE_DOWN)&&(a*=-1),n+=a,n>=1&&n<=o.pageCount&&e.setValue(n)))},beforeLoad:function(){this.setChildDisabled("#refresh",!0)},moveFirst:function(){return this.fireEvent("beforechange",this,1)!==!1?(this.store.loadPage(1),!0):!1},movePrevious:function(){var e=this,t=e.store,n=t.currentPage-1;return n>0&&e.fireEvent("beforechange",e,n)!==!1?(t.previousPage(),!0):!1},moveNext:function(){var e=this,t=e.store,n=e.getPageData().pageCount,i=t.currentPage+1;return n>=i&&e.fireEvent("beforechange",e,i)!==!1?(t.nextPage(),!0):!1},moveLast:function(){var e=this,t=e.getPageData().pageCount;return e.fireEvent("beforechange",e,t)!==!1?(e.store.loadPage(t),!0):!1},doRefresh:function(){var e=this,t=e.store,n=t.currentPage;return e.fireEvent("beforechange",e,n)!==!1?(t.loadPage(n),!0):!1},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){this.rendered&&this.updateBarInfo()},onDestroy:function(){this.bindStore(null),Ext.toolbar.Toolbar.prototype.onDestroy.call(this)}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:!0,box:!0,container:!0,toolbar:!0,pagingtoolbar:!0},["widget.pagingtoolbar"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0),Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:"x-boundlist",itemCls:"x-boundlist-item",listItemCls:"",shadow:!1,trackOver:!0,preserveScrollOnRefresh:!0,enableInitialSelection:!1,refreshSelmodelOnRefresh:!0,componentLayout:"boundlist",navigationModel:"boundlist",scrollable:!0,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap" role="presentation" class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="x-list-plain">',"</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:!0}],focusOnToFront:!1,initComponent:function(){var e=this,t=e.baseCls,n=e.itemCls;e.selectedItemCls=t+"-selected",e.trackOver&&(e.overItemCls=t+"-item-over"),e.itemSelector="."+n,e.scrollerSelector="ul.x-list-plain",e.floating&&e.addCls(t+"-floating"),e.tpl?e.tpl.isTemplate||(e.tpl=new Ext.XTemplate(e.tpl)):e.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+n+'">'+e.getInnerTpl(e.displayField)+"</li>","</tpl>"),e.pageSize&&(e.pagingToolbar=e.createPagingToolbar()),Ext.view.View.prototype.initComponent.call(this)},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var e=Ext.view.View.prototype.getRefItems.call(this),t=this.pagingToolbar;return t&&e.push(t),e},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:!1,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var e=this,t=e.tpl;t.field=e.pickerField,t.store=e.store,Ext.view.View.prototype.refresh.call(this),t.field=t.store=null},bindStore:function(e,t){var n=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments),n&&n.bindStore(e,t)},getInnerTpl:function(e){return"{"+e+"}"},onShow:function(){Ext.view.View.prototype.onShow.call(this),Ext.Element.getActiveElement()!==this.pickerField.inputEl.dom&&this.focus()},onHide:function(){var e=this.pickerField.inputEl.dom;Ext.Element.getActiveElement()===e||Ext.EventObject&&"touch"===Ext.EventObject.pointerType||e.focus(),Ext.view.View.prototype.onHide.apply(this,arguments)},afterComponentLayout:function(){var e=this.pickerField;Ext.view.View.prototype.afterComponentLayout.apply(this,arguments),e&&e.alignPicker&&e.alignPicker()},onItemClick:function(e){var t=this,n=t.pickerField,i=n.valueField,r=t.getSelectionModel().getSelection();!n.multiSelect&&r.length&&(r=r[0],r&&n.isEqual(e.get(i),r.get(i))&&n.collapse&&n.collapse())},onContainerClick:function(e){return this.pagingToolbar&&this.pagingToolbar.rendered&&e.within(this.pagingToolbar.el)?!1:void 0},onDestroy:function(){Ext.view.View.prototype.onDestroy.call(this),Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var e=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments),e&&e.finishRender()}}},0,["boundlist"],["component","box","dataview","boundlist"],{component:!0,box:!0,dataview:!0,boundlist:!0},["widget.boundlist"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0),Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:!1,delimiter:", ",displayField:"text"},publishes:["selection"],twoWayBindable:["selection"],triggerCls:"x-form-arrow-trigger",hiddenName:"",collapseOnSelect:!1,hiddenDataCls:"x-hidden-display x-form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:!0},filtered:!1,afterRender:function(){var e=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments),e.setHiddenValue(e.value)},multiSelect:!1,triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:!0,autoLoadOnValue:!1,pageSize:0,anyMatch:!1,caseSensitive:!1,autoSelect:!0,typeAhead:!1,typeAheadDelay:250,selectOnTab:!0,forceSelection:!1,growToLongestValue:!0,clearFilterOnBlur:!0,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:!0,clearValueOnEmpty:!0,getGrowWidth:function(){var e,t,n,i,r,o,a,s=this,l=s.inputEl.dom.value;if(s.growToLongestValue)for(e=s.displayField,t=s.store,n=t.data.length,i=0,r=0;n>r;r++)o=t.getAt(r).data[e],a=o.length,a>i&&(i=a,l=o);return l},initComponent:function(){var e,t,n=this,i=Ext.isDefined,r=n.store,o=n.transform;"pinList"in n&&(n.collapseOnSelect=!n.pinList),o&&(e=Ext.getDom(o),e&&(n.store||(r=Ext.Array.map(Ext.Array.from(e.options),function(e){return[e.value,e.text]})),n.name||(n.name=e.name),"value"in n||(n.value=e.value))),n.bindStore(r||"ext-empty-store",!0,!0),t="local"===n.queryMode,i(n.queryDelay)||(n.queryDelay=t?10:500),i(n.minChars)||(n.minChars=t?0:4),Ext.form.field.Picker.prototype.initComponent.call(this),n.doQueryTask=new Ext.util.DelayedTask(n.doRawQuery,n),e&&(n.transformInPlace&&(n.render(e.parentNode,e),delete n.renderTo),Ext.removeNode(e))},getSubTplMarkup:function(e){var t=this,n="",i=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);return t.hiddenName&&(n='<div id="'+e.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+t.hiddenDataCls+'" role="presentation"></div>'),n+i},applyDisplayTpl:function(e){var t=this;return e?e.isTemplate||(e=new Ext.XTemplate(e)):e=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+t.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+t.getDelimiter()+"</tpl></tpl>"),e},applyFilters:function(e,t){var n=this;return null===e||e.isFilterCollection?e:(e&&(t||(t=this.getFilters()),t.beginUpdate(),t.splice(0,t.length,e),t.each(function(e){e.ownerId=n.id}),t.endUpdate()),t)},applyValueNotFoundText:function(e){var t=this,n=t.valueNotFoundRecord||(t.valueNotFoundRecord=new Ext.data.Model);return n.set(t.displayField,e),t.valueField&&t.displayField!==t.valueField&&n.set(t.valueField,e),e},getFilters:function(e){var t=this.filters;return t||e===!1||(t=new Ext.util.FilterCollection,this.setFilters(t)),t},updateFilters:function(e,t){var n=this;t&&t.un("endupdate","onEndUpdateFilters",n),e&&e.on("endupdate","onEndUpdateFilters",n),n.onEndUpdateFilters(e)},onEndUpdateFilters:function(e){var t,n,i=this,r=i.filtered,o=!!e&&e.length>0;(r||o)&&(i.filtered=o,t=[],n=i.store.getFilters(),n.each(function(n){n.ownerId!==i.id||e.contains(n)||t.push(n)}),n.splice(0,t,e.items))},completeEdit:function(e){var t=this,n=t.queryFilter;Ext.form.field.Picker.prototype.completeEdit.call(this,e),t.doQueryTask.cancel(),t.assertValue(),n&&"local"===t.queryMode&&t.clearFilterOnBlur&&t.getStore().getFilters().remove(n)},onFocus:function(e){var t=this;Ext.form.field.Picker.prototype.onFocus.call(this,e),"all"!==t.triggerAction&&t.queryFilter&&"local"===t.queryMode&&t.clearFilterOnBlur&&(delete t.lastQuery,t.doRawQuery())},assertValue:function(){var e,t=this,n=t.getRawValue(),i=t.getDisplayValue(),r=t.lastSelectedRecords;t.forceSelection&&(t.multiSelect?n!==i&&t.setRawValue(i):(e=t.findRecordByDisplay(n),e?t.getDisplayValue([t.getRecordDisplayData(e)])!==i&&t.select(e,!0):r?t.setValue(r):t.setRawValue(""))),t.collapse()},onTypeAhead:function(){var e,t,n,i=this,r=i.displayField,o=i.store.findRecord(r,i.getRawValue()),a=i.getPicker();o&&(e=o.get(r),t=e.length,n=i.getRawValue().length,a.highlightItem(a.getNode(o)),0!==n&&n!==t&&(i.setRawValue(e),i.selectText(n,e.length)))},resetToDefault:Ext.emptyFn,beforeReset:function(){var e=this.queryFilter;Ext.form.field.Picker.prototype.beforeReset.call(this),e&&this.getStore().getFilters().remove(e)},onUnbindStore:function(){var e=this,t=e.picker,n=e.queryFilter;n&&!e.store.isDestroyed&&(e.changingFilters=!0,e.getStore().removeFilter(n,!0),e.changingFilters=!1),e.pickerSelectionModel.destroy(),t&&t.bindStore(null)},onBindStore:function(e,t){var n,i,r=this,o=r.picker;e&&(e.autoCreated&&(r.queryMode="local",r.valueField=r.displayField="field1",e.expanded||(r.displayField="field2"),r.setDisplayTpl(null)),Ext.isDefined(r.valueField)||(r.valueField=r.displayField),n={byValue:{rootProperty:"data",unique:!1}},n.byValue.property=r.valueField,e.setExtraKeys(n),r.displayField===r.valueField?e.byText=e.byValue:(n.byText={rootProperty:"data",unique:!1},n.byText.property=r.displayField,e.setExtraKeys(n)),i={rootProperty:"data",extraKeys:{byInternalId:{property:"internalId"},byValue:{property:r.valueField,rootProperty:"data"}},listeners:{beginupdate:r.onValueCollectionBeginUpdate,endupdate:r.onValueCollectionEndUpdate,scope:r}},r.valueCollection=new Ext.util.Collection(i),r.pickerSelectionModel=new Ext.selection.DataViewModel({mode:r.multiSelect?"SIMPLE":"SINGLE",deselectOnContainerClick:!1,enableInitialSelection:!1,pruneRemoved:!1,selected:r.valueCollection,store:e,listeners:{scope:r,lastselectedchanged:r.updateBindSelection}}),t||r.resetToDefault(),o&&(o.setSelectionModel(r.pickerSelectionModel),o.getStore()!==e&&o.bindStore(e)))},bindStore:function(e,t,n){var i=this,r=i.queryFilter;i.mixins.storeholder.bindStore.call(i,e,n),e=i.getStore(),e&&r&&!t&&e.getFilters().add(r),n||!e||e.isEmptyStore||i.setValueOnData()},getStoreListeners:function(e){if(!e.isEmptyStore){var t=this,n={datachanged:t.onDataChanged,load:t.onLoad,exception:t.onException,update:t.onStoreUpdate,remove:t.checkValueOnChange};return e.getRemoteFilter()||(n.filterchange=t.checkValueOnChange),n}},onDataChanged:function(){this.grow&&this.growToLongestValue&&this.autoSize()},checkValueOnChange:function(){var e=this,t=e.getStore();!e.destroying&&t.isLoaded()&&(e.multiSelect||!e.forceSelection||e.changingFilters||e.findRecordByValue(e.value)||e.setValue(null))},onStoreUpdate:function(){this.updateValue()},onException:function(){this.collapse()},onLoad:function(e,t,n){var i=this,r=!i.valueCollection.byValue.get(i.value);!n||!r||e.lastOptions&&"rawQuery"in e.lastOptions||i.setValueOnData(),i.checkValueOnChange()},setValueOnData:function(){var e=this;e.setValue(e.value),e.isExpanded&&e.getStore().getCount()&&e.doAutoSelect()},doRawQuery:function(){var e=this,t=e.inputEl.dom.value;e.multiSelect&&(t=t.split(e.delimiter).pop()),e.doQuery(t,!1,!0)},doQuery:function(e,t,n){var i=this,r=i.beforeQuery({query:e||"",rawQuery:n,forceAll:t,combo:i,cancel:!1});return r===!1||r.cancel||(i.queryCaching&&r.query===i.lastQuery?i.expand():(i.lastQuery=r.query,"local"===i.queryMode?i.doLocalQuery(r):i.doRemoteQuery(r))),!0},beforeQuery:function(e){var t=this;return t.fireEvent("beforequery",e)===!1?e.cancel=!0:e.cancel||e.query.length<t.minChars&&!e.forceAll&&(e.cancel=!0),e},doLocalQuery:function(e){var t=this,n=e.query,i=t.getStore(),r=t.queryFilter;t.queryFilter=null,t.changingFilters=!0,r&&i.removeFilter(r,!0),n&&(r=t.queryFilter=new Ext.util.Filter({id:t.id+"-filter",anyMatch:t.anyMatch,caseSensitive:t.caseSensitive,root:"data",property:t.displayField,value:t.enableRegEx?RegExp(n):n}),i.addFilter(r,!0)),t.changingFilters=!1,t.store.getCount()||t.getPicker().emptyText?(t.getPicker().refresh(),t.expand()):t.collapse(),t.afterQuery(e)},doRemoteQuery:function(e){var t=this,n=function(){t.isDestroyed||t.afterQuery(e)};t.expand(),t.pageSize?t.loadPage(1,{rawQuery:e.rawQuery,callback:n}):t.store.load({params:t.getParams(e.query),rawQuery:e.rawQuery,callback:n})},afterQuery:function(e){var t=this;t.store.getCount()&&(t.typeAhead&&t.doTypeAhead(),e.rawQuery?t.picker&&!t.picker.getSelectionModel().hasSelection()&&t.doAutoSelect():t.doAutoSelect()),t.checkChange()},loadPage:function(e,t){this.store.loadPage(e,Ext.apply({params:this.getParams(this.lastQuery)},t))},onPageChange:function(e,t){return this.loadPage(t),!1},getParams:function(e){var t={},n=this.queryParam;return n&&(t[n]=e),t},doAutoSelect:function(){var e=this,t=e.picker;t&&e.autoSelect&&e.store.getCount()>0&&t.getNavigationModel().setPosition(e.picker.getSelectionModel().lastSelected||0)},doTypeAhead:function(){var e=this,t=Ext.event.Event;e.typeAheadTask||(e.typeAheadTask=new Ext.util.DelayedTask(e.onTypeAhead,e)),e.lastKey!==t.BACKSPACE&&e.lastKey!==t.DELETE&&e.typeAheadTask.delay(e.typeAheadDelay)},onTriggerClick:function(){var e=this;e.readOnly||e.disabled||(e.isExpanded?e.collapse():"all"===e.triggerAction?e.doQuery(e.allQuery,!0):"last"===e.triggerAction?e.doQuery(e.lastQuery,!0):e.doQuery(e.getRawValue(),!1,!0))},onFieldMutation:function(e){var t=this,n=e.getKey(),i=n===e.BACKSPACE||n===e.DELETE,r=t.inputEl.dom.value,o=r.length;t.readOnly||r===t.lastMutatedValue&&!i||n===e.TAB||(t.lastMutatedValue=r,t.lastKey=n,!o||"keyup"===e.type&&e.isSpecialKey()&&!i?(o||n&&!i||(t.multiSelect||(t.value=null,t.displayTplData=void 0),t.clearValueOnEmpty&&t.valueCollection.removeAll(),t.collapse(),t.queryFilter&&(t.changingFilters=!0,t.store.removeFilter(t.queryFilter,!0),t.changingFilters=!1)),Ext.form.field.Picker.prototype.onFieldMutation.call(this,e)):t.doQueryTask.delay(t.queryDelay))},onDestroy:function(){var e=this;e.doQueryTask.cancel(),e.typeAheadTask&&(e.typeAheadTask.cancel(),e.typeAheadTask=null),e.bindStore(null),e.valueCollection=Ext.destroy(e.valueCollection),Ext.form.field.Picker.prototype.onDestroy.call(this)},onAdded:function(){var e=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments),e.picker&&(e.picker.ownerCt=e.up("[floating]"),e.picker.registerWithOwnerCt())},createPicker:function(){var e,t=this,n=Ext.apply({xtype:"boundlist",pickerField:t,selectionModel:t.pickerSelectionModel,floating:!0,hidden:!0,store:t.getPickerStore(),displayField:t.displayField,preserveScrollOnRefresh:!0,pageSize:t.pageSize,tpl:t.tpl},t.listConfig,t.defaultListConfig);return e=t.picker=Ext.widget(n),t.pageSize&&e.pagingToolbar.on("beforechange",t.onPageChange,t),e.initialConfig.maxHeight||e.on({beforeshow:t.onBeforePickerShow,scope:t}),e.getSelectionModel().on({beforeselect:t.onBeforeSelect,beforedeselect:t.onBeforeDeselect,scope:t}),e.getNavigationModel().navigateOnSpace=!1,e},getPickerStore:function(){return this.store},onBeforePickerShow:function(e){var t=this,n=t.getPosition()[1]-Ext.getBody().getScroll().top,i=Ext.Element.getViewportHeight()-n-t.getHeight();e.maxHeight=Math.max(n,i)-5},onBeforeSelect:function(e,t,n){return this.fireEvent("beforeselect",this,t,n)},onBeforeDeselect:function(e,t,n){return this.fireEvent("beforedeselect",this,t,n)},getSelection:function(){var e=this.getPicker().getSelectionModel(),t=e.getSelection();return t.length?e.getLastSelected():null},updateSelection:function(e){var t,n=this;n.ignoreNextSelection||(n.ignoreNextSelection=!0,t=n.getPicker().getSelectionModel(),e?(t.select(e),n.hasHadSelection=!0):t.deselectAll(),n.ignoreNextSelection=!1)},updateBindSelection:function(e,t){var n=this,i=null;n.ignoreNextSelection||(n.ignoreNextSelection=!0,t.length&&(i=e.getLastSelected(),n.hasHadSelection=!0),n.hasHadSelection&&n.setSelection(i),n.ignoreNextSelection=!1)},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var e=this,t=e.store,n=e.valueCollection.getRange(),i=n[0],r=n.length;e.updateBindSelection(e.pickerSelectionModel,n),e.isSelectionUpdating()||(Ext.suspendLayouts(),e.lastSelection=n,r&&(e.lastSelectedRecords=n),e.updateValue(),r&&(!e.multiSelect&&t.contains(i)||e.collapseOnSelect||!t.getCount())&&(e.updatingValue=!0,e.collapse(),e.updatingValue=!1),Ext.resumeLayouts(!0),r&&!e.suspendCheckChange&&(e.multiSelect||(n=i),e.fireEvent("select",e,n)))},isSelectionUpdating:function(){var e=this.pickerSelectionModel;return e.deselectingDuringSelect||e.refreshing},onExpand:function(){var e=this.getPicker().getNavigationModel();e&&e.enable(),this.doAutoSelect()},onCollapse:function(){var e=this.getPicker().getNavigationModel();e&&e.disable(),this.updatingValue&&this.doQueryTask.cancel()},select:function(e,t){var n,i=this,r=i.picker;e&&e.isModel&&t===!0&&r&&(n=!r.getSelectionModel().isSelected(e)),n||i.suspendEvent("select"),i.setValue(e),i.resumeEvent("select")},findRecord:function(e,t){var n=this.store,i=n.findExact(e,t);return-1!==i?n.getAt(i):!1},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(e){var t=this.store.byValue.get(e),n=!1;return t&&(n=t[0]||t),n},findRecordByDisplay:function(e){var t=this.store.byText.get(e),n=!1;return t&&(n=t[0]||t),n},addValue:function(e){return null!=e?this.doSetValue(e,!0):void 0},setValue:function(e){var t=this;return null!=e?t.doSetValue(e):(t.suspendEvent("select"),t.valueCollection.beginUpdate(),t.pickerSelectionModel.deselectAll(),t.valueCollection.endUpdate(),t.lastSelectedRecords=null,void t.resumeEvent("select"))},setRawValue:function(e){Ext.form.field.Picker.prototype.setRawValue.call(this,e),this.lastMutatedValue=e},doSetValue:function(e,t){var n,i,r,o,a,s,l=this,d=l.getStore(),u=d.getModel(),c=[],h=[],p=l.autoLoadOnValue,f=d.getCount()>0||d.isLoaded(),g=d.hasPendingLoad(),m=p&&!f&&!g,x=l.forceSelection,v=l.pickerSelectionModel,y=l.displayField===l.valueField,E=d.isEmptyStore,b=l.lastSelection;if((g||m||!f||E)&&(e.isModel||(t?l.value=Ext.Array.from(l.value).concat(e):l.value=e,l.setHiddenValue(l.value),l.setRawValue(y?e:"")),m&&!E&&d.load(),!e.isModel||E))return l;for(e=t?Ext.Array.from(l.value).concat(e):Ext.Array.from(e),n=0,i=e.length;i>n;n++)r=e[n],r&&r.isModel||(r=l.findRecordByValue(s=r),r||(r=l.valueCollection.find(l.valueField,s))),r||(x?l.valueNotFoundRecord&&(r=l.valueNotFoundRecord):!r&&e[n]&&(o={},o[l.displayField]=e[n],l.valueField&&l.displayField!==l.valueField&&(o[l.valueField]=e[n]),r=new u(o))),r&&(c.push(r),h.push(r.get(l.valueField)));if(b)if(i=b.length,i===c.length)for(n=0;!a&&i>n;n++)-1===Ext.Array.indexOf(l.lastSelection,c[n])&&(a=!0);else a=!0;else a=c.length;return a?(l.suspendEvent("select"),l.valueCollection.beginUpdate(),c.length?v.select(c,!1):v.deselectAll(),l.valueCollection.endUpdate(),l.resumeEvent("select")):l.updateValue(),l},updateValue:function(){var e,t,n=this,i=n.valueCollection.getRange(),r=i.length,o=[],a=n.displayTplData||(n.displayTplData=[]),s=n.inputEl;for(a.length=0,e=0;r>e;e++)t=i[e],a.push(n.getRecordDisplayData(t)),t!==n.valueNotFoundRecord&&o.push(t.get(n.valueField));n.setHiddenValue(o),n.value=n.multiSelect?o:o[0],Ext.isDefined(n.value)||(n.value=void 0),n.displayTplData=a,s&&n.emptyText&&!Ext.isEmpty(n.value)&&s.removeCls(n.emptyCls),n.setRawValue(n.getDisplayValue()),n.checkChange(),n.applyEmptyText()},setHiddenValue:function(e){var t,n,i,r,o,a,s=this,l=s.hiddenName;if(s.hiddenDataEl&&l){for(e=Ext.Array.from(e),n=s.hiddenDataEl.dom,i=n.childNodes,r=i[0],o=e.length,a=i.length,!r&&o>0&&(s.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:l})),a=1,r=n.firstChild);a>o;)n.removeChild(i[0]),--a;for(;o>a;)n.appendChild(r.cloneNode(!0)),++a;for(t=0;o>t;t++)i[t].value=e[t]}},getDisplayValue:function(e){return e=e||this.displayTplData,this.getDisplayTpl().apply(e)},getRecordDisplayData:function(e){return e.data},getValue:function(){var e=this,t=e.getStore(),n=e.picker,i=e.getRawValue(),r=e.value;return t.isEmptyStore||e.getDisplayValue()===i||(e.displayTplData=void 0,n&&(e.valueCollection.suspendEvents(),n.getSelectionModel().deselectAll(),e.valueCollection.resumeEvents(),e.lastSelection=null),r=t.isLoaded()&&(e.multiSelect||e.forceSelection)?e.value=void 0:e.value=i),e.value=null==r?null:r,e.value},getSubmitValue:function(){var e=this.getValue();return Ext.isEmpty(e)&&(e=""),e},isEqual:function(e,t){var n,i,r=Ext.Array.from;if(e=r(e),t=r(t),i=e.length,i!==t.length)return!1;for(n=0;i>n;n++)if(t[n]!==e[n])return!1;return!0},clearValue:function(){this.setValue(null)},onEditorTab:function(e){var t=this.getPicker().getNavigationModel();this.selectOnTab&&t&&this.isExpanded&&t.selectHighlighted(e)}},0,["combo","combobox"],["component","box","field","textfield","pickerfield","combobox","combo"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0,combobox:!0,combo:!0},["widget.combo","widget.combobox"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0),Ext.cmd.derive("Ext.picker.Month",Ext.Component,{alternateClassName:"Ext.MonthPicker",isMonthPicker:!0,focusable:!0,childEls:["bodyEl","prevEl","nextEl","monthEl","yearEl"],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>',"</div>","</tpl>","</div>",'<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>',"</div>",'<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>',"</div>","</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>',"</div>","</tpl>","</div>",'<div class="x-clear"></div>','<tpl if="showButtons">','<div class="{baseCls}-buttons">{%',"var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;","okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;","okBtn.ownerCt = cancelBtn.ownerCt = me;","Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);","Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);","%}</div>","</tpl>","</div>"],okText:"OK",cancelText:"Cancel",baseCls:"x-monthpicker",showButtons:!0,measureWidth:35,measureMaxHeight:20,smallCls:"x-monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var e=this;e.selectedCls=e.baseCls+"-selected",e.small&&e.addCls(e.smallCls),e.setValue(e.value),e.activeYear=e.getYear((new Date).getFullYear()-4,-4),e.showButtons&&(e.okBtn=new Ext.button.Button({text:e.okText,handler:e.onOkClick,scope:e}),e.cancelBtn=new Ext.button.Button({text:e.cancelText,handler:e.onCancelClick,scope:e})),Ext.Component.prototype.initComponent.call(this)},beforeRender:function(){var e=this,t=0,n=[],i=Ext.Date.getShortMonthName,r=e.monthOffset,o=e.monthMargin,a="";for(e.padding&&!e.width&&e.cacheWidth(),Ext.Component.prototype.beforeRender.call(this);r>t;++t)n.push(i(t),i(t+r));Ext.isDefined(o)&&(a="margin: 0 "+o+"px;"),Ext.apply(e.renderData,{months:n,years:e.getYears(),showButtons:e.showButtons,monthStyle:a})},cacheWidth:function(){var e=this,t=e.parseBox(e.padding),n=Ext.getBody().createChild({cls:e.baseCls+" "+e.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;",html:"&nbsp;"});e.self.prototype.width=n.getWidth()+t.left+t.right,n.destroy()},afterRender:function(){var e=this,t=e.bodyEl;Ext.Component.prototype.afterRender.call(this),e.mon(t,"click",e.onBodyClick,e),e.mon(t,"dblclick",e.onBodyClick,e),e.years=t.select("."+e.baseCls+"-year a"),e.months=t.select("."+e.baseCls+"-month a"),e.backRepeater=new Ext.util.ClickRepeater(e.prevEl,{handler:Ext.Function.bind(e.adjustYear,e,[-e.totalYears])}),e.prevEl.addClsOnOver(e.baseCls+"-yearnav-prev-over"),e.nextRepeater=new Ext.util.ClickRepeater(e.nextEl,{handler:Ext.Function.bind(e.adjustYear,e,[e.totalYears])}),e.nextEl.addClsOnOver(e.baseCls+"-yearnav-next-over"),e.updateBody(),Ext.isDefined(e.monthMargin)||(Ext.picker.Month.prototype.monthMargin=e.calculateMonthMargin())},calculateMonthMargin:function(){for(var e=this,t=e.months,n=t.first(),i=n.getMargin("l");i&&e.getLargest()>e.measureMaxHeight;)--i,t.setStyle("margin","0 "+i+"px");return i},getLargest:function(){var e=0;return this.months.each(function(t){var n=t.getHeight();n>e&&(e=n)}),e},setValue:function(e){var t,n=this,i=n.activeYear;return e?Ext.isDate(e)?n.value=[e.getMonth(),e.getFullYear()]:n.value=[e[0],e[1]]:n.value=[null,null],n.rendered&&(t=n.value[1],null!==t&&(i>t||t>i+n.yearOffset)&&(n.activeYear=t-n.yearOffset+1),n.updateBody()),n},getValue:function(){return this.value},hasSelection:function(){var e=this.value;return null!==e[0]&&null!==e[1]},getYears:function(){for(var e=this,t=e.yearOffset,n=e.activeYear,i=n+t,r=n,o=[];i>r;++r)o.push(r,r+t);return o},updateBody:function(){var e,t,n,i,r,o=this,a=o.years,s=o.months,l=o.getYears(),d=o.selectedCls,u=o.getYear(null),c=o.value[0],h=o.monthOffset;if(o.rendered){for(a.removeCls(d),s.removeCls(d),t=a.elements,i=t.length,n=0;i>n;n++)r=Ext.fly(t[n]),e=l[n],r.dom.innerHTML=e,e===u&&r.addCls(d);null!==c&&(c=h>c?2*c:2*(c-h)+1,s.item(c).addCls(d))}},getYear:function(e,t){var n=this.value[1];return t=t||0,null===n?e:n+t},onBodyClick:function(e,t){var n=this,i="dblclick"===e.type;e.getTarget("."+n.baseCls+"-month")?(e.stopEvent(),n.onMonthClick(t,i)):e.getTarget("."+n.baseCls+"-year")&&(e.stopEvent(),n.onYearClick(t,i))},adjustYear:function(e){"number"!=typeof e&&(e=this.totalYears),this.activeYear+=e,this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(e,t){var n=this;n.value[0]=n.resolveOffset(n.months.indexOf(e),n.monthOffset),n.updateBody(),n.fireEvent("month"+(t?"dbl":"")+"click",n,n.value),n.fireEvent("select",n,n.value)},onYearClick:function(e,t){var n=this;n.value[1]=n.activeYear+n.resolveOffset(n.years.indexOf(e),n.yearOffset),
n.updateBody(),n.fireEvent("year"+(t?"dbl":"")+"click",n,n.value),n.fireEvent("select",n,n.value)},resolveOffset:function(e,t){return e%2===0?e/2:t+Math.floor(e/2)},beforeDestroy:function(){var e=this;e.years=e.months=null,Ext.destroyMembers(e,"backRepeater","nextRepeater","okBtn","cancelBtn"),Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.destroyMembers(this,"okBtn","cancelBtn"),Ext.Component.prototype.onDestroy.call(this)},privates:{finishRenderChildren:function(){var e=this;Ext.Component.prototype.finishRenderChildren.apply(this,arguments),this.showButtons&&(e.okBtn.finishRender(),e.cancelBtn.finishRender())}}},0,["monthpicker"],["component","box","monthpicker"],{component:!0,box:!0,monthpicker:!0},["widget.monthpicker"],0,[Ext.picker,"Month",Ext,"MonthPicker"],0),Ext.cmd.derive("Ext.picker.Date",Ext.Component,{alternateClassName:"Ext.DatePicker",isDatePicker:!0,focusable:!0,childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:!0,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="button" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="button" title="{nextText}"></div>',"</div>",'<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" {%','if (values.$comp.focusable) {out.push("tabindex=\\"0\\"");}','%} cellspacing="0">','<thead><tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr></thead>",'<tbody><tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>',"</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>","</div>",{firstInitial:function(e){return Ext.picker.Date.prototype.getDayInitial(e)},isEndOfWeek:function(e){e--;var t=e%7===0&&0!==e;return t?'</tr><tr role="row">':""},renderTodayBtn:function(e,t){Ext.DomHelper.generateMarkup(e.$comp.todayBtn.getRenderTree(),t)},renderMonthBtn:function(e,t){Ext.DomHelper.generateMarkup(e.$comp.monthBtn.getRenderTree(),t)}}],todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:!0,disableAnim:!1,baseCls:"x-datepicker",longDayFormat:"F d, Y",initHour:12,numDays:42,initComponent:function(){var e=this,t=Ext.Date.clearTime;e.selectedCls=e.baseCls+"-selected",e.disabledCellCls=e.baseCls+"-disabled",e.prevCls=e.baseCls+"-prevday",e.activeCls=e.baseCls+"-active",e.cellCls=e.baseCls+"-cell",e.nextCls=e.baseCls+"-prevday",e.todayCls=e.baseCls+"-today",e.format||(e.format=Ext.Date.defaultFormat),e.dayNames||(e.dayNames=Ext.Date.dayNames),e.dayNames=e.dayNames.slice(e.startDay).concat(e.dayNames.slice(0,e.startDay)),Ext.Component.prototype.initComponent.call(this),e.value=e.value?t(e.value,!0):t(new Date),e.initDisabledDays()},getRefOwner:function(){return this.pickerField||Ext.Component.prototype.getRefOwner.call(this)},getRefItems:function(){var e=[],t=this.monthBtn,n=this.todayBtn;return t&&e.push(t),n&&e.push(n),e},beforeRender:function(){var e=this,t=Array(e.numDays),n=Ext.Date.format(new Date,e.format);e.padding&&!e.width&&e.cacheWidth(),e.monthBtn=new Ext.button.Split({ownerCt:e,ownerLayout:e.getComponentLayout(),text:"",tooltip:e.monthYearText,listeners:{click:e.doShowMonthPicker,arrowclick:e.doShowMonthPicker,scope:e}}),e.showToday&&(e.todayBtn=new Ext.button.Button({ownerCt:e,ownerLayout:e.getComponentLayout(),text:Ext.String.format(e.todayText,n),tooltip:Ext.String.format(e.todayTip,n),tooltipType:"title",handler:e.selectToday,scope:e})),Ext.Component.prototype.beforeRender.call(this),Ext.applyIf(e,{renderData:{}}),Ext.apply(e.renderData,{dayNames:e.dayNames,showToday:e.showToday,prevText:e.prevText,nextText:e.nextText,days:t}),e.protoEl.unselectable()},cacheWidth:function(){var e=this,t=e.parseBox(e.padding),n=Ext.getBody().createChild({cls:e.baseCls+" "+e.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});e.self.prototype.width=n.getWidth()+t.left+t.right,n.destroy()},onRender:function(){var e=this;Ext.Component.prototype.onRender.apply(this,arguments),e.cells=e.eventEl.select("tbody td"),e.textNodes=e.eventEl.query("tbody td div"),e.eventEl.set({"aria-labelledby":e.monthBtn.id}),e.mon(e.eventEl,{scope:e,mousewheel:e.handleMouseWheel,click:{fn:e.handleDateClick,delegate:"div."+e.baseCls+"-date"}})},initEvents:function(){var e=this,t=e.pickerField,n=Ext.Date,i=n.DAY;Ext.Component.prototype.initEvents.call(this),e.focusable||e.el.on({mousedown:e.onMouseDown}),e.prevRepeater=new Ext.util.ClickRepeater(e.prevEl,{handler:e.showPrevMonth,scope:e,preventDefault:!0,stopDefault:!0}),e.nextRepeater=new Ext.util.ClickRepeater(e.nextEl,{handler:e.showNextMonth,scope:e,preventDefault:!0,stopDefault:!0}),e.keyNav=new Ext.util.KeyNav(t?t.inputEl:e.eventEl,Ext.apply({scope:e,capture:!0,left:function(t){t.ctrlKey?e.showPrevMonth():e.update(n.add(e.activeDate,i,-1))},right:function(t){t.ctrlKey?e.showNextMonth():e.update(n.add(e.activeDate,i,1))},up:function(t){t.ctrlKey?e.showNextYear():e.update(n.add(e.activeDate,i,-7))},down:function(t){t.ctrlKey?e.showPrevYear():e.update(n.add(e.activeDate,i,7))},pageUp:function(t){t.ctrlKey?e.showPrevYear():e.showPrevMonth()},pageDown:function(t){t.ctrlKey?e.showNextYear():e.showNextMonth()},tab:function(t){return e.handleTabClick(t),!0},enter:function(t){e.handleDateClick(t,e.activeCell.firstChild)},space:function(){e.setValue(new Date(e.activeCell.firstChild.dateValue));var n,i=e.startValue,r=e.value;t&&(n=t.getValue(),n&&i&&n.getTime()===r.getTime()?t.setValue(i):t.setValue(r))},home:function(){e.update(n.getFirstDateOfMonth(e.activeDate))},end:function(){e.update(n.getLastDateOfMonth(e.activeDate))}},e.keyNavConfig)),e.disabled&&e.syncDisabled(!0),e.update(e.value)},onMouseDown:function(e){e.preventDefault()},handleTabClick:function(){var e=this,t=e.getSelectedDate(e.activeDate),n=e.handler;e.disabled||!t.dateValue||Ext.fly(t.parentNode).hasCls(e.disabledCellCls)||(e.setValue(new Date(t.dateValue)),e.fireEvent("select",e,e.value),n&&n.call(e.scope||e,e,e.value),e.onSelect())},getSelectedDate:function(e){var t,n,i=this,r=e.getTime(),o=i.cells,a=i.selectedCls,s=o.elements,l=s.length;for(o.removeCls(a),n=0;l>n;n++)if(t=s[n].firstChild,t.dateValue===r)return t;return null},initDisabledDays:function(){var e,t,n,i,r=this,o=r.disabledDates,a="(?:";if(!r.disabledDatesRE&&o){for(e=o.length-1,n=o.length,t=0;n>t;t++)i=o[t],a+=Ext.isDate(i)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(i,r.format))+"$":i,t!==e&&(a+="|");r.disabledDatesRE=RegExp(a+")")}},setDisabledDates:function(e){var t=this;return Ext.isArray(e)?(t.disabledDates=e,t.disabledDatesRE=null):t.disabledDatesRE=e,t.initDisabledDays(),t.update(t.value,!0),t},setDisabledDays:function(e){return this.disabledDays=e,this.update(this.value,!0)},setMinDate:function(e){return this.minDate=e,this.update(this.value,!0)},setMaxDate:function(e){return this.maxDate=e,this.update(this.value,!0)},setValue:function(e){return this.value=Ext.Date.clearTime(e||new Date,!0),this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(e){return e.substr(0,1)},onEnable:function(){var e=this;Ext.Component.prototype.onEnable.call(this),e.syncDisabled(!1),e.update(e.activeDate)},onShow:function(){var e=this;Ext.Component.prototype.onShow.call(this),e.syncDisabled(!1),e.pickerField&&(e.startValue=e.pickerField.getValue())},onHide:function(){Ext.Component.prototype.onHide.call(this),this.syncDisabled(!0)},onDisable:function(){Ext.Component.prototype.onDisable.call(this),this.syncDisabled(!0)},getActive:function(){return this.activeDate||this.value},runAnimation:function(e){var t=this.monthPicker,n={duration:200,callback:function(){t.setVisible(!e)}};e?t.el.slideOut("t",n):t.el.slideIn("t",n)},hideMonthPicker:function(e){var t=this,n=t.monthPicker;return n&&n.isVisible()&&(t.shouldAnimate(e)?t.runAnimation(!0):n.hide()),t},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(e){var t,n=this,i=n.el;return n.rendered&&!n.disabled&&(t=n.createMonthPicker(),t.isVisible()||(t.setValue(n.getActive()),t.setSize(i.getSize()),t.floatParent=null,t.setPosition(-i.getBorderWidth("l"),-i.getBorderWidth("t")),n.shouldAnimate(e)?n.runAnimation(!1):t.show())),n},shouldAnimate:function(e){return Ext.isDefined(e)?e:!this.disableAnim},createMonthPicker:function(){var e=this,t=e.monthPicker;return t||(e.monthPicker=t=new Ext.picker.Month({renderTo:e.el,ownerCmp:e,floating:!0,padding:e.padding,shadow:!1,small:e.showToday===!1,listeners:{scope:e,cancelclick:e.onCancelClick,okclick:e.onOkClick,yeardblclick:e.onOkClick,monthdblclick:e.onOkClick}}),e.disableAnim||t.el.setStyle("display","none"),t.hide(),e.on("beforehide",e.doHideMonthPicker,e)),t},onOkClick:function(e,t){var n=this,i=t[0],r=t[1],o=new Date(r,i,n.getActive().getDate());o.getMonth()!==i&&(o=Ext.Date.getLastDateOfMonth(new Date(r,i,1))),n.setValue(o),n.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate),this.hideMonthPicker()},showPrevMonth:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(e){if(e.stopEvent(),!this.disabled){var t=e.getWheelDelta();t>0?this.showPrevMonth():0>t&&this.showNextMonth()}},handleDateClick:function(e,t){var n=this,i=n.handler;e.stopEvent(),n.disabled||!t.dateValue||Ext.fly(t.parentNode).hasCls(n.disabledCellCls)||(n.setValue(new Date(t.dateValue)),n.fireEvent("select",n,n.value),i&&i.call(n.scope||n,n,n.value),n.onSelect())},onSelect:function(){this.hideOnSelect&&this.hide()},selectToday:function(){var e=this,t=e.todayBtn,n=e.handler;return t&&!t.disabled&&(e.setValue(Ext.Date.clearTime(new Date)),e.fireEvent("select",e,e.value),n&&n.call(e.scope||e,e,e.value),e.onSelect()),e},selectedUpdate:function(e){var t,n,i=this,r=e.getTime(),o=i.cells,a=i.selectedCls,s=o.getCount();for(n=i.activeCell,n&&(Ext.fly(n).removeCls(a),n.setAttribute("aria-selected",!1)),t=0;s>t;t++)if(n=o.item(t),i.textNodes[t].dateValue===r){i.activeCell=n.dom,i.eventEl.dom.setAttribute("aria-activedescendant",n.dom.id),n.dom.setAttribute("aria-selected",!0),n.addCls(a),i.fireEvent("highlightitem",i,n);break}},fullUpdate:function(e){var t,n,i,r,o,a,s,l,d,u=this,c=u.cells.elements,h=u.textNodes,p=u.disabledCellCls,f=Ext.Date,g=0,m=0,x=+f.clearTime(e,!0),v=+f.clearTime(new Date),y=u.minDate?f.clearTime(u.minDate,!0):Number.NEGATIVE_INFINITY,E=u.maxDate?f.clearTime(u.maxDate,!0):Number.POSITIVE_INFINITY,b=u.disabledDatesRE,C=u.disabledDatesText,w=u.disabledDays?u.disabledDays.join(""):!1,S=u.disabledDaysText,T=u.format,P=f.getDaysInMonth(e),I=f.getFirstDateOfMonth(e),k=I.getDay()-u.startDay,B=f.add(e,f.MONTH,-1),M=u.ariaTitleDateFormat;for(0>k&&(k+=7),P+=k,t=f.getDaysInMonth(B)-k,n=new Date(B.getFullYear(),B.getMonth(),t,u.initHour),u.showToday&&(r=f.clearTime(new Date),i=y>r||r>E||b&&T&&b.test(f.dateFormat(r,T))||w&&-1!==w.indexOf(r.getDay()),u.disabled||u.todayBtn.setDisabled(i)),o=function(e,t){var i=c[e];d=+f.clearTime(n,!0),i.setAttribute("aria-label",f.format(n,M)),i.firstChild.dateValue=d,d===v&&(t+=" "+u.todayCls,i.firstChild.title=u.todayText,u.todayElSpan=Ext.DomHelper.append(i.firstChild,{tag:"span",cls:"x-hidden-clip",html:u.todayText},!0)),d===x?(u.activeCell=i,u.eventEl.dom.setAttribute("aria-activedescendant",i.id),i.setAttribute("aria-selected",!0),t+=" "+u.selectedCls,u.fireEvent("highlightitem",u,i)):i.setAttribute("aria-selected",!1),y>d?(t+=" "+p,i.setAttribute("aria-label",u.minText)):d>E?(t+=" "+p,i.setAttribute("aria-label",u.maxText)):w&&-1!==w.indexOf(n.getDay())?(i.setAttribute("aria-label",S),t+=" "+p):b&&T&&(l=f.dateFormat(n,T),b.test(l)&&(i.setAttribute("aria-label",C.replace("%0",l)),t+=" "+p)),i.className=t+" "+u.cellCls};g<u.numDays;++g)k>g?(a=++t,s=u.prevCls):g>=P?(a=++m,s=u.nextCls):(a=g-k+1,s=u.activeCls),h[g].innerHTML=a,n.setDate(n.getDate()+1),o(g,s);u.monthBtn.setText(Ext.Date.format(e,u.monthYearFormat))},update:function(e,t){var n=this,i=n.activeDate;return n.rendered&&(n.activeDate=e,!t&&i&&n.el&&i.getMonth()===e.getMonth()&&i.getFullYear()===e.getFullYear()?n.selectedUpdate(e,i):n.fullUpdate(e,i)),n},beforeDestroy:function(){var e=this;e.rendered&&(Ext.destroy(e.keyNav,e.monthPicker,e.monthBtn,e.nextRepeater,e.prevRepeater,e.todayBtn,e.todayElSpan),delete e.textNodes,delete e.cells.elements),Ext.Component.prototype.beforeDestroy.call(this)},privates:{finishRenderChildren:function(){var e=this;Ext.Component.prototype.finishRenderChildren.call(this),e.monthBtn.finishRender(),e.showToday&&e.todayBtn.finishRender()},getFocusEl:function(){return this.eventEl},syncDisabled:function(e){var t=this,n=t.keyNav;n&&(n.setDisabled(e),t.prevRepeater.setDisabled(e),t.nextRepeater.setDisabled(e),t.todayBtn&&t.todayBtn.setDisabled(e))}}},0,["datepicker"],["component","box","datepicker"],{component:!0,box:!0,datepicker:!0},["widget.datepicker"],0,[Ext.picker,"Date",Ext,"DatePicker"],0),Ext.cmd.derive("Ext.form.field.Date",Ext.form.field.Picker,{alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:"x-form-date-trigger",showToday:!0,useStrict:void 0,initTime:"12",initTimeFormat:"H",matchFieldWidth:!1,startDay:0,valuePublishEvent:["select","blur"],initComponent:function(){var e,t,n=this,i=Ext.isString;e=n.minValue,t=n.maxValue,i(e)&&(n.minValue=n.parseDate(e)),i(t)&&(n.maxValue=n.parseDate(t)),n.disabledDatesRE=null,n.initDisabledDays(),Ext.form.field.Picker.prototype.initComponent.call(this)},initValue:function(){var e=this,t=e.value;Ext.isString(t)&&(e.value=e.rawToValue(t)),Ext.form.field.Picker.prototype.initValue.call(this)},initDisabledDays:function(){if(this.disabledDates){var e,t,n=this.disabledDates,i=n.length-1,r="(?:",o=n.length;for(e=0;o>e;e++)t=n[e],r+=Ext.isDate(t)?"^"+Ext.String.escapeRegex(t.dateFormat(this.format))+"$":t,e!==i&&(r+="|");this.disabledDatesRE=RegExp(r+")")}},setDisabledDates:function(e){var t=this,n=t.picker;t.disabledDates=e,t.initDisabledDays(),n&&n.setDisabledDates(t.disabledDatesRE)},setDisabledDays:function(e){var t=this.picker;this.disabledDays=e,t&&t.setDisabledDays(e)},setMinValue:function(e){var t=this,n=t.picker,i=Ext.isString(e)?t.parseDate(e):e;t.minValue=i,n&&(n.minText=Ext.String.format(t.minText,t.formatDate(t.minValue)),n.setMinDate(i))},setMaxValue:function(e){var t=this,n=t.picker,i=Ext.isString(e)?t.parseDate(e):e;t.maxValue=i,n&&(n.maxText=Ext.String.format(t.maxText,t.formatDate(t.maxValue)),n.setMaxDate(i))},getErrors:function(e){e=arguments.length>0?e:this.formatDate(this.processRawValue(this.getRawValue()));var t,n,i,r,o=this,a=Ext.String.format,s=Ext.Date.clearTime,l=Ext.form.field.Picker.prototype.getErrors.call(this,e),d=o.disabledDays,u=o.disabledDatesRE,c=o.minValue,h=o.maxValue,p=d?d.length:0,f=0;if(null===e||e.length<1)return l;if(t=e,e=o.parseDate(e),!e)return l.push(a(o.invalidText,t,Ext.Date.unescapeFormat(o.format))),l;if(r=e.getTime(),c&&r<s(c).getTime()&&l.push(a(o.minText,o.formatDate(c))),h&&r>s(h).getTime()&&l.push(a(o.maxText,o.formatDate(h))),d)for(i=e.getDay();p>f;f++)if(i===d[f]){l.push(o.disabledDaysText);break}return n=o.formatDate(e),u&&u.test(n)&&l.push(a(o.disabledDatesText,n)),l},rawToValue:function(e){return this.parseDate(e)||e||null},valueToRaw:function(e){return this.formatDate(this.parseDate(e))},safeParse:function(e,t){var n,i=this,r=Ext.Date,o=null,a=i.useStrict;return r.formatContainsHourInfo(t)?o=r.parse(e,t,a):(n=r.parse(e+" "+i.initTime,t+" "+i.initTimeFormat,a),n&&(o=r.clearTime(n))),o},getSubmitValue:function(){var e=this.submitFormat||this.format,t=this.getValue();return t?Ext.Date.format(t,e):""},parseDate:function(e){if(!e||Ext.isDate(e))return e;var t,n=this,i=n.safeParse(e,n.format),r=n.altFormats,o=n.altFormatsArray,a=0;if(!i&&r)for(o=o||r.split("|"),t=o.length;t>a&&!i;++a)i=n.safeParse(e,o[a]);return i},formatDate:function(e){return Ext.isDate(e)?Ext.Date.dateFormat(e,this.format):e},createPicker:function(){var e=this,t=Ext.String.format;return new Ext.picker.Date({pickerField:e,floating:!0,focusable:!1,hidden:!0,minDate:e.minValue,maxDate:e.maxValue,disabledDatesRE:e.disabledDatesRE,disabledDatesText:e.disabledDatesText,disabledDays:e.disabledDays,disabledDaysText:e.disabledDaysText,format:e.format,showToday:e.showToday,startDay:e.startDay,minText:t(e.minText,e.formatDate(e.minValue)),maxText:t(e.maxText,e.formatDate(e.maxValue)),listeners:{scope:e,select:e.onSelect},keyNavConfig:{esc:function(){e.collapse()}}})},onSelect:function(e,t){var n=this;n.setValue(t),n.fireEvent("select",n,t),n.collapse()},onExpand:function(){var e=this.getValue();this.picker.setValue(Ext.isDate(e)?e:new Date)},onBlur:function(e){var t=this,n=t.rawToValue(t.getRawValue());Ext.isDate(n)&&t.setValue(n),Ext.form.field.Picker.prototype.onBlur.call(this,e)}},0,["datefield"],["component","box","field","textfield","pickerfield","datefield"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0,datefield:!0},["widget.datefield"],0,[Ext.form.field,"Date",Ext.form,"DateField",Ext.form,"Date"],0),Ext.define("BP.overrides.form.field.Date",{override:"Ext.form.field.Date",getMinValue:function(){return this.minValue},getMaxValue:function(){return this.maxValue}}),Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["fileInputEl"],inputCls:"x-form-file-input",cls:"x-form-file-btn",preventDefault:!1,tabIndex:null,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],getAfterMarkup:function(e){return this.getTpl("afterTpl").apply(e)},getTemplateArgs:function(){var e=Ext.button.Button.prototype.getTemplateArgs.call(this);return e.inputCls=this.inputCls,e.inputName=this.inputName,e.tabIndex=this.ownerCt.tabIndex,e},afterRender:function(){var e=this;Ext.button.Button.prototype.afterRender.apply(this,arguments),e.fileInputEl.on({scope:e,change:e.fireChange,focus:e.onFileFocus,blur:e.onFileBlur})},fireChange:function(e){this.fireEvent("change",this,e,this.fileInputEl.dom.value)},createFileInput:function(e){var t=this,n=t.fileInputEl=t.el.createChild({name:t.inputName,id:e?void 0:t.id+"-fileInputEl",cls:t.inputCls,tag:"input",type:"file",size:1,role:"button"});n.dom.setAttribute(Ext.Component.componentIdAttribute,t.id),n.on({scope:t,change:t.fireChange,focus:t.onFileFocus,blur:t.onFileBlur})},onFileFocus:function(e){var t=this.ownerCt;this.hasFocus||this.onFocus(e),t&&!t.hasFocus&&t.onFocus(e)},onFileBlur:function(e){var t=this.ownerCt;this.hasFocus&&this.onBlur(e),t&&t.hasFocus&&t.onBlur(e)},reset:function(e){var t=this;e&&t.fileInputEl.destroy(),t.createFileInput(!e)},restoreInput:function(e){var t=this;t.fileInputEl.destroy(),e=Ext.get(e),t.el.appendChild(e),t.fileInputEl=e},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this),this.fileInputEl.dom.disabled=!0},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this),this.fileInputEl.dom.disabled=!1},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}},0,["filebutton"],["component","box","button","filebutton"],{component:!0,box:!0,button:!0,filebutton:!0},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0),Ext.define("Ext.rtl.form.field.FileButton",{override:"Ext.form.field.FileButton",createFileInput:function(e){var t=this;t.fileInputEl=t.el.createChild({name:t.inputName,id:e?void 0:t.id+"-fileInputEl",cls:t.inputCls+" "+(t.getInherited().rtl?"x-rtl":""),tag:"input",type:"file",size:1,role:"button"}),t.fileInputEl.on({scope:t,change:t.fireChange,focus:t.onFocus,blur:t.onBlur})}}),Ext.cmd.derive("Ext.form.trigger.Component",Ext.form.trigger.Trigger,{cls:"x-form-trigger-cmp",onFieldRender:function(){var e=this,t=e.component;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this),t.isComponent||t.isWidget||(t=Ext.widget(t)),e.component=t,t.render(e.el)},destroy:function(){var e=this.component;(e.isComponent||e.isWidget)&&e.destroy(),this.component=null,Ext.form.trigger.Trigger.prototype.destroy.call(this)}},0,0,0,0,["trigger.component"],0,[Ext.form.trigger,"Component"],0),Ext.cmd.derive("Ext.form.field.File",Ext.form.field.Text,{alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],needArrowKeys:!1,triggers:{filebutton:{type:"component",hideOnReadOnly:!1,preventMouseDown:!1}},buttonText:"Browse...",buttonOnly:!1,buttonMargin:3,clearOnSubmit:!0,extraFieldBodyCls:"x-form-file-wrap",inputCls:"x-form-text-file",readOnly:!0,editable:!1,submitValue:!1,triggerNoEditCls:"",childEls:["browseButtonWrap"],applyTriggers:function(e){var t=this,n=(e||{}).filebutton;return n?(n.component=Ext.apply({xtype:"filebutton",ownerCt:t,id:t.id+"-button",ui:t.ui,disabled:t.disabled,text:t.buttonText,style:t.buttonOnly?"":t.getButtonMarginProp()+t.buttonMargin+"px",inputName:t.getName(),listeners:{scope:t,change:t.onFileChange}},t.buttonConfig),Ext.form.field.Text.prototype.applyTriggers.call(this,e)):void 0},getSubTplData:function(e){var t=Ext.form.field.Text.prototype.getSubTplData.call(this,e);return t.tabIdx=-1,t},onRender:function(){var e,t,n,i,r=this;(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).apply(this,arguments),e=r.inputEl,e.dom.name="",e.on("focus",r.focus,r),i=r.getTrigger("filebutton"),t=r.button=i.component,r.fileInputEl=t.fileInputEl,n=t.el,r.buttonOnly&&(r.inputWrap.setDisplayed(!1),r.shrinkWrap=3),i.el.setWidth(n.getWidth()+n.getMargin("lr")),Ext.isIE&&r.button.getEl().repaint()},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(e,t,n){this.duringFileSelect=!0,Ext.form.field.File.superclass.setValue.call(this,n),delete this.duringFileSelect},didValueChange:function(){return!!this.duringFileSelect},setValue:Ext.emptyFn,reset:function(){var e=this,t=e.clearOnSubmit;e.rendered&&(e.button.reset(t),e.fileInputEl=e.button.fileInputEl,t&&(e.inputEl.dom.value="",Ext.form.field.File.superclass.setValue.call(this,null))),Ext.form.field.Text.prototype.reset.call(this)},onShow:function(){Ext.form.field.Text.prototype.onShow.call(this),this.button.updateLayout()},onDisable:function(){Ext.form.field.Text.prototype.onDisable.call(this),this.button.disable()},onEnable:function(){Ext.form.field.Text.prototype.onEnable.call(this),this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var e,t=this;return t.rendered?(e=t.button.fileInputEl.dom,t.reset()):(e=document.createElement("input"),e.type="file",e.className="x-hidden-display",e.name=t.getName()),e},restoreInput:function(e){if(this.rendered){var t=this.button;t.restoreInput(e),this.fileInputEl=t.fileInputEl}},onDestroy:function(){this.fileInputEl=this.button=null,Ext.form.field.Text.prototype.onDestroy.call(this)},getButtonMarginProp:function(){return"margin-left:"},privates:{getFocusEl:function(){return this.button},getFocusClsEl:Ext.privateFn}},0,["fileuploadfield","filefield"],["component","box","field","textfield","filefield","fileuploadfield"],{component:!0,box:!0,field:!0,textfield:!0,filefield:!0,fileuploadfield:!0},["widget.filefield","widget.fileuploadfield"],0,[Ext.form.field,"File",Ext.form,"FileUploadField",Ext.ux.form,"FileUploadField",Ext.form,"File"],0),Ext.define("Ext.rtl.form.field.File",{override:"Ext.form.field.File",getButtonMarginProp:function(){return this.getInherited().rtl?"margin-right:":"margin-left:"}}),Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",focusable:!1,inputType:"hidden",isTextInput:!1,hideLabel:!0,hidden:!0,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden",Ext.form.field.Base.prototype.initComponent.call(this)},isEqual:function(e,t){return this.isEqualAsString(e,t)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hiddenfield","hidden"],["component","box","field","hiddenfield","hidden"],{component:!0,box:!0,field:!0,hiddenfield:!0,hidden:!0},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0),Ext.cmd.derive("Ext.toolbar.Separator",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.Separator",baseCls:"x-toolbar-separator",ariaRole:"separator"},0,["tbseparator"],["component","box","tbitem","tbseparator"],{component:!0,box:!0,tbitem:!0,tbseparator:!0},["widget.tbseparator"],0,[Ext.toolbar,"Separator",Ext.Toolbar,"Separator"],0),Ext.define("BP.overrides.toolbar.Separator",{override:"Ext.toolbar.Separator",overCls:"x-separator-over",initEvents:function(){(arguments.callee.$previous||Ext.toolbar.Item.prototype.initEvents).call(this),this.el.on("click",this.onClick,this)},onClick:function(){this.fireEvent("click",this),Ext.callback(this.handler,this)}}),Ext.cmd.derive("Ext.layout.container.boxOverflow.Menu",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="x-toolbar-no-items" role="menuitem">(None)</div>',menuCls:"x-box-menu",constructor:function(e){var t=this;Ext.layout.container.boxOverflow.None.prototype.constructor.call(this,e),t.menuItems=[]},beginLayout:function(e){Ext.layout.container.boxOverflow.None.prototype.beginLayout.call(this,e),this.clearOverflow(e)},beginLayoutCycle:function(e,t){Ext.layout.container.boxOverflow.None.prototype.beginLayoutCycle.call(this,e,t),t||(this.clearOverflow(e),this.layout.cacheChildItems(e))},onRemove:function(e){Ext.Array.remove(this.menuItems,e)},clearItem:function(e){var t=e.menu;e.isButton&&t&&e.setMenu(t,!1)},getSuffixConfig:function(){var e=this,t=e.layout,n=t.owner,i=n.id;return e.menu=new Ext.menu.Menu({listeners:{scope:e,beforeshow:e.beforeMenuShow}}),e.menuTrigger=new Ext.button.Button({id:i+"-menu-trigger",cls:e.menuCls+"-after x-toolbar-item",plain:n.usePlainButtons,ownerCt:n,ownerLayout:t,iconCls:"x-"+e.getOwnerType(n)+"-more-icon",ui:n.defaultButtonUI||"default",menu:e.menu,showEmptyMenu:!0,getSplitCls:function(){return""}}),e.menuTrigger.getRenderTree()},getOverflowCls:function(e){return this.menuCls+"-body-"+e},handleOverflow:function(e){var t=this,n=t.layout;return t.showTrigger(e),"vertical"!==n.direction&&t.menuTrigger.setLocalY((e.state.boxPlan.maxSize-t.menuTrigger[n.names.getHeight]())/2),{reservedSpace:t.triggerTotalWidth}},captureChildElements:function(){var e=this,t=e.menuTrigger,n=e.layout.names;t.rendering&&(t.finishRender(),e.triggerTotalWidth=t[n.getWidth]()+t.el.getMargin(n.parallelMargins))},clearOverflow:function(){var e,t,n=this,i=n.menuItems,r=i.length,o=n.layout.owner,a=o._asLayoutRoot;for(o.suspendLayouts(),n.captureChildElements(),n.hideTrigger(),o.resumeLayouts(),t=0;r>t;t++)e=i[t],e.suspendLayouts(),e.show(),n.clearItem(e),e.resumeLayouts(a);i.length=0},showTrigger:function(e){var t,n,i,r,o,a=this,s=a.layout,l=s.owner,d=s.names,u=d.x,c=d.width,h=e.state.boxPlan,p=h.targetSize[c],f=e.childItems,g=a.menuTrigger,m=a.menuItems;for(g.suspendLayouts(),g.show(),g.resumeLayouts(a._asLayoutRoot),p-=a.triggerTotalWidth,l.suspendLayouts(),i=0,o=m.length;o>i;++i)a.clearItem(m[i]);for(m.length=0,i=0,o=f.length;o>i;i++)t=f[i],r=t.props,r[u]+r[c]>p&&(n=t.target,a.menuItems.push(n),n.hide());l.resumeLayouts()},hideTrigger:function(){var e=this.menuTrigger;e&&e.hide()},beforeMenuShow:function(e){var t,n,i=this,r=i.menuItems,o=0,a=r.length,s=function(e,t){return e.isXType("buttongroup")&&!(t instanceof Ext.toolbar.Separator)};for(e.suspendLayouts(),e.removeAll(!1);a>o;o++)t=r[o],!o&&t instanceof Ext.toolbar.Separator||(n&&(s(t,n)||s(n,t))&&e.add("-"),i.addComponentToMenu(e,t),n=t);e.items.length<1&&e.add(i.noItemsMenuText),e.resumeLayouts()},createMenuConfig:function(e,t){var n=Ext.apply({},e.initialConfig),i=e.toggleGroup;return Ext.copyTo(n,e,["iconCls","icon","itemId","disabled","handler","scope","menu","tabIndex"]),Ext.applyIf(n,{text:e.overflowText||e.text,hideOnClick:t,destroyMenu:!1,listeners:null}),e.isFormField?(n.value=e.getValue(),n.listeners={change:function(t,n){e.setValue(n)}}):(i||e.enableToggle)&&Ext.apply(n,{hideOnClick:!1,group:i,checked:e.pressed,handler:function(t,n){e.onClick(n)}}),e.isButton&&!e.changeListenersAdded&&(e.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle}),e.changeListenersAdded=!0),delete n.margin,delete n.ownerCt,delete n.xtype,delete n.id,delete n.itemId,n},onButtonAttrChange:function(e){var t=e.overflowClone;t.suspendLayouts(),t.setText(e.text),t.setIcon(e.icon),t.setIconCls(e.iconCls),t.resumeLayouts(!0)},onButtonToggle:function(e,t){e.overflowClone.checked!==t&&e.overflowClone.setChecked(t)},addComponentToMenu:function(e,t){var n,i,r,o=this;if(!(t instanceof Ext.toolbar.Fill))if(t instanceof Ext.toolbar.Separator)e.add("-");else if(t.overflowClone)e.add(t.overflowClone);else if(t.isComponent)if(t.isXType("splitbutton"))t.overflowClone=e.add(o.createMenuConfig(t,!0));else if(t.isXType("button"))t.overflowClone=e.add(o.createMenuConfig(t,!t.menu));else if(t.isXType("buttongroup"))for(i=t.items.items,r=i.length,n=0;r>n;n++)o.addComponentToMenu(e,i[n]);else t.overflowClone=e.add(Ext.create(Ext.getClassName(t),o.createMenuConfig(t)))},destroy:function(){var e=this.menuTrigger;e&&!this.layout.owner.items.contains(e)&&delete e.ownerCt,Ext.destroy(this.menu,e)}},1,0,0,0,["box.overflow.Menu","box.overflow.menu"],0,[Ext.layout.container.boxOverflow,"Menu",Ext.layout.boxOverflow,"Menu"],0),Ext.define("Ext.rtl.layout.container.boxOverflow.Menu",{override:"Ext.layout.container.boxOverflow.Menu",getPrefixConfig:function(e){return e||!this.layout.owner.getInherited().rtl?(arguments.callee.$previous||Ext.layout.container.boxOverflow.None.prototype.getPrefixConfig).call(this):this.getSuffixConfig(!0)},getSuffixConfig:function(e){return e||!this.layout.owner.getInherited().rtl?(arguments.callee.$previous||Ext.layout.container.boxOverflow.None.prototype.getSuffixConfig).call(this):this.getPrefixConfig(!0)}}),Ext.cmd.derive("Ext.grid.ColumnManager",Ext.Base,{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(e,t,n){this.headerCt=t,n&&(this.secondHeaderCt=n),this.visibleOnly=!!e},getColumns:function(){return this.columns||this.cacheColumns(),this.columns},hasVariableRowHeight:function(){
var e,t=this,n=t.getColumns(),i=n.length;if(null==t.variableRowHeight)for(t.variableRowHeight=!1,e=0;!t.variableRowHeight&&i>e;e++)t.variableRowHeight=!!n[e].variableRowHeight;return t.variableRowHeight},getHeaderIndex:function(e){return e.isGroupHeader&&(e=this.getHeaderColumns(e)[0]),Ext.Array.indexOf(this.getColumns(),e)},getHeaderAtIndex:function(e){var t=this.getColumns(),n=t[e];return n||null},getPreviousSibling:function(e){var t=this.getHeaderIndex(e),n=null;return t>0&&(n=this.getColumns()[t-1]),n},getNextSibling:function(e){var t,n=this.getHeaderIndex(e);return-1!==n&&(t=this.getColumns()[n+1]),t||null},getFirst:function(){var e=this.getColumns();return e.length>0?e[0]:null},getLast:function(){var e=this.getColumns(),t=e.length;return t>0?e[t-1]:null},getHeaderByDataIndex:function(e){var t,n,i=this.getColumns(),r=i.length;for(t=0;r>t;++t)if(n=i[t],n.dataIndex===e)return n;return null},getHeaderById:function(e){var t,n,i=this.getColumns(),r=i.length;for(t=0;r>t;++t)if(n=i[t],n.getItemId()===e)return n;return null},getVisibleHeaderClosestToIndex:function(e){var t=this.getHeaderAtIndex(e);return t&&t.hidden&&(t=t.next(":not([hidden])")||t.prev(":not([hidden])")),t},cacheColumns:function(){var e=this.getHeaderColumns(this.headerCt),t=this.secondHeaderCt;t&&(e=e.concat(this.getHeaderColumns(t))),this.columns=e},getHeaderColumns:function(e){var t=this.visibleOnly?e.getVisibleGridColumns():e.getGridColumns();return Ext.Array.clone(t)},invalidate:function(){var e=this.rootColumns;this.columns=this.variableRowHeight=null,e&&e.invalidate()},destroy:function(){this.columns=this.rootColumns=null}},1,0,0,0,0,0,[Ext.grid,"ColumnManager",Ext.grid,"ColumnModel"],function(){this.createAlias("indexOf","getHeaderIndex")}),Ext.cmd.derive("Ext.view.DropZone",Ext.dd.DropZone,{indicatorCls:"x-grid-drop-indicator",indicatorHtml:'<div class="x-grid-drop-indicator-left" role="presentation"></div><div class="x-grid-drop-indicator-right" role="presentation"></div>',constructor:function(e){var t=this;Ext.apply(t,e),t.ddGroup||(t.ddGroup="view-dd-zone-"+t.view.id),Ext.dd.DropZone.prototype.constructor.call(this,t.view.el)},fireViewEvent:function(){var e,t=this;return t.lock(),e=t.view.fireEvent.apply(t.view,arguments),t.unlock(),e},getTargetFromEvent:function(e){var t,n,i,r,o,a,s=e.getTarget(this.view.getItemSelector());if(!s)for(t=e.getY(),r=0,n=this.view.getNodes(),o=n.length;o>r;r++)if(i=n[r],a=Ext.fly(i).getBox(),t<=a.bottom)return i;return s},getIndicator:function(){var e=this;return e.indicator||(e.indicator=new Ext.Component({ariaRole:"presentation",html:e.indicatorHtml,cls:e.indicatorCls,ownerCt:e.view,floating:!0,shadow:!1})),e.indicator},getPosition:function(e,t){var n,i=e.getXY()[1],r=Ext.fly(t).getRegion();return n=r.bottom-i>=(r.bottom-r.top)/2?"before":"after"},containsRecordAtOffset:function(e,t,n){if(!t)return!1;var i=this.view,r=i.indexOf(t),o=i.getNode(r+n),a=o?i.getRecord(o):null;return a&&Ext.Array.contains(e,a)},positionIndicator:function(e,t,n){var i,r=this,o=r.view,a=r.getPosition(n,e),s=o.getRecord(e),l=t.records;Ext.Array.contains(l,s)||("before"!==a||r.containsRecordAtOffset(l,s,-1))&&("after"!==a||r.containsRecordAtOffset(l,s,1))?r.invalidateDrop():(r.valid=!0,(r.overRecord!==s||r.currentPosition!==a)&&(i=Ext.fly(e).getY()-o.el.getY()-1,"after"===a&&(i+=Ext.fly(e).getHeight()),2===o.touchScroll&&(i+=o.getScrollY()),r.getIndicator().setWidth(Ext.fly(o.el).getWidth()).showAt(0,i),r.overRecord=s,r.currentPosition=a))},invalidateDrop:function(){this.valid&&(this.valid=!1,this.getIndicator().hide())},onNodeOver:function(e,t,n,i){var r=this;return Ext.Array.contains(i.records,r.view.getRecord(e))||r.positionIndicator(e,i,n),r.valid?r.dropAllowed:r.dropNotAllowed},notifyOut:function(){var e=this;Ext.dd.DropZone.prototype.notifyOut.apply(this,arguments),e.overRecord=e.currentPosition=null,e.valid=!1,e.indicator&&e.indicator.hide()},onContainerOver:function(e,t,n){var i=this,r=i.view,o=r.dataSource.getCount();return o?i.positionIndicator(r.all.last(),n,t):(i.overRecord=i.currentPosition=null,i.getIndicator().setWidth(Ext.fly(r.el).getWidth()).showAt(0,0),i.valid=!0),i.dropAllowed},onContainerDrop:function(e,t,n){return this.onNodeDrop(e,null,t,n)},onNodeDrop:function(e,t,n,i){var r=this,o=!1,a={wait:!1,processDrop:function(){r.invalidateDrop(),r.handleNodeDrop(i,r.overRecord,r.currentPosition),o=!0,r.fireViewEvent("drop",e,i,r.overRecord,r.currentPosition)},cancelDrop:function(){r.invalidateDrop(),o=!0}},s=!1;if(r.valid){if(s=r.fireViewEvent("beforedrop",e,i,r.overRecord,r.currentPosition,a),a.wait)return;s!==!1&&(o||a.processDrop())}return s},destroy:function(){Ext.destroy(this.indicator),delete this.indicator,Ext.dd.DropZone.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.view,"DropZone"],0),Ext.cmd.derive("Ext.grid.column.Action",Ext.grid.column.Column,{alternateClassName:"Ext.grid.ActionColumn",stopSelection:!0,actionIdRe:RegExp("x-action-col-(\\d+)"),altText:"",menuText:"<i>Actions</i>",sortable:!1,innerCls:"x-grid-cell-inner-action-col",actionIconCls:"x-action-col-icon",constructor:function(e){var t,n,i,r=this,o=Ext.apply({},e),a=o.items||r.items||[r];for(r.origRenderer=o.renderer||r.renderer,r.origScope=o.scope||r.scope,r.renderer=r.scope=o.renderer=o.scope=null,o.items=null,Ext.grid.column.Column.prototype.constructor.call(this,o),r.items=a,n=0,i=a.length;i>n;++n)if(a[n].getClass){t=!0;break}(r.origRenderer||t)&&(r.hasCustomRenderer=!0)},initComponent:function(){var e=this;Ext.grid.column.Column.prototype.initComponent.call(this),e.sortable&&!e.dataIndex&&(e.sortable=!1)},defaultRenderer:function(e,t,n,i,r,o,a){var s,l,d,u,c=this,h="x-",p=c.origScope||c,f=c.items,g=f.length,m=0;for(l=Ext.isFunction(c.origRenderer)?c.origRenderer.apply(p,arguments)||"":"",t.tdCls+=" x-action-col-cell";g>m;m++)s=f[m],d=s.disabled||(s.isDisabled?s.isDisabled.call(s.scope||p,a,i,r,s,n):!1),u=d?null:s.tooltip||(s.getTip?s.getTip.apply(s.scope||p,arguments):null),s.hasActionConfiguration||(s.stopSelection=c.stopSelection,s.disable=Ext.Function.bind(c.disableAction,c,[m],0),s.enable=Ext.Function.bind(c.enableAction,c,[m],0),s.hasActionConfiguration=!0),l+='<img role="button" alt="'+(s.altText||c.altText)+'" src="'+(s.icon||Ext.BLANK_IMAGE_URL)+'" class="'+c.actionIconCls+" "+h+"action-col-"+(m+"")+" "+(d?h+"item-disabled":" ")+(Ext.isFunction(s.getClass)?s.getClass.apply(s.scope||p,arguments):s.iconCls||c.iconCls||"")+'"'+(u?' data-qtip="'+u+'"':"")+" />";return l},updater:function(e,t,n,i,r){var o={};e.firstChild.innerHTML=this.defaultRenderer(t,o,n,null,null,r,i),Ext.fly(e).addCls(o.tdCls)},enableAction:function(e,t){var n=this;e?Ext.isNumber(e)||(e=Ext.Array.indexOf(n.items,e)):e=0,n.items[e].disabled=!1,n.up("tablepanel").el.select(".x-action-col-"+e).removeCls(n.disabledCls),t||n.fireEvent("enable",n)},disableAction:function(e,t){var n=this;e?Ext.isNumber(e)||(e=Ext.Array.indexOf(n.items,e)):e=0,n.items[e].disabled=!0,n.up("tablepanel").el.select(".x-action-col-"+e).addCls(n.disabledCls),t||n.fireEvent("disable",n)},beforeDestroy:function(){return this.renderer=this.items=null,Ext.grid.column.Column.prototype.beforeDestroy.apply(this,arguments)},processEvent:function(e,t,n,i,r,o,a,s){var l,d,u,c=this,h=o.getTarget(),p="keydown"===e&&o.getKey();if(p&&!Ext.fly(h).findParent(t.getCellSelector())&&(h=Ext.fly(n).down(".x-action-col-icon",!0)),h&&(l=h.className.match(c.actionIdRe))&&(d=c.items[parseInt(l[1],10)],u=d.disabled||(d.isDisabled?d.isDisabled.call(d.scope||c.origScope||c,t,i,r,d,a):!1),d&&!u)){if("mousedown"===e)return d.stopSelection&&o.preventDefault(),!1;if(("click"===e||p===o.ENTER||p===o.SPACE)&&(Ext.callback(d.handler||c.handler,d.scope||c.origScope,[t,i,r,d,o,a,s],void 0,c),d.stopSelection!==!1))return!1}return Ext.grid.column.Column.prototype.processEvent.apply(this,arguments)},cascade:function(e,t){e.call(t||this,this)},getRefItems:function(){return[]},privates:{getFocusables:function(){return[]}}},1,["actioncolumn"],["component","box","container","headercontainer","gridcolumn","actioncolumn"],{component:!0,box:!0,container:!0,headercontainer:!0,gridcolumn:!0,actioncolumn:!0},["widget.actioncolumn"],0,[Ext.grid.column,"Action",Ext.grid,"ActionColumn"],0),Ext.define("BP.overrides.grid.column.Action",{override:"Ext.grid.column.Action",defaultRenderer_:function(e,t,n,i,r,o,a){var s,l,d,u,c=this,h="x-",p=c.origScope||c,f=c.items,g=f.length,m=0;for(l=Ext.isFunction(c.origRenderer)?c.origRenderer.apply(p,arguments)||"":"",t.tdCls+=" x-action-col-cell";g>m;m++)s=f[m],d=s.disabled||(s.isDisabled?s.isDisabled.call(s.scope||p,a,i,r,s,n):!1),u=d?null:s.tooltip||(s.getTip?s.getTip.apply(s.scope||p,arguments):null),s.hasActionConfiguration||(s.stopSelection=c.stopSelection,s.disable=Ext.Function.bind(c.disableAction,c,[m],0),s.enable=Ext.Function.bind(c.enableAction,c,[m],0),s.hasActionConfiguration=!0),l+='<img role="button" alt="'+(s.altText||c.altText)+'" src="'+(s.icon||Ext.BLANK_IMAGE_URL)+'" class="'+c.actionIconCls+" "+h+"action-col-"+(m+"")+" "+(d?h+"item-disabled":" ")+(Ext.isFunction(s.getClass)?s.getClass.apply(s.scope||p,arguments):s.iconCls||c.iconCls||"")+'"'+(u?' data-qtip="'+u+'"':"")+" />";return l}}),Ext.cmd.derive("Ext.grid.feature.Feature",Ext.util.Observable,{wrapsItem:!1,isFeature:!0,disabled:!1,hasFeatureEvent:!0,eventPrefix:null,eventSelector:null,view:null,grid:null,constructor:function(e){this.initialConfig=e,Ext.util.Observable.prototype.constructor.apply(this,arguments)},clone:function(){return new this.self(this.initialConfig)},init:Ext.emptyFn,destroy:function(){this.clearListeners()},getFireEventArgs:function(e,t,n,i){return[e,t,n,i]},vetoEvent:Ext.emptyFn,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}},1,0,0,0,["feature.feature"],0,[Ext.grid.feature,"Feature"],0),Ext.cmd.derive("Ext.grid.feature.RowBody",Ext.grid.feature.Feature,{rowBodyCls:"x-grid-row-body",rowBodyHiddenCls:"x-grid-row-body-hidden",rowBodyTdSelector:"td.x-grid-cell-rowbody",eventPrefix:"rowbody",eventSelector:"tr.x-grid-rowbody-tr",colSpanDecrement:0,bodyBefore:!1,outerTpl:{fn:function(e,t,n){var i=t.view,r=i.rowValues;this.rowBody.setup(t.rows,r),this.nextTpl.applyOut(t,e,n),this.rowBody.cleanup(t.rows,r)},priority:100},extraRowTpl:["{%","if(this.rowBody.bodyBefore) {","values.view.renderColumnSizer(values, out);","} else {","this.nextTpl.applyOut(values, out, parent);","}","values.view.rowBodyFeature.setupRowData(values.record, values.recordIndex, values);","%}",'<tr class="x-grid-rowbody-tr {rowBodyCls}" {ariaRowAttr}>','<td class="x-grid-td x-grid-cell-rowbody" colspan="{rowBodyColspan}" {ariaCellAttr}>','<div class="x-grid-rowbody {rowBodyDivCls}" {ariaCellInnerAttr}>{rowBody}</div>',"</td>","</tr>","{%","if(this.rowBody.bodyBefore) {","this.nextTpl.applyOut(values, out, parent);","}","%}",{priority:100,beginRowSync:function(e){e.add("rowBody",this.owner.eventSelector)},syncContent:function(e,t){var n,i=this.owner,r=Ext.fly(e).down(i.eventSelector,!0);r&&(n=Ext.fly(t).down(i.eventSelector,!0))&&Ext.fly(r).syncContent(n)}}],init:function(e){var t=this,n=t.view=e.getView();e.variableRowHeight=n.variableRowHeight=!0,n.rowBodyFeature=t,e.mon(n,{element:"el",click:t.onClick,scope:t}),n.headerCt.on({columnschanged:t.onColumnsChanged,scope:t}),n.addTpl(t.outerTpl).rowBody=t,n.addRowTpl(Ext.XTemplate.getTpl(this,"extraRowTpl")).rowBody=t,Ext.grid.feature.Feature.prototype.init.apply(this,arguments)},onClick:function(e){var t=this,n=e.getTarget(t.eventSelector);n&&Ext.fly(n=n.previousSibling||n.nextSibling).is(t.view.rowSelector)&&(e.target=n,t.view.handleEvent(e))},getSelectedRow:function(e,t){var n=e.getNode(t);return n?Ext.fly(n).down(this.eventSelector):null},onColumnsChanged:function(e){var t,n=this.view.el.query(this.rowBodyTdSelector),i=e.getVisibleGridColumns().length,r=n.length;for(t=0;r>t;++t)n[t].setAttribute("colSpan",i)},setupRowData:function(e,t,n){this.getAdditionalData&&Ext.apply(n,this.getAdditionalData(e.data,t,e,n))},setup:function(e,t){t.rowBodyCls=this.rowBodyCls,t.rowBodyColspan=this.view.headerCt.visibleColumnManager.getColumns().length-this.colSpanDecrement},cleanup:function(e,t){t.rowBodyCls=t.rowBodyColspan=t.rowBody=null}},0,0,0,0,["feature.rowbody"],0,[Ext.grid.feature,"RowBody"],0),Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:!0,activated:!1,activeCls:"x-menu-item-active",ariaRole:"menuitem",clickHideDelay:0,destroyMenu:!0,disabledCls:"x-menu-item-disabled",hideOnClick:!0,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:!0,baseCls:"x-menu-item",arrowCls:"x-menu-item-arrow",baseIconCls:"x-menu-item-icon",textCls:"x-menu-item-text",indentCls:"x-menu-item-indent",indentNoSeparatorCls:"x-menu-item-indent-no-separator",indentRightIconCls:"x-menu-item-indent-right-icon",indentRightArrowCls:"x-menu-item-indent-right-arrow",linkCls:"x-menu-item-link",linkHrefCls:"x-menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" role="menuitem" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:!1,iconAlign:"left",canFocus:function(){var e=this;return e.focusable&&e.rendered&&e.canActivate!==!1&&!e.destroying&&!e.isDestroyed&&e.isVisible(!0)},onFocus:function(e){var t=this;Ext.Component.prototype.onFocus.call(this,e),t.disabled||(t.plain||t.addCls(t.activeCls),t.activated=!0,t.hasListeners.activate&&t.fireEvent("activate",t))},onFocusLeave:function(e){var t=this;Ext.Component.prototype.onFocusLeave.call(this,e),t.activated&&(t.plain||t.removeCls(t.activeCls),t.doHideMenu(),t.activated=!1,t.hasListeners.deactivate&&t.fireEvent("deactivate",t))},doHideMenu:function(){var e=this.menu;this.cancelDeferExpand(),e&&e.isVisible()&&e.hide()},deferHideParentMenus:function(){var e=this.getRefOwner();e.floating&&(e.bubble(function(t){return t.floating||t.isMenuItem?void(t.isMenu&&(e=t)):!1}),e.hide())},expandMenu:function(e,t){var n=this;n.activated&&n.menu&&(n.hideOnClick=!1,n.cancelDeferHide(),t=null==t?n.menuExpandDelay:t,0===t?n.doExpandMenu(e):(n.cancelDeferExpand(),n.expandMenuTimer=Ext.defer(n.doExpandMenu,t,n,[e])))},doExpandMenu:function(e){var t=this,n=t.menu;n.isVisible()||(t.parentMenu.activeChild=n,n.ownerCmp=t,n.parentMenu=t.parentMenu,n.constrainTo=document.body,n.autoFocus=!e||!e.pointerType,n.showBy(t,t.menuAlign))},getRefItems:function(e){var t,n=this.menu;return n&&(t=n.getRefItems(e),t.unshift(n)),t||[]},getValue:function(){return this.value},hideMenu:function(e){var t=this;t.menu&&(t.cancelDeferExpand(),t.hideMenuTimer=Ext.defer(t.doHideMenu,Ext.isNumber(e)?e:t.menuHideDelay,t))},initComponent:function(){var e,t=this,n=t.cls?[t.cls]:[];t.hasOwnProperty("canActivate")&&(t.focusable=t.canActivate),t.plain&&n.push("x-menu-item-plain"),n.length&&(t.cls=n.join(" ")),t.menu&&(e=t.menu,t.menu=null,t.setMenu(e)),Ext.Component.prototype.initComponent.apply(this,arguments)},onClick:function(e){var t,n,i=this,r=i.clickHideDelay,o=e.browserEvent;return i.href&&!i.disabled||(e.stopEvent(),!i.disabled)?i.disabled||i.handlingClick||(i.hideOnClick&&(r?i.deferHideParentMenusTimer=Ext.defer(i.deferHideParentMenus,r,i):i.deferHideParentMenus()),t=i.fireEvent("click",i,e),i.isDestroyed)?void 0:(t!==!1&&i.handler&&Ext.callback(i.handler,i.scope,[i,e],0,i),n=Ext.isIE9m?o.returnValue===!1?!0:!1:!!o.defaultPrevented,i.href&&"click"!==e.type&&!n&&(i.handlingClick=!0,i.itemEl.dom.click(),i.handlingClick=!1),i.hideOnClick||i.focus(),t):!1},onRemoved:function(){var e=this;e.activated&&e.parentMenu.activeItem===e&&e.parentMenu.deactivateActiveItem(),Ext.Component.prototype.onRemoved.apply(this,arguments),e.parentMenu=e.ownerCmp=null},beforeDestroy:function(){var e=this;e.rendered&&e.clearTip(),Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var e=this;e.cancelDeferExpand(),e.cancelDeferHide(),clearTimeout(e.deferHideParentMenusTimer),e.setMenu(null),Ext.Component.prototype.onDestroy.apply(this,arguments)},beforeRender:function(){var e,t=this,n=t.glyph,i=Ext._glyphFontFamily,r=!!(t.icon||t.iconCls||n),o=!!t.menu,a="right"===t.iconAlign&&!o,s=t.isMenuCheckItem,l=[],d=t.ownerCt,u=d.plain;Ext.Component.prototype.beforeRender.call(this),r&&o&&t.showCheckbox&&(r=!1),"string"==typeof n&&(e=n.split("@"),n=e[0],i=e[1]),(!u||r&&!a||s)&&(d.showSeparator&&!u?l.push(t.indentCls):l.push(t.indentNoSeparatorCls)),o?l.push(t.indentRightArrowCls):r&&(a||s)&&l.push(t.indentRightIconCls),Ext.applyIf(t.renderData,{hasHref:!!t.href,href:t.href||"#",hrefTarget:t.hrefTarget,icon:t.icon,iconCls:t.iconCls,glyph:n,glyphCls:n?"x-menu-item-glyph":void 0,glyphFontFamily:i,hasIcon:r,hasMenu:o,indent:!u||r||s,isCheckItem:s,rightIcon:a,plain:t.plain,text:t.text,arrowCls:t.arrowCls,baseIconCls:t.baseIconCls,textCls:t.textCls,indentCls:l.join(" "),linkCls:t.linkCls,linkHrefCls:t.linkHrefCls,groupCls:t.group?t.groupCls:"",tabIndex:t.tabIndex})},onRender:function(){var e=this;Ext.Component.prototype.onRender.apply(this,arguments),e.tooltip&&e.setTooltip(e.tooltip,!0)},getMenu:function(){return this.menu||null},setMenu:function(e,t){var n,i=this,r=i.menu,o=i.arrowEl;r&&(r.ownerCmp=r.parentMenu=null,(t===!0||t!==!1&&i.destroyMenu)&&Ext.destroy(r)),e?(n=e.isMenu,e=i.menu=Ext.menu.Manager.get(e,{ownerCmp:i,focusOnToFront:!1}),e.setOwnerCmp(i,n)):e=i.menu=null,e&&i.rendered&&!i.destroying&&o&&o[e?"addCls":"removeCls"](i.arrowCls)},setHandler:function(e,t){this.handler=e||null,this.scope=t},setIcon:function(e){var t=this.iconEl,n=this.icon;t&&(t.src=e||Ext.BLANK_IMAGE_URL),this.icon=e,this.fireEvent("iconchange",this,n,e)},setIconCls:function(e){var t=this,n=t.iconEl,i=t.iconCls;n&&(t.iconCls&&n.removeCls(t.iconCls),e&&n.addCls(e)),t.iconCls=e,t.fireEvent("iconchange",t,i,e)},setText:function(e){var t=this,n=t.textEl||t.el,i=t.text;t.text=e,t.rendered&&(n.setHtml(e||""),t.updateLayout()),t.fireEvent("textchange",t,i,e)},getTipAttr:function(){return"qtip"===this.tooltipType?"data-qtip":"title"},clearTip:function(){Ext.quickTipsActive&&Ext.isObject(this.tooltip)&&Ext.tip.QuickTipManager.unregister(this.itemEl)},setTooltip:function(e,t){var n=this;return n.rendered?(t||n.clearTip(),Ext.quickTipsActive&&Ext.isObject(e)?(Ext.tip.QuickTipManager.register(Ext.apply({target:n.itemEl.id},e)),n.tooltip=e):n.itemEl.dom.setAttribute(n.getTipAttr(),e)):n.tooltip=e,n},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.itemEl}}},0,["menuitem"],["component","box","menuitem"],{component:!0,box:!0,menuitem:!0},["widget.menuitem"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0),Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:"x-menu-item-checked",uncheckedCls:"x-menu-item-unchecked",groupCls:"x-menu-group-icon",hideOnClick:!1,checkChangeDisabled:!1,ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:!0,isMenuCheckItem:!0,checkboxCls:"x-menu-item-checkbox",initComponent:function(){var e=this;e.checked=!!e.checked,Ext.menu.Item.prototype.initComponent.apply(this,arguments),e.group&&(Ext.menu.Manager.registerCheckable(e),e.initialConfig.hideOnClick!==!1&&(e.hideOnClick=!0))},beforeRender:function(){var e=this;Ext.menu.Item.prototype.beforeRender.call(this),Ext.apply(e.renderData,{checkboxCls:e.checkboxCls,showCheckbox:e.showCheckbox})},afterRender:function(){var e=this;Ext.menu.Item.prototype.afterRender.call(this),e.checked=!e.checked,e.setChecked(!e.checked,!0),e.checkChangeDisabled&&e.disableCheckChange()},disableCheckChange:function(){var e=this,t=e.checkEl;t&&t.addCls(e.disabledCls),Ext.isIE8&&e.rendered&&e.el.repaint(),e.checkChangeDisabled=!0},enableCheckChange:function(){var e=this,t=e.checkEl;t&&t.removeCls(e.disabledCls),e.checkChangeDisabled=!1},onClick:function(e){var t=this;return t.disabled||t.checkChangeDisabled||t.checked&&t.group||(t.setChecked(!t.checked),"keydown"!==e.type||!t.menu)?void Ext.menu.Item.prototype.onClick.call(this,e):!1},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this),Ext.menu.Item.prototype.onDestroy.apply(this,arguments)},setChecked:function(e,t){var n=this,i=n.checkedCls,r=n.uncheckedCls,o=n.el;n.checked===e||!t&&n.fireEvent("beforecheckchange",n,e)===!1||(o&&(e?(o.addCls(i),o.removeCls(r)):(o.addCls(r),o.removeCls(i))),n.checked=e,Ext.menu.Manager.onCheckChange(n,e),t||(Ext.callback(n.checkHandler,n.scope||n,[n,e]),n.fireEvent("checkchange",n,e)))}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:!0,box:!0,menuitem:!0,menucheckitem:!0},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0),Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{focusable:!1,canActivate:!1,hideOnClick:!1,plain:!0,separatorCls:"x-menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){var e=this;Ext.menu.Item.prototype.beforeRender.call(this),e.addCls(e.separatorCls)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:!0,box:!0,menuitem:!0,menuseparator:!0},["widget.menuseparator"],0,[Ext.menu,"Separator"],0),Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{enableKeyNav:!0,allowOtherMenus:!1,ariaRole:"menu",floating:!0,constrain:!0,hidden:!0,hideMode:"visibility",ignoreParentClicks:!1,isMenu:!0,showSeparator:!0,minWidth:void 0,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:!1,bringParentToFront:!1,defaultFocus:":focusable",menuClickBuffer:0,baseCls:"x-menu",_iconSeparatorCls:"x-menu-icon-separator",_itemCmpCls:"x-menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var e=this,t=["x-menu"],n=e.bodyCls?[e.bodyCls]:[],i=e.floating!==!1,r={element:"el",click:e.onClick,mouseover:e.onMouseOver,scope:e};Ext.supports.Touch&&(r.pointerdown=e.onMouseOver),e.on(r),e.on({beforeshow:e.onBeforeShow,scope:e}),e.plain&&t.push("x-menu-plain"),e.cls=t.join(" "),n.push("x-menu-body",Ext.dom.Element.unselectableCls),e.bodyCls=n.join(" "),i?void 0===e.minWidth&&(e.minWidth=e.defaultMinWidth):(e.hidden=!!e.initialConfig.hidden,e.constrain=!1),Ext.panel.Panel.prototype.initComponent.apply(this,arguments),Ext.override(e.getLayout(),{configureItem:e.configureItem})},initFloatConstrain:Ext.emptyFn,getInherited:function(){var e=Ext.panel.Panel.prototype.getInherited.call(this);return e.hidden=this.hidden,e},beforeRender:function(){Ext.panel.Panel.prototype.beforeRender.apply(this,arguments),this.getSizeModel().width.shrinkWrap||(this.layout.align="stretch")},onBoxReady:function(){var e=this,t=e._iconSeparatorCls;e.focusableKeyNav.map.processEvent=function(t){return t.keyCode===t.ESC&&(t.target=e.el.dom),t},e.focusableKeyNav.map.addBinding([{key:27,handler:e.onEscapeKey,scope:e},{key:/[\w]/,handler:e.onShortcutKey,scope:e,shift:!1,ctrl:!1,alt:!1}]),Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments),e.showSeparator&&(e.iconSepEl=e.body.insertFirst({role:"presentation",cls:t+" "+t+"-"+e.ui,html:"&#160;"})),(Ext.supports.MSPointerEvents||Ext.supports.PointerEvents)&&e.el.on({scope:e,click:e.preventClick,translate:!1}),e.mouseMonitor=e.el.monitorMouseLeave(100,e.onMouseLeave,e)},onFocusLeave:function(e){var t=this;Ext.panel.Panel.prototype.onFocusLeave.call(this,e),t.mixins.focusablecontainer.onFocusLeave.call(t,e),t.floating&&t.hide()},canActivateItem:function(e){return e&&e.isFocusable()},deactivateActiveItem:function(){var e=this,t=e.lastFocusedChild;t&&t.blur()},getItemFromEvent:function(e){for(var t=this,n=t.layout.getRenderTarget().dom,i=e.getTarget();i.parentNode!==n;)if(i=i.parentNode,!i)return;return Ext.getCmp(i.id)},lookupComponent:function(e){var t=this;return"string"==typeof e?e=t.lookupItemFromString(e):Ext.isObject(e)&&(e=t.lookupItemFromObject(e)),e.dock||(e.minWidth=e.minWidth||t.minWidth),e},lookupItemFromObject:function(e){var t=this;return e.isComponent||(e=e.xtype?Ext.ComponentManager.create(e,e.xtype):Ext.create("Ext.menu."+(Ext.isBoolean(e.checked)?"Check":"")+"Item",e)),e.isMenuItem&&(e.parentMenu=t),e},lookupItemFromString:function(e){return"separator"===e||"-"===e?new Ext.menu.Separator:new Ext.menu.Item({canActivate:!1,hideOnClick:!1,plain:!0,text:e})},configureItem:function(e){var t,n,i=this.owner,r="x-",o=i.ui;e.isMenuItem?e.setUI(o):i.items.getCount()>1&&!e.rendered&&!e.dock&&(n=i._itemCmpCls,t=[n+" "+n+"-"+o],i.plain||e.indent===!1&&"no-icon"!==e.iconCls||t.push(r+"menu-item-indent-"+o),e.rendered?e.el.addCls(t):e.cls=(e.cls||"")+" "+t.join(" "),e.$extraMenuCls=t),this.callParent(arguments)},onRemove:function(e){Ext.panel.Panel.prototype.onRemove.call(this,e),!e.isDestroyed&&e.$extraMenuCls&&e.el.removeCls(e.$extraMenuCls)},onClick:function(e){var t,n,i=this,r=e.type,o="keydown"===r;return i.disabled?void e.stopEvent():(t=i.getItemFromEvent(e),t&&t.isMenuItem&&(t.menu&&i.ignoreParentClicks?e.stopEvent():n=t.onClick(e),t.menu&&n!==!1&&o&&t.expandMenu(e,0)),(!t||t.disabled)&&(t=void 0),void i.fireEvent("click",i,t,e))},onDestroy:function(){var e=this;e.parentMenu=e.ownerCmp=null,e.rendered&&(e.el.un(e.mouseMonitor),Ext.destroy(e.iconSepEl)),Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},onMouseLeave:function(e){this.disabled||this.fireEvent("mouseleave",this,e)},onMouseOver:function(e){var t=this,n=e.getRelatedTarget(),i=!t.el.contains(n),r=t.getItemFromEvent(e),o=t.parentMenu,a=t.ownerCmp;i&&o&&(o.setActiveItem(a),a.cancelDeferHide(),o.mouseMonitor.mouseenter()),t.disabled||(r&&(r.containsFocus||r.focus(),r.expandMenu&&r.expandMenu(e)),i&&t.fireEvent("mouseenter",t,e),t.fireEvent("mouseover",t,r,e))},setActiveItem:function(e){var t=this;e&&e!==t.lastFocusedChild&&t.focusChild(e,1)},onEscapeKey:function(){this.floating&&this.hide()},onShortcutKey:function(e,t){for(var n=String.fromCharCode(t.getCharCode()),i=this.query(">[text]"),r=i.length,o=this.lastFocusedChild,a=Ext.Array.indexOf(i,o),s=a;;){if(++s===r&&(s=0),o=i[s],s===a)return;if(o.text&&o.text[0].toUpperCase()===n)return void o.focus()}},onFocusableContainerTabKey:function(){this.floating&&this.hide()},onFocusableContainerEnterKey:function(e){this.onClick(e)},onFocusableContainerSpaceKey:function(e){this.onClick(e)},onFocusableContainerLeftKey:function(){this.parentMenu&&(this.ownerCmp.focus(),this.hide())},onFocusableContainerRightKey:function(e){var t=this,n=t.lastFocusedChild;n&&n.expandMenu&&n.expandMenu(e,0)},onBeforeShow:function(){return Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer?!1:void 0},beforeShow:function(){var e,t,n=this;n.floating&&(n.hasFloatMenuParent()||n.allowOtherMenus||Ext.menu.Manager.hideAll(),e=Ext.Element.getActiveElement(),n.focusAnchor=e===document.body?null:e,n.savedMaxHeight=n.maxHeight,t=n.container.getViewSize().height,n.maxHeight=Math.min(n.maxHeight||t,t)),Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var e=this;Ext.panel.Panel.prototype.afterShow.apply(this,arguments),Ext.menu.Manager.onShow(e),e.floating&&e.autoFocus&&(e.maxHeight=e.savedMaxHeight,e.focus())},onHide:function(e,t,n){var i,r=this;r.el.contains(Ext.Element.getActiveElement())&&(i=r.focusAnchor||r.ownerCmp||r.up(":focusable"),i&&(r.previousFocus=i)),Ext.panel.Panel.prototype.onHide.call(this,e,t,n),r.lastHide=Ext.Date.now(),Ext.menu.Manager.onHide(r)},preventClick:function(e){var t=this.getItemFromEvent(e);t&&!t.href&&e.preventDefault()},privates:{hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(e,t){var n=this;n.parentMenu=e.isMenuItem?e:null,n.ownerCmp=e,n.registerWithOwnerCt(),delete n.hierarchicallyHidden,n.inheritedState&&t&&n.invalidateInheritedState(),n.reference&&n.fixReference(),t&&Ext.ComponentManager.markReferencesDirty()}}},0,["menu"],["component","box","container","panel","menu"],{component:!0,box:!0,container:!0,panel:!0,menu:!0},["widget.menu"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.menu,"Menu"],0),Ext.cmd.derive("Ext.grid.locking.HeaderContainer",Ext.grid.header.Container,{headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(e){var t=this,n=e.lockedGrid,i=e.normalGrid;t.lockable=e,Ext.grid.header.Container.prototype.constructor.call(this),n.visibleColumnManager.rootColumns=i.visibleColumnManager.rootColumns=e.visibleColumnManager=t.visibleColumnManager=new Ext.grid.ColumnManager(!0,n.headerCt,i.headerCt),n.columnManager.rootColumns=i.columnManager.rootColumns=e.columnManager=t.columnManager=new Ext.grid.ColumnManager(!1,n.headerCt,i.headerCt),t.relayEvents(n.headerCt,t.headerCtRelayEvents),t.relayEvents(i.headerCt,t.headerCtRelayEvents)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var e=this,t=e.lockable.lockedGrid.headerCt.getColumnsState(),n=e.lockable.normalGrid.headerCt.getColumnsState();return t.concat(n)},applyColumnsState:function(e){var t,n,i,r,o=this,a=o.lockable.lockedGrid,s=a.headerCt,l=o.lockable.normalGrid.headerCt,d=Ext.Array.toValueMap(s.items.items,"stateId"),u=Ext.Array.toValueMap(l.items.items,"stateId"),c=[],h=[],p=1,f=e.length;for(t=0;f>t;t++)r=e[t],i=d[r.id],n=i||u[r.id],n&&(n.applyColumnState&&n.applyColumnState(r),void 0===n.locked&&(n.locked=!!i),n.locked?(c.push(n),n.hidden||"number"!=typeof n.width||(p+=n.width)):h.push(n));c.length+h.length===s.items.getCount()+l.items.getCount()&&(s.removeAll(!1),l.removeAll(!1),s.add(c),l.add(h),a.setWidth(p))},disable:function(){var e=this.lockable;e.lockedGrid.headerCt.disable(),e.normalGrid.headerCt.disable()},enable:function(){var e=this.lockable;e.lockedGrid.headerCt.enable(),e.normalGrid.headerCt.enable()}},1,0,["component","box","container","headercontainer"],{component:!0,box:!0,container:!0,headercontainer:!0},0,0,[Ext.grid.locking,"HeaderContainer"],0),Ext.cmd.derive("Ext.grid.locking.View",Ext.Base,{alternateClassName:"Ext.grid.LockingView",isLockingView:!0,loadMask:!0,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(e){var t,n,i=this;i.ownerGrid=e.ownerGrid,i.ownerGrid.view=i,i.navigationModel="treepanel"===e.locked.xtype?new Ext.tree.NavigationModel(i):new Ext.grid.NavigationModel(i),
e.locked.viewConfig.bindStore=Ext.emptyFn,e.normal.viewConfig.bindStore=i.subViewBindStore,e.normal.viewConfig.isNormalView=e.locked.viewConfig.isLockedView=!0,e.locked.viewConfig.beforeLayout=e.normal.viewConfig.beforeLayout=i.beforeLayout,e.locked.viewConfig.navigationModel=e.normal.viewConfig.navigationModel=i.navigationModel,i.lockedGrid=i.ownerGrid.lockedGrid=Ext.ComponentManager.create(e.locked),i.lockedView=t=i.lockedGrid.getView(),i.ownerGrid.shrinkWrapLocked&&(i.lockedGrid.width+=Ext.num(t.getSelectionModel().headerWidth,0)+(i.lockedGrid.getVisibleColumnManager().getColumns().length?1:0)),i.selModel=e.normal.viewConfig.selModel=t.getSelectionModel(),i.lockedGrid.isTree&&(i.lockedView.animate=!1,e.normal.store=t.store,e.normal.viewConfig.stripeRows=i.lockedView.stripeRows,e.normal.rowLines=i.lockedGrid.rowLines),i.normalGrid=i.ownerGrid.normalGrid=Ext.ComponentManager.create(e.normal),t.lockingPartner=n=i.normalView=i.normalGrid.getView(),n.lockingPartner=t,i.loadMask=void 0!==e.loadMask?e.loadMask:i.loadMask,i.mixins.observable.constructor.call(i),i.relayEvents(t,Ext.view.Table.events),i.relayEvents(n,Ext.view.Table.events),n.on({scope:i,itemmouseleave:i.onItemMouseLeave,itemmouseenter:i.onItemMouseEnter}),t.on({scope:i,itemmouseleave:i.onItemMouseLeave,itemmouseenter:i.onItemMouseEnter}),i.ownerGrid.on({render:i.onPanelRender,scope:i}),i.loadingText=n.loadingText,i.loadingCls=n.loadingCls,i.loadingUseMsg=n.loadingUseMsg,i.itemSelector=i.getItemSelector(),i.all=n.all,i.bindStore(n.dataSource,!0,"dataSource")},subViewBindStore:function(e){var t=this,n=t.getSelectionModel();null===e||t.ownerGrid.reconfiguring||(e=t.store),n.bindStore(e),n.bindComponent(t)},beforeLayout:function(){var e=this.ownerCt.ownerLockable.view,t=e.lockedGrid.view,n=e.normalGrid.view;e.relayingOperation||(e.lockedGrid.isVisible()&&t.refreshNeeded&&t.doFirstRefresh(t.dataSource),n.refreshNeeded&&n.doFirstRefresh(n.dataSource))},onPanelRender:function(){var e=this,t=e.loadMask,n={target:e.ownerGrid,msg:e.loadingText,msgCls:e.loadingCls,useMsg:e.loadingUseMsg,store:e.ownerGrid.store};e.el=e.ownerGrid.getTargetEl(),e.rendered=!0,e.initFocusableEvents(),e.fireEvent("render",e),t&&(Ext.isObject(t)&&(n=Ext.apply(n,t)),e.loadMask=new Ext.LoadMask(n))},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(e){return this.getViewForColumn(e).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getItemSelector:function(){return this.normalView.getItemSelector()},getViewForColumn:function(e){var t,n=this.lockedView;return n.headerCt.cascade(function(n){return n===e?(t=!0,!1):void 0}),t?n:this.normalView},onItemMouseEnter:function(e,t){var n,i=this,r=i.lockedView,o=i.normalView;e.trackOver&&(e!==r&&(o=r),n=o.getNode(t),o.highlightItem(n))},onItemMouseLeave:function(e){var t=this,n=t.lockedView,i=t.normalView;e.trackOver&&(e!==n&&(i=n),i.clearHighlight())},relayFn:function(e,t){t=t||[];var n=this,i=n.lockedView;n.relayingOperation=!0,i[e].apply(i,t),i=n.normalView,i[e].apply(i,t),n.relayingOperation=!1},getSelectionModel:function(){return this.normalView.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(e){var t=this,n=t.lockedView,i=t.normalView;!i.componentLayoutCounter||n.blockRefresh&&i.blockRefresh||(Ext.suspendLayouts(),n.doFirstRefresh(e),i.doFirstRefresh(e),Ext.resumeLayouts(!0))},getStoreListeners:function(){var e=this;return{refresh:e.onDataRefresh,replace:e.onReplace,add:e.onAdd,remove:e.onRemove,update:e.onUpdate,clear:e.refresh,beginupdate:e.onBeginUpdate,endupdate:e.onEndUpdate}},onBeginUpdate:function(){Ext.suspendLayouts(),this.relayFn("onBeginUpdate",arguments),Ext.resumeLayouts(!0)},onEndUpdate:function(){Ext.suspendLayouts(),this.relayFn("onEndUpdate",arguments),Ext.resumeLayouts(!0)},onDataRefresh:function(){Ext.suspendLayouts(),this.relayFn("onDataRefresh",arguments),Ext.resumeLayouts(!0)},onReplace:function(){Ext.suspendLayouts(),this.relayFn("onReplace",arguments),Ext.resumeLayouts(!0)},onAdd:function(){Ext.suspendLayouts(),this.relayFn("onAdd",arguments),Ext.resumeLayouts(!0)},onRemove:function(){Ext.suspendLayouts(),this.relayFn("onRemove",arguments),Ext.resumeLayouts(!0)},onUpdate:function(){var e=this.normalGrid.view;Ext.suspendLayouts(),this.relayFn("onUpdate",arguments),e.hasVariableRowHeight()&&e.bufferedRenderer&&Ext.on({afterlayout:e.bufferedRenderer.refreshSize,scope:e.bufferedRenderer,single:!0}),Ext.resumeLayouts(!0)},refresh:function(){Ext.suspendLayouts(),this.relayFn("refresh",arguments),Ext.resumeLayouts(!0)},getNode:function(e){return this.normalView.getNode(e)},getRow:function(e){return this.normalView.getRow(e)},getCell:function(e,t){var n=this.getViewForColumn(t),i=n.getRow(e);return Ext.fly(i).down(t.getCellSelector())},indexOf:function(e){var t=this.lockedView.indexOf(e);return t||(t=this.normalView.indexOf(e)),t},focus:function(){var e=this.ownerGrid.down(">tablepanel:not(hidden)>tableview");e&&e.focus()},focusRow:function(e){var t,n=this.getNavigationModel().lastFocused;t=n?n.view:this.normalView,t.focusRow(e)},focusCell:function(e){e.view.focusCell(e)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},isVisible:function(e){return this.ownerGrid.isVisible(e)},getFocusEl:function(){var e,t=this.getNavigationModel().lastFocused;return e=t?t.view:this.normalView,e.getFocusEl()},getCellInclusive:function(e,t){var n=e.column,i=this.lockedGrid.getColumnManager().getColumns().length;return n>=i?(e=Ext.apply({},e),e.column-=i,this.normalView.getCellInclusive(e,t)):this.lockedView.getCellInclusive(e,t)},getHeaderByCell:function(e){return e?this.getVisibleColumnManager().getHeaderById(e.getAttribute("data-columnId")):!1},onRowSelect:function(){this.relayFn("onRowSelect",arguments)},onRowDeselect:function(){this.relayFn("onRowDeselect",arguments)},onCellSelect:function(e){e.column.getView().onCellSelect({record:e.record,column:e.column})},onCellDeselect:function(e){e.column.getView().onCellDeselect({record:e.record,column:e.column})},getCellByPosition:function(e,t){var n=this,i=e.view,r=e.column;return i===n&&(i=r.getView()),i.getCellByPosition(e,t)},getRecord:function(e){var t=this.lockedView.getRecord(e);return t||(t=this.normalView.getRecord(e)),t},scrollBy:function(){var e=this.normalView;e.scrollBy.apply(e,arguments)},ensureVisible:function(){var e=this.normalView;e.ensureVisible.apply(e,arguments)},disable:function(){this.relayFn("disable",arguments)},enable:function(){this.relayFn("enable",arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var e=this;e.bindStore(null,!1,"dataSource"),e.isDestroyed=!0,e.clearListeners(),Ext.destroy(e.loadMask,e.navigationModel,e.selModel)}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable]],[Ext.grid.locking,"View",Ext.grid,"LockingView"],function(){this.borrow(Ext.Component,["up"]),this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"]),this.borrow(Ext.view.Table,["cellSelector","selectedCellCls","selectedItemCls"])}),Ext.cmd.derive("Ext.grid.locking.Lockable",Ext.Base,{alternateClassName:"Ext.grid.Lockable",syncRowHeight:!0,headerCounter:0,scrollDelta:40,lockedGridCls:"x-grid-inner-locked",normalGridCls:"x-grid-inner-normal",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["invalidateScrollerOnRefresh","hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer"],normalCfgCopy:["verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(e){var t,n,i,r,o,a=this;if(a.subGridXType)t=a.subGridXType;else{if(!e)return"gridpanel";n=this.getXTypes().split("/"),i=n.length,r=n[i-1],o=n[i-2],t="tablepanel"!==o?o:r}return t},injectLockable:function(){this.focusable=!1,this.lockable=!0,this.hasView=!0;var e,t,n,i,r,o,a,s,l=this,d=Ext.getScrollbarSize(),u=d.width,c=l.store=Ext.StoreManager.lookup(l.store),h=l.lockedViewConfig,p=l.normalViewConfig,f=Ext.Object,g=l.viewConfig,m=g&&g.loadMask,x=void 0!==m?m:l.loadMask,v=l.bufferedRenderer,y=u>0&&2!==Ext.supports.touchScroll;for(e=l.constructLockableFeatures(),l.features=null,t=l.constructLockablePlugins(),l.plugins=t.topPlugins,n={id:l.id+"-locked",isLocked:!0,bufferedRenderer:v,ownerGrid:l,ownerLockable:l,xtype:l.determineXTypeToCreate(!0),store:c,reserveScrollbar:y,scrollable:{indicators:{x:!0,y:!1}},scrollerOwner:!1,animate:!1,border:!1,cls:l.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||l.normalGrid.floatedFromCollapse},features:e.lockedFeatures,plugins:t.lockedPlugins},i={id:l.id+"-normal",isLocked:!1,bufferedRenderer:v,ownerGrid:l,ownerLockable:l,xtype:l.determineXTypeToCreate(),store:c,reserveScrollbar:l.reserveScrollbar,scrollerOwner:!1,border:!1,cls:l.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||l.lockedGrid.floatedFromCollapse},features:e.normalFeatures,plugins:t.normalPlugins},l.addCls("x-grid-locked"),Ext.copyTo(i,l,l.bothCfgCopy,!0),Ext.copyTo(n,l,l.bothCfgCopy,!0),Ext.copyTo(i,l,l.normalCfgCopy,!0),Ext.copyTo(n,l,l.lockedCfgCopy,!0),Ext.apply(i,l.normalGridConfig),Ext.apply(n,l.lockedGridConfig),r=0;r<l.normalCfgCopy.length;r++)delete l[l.normalCfgCopy[r]];for(r=0;r<l.lockedCfgCopy.length;r++)delete l[l.lockedCfgCopy[r]];l.addStateEvents(["lockcolumn","unlockcolumn"]),o=l.processColumns(l.columns||[],n),n.columns=o.locked,n.columns.items.length||(n.hidden=!0),i.columns=o.normal,i.columns.items.length||(i.hidden=!0),i.flex=1,n.viewConfig=h=h?f.chain(h):{},i.viewConfig=p=p?f.chain(p):{},h.loadingUseMsg=!1,h.loadMask=!1,y&&(h.margin="0 -"+u+" 0 0"),p.loadMask=!1,Ext.applyIf(h,g),Ext.applyIf(p,g),l.initialConfig.layout||(l.layout={type:"hbox",align:"stretch"}),l.getLayout(),"border"===l.layout.type&&(l.split&&(n.split=!0),n.region||(n.region="west"),i.region||(i.region="center"),l.addCls("x-grid-locked-split")),l.layout instanceof Ext.layout.container.Box||(l.split=!1),l.view=new Ext.grid.locking.View({loadMask:x,locked:n,normal:i,ownerGrid:l}),n=l.lockedGrid,i=l.normalGrid,i.getView().getScrollable().addPartner(n.getView().getScrollable(),"y"),d.height&&2!==Ext.supports.touchScroll&&(n.on({afterlayout:l.afterLockedViewLayout,scope:l}),n.getView().getOverflowStyle()),a=n.headerCt,s=i.headerCt,y&&(a.reserveScrollbar=!1),l.headerCt=l.view.headerCt=new Ext.grid.locking.HeaderContainer(l),a.lockedCt=!0,a.lockableInjected=!0,s.lockableInjected=!0,a.on({add:l.delaySyncLockedWidth,remove:l.delaySyncLockedWidth,columnshow:l.delaySyncLockedWidth,columnhide:l.delaySyncLockedWidth,sortchange:l.onLockedHeaderSortChange,columnresize:l.delaySyncLockedWidth,scope:l}),s.on({add:l.delaySyncLockedWidth,remove:l.delaySyncLockedWidth,columnshow:l.delaySyncLockedWidth,columnhide:l.delaySyncLockedWidth,sortchange:l.onNormalHeaderSortChange,scope:l}),l.modifyHeaderCt(),l.items=[n],l.split&&(l.addCls("x-grid-locked-split"),l.items[1]={xtype:"splitter"}),l.items.push(i),l.relayHeaderCtEvents(a),l.relayHeaderCtEvents(s),l.storeRelayers=l.relayEvents(c,["filterchange","groupchange"]),l.gridRelayers=l.relayEvents(i,["viewready"])},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(e,t){var n,i,r,o,a=this,s=new Ext.grid.header.Container,l=[],d=[],u={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:l},c={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:d},h={lockedWidth:t.width||0,locked:u,normal:c},p=!(t.width||t.flex);for(a.hasOwnProperty("shrinkWrapLocked")||(a.shrinkWrapLocked=p),Ext.isObject(e)&&(Ext.applyIf(u,e),Ext.applyIf(c,e),o=Ext.apply({},e),delete o.items,Ext.apply(s,o),e=e.items),s.constructing=!0,n=0,i=e.length;i>n;++n)r=e[n],r.isComponent||(r=s.applyDefaults(r),r.initOwnerCt=s,r=s.lookupComponent(r),delete r.initOwnerCt),r.processed=!0,r.locked||r.autoLock?(p&&!r.hidden&&(h.lockedWidth+=a.getColumnWidth(r)||s.defaultWidth),l.push(r)):d.push(r),r.headerId||(r.headerId=(r.initialConfig||r).id||"h"+ ++a.headerCounter);return a.fireEvent("processcolumns",a,l,d),s.destroy(),p&&(t.width=h.lockedWidth),h},getColumnWidth:function(e){var t,n,i,r=e.width||0;if(!r&&e.isGroupHeader)for(t=e.items.items,n=t.length,i=0;n>i;i++)r+=this.getColumnWidth(t[i]);return r},afterLockedViewLayout:function(){var e=this,t=e.lockedGrid,n=e.normalGrid,i=t.getView(),r=n.getView(),o=Ext.getScrollbarSize().height,a=i.scrollFlags.x&&t.headerCt.tooNarrow?o:0,s=r.scrollFlags.x&&n.headerCt.tooNarrow?o:0,l=r.getScrollable(),d=i.getScrollable();a!==s?a?(l.setX("scroll"),d.setX(!0)):(d.setX("scroll"),l.setX(!0)):(d.setX(s?"scroll":!0),l.setX(!0))},ensureLockedVisible:function(){this.lockedGrid.ensureVisible.apply(this.lockedGrid,arguments),this.normalGrid.ensureVisible.apply(this.normalGrid,arguments)},onLockedViewMouseWheel:function(e){var t,n,i,r=this,o=-r.scrollDelta*e.getWheelDeltas().y,a=r.lockedGrid.getView(),s=a.el.dom;r.ignoreMousewheel||(s&&(t=a.getScrollY(),n=t!==s.scrollHeight-s.clientHeight,i=0!==t),(0>o&&i||o>0&&n)&&(e.stopEvent(),t+=o,a.setScrollY(t),r.normalGrid.getView().setScrollY(t),r.onNormalViewScroll()))},onLockedViewScroll:function(){var e,t,n=this,i=n.lockedGrid.getView(),r=n.normalGrid.getView(),o=i.getScrollY(),a=r.getScrollY();a!==o&&(r.setScrollY(o),r.bufferedRenderer&&(t=i.body.dom,e=r.body.dom,e.style.position="absolute",e.style.top=t.style.top))},onNormalViewScroll:function(){var e,t=this,n=t.lockedGrid.getView(),i=t.normalGrid.getView(),r=n.getScrollY(),o=i.getScrollY();o!==r&&(n.setScrollY(o),i.bufferedRenderer&&(e=n.body,e.dom&&(e.dom.style.position="absolute",e.translate(null,i.bufferedRenderer.bodyTop))))},syncRowHeights:function(){if(!this.isDestroyed){var e,t=this,n=t.normalGrid.getView(),i=t.lockedGrid.getView(),r=n.syncRowHeightBegin(),o=i.syncRowHeightBegin();n.syncRowHeightMeasure(r),i.syncRowHeightMeasure(o),n.syncRowHeightFinish(r,o),i.syncRowHeightFinish(o,r),e=n.getScrollY(),i.setScrollY(e)}},modifyHeaderCt:function(){var e=this;e.lockedGrid.headerCt.getMenuItems=e.getMenuItems(e.lockedGrid.headerCt.getMenuItems,!0),e.normalGrid.headerCt.getMenuItems=e.getMenuItems(e.normalGrid.headerCt.getMenuItems,!1),e.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(e.lockedGrid.headerCt.showMenuBy,e.showMenuBy),e.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(e.normalGrid.headerCt.showMenuBy,e.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(e,t,n){var i=this.getMenu(),r=i.down("#unlockItem"),o=i.down("#lockItem"),a=r.prev();n.lockable===!1?(a.hide(),r.hide(),o.hide()):(a.show(),r.show(),o.show(),r.initialConfig.disabled||r.setDisabled(n.lockable===!1),o.initialConfig.disabled||o.setDisabled(!n.isLockable()))},getMenuItems:function(e,t){var n=this,i=n.unlockText,r=n.lockText,o="x-hmenu-unlock",a="x-hmenu-lock",s=n.onUnlockMenuClick.bind(n),l=n.onLockMenuClick.bind(n);return function(){var n=e.call(this);return n.push("-",{itemId:"unlockItem",iconCls:o,text:i,handler:s,disabled:!t}),n.push({itemId:"lockItem",iconCls:a,text:r,handler:l,disabled:t}),n}},delaySyncLockedWidth:function(){var e=this,t=e.syncLockedWidthTask;t||(t=e.syncLockedWidthTask=new Ext.util.DelayedTask(e.syncLockedWidth,e)),t.delay(1)},syncLockedWidth:function(){var e=this,t=e.rendered,n=e.lockedGrid,i=n.view,r=e.normalGrid,o=n.getVisibleColumnManager().getColumns().length,a=r.getVisibleColumnManager().getColumns().length,s=e.syncLockedWidthTask;return s&&s.cancel(),Ext.suspendLayouts(),a?(r.show(),o?(t&&e.shrinkWrapLocked&&!n.headerCt.forceFit&&(delete n.flex,n.setWidth(n.headerCt.getTableWidth()+n.el.getBorderWidth("lr"))),n.addCls(e.lockedGridCls),n.show(),e.split&&e.child("splitter").show()):(t&&n.getView().clearViewEl(!0),n.hide(),e.split&&e.child("splitter").hide()),2!==Ext.supports.touchScroll&&Ext.Component.pendingLayouts&&i.getScrollable().setX(!0),t&&(e.ignoreMousewheel=i.scrollFlags.y)):(r.hide(),t&&i.getEl().setStyle("border-bottom-width","0"),n.flex=1,delete n.width,n.removeCls(e.lockedGridCls),n.show(),e.ignoreMousewheel=!0),Ext.resumeLayouts(!0),[o,a]},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(e,t,n){var i,r,o,a=this,s=a.normalGrid,l=a.lockedGrid,d=s.view,u=l.view,c=s.headerCt;e=e||c.getMenu().activeHeader,o=e.hasFocus,n=n||l.headerCt,r=e.ownerCt,e.isLockable()&&(e.flex&&(e.width=e.getWidth(),e.flex=null),Ext.suspendLayouts(),l.hidden&&l.show(),d.blockRefresh=u.blockRefresh=!0,r.remove(e,!1),e.locked=!0,Ext.isDefined(t)?n.insert(t,e):n.add(e),d.blockRefresh=u.blockRefresh=!1,i=a.syncLockedWidth(),i[0]&&l.getView().refreshView(),i[1]&&s.getView().refreshView(),Ext.resumeLayouts(!0),o&&e.focus(),a.fireEvent("lockcolumn",a,e))},unlock:function(e,t,n){var i,r,o=this,a=o.normalGrid,s=o.lockedGrid,l=a.view,d=s.view,u=s.headerCt;Ext.isDefined(t)||(t=0),e=e||u.getMenu().activeHeader,r=e.hasFocus,n=n||a.headerCt,Ext.suspendLayouts(),l.blockRefresh=d.blockRefresh=!0,e.ownerCt.remove(e,!1),e.locked=!1,n.insert(t,e),l.blockRefresh=d.blockRefresh=!1,i=o.syncLockedWidth(),i[0]&&s.getView().refreshView(),i[1]&&a.getView().refreshView(),Ext.resumeLayouts(!0),r&&e.focus(),o.fireEvent("unlockcolumn",o,e)},reconfigureLockable:function(e,t){var n,i=this,r=i.store,o=i.lockedGrid,a=i.normalGrid;e&&e!==r&&(e=Ext.data.StoreManager.lookup(e),i.store=e,o.view.blockRefresh=a.view.blockRefresh=!0,o.bindStore(e),n=o.view,n.store=e,n.dataSource.isFeatureStore||(n.dataSource=e),n.bufferedRenderer&&n.bufferedRenderer.bindStore(e),a.bindStore(e),n=a.view,n.store=e,n.dataSource.isFeatureStore||(n.dataSource=e),n.bufferedRenderer&&n.bufferedRenderer.bindStore(e),i.view.store=e,i.view.bindStore(a.view.dataSource,!1,"dataSource"),o.view.blockRefresh=a.view.blockRefresh=!1),t&&(o.reconfiguring=a.reconfiguring=!0,o.headerCt.removeAll(),a.headerCt.removeAll(),t=i.processColumns(t,o),o.headerCt.add(t.locked.items),a.headerCt.add(t.normal.items),o.reconfiguring=a.reconfiguring=!1,i.syncLockedWidth()),i.refreshCounter=o.view.refreshCounter},afterReconfigureLockable:function(){var e=this.lockedGrid.getView();this.refreshCounter===e.refreshCounter&&this.view.refresh()},constructLockableFeatures:function(){var e,t,n,i,r,o=this.features,a=0;if(o)for(Ext.isArray(o)||(o=[o]),n=[],i=[],r=o.length;r>a;a++)switch(e=o[a],e.isFeature||(e=Ext.create("feature."+e.ftype,e)),e.lockableScope){case"locked":n.push(e);break;case"normal":i.push(e);break;default:e.lockableScope="both",n.push(e),i.push(t=e.clone()),t.lockingPartner=e,e.lockingPartner=t}return{normalFeatures:i,lockedFeatures:n}},constructLockablePlugins:function(){var e,t,n,i,r,o,a,s,l,d=this.plugins,u=0;if(d)for(Ext.isArray(d)||(d=[d]),i=[],r=[],o=[],a=d.length;a>u;u++)switch(e=d[u],e.init?s=e.lockableScope:(l=e.ptype?Ext.ClassManager.getByAlias("plugin."+e.ptype):Ext.ClassManager.get(e.xclass),s=l.prototype.lockableScope),s){case"both":r.push(n=e.clonePlugin()),o.push(t=e.clonePlugin()),n.lockingPartner=t,t.lockingPartner=n,Ext.destroy(e);break;case"locked":r.push(e);break;case"normal":o.push(e);break;default:i.push(e)}return{topPlugins:i,normalPlugins:o,lockedPlugins:r}},destroyLockable:function(){var e=this,t=e.syncLockedWidthTask;t&&(t.cancel(),e.syncLockedWidthTask=null),Ext.destroy(e.view,e.headerCt)}},0,0,0,0,0,0,[Ext.grid.locking,"Lockable",Ext.grid,"Lockable"],function(){this.borrow(Ext.Component,["constructPlugin"])}),Ext.cmd.derive("Ext.grid.plugin.BufferedRenderer",Ext.AbstractPlugin,{isBufferedRenderer:!0,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:!0,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,loadId:0,init:function(e){var t=this,n=e.view,i={scroll:t.onViewScroll,resize:t.onViewResize,refresh:t.onViewRefresh,columnschanged:t.checkVariableRowHeight,boxready:t.onViewBoxReady,scope:t,destroyable:!0},r=n.initialConfig;(e.isTree||e.ownerLockable&&e.ownerLockable.isTree)&&(n.blockRefresh=!1,r&&void 0===r.loadMask&&(n.loadMask=!0)),n.positionBody&&(i.refresh=t.onViewRefresh),t.grid=e,t.view=n,t.isRTL=n.getInherited().rtl,n.bufferedRenderer=t,n.preserveScrollOnRefresh=!0,n.animate=!1,t.bindStore(n.dataSource),n.hasOwnProperty("rowHeight")&&(t.rowHeight=n.rowHeight),t.position=0,t.gridListeners=e.on({reconfigure:"onReconfigure",scope:t,destroyable:!0}),t.viewListeners=n.on(i)},checkVariableRowHeight:function(){var e=this,t=e.grid;e.variableRowHeight=e.view.hasVariableRowHeight(),t.ownerLockable&&(t.ownerLockable.syncRowHeight=e.variableRowHeight)},bindStore:function(e){var t=this,n=t.view,i=n.dataSource,r=i&&i.isFeatureStore;r===e.isFeatureStore&&(t.store&&t.unbindStore(),t.storeListeners=e.on({scope:t,groupchange:t.onStoreGroupChange,clear:t.onStoreClear,beforeload:t.onBeforeStoreLoad,load:t.onStoreLoad,destroyable:!0}),t.store=e),t.view.componentLayout.layoutCount&&(delete t.viewSize,e.isBufferedStore&&e.setViewSize(t.viewSize),t.onViewResize(t.view,0,t.view.getHeight()))},onReconfigure:function(e,t){t&&t!==this.store&&this.bindStore(t)},unbindStore:function(){this.storeListeners.destroy(),this.store=null},onBeforeStoreLoad:function(){var e=this.view;e&&e.rendered&&(e.el.dom.style.pointerEvents="none"),this.disable()},onStoreLoad:function(){var e=this.view;e&&e.rendered&&(e.el.dom.style.pointerEvents=""),this.enable()},onStoreClear:function(){var e=this,t=e.view;t.rendered&&!e.store.isDestroyed&&(0!==e.scrollTop&&(e.bodyTop=e.scrollTop=e.position=e.scrollHeight=0,e.view.setScrollY(0)),e.lastScrollDirection=e.scrollOffset=null,t.hasOwnProperty("rowHeight")||delete e.rowHeight)},onStoreGroupChange:function(){this.refreshSize()},onViewBoxReady:function(e){this.refreshScroller(e,this.scrollHeight)},onViewRefresh:function(e,t){var n,i=this,r=e.all;return i.checkVariableRowHeight(),e.componentLayoutCounter||!e.headerCt.down("{flex}")&&!i.variableRowHeight?(!e.hasOwnProperty("rowHeight")&&r.getCount()&&delete i.rowHeight,i.refreshSize(),void(i.refreshing||(i.scrollTop!==e.getScrollY()?i.onViewScroll():(i.hasOwnProperty("bodyTop")||(i.bodyTop=r.startIndex*i.rowHeight,e.setScrollY(i.bodyTop)),i.setBodyTop(i.bodyTop),n=e.getHeight(),r.getCount()&&n>0&&(i.onViewResize(e,null,n),t&&r.getCount()!==t.length&&(t.length=0,t.push.apply(t,i.store.getRange(r.startIndex,r.endIndex)))))))):void e.on({boxready:Ext.Function.pass(i.onViewRefresh,[e,t],i),single:!0})},refreshSize:function(){var e=this,t=e.view,n=t.all,i=e.getScrollHeight();n.count&&n.endIndex===e.store.getCount()-1?i=e.scrollHeight=e.bodyTop+t.body.dom.offsetHeight:i!==e.scrollHeight&&(e.scrollHeight=i),e.stretchView(t,i)},onViewResize:function(e,t,n,i,r){var o,a=this;r&&n===r||(o=Math.ceil(n/a.rowHeight)+a.trailingBufferZone+a.leadingBufferZone,a.viewSize=a.setViewSize(o),a.viewClientHeight=e.el.dom.clientHeight),2===e.touchScroll&&e.getScrollable().setElementSize(null)},onWrappedColumnWidthChange:function(e,t){var n=this,i=n.view;n.store.getCount()&&n.bodyTop&&(n.refreshSize(),n.setViewSize(Math.ceil(i.getHeight()/n.rowHeight)+n.trailingBufferZone+n.leadingBufferZone),n.viewSize>=n.store.getCount()?n.setBodyTop(0):t>e&&n.bodyTop+i.body.dom.offsetHeight-1>n.scrollHeight?n.setBodyTop(Math.max(0,n.scrollHeight-i.body.dom.offsetHeight)):(n.bodyTop>n.scrollTop||n.bodyTop+i.body.dom.offsetHeight<n.scrollTop+i.getHeight(!0))&&n.setBodyTop(n.scrollTop-n.trailingBufferZone*n.rowHeight))},stretchView:function(e,t){var n,i,r=this,o=r.store.getCount();r.scrollTop>t&&(r.position=r.scrollTop=t-e.body.dom.offsetHeight,e.setScrollY(r.scrollTop)),r.bodyTop>t&&e.body.translate(null,r.bodyTop=r.position),e.touchScroll&&(e.getScrollable()?r.refreshScroller(e,t):r.pendingScrollerRefresh||(e.on({boxready:function(){r.refreshScroller(e,t),r.pendingScrollerRefresh=!1},single:!0}),r.pendingScrollerRefresh=!0)),Ext.supports.touchScroll&&1!==Ext.supports.touchScroll||(r.stretcher||(n=e.getTargetEl(),e.refreshCounter&&e.fixedNodes++,i={role:"presentation",style:{width:"1px",height:"1px",marginTop:t-1+"px",position:"absolute"}},i.style[r.isRTL?"right":"left"]=0,r.stretcher=n.createChild(i,n.dom.firstChild)),r.hasOwnProperty("viewSize")&&o<=r.viewSize?r.stretcher.dom.style.display="none":(r.stretcher.dom.style.marginTop=t-1+"px",r.stretcher.dom.style.display=""))},refreshScroller:function(e,t){var n=e.getScrollable();n&&n.setSize({x:e.headerCt.getTableWidth(),y:t})},setViewSize:function(e,t){var n,i,r,o,a,s,l,d,u=this,c=u.store,h=u.view,p=h.all,f=p.getCount(),g=u.view.lockingPartner&&u.view.lockingPartner.bufferedRenderer,m=f-e;if(g&&!t&&g.view.componentLayoutCounter&&(g.viewSize>e?e=g.viewSize:g.setViewSize(e,!0)),m=f-e,m&&(u.scrollTop=h.getScrollY(),u.viewSize=e,c.isBufferedStore&&c.setViewSize(e),f&&(d=c.getCount(),n=p.startIndex,i=Math.min(n+e-1,d-1),n!==p.startIndex||i!==p.endIndex))){if(g&&g.disable(),0>m)d>f&&c.getRange(p.endIndex+1,i,{callback:function(e,t){l=h.doAdd(e,t),h.fireEvent("itemadd",e,t,l)}});else if(n=p.endIndex-(m-1),i=p.endIndex,s=p.slice(n,i+1),p.removeRange(n,i,!0),h.hasListeners.itemremove)for(a=c.getRange(n,i),r=i,o=a.length-1;o>=0;--r,--o)h.fireEvent("itemremove",a[o],r,s[o]);g&&g.enable()}return e},getViewRange:function(){var e=this,t=e.view.all,n=e.store,i=0;return t.getCount()?i=t.startIndex:n.isBufferedStore&&(n.currentPage||(n.currentPage=1),i=t.startIndex=(n.currentPage-1)*(n.pageSize||1),n.currentPage=1),n.data.getCount()?n.getRange(i,i+(e.viewSize||n.defaultViewSize)-1):[]},onReplace:function(e,t,n,i){var r,o=this,a=o.view,s=a.all,l=s.getCount(),d=t+n.length-1,u=i.length-n.length,c=u*o.rowHeight;return t>=s.startIndex+o.viewSize?void o.refreshSize():l&&d<s.startIndex?(s.moveBlock(u),o.refreshSize(),r=s.startIndex,u>0&&(o.doNotMirror=!0,o.handleViewScroll(-1),o.doNotMirror=!1),s.startIndex===r?s.startIndex&&(o.setBodyTop(o.bodyTop+=c),a.suspendEvent("scroll"),a.scrollBy(0,c),a.resumeEvent("scroll"),o.position=o.scrollTop=a.getScrollY()):(a.suspendEvent("scroll"),a.scrollBy(0,(r-s.startIndex)*o.rowHeight),a.resumeEvent("scroll")),void a.refreshSize(s.getCount()!==l)):l&&t>s.endIndex?(o.refreshSize(),u>0&&o.onRangeFetched(null,s.startIndex,Math.min(e.getCount(),s.startIndex+o.viewSize)-1,null,!0),void a.refreshSize(s.getCount()!==l)):t<s.startIndex&&d<s.endIndex?void o.refreshView(s.startIndex-n.length+i.length):(t<s.startIndex&&d<=s.endIndex&&c&&(a.suspendEvent("scroll"),a.setScrollY(o.position=o.scrollTop+=c),a.resumeEvent("scroll")),void o.refreshView())},scrollTo:function(e,t){var n,i,r,o,a,s,l,d,u,c,h,p,f,g,m=arguments,x=this,v=x.view,y=v.lockingPartner&&v.lockingPartner.grid.isVisible()&&v.lockingPartner.bufferedRenderer,E=v.el.dom,b=x.store,C=b.getCount(),w=0;if(t&&"object"==typeof t?(u=t.select,c=t.focus,p=t.highlight,h=t.animate,f=t.callback,g=t.scope):(u=m[1],f=m[2],g=m[3]),(a=v.dataSource.groupingFeature)&&a.collapsible)l=e.isEntity?e:v.store.getAt(Math.min(Math.max(e,0),v.store.getCount()-1)),s=a.getMetaGroup(l),s&&s.isCollapsed&&(a.expand(a.getGroup(l).getGroupKey()),C=b.getCount()),e=a.indexOf(l);else if(e.isEntity){if(l=e,e=b.indexOf(l),-1===e)return}else e=Math.min(Math.max(e,0),C-1),l=b.getAt(e);return l&&(r=v.getNode(l))?(v.getScrollable().scrollIntoView(r,null,h,p),x.onViewScroll(),u&&v.selModel.select(l),c&&v.getNavigationModel().setPosition(l,0),void(f&&f.call(g||x,e,l,r))):(e<v.all.startIndex?(d=-1,n=Math.max(Math.min(e-Math.floor((x.leadingBufferZone+x.trailingBufferZone)/2),C-x.viewSize+1),0),i=Math.min(n+x.viewSize-1,C-1)):(d=1,i=Math.min(e+Math.floor((x.leadingBufferZone+x.trailingBufferZone)/2),C-1),n=Math.max(i-(x.viewSize-1),0)),o=Math.max(n*x.rowHeight,0),void b.getRange(n,i,{callback:function(t,n,i){var a=v.getScrollable();x.renderRange(n,i,!0,!0),l=b.data.getRange(e,e+1)[0],r=v.getNode(l),v.body.translate(null,x.bodyTop=o),1===d&&x.refreshSize(),y&&(y.renderRange(n,i,!0,!0),x.syncRowHeights(),y.view.body.translate(null,y.bodyTop=o),1===d&&y.refreshSize()),r&&(1===d&&(w=E.clientHeight-r.offsetHeight),x.position=x.scrollTop=Math.min(Math.max(0,o-v.body.getOffsetsTo(r)[1])-w,a.getSize().y-E.clientHeight),y&&(y.position=y.scrollTop=x.scrollTop),a.scrollIntoView(r,null,h,p),u&&v.selModel.select(l),c&&v.getNavigationModel().setPosition(l,0),f&&f.call(g||x,e,l,r))}}))},onViewScroll:function(){var e,t,n=this,i=n.store,r=i.getCount(),o=n.scrollTop=n.view.getScrollY();n.disabled||r<n.viewSize||(e=o-n.position,t=e>0?1:-1,(Math.abs(e)>=20||t!==n.lastScrollDirection)&&(n.lastScrollDirection=t,n.handleViewScroll(n.lastScrollDirection)))},handleViewScroll:function(e){var t,n,i=this,r=i.view.all,o=i.store,a=i.viewSize,s=o.getCount()-1;if(-1===e?r.startIndex&&i.topOfViewCloseToEdge()&&(t=Math.max(0,i.getLastVisibleRowIndex()+i.trailingBufferZone-a)):r.endIndex<s&&i.bottomOfViewCloseToEdge()&&(t=Math.max(0,i.getFirstVisibleRowIndex()-i.trailingBufferZone)),null==t)i.loadId++;else if(n=Math.min(t+a-1,s),i.variableRowHeight&&n===r.endIndex&&s>n&&(n++,i.viewSize=a++,o.isBufferedStore&&o.setViewSize(i.viewSize)),t!==r.startIndex||n!==r.endIndex)return i.renderRange(t,n),!0},bottomOfViewCloseToEdge:function(){var e=this;return e.variableRowHeight?e.bodyTop+e.view.body.dom.offsetHeight<e.scrollTop+e.view.lastBox.height+e.numFromEdge*e.rowHeight:e.view.all.endIndex-e.getLastVisibleRowIndex()<e.numFromEdge},topOfViewCloseToEdge:function(){var e=this;return e.variableRowHeight?e.bodyTop>e.scrollTop-e.numFromEdge*e.rowHeight:e.getFirstVisibleRowIndex()-e.view.all.startIndex<e.numFromEdge},refreshView:function(e){var t,n=this,i=n.viewSize,r=n.view.all,o=n.store,a=o.getCount(),s=a-1;i>a?(e=0,t=s):(e=Math.max(0,Math.min(null==e?r.startIndex:e,s-(i-n.leadingBufferZone)+1)),t=Math.min(e+i-1,s),t-e+1>i&&(e=t-i+1)),o.getRange(e,t,{callback:n.doRefreshView,scope:n})},doRefreshView:function(e,t,n){var i,r,o,a,s,l=this,d=l.view,u=d.getNavigationModel(),c=u.getPosition(),h=d.all,p=h.startIndex,f=h.endIndex,g=h.getCount(),m=t!==h.startIndex;d.refreshCounter?(c&&c.view===d?(c=c.rowIdx<t||c.rowIdx>n?null:c.clone(),u.setPosition()):c=null,d.refreshing=l.refreshing=!0,d.clearViewEl(!0),d.refreshCounter++,e.length?(o=d.doAdd(e,t),m&&(i=h.item(p,!0),r=h.item(f,!0),i?s=-i.offsetTop:r&&(s=r.offsetTop+r.offsetHeight),s?(l.setBodyTop(l.bodyTop+=s),d.suspendEvent("scroll"),d.setScrollY(l.position=l.scrollTop=l.bodyTop?l.scrollTop+s:0),d.resumeEvent("scroll")):(l.setBodyTop(l.bodyTop=a=t*l.rowHeight),d.suspendEvent("scroll"),d.setScrollY(l.position=l.scrollTop=Math.max(a-l.rowHeight*(a<l.bodyTop?l.leadingBufferZone:l.trailingBufferZone,0))),d.resumeEvent("scroll")))):d.addEmptyText(),l.refreshSize(),d.refreshSize(h.getCount()!==g),d.fireEvent("refresh",d,e),c&&(d.cellFocused=!0,u.setPosition(c,null,null,null,!0)),d.headerCt.setSortState(),d.refreshNeeded=d.refreshing=l.refreshing=!1):d.refresh()},renderRange:function(e,t,n,i){var r=this,o=r.view.all,a=r.store;(e!==o.startIndex||t!==o.endIndex)&&(a.rangeCached(e,t)?(r.cancelLoad(),r.synchronousRender||n?r.onRangeFetched(null,e,t,null,i):(r.renderTask||(r.renderTask=new Ext.util.DelayedTask(r.onRangeFetched,r,null,!1)),r.renderTask.delay(1,null,null,[null,e,t,null,i]))):r.attemptLoad(e,t))},onRangeFetched:function(e,t,n,i,r){
var o,a,s,l,d,u,c,h,p,f=this,g=f.view,m=g.all,x=0,v=g.lockingPartner&&!r&&!f.doNotMirror&&g.lockingPartner.bufferedRenderer,y=f.variableRowHeight;if(!g.isDestroyed){if(e)f.scrollTop=f.view.getScrollY();else if(e=f.store.getRange(t,n),!e)return;if(s=t*f.rowHeight,t<m.startIndex&&n>m.endIndex){for(c=m.startIndex-t,g.clearViewEl(!0),d=g.doAdd(e,t),g.fireEvent("itemadd",e,t,d),p=0;c>p;p++)x-=d[p].offsetHeight;l=f.bodyTop+x}else(f.teleported||t>m.endIndex||n<m.startIndex)&&(l=s,y&&(h=f.scrollTop<f.position?f.leadingBufferZone:f.trailingBufferZone,t>h&&(l=f.scrollTop-f.rowHeight*h)),g.clearViewEl(!0),f.teleported=!1),m.getCount()?n>m.endIndex?(a=Math.max(t-m.startIndex,0),y&&(x=m.item(m.startIndex+a,!0).offsetTop),d=m.scroll(Ext.Array.slice(e,m.endIndex+1-t),1,a,t,n),l=y?f.bodyTop+x:s):(a=Math.max(m.endIndex-n,0),o=m.startIndex,d=m.scroll(Ext.Array.slice(e,0,m.startIndex-t),-1,a,t,n),y?(l=f.bodyTop-m.item(o,!0).offsetTop,m.startIndex?0>l&&(x=m.startIndex*f.rowHeight,g.setScrollY(f.position=f.scrollTop+=x),l=f.bodyTop+x):l&&(g.setScrollY(f.position=f.scrollTop-=l),l=0)):l=s):(d=g.doAdd(e,t),g.fireEvent("itemadd",e,t,d)),f.position=f.scrollTop;return l=Math.max(Math.floor(l),0),g.positionBody&&f.setBodyTop(l),d&&v&&!v.disabled&&(v.scrollTop=v.position=f.scrollTop,u=v.onRangeFetched(null,t,n,i,!0),v.bodyTop!==l&&v.setBodyTop(l),v.view.setScrollY(f.scrollTop),y&&g.ownerGrid.syncRowHeights&&f.syncRowHeights(d,u)),d}},syncRowHeights:function(e,t){var n,i,r=this,o=0,a=1,s=[],l=[],d=Ext.grid.locking.RowSynchronizer;for(e&&t&&(o=e.length,a=t.length),o!==a&&(e=r.view.all.slice(),t=r.view.lockingPartner.all.slice(),o=a=e.length),n=0;o>n;n++)s[n]=i=new d(r.view,e[n]),i.measure();for(n=0;a>n;n++)l[n]=i=new d(r.view.lockingPartner,t[n]),i.measure();for(n=0;o>n;n++)s[n].finish(l[n]),l[n].finish(s[n]);r.syncRowHeightsFinish()},syncRowHeightsFinish:function(){var e=this,t=e.view,n=t.lockingPartner.bufferedRenderer;delete e.rowHeight,e.refreshSize(),n.rowHeight!==e.rowHeight&&(delete n.rowHeight,n.refreshSize())},setBodyTop:function(e){var t=this,n=t.view,i=t.store,r=n.body;r.translate(t.isRTL&&Ext.supports.xOriginBug&&n.scrollFlags.y?Ext.getScrollbarSize().width:null,t.bodyTop=e),t.variableRowHeight&&(n.all.endIndex===i.getCount()-1?t.stretchView(n,t.scrollHeight=t.bodyTop+r.dom.offsetHeight-1):t.bodyTop+r.dom.offsetHeight-1>t.scrollHeight&&t.stretchView(n,t.scrollHeight+=(i.getCount()-n.all.endIndex)*t.rowHeight))},getFirstVisibleRowIndex:function(e,t,n,i){var r,o,a=this,s=a.view,l=s.all,d=l.elements,u=a.viewClientHeight,c=a.bodyTop;if(l.getCount()&&a.variableRowHeight){if(arguments.length)r=e+Math.floor((t-e)/2);else{if(e=l.startIndex,t=l.endIndex,n=a.scrollTop,i=n+u,c>i||c+s.body.dom.offsetHeight<n)return a.teleported=!0,Math.floor(a.scrollTop/a.rowHeight);r=e+Math.min(a.numFromEdge+(-1===a.lastScrollDirection?a.leadingBufferZone:a.trailingBufferZone),Math.floor((t-e)/2))}if(o=c+d[r].offsetTop,o+d[r].offsetHeight<=n)return a.getFirstVisibleRowIndex(r+1,t,n,i);if(n>=o)return r;if(r!==e)return a.getFirstVisibleRowIndex(e,r-1,n,i)}return Math.floor(a.scrollTop/a.rowHeight)},getLastVisibleRowIndex:function(e,t,n,i){var r,o,a,s=this,l=s.view,d=l.all,u=d.elements,c=s.viewClientHeight,h=s.bodyTop;if(d.getCount()&&s.variableRowHeight){if(arguments.length)r=e+Math.floor((t-e)/2);else{if(e=d.startIndex,t=d.endIndex,n=s.scrollTop,i=n+c,h>i||h+l.body.dom.offsetHeight<n)return s.teleported=!0,Math.floor(s.scrollTop/s.rowHeight)+Math.ceil(c/s.rowHeight);r=t-Math.min(s.numFromEdge+(1===s.lastScrollDirection?s.leadingBufferZone:s.trailingBufferZone),Math.floor((t-e)/2))}if(o=h+u[r].offsetTop,o>i)return s.getLastVisibleRowIndex(e,r-1,n,i);if(a=o+u[r].offsetHeight,a>=i)return r;if(r!==t)return s.getLastVisibleRowIndex(r+1,t,n,i)}return s.getFirstVisibleRowIndex()+Math.ceil(c/s.rowHeight)},getScrollHeight:function(e){var t,n,i=this,r=i.view,o=r.all,a=i.store,s=a.getCount();return s?(i.hasOwnProperty("rowHeight")||(t=o.getCount(),t&&(i.rowHeight=i.variableRowHeight?Math.floor(r.body.dom.clientHeight/t):o.first(!0).offsetHeight)),n=Math.floor(s*i.rowHeight),e||n&&o.endIndex===s-1&&(n=Math.max(n,i.bodyTop+r.body.dom.offsetHeight-1)),i.scrollHeight=n):0},attemptLoad:function(e,t){var n=this;n.scrollToLoadBuffer?(n.loadTask||(n.loadTask=new Ext.util.DelayedTask(n.doAttemptLoad,n,[])),n.loadTask.delay(n.scrollToLoadBuffer,n.doAttemptLoad,n,[e,t])):n.doAttemptLoad(e,t)},cancelLoad:function(){this.loadTask&&this.loadTask.cancel()},doAttemptLoad:function(e,t){var n=this;this.store.getRange(e,t,{loadId:++n.loadId,callback:function(e,t,i,r){r.loadId===n.loadId&&this.onRangeFetched(e,t,i,r)},scope:this,fireEvent:!1})},destroy:function(){var e=this,t=e.view;e.cancelLoad(),t&&t.el&&t.un("scroll",e.onViewScroll,e),Ext.destroy(e.viewListeners,e.storeListeners,e.gridListeners,e.stretcher)}},0,0,0,0,["plugin.bufferedrenderer"],0,[Ext.grid.plugin,"BufferedRenderer"],function(e){Ext.supports.Touch&&(e.prototype.leadingBufferZone=e.prototype.trailingBufferZone=2,e.prototype.numFromEdge=1)}),Ext.cmd.derive("Ext.grid.plugin.RowExpander",Ext.plugin.Abstract,{lockableScope:"normal",columnWidth:24,rowBodyTpl:null,lockedTpl:null,expandOnEnter:!0,expandOnDblClick:!0,selectRowOnExpand:!1,headerWidth:24,bodyBefore:!1,rowBodyTrSelector:".x-grid-rowbody-tr",rowBodyHiddenCls:"x-grid-row-body-hidden",rowCollapsedCls:"x-grid-row-collapsed",addCollapsedCls:{fn:function(e,t,n){var i=this.rowExpander;i.recordsExpanded[t.record.internalId]||t.itemClasses.push(i.rowCollapsedCls),this.nextTpl.applyOut(t,e,n)},syncRowHeights:function(e,t){this.rowExpander.syncRowHeights(e,t)},priority:2e4},setCmp:function(e){var t,n=this;Ext.plugin.Abstract.prototype.setCmp.apply(this,arguments),n.recordsExpanded={},n.rowBodyTpl=Ext.XTemplate.getTpl(n,"rowBodyTpl"),t=n.getFeatureConfig(e),e.features?e.features=Ext.Array.push(t,e.features):e.features=t},getFeatureConfig:function(e){var t=this,n=[],i={ftype:"rowbody",rowExpander:t,bodyBefore:t.bodyBefore,recordsExpanded:t.recordsExpanded,rowBodyHiddenCls:t.rowBodyHiddenCls,rowCollapsedCls:t.rowCollapsedCls,setupRowData:t.getRowBodyFeatureData,setup:t.setup};return n.push(Ext.apply({lockableScope:"normal",getRowBodyContents:t.getRowBodyContentsFn(t.rowBodyTpl)},i)),e.enableLocking&&n.push(Ext.apply({lockableScope:"locked",getRowBodyContents:t.lockedTpl?t.getRowBodyContentsFn(t.lockedTpl):function(){return""}},i)),n},getRowBodyContentsFn:function(e){var t=this;return function(n){return e.owner=t,e.applyTemplate(n.record.getData())}},init:function(e){e.lockable&&(e=e.normalGrid);var t,n,i=this,r=e.ownerLockable;Ext.plugin.Abstract.prototype.init.apply(this,arguments),i.grid=e,t=i.view=e.getView(),i.bindView(t),t.addRowTpl(i.addCollapsedCls).rowExpander=i,r?(i.addExpander(r.lockedGrid.headerCt.items.getCount()?r.lockedGrid:e),n=r.lockedGrid.getView(),i.bindView(n),n.addRowTpl(i.addCollapsedCls).rowExpander=i,r.syncRowHeight=!0,r.mon(r,{processcolumns:i.onLockableProcessColumns,lockcolumn:i.onColumnLock,unlockcolumn:i.onColumnUnlock,scope:i}),i.viewListeners=t.on({itemadd:Ext.Function.createAnimationFrame(r.syncRowHeights,r)})):(i.addExpander(e),e.on("beforereconfigure",i.beforeReconfigure,i))},beforeReconfigure:function(e,t,n){var i=this;i.viewListeners&&i.viewListeners.destroy(),n&&(i.expanderColumn=new Ext.grid.Column(i.getHeaderConfig()),n.unshift(i.expanderColumn))},onLockableProcessColumns:function(e,t){this.addExpander(t.length?e.lockedGrid:e.normalGrid)},addExpander:function(e){var t=this,n=t.getHeaderConfig();e.isLocked&&e.ownerLockable.shrinkWrapLocked&&(e.width+=n.width,t.grid=e),t.expanderColumn=e.headerCt.insert(0,n),e.getSelectionModel().injectCheckbox=1},getRowBodyFeatureData:function(e,t,n){var i=this;i.self.prototype.setupRowData.apply(i,arguments),n.rowBody=i.getRowBodyContents(n),n.rowBodyCls=i.recordsExpanded[e.internalId]?"":i.rowBodyHiddenCls},setup:function(e,t){var n=this,i=n.grid.ownerLockable;n.self.prototype.setup.apply(n,arguments),i&&-1!==Ext.Array.indexOf(n.grid.columnManager.getColumns(),n.rowExpander.expanderColumn)&&(t.rowBodyColspan-=1)},bindView:function(e){this.expandOnEnter&&e.on("itemkeydown",this.onKeyDown,this),this.expandOnDblClick&&e.on("itemdblclick",this.onDblClick,this)},onKeyDown:function(e,t,n,i,r){if(r.getKey()===r.ENTER)for(var o=e.store,a=e.getSelectionModel().getSelection(),s=a.length,l=0;s>l;l++)i=o.indexOf(a[l]),this.toggleRow(i,a[l])},onDblClick:function(e,t,n,i){this.toggleRow(i,t)},toggleRow:function(e,t){var n,i,r=this,o=r.view,a=o.bufferedRenderer,s=o.getScrollable(),l=o,d=o.getNode(e),u=Ext.fly(d),c=u.down(r.rowBodyTrSelector,!0),h=u.hasCls(r.rowCollapsedCls),p=h?"removeCls":"addCls",f=h?2:1,g=r.grid.ownerLockable;u[p](r.rowCollapsedCls),Ext.fly(c)[p](r.rowBodyHiddenCls),r.recordsExpanded[t.internalId]=h,r.grid.ownerLockable&&(l=g.getView(),g.lockedGrid.isVisible()&&(o=g.view.lockedGrid.view,n=Ext.fly(o.getNode(e)),n&&(n[p](r.rowCollapsedCls),c=n.down(r.rowBodyTrSelector,!0),Ext.fly(c)[p](r.rowBodyHiddenCls)))),r.expanderColumn&&(i=Ext.fly(o.getRow(e)).down(r.expanderColumn.getCellSelector(),!0),i&&(i.rowSpan=f)),l.fireEvent(h?"expandbody":"collapsebody",d,t,c),(o.getSizeModel().height.shrinkWrap||g)&&o.refreshSize(!0),s&&(a?a.refreshSize():s.refresh(!0))},syncRowHeights:function(e,t){var n,i,r=this,o=Ext.fly(e).down(r.rowBodyTrSelector),a=Ext.fly(t).down(r.rowBodyTrSelector);a.isVisible()?(n=o.getHeight())!==(i=a.getHeight())&&(n>i?a.setHeight(n):o.setHeight(i)):o.dom.style.height=a.dom.style.height=""},onColumnUnlock:function(e){var t,n=this;e=n.grid.ownerLockable,t=e.lockedGrid.visibleColumnManager.getColumns(),1===t.length&&(t[0]===n.expanderColumn?(e.unlock(n.expanderColumn),n.grid=e.normalGrid):e.lock(n.expanderColumn,0))},onColumnLock:function(e){var t,n,i=this;e=i.grid.ownerLockable,t=e.lockedGrid.visibleColumnManager.getColumns(),1===t.length&&(i.grid=n=e.lockedGrid,n.headerCt.insert(0,i.expanderColumn))},getHeaderConfig:function(){var e=this,t=e.grid.ownerLockable;return{width:e.headerWidth,lockable:!1,autoLock:!0,sortable:!1,resizable:!1,draggable:!1,hideable:!1,menuDisabled:!0,tdCls:"x-grid-cell-special",innerCls:"x-grid-cell-inner-row-expander",renderer:function(){return'<div class="x-grid-row-expander" role="presentation"></div>'},processEvent:function(t,n,i,r,o,a,s){return a.getTarget(".x-grid-row-expander")&&"click"===t?(e.toggleRow(r,s),e.selectRowOnExpand):void 0},isLocked:function(){return t&&(t.lockedGrid.isVisible()||this.locked)},editRenderer:function(){return"&#160;"}}}},0,0,0,0,["plugin.rowexpander"],0,[Ext.grid.plugin,"RowExpander"],0),Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(e){var t=this,n=t.getKey(e);return t.map[n]||(++t.length,t.items.push(e),t.map[n]=e),e},clear:function(){var e=this,t=e.items;return e.items=[],e.map={},e.length=0,t},contains:function(e){var t=this.getKey(e);return this.map.hasOwnProperty(t)},getCount:function(){return this.length},getKey:function(e){return e.id},remove:function(e){var t,n=this,i=n.getKey(e),r=n.items;return n.map[i]&&(t=Ext.Array.indexOf(r,e),Ext.Array.erase(r,t,1),delete n.map[i],--n.length),e}},1,0,0,0,0,0,[Ext.util,"Queue"],0),Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:!1,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:!0,isContextItem:!0,isTopLevel:!1,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:!1,constructor:function(e){var t,n,i,r,o,a,s,l,d,u,c,h,p,f,g=this,m=Ext.layout.SizeModel.sizeModels,x=m.configured,v=m.shrinkWrap;Ext.apply(g,e),s=g.target,t=g.el,g.id=s.id,g.flushedProps={},g.props=o={},g.styles={},s.isComponent?(g.wrapsComponent=!0,g.framing=s.frameSize||null,g.isComponentChild=s.ownerLayout&&s.ownerLayout.isComponentLayout,n=s.lastBox,i=s.ownerCt,i&&(r=i.el&&g.context.items[i.el.id])&&(g.ownerCtContext=r),g.sizeModel=a=s.getSizeModel(r&&r.widthModel.pairsByHeightOrdinal[r.heightModel.ordinal]),g.widthModel=h=a.width,g.heightModel=p=a.height,n&&n.invalid===!1&&(u=s.width===(l=n.width),c=s.height===(d=n.height),h===v&&p===v?f=!0:h===x&&u&&(f=p===v||p===x&&c),f&&(g.optOut=!0,o.width=l,o.height=d))):n=t.lastBox,g.lastBox=n},init:function(e,t){var n,i,r,o,a,s,l,d,u=this,c=u.props,h=u.dirty,p=u.ownerCtContext,f=u.target.ownerLayout,g=!u.state,m=e||g,x=u.heightModel,v=u.widthModel,y=0;if(u.dirty=u.invalid=!1,u.props={},u.remainingChildDimensions=0,u.boxChildren&&(u.boxChildren.length=0),g||(u.clearAllBlocks("blocks"),u.clearAllBlocks("domBlocks")),!u.wrapsComponent)return m;if(s=u.target,u.state={},g)s.beforeLayout&&s.beforeLayout!==Ext.emptyFn&&s.beforeLayout(),!p&&(o=s.ownerCt)&&(p=u.context.items[o.el.id]),p?(u.ownerCtContext=p,u.isBoxParent=f&&f.isItemBoxParent(u)):u.isTopLevel=!0,u.frameBodyContext=u.getEl("frameBody");else for(p=u.ownerCtContext,u.isTopLevel=!p,n=u.children,i=0,r=n.length;r>i;++i)n[i].init(!0);return u.hasRawContent=!(s.isContainer&&s.items.items.length>0),e?(u.widthModel=u.heightModel=null,a=s.getSizeModel(p&&p.widthModel.pairsByHeightOrdinal[p.heightModel.ordinal]),g&&(u.sizeModel=a),u.widthModel=a.width,u.heightModel=a.height,p&&!u.isComponentChild&&(f.needsItemSize||!s.liquidLayout?p.remainingChildDimensions+=2:(u.widthModel.calculated&&++p.remainingChildDimensions,u.heightModel.calculated&&++p.remainingChildDimensions))):c&&(u.recoverProp("x",c,h),u.recoverProp("y",c,h),u.widthModel.calculated?u.recoverProp("width",c,h):"width"in c&&++y,u.heightModel.calculated?u.recoverProp("height",c,h):"height"in c&&++y,p&&!u.isComponentChild&&(p.remainingChildDimensions+=y)),c&&f&&f.manageMargins&&(u.recoverProp("margin-top",c,h),u.recoverProp("margin-right",c,h),u.recoverProp("margin-bottom",c,h),u.recoverProp("margin-left",c,h)),t&&(l=t.heightModel,d=t.widthModel,d&&l&&v&&x&&v.shrinkWrap&&x.shrinkWrap&&d.constrainedMax&&l.constrainedMin&&(l=null),d&&(u.widthModel=d),l&&(u.heightModel=l),t.state&&Ext.apply(u.state,t.state)),m},initContinue:function(e){var t,n=this,i=n.ownerCtContext,r=n.target,o=n.widthModel,a=r.getInherited();return o.fixed?a.inShrinkWrapTable=!1:delete a.inShrinkWrapTable,e&&(i&&o.shrinkWrap?(t=i.isBoxParent?i:i.boxParent,t&&t.addBoxChild(n)):o.natural&&(n.boxParent=i)),e},initDone:function(e){var t=this,n=t.props,i=t.state;0===t.remainingChildDimensions&&(n.containerChildrenSizeDone=!0),e&&(n.containerLayoutDone=!0),t.boxChildren&&t.boxChildren.length&&t.widthModel.shrinkWrap&&(t.el.setWidth(1e4),i.blocks=(i.blocks||0)+1)},initAnimation:function(){var e=this,t=e.target,n=e.ownerCtContext;n&&n.isTopLevel?e.animatePolicy=t.ownerLayout.getAnimatePolicy(e):!n&&t.isCollapsingOrExpanding&&t.animCollapse&&(e.animatePolicy=t.componentLayout.getAnimatePolicy(e)),e.animatePolicy&&e.context.queueAnimation(e)},addBlock:function(e,t,n){var i=this,r=i[e]||(i[e]={}),o=r[n]||(r[n]={});o[t.id]||(o[t.id]=t,++t.blockCount,++i.context.blockCount)},addBoxChild:function(e){var t,n=this,i=e.widthModel;e.boxParent=this,e.measuresBox=i.shrinkWrap?e.hasRawContent:i.natural,e.measuresBox&&(t=n.boxChildren,t?t.push(e):n.boxChildren=[e])},addPositionStyles:function(e,t){var n=t.x,i=t.y,r=0;return void 0!==n&&(e.left=n+"px",++r),void 0!==i&&(e.top=i+"px",++r),r},addTrigger:function(e,t){var n=this,i=t?"domTriggers":"triggers",r=n[i]||(n[i]={}),o=n.context,a=o.currentLayout,s=r[e]||(r[e]={});s[a.id]||(s[a.id]=a,++a.triggerCount,s=o.triggers[t?"dom":"data"],(s[a.id]||(s[a.id]=[])).push({item:this,prop:e}),void 0!==n.props[e]&&(t&&n.dirty&&e in n.dirty||++a.firedTriggers))},boxChildMeasured:function(){var e=this,t=e.state,n=t.boxesMeasured=(t.boxesMeasured||0)+1;n===e.boxChildren.length&&(t.clearBoxWidth=1,++e.context.progressCount,e.markDirty())},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(e){var t=e.getStyles(e.borderNames,e.trblNames);return t.width=t.left+t.right,t.height=t.top+t.bottom,t},marginInfo:function(e){var t=e.getStyles(e.marginNames,e.trblNames);return t.width=t.left+t.right,t.height=t.top+t.bottom,t},paddingInfo:function(e){var t=e.frameBodyContext||e,n=t.getStyles(e.paddingNames,e.trblNames);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}},checkCache:function(e){return this.cacheMissHandlers[e](this)},clearAllBlocks:function(e){var t,n=this[e];if(n)for(t in n)this.clearBlocks(e,t)},clearBlocks:function(e,t){var n,i,r,o=this[e],a=o&&o[t];if(a){delete o[t],n=this.context;for(r in a)i=a[r],--n.blockCount,--i.blockCount||i.pending||i.done||n.queueLayout(i)}},block:function(e,t){this.addBlock("blocks",e,t)},domBlock:function(e,t){this.addBlock("domBlocks",e,t)},fireTriggers:function(e,t){var n,i,r=this[e],o=r&&r[t],a=this.context;if(o)for(i in o)n=o[i],++n.firedTriggers,n.done||n.blockCount||n.pending||a.queueLayout(n)},flush:function(){var e=this,t=e.dirty,n=e.state,i=e.el;e.dirtyCount=0,"attributes"in e&&(i.set(e.attributes),delete e.attributes),"innerHTML"in e&&(i.innerHTML=e.innerHTML,delete e.innerHTML),n&&n.clearBoxWidth&&(n.clearBoxWidth=0,e.el.setStyle("width",null),--n.blocks||e.context.queueItemLayouts(e)),t&&(delete e.dirty,e.writeProps(t,!0))},flushAnimations:function(){var e,t,n,i,r,o,a,s,l,d,u,c=this,h=c.previousSize;if(h){for(e=c.target,t=e.getAnimationProps(),n=t.duration,i=Ext.Object.getKeys(c.animatePolicy),r=Ext.apply({},{from:{},to:{},duration:n||Ext.fx.Anim.prototype.duration},t),o=0,a=0,s=i.length;s>a;a++)l=i[a],d=h[l],u=c.peek(l),d!==u&&(l=c.translateProps[l]||l,r.from[l]=d,r.to[l]=u,++o);o&&(1===c.isCollapsingOrExpanding?e.componentLayout.undoLayout(c):c.writeProps(r.from),c.el.animate(r),r=Ext.fx.Manager.getFxQueue(c.el.id)[0],e.$layoutAnim=r,r.on({afteranimate:function(){delete e.$layoutAnim,1===c.isCollapsingOrExpanding?(e.componentLayout.redoLayout(c),e.afterCollapse(!0)):2===c.isCollapsingOrExpanding&&e.afterExpand(!0)}}))}},getBorderInfo:function(){var e=this,t=e.borderInfo;return t||(e.borderInfo=t=e.checkCache("borderInfo")),t},getEl:function(e,t){var n,i,r,o=this;if(e){if(e.dom)i=e;else if(n=o.target,t&&(n=t),i=n[e],"function"==typeof i&&(i=i.call(n),i===o.el))return this;i&&(r=o.context.getEl(o,i))}return r||null},getFrameInfo:function(){var e,t,n=this,i=n.frameInfo;return i||(e=n.framing,t=n.getBorderInfo(),n.frameInfo=i=e?{top:e.top+t.top,right:e.right+t.right,bottom:e.bottom+t.bottom,left:e.left+t.left,width:e.width+t.width,height:e.height+t.height}:t),i},getMarginInfo:function(){var e,t,n,i,r=this,o=r.marginInfo;return o||(r.wrapsComponent?(e=r.target,n=e.ownerLayout,i=n?n.id:null,t=n&&n.manageMargins,o=e.margin$,o&&o.ownerId!==i&&(o=null),o||(o=r.parseMargins(e,e.margin)||r.checkCache("marginInfo"),t&&(r.setProp("margin-top",0),r.setProp("margin-right",0),r.setProp("margin-bottom",0),r.setProp("margin-left",0)),o.ownerId=i,e.margin$=o),o.width=o.left+o.right,o.height=o.top+o.bottom):o=r.checkCache("marginInfo"),r.marginInfo=o),o},clearMarginCache:function(){delete this.marginInfo,delete this.target.margin$},getPaddingInfo:function(){var e=this,t=e.paddingInfo;return t||(e.paddingInfo=t=e.checkCache("paddingInfo")),t},getProp:function(e){var t=this,n=t.props[e];return t.addTrigger(e),n},getDomProp:function(e){var t=this,n=t.dirty&&e in t.dirty?void 0:t.props[e];return t.addTrigger(e,!0),n},getStyle:function(e){var t,n,i=this,r=i.styles;return e in r?n=r[e]:(t=i.styleInfo[e],n=i.el.getStyle(e),t&&t.parseInt&&(n=parseInt(n,10)||0),r[e]=n),n},getStyles:function(e,t){var n,i,r,o,a,s,l,d,u=this,c=u.styles,h={},p=0,f=e.length;for(t=t||e,n=0;f>n;++n)o=e[n],o in c?(h[t[n]]=c[o],++p,n&&1===p&&(i=e.slice(0,n),r=t.slice(0,n))):p&&((i||(i=[])).push(o),(r||(r=[])).push(t[n]));if(f>p)for(i=i||e,r=r||t,s=u.styleInfo,l=u.el.getStyle(i),n=i.length;n--;)o=i[n],a=s[o],d=l[o],a&&a.parseInt&&(d=parseInt(d,10)||0),h[r[n]]=d,c[o]=d;return h},hasProp:function(e){return null!=this.getProp(e)},hasDomProp:function(e){return null!=this.getDomProp(e)},invalidate:function(e){this.context.queueInvalidate(this,e)},markDirty:function(){1===++this.dirtyCount&&this.context.queueFlush(this)},onBoxMeasured:function(){var e=this.boxParent,t=this.state;e&&e.widthModel.shrinkWrap&&!t.boxMeasured&&this.measuresBox&&(t.boxMeasured=1,e.boxChildMeasured())},parseMargins:function(e,t){t===!0&&(t=5);var n,i=typeof t;return"string"===i||"number"===i?n=e.parseBox(t):t&&(n={top:0,right:0,bottom:0,left:0},t&&(t=Ext.apply(n,e.parseBox(t)))),n},peek:function(e){return this.props[e]},recoverProp:function(e,t,n){var i,r=this,o=r.props;e in t&&(o[e]=t[e],n&&e in n&&(i=r.dirty||(r.dirty={}),i[e]=n[e]))},redo:function(e){var t,n,i,r=this;if(r.revertProps(r.props),e&&r.wrapsComponent){if(r.childItems)for(i=0,t=r.childItems,n=t.length;n>i;i++)t[i].redo(e);for(i=0,t=r.children,n=t.length;n>i;i++)t[i].redo()}},removeEl:function(e,t){var n,i,r=this;if(e){if(e.dom)i=e;else if(n=r.target,t&&(n=t),i=n[e],"function"==typeof i&&(i=i.call(n),i===r.el))return this;i&&r.context.removeEl(r,i)}},revertProps:function(e){var t,n=this.flushedProps,i={};for(t in e)n.hasOwnProperty(t)&&(i[t]=e[t]);this.writeProps(i)},setAttribute:function(e,t){var n=this;n.attributes||(n.attributes={}),n.attributes[e]=t,n.markDirty()},setBox:function(e){var t=this;"left"in e&&t.setProp("x",e.left),"top"in e&&t.setProp("y",e.top),t.setSize(e.width,e.height)},setContentHeight:function(e,t){return!t&&this.hasRawContent?1:this.setProp("contentHeight",e)},setContentWidth:function(e,t){return!t&&this.hasRawContent?1:this.setProp("contentWidth",e)},setContentSize:function(e,t,n){return this.setContentWidth(e,n)+this.setContentHeight(t,n)===2},setProp:function(e,t,n){var i,r=this,o=typeof t;return"undefined"===o||"number"===o&&isNaN(t)?0:r.props[e]===t?1:(r.props[e]=t,++r.context.progressCount,n===!1?(r.fireTriggers("domTriggers",e),r.clearBlocks("domBlocks",e)):(i=r.styleInfo[e],i&&(r.dirty||(r.dirty={}),r.dirty[e]=t,r.markDirty())),r.fireTriggers("triggers",e),r.clearBlocks("blocks",e),1)},setHeight:function(e,t){var n,i,r,o,a,s=this,l=s.target,d=s.ownerCtContext;if(0>e&&(e=0),s.wrapsComponent){if(r=s.collapsedVert?0:l.minHeight||0,e=Ext.Number.constrain(e,r,l.maxHeight),o=s.props.height,!s.setProp("height",e,t))return NaN;d&&!s.isComponentChild&&isNaN(o)&&(a=--d.remainingChildDimensions,a||d.setProp("containerChildrenSizeDone",!0)),n=s.frameBodyContext,n&&(i=s.getFrameInfo(),n[s.el.vertical?"setWidth":"setHeight"](e-i.height,t))}else if(!s.setProp("height",e,t))return NaN;return e},setWidth:function(e,t){var n,i,r,o,a,s=this,l=s.target,d=s.ownerCtContext;if(0>e&&(e=0),s.wrapsComponent){if(r=s.collapsedHorz?0:l.minWidth||0,e=Ext.Number.constrain(e,r,l.maxWidth),o=s.props.width,!s.setProp("width",e,t))return NaN;d&&!s.isComponentChild&&isNaN(o)&&(a=--d.remainingChildDimensions,a||d.setProp("containerChildrenSizeDone",!0)),n=s.frameBodyContext,n&&(i=s.getFrameInfo(),n.setWidth(e-i.width,t))}else if(!s.setProp("width",e,t))return NaN;return e},setSize:function(e,t,n){this.setWidth(e,n),this.setHeight(t,n)},translateProps:{x:"left",y:"top"},undo:function(e){var t,n,i,r=this;if(r.revertProps(r.lastBox),e&&r.wrapsComponent){if(r.childItems)for(i=0,t=r.childItems,n=t.length;n>i;i++)t[i].undo(e);for(i=0,t=r.children,n=t.length;n>i;i++)t[i].undo()}},unsetProp:function(e){var t=this.dirty;delete this.props[e],t&&delete t[e]},writeProps:function(e,t){if(e&&"object"==typeof e){var n,i,r,o,a,s,l,d,u,c=this,h=c.el,p={},f=0,g=c.styleInfo,m=e.width,x=e.height,v=c.target;"displayed"in e&&h.setDisplayed(e.displayed);for(i in e)t&&(c.fireTriggers("domTriggers",i),c.clearBlocks("domBlocks",i),c.flushedProps[i]=1),n=g[i],n&&n.dom&&(n.suffix&&(r=parseInt(e[i],10))?p[i]=r+n.suffix:p[i]=e[i],++f);("x"in e||"y"in e)&&(v.isComponent?v.setPosition(e.x,e.y):f+=c.addPositionStyles(p,e)),c.wrapsComponent&&Ext.isIE9&&((o=void 0!==m&&c.hasOverflowY)||(a=void 0!==x&&c.hasOverflowX))&&(s=c.isAbsolute,void 0===s&&(s=!1,u=c.target.getTargetEl(),d=u.getStyle("position"),c.isAbsolute=s="absolute"===d),s&&(l=Ext.getScrollbarSize(),o&&(m=parseInt(m,10)+l.width,p.width=m+"px",++f),a&&(x=parseInt(x,10)+l.height,p.height=x+"px",++f))),f&&h.setStyle(p)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var e={dom:!0,parseInt:!0,suffix:"px"},t={dom:!0},n={dom:!1};this.prototype.styleInfo={containerChildrenSizeDone:n,containerLayoutDone:n,displayed:n,done:n,x:n,y:n,columnsChanged:n,rowHeights:n,viewOverflowY:n,left:e,top:e,right:e,bottom:e,width:e,height:e,"border-top-width":e,"border-right-width":e,"border-bottom-width":e,"border-left-width":e,"margin-top":e,"margin-right":e,"margin-bottom":e,"margin-left":e,"padding-top":e,"padding-right":e,"padding-bottom":e,"padding-left":e,"line-height":t,display:t,clear:t}}),Ext.define("Ext.rtl.layout.ContextItem",{override:"Ext.layout.ContextItem",addPositionStyles:function(e,t){var n=t.x,i=t.y,r=0;return void 0!==n&&(e[this.parent.target.getInherited().rtl?"right":"left"]=n+"px",++r),void 0!==i&&(e.top=i+"px",++r),r}}),Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(e){var t=this;Ext.apply(t,e),t.items={},t.layouts={},t.blockCount=0,t.cycleCount=0,t.flushCount=0,t.calcCount=0,t.animateQueue=t.newQueue(),t.completionQueue=t.newQueue(),t.finalizeQueue=t.newQueue(),t.finishQueue=t.newQueue(),t.flushQueue=t.newQueue(),t.invalidateData={},t.layoutQueue=t.newQueue(),t.invalidQueue=[],t.triggers={data:{},dom:{}}},callLayout:function(e,t){this.currentLayout=e,e[t](this.getCmp(e.owner))},cancelComponent:function(e,t,n){var i,r,o,a,s,l,d,u,c,h,p=this,f=e,g=!e.isComponent,m=g?f.length:1;for(i=0;m>i;++i){if(g&&(e=f[i]),n&&e.ownerCt&&(h=this.items[e.ownerCt.el.id],h&&Ext.Array.remove(h.childItems,p.getCmp(e))),!t&&(d=p.invalidQueue,o=d.length))for(p.invalidQueue=l=[],r=0;o>r;++r)u=d[r],c=u.item.target,c===e||c.up(e)||l.push(u);s=e.componentLayout,p.cancelLayout(s),s.getLayoutItems&&(a=s.getLayoutItems(),a.length&&p.cancelComponent(a,!0)),e.isContainer&&!e.collapsed&&(s=e.layout,p.cancelLayout(s),a=s.getVisibleItems(),a.length&&p.cancelComponent(a,!0))}},cancelLayout:function(e){var t=this;t.completionQueue.remove(e),t.finalizeQueue.remove(e),t.finishQueue.remove(e),t.layoutQueue.remove(e),e.running&&t.layoutDone(e),e.ownerContext=null},clearTriggers:function(e,t){var n,i,r,o=e.id,a=this.triggers[t?"dom":"data"],s=a&&a[o],l=s&&s.length||0;for(n=0;l>n;++n)r=s[n],i=r.item,a=t?i.domTriggers:i.triggers,delete a[r.prop][o]},flush:function(){var e,t=this,n=t.flushQueue.clear(),i=n.length;if(i)for(++t.flushCount,e=0;i>e;++e)n[e].flush()},flushAnimations:function(){var e,t=this,n=t.animateQueue.clear(),i=n.length;if(i){for(e=0;i>e;e++)n[e].target.animate!==!1&&n[e].flushAnimations();Ext.fx.Manager.runner()}},flushInvalidates:function(){var e,t,n,i,r=this,o=r.invalidQueue,a=o&&o.length;if(r.invalidQueue=[],a){for(t=[],i=0;a>i;++i)e=(n=o[i]).item.target,e.container.isDetachedBody||(t.push(e),n.options&&(r.invalidateData[e.id]=n.options));r.invalidate(t,null)}},flushLayouts:function(e,t,n){var i,r,o=this,a=n?o[e].items:o[e].clear(),s=a.length;if(s){for(i=0;s>i;++i)r=a[i],r.running||o.callLayout(r,t);o.currentLayout=null}},getCmp:function(e){return this.getItem(e,e.el)},getEl:function(e,t){var n=this.getItem(t,t);return n.parent||(n.parent=e,e.children.length?e.children.push(n):e.children=[n]),n},getItem:function(e,t){var n=t.id,i=this.items,r=i[n]||(i[n]=new Ext.layout.ContextItem({context:this,target:e,el:t}));return r},handleFailure:function(){var e,t,n=this.layouts;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(t in n)e=n[t],n.hasOwnProperty(t)&&(e.running=!1,e.ownerContext=null)},invalidate:function(e,t){var n,i,r,o,a,s,l,d,u,c,h,p,f,g=this,m=!e.isComponent;for(o=0,d=m?e.length:1;d>o;++o)if(a=m?e[o]:e,a.rendered&&!a.hidden){if(i=a.ownerLayout,u=a.componentLayout,r=!u.ownerContext,f=!1,i&&i.needsItemSize||!a.liquidLayout||(f=!0),(!f||i&&i.setsItemSize)&&(s=g.getCmp(a),c=a.isContainer&&!a.collapsed?a.layout:null,h=g.invalidateData[s.id],delete g.invalidateData[s.id],p=s.init(t,h)),f)continue;h&&g.processInvalidate(h,s,"before"),u.beforeLayoutCycle&&u.beforeLayoutCycle(s),c&&c.beforeLayoutCycle&&c.beforeLayoutCycle(s),p=s.initContinue(p),n=!0,u.getLayoutItems&&(u.renderChildren(),l=u.getLayoutItems(),l.length&&g.invalidate(l,!0)),c&&(n=!1,c.renderChildren(),(c.needsItemSize||c.activeItemCount)&&(l=c.getVisibleItems(),l.length&&g.invalidate(l,!0))),s.initDone(n),g.resetLayout(u,s,r),c&&g.resetLayout(c,s,r),s.initAnimation(),h&&g.processInvalidate(h,s,"after")}g.currentLayout=null},isDescendant:function(e,t){if(e.isContainer)for(var n=t.ownerCt;n;n=n.ownerCt)if(n===e)return!0;return!1},layoutDone:function(e){var t=e.ownerContext;e.running=!1,e.isComponentLayout?(t.measuresBox&&t.onBoxMeasured(),t.setProp("done",!0)):t.setProp("containerLayoutDone",!0),--this.remainingLayouts,++this.progressCount},newQueue:function(){return new Ext.util.Queue},processInvalidate:function(e,t,n){if(e[n]){var i=this,r=i.currentLayout;i.currentLayout=e.layout||null,e[n](t,e),i.currentLayout=r}},queueAnimation:function(e){this.animateQueue.add(e)},queueCompletion:function(e){this.completionQueue.add(e)},queueFinalize:function(e){this.finalizeQueue.add(e)},queueFlush:function(e){this.flushQueue.add(e)},chainFns:function(e,t,n){var i=this,r=e.layout,o=t.layout,a=e[n],s=t[n];return function(n){var l=i.currentLayout;a&&(i.currentLayout=r,a.call(e.scope||e,n,e)),i.currentLayout=o,s.call(t.scope||t,n,t),i.currentLayout=l}},purgeInvalidates:function(){var e,t,n,i,r,o,a,s=this,l=[],d=s.invalidQueue,u=d.length;for(e=0;u>e;++e){for(r=d[e],o=r.item.target,a=!0,t=l.length;t--;){if(n=l[t],i=n.item.target,o.isLayoutChild(i)){a=!1;break}i.isLayoutChild(o)&&Ext.Array.erase(l,t,1)}a&&l.push(r)}s.invalidQueue=l},queueInvalidate:function(e,t){var n,i,r,o,a,s=this,l=[],d=s.invalidQueue,u=d.length;for(e.isComponent?e=s.getCmp(n=e):n=e.target,e.invalid=!0;u--;){if(i=d[u],r=i.item.target,!n.isFloating&&n.up(r))return;if(r===n)return void((o=i.options)?t&&(t.widthModel&&(o.widthModel=t.widthModel),t.heightModel&&(o.heightModel=t.heightModel),(a=o.state)?t.state&&Ext.apply(a,t.state):o.state=t.state,t.before&&(o.before=s.chainFns(o,t,"before")),t.after&&(o.after=s.chainFns(o,t,"after"))):i.options=t);r.isLayoutChild(n)||l.push(i)}l.push({item:e,options:t}),s.invalidQueue=l},queueItemLayouts:function(e){var t=e.isComponent?e:e.target,n=t.componentLayout;n.pending||n.invalid||n.done||this.queueLayout(n),n=t.layout,!n||n.pending||n.invalid||n.done||t.collapsed||this.queueLayout(n)},queueLayout:function(e){this.layoutQueue.add(e),e.pending=!0},removeEl:function(e,t){var n=t.id,i=e.children,r=this.items;i&&Ext.Array.remove(i,r[n]),delete r[n]},resetLayout:function(e,t,n){var i=this;i.currentLayout=e,e.done=!1,e.pending=!0,e.firedTriggers=0,i.layoutQueue.add(e),n?(i.layouts[e.id]=e,e.running=!0,e.finishedLayout&&i.finishQueue.add(e),++i.remainingLayouts,++e.layoutCount,e.ownerContext=t,e.beginCount=0,e.blockCount=0,e.calcCount=0,e.triggerCount=0,e.initialized||e.initLayout(),e.beginLayout(t)):(++e.beginCount,e.running||(++i.remainingLayouts,e.running=!0,e.isComponentLayout&&t.unsetProp("done"),i.completionQueue.remove(e),i.finalizeQueue.remove(e))),e.beginLayoutCycle(t,n)},run:function(){var e=this,t=!1,n=e.cycleWatchDog;for(e.purgeInvalidates(),e.flushInvalidates(),e.state=1,e.totalCount=e.layoutQueue.getCount(),e.flush();(e.remainingLayouts||e.invalidQueue.length)&&n--;){if(e.invalidQueue.length&&e.flushInvalidates(),e.runCycle())t=!1;else if(t){if(!e.invalidQueue.length){e.state=2;break}}else e.flush(),t=!0,e.flushLayouts("completionQueue","completeLayout");e.remainingLayouts||e.invalidQueue.length||(e.flush(),e.flushLayouts("completionQueue","completeLayout"),
e.flushLayouts("finalizeQueue","finalizeLayout"))}return e.runComplete()},runComplete:function(){var e=this;return e.state=2,e.remainingLayouts?(e.handleFailure(),!1):(e.flush(),e.flushLayouts("finishQueue","finishedLayout",!0),e.flushLayouts("finishQueue","notifyOwner"),e.flush(),e.flushAnimations(),!0)},runCycle:function(){var e,t=this,n=t.layoutQueue.clear(),i=n.length;for(++t.cycleCount,t.progressCount=0,e=0;i>e;++e)t.runLayout(t.currentLayout=n[e]);return t.currentLayout=null,t.progressCount>0},runLayout:function(e){var t=this,n=t.getCmp(e.owner);e.pending=!1,n.state.blocks||(e.done=!0,++e.calcCount,++t.calcCount,e.calculate(n),e.done?(t.layoutDone(e),e.completeLayout&&t.queueCompletion(e),e.finalizeLayout&&t.queueFinalize(e)):e.pending||e.invalid||e.blockCount+e.triggerCount-e.firedTriggers||t.queueLayout(e))},setItemSize:function(e,t,n){var i,r,o=e,a=1;for(e.isComposite?(o=e.elements,a=o.length,e=o[0]):e.dom||e.el||(a=o.length,e=o[0]),r=0;a>r;)i=this.get(e),i.setSize(t,n),e=o[++r]}},1,0,0,0,0,0,[Ext.layout,"Context"],0),Ext.cmd.derive("Ext.layout.component.FieldSet",Ext.layout.component.Body,{type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(e){e.target.collapsed&&(e.heightModel=this.sizeModels.shrinkWrap)},beginLayout:function(e){var t=this.owner.legend;Ext.layout.component.Body.prototype.beginLayout.call(this,e),t&&(e.legendContext=e.context.getCmp(t))},beginLayoutCycle:function(e){var t,n=e.target;Ext.layout.component.Body.prototype.beginLayoutCycle.apply(this,arguments),n.collapsed&&(e.setContentHeight(0),e.restoreMinHeight=n.minHeight,delete n.minHeight,e.widthModel.shrinkWrap&&(t=this.lastComponentSize,e.setContentWidth(t&&t.contentWidth||this.defaultCollapsedWidth)))},finishedLayout:function(e){var t=this.owner,n=e.restoreMinHeight;Ext.layout.component.Body.prototype.finishedLayout.apply(this,arguments),n&&(t.minHeight=n)},calculateOwnerWidthFromContentWidth:function(e,t){var n=e.legendContext;return n&&(t=Math.max(t,n.getProp("width"))),Ext.layout.component.Body.prototype.calculateOwnerWidthFromContentWidth.call(this,e,t)},calculateOwnerHeightFromContentHeight:function(e){var t=e.getBorderInfo(),n=e.legendContext;return e.getProp("contentHeight")+e.getPaddingInfo().height+(Ext.isIE8?e.bodyContext.getPaddingInfo().top:0)+(n?n.getProp("height"):t.top)+t.bottom},publishInnerHeight:function(e,t){var n=e.legendContext,i=0;n&&(i=n.getProp("height")),void 0===i?this.done=!1:Ext.layout.component.Body.prototype.publishInnerHeight.call(this,e,t-i)},getLayoutItems:function(){var e=this.owner.legend;return e?[e]:[]}},0,0,0,0,["layout.fieldset"],0,[Ext.layout.component,"FieldSet"],0),Ext.cmd.derive("Ext.layout.container.Accordion",Ext.layout.container.VBox,{type:"accordion",alternateClassName:"Ext.layout.AccordionLayout",targetCls:"x-accordion-layout-ct",itemCls:["x-box-item","x-accordion-item"],align:"stretch",enableSplitters:!1,fill:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:void 0,animate:!0,activeOnTop:!1,multi:!1,panelCollapseMode:"header",defaultAnimatePolicy:{y:!0,height:!0},constructor:function(){var e=this;Ext.layout.container.VBox.prototype.constructor.apply(this,arguments),e.animate?(e.animatePolicy={},e.animatePolicy[e.names.x]=!0,e.animatePolicy[e.names.width]=!0):e.animatePolicy=null},beforeRenderItems:function(e){var t,n,i=this,r=e.length,o=i.owner,a=i.collapseFirst,s=Ext.isDefined(a),l=i.getExpanded(!0)[0],d=i.multi;for(n=0;r>n;n++)t=e[n],t.rendered||(d&&t.collapsible===!1||(t.collapsible=!0),t.collapsible&&(s&&(t.collapseFirst=a),i.hideCollapseTool?(t.hideCollapseTool=i.hideCollapseTool,t.titleCollapse=!0):i.titleCollapse&&void 0===t.titleCollapse&&(t.titleCollapse=i.titleCollapse)),t.hideHeader=t.width=null,t.title=t.title||"&#160;",t.addBodyCls("x-accordion-body"),d||(l?t.collapsed=l!==t:t.hasOwnProperty("collapsed")&&t.collapsed===!1?l=t:t.collapsed=!0,o.mon(t,"show",i.onComponentShow,i)),t.headerOverCls="x-accordion-hd-over");i.processing||d||(l?i.activeOnTop&&(l.collapsed=!1,i.configureItem(l),o.items.indexOf(l)>0&&o.insert(0,l)):r&&(e[0].collapsed=!1))},getItemsRenderTree:function(e){return this.beforeRenderItems(e),Ext.layout.container.VBox.prototype.getItemsRenderTree.apply(this,arguments)},renderItems:function(e){this.beforeRenderItems(e),Ext.layout.container.VBox.prototype.renderItems.apply(this,arguments)},configureItem:function(e){Ext.layout.container.VBox.prototype.configureItem.apply(this,arguments),e.ignoreHeaderBorderManagement=!0,e.animCollapse=!1,this.fill&&(e.flex=1)},beginLayout:function(e){Ext.layout.container.VBox.prototype.beginLayout.apply(this,arguments),this.updatePanelClasses(e)},updatePanelClasses:function(e){var t,n,i,r=e.visibleItems,o=r.length,a=!0;for(t=0;o>t;t++)n=r[t],i=n.header,i.addCls("x-accordion-hd"),a?i.removeCls("x-accordion-hd-sibling-expanded"):i.addCls("x-accordion-hd-sibling-expanded"),t+1===o&&n.collapsed?i.addCls("x-accordion-hd-last-collapsed"):i.removeCls("x-accordion-hd-last-collapsed"),a=n.collapsed},onBeforeComponentExpand:function(e){var t,n,i,r=this,o=r.owner,a=r.multi,s=!a&&!r.animate&&r.activeOnTop;r.processing||(r.processing=!0,n=o.deferLayouts,o.deferLayouts=!0,a||(t=r.getExpanded()[0],t&&t!==e&&(i=t.$layoutAnim,i&&i.jumpToEnd(),t.collapse())),s&&(Ext.suspendLayouts(),o.insert(0,e),Ext.resumeLayouts()),o.deferLayouts=n,r.processing=!1)},onBeforeComponentCollapse:function(e){var t,n,i,r=this,o=r.owner;return 1===r.owner.items.getCount()?!1:void(r.processing||(r.processing=!0,i=o.deferLayouts,o.deferLayouts=!0,t=e.next()||e.prev(),r.multi?(n=r.getExpanded(),1===n.length&&t.expand()):t&&t.expand(),o.deferLayouts=i,r.processing=!1))},onComponentShow:function(e){this.onBeforeComponentExpand(e)},onAdd:function(e){var t=this;Ext.layout.container.VBox.prototype.onAdd.apply(this,arguments),"placeholder"===e.collapseMode&&(e.collapseMode=t.panelCollapseMode),e.collapseDirection=e.headerPosition,t.layoutCount&&!t.multi&&t.owner.items.getCount()>1&&(t.processing=!0,e.collapse(),t.processing=!1)},onRemove:function(e){var t,n=this;Ext.layout.container.VBox.prototype.onRemove.apply(this,arguments),n.owner.destroying||n.multi||e.collapsed||(t=n.owner.items.first(),t&&t.expand())},getExpanded:function(e){for(var t,n,i=this.owner.items.items,r=i.length,o=0,a=[];r>o;++o)n=i[o],n.hidden||(t=e?n.hasOwnProperty("collapsed")&&n.collapsed===!1:!n.collapsed,t&&a.push(n));return a},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn},1,0,0,0,["layout.accordion"],0,[Ext.layout.container,"Accordion",Ext.layout,"AccordionLayout"],0),Ext.cmd.derive("Ext.plugin.Manager",Ext.Base,{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:!0,typeName:"ptype",create:function(e,t,n){var i,r;return e.init?i=e:(n?(e=Ext.apply({},e),e.cmp=n):n=e.cmp,e.xclass?i=Ext.create(e):(r="plugin."+(e.ptype||t),i=Ext.ClassManager.instantiateByAlias(r,e))),i&&n&&i.setCmp&&!i.setCmpCalled&&(i.setCmp(n),i.setCmpCalled=!0),i}},0,0,0,0,0,0,[Ext.plugin,"Manager",Ext,"PluginManager",Ext,"PluginMgr"],0),Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var e,t,n,i,r,o,a,s,l=this,d=l.splitter,u=d.collapseTarget,c=d.defaultSplitMin,h=d.vertical?"Width":"Height",p="min"+h,f="max"+h,g="get"+h,m=d.neighbors,x=m.length,v=u.el.getBox(),y=v.x,E=v.y,b=v.right,C=v.bottom,w=d.vertical?b-y:C-E;for(i=(u[p]||Math.min(w,c))-w,r=u[f],r?r-=w:r=1e9,s=w,e=0;x>e;++e)t=m[e],w=t[g](),n=t[f],null===n&&(n=void 0),o=w-n,a=w-(t[p]||Math.min(w,c)),isNaN(o)||o>i&&(i=o),r>a&&(r=a);return 2>r-i?null:(v=new Ext.util.Region(E,b,C,y),l.constraintAdjusters[l.getCollapseDirection()](v,i,r,d),l.dragInfo={minRange:i,maxRange:r,targetSize:s},v)},constraintAdjusters:{left:function(e,t,n,i){e[0]=e.x=e.left=e.right+t,e.right+=n+i.getWidth()},top:function(e,t,n,i){e[1]=e.y=e.top=e.bottom+t,e.bottom+=n+i.getHeight()},bottom:function(e,t,n,i){e.bottom=e.top-t,e.top-=n+i.getHeight()},right:function(e,t,n,i){e.right=e.left-t,e[0]=e.x=e.left=e.x-n+i.getWidth()}},onBeforeStart:function(){var e,t,n=this,i=n.splitter,r=i.collapseTarget,o=i.neighbors,a=o.length;if(r.collapsed)return!1;for(e=0;a>e;++e)if(t=o[e],t.collapsed&&t.isHorz===r.isHorz)return!1;return(n.constrainTo=n.calculateConstrainRegion())?!0:!1},performResize:function(e,t){var n,i=this,r=i.splitter,o=r.getCollapseDirection(),a=r.collapseTarget,s=i.splitAdjusters[r.vertical?"horz":"vert"],l=t[s.index],d=i.dragInfo;("right"===o||"bottom"===o)&&(l=-l),l=Math.min(Math.max(d.minRange,l),d.maxRange),l&&((n=r.ownerCt).suspendLayouts(),s.adjustTarget(a,d.targetSize,l),n.resumeLayouts(!0))},splitAdjusters:{horz:{index:0,adjustTarget:function(e,t,n){e.flex=null,e.setSize(t+n)}},vert:{index:1,adjustTarget:function(e,t,n){e.flex=null,e.setSize(void 0,t+n)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0),Ext.define("Ext.rtl.resizer.BorderSplitterTracker",{override:"Ext.resizer.BorderSplitterTracker",rtlDirections:{top:"top",right:"left",bottom:"bottom",left:"right"},getCollapseDirection:function(){var e=this.splitter.getCollapseDirection();return!this.splitter.getInherited().rtl!=!Ext.rootInheritedState.rtl&&(e=this.rtlDirections[e]),e}}),Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:!0,preserveRatio:!1,constrainTo:null,proxyCls:"x-resizable-proxy",constructor:function(e){var t,n,i,r=this;e.el||(e.target.isComponent?r.el=e.target.getEl():r.el=e.target),Ext.dd.DragTracker.prototype.constructor.apply(this,arguments),r.preserveRatio&&r.minWidth&&r.minHeight&&(t=r.minWidth/r.el.getWidth(),n=r.minHeight/r.el.getHeight(),n>t?r.minWidth=r.el.getWidth()*n:r.minHeight=r.el.getHeight()*t),r.throttle&&(i=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(r,arguments)},r.throttle),r.resize=function(e,t,n){n?Ext.resizer.ResizeTracker.prototype.resize.apply(r,arguments):i.apply(null,arguments)})},onBeforeStart:function(){this.startBox=this.target.getBox()},getProxy:function(){var e=this;return e.dynamic||e.proxy||(e.proxy=e.createProxy(e.target||e.el),e.hideProxy=!0),e.proxy?(e.proxy.show(),e.proxy):void 0},createProxy:function(e){var t,n=this.proxyCls;return t=e.isComponent?e.getProxy().addCls(n):e.createProxy({tag:"div",role:"presentation",cls:n,id:e.id+"-rzproxy"},Ext.getBody()),t.removeCls("x-proxy-el"),t},onStart:function(){this.activeResizeHandle=Ext.get(this.getDragTarget().id),this.dynamic||this.resize(this.startBox)},onDrag:function(e){(this.dynamic||this.proxy)&&this.updateDimensions(e)},updateDimensions:function(e,t){var n,i,r,o,a,s,l,d,u,c=this,h=c.activeResizeHandle.region,p=c.getOffset(c.constrainTo?"dragTarget":null),f=c.startBox,g=0,m=0,x=0,v=0;switch(h=c.convertRegionName(h)){case"south":m=p[1],s=2;break;case"north":m=-p[1],v=-m,s=2;break;case"east":g=p[0],s=1;break;case"west":g=-p[0],x=-g,s=1;break;case"northeast":m=-p[1],v=-m,g=p[0],a=[f.x,f.y+f.height],s=3;break;case"southeast":m=p[1],g=p[0],a=[f.x,f.y],s=3;break;case"southwest":g=-p[0],x=-g,m=p[1],a=[f.x+f.width,f.y],s=3;break;case"northwest":m=-p[1],v=-m,g=-p[0],x=-g,a=[f.x+f.width,f.y+f.height],s=3}if(l={width:f.width+g,height:f.height+m,x:f.x+x,y:f.y+v},i=Ext.Number.snap(l.width,c.widthIncrement),r=Ext.Number.snap(l.height,c.heightIncrement),i!==l.width||r!==l.height){switch(h){case"northeast":l.y-=r-l.height;break;case"north":l.y-=r-l.height;break;case"southwest":l.x-=i-l.width;break;case"west":l.x-=i-l.width;break;case"northwest":l.x-=i-l.width,l.y-=r-l.height}l.width=i,l.height=r}l.width<c.minWidth||l.width>c.maxWidth?(l.width=Ext.Number.constrain(l.width,c.minWidth,c.maxWidth),x&&(l.x=f.x+(f.width-l.width))):c.lastX=l.x,l.height<c.minHeight||l.height>c.maxHeight?(l.height=Ext.Number.constrain(l.height,c.minHeight,c.maxHeight),v&&(l.y=f.y+(f.height-l.height))):c.lastY=l.y,(c.preserveRatio||e.shiftKey)&&(n=c.startBox.width/c.startBox.height,d=Math.min(Math.max(c.minHeight,l.width/n),c.maxHeight),u=Math.min(Math.max(c.minWidth,l.height*n),c.maxWidth),1===s?l.height=d:2===s?l.width=u:(o=Math.abs(a[0]-this.lastXY[0])/Math.abs(a[1]-this.lastXY[1]),o>n?l.height=d:l.width=u,"northeast"===h?l.y=f.y-(l.height-f.height):"northwest"===h?(l.y=f.y-(l.height-f.height),l.x=f.x-(l.width-f.width)):"southwest"===h&&(l.x=f.x-(l.width-f.width)))),c.setPosition=l.x!==c.startBox.x||l.y!==c.startBox.y,c.resize(l,t)},resize:function(e,t){var n,i=this,r=i.setPosition;(i.dynamic||!i.dynamic&&t)&&(r?i.target.setBox(e):i.target.setSize(e.width,e.height)),t||(n=i.getProxy(),n&&n!==i.target&&(r||i.hideProxy?n.setBox(e):n.setSize(e.width,e.height)))},onEnd:function(e){this.updateDimensions(e,!0),this.proxy&&this.hideProxy&&this.proxy.hide()},convertRegionName:function(e){return e}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0),Ext.define("Ext.rtl.resizer.ResizeTracker",{override:"Ext.resizer.ResizeTracker",_rtlRegionNames:{south:"south",north:"north",east:"west",west:"east",northeast:"northwest",southeast:"southwest",southwest:"southeast",northwest:"northeast"},convertRegionName:function(e){return Ext.rootInheritedState.rtl?this._rtlRegionNames[e]:e}}),Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:"x-resizable-handle",overCls:"x-resizable-handle-over",pinnedCls:"x-resizable-pinned",wrapCls:"x-resizable-wrap",wrappedCls:"x-resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:!0,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:1e4,maxWidth:1e4,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(e){var t,n,i,r,o,a,s,l,d,u,c,h,p=this,f=p.handles,g=Ext.dom.Element.unselectableCls,m=[];for((Ext.isString(e)||Ext.isElement(e)||e.dom)&&(t=e,e=arguments[1]||{},e.target=t),p.mixins.observable.constructor.call(p,e),t=p.target,t?t.isComponent?(t.addClsWithUI("resizable"),t.minWidth&&(p.minWidth=t.minWidth),t.minHeight&&(p.minHeight=t.minHeight),t.maxWidth&&(p.maxWidth=t.maxWidth),t.maxHeight&&(p.maxHeight=t.maxHeight),t.floating&&(p.hasOwnProperty("handles")||(p.handles="n ne e se s sw w nw")),p.el=t.getEl()):t=p.el=p.target=Ext.get(t):t=p.target=p.el=Ext.get(p.el),p.el.addCls(Ext.Component.prototype.borderBoxCls),Ext.isNumber(p.width)&&(p.width=Ext.Number.constrain(p.width,p.minWidth,p.maxWidth)),Ext.isNumber(p.height)&&(p.height=Ext.Number.constrain(p.height,p.minHeight,p.maxHeight)),(null!==p.width||null!==p.height)&&p.target.setSize(p.width,p.height),r=p.el.dom.tagName.toUpperCase(),("TEXTAREA"===r||"IMG"===r||"TABLE"===r)&&(p.originalTarget=p.target,u=t.isComponent?t.getEl():t,p.el.addCls(p.wrappedCls),p.target=p.el=p.el.wrap({role:"presentation",cls:p.wrapCls,id:p.el.id+"-rzwrap",style:u.getStyle(["margin-top","margin-bottom"])}),c=u.getPositioning(),p.el.setPositioning(c),u.clearPositioning(),d=u.getBox(),"absolute"!==c.position&&(d.x=0,d.y=0),p.el.setBox(d),u.setStyle("position","absolute"),p.isTargetWrapped=!0),p.el.position(),p.pinned&&p.el.addCls(p.pinnedCls),p.resizeTracker=new Ext.resizer.ResizeTracker({disabled:p.disabled,target:t,el:p.el,constrainTo:p.constrainTo,handleCls:p.handleCls,overCls:p.overCls,throttle:p.throttle,proxy:p.originalTarget?p.el:null,dynamic:p.originalTarget?!0:p.dynamic,originalTarget:p.originalTarget,delegate:"."+p.handleCls,preserveRatio:p.preserveRatio,heightIncrement:p.heightIncrement,widthIncrement:p.widthIncrement,minHeight:p.minHeight,maxHeight:p.maxHeight,minWidth:p.minWidth,maxWidth:p.maxWidth}),p.resizeTracker.on({mousedown:p.onBeforeResize,drag:p.onResize,dragend:p.onResizeEnd,scope:p}),"all"===p.handles&&(p.handles="n s e w ne nw se sw"),f=p.handles=p.handles.split(p.delimiterRe),i=p.possiblePositions,o=f.length,n=p.handleCls+" "+p.handleCls+"-{0}",p.target.isComponent&&(h=p.target.baseCls,n+=" "+h+"-handle "+h+"-handle-{0}",Ext.supports.CSS3BorderRadius&&(n+=" "+h+"-handle-{0}-br")),a=0;o>a;a++)f[a]&&i[f[a]]&&(s=i[f[a]],m.push('<div id="',p.el.id,"-",s,'-handle" class="',Ext.String.format(n,s)," ",g,'" unselectable="on" role="presentation"',"></div>"));for(Ext.DomHelper.append(p.el,m.join("")),m.length=0,a=0;o>a;a++)f[a]&&i[f[a]]&&(s=i[f[a]],l=p[s]=p.el.getById(p.el.id+"-"+s+"-handle"),m.push(l),l.region=s,p.transparent&&l.setOpacity(0));p.resizeTracker.handleEls=m},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(e,t){return this.fireResizeEvent("beforeresize",e,t)},onResize:function(e,t){return this.fireResizeEvent("resizedrag",e,t)},onResizeEnd:function(e,t){return this.fireResizeEvent("resize",e,t)},fireResizeEvent:function(e,t,n){var i,r=this;return r.hasListeners[e]?(i=r.el.getBox(),r.fireEvent(e,r,i.width,i.height,n)):void 0},resizeTo:function(e,t){var n=this;n.target.setSize(e,t),n.fireEvent("resize",n,e,t,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var e,t,n=this,i=n.handles,r=i.length,o=n.possiblePositions;for(n.resizeTracker.destroy(),n.isTargetWrapped&&n.target.destroy(),e=0;r>e;e++)(t=n[o[i[e]]])&&t.destroy()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0),Ext.cmd.derive("Ext.selection.CellModel",Ext.selection.DataViewModel,{isCellModel:!0,deselectOnContainerClick:!1,enableKeyNav:!0,preventWrap:!1,bindComponent:function(e){var t,n=this;n.view&&n.gridListeners&&n.gridListeners.destroy(),Ext.selection.DataViewModel.prototype.bindComponent.call(this,e),e&&(t=e.grid||e.ownerCt,t.optimizedColumnMove!==!1&&(n.gridListeners=t.on({columnmove:n.onColumnMove,scope:n,destroyable:!0})))},getViewListeners:function(){var e=Ext.selection.DataViewModel.prototype.getViewListeners.call(this);return e.refresh=this.onViewRefresh,e},getHeaderCt:function(){var e=this.navigationModel.getPosition(),t=e?e.view:this.primaryView;return t.headerCt},onNavigate:function(e){e.record&&this.setPosition(e.position)},selectWithEvent:function(e){this.select(e)},select:function(e,t,n){var i,r=this,o=r.getPosition(),a=r.view.store;(e||0===e)&&(e.isModel?(i=a.indexOf(e),e=-1!==i?{row:i,column:o?o.column:0}:null):"number"==typeof e&&(e={row:e,column:0})),e?r.selectByPosition(e,n):r.deselect()},getCurrentPosition:function(){var e=this.selecting?this.nextSelection:this.selection;return e?{view:e.view,record:e.record,row:e.rowIdx,columnHeader:e.column,column:e.view.getColumnManager().indexOf(e.column)}:e},getPosition:function(){return(this.selecting?this.nextSelection:this.selection)||null},setCurrentPosition:function(e,t,n){return e&&!e.isCellContext&&(e=new Ext.grid.CellContext(this.view).setPosition({row:e.row,column:"number"==typeof e.column?this.view.getColumnManager().getColumns()[e.column]:e.column})),this.setPosition(e,t,n)},setPosition:function(e,t,n){var i=this,r=i.selection;return e&&(e=e.isCellContext?e.clone():new Ext.grid.CellContext(i.view).setPosition(e)),!n&&r&&(e&&e.record===r.record&&e.column===r.column&&e.view===r.view?e=null:i.onCellDeselect(i.selection,t)),e?(i.nextSelection=e,i.selecting=!0,i.onCellSelect(i.nextSelection,t),i.selecting=!1,i.selection=e):void 0},isCellSelected:function(e,t,n){var i,r=this,o=r.getPosition();return o&&o.view===e?(i=new Ext.grid.CellContext(e).setPosition({row:t,column:"number"==typeof n?e.getColumnManager().getColumns()[n]:n}),i.record===o.record&&i.column===o.column):void 0},onStoreRemove:function(e){var t=this,n=t.getPosition();Ext.selection.DataViewModel.prototype.onStoreRemove.apply(this,arguments),n&&e.isMoving(n.record)||(n&&e.getCount()&&-1!==e.indexOf(n.record)?n.setRow(n.record):t.selection=null)},onStoreClear:function(){Ext.selection.DataViewModel.prototype.onStoreClear.apply(this,arguments),this.selection=null},onStoreAdd:function(){var e=this,t=e.getPosition();Ext.selection.DataViewModel.prototype.onStoreAdd.apply(this,arguments),t?t.setRow(t.record):e.selection=null},onCellClick:function(e,t,n,i,r,o,a){-1!==o&&this.setPosition(a.position)},onCellSelect:function(e,t){e&&void 0!==e.rowIdx&&e.rowIdx>-1&&this.doSelect(e.record,!1,t)},onCellDeselect:function(e,t){e&&void 0!==e.rowIdx&&this.doDeselect(e.record,t)},onSelectChange:function(e,t,n,i){var r,o,a,s=this;t?(r=s.nextSelection,o="select"):(r=s.selection,o="deselect"),a=r.view||s.primaryView,(n||s.fireEvent("before"+o,s,e,r.rowIdx,r.colIdx))!==!1&&i()!==!1&&(t?a.onCellSelect(r):(a.onCellDeselect(r),delete s.selection),n||s.fireEvent(o,s,e,r.rowIdx,r.colIdx))},onEditorTab:function(e,t){var n=this,i=t.shiftKey?"left":"right",r=t.position,o=r.view.walkCells(r,i,t,n.preventWrap);o&&(e.startEdit(o.record,o.column)?n.wasEditing=!1:(o.view.getNavigationModel().setPosition(o,null,t),n.wasEditing=!0))},refresh:function(){var e,t=this.getPosition();t&&-1!==(e=this.store.indexOf(this.selected.last()))&&(t.rowIdx=e)},onColumnMove:function(e){var t=e.up("tablepanel");t&&this.onViewRefresh(t.view)},onUpdate:function(e){var t,n=this;n.isSelected(e)&&(t=n.selecting?n.nextSelection:n.selection,n.view.onCellSelect(t))},onViewRefresh:function(e){var t,n,i,r=this,o=r.getPosition(),a=e.headerCt;o&&o.view===e&&(n=o.record,i=o.column,i.isDescendantOf(a)||(i=a.queryById(i.id)||a.down('[text="'+i.text+'"]')||a.down('[dataIndex="'+i.dataIndex+'"]')),o.record?i&&-1!==e.store.indexOfId(n.getId())&&(t=new Ext.grid.CellContext(e).setPosition({row:n,column:i}),r.setPosition(t)):r.selection=null)},selectByPosition:function(e,t){this.setPosition(e,t)}},0,0,0,0,["selection.cellmodel"],0,[Ext.selection,"CellModel"],0),Ext.cmd.derive("Ext.selection.CheckboxModel",Ext.selection.RowModel,{mode:"MULTI",injectCheckbox:0,checkOnly:!1,showHeaderCheckbox:void 0,checkSelector:".x-grid-row-checker",allowDeselect:!0,headerWidth:24,checkerOnCls:"x-grid-hd-checker-on",tdCls:"x-grid-cell-special x-grid-cell-row-checker",constructor:function(){var e=this;Ext.selection.RowModel.prototype.constructor.apply(this,arguments),"SINGLE"===e.mode&&e.showHeaderCheckbox!==!0&&(e.showHeaderCheckbox=!1)},beforeViewRender:function(e){var t,n=this;Ext.selection.RowModel.prototype.beforeViewRender.apply(this,arguments),(!n.hasLockedHeader()||e.headerCt.lockedCt)&&(n.addCheckbox(e,!0),t=e.ownerCt,e.headerCt.lockedCt&&(t=t.ownerCt),n.mon(t,"reconfigure",n.onReconfigure,n))},bindComponent:function(){this.sortable=!1,Ext.selection.RowModel.prototype.bindComponent.apply(this,arguments)},hasLockedHeader:function(){var e,t=this.views,n=t.length;for(e=0;n>e;e++)if(t[e].headerCt.lockedCt)return!0;return!1},addCheckbox:function(e,t){var n=this,i=n.injectCheckbox,r=e.headerCt;i!==!1&&("first"===i?i=0:"last"===i&&(i=r.getColumnCount()),Ext.suspendLayouts(),e.getStore().isBufferedStore&&(n.showHeaderCheckbox=!1),n.column=r.add(i,n.getHeaderConfig()),Ext.resumeLayouts()),t!==!0&&e.refresh()},onReconfigure:function(e,t,n){n&&this.addCheckbox(this.views[0])},toggleUiHeader:function(e){var t=this.views[0],n=t.headerCt,i=n.child("gridcolumn[isCheckerHd]"),r=this.checkerOnCls;i&&(e?i.addCls(r):i.removeCls(r))},onHeaderClick:function(e,t,n){if(t===this.column){n.stopEvent();var i=this,r=t.el.hasCls("x-grid-hd-checker-on");r?i.deselectAll():i.selectAll()}},getHeaderConfig:function(){var e=this,t=e.showHeaderCheckbox!==!1;return{xtype:"gridcolumn",isCheckerHd:t,text:"&#160;",clickTargetName:"el",width:e.headerWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:"",tdCls:e.tdCls,cls:t?"x-column-header-checkbox ":"",defaultRenderer:e.renderer.bind(e),editRenderer:e.editRenderer||e.renderEmpty,locked:e.hasLockedHeader()}},renderEmpty:function(){return"&#160;"},refresh:function(){Ext.selection.RowModel.prototype.refresh.apply(this,arguments),this.updateHeaderState()},renderer:function(){return'<div class="x-grid-row-checker" role="presentation">&#160;</div>'},selectByPosition:function(e,t){e.isCellContext||(e=new Ext.grid.CellContext(this.view).setPosition(e.row,e.column)),this.checkOnly&&e.column===this.column||Ext.selection.RowModel.prototype.selectByPosition.call(this,e,t)},onSelectChange:function(){Ext.selection.RowModel.prototype.onSelectChange.apply(this,arguments),this.suspendChange||this.updateHeaderState()},onStoreLoad:function(){Ext.selection.RowModel.prototype.onStoreLoad.apply(this,arguments),this.updateHeaderState()},onStoreAdd:function(){Ext.selection.RowModel.prototype.onStoreAdd.apply(this,arguments),this.updateHeaderState()},onStoreRemove:function(){Ext.selection.RowModel.prototype.onStoreRemove.apply(this,arguments),this.updateHeaderState()},onStoreRefresh:function(){Ext.selection.RowModel.prototype.onStoreRefresh.apply(this,arguments),this.updateHeaderState()},maybeFireSelectionChange:function(e){e&&!this.suspendChange&&this.updateHeaderState(),Ext.selection.RowModel.prototype.maybeFireSelectionChange.apply(this,arguments)},resumeChanges:function(){Ext.selection.RowModel.prototype.resumeChanges.call(this),this.suspendChange||this.updateHeaderState()},updateHeaderState:function(){var e,t,n,i=this,r=i.store,o=r.getCount(),a=i.views,s=!1,l=0;if(!r.isBufferedStore&&o>0){for(e=i.selected,s=!0,n=0,t=e.getCount();t>n&&-1!==r.indexOfId(e.getAt(n).id);++n)++l;s=o===l}a&&a.length&&i.toggleUiHeader(s)},vetoSelection:function(e){var t,n,i,r=this,o=r.column;return r.checkOnly&&(n="click"===e.type&&e.getTarget(r.checkSelector),i=e.getKey()===e.SPACE&&e.position.column===o,t=!(n||i)),t||Ext.selection.RowModel.prototype.vetoSelection.call(this,e)},destroy:function(){this.column=null,Ext.selection.RowModel.prototype.destroy.call(this)},privates:{onBeforeNavigate:function(e){var t=e.keyEvent;"SINGLE"!==this.selectionMode&&(e.ctrlKey=e.ctrlKey||t.ctrlKey||"click"===t.type&&!t.shiftKey||t.getKey()===t.SPACE)},selectWithEventMulti:function(e,t,n){var i=this;t.shiftKey||t.ctrlKey||!t.getTarget(i.checkSelector)?Ext.selection.RowModel.prototype.selectWithEventMulti.call(this,e,t,n):n?i.doDeselect(e):i.doSelect(e,!0)}}},1,0,0,0,["selection.checkboxmodel"],0,[Ext.selection,"CheckboxModel"],0),Ext.cmd.derive("Ext.slider.Thumb",Ext.Base,{overCls:"x-slider-thumb-over",constructor:function(e){var t=this;Ext.apply(t,e||{},{cls:"x-slider-thumb",constrain:!1}),t.callParent([e])},render:function(){var e=this;e.el=e.slider.innerEl.insertFirst(e.getElConfig()),e.onRender()},onRender:function(){this.disabled&&this.disable(),this.initEvents()},getElConfig:function(){var e=this,t=e.slider,n={};return n[t.vertical?"bottom":t.horizontalProp]=t.calculateThumbPosition(t.normalizeValue(e.value))+"%",{style:n,id:this.id,cls:this.cls,role:"presentation"}},move:function(e,t){var n,i,r,o=this,a=o.el,s=o.slider,l=s.vertical?"bottom":s.horizontalProp;e+="%",t?(n={},n[l]=e,Ext.supports.GetPositionPercentage||(i={},i[l]=a.dom.style[l]),r={target:a,duration:350,from:i,to:n,scope:o,callback:o.onAnimComplete},t!==!0&&Ext.apply(r,t),o.anim=new Ext.fx.Anim(r)):a.dom.style[l]=e},onAnimComplete:function(){this.anim=null},enable:function(){var e=this.el;this.disabled=!1,e&&e.removeCls(this.slider.disabledCls)},disable:function(){var e=this.el;this.disabled=!0,e&&e.addCls(this.slider.disabledCls)},initEvents:function(){var e=this;e.tracker=new Ext.dd.DragTracker({el:e.el,onBeforeStart:e.onBeforeDragStart.bind(e),onStart:e.onDragStart.bind(e),onDrag:e.onDrag.bind(e),onEnd:e.onDragEnd.bind(e),tolerance:3,autoStart:300}),e.el.hover(e.addOverCls,e.removeOverCls,e)},addOverCls:function(){var e=this;e.disabled||e.el.addCls(e.overCls)},removeOverCls:function(){this.el.removeCls(this.overCls)},onBeforeDragStart:function(){var e=this,t=e.el,n=e.tracker.getXY(),i=e.pointerOffset=t.getXY();return e.disabled?!1:(i[0]+=Math.floor(t.getWidth()/2)-n[0],i[1]+=Math.floor(t.getHeight()/2)-n[1],e.slider.promoteThumb(e),!0)},onDragStart:function(e){var t=this,n=t.slider;n.onDragStart(t,e),t.el.addCls("x-slider-thumb-drag"),t.dragging=t.slider.dragging=!0,t.dragStartValue=t.value,n.fireEvent("dragstart",n,e,t)},onDrag:function(e){var t,n,i=this,r=i.slider,o=i.index,a=i.getValueFromTracker();void 0!==a&&(i.constrain&&(t=r.thumbs[o+1],n=r.thumbs[o-1],void 0!==n&&a<=n.value&&(a=n.value),void 0!==t&&a>=t.value&&(a=t.value)),r.setValue(o,a,!1),r.fireEvent("drag",r,e,i))},getValueFromTracker:function(){var e,t=this.slider,n=this.tracker.getXY();return n[0]+=this.pointerOffset[0],n[1]+=this.pointerOffset[1],e=t.getTrackpoint(n),void 0!==e?t.reversePixelValue(e):void 0},onDragEnd:function(e){var t=this,n=t.slider,i=t.value;n.onDragEnd(t,e),t.el.removeCls("x-slider-thumb-drag"),t.dragging=n.dragging=!1,n.fireEvent("dragend",n,e),t.dragStartValue!==i&&n.fireEvent("changecomplete",n,i,t)},destroy:function(){var e=this,t=this.anim;t&&t.end(),e.el=e.tracker=e.anim=Ext.destroy(e.el,e.tracker)}},1,0,0,0,0,0,[Ext.slider,"Thumb"],0),Ext.cmd.derive("Ext.slider.Tip",Ext.tip.Tip,{minWidth:10,offsets:null,align:null,position:"",defaultVerticalPosition:"left",defaultHorizontalPosition:"top",isSliderTip:!0,init:function(e){var t,n,i=this;switch(i.position||(i.position=e.vertical?i.defaultVerticalPosition:i.defaultHorizontalPosition),i.position){case"top":n=[0,-10],t="b-t?";break;case"bottom":n=[0,10],t="t-b?";break;case"left":n=[-10,0],t="r-l?";break;case"right":n=[10,0],t="l-r?"}i.align||(i.align=t),i.offsets||(i.offsets=n),e.on({scope:i,dragstart:i.onSlide,drag:i.onSlide,dragend:i.hide,destroy:i.destroy})},onSlide:function(e,t,n){var i=this;i.show(),i.update(i.getText(n)),i.el.alignTo(n.el,i.align,i.offsets)},getText:function(e){return e.value+""}},0,["slidertip"],["component","box","container","panel","tip","slidertip"],{component:!0,box:!0,container:!0,panel:!0,tip:!0,slidertip:!0},["widget.slidertip"],0,[Ext.slider,"Tip"],0),Ext.cmd.derive("Ext.slider.Multi",Ext.form.field.Base,{alternateClassName:"Ext.slider.MultiSlider",focusable:!0,needArrowKeys:!0,tabIndex:0,focusCls:"slider-focus",childEls:["endEl","innerEl"],fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl} class="x-slider {fieldCls} {vertical}','{childElCls}"','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="isVertical"> aria-orientation="vertical"<tpl else> aria-orientation="horizontal"</tpl>',">",'<div id="{cmpId}-endEl" data-ref="endEl" class="x-slider-end" role="presentation">','<div id="{cmpId}-innerEl" data-ref="innerEl" class="x-slider-inner" role="presentation">',"{%this.renderThumbs(out, values)%}","</div>","</div>","</div>",{renderThumbs:function(e,t){for(var n,i,r=t.$comp,o=0,a=r.thumbs,s=a.length;s>o;o++)n=a[o],i=n.getElConfig(),i.id=r.id+"-thumb-"+o,Ext.DomHelper.generateMarkup(i,e)},disableFormats:!0}],horizontalProp:"left",vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,dragging:!1,constrainThumbs:!0,useTips:!0,tipText:null,ariaRole:"slider",defaultBindProperty:"values",initValue:function(){var e=this,t=Ext.valueFrom,n=t(e.values,[t(e.value,t(e.minValue,0))]),i=0,r=n.length;for(e.originalValue=n;r>i;i++)e.addThumb(e.normalizeValue(n[i]))},initComponent:function(){var e,t,n,i,r,o=this;if(o.thumbs=[],o.keyIncrement=Math.max(o.increment,o.keyIncrement),o.extraFieldBodyCls="x-slider-ct-"+(o.vertical?"vert":"horz"),Ext.form.field.Base.prototype.initComponent.call(this),o.useTips){for(e=Ext.isObject(o.useTips)?Ext.apply({},o.useTips):o.tipText?{getText:o.tipText}:{},r=o.plugins=o.plugins||[],i=r.length,n=0;i>n;n++)if(r[n].isSliderTip){t=!0;break}t||o.plugins.push(new Ext.slider.Tip(e))}},addThumb:function(e){var t=this,n=new Ext.slider.Thumb({ownerCt:t,value:e,slider:t,index:t.thumbs.length,constrain:t.constrainThumbs,disabled:!!t.readOnly});return t.thumbs.push(n),t.rendered&&n.render(),n},promoteThumb:function(e){var t,n=this.thumbStack||(this.thumbStack=Ext.Array.slice(this.thumbs)),i=n.length,r=1e4;for(n[0]!==e&&(Ext.Array.remove(n,e),n.unshift(e)),t=0;i>t;t++)n[t].el.setStyle("zIndex",r),r-=1e3},getSubTplData:function(){var e=this;return Ext.apply(Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments),{$comp:e,isVertical:e.vertical,vertical:e.vertical?"x-slider-vert":"x-slider-horz",
minValue:e.minValue,maxValue:e.maxValue,value:e.value,tabIdx:e.tabIndex,childElCls:""})},onRender:function(){var e,t=this,n=t.thumbs,i=n.length,r=0;for((arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).apply(this,arguments),r=0;i>r;r++)e=n[r],e.el=t.el.getById(t.id+"-thumb-"+r),e.onRender()},initEvents:function(){var e=this;Ext.form.field.Base.prototype.initEvents.call(this),e.mon(e.el,{scope:e,mousedown:e.onMouseDown,keydown:e.onKeyDown})},onDragStart:Ext.emptyFn,onDragEnd:Ext.emptyFn,getTrackpoint:function(e){var t,n,i,r=this,o=r.vertical,a=r.innerEl;return o?(i="top",t=a.getHeight()):(i=r.horizontalProp,t=a.getWidth()),e=r.transformTrackPoints(a.translatePoints(e)),n=Ext.Number.constrain(e[i],0,t),o?t-n:n},transformTrackPoints:Ext.identityFn,checkChange:Ext.emptyFn,onMouseDown:function(e){var t,n=this,i=!1,r=0,o=n.thumbs,a=o.length;if(!n.disabled){for(;!i&&a>r;r++)i=i||e.target===o[r].el.dom;n.clickToChange&&!i&&(t=n.getTrackpoint(e.getXY()),void 0!==t&&n.onClickChange(t)),n.focus()}},onClickChange:function(e){var t,n,i=this;t=i.getNearest(e),t.disabled||(n=t.index,i.setValue(n,Ext.util.Format.round(i.reversePixelValue(e),i.decimalPrecision),void 0,!0))},getNearest:function(e){for(var t,n,i,r=this,o=r.reversePixelValue(e),a=r.getRange()+5,s=null,l=r.thumbs,d=0,u=l.length;u>d;d++)t=r.thumbs[d],n=t.value,i=Math.abs(n-o),Math.abs(i)<=a&&(s=t,a=i);return s},onKeyDown:function(e){var t,n,i=this;if(i.disabled||1!==i.thumbs.length)return void e.preventDefault();switch(t=e.getKey()){case e.UP:case e.RIGHT:e.stopEvent(),n=e.ctrlKey?i.maxValue:i.getValue(0)+i.keyIncrement,i.setValue(0,n,void 0,!0);break;case e.DOWN:case e.LEFT:e.stopEvent(),n=e.ctrlKey?i.minValue:i.getValue(0)-i.keyIncrement,i.setValue(0,n,void 0,!0)}},normalizeValue:function(e){var t=this,n=t.zeroBasedSnapping?"snap":"snapInRange";return e=Ext.Number[n](e,t.increment,t.minValue,t.maxValue),e=Ext.util.Format.round(e,t.decimalPrecision),e=Ext.Number.constrain(e,t.minValue,t.maxValue)},setMinValue:function(e){var t,n,i=this,r=i.thumbs,o=r.length;for(i.minValue=e,n=0;o>n;++n)t=r[n],t.value<e&&i.setValue(n,e,!1);i.syncThumbs()},setMaxValue:function(e){var t,n,i=this,r=i.thumbs,o=r.length;for(i.maxValue=e,n=0;o>n;++n)t=r[n],t.value>e&&i.setValue(n,e,!1);i.syncThumbs()},setValue:function(e,t,n,i){var r,o,a,s,l=this,d=l.thumbs;if(Ext.isArray(e)){for(s=e,n=t,a=0,o=s.length;o>a;++a)r=d[a],r&&l.setValue(a,s[a],n);return l}return r=l.thumbs[e],t=l.normalizeValue(t),t!==r.value&&l.fireEvent("beforechange",l,t,r.value,r)!==!1&&(r.value=t,l.rendered&&(n=Ext.isDefined(n)?n===!1?!1:n:l.animate,r.move(l.calculateThumbPosition(t),n),l.fireEvent("change",l,t,r),l.checkDirty(),i&&l.fireEvent("changecomplete",l,t,r))),l},calculateThumbPosition:function(e){var t=this,n=t.minValue,i=(e-n)/t.getRange()*100;return isNaN(i)&&(i=0),i},getRatio:function(){var e=this,t=e.innerEl,n=e.vertical?t.getHeight():t.getWidth(),i=e.getRange();return 0===i?n:n/i},getRange:function(){return this.maxValue-this.minValue},reversePixelValue:function(e){return this.minValue+e/this.getRatio()},reversePercentageValue:function(e){return this.minValue+this.getRange()*(e/100)},onDisable:function(){var e,t,n,i=this,r=0,o=i.thumbs,a=o.length;for(Ext.form.field.Base.prototype.onDisable.call(this);a>r;r++)e=o[r],t=e.el,e.disable(),Ext.isIE&&(n=t.getXY(),t.hide(),i.innerEl.addCls(i.disabledCls).dom.disabled=!0,i.thumbHolder||(i.thumbHolder=i.endEl.createChild({role:"presentation",cls:"x-slider-thumb "+i.disabledCls})),i.thumbHolder.show().setXY(n))},onEnable:function(){var e,t,n=this,i=0,r=n.thumbs,o=r.length;for(Ext.form.field.Base.prototype.onEnable.call(this);o>i;i++)e=r[i],t=e.el,e.enable(),Ext.isIE&&(n.innerEl.removeCls(n.disabledCls).dom.disabled=!1,n.thumbHolder&&n.thumbHolder.hide(),t.show(),n.syncThumbs())},syncThumbs:function(){if(this.rendered)for(var e=this.thumbs,t=e.length,n=0;t>n;n++)e[n].move(this.calculateThumbPosition(e[n].value))},getValue:function(e){return Ext.isNumber(e)?this.thumbs[e].value:this.getValues()},getValues:function(){for(var e=[],t=0,n=this.thumbs,i=n.length;i>t;t++)e.push(n[t].value);return e},getSubmitValue:function(){var e=this;return e.disabled||!e.submitValue?null:e.getValue()},reset:function(){for(var e,t=this,n=[].concat(t.originalValue),i=0,r=n.length;r>i;i++)e=n[i],t.setValue(i,e);t.clearInvalid(),delete t.wasValid},setReadOnly:function(e){var t=this,n=t.thumbs,i=n.length,r=0;for(Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments),e=t.readOnly;i>r;++r)e?n[r].disable():n[r].enable()},beforeDestroy:function(){var e,t=this,n=t.thumbs,i=0,r=n.length;if(t.rendered)for(;r>i;i++)e=n[i],Ext.destroy(e);Ext.form.field.Base.prototype.beforeDestroy.call(this)}},0,["multislider"],["component","box","field","multislider"],{component:!0,box:!0,field:!0,multislider:!0},["widget.multislider"],0,[Ext.slider,"Multi",Ext.slider,"MultiSlider"],0),Ext.define("Ext.rtl.slider.Multi",{override:"Ext.slider.Multi",initComponent:function(){this.getInherited().rtl&&(this.horizontalProp="right"),(arguments.callee.$previous||Ext.form.field.Base.prototype.initComponent).call(this)},onDragStart:function(){arguments.callee.$previous.apply(this,arguments),this._rtlInnerWidth=this.innerEl.getWidth()},onDragEnd:function(){arguments.callee.$previous.apply(this,arguments),delete this._rtlInnerWidth},onKeyDown:function(e){var t;return this.getInherited().rtl&&(t=e.getKey(),t===e.RIGHT?e.keyCode=e.LEFT:t===e.LEFT&&(e.keyCode=e.RIGHT)),(arguments.callee.$previous||Ext.form.field.Base.prototype.onKeyDown).call(this,e)},transformTrackPoints:function(e){var t,n;return this.isOppositeRootDirection()?(t=e.left,delete e.left,n=void 0!==this._rtlInnerWidth?this._rtlInnerWidth:this.innerEl.getWidth(),e.right=n-t,e):arguments.callee.$previous.apply(this,arguments)}}),Ext.cmd.derive("Ext.slider.Single",Ext.slider.Multi,{alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],defaultBindProperty:"value",initComponent:function(){this.publishOnComplete&&(this.valuePublishEvent="changecomplete"),Ext.slider.Multi.prototype.initComponent.call(this)},publishOnComplete:!0,getValue:function(){return Ext.slider.Multi.prototype.getValue.call(this,0)},setValue:function(){var e=arguments,t=e.length;return(1===t||3>=t&&"number"!=typeof e[1])&&(e=Ext.toArray(e),e.unshift(0)),Ext.slider.Multi.prototype.setValue.apply(this,e)},getNearest:function(){return this.thumbs[0]}},0,["slider","sliderfield"],["component","box","field","multislider","slider","sliderfield"],{component:!0,box:!0,field:!0,multislider:!0,slider:!0,sliderfield:!0},["widget.slider","widget.sliderfield"],0,[Ext.slider,"Single",Ext,"Slider",Ext.form,"SliderField",Ext.slider,"SingleSlider",Ext.slider,"Slider"],0),Ext.cmd.derive("Ext.toolbar.Breadcrumb",Ext.Container,{isBreadcrumb:!0,baseCls:"x-breadcrumb",layout:"hbox",config:{buttonUI:"plain-toolbar",displayField:"text",overflowHandler:null,showIcons:null,showMenuIcons:null,store:null,useSplitButtons:!0},renderConfig:{selection:"root"},publishes:["selection"],twoWayBindable:["selection"],_breadcrumbCls:"x-breadcrumb",_btnCls:"x-breadcrumb-btn",_folderIconCls:"x-breadcrumb-icon-folder",_leafIconCls:"x-breadcrumb-icon-leaf",initComponent:function(){var e=this,t=e.layout,n=e.getOverflowHandler();"string"==typeof t&&(t={type:t}),n&&(t.overflowHandler=n),e.layout=t,e.defaultButtonUI=e.getButtonUI(),e._buttons=[],e.addCls([e._breadcrumbCls,e._breadcrumbCls+"-"+e.ui]),Ext.container.Container.prototype.initComponent.call(this)},onDestroy:function(){var e=this;e._buttons=Ext.destroy(e._buttons),e.setStore(null),Ext.container.Container.prototype.onDestroy.call(this)},afterComponentLayout:function(){var e=this,t=e.layout.overflowHandler;Ext.container.Container.prototype.afterComponentLayout.apply(this,arguments),t&&e.tooNarrow&&t.scrollToItem&&t.scrollToItem(e.getSelection().get("depth"))},applySelection:function(e){var t=this.getStore();return e=t?"root"===e?this.getStore().getRoot():e:null},updateSelection:function(e){var t,n,i,r,o,a,s,l,d,u,c,h=this,p=h._buttons,f=[],g=h.items.getCount(),m=h._needsSync,x=h.getDisplayField();if(Ext.suspendLayouts(),e){for(a=e,u=e.get("depth"),o=u+1,c=u;a&&(d=a.getId(),l=p[c],m||!l||l._breadcrumbNodeId!==d);)s=a.get(x),l?l.setText(s):l=p[c]=Ext.create({xtype:h.getUseSplitButtons()?"splitbutton":"button",ui:h.getButtonUI(),cls:h._btnCls+" "+h._btnCls+"-"+h.ui,text:s,showEmptyMenu:!0,menu:{listeners:{click:"_onMenuClick",beforeshow:"_onMenuBeforeShow",scope:this}},handler:"_onButtonClick",scope:h}),t=this.getShowIcons(),t!==!1&&(n=a.get("glyph"),r=a.get("icon"),i=a.get("iconCls"),n?(l.setGlyph(n),l.setIcon(null),l.setIconCls(i)):r?(l.setGlyph(null),l.setIconCls(null),l.setIcon(r)):i?(l.setGlyph(null),l.setIcon(null),l.setIconCls(i)):t?(l.setGlyph(null),l.setIcon(null),l.setIconCls((a.isLeaf()?h._leafIconCls:h._folderIconCls)+"-"+h.ui)):(l.setGlyph(null),l.setIcon(null),l.setIconCls(null))),l.setArrowVisible(a.hasChildNodes()),l._breadcrumbNodeId=a.getId(),a=a.parentNode,c--;if(o>g)f=p.slice(g,u+1),h.add(f);else for(c=g-1;c>=o;c--)h.remove(h.items.items[c],!1)}else h.removeAll(!1);Ext.resumeLayouts(!0),h.fireEvent("selectionchange",h,e),h._needsSync=!1},applyUseSplitButtons:function(e,t){return this.rendered&&e!==t&&Ext.Error.raise("Cannot reconfigure 'useSplitButtons' config of Ext.toolbar.Breadcrumb after initial render"),e},applyStore:function(e){return e&&(e=Ext.data.StoreManager.lookup(e)),e},updateStore:function(e){this._needsSync=!0,e&&!this.isConfiguring&&this.setSelection(e.getRoot())},privates:{_onButtonClick:function(e){this.getUseSplitButtons()&&this.setSelection(this.getStore().getNodeById(e._breadcrumbNodeId))},_onMenuClick:function(e,t){t&&this.setSelection(this.getStore().getNodeById(t._breadcrumbNodeId))},_onMenuBeforeShow:function(e){var t,n,i,r,o,a,s,l,d,u=this,c=u.getStore().getNodeById(e.ownerCmp._breadcrumbNodeId),h=u.getDisplayField(),p=u.getShowMenuIcons();if(!c.hasChildNodes())return!1;for(t=c.childNodes,r=[],o=0,l=t.length;l>o;o++)n=t[o],d={text:n.get(h),_breadcrumbNodeId:n.getId()},p!==!1&&(i=n.get("glyph"),a=n.get("icon"),s=n.get("iconCls"),i?(d.glyph=i,d.iconCls=s):a?d.icon=a:s?d.iconCls=s:p&&(d.iconCls=(n.isLeaf()?u._leafIconCls:u._folderIconCls)+"-"+u.ui)),r.push(d);e.removeAll(),e.add(r)}}},0,["breadcrumb"],["component","box","container","breadcrumb"],{component:!0,box:!0,container:!0,breadcrumb:!0},["widget.breadcrumb"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.toolbar,"Breadcrumb"],0),Ext.define("Ext.theme.classic.toolbar.Breadcrumb",{override:"Ext.toolbar.Breadcrumb",config:{buttonUI:"default-toolbar"}}),Ext.cmd.derive("Ext.toolbar.Fill",Ext.Component,{alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:!0,flex:1},0,["tbfill"],["component","box","tbfill"],{component:!0,box:!0,tbfill:!0},["widget.tbfill"],0,[Ext.toolbar,"Fill",Ext.Toolbar,"Fill"],0),Ext.cmd.derive("Ext.toolbar.Spacer",Ext.Component,{alternateClassName:"Ext.Toolbar.Spacer",baseCls:"x-toolbar-spacer",ariaRole:"presentation"},0,["tbspacer"],["component","box","tbspacer"],{component:!0,box:!0,tbspacer:!0},["widget.tbspacer"],0,[Ext.toolbar,"Spacer",Ext.Toolbar,"Spacer"],0),Ext.cmd.derive("Ext.view.DragZone",Ext.dd.DragZone,{containerScroll:!1,constructor:function(e){var t,n,i,r=this;Ext.apply(r,e),r.ddGroup||(r.ddGroup="view-dd-zone-"+r.view.id),t=r.view,n=t.ownerCt,i=n?n.getTargetEl().dom:t.el.dom.parentNode,Ext.dd.DragZone.prototype.constructor.call(this,i),r.ddel=document.createElement("div"),r.ddel.className="x-grid-dd-wrap"},init:function(e,t,n){var i=this,r=Ext.supports.touchScroll?"itemlongpress":"itemmousedown",o={scope:i};o[r]=i.onItemMouseDown,i.initTarget(e,t,n),i.view.mon(i.view,o)},onValidDrop:function(e,t,n){Ext.dd.DragZone.prototype.onValidDrop.call(this,e,t,n),e.el.focus()},onItemMouseDown:function(e,t,n,i,r){this.isPreventDrag(r,t,n,i)||(e.focusRow&&e.focusRow(t),this.handleMouseDown(r))},isPreventDrag:function(){return!1},getDragData:function(e){var t=this.view,n=e.getTarget(t.getItemSelector());return n?{copy:t.copy||t.allowCopy&&e.ctrlKey,event:e,view:t,ddel:this.ddel,item:n,records:t.getSelectionModel().getSelection(),fromPosition:Ext.fly(n).getXY()}:void 0},onInitDrag:function(e,t){var n=this,i=n.dragData,r=i.view,o=r.getSelectionModel(),a=r.getRecord(i.item);return o.isSelected(a)||o.selectWithEvent(a,n.DDMInstance.mousedownEvent),i.records=o.getSelection(),Ext.fly(n.ddel).setHtml(n.getDragText()),n.proxy.update(n.ddel),n.onStartDrag(e,t),!0},getDragText:function(){var e=this.dragData.records.length;return Ext.String.format(this.dragText,e,1===e?"":"s")},getRepairXY:function(e,t){return t?t.fromPosition:!1}},1,0,0,0,0,0,[Ext.view,"DragZone"],0),Ext.cmd.derive("Ext.util.CSS",Ext.Base,function(){var e,t=null,n=document,i=/(-[a-z])/gi,r=function(e,t){return t.charAt(1).toUpperCase()};return{singleton:!0,rules:t,initialized:!1,constructor:function(){e=this},createStyleSheet:function(t,i){var r,o=n.getElementsByTagName("head")[0],a=n.createElement("style");return a.setAttribute("type","text/css"),i&&a.setAttribute("id",i),r=a.styleSheet,r?(o.appendChild(a),r.cssText=t):(a.appendChild(n.createTextNode(t)),o.appendChild(a),r=a.sheet),e.cacheStyleSheet(r),r},removeStyleSheet:function(e){var t=n.getElementById(e);t&&t.parentNode.removeChild(t)},swapStyleSheet:function(t,i){var r;e.removeStyleSheet(t),r=n.createElement("link"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("id",t),r.setAttribute("href",i),n.getElementsByTagName("head")[0].appendChild(r)},cacheStyleSheet:function(n){t||(t=e.rules={});try{var i,r,o=n.cssRules||n.rules,a=o.length-1,s=n.imports,l=s?s.length:0;for(r=0;l>r;++r)e.cacheStyleSheet(s[r]);for(;a>=0;--a)i=o[a],i.styleSheet&&e.cacheStyleSheet(i.styleSheet),e.cacheRule(i,n)}catch(d){}},cacheRule:function(n,i){if(n.styleSheet)return e.cacheStyleSheet(n.styleSheet);var r,o,a=n.selectorText;if(a)for(a=a.split(","),r=a.length,o=0;r>o;o++)t[Ext.String.trim(a[o]).toLowerCase()]={parentStyleSheet:i,cssRule:n}},getRules:function(n){var i,r={};(null===t||n)&&e.refreshCache();for(i in t)r[i]=t[i].cssRule;return r},refreshCache:function(){var i=n.styleSheets,r=0,o=i.length;for(t=e.rules={};o>r;r++)try{i[r].disabled||e.cacheStyleSheet(i[r])}catch(a){}},getRule:function(n,i,r){var o,a;if((!t||i)&&e.refreshCache(),!Ext.isArray(n))return a=t[n.toLowerCase()],a&&!r&&(a=a.cssRule),a||null;for(o=0;o<n.length;o++)if(t[n[o]])return r?t[n[o].toLowerCase()]:t[n[o].toLowerCase()].cssRule;return null},createRule:function(t,n,i){var r,o=t.cssRules||t.rules,a=o.length;return t.insertRule?t.insertRule(n+" {"+i+"}",a):t.addRule(n,i||" "),e.cacheRule(r=o[a],t),r},updateRule:function(t,n,o){var a,s,l;if(Ext.isArray(t)){for(s=0;s<t.length;s++)if(e.updateRule(t[s],n,o))return!0}else if(a=e.getRule(t)){if(2===arguments.length){l=Ext.Element.parseStyles(n);for(n in l)a.style[n.replace(i,r)]=l[n]}else a.style[n.replace(i,r)]=o;return!0}return!1},deleteRule:function(n){var i,r,o=e.getRule(n,!1,!0);o&&(i=o.parentStyleSheet,r=Ext.Array.indexOf(i.cssRules||i.rules,o.cssRule),i.deleteRule?i.deleteRule(r):i.removeRule(r),delete t[n])}}},1,0,0,0,0,0,[Ext.util,"CSS"],0),Ext.cmd.derive("Ext.util.Cookies",Ext.Base,{singleton:!0,set:function(e,t){var n=arguments,i=arguments.length,r=i>2?n[2]:null,o=i>3?n[3]:"/",a=i>4?n[4]:null,s=i>5?n[5]:!1;document.cookie=e+"="+escape(t)+(null===r?"":"; expires="+r.toUTCString())+(null===o?"":"; path="+o)+(null===a?"":"; domain="+a)+(s===!0?"; secure":"")},get:function(e){var t,n,i,r=document.cookie.split("; "),o=r.length;for(n=0;o>n;++n)if(t=r[n].split("="),t[0]===e)return i=t[1],i?unescape(i):"";return null},clear:function(e,t){this.get(e)&&(t=t||"/",document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+t)}},0,0,0,0,0,0,[Ext.util,"Cookies"],0),Ext.cmd.derive("Ext.ux.form.MultiSelect",Ext.form.FieldContainer,{alternateClassName:"Ext.ux.Multiselect",layout:"anchor",ddReorder:!1,appendOnly:!1,displayField:"text",allowBlank:!0,minSelections:0,maxSelections:Number.MAX_VALUE,blankText:"This field is required",minSelectionsText:"Minimum {0} item(s) required",maxSelectionsText:"Maximum {0} item(s) required",delimiter:",",dragText:"{0} Item{1}",ignoreSelectChange:0,initComponent:function(){var e=this;e.items=e.setupItems(),e.bindStore(e.store,!0),e.store.autoCreated&&(e.valueField=e.displayField="field1",e.store.expanded||(e.displayField="field2")),Ext.isDefined(e.valueField)||(e.valueField=e.displayField),Ext.form.FieldContainer.prototype.initComponent.call(this),e.initField()},setupItems:function(){var e=this;return e.boundList=Ext.create("Ext.view.BoundList",Ext.apply({anchor:"none 100%",border:1,multiSelect:!0,store:e.store,displayField:e.displayField,disabled:e.disabled},e.listConfig)),e.boundList.getSelectionModel().on("selectionchange",e.onSelectChange,e),e.boundList.pickerField=e,e.title?(e.boundList.border=!1,{border:!0,anchor:"none 100%",layout:"anchor",title:e.title,tbar:e.tbar,items:e.boundList}):e.boundList},onSelectChange:function(e,t){this.ignoreSelectChange||this.setValue(t)},getSelected:function(){return this.boundList.getSelectionModel().getSelection()},isEqual:function(e,t){var n,i=Ext.Array.from,r=0;if(e=i(e),t=i(t),n=e.length,n!==t.length)return!1;for(;n>r;r++)if(t[r]!==e[r])return!1;return!0},afterRender:function(){var e,t=this;Ext.form.FieldContainer.prototype.afterRender.call(this),t.selectOnRender&&(e=t.getRecordsForValue(t.value),e.length&&(++t.ignoreSelectChange,t.boundList.getSelectionModel().select(e),--t.ignoreSelectChange),delete t.toSelect),!t.ddReorder||t.dragGroup||t.dropGroup||(t.dragGroup=t.dropGroup="MultiselectDD-"+Ext.id()),(t.draggable||t.dragGroup)&&(t.dragZone=Ext.create("Ext.view.DragZone",{view:t.boundList,ddGroup:t.dragGroup,dragText:t.dragText})),(t.droppable||t.dropGroup)&&(t.dropZone=Ext.create("Ext.view.DropZone",{view:t.boundList,ddGroup:t.dropGroup,handleNodeDrop:function(e,n,i){var r,o=this.view,a=o.getStore(),s=e.records;e.view.store.remove(s),r=a.indexOf(n),"after"===i&&r++,a.insert(r,s),o.getSelectionModel().select(s),t.fireEvent("drop",t,s)}}))},isValid:function(){var e=this,t=e.disabled,n=e.forceValidation||!t;return n?e.validateValue(e.value):t},validateValue:function(e){var t=this,n=t.getErrors(e),i=Ext.isEmpty(n);return t.preventMark||(i?t.clearInvalid():t.markInvalid(n)),i},markInvalid:function(e){var t=this,n=t.getActiveError();t.setActiveErrors(Ext.Array.from(e)),n!==t.getActiveError()&&t.updateLayout()},clearInvalid:function(){var e=this,t=e.hasActiveError();e.unsetActiveError(),t&&e.updateLayout()},getSubmitData:function(){var e,t=this,n=null;return t.disabled||!t.submitValue||t.isFileUpload()||(e=t.getSubmitValue(),null!==e&&(n={},n[t.getName()]=e)),n},getSubmitValue:function(){var e=this,t=e.delimiter,n=e.getValue();return Ext.isString(t)?n.join(t):n},getValue:function(){return this.value||[]},getRecordsForValue:function(e){var t,n,i,r=this,o=[],a=r.store.getRange(),s=r.valueField,l=0,d=a.length;for(i=e.length;i>l;++l)for(n=0;d>n;++n)t=a[n],t.get(s)==e[l]&&o.push(t);return o},setupValue:function(e){var t,n,i,r=this.delimiter,o=this.valueField,a=0;if(Ext.isDefined(e)){for(r&&Ext.isString(e)?e=e.split(r):Ext.isArray(e)||(e=[e]),n=e.length;n>a;++a)i=e[a],i&&i.isModel&&(e[a]=i.get(o));t=Ext.Array.unique(e)}else t=[];return t},setValue:function(e){var t=this,n=t.boundList.getSelectionModel(),i=t.store;return i.getCount()?(e=t.setupValue(e),t.mixins.field.setValue.call(t,e),void(t.rendered?(++t.ignoreSelectChange,n.deselectAll(),e.length&&n.select(t.getRecordsForValue(e)),--t.ignoreSelectChange):t.selectOnRender=!0)):void i.on({load:Ext.Function.bind(t.setValue,t,[e]),single:!0})},clearValue:function(){this.setValue([])},onEnable:function(){var e=this.boundList;Ext.form.FieldContainer.prototype.onEnable.call(this),e&&e.enable()},onDisable:function(){var e=this.boundList;Ext.form.FieldContainer.prototype.onDisable.call(this),e&&e.disable()},getErrors:function(e){var t,n=this,i=Ext.String.format,r=[];return e=Ext.Array.from(e||n.getValue()),t=e.length,!n.allowBlank&&1>t&&r.push(n.blankText),t<n.minSelections&&r.push(i(n.minSelectionsText,n.minSelections)),t>n.maxSelections&&r.push(i(n.maxSelectionsText,n.maxSelections)),r},onDestroy:function(){var e=this;e.bindStore(null),Ext.destroy(e.dragZone,e.dropZone),Ext.form.FieldContainer.prototype.onDestroy.call(this)},onBindStore:function(e){var t=this.boundList;t&&t.bindStore(e)}},0,["multiselectfield","multiselect"],["component","box","container","fieldcontainer","multiselectfield","multiselect"],{component:!0,box:!0,container:!0,fieldcontainer:!0,multiselectfield:!0,multiselect:!0},["widget.multiselect","widget.multiselectfield"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.ux.form,"MultiSelect",Ext.ux,"Multiselect"],0),Ext.cmd.derive("Ext.ux.form.ItemSelector",Ext.ux.form.MultiSelect,{alternateClassName:["Ext.ux.ItemSelector"],hideNavIcons:!1,buttons:["top","up","add","remove","down","bottom"],buttonsText:{top:"Move to Top",up:"Move Up",add:"Add to Selected",remove:"Remove from Selected",down:"Move Down",bottom:"Move to Bottom"},layout:{type:"hbox",align:"stretch"},initComponent:function(){var e=this;e.ddGroup=e.id+"-dd",Ext.ux.form.MultiSelect.prototype.initComponent.call(this),e.bindStore(e.store)},createList:function(e){var t=this;return Ext.create("Ext.ux.form.MultiSelect",{submitValue:!1,getSubmitData:function(){return null},getModelData:function(){return null},flex:1,dragGroup:t.ddGroup,dropGroup:t.ddGroup,title:e,store:{model:t.store.model,data:[]},displayField:t.displayField,valueField:t.valueField,disabled:t.disabled,listeners:{boundList:{scope:t,itemdblclick:t.onItemDblClick,drop:t.syncValue}}})},setupItems:function(){var e=this;return e.fromField=e.createList(e.fromTitle),e.toField=e.createList(e.toTitle),[e.fromField,{xtype:"container",margin:"0 4",layout:{type:"vbox",pack:"center"},items:e.createButtons()},e.toField]},createButtons:function(){var e=this,t=[];return e.hideNavIcons||Ext.Array.forEach(e.buttons,function(n){t.push({xtype:"button",tooltip:e.buttonsText[n],handler:e["on"+Ext.String.capitalize(n)+"BtnClick"],cls:"x-form-itemselector-btn",iconCls:"x-form-itemselector-"+n,navBtn:!0,scope:e,margin:"4 0 0 0"})}),t},getSelections:function(e){var t=e.getStore();return Ext.Array.sort(e.getSelectionModel().getSelection(),function(e,n){return e=t.indexOf(e),n=t.indexOf(n),n>e?-1:e>n?1:0})},onTopBtnClick:function(){var e=this.toField.boundList,t=e.getStore(),n=this.getSelections(e);t.suspendEvents(),t.remove(n,!0),t.insert(0,n),t.resumeEvents(),e.refresh(),this.syncValue(),e.getSelectionModel().select(n)},onBottomBtnClick:function(){var e=this.toField.boundList,t=e.getStore(),n=this.getSelections(e);t.suspendEvents(),t.remove(n,!0),t.add(n),t.resumeEvents(),e.refresh(),this.syncValue(),e.getSelectionModel().select(n)},onUpBtnClick:function(){var e,t=this.toField.boundList,n=t.getStore(),i=this.getSelections(t),r=0,o=i.length,a=0;for(n.suspendEvents();o>r;++r,a++)e=i[r],a=Math.max(a,n.indexOf(e)-1),n.remove(e,!0),n.insert(a,e);n.resumeEvents(),t.refresh(),this.syncValue(),t.getSelectionModel().select(i)},onDownBtnClick:function(){var e,t=this.toField.boundList,n=t.getStore(),i=this.getSelections(t),r=i.length-1,o=n.getCount()-1;for(n.suspendEvents();r>-1;--r,o--)e=i[r],o=Math.min(o,n.indexOf(e)+1),n.remove(e,!0),n.insert(o,e);n.resumeEvents(),t.refresh(),this.syncValue(),t.getSelectionModel().select(i)},onAddBtnClick:function(){var e=this,t=e.getSelections(e.fromField.boundList);e.moveRec(!0,t),e.toField.boundList.getSelectionModel().select(t)},onRemoveBtnClick:function(){var e=this,t=e.getSelections(e.toField.boundList);e.moveRec(!1,t),e.fromField.boundList.getSelectionModel().select(t)},moveRec:function(e,t){var n=this,i=n.fromField,r=n.toField,o=e?i.store:r.store,a=e?r.store:i.store;o.suspendEvents(),a.suspendEvents(),o.remove(t),a.add(t),o.resumeEvents(),a.resumeEvents(),i.boundList.refresh(),r.boundList.refresh(),n.syncValue()},syncValue:function(){var e=this;e.mixins.field.setValue.call(e,e.setupValue(e.toField.store.getRange()))},onItemDblClick:function(e,t){this.moveRec(e===this.fromField.boundList,t)},setValue:function(e){var t,n=this,i=n.fromField,r=n.toField,o=i.store,a=r.store;return n.fromStorePopulated?(e=n.setupValue(e),n.mixins.field.setValue.call(n,e),t=n.getRecordsForValue(e),o.suspendEvents(),a.suspendEvents(),o.removeAll(),a.removeAll(),n.populateFromStore(n.store),Ext.Array.forEach(t,function(e){o.indexOf(e)>-1&&o.remove(e),a.add(e)}),o.resumeEvents(),a.resumeEvents(),Ext.suspendLayouts(),i.boundList.refresh(),r.boundList.refresh(),void Ext.resumeLayouts(!0)):void n.fromField.store.on({load:Ext.Function.bind(n.setValue,n,[e]),single:!0})},onBindStore:function(e){var t=this;t.fromField&&(t.fromField.store.removeAll(),t.toField.store.removeAll(),e.getCount()?t.populateFromStore(e):t.store.on("load",t.populateFromStore,t))},populateFromStore:function(e){var t=this.fromField.store;this.fromStorePopulated=!0,t.add(e.getRange()),t.fireEvent("load",t)},onEnable:function(){var e=this;Ext.ux.form.MultiSelect.prototype.onEnable.call(this),e.fromField.enable(),e.toField.enable(),Ext.Array.forEach(e.query("[navBtn]"),function(e){e.enable()})},onDisable:function(){var e=this;Ext.ux.form.MultiSelect.prototype.onDisable.call(this),e.fromField.disable(),e.toField.disable(),Ext.Array.forEach(e.query("[navBtn]"),function(e){e.disable()})},onDestroy:function(){this.bindStore(null),Ext.ux.form.MultiSelect.prototype.onDestroy.call(this)}},0,["itemselector","itemselectorfield"],["component","box","container","fieldcontainer","multiselectfield","multiselect","itemselectorfield","itemselector"],{component:!0,box:!0,container:!0,fieldcontainer:!0,multiselectfield:!0,multiselect:!0,itemselectorfield:!0,itemselector:!0},["widget.itemselector","widget.itemselectorfield"],0,[Ext.ux.form,"ItemSelector",Ext.ux,"ItemSelector"],0),Ext.namespace("Ext.theme.is")["binary-options-theme"]=!0,Ext.theme.name="binary-options-theme",Ext.cmd.derive("BP.view.window.MessageBox",Ext.window.Window,{alternateClassName:"BP.Msg",cls:["x-message-box bp-messagebox","x-hidden-offsets"],OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"fa-info-circle",WARNING:"fa-exclamation-triangle",QUESTION:"fa-question-circle",ERROR:"fa-exclamation-circle",hideMode:"offsets",closeAction:"hide",resizable:!1,scrollable:!0,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,layout:{type:"vbox",align:"stretch"},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon fa ",ariaRole:"alertdialog",makeButton:function(e){var t=this.buttonIds[e];return new Ext.button.Button({handler:this.btnCallback,itemId:t,scope:this,text:this.buttonText[t],minWidth:75})},btnCallback:function(e,t){var n,i,r=this;return t&&"keydown"===t.type&&!t.isSpecialKey()?void t.getTarget(null,null,!0).on({keyup:function(t){r.btnCallback(e,t)},single:!0}):((r.cfg.prompt||r.cfg.multiline)&&(i=r.cfg.multiline?r.textArea:r.textField,n=i.getValue(),i.reset()),r.hide(),void r.userCallback(e.itemId,n,r.cfg,r))},hide:function(){var e=this,t=e.cfg?e.cfg.cls:"";e.progressBar.reset(),t&&e.removeCls(t),Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(){var e=this;Ext.window.Window.prototype.constructor.apply(this,arguments),e.minWidth=e.defaultMinWidth=e.minWidth||e.defaultMinWidth,e.maxWidth=e.defaultMaxWidth=e.maxWidth||e.defaultMaxWidth,e.minHeight=e.defaultMinHeight=e.minHeight||e.defaultMinHeight,e.maxHeight=e.defaultMaxHeight=e.maxHeight||e.defaultMaxHeight},initComponent:function(){var e,t,n=this,i=n.id;for(n.title=n.title||"&#160;",n.iconCls=n.iconCls||"",n.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[n.iconComponent=new Ext.Component({cls:n.baseIconCls}),n.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[n.msg=new Ext.Component({id:i+"-msg",cls:n.baseCls+"-text"}),n.textField=new Ext.form.field.Text({id:i+"-textfield",enableKeyEvents:!0,listeners:{keydown:n.onPromptKey,scope:n}}),n.textArea=new Ext.form.field.TextArea({id:i+"-textarea",height:75})]})]}),n.progressBar=new Ext.ProgressBar({id:i+"-progressbar",margin:"0 10 10 10"}),n.items=[n.topContainer,n.progressBar],n.msgButtons=[],e=0;4>e;e++)t=n.makeButton(e),n.msgButtons[t.itemId]=t,n.msgButtons.push(t);n.bottomTb=new Ext.toolbar.Toolbar({id:i+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[n.msgButtons[0],n.msgButtons[1],n.msgButtons[2],n.msgButtons[3]]}),n.dockedItems=[n.bottomTb],n.on("close",n.onClose,n),Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var e=this.header.child("[type=close]");e.itemId="cancel",this.btnCallback(e),delete e.itemId},onPromptKey:function(e,t){var n=this;(t.keyCode===t.RETURN||10===t.keyCode)&&(n.msgButtons.ok.isVisible()?n.msgButtons.ok.handler.call(n,n.msgButtons.ok):n.msgButtons.yes.isVisible()&&n.msgButtons.yes.handler.call(n,n.msgButtons.yes))},reconfigure:function(e){var t,n,i,r,o,a,s,l,d,u,c=this,h=0,p=!0,f=c.buttonText,g=c.resizer,m=c.header,x=m&&!m.isHeader,v=e&&(e.message||e.msg);for(c.updateButtonText(),c.cfg=e=e||{},u=e.wait,e.width&&(n=e.width),e.height&&(i=e.height),c.minWidth=e.minWidth||c.defaultMinWidth,c.maxWidth=e.maxWidth||c.defaultMaxWidth,c.minHeight=e.minHeight||c.defaultMinHeight,c.maxHeight=e.maxHeight||c.defaultMaxHeight,g&&(t=g.resizeTracker,g.minWidth=t.minWidth=c.minWidth,g.maxWidth=t.maxWidth=c.maxWidth,g.minHeight=t.minHeight=c.minHeight,g.maxHeight=t.maxHeight=c.maxHeight),delete c.defaultFocus,e.defaultFocus&&(c.defaultFocus=e.defaultFocus),c.animateTarget=e.animateTarget||void 0,c.modal=e.modal!==!1,c.setTitle(e.title||x&&m.title||c.title),c.setIconCls(e.iconCls||x&&m.iconCls||c.iconCls),Ext.isObject(e.buttons)?(c.buttonText=e.buttons,h=0):(c.buttonText=e.buttonText||c.buttonText,h=Ext.isNumber(e.buttons)?e.buttons:0),h|=c.updateButtonText(),c.buttonText=f,Ext.suspendLayouts(),c.width=c.height=null,(n||i)&&(n&&c.setWidth(n),i&&c.setHeight(i)),c.hidden=!1,c.rendered||c.render(Ext.getBody()),c.closable=e.closable!==!1&&!u,m=c.header,m&&(m.child("[type=close]").setVisible(c.closable),e.title||c.closable||e.iconCls?m.show():m.hide()),c.liveDrag=!e.proxyDrag,c.userCallback=Ext.Function.bindCallback(e.callback||e.fn||Ext.emptyFn,e.scope||Ext.global),c.setIcon(e.icon),s=c.msg,v?(s.setHtml(v),s.show()):s.hide(),o=c.textArea,a=c.textField,e.prompt||e.multiline?(c.multiline=e.multiline,e.multiline?(o.setValue(e.value),o.setHeight(e.defaultTextHeight||c.defaultTextHeight),o.show(),a.hide(),c.defaultFocus=o):(a.setValue(e.value),o.hide(),a.show(),c.defaultFocus=a)):(o.hide(),a.hide()),l=c.progressBar,e.progress||u?(l.show(),c.updateProgress(0,e.progressText),u&&l.wait(u===!0?e.waitConfig:u)):l.hide(),d=c.msgButtons,r=0;4>r;r++)h&Math.pow(2,r)?(c.defaultFocus||(c.defaultFocus=d[r]),d[r].show(),p=!1):d[r].hide();p?c.bottomTb.hide():c.bottomTb.show(),Ext.resumeLayouts(!0)},updateButtonText:function(){var e,t,n=this,i=n.buttonText,r=0;for(e in i)i.hasOwnProperty(e)&&(t=n.msgButtons[e],t&&(n.cfg&&n.cfg.buttonText&&(r|=Math.pow(2,Ext.Array.indexOf(n.buttonIds,e))),t.text!=i[e]&&t.setText(i[e])));return r},show:function(e){var t,n=this;return e=e||{},Ext.Component.layoutSuspendCount?(Ext.on({resumelayouts:function(){n.show(e)},single:!0}),n):(n.reconfigure(e),e.cls&&n.addCls(e.cls),t=n.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])"),
n.preventFocusOnActivate=!t.length,n.hidden=!0,Ext.window.Window.prototype.show.call(this),n)},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments),this.center()},updateText:function(e){this.msg.setHtml(e)},setIcon:function(e,t,n){var i=this,r=i.iconComponent,o=i.messageIconCls;return o&&r.removeCls(o),e?(r.show(),(t||n)&&r.setSize(t||r.getWidth(),n||r.getHeight()),r.addCls("x-dlg-icon"),r.addCls(i.messageIconCls=e)):(r.removeCls("x-dlg-icon"),r.hide()),i},updateProgress:function(e,t,n){return this.progressBar.updateProgress(e,t),n&&this.updateText(n),this},onEsc:function(){this.closable!==!1&&Ext.window.Window.prototype.onEsc.apply(this,arguments)},confirm:function(e,t,n,i){return Ext.isString(e)&&(e={title:e,icon:this.QUESTION,message:t,buttons:this.YESNO,callback:n,scope:i}),this.show(e)},confirmorder:function(e,t,n,i){return Ext.isString(e)&&(e={title:e,closable:!1,icon:this.QUESTION,message:t,buttons:this.YESNO,callback:n,scope:i}),this.show(e)},prompt:function(e,t,n,i,r,o){return Ext.isString(e)&&(e={prompt:!0,title:e,minWidth:this.minPromptWidth,message:t,buttons:this.OKCANCEL,callback:n,scope:i,multiline:r,value:o}),this.show(e)},wait:function(e,t,n){return Ext.isString(e)&&(e={title:t,message:e,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:n}),this.show(e)},alert:function(e,t,n,i){return Ext.isString(e)&&(e={title:e,message:t,buttons:this.OK,fn:n,scope:i,minWidth:this.minWidth}),this.show(e)},progress:function(e,t,n){return Ext.isString(e)&&(e={title:e,message:t,progress:!0,progressText:n}),this.show(e)}},1,["bp-messagebox"],["component","box","container","panel","window","bp-messagebox"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-messagebox":!0},["widget.bp-messagebox"],0,[BP.view.window,"MessageBox",BP,"Msg"],function(e){BP.MessageBox=BP.Msg=new e}),Ext.cmd.derive("BP.util.Validation",Ext.Base,{singleton:!0,isArray:function(e){return e.constructor===Array},isString:function(e){return e.constructor===String},isNumber:function(e){return e.constructor===Number},isBoolean:function(e){return e.constructor===Boolean},isIP:function(e){return/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(e)}},0,0,0,0,0,0,[BP.util,"Validation"],0),Ext.cmd.derive("BP.ux.data.Private",Ext.Base,{singleton:!0,crypto:{},hash:{},config:{enabled:!0,aesBits:256,salt:document.title,"private":"AF6E826B40142F143BBEE4B93268AA27",api:{encrypt:function(){throw Error("Not implemented")},decrypt:function(){throw Error("Not implemented")},setToken:function(){throw Error("Not implemented")}}},constructor:function(e){return this.initConfig(e),this},init:function(){var e=this,t=""+e.hash(e.getSalt()+Ext.manifest.id);e.setApi({encrypt:function(n){return null===n||void 0===n?n:e.getEnabled()?e.crypto.encrypt(n,t,e.getAesBits()):n},decrypt:function(n){return null===n||void 0===n?n:e.getEnabled()?(n=e.crypto.decrypt(n,t,e.getAesBits()),"{"==n.charAt(0)?n:"{}"):n},setToken:function(n,i){i=i||e.getSalt(),t=""+e.hash(i+n)}})}},1,0,0,0,0,0,[BP.ux.data,"Private"],function(e){!function(){var t={};t.cipher=function(e,n){for(var i=4,r=n.length/i-1,o=[[],[],[],[]],a=0;4*i>a;a++)o[a%4][Math.floor(a/4)]=e[a];o=t.addRoundKey(o,n,0,i);for(var s=1;r>s;s++)o=t.subBytes(o,i),o=t.shiftRows(o,i),o=t.mixColumns(o,i),o=t.addRoundKey(o,n,s,i);o=t.subBytes(o,i),o=t.shiftRows(o,i),o=t.addRoundKey(o,n,r,i);for(var l=Array(4*i),a=0;4*i>a;a++)l[a]=o[a%4][Math.floor(a/4)];return l},t.keyExpansion=function(e){for(var n=4,i=e.length/4,r=i+6,o=Array(n*(r+1)),a=Array(4),s=0;i>s;s++){var l=[e[4*s],e[4*s+1],e[4*s+2],e[4*s+3]];o[s]=l}for(var s=i;n*(r+1)>s;s++){o[s]=Array(4);for(var d=0;4>d;d++)a[d]=o[s-1][d];if(0==s%i){a=t.subWord(t.rotWord(a));for(var d=0;4>d;d++)a[d]^=t.rCon[s/i][d]}else i>6&&4==s%i&&(a=t.subWord(a));for(var d=0;4>d;d++)o[s][d]=o[s-i][d]^a[d]}return o},t.subBytes=function(e,n){for(var i=0;4>i;i++)for(var r=0;n>r;r++)e[i][r]=t.sBox[e[i][r]];return e},t.shiftRows=function(e,t){for(var n=Array(4),i=1;4>i;i++){for(var r=0;4>r;r++)n[r]=e[i][(r+i)%t];for(var r=0;4>r;r++)e[i][r]=n[r]}return e},t.mixColumns=function(e){for(var t=0;4>t;t++){for(var n=Array(4),i=Array(4),r=0;4>r;r++)n[r]=e[r][t],i[r]=128&e[r][t]?283^e[r][t]<<1:e[r][t]<<1;e[0][t]=i[0]^n[1]^i[1]^n[2]^n[3],e[1][t]=n[0]^i[1]^n[2]^i[2]^n[3],e[2][t]=n[0]^n[1]^i[2]^n[3]^i[3],e[3][t]=n[0]^i[0]^n[1]^n[2]^i[3]}return e},t.addRoundKey=function(e,t,n,i){for(var r=0;4>r;r++)for(var o=0;i>o;o++)e[r][o]^=t[4*n+o][r];return e},t.subWord=function(e){for(var n=0;4>n;n++)e[n]=t.sBox[e[n]];return e},t.rotWord=function(e){for(var t=e[0],n=0;3>n;n++)e[n]=e[n+1];return e[3]=t,e},t.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],t.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],t.Ctr={},t.Ctr.encrypt=function(e,r,o){var a=16;if(128!=o&&192!=o&&256!=o)return"";e=i.encode(e),r=i.encode(r);for(var s=o/8,l=Array(s),d=0;s>d;d++)l[d]=isNaN(r.charCodeAt(d))?0:r.charCodeAt(d);var u=t.cipher(l,t.keyExpansion(l));u=u.concat(u.slice(0,s-16));for(var c=Array(a),h=(new Date).getTime(),p=Math.floor(h/1e3),f=h%1e3,d=0;4>d;d++)c[d]=255&p>>>8*d;for(var d=0;4>d;d++)c[d+4]=255&f;for(var g="",d=0;8>d;d++)g+=String.fromCharCode(c[d]);for(var m=t.keyExpansion(u),x=Math.ceil(e.length/a),v=Array(x),y=0;x>y;y++){for(var E=0;4>E;E++)c[15-E]=255&y>>>8*E;for(var E=0;4>E;E++)c[15-E-4]=y/4294967296>>>8*E;for(var b=t.cipher(c,m),C=x-1>y?a:(e.length-1)%a+1,w=Array(C),d=0;C>d;d++)w[d]=b[d]^e.charCodeAt(y*a+d),w[d]=String.fromCharCode(w[d]);v[y]=w.join("")}var S=g+v.join("");return S=n.encode(S)},t.Ctr.decrypt=function(e,r,o){var a=16;if(128!=o&&192!=o&&256!=o)return"";e=n.decode(e),r=i.encode(r);for(var s=o/8,l=Array(s),d=0;s>d;d++)l[d]=isNaN(r.charCodeAt(d))?0:r.charCodeAt(d);var u=t.cipher(l,t.keyExpansion(l));u=u.concat(u.slice(0,s-16));for(var c=Array(8),h=e.slice(0,8),d=0;8>d;d++)c[d]=h.charCodeAt(d);for(var p=t.keyExpansion(u),f=Math.ceil((e.length-8)/a),g=Array(f),m=0;f>m;m++)g[m]=e.slice(8+m*a,8+m*a+a);e=g;for(var x=Array(e.length),m=0;f>m;m++){for(var v=0;4>v;v++)c[15-v]=255&m>>>8*v;for(var v=0;4>v;v++)c[15-v-4]=255&(m+1)/4294967296-1>>>8*v;for(var y=t.cipher(c,p),E=Array(e[m].length),d=0;d<e[m].length;d++)E[d]=y[d]^e[m].charCodeAt(d),E[d]=String.fromCharCode(E[d]);x[m]=E.join("")}var b=x.join("");return b=i.decode(b)};var n={};n.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode=function(e,t){t=void 0===t?!1:t;var i,r,o,a,s,l,d,u,c,h,p,f=[],g="",m=n.code;if(h=t?e.encodeUTF8():e,c=h.length%3,c>0)for(;c++<3;)g+="=",h+="\x00";for(c=0;c<h.length;c+=3)i=h.charCodeAt(c),r=h.charCodeAt(c+1),o=h.charCodeAt(c+2),a=i<<16|r<<8|o,s=63&a>>18,l=63&a>>12,d=63&a>>6,u=63&a,f[c/3]=m.charAt(s)+m.charAt(l)+m.charAt(d)+m.charAt(u);return p=f.join(""),p=p.slice(0,p.length-g.length)+g},n.decode=function(e,t){t=void 0===t?!1:t;var i,r,o,a,s,l,d,u,c,h,p=[],f=n.code;h=t?e.decodeUTF8():e;for(var g=0;g<h.length;g+=4)a=f.indexOf(h.charAt(g)),s=f.indexOf(h.charAt(g+1)),l=f.indexOf(h.charAt(g+2)),d=f.indexOf(h.charAt(g+3)),u=a<<18|s<<12|l<<6|d,i=255&u>>>16,r=255&u>>>8,o=255&u,p[g/4]=String.fromCharCode(i,r,o),64==d&&(p[g/4]=String.fromCharCode(i,r)),64==l&&(p[g/4]=String.fromCharCode(i));return c=p.join(""),t?c.decodeUTF8():c};var i={};i.encode=function(e){var t=e.replace(/[\u0080-\u07ff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|63&t)});return t=t.replace(/[\u0800-\uffff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|63&t>>6,128|63&t)})},i.decode=function(e){var t=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){var t=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2);return String.fromCharCode(t)});return t=t.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){var t=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1);return String.fromCharCode(t)})},e.crypto=t.Ctr;var r=r||function(e,t){var n={},i=n.lib={},r=function(){},o=i.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;e>r;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-8*(r%4)&255)<<24-8*((i+r)%4);else if(65535<n.length)for(r=0;e>r;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;t>i;i+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;e>i;i++){var r=t[i>>>2]>>>24-8*(i%4)&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-4*(i%8);return new a.init(n,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;e>i;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-8*(i%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-8*(i%4);return new a.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},c=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,s=r/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,r=e.min(4*t,r),t){for(var l=0;t>l;l+=o)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=r}return new a.init(l,r)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=c.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);!function(e){var t=r,n=t.lib,i=n.Base,o=n.WordArray,t=t.x64={};t.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;t>i;i++){var r=e[i];n.push(r.high),n.push(r.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;n>r;r++)t[r]=t[r].clone();return e}})}(),function(e){for(var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.x64.Word,n=t.algo,s=[],l=[],d=[],u=1,c=0,h=0;24>h;h++){s[u+5*c]=(h+1)*(h+2)/2%64;var p=(2*u+3*c)%5,u=c%5,c=p}for(u=0;5>u;u++)for(c=0;5>c;c++)l[u+5*c]=c+5*((2*u+3*c)%5);for(u=1,c=0;24>c;c++){for(var f=p=h=0;7>f;f++){if(1&u){var g=(1<<f)-1;32>g?p^=1<<g:h^=1<<g-32}u=128&u?u<<1^113:u<<1}d[c]=a.create(h,p)}for(var m=[],u=0;25>u;u++)m[u]=a.create();n=n.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;25>t;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,i=this.blockSize/2,r=0;i>r;r++){var o=e[t+2*r],a=e[t+2*r+1],o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=n[r];u.high^=a,u.low^=o}for(i=0;24>i;i++){for(r=0;5>r;r++){for(var c=o=0,h=0;5>h;h++)u=n[r+5*h],o^=u.high,c^=u.low;u=m[r],u.high=o,u.low=c}for(r=0;5>r;r++)for(u=m[(r+4)%5],o=m[(r+1)%5],a=o.high,h=o.low,o=u.high^(a<<1|h>>>31),c=u.low^(h<<1|a>>>31),h=0;5>h;h++)u=n[r+5*h],u.high^=o,u.low^=c;for(a=1;25>a;a++)u=n[a],r=u.high,u=u.low,h=s[a],32>h?(o=r<<h|u>>>32-h,c=u<<h|r>>>32-h):(o=u<<h-32|r>>>64-h,c=r<<h-32|u>>>64-h),u=m[l[a]],u.high=o,u.low=c;for(u=m[0],r=n[0],u.high=r.high,u.low=r.low,r=0;5>r;r++)for(h=0;5>h;h++)a=r+5*h,u=n[a],o=m[a],a=m[(r+1)%5+5*h],c=m[(r+2)%5+5*h],u.high=o.high^~a.high&c.high,u.low=o.low^~a.low&c.low;u=n[0],r=d[i],u.high^=r.high,u.low^=r.low}},_doFinalize:function(){var t=this._data,n=t.words,r=8*t.sigBytes,o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var t=this._state,n=this.cfg.outputLength/8,r=n/8,o=[],a=0;r>a;a++){var s=t[a],l=s.high,s=s.low,l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);o.push(s),o.push(l)}return new i.init(o,n)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;25>n;n++)t[n]=t[n].clone();return e}}),t.SHA3=o._createHelper(n),t.HmacSHA3=o._createHmacHelper(n)}(Math),e.hash=r.SHA3,e.init()}()}),Ext.cmd.derive("BP.ux.data.proxy.Private",Ext.data.proxy.WebStorage,{config:{api:null},statics:{excludeKeyMatcher:function(e){var t=/.+-.+/;return!t.test(e)},api:{encrypt:function(){throw Error("Not implemented")},decrypt:function(){throw Error("Not implemented")}}},constructor:function(e){var t=this;Ext.data.proxy.WebStorage.prototype.constructor.apply(this,arguments),t.initConfig(e)},getStorageObject:function(){var e=this,t=e.statics(),n=e.api||t.api,i=window.localStorage;return{getItem:function(e){return t.excludeKeyMatcher(e)?i.getItem(e):n.decrypt(i.getItem(e))},setItem:function(e,r){if(r=r||"",t.excludeKeyMatcher(e))i.setItem(e,r);else{var o=n.encrypt(r);i.setItem(e,o)}},removeItem:function(e){i.removeItem(e)}}}},1,0,0,0,["proxy.private"],0,[BP.ux.data.proxy,"Private"],function(e){e.api=BP.ux.data.Private.getApi()}),Ext.cmd.derive("BP.model.LocalSetings",Ext.data.Model,{proxy:{type:"private",id:"BP"},idProperty:"key",fields:[{name:"key",type:"string",defaultValue:""},{name:"login",type:"string",defaultValue:""},{name:"password",type:"string",defaultValue:""},{name:"language",type:"string",defaultValue:"en"},{name:"captchaId",type:"string",defaultValue:""},{name:"captchaPin",type:"string",defaultValue:""},{name:"pin",type:"boolean",defaultValue:!1},{name:"session_id",type:"string",defaultValue:""},{name:"ticket",type:"string",defaultValue:""},{name:"read_only",type:"boolean",defaultValue:!0},{name:"balance_currency",type:"string",defaultValue:""},{name:"min_trade_amount",type:"int",defaultValue:1},{name:"max_trade_amount",type:"int",defaultValue:1e3},{name:"incerementAmount",type:"int",defaultValue:1},{name:"defaultAmount",type:"int",defaultValue:1},{name:"defaultDuration",type:"int",defaultValue:1},{name:"defaultDurationHour",type:"int",defaultValue:0},{name:"noConfirmTrade",type:"boolean",defaultValue:!1},{name:"defaultInstrument",type:"string",defaultValue:"EUR/USD"},{name:"defaultInstruments",type:"auto"},{name:"lastSubscribedInstruments",type:"string",defaultValue:'["EUR/USD"]'},{name:"defaultMarkets",type:"auto"},{name:"defaultPeriod",type:"string",defaultValue:"TICK"},{name:"defaultOfferSide",type:"string",defaultValue:"BID"},{name:"defaultPresentationType",type:"string",defaultValue:"LINE"},{name:"chartState",type:"string",defaultValue:""},{name:"chartDrawings",type:"string",defaultValue:""},{name:"defaultTimeZone",type:"int",defaultValue:0},{name:"localTime",type:"boolean",defaultValue:!1},{name:"defaultFeedFrequency",type:"string",defaultValue:"NO_DELAY"},{name:"productType",type:"string",defaultValue:"BI_ACCOUNT_T"},{name:"showSliders",type:"boolean",defaultValue:!1},{name:"playSounds",type:"boolean",defaultValue:!1},{name:"reports_action",type:"string",defaultValue:"open_reports"},{name:"chat_action",type:"string",defaultValue:"open_chat"},{name:"reports_service",type:"string",defaultValue:"sts"},{name:"chat_service",type:"string",defaultValue:"sts"},{name:"payoutRefund",type:"string",defaultValue:'{"REG":{"default":"67_15"},"MCO":{"default":"0_10"},"PAIR":{"default":"0_10"}}'},{name:"defaultAmounts",type:"string",defaultValue:""},{name:"defaultDurations",type:"string",defaultValue:""},{name:"payoutReg",type:"int",defaultValue:90},{name:"refundReg",type:"int",defaultValue:0},{name:"payoutMco",type:"int",defaultValue:70},{name:"refundMco",type:"int",defaultValue:0},{name:"payoutPair",type:"int",defaultValue:70},{name:"refundPair",type:"int",defaultValue:0},{name:"lastEquity",type:"string",defaultValue:"0"},{name:"lastUsableMargin",type:"string",defaultValue:"0"},{name:"lastCurrency",type:"string",defaultValue:""},{name:"defaultChartPeriod",type:"string",defaultValue:"TICK"},{name:"defaultChartOfferSide",type:"string",defaultValue:"BID"},{name:"defaultChartPresentationType",type:"string",defaultValue:"LINE"},{name:"storeJCloud",type:"boolean",defaultValue:!1},{name:"platformTheme",type:"string",defaultValue:"default"},{name:"showTips",type:"boolean",defaultValue:!0},{name:"showTipsHints",type:"boolean",defaultValue:!1}],hasIdentity:function(){return!!(this.get("login")&&this.get("ticket")&&this.get("session_id"))},getCredentials:function(){var e=this;return e.hasIdentity()?{login:e.get("login"),password:e.get("password"),captchaId:e.get("captchaId"),captchaPin:e.get("captchaPin"),session_id:e.get("session_id"),ticket:e.get("ticket"),read_only:e.get("read_only")}:void 0},clearCredentials:function(){var e=this;Ext.Object.each(e.getCredentials(),function(t){e.set(t,"")})},getReports:function(){var e=this;return{action:e.get("reports_action"),login_name:e.get("login"),service:e.get("reports_service"),session_id:e.get("session_id"),ticket:e.get("ticket"),to:BP.config("reports.to")}},getChat:function(){var e=this;return{action:e.get("chat_action"),login_name:e.get("login"),service:e.get("chat_service"),session_id:e.get("session_id"),ticket:e.get("ticket"),to:BP.config("reports.to")}},setDefault:function(e,t){var n=this,i=n.get(e);return i?null:n.set(e,t)},refresh:function(e){var t=this;t.id=e||1,t.load()},getChartSettings:function(){return this.get("defaultInstrument")?Ext.getStore("ChartSettings").getById(this.get("defaultInstrument")):void 0},setChartSettings:function(){},set:function(e,t){var n,i=this;return n=Ext.data.Model.prototype.set.apply(this,arguments),i.delay=i.delay||1e3,"allowReload"==e?(i.phantom=!1,i.save(),n||null):(i.callTask||(i.callTask=new Ext.util.DelayedTask(function(){i.phantom=!1,i.save()})),"id"==e||Ext.isObject(t)||i.callTask.delay(i.delay),n||null)}},0,0,0,0,0,0,[BP.model,"LocalSetings"],0),Ext.cmd.derive("BP.logger",Ext.Base,{singleton:!0},0,0,0,0,0,0,[BP,"logger"],function(){this.destroy(),delete BP.logger,BP.logger=Ext.emptyFn}),Ext.cmd.derive("BP.util.Clock",Ext.Base,{singleton:!0,serverTS:null,localTS:null,constructor:function(e){this.mixins.observable.constructor.call(this,e)},setTimestamp:function(e){null===this.serverTS&&(this.serverTS=new Date),e||(e=this.serverTS.getTime()),this.serverTS.setTime(e),this.localTS=new Date,this.timerTask||(this.timerTask=window.setInterval(Ext.bind(this.tick,this),1e3))},getServerTS:function(){var e=this.serverTS||new Date;return e.getTime()},getTZOffset:function(){var e=new Date;return-1*e.getTimezoneOffset()},getTimestamp:function(){return this.serverTS},getTimeDifference:function(){return this.serverTS.getTime()-this.localTS.getTime()},tick:function(){var e=Date.now();this.serverTS.setTime(this.serverTS.getTime()+(e-this.localTS.getTime())),this.localTS.setTime(e),this.fireEvent("tick",this.serverTS)},selectSettlementTime:function(e){var t,n;return t={summer:"21:00",winter:"22:00","null":"21:00"},n=this.getTimeAmericaNewYorkTimeZone(+e),((t[n]||t["null"])+"").split(":")},getTimeAmericaNewYorkTimeZone:function(e){var t,n,i,r,o;return t="America/New_York",r={"-4":"summer","-5":"winter"},i=new Date(new Date(+e).toLocaleString("en-US",{timeZone:"UTC"})),n=new Date(new Date(+e).toLocaleString("en-US",{timeZone:t})),o=(n-i)/36e5,r[o]||"null"},getNextSettlementTime:function(e){var t,n;return t=new Date(+e),n=this.selectSettlementTime(+e),t.setUTCHours(n[0]||"21"),t.setUTCMinutes(n[1]||"00"),t.setUTCSeconds(0),t},toUTCTime:function(e){return e=e?new Date(+e):new Date,e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0))}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[BP.util,"Clock"],0),Ext.cmd.derive("BP.ux.data.SRP6",Ext.Base,{singleton:!0,platform:"DDS3_BIO_WEB",setTicket:Ext.emptyFn,doRe:Ext.emptyFn,credentialsVerify:Ext.emptyFn,credentialsCaptchaVerify:Ext.emptyFn,init:function(e,t,n){var i,r,o,a=this;if(BP.ux.data.Authorization.getTicket=Ext.emptyFn,BP.ux.data.Authorization.getSingle=Ext.emptyFn,BP.ux.data.Authorization.getUserName=Ext.emptyFn,BP.ux.data.Authorization.getSessionID=Ext.emptyFn,BP.ux.data.Authorization.isAllowRelogin=Ext.emptyFn,e.scope){e.params.login&&(e.params.hlogin=this.CryptoJS.SHA1(e.params.login),e.params.hlogin=(""+e.params.hlogin).toUpperCase(),delete e.params.login),e.params.password&&(e.params.hpassword=this.CryptoJS.SHA1(e.params.password),e.params.hpassword=(""+e.params.hpassword).toUpperCase(),delete e.params.password),i=BP.ux.data.Authorization.getAuthUrl(),r=a.stepOneParams(e.params),o=null;for(o in r)break;if(!o||!i)return void setTimeout(function(){BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3);Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 1"),Ext.Ajax.request({url:i+"/auth",method:"POST",timeout:1e4,async:!0,scope:a,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:r,success:Ext.pass(a.requestSuccessStepTwo,[e,t,n]),failure:Ext.pass(a.requestFailureAuthorization,[e,t,n])})}},requestSuccessStepTwo:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)){if(d=u.getCredentials(l,e.params)){o=BP.ux.data.Authorization.getAuthUrl(),d.sessionID=e.params.sessionID,a=u.stepTwoParams(d),s=null;for(s in a)break;return s&&o?(d=null,Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 2"),void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:1e4,async:!0,scope:u,withCredentials:!0,cors:!0,useDefaultXhrHeader:!1,params:a,success:Ext.pass(u.requestSuccessStepThree,[e,t,n]),failure:Ext.pass(u.requestFailureAuthorization,[e,t,n])})):void setTimeout(function(){BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureAuthorization(e,t,n,i,r)}},requestSuccessStepThree:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)&&l.M2){d=!1;try{d=!!u.credentialsVerify(l.M2),e.params.captchaId&&(d=l.M2_C?d&&!!u.credentialsCaptchaVerify(l.M2_C):!1)}catch(c){d=!1}if(d){u.setTicket(),u.setTicket=Ext.emptyFn,u.credentialsVerify=Ext.emptyFn,e.params.captchaId&&(u.credentialsCaptchaVerify=Ext.emptyFn),o=BP.ux.data.Authorization.getAuthUrl(),a=u.stepThreeParams({sessionID:e.params.sessionID,rememberMe:1==e.params.remember_me||!1}),s=null;for(s in a)break;return s&&o?(d=!1,Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 3"),void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:3e4,async:!0,scope:u,withCredentials:!0,cors:!0,useDefaultXhrHeader:!1,params:a,success:Ext.pass(u.requestSuccessStepSettings,[e,t,n]),failure:Ext.pass(u.requestFailureAuthorization,[e,t,n])})):void setTimeout(function(){BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureAuthorization(e,t,n,i,r)}},requestSuccessStepThreeReadSettings:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)&&l.M2){d=!1;try{d=!!u.credentialsVerify(l.M2)}catch(c){d=!1}if(d){u.setTicket=Ext.emptyFn,u.credentialsVerify=Ext.emptyFn,o=BP.ux.data.Authorization.getAuthUrl(),a=u.stepThreeParamsReadSettings({sessionID:e.params.sessionID}),s=null;for(s in a)break;return s&&o?(d=!1,void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:15e3,async:!0,scope:u,withCredentials:!0,cors:!0,useDefaultXhrHeader:!1,params:a,success:Ext.pass(u.requestSuccessStepReadSettings,[e,t,n]),failure:Ext.pass(u.requestFailureReadSettings,[e,t,n])})):void setTimeout(function(){Ext.isFunction(n)&&n.call(e.scope||{},e,i)},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureReadSettings(e,t,n,i,r)}},requestSuccessStepSettings:function(e,t,n,i,r){var o,a=this;if(r=r||{},i=i||{},e.scope){if(200==i.status&&i.responseText){try{o=Ext.decode(i.responseText),o.settings&&r.params&&r.params.zipped&&(o.settings=BP.util.Zip.decode(o.settings))}catch(s){o=null}if(Ext.isObject(o))return e.scope.attemptsAuth=1,BP.ux.data.Authorization.setResetSelectServer(!0),Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-success")),void setTimeout(function(){if(Ext.isFunction(t)){if(o.uName=e.params.username,t.call(e.scope||{},o,i,r))return BP.ux.data.Authorization.getUserName=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.username:void 0},BP.ux.data.Authorization.getSessionID=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.sessionID:void 0},!0;200==i.status&&(i.status=903),a.requestFailureAuthorization(e,t,n,i,r)}},1e3)}200==i.status&&(i.status=0),a.requestFailureAuthorization(e,t,n,i,r)}},requestSuccessStepReadSettings:function(e,t,n,i,r){var o,a=this;if(r=r||{},i=i||{},e.scope){if(a.doRe=Ext.emptyFn,BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText&&(o=Ext.decode(i.responseText),o&&o.settings&&r.params&&r.params.zipped&&(o.settings=BP.util.Zip.decode(o.settings)),Ext.isObject(o)&&Ext.isFunction(t)&&t.call(e.scope||{},o,i,r)))return!0;200==i.status&&(i.status=904),a.requestFailureReadSettings(e,t,n,i,r)}},stepOneParams:function(e){var t={};return e.hlogin&&e.sessionID?(t={service:"srp_api",step:1,session_id:e.sessionID,login_name:e.hlogin,srp_version:1,putent_genus:1},e.captchaId&&(t.captcha_id=e.captchaId),t):t},stepTwoParams:function(e){var t={};if(!e.A)return t;if(!e.M1)return t;if(!e.sessionID)return t;if(e.captcha){if(!e.captcha.A)return t;if(!e.captcha.M1)return t}return t={service:"srp_api",session_id:e.sessionID,public_value:e.A,evidence_message:e.M1,step:2,srp_version:1,putent_genus:1},e.captcha&&(t.pin_public_value=e.captcha.A,t.pin_evidence_message=e.captcha.M1),t},stepThreeParams:function(e){var t,n={};return e.sessionID?(n={service:"srp_api",step:3,platform:this.platform,version:BP.config("app.version"),session_id:e.sessionID,zipped:!0,settings:!0,willPing:!0,trade_server_type:"BIO_SERVER",putent_genus:1},e.rememberMe&&(t=BP.Bootstrap.platform.parse(window.navigator.userAgent),n.device_id=BP.ux.data.Authorization.getDeviceId(t),n.device_name=BP.ux.data.Authorization.getBrowserName(t),n.device_os=BP.ux.data.Authorization.getOSName(t)),e.rememberMe&&(n.remember_me=!0),n):n},stepThreeParamsReadSettings:function(e){var t={};return e.sessionID?t={service:"srp_settings",step:3,platform:this.platform,version:BP.config("app.version"),session_id:e.sessionID,zipped:!0,trade_server_type:"BIO_SERVER",srp_version:1}:t},requestFailureAuthorization:function(){BP.ux.data.Authorization.requestFailureAuthorization.apply(BP.ux.data.Authorization,arguments)},requestFailureAuthorizationToken:function(){BP.ux.data.Authorization.requestFailureAuthorization.apply(BP.ux.data.Authorization,arguments)},getCredentials:function(e,t){var n,i,r,o=this,a=function(){};if(t.hlogin&&t.hpassword&&e.B&&e.S&&e.G&&e.H&&e.N&&e.K){a.prototype=new o.SRPClient,a.prototype.N=function(){return new o.BigInteger(e.N,16)},a.prototype.g=function(){return new o.BigInteger(e.G,16)},a.prototype.H=function(t){var n="";switch(e.H){case"SHA-256":n=new o.BigInteger((""+o.CryptoJS.SHA256(t)).toLowerCase(),16)}return n.toString(16)},a.prototype.k=new o.BigInteger(e.K,16),r=new a,r.step1(t.hlogin,t.hpassword);try{n=r.step2(e.S,e.B),o.credentialsVerify=function(e){return r.step3(e)},o.setTicket=function(){var e=r.getSessionKey();if(e+="",e.length<64)for(;e.length<64;)e="0"+e;t.remember_me&&o.setRmtLabel(e,t.hlogin),BP.ux.data.Authorization.getTicket=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e:void 0},BP.ux.data.Authorization.getSingle=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?o.toSingle(e,t.sessionID):void 0}}}catch(s){n=null}if(t.captchaId){if(i=o.getCredentialsCaptcha(e,t),!i)return;n.captcha=i}return n}},setRmtLabel:function(e){var t,n;t=new Date,t.setMonth(t.getMonth()+1),n=BP.ux.crypto.Base64.encode(e.reverse(),!1),BP.util.Encode.setSettings({service:"remember_me"},"uscr")&&Ext.util.Cookies.set("rmt",n,t)},getCredentialsCaptcha:function(e,t){var n,i,r=this,o=function(){};if(t.captchaId&&t.captchaPin&&e.B_C&&e.S_C&&e.G_C&&e.H_C&&e.N_C&&e.K_C){o.prototype=new r.SRPClient,o.prototype.N=function(){return new r.BigInteger(e.N_C,16)},o.prototype.g=function(){return new r.BigInteger(e.G_C,16)},o.prototype.H=function(t){var n="";switch(e.H){case"SHA-256":n=new r.BigInteger((""+r.CryptoJS.SHA256(t)).toLowerCase(),16)}return n.toString(16)},o.prototype.k=new r.BigInteger(e.K_C,16),i=new o,i.step1(t.captchaId,t.captchaPin);try{n=i.step2(e.S_C,e.B_C),r.credentialsCaptchaVerify=function(e){return i.step3(e)}}catch(a){n=null}return n}},initRe:function(e,t,n){var i,r,o,a=this;if(BP.ux.data.Authorization.getTicket=Ext.emptyFn,BP.ux.data.Authorization.getSingle=Ext.emptyFn,BP.ux.data.Authorization.getUserName=Ext.emptyFn,BP.ux.data.Authorization.getSessionID=Ext.emptyFn,BP.ux.data.Authorization.isAllowRelogin=Ext.emptyFn,e.scope){e.params.login&&(e.params.username=Ext.clone(e.params.login),e.params.hlogin=this.CryptoJS.SHA1(e.params.login),e.params.hlogin=(""+e.params.hlogin).toUpperCase(),delete e.params.f),e.params.t&&(e.params.hpassword=this.CryptoJS.SHA1(e.params.t),e.params.hpassword=(""+e.params.hpassword).toUpperCase(),delete e.params.t),i=BP.ux.data.Authorization.getAuthUrl(),r=a.stepOneParamsRe(e.params),o=null;for(o in r)break;if(!o||!i)return void setTimeout(function(){Ext.select("div.p-mask-msg").remove(),Ext.select("style[data-title=preload]").remove(),
Ext.select("div.p-mask").remove(),BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3);Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 1"),Ext.Ajax.request({url:i+"/auth",method:"POST",timeout:1e4,async:!0,scope:a,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:r,success:Ext.pass(a.requestSuccessStepTwoRe,[e,t,n]),failure:Ext.pass(a.requestFailureAuthorization,[e,t,n])})}},initReadSettings:function(e,t,n){var i,r,o,a=this;if(e.scope){n=n||Ext.emptyFn,e.params.f&&(e.params.hlogin=this.CryptoJS.SHA1(e.params.f),e.params.hlogin=(""+e.params.hlogin).toUpperCase(),delete e.params.f),e.params.t&&(e.params.hpassword=this.CryptoJS.SHA1(e.params.t),e.params.hpassword=(""+e.params.hpassword).toUpperCase(),delete e.params.t),e.params.s&&(e.params.sessionID=e.params.s,delete e.params.s),i=BP.ux.data.Authorization.getAuthUrl(),r=a.stepOneParamsReadSettings(e.params),o=null;for(o in r)break;return o&&i?void Ext.Ajax.request({url:i+"/auth",method:"POST",timeout:5e3,async:!0,scope:a,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:r,success:Ext.pass(a.requestSuccessStepTwoReadSettings,[e,t,n]),failure:Ext.pass(a.requestFailureReadSettings,[e,t,n])}):void setTimeout(function(){Ext.isFunction(n)&&n.call(e.scope||{},e)},1e3)}},requestFailureAuthorizationRe:function(){BP.ux.data.Authorization.requestFailureAuthorizationRe.apply(BP.ux.data.Authorization,arguments)},requestFailureReadSettings:function(e,t,n,i){Ext.isFunction(n)&&n.call(e.scope||{},e,i)},stepOneParamsRe:function(e){var t,n={};return e.hlogin&&e.sessionID?(t=BP.Bootstrap.platform.parse(window.navigator.userAgent),n={service:"srp_remember_me",step:1,session_id:e.sessionID,platform:this.platform,device_id:BP.ux.data.Authorization.getDeviceId(t),login_name:e.hlogin,srp_version:1}):n},stepOneParamsReadSettings:function(e){var t={};return e.hlogin&&e.sessionID?t={service:"srp_settings",step:1,session_id:e.sessionID,login_name:e.hlogin,putent_genus:1,srp_version:1}:t},stepTwoParamsRe:function(e){var t={};if(!e.A)return t;if(!e.M1)return t;if(!e.sessionID)return t;if(e.captcha){if(!e.captcha.A)return t;if(!e.captcha.M1)return t}return t={service:"srp_api",session_id:e.sessionID,public_value:e.A,evidence_message:e.M1,step:2,putent_genus:1,srp_version:1}},stepTwoParamsReadSettings:function(e){var t={};return e.A&&e.M1&&e.sessionID?t={service:"srp_settings",step:2,session_id:e.sessionID,public_value:e.A,evidence_message:e.M1,srp_versio:1}:t},requestSuccessStepTwoRe:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)){if(e.params.remember_me=!0,d=u.getCredentials(l,e.params)){o=BP.ux.data.Authorization.getAuthUrl(),d.sessionID=e.params.sessionID,a=u.stepTwoParamsRe(d),s=null;for(s in a)break;return s&&o?(d=null,Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 2"),void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:1e4,async:!0,scope:u,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:a,success:Ext.pass(u.requestSuccessStepThree,[e,t,n]),failure:Ext.pass(u.requestFailureAuthorization,[e,t,n])})):void setTimeout(function(){BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureAuthorizationRe(e,t,n,i,r)}},requestSuccessStepTwoReadSettings:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)){if(d=u.getCredentials(l,e.params)){o=BP.ux.data.Authorization.getAuthUrl(),d.sessionID=e.params.sessionID,a=u.stepTwoParamsReadSettings(d),s=null;for(s in a)break;return s&&o?(d=null,void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:5e3,async:!0,scope:u,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:a,success:Ext.pass(u.requestSuccessStepThreeReadSettings,[e,t,n]),failure:Ext.pass(u.requestFailureReadSettings,[e,t,n])})):void setTimeout(function(){Ext.isFunction(n)&&n.call(e.scope||{},e,i)},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureReadSettings(e,t,n,i,r)}},requestFailureRenew:function(e,t,n,i){Ext.isFunction(n)&&n.call(e.scope||{},e,i)},initToken:function(e,t,n){var i,r,o,a=this;BP.ux.data.Authorization.getTicket=Ext.emptyFn,BP.ux.data.Authorization.getSingle=Ext.emptyFn,BP.ux.data.Authorization.getUserName=Ext.emptyFn,BP.ux.data.Authorization.getSessionID=Ext.emptyFn,BP.ux.data.Authorization.isAllowRelogin=Ext.emptyFn,n=n||Ext.emptyFn,e=e||{},e.params=e.params||{},e.params.tk&&(e.params.hlogin=this.CryptoJS.SHA1(e.params.tk),e.params.hlogin=(""+e.params.hlogin).toUpperCase(),e.params.hpassword=e.params.hlogin),i=BP.ux.data.Authorization.getAuthUrl(),r=a.stepOneParamsToken(e.params),o=null;for(o in r)break;return o&&i?(Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 1"),void Ext.Ajax.request({url:i+"/auth",method:"POST",timeout:1e4,async:!0,scope:a,withCredentials:!0,cors:!0,useDefaultXhrHeader:!1,params:r,success:Ext.pass(a.requestSuccessStepTwoToken,[e,t,n]),failure:Ext.pass(a.requestFailureAuthorizationToken,[e,t,n])})):void setTimeout(function(){Ext.select("div.p-mask-msg").remove(),Ext.select("style[data-title=preload]").remove(),Ext.select("div.p-mask").remove(),BP.ux.data.Authorization.showWarning({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)},stepOneParamsToken:function(e){var t={};return e.hlogin&&e.sessionID?t={service:"srp_sts_token",session_id:e.sessionID,token:e.tk,login_name:e.hlogin,putent_genus:1,step:1,srp_version:1}:t},stepTwoParamsToken:function(e){var t={};return e.A&&e.M1&&e.sessionID?t={service:"srp_sts_token",session_id:e.sessionID,public_value:e.A,evidence_message:e.M1,step:2,srp_version:1}:t},requestSuccessStepTwoToken:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){window._ce.addCatch(c,"SRP6.requestSuccessStepTwoToken"),l=null}if(Ext.isObject(l)){if(d=u.getCredentials(l,e.params)){o=BP.ux.data.Authorization.getAuthUrl(),d.sessionID=e.params.sessionID,a=u.stepTwoParamsToken(d),s=null;for(s in a)break;return s&&o?(d=null,Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 2"),void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:1e4,async:!0,scope:u,withCredentials:!0,cors:!0,useDefaultXhrHeader:!1,params:a,success:Ext.pass(u.requestSuccessStepThreeToken,[e,t,n]),failure:Ext.pass(u.requestFailureAuthorizationToken,[e,t,n])})):void setTimeout(function(){Ext.select("div.p-mask-msg").remove(),Ext.select("style[data-title=preload]").remove(),Ext.select("div.p-mask").remove(),BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureAuthorizationToken(e,t,n,i,r)},requestSuccessStepThreeToken:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){window._ce.addCatch(c,"SRP6.requestSuccessStepThreeToken"),l=null}if(Ext.isObject(l)&&l.M2){d=!1;try{d=!!u.credentialsVerify(l.M2)}catch(c){d=!1,window._ce.addCatch(c,"SRP6.requestSuccessStepThreeToken")}if(d){u.setTicket(),u.setTicket=Ext.emptyFn,u.credentialsVerify=Ext.emptyFn,o=BP.ux.data.Authorization.getAuthUrl(),a=u.stepThreeParamsToken({sessionID:e.params.sessionID,rememberMe:e.params.remember_me===!0||!1,forgetMe:e.params.forget_me===!0||!1}),s=null;for(s in a)break;return s&&o?(d=!1,Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 3"),void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:3e4,async:!0,scope:u,withCredentials:!0,cors:!0,useDefaultXhrHeader:!1,params:a,success:Ext.pass(u.requestSuccessStepSettingsToken,[e,t,n]),failure:Ext.pass(u.requestFailureAuthorizationToken,[e,t,n])})):void setTimeout(function(){Ext.select("div.p-mask-msg").remove(),Ext.select("style[data-title=preload]").remove(),Ext.select("div.p-mask").remove(),BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureAuthorizationToken(e,t,n,i,r)},stepThreeParamsToken:function(e){var t,n={};return e.sessionID?(n={service:"srp_sts_token",step:3,platform:this.platform,version:BP.config("app.version"),session_id:e.sessionID,zipped:!0,settings:!0,srp_version:1,willPing:!0,trade_server_type:"BIO_SERVER",putent_genus:1},e.rememberMe&&(t=BP.Bootstrap.platform.parse(window.navigator.userAgent),n.device_id=BP.ux.data.Authorization.getDeviceId(t),n.device_name=BP.ux.data.Authorization.getBrowserName(t),n.device_os=BP.ux.data.Authorization.getOSName(t)),e.rememberMe&&(n.remember_me=!0),n):n},requestSuccessStepSettingsToken:function(e,t,n,i,r){var o,a,s=this;if(r=r||{},i=i||{},BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{o=Ext.decode(i.responseText),o.settings&&r.params&&r.params.zipped&&(o.settings=BP.util.Zip.decode(o.settings))}catch(l){o=null,window._ce.addCatch(l,"SRP6.requestSuccessStepSettingsToken")}if(Ext.isObject(o))return e.params.username=o.login_name,delete o.login_name,s.doRe(e.params),Ext.util.Cookies.clear("__fg"),s.doRe=Ext.emptyFn,e.scope.attemptsAuth=1,BP.ux.data.Authorization.setResetSelectServer(!0),Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-success")),void setTimeout(function(){if(Ext.isFunction(t)){if(o.uName=e.params.username,BP.ux.data.Authorization.getUserName=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.username:void 0},a=Ext.clone(e.params.sessionID),BP.ux.data.Authorization.getSessionID=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?a:void 0},t.call(e.scope||{},o,i,r))return!0;Ext.select("div.p-mask-msg").remove(),Ext.select("style[data-title=preload]").remove(),Ext.select("div.p-mask").remove(),200==i.status&&(i.status=904),s.requestFailureAuthorizationToken(e,t,n,i,r)}},1e3)}200==i.status&&(i.status=904),s.requestFailureAuthorizationToken(e,t,n,i,r)},initSts:function(e,t,n){var i,r,o,a=this;if(e.scope){n=n||Ext.emptyFn,e.params.f&&(e.params.hlogin=this.CryptoJS.SHA1(e.params.f),e.params.hlogin=(""+e.params.hlogin).toUpperCase(),delete e.params.f),e.params.t&&(e.params.hpassword=this.CryptoJS.SHA1(e.params.t),e.params.hpassword=(""+e.params.hpassword).toUpperCase(),delete e.params.t),e.params.s&&(e.params.sessionID=e.params.s,delete e.params.s),e.params.a&&(e.params.action=e.params.a,delete e.params.a),i=BP.ux.data.Authorization.getAuthUrl(),r=a.stepOneParamsSts(e.params),o=null;for(o in r)break;return o&&i?void Ext.Ajax.request({url:i+"/auth",method:"POST",timeout:3e3,async:!0,scope:a,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:r,success:Ext.pass(a.requestSuccessStepTwoSts,[e,t,n]),failure:Ext.pass(a.requestFailureWarning,[e,t,n])}):void setTimeout(function(){BP.ux.data.Authorization.showWarning({animAllow:!1,errorCode:907,scope:e.scope,cb:n})},1e3)}},requestSuccessStepTwoSts:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)){if(d=u.getCredentials(l,e.params)){o=BP.ux.data.Authorization.getAuthUrl(),d.sessionID=e.params.sessionID,a=u.stepTwoParamsSts(d),s=null;for(s in a)break;return s&&o?(d=null,void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:3e3,async:!0,scope:u,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:a,success:Ext.pass(u.requestSuccessStepThreeSts,[e,t,n]),failure:Ext.pass(u.requestFailureWarning,[e,t,n])})):void setTimeout(function(){BP.ux.data.Authorization.showWarning({animAllow:!1,errorCode:907,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureWarning(e,t,n,i,r)}},requestSuccessStepThreeSts:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)&&l.M2){d=!1;try{d=!!u.credentialsVerify(l.M2)}catch(c){d=!1}if(d){u.setTicket=Ext.emptyFn,u.credentialsVerify=Ext.emptyFn,o=BP.ux.data.Authorization.getAuthUrl(),a=u.stepThreeParamsSts({sessionID:e.params.sessionID,to:e.params.m,action:e.params.action}),s=null;for(s in a)break;return s&&o?(d=!1,void Ext.Ajax.request({url:o+"/auth",method:"POST",timeout:3e3,async:!0,scope:u,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:a,success:Ext.pass(u.requestSuccessStepSts,[e,t,n]),failure:Ext.pass(u.requestFailureWarning,[e,t,n])})):void setTimeout(function(){BP.ux.data.Authorization.showWarning({animAllow:!1,errorCode:907,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureWarning(e,t,n,i,r)}},requestSuccessStepSts:function(e,t,n,i,r){var o,a,s=this;if(r=r||{},i=i||{},e.scope){if(BP.ux.data.Authorization.clearHeaderStatus(e),200==i.status&&i.responseText){try{o=Ext.decode(i.responseText)}catch(l){o=null}if(Ext.isObject(o)){try{a=Ext.decode(o.stsTicket||null)}catch(l){a=null}if(Ext.isObject(a)){if(a.error)BP.ux.data.Authorization.showWarning({msg:a.error,action:e.params.action,scope:e.scope,cb:n});else{if(a.result.length<64)for(;a.result.length<64;)a.result="0"+a.result;t.call(e.scope||{},a.result)!==!0&&BP.ux.data.Authorization.showWarning({animAllow:!1,errorCode:908,scope:e.scope,cb:n})}return}}}200==i.status&&(i.status=907),s.requestFailureWarning(e,t,n,i,r)}},stepOneParamsSts:function(e){var t={};return e.hlogin&&e.sessionID?t={service:"srp_sts",session_id:e.sessionID,login_name:e.hlogin,step:1,srp_version:1}:t},stepTwoParamsSts:function(e){var t={};return e.A&&e.M1&&e.sessionID?t={service:"srp_sts",session_id:e.sessionID,public_value:e.A,evidence_message:e.M1,step:2,srp_version:1}:t},stepThreeParamsSts:function(e){var t={};return e.sessionID&&e.to&&e.action?t={service:"srp_sts",platform:this.platform,version:BP.version,session_id:e.sessionID,step:3,putent_genus:1,srp_version:1,to:e.to,action:e.action}:t},requestFailureWarning:function(e,t,n,i){BP.ux.data.Authorization.prepareHeaderStatus(e,i),BP.ux.data.Authorization.showWarning({errorCode:907,action:e.params.action,headerStatus:e.headerStatus,headerStatusText:e.headerStatusText,scope:e.scope,cb:n})},toSingle:function(e,t){return e&&t?this.CryptoJS.HmacSHA256(t,e).toString(this.CryptoJS.enc.Hex).toLowerCase():void 0}},0,0,0,0,0,0,[BP.ux.data,"SRP6"],function(e){e.CryptoJS=function(e,t){var n={},i=n.lib={},r=function(){},o=i.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;e>r;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-8*(r%4)&255)<<24-8*((i+r)%4);else if(65535<n.length)for(r=0;e>r;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;t>i;i+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;e>i;i++){var r=t[i>>>2]>>>24-8*(i%4)&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-4*(i%8);return new a.init(n,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;e>i;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-8*(i%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-8*(i%4);return new a.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},c=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,s=r/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,r=e.min(4*t,r),t){for(var l=0;t>l;l+=o)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=r}return new a.init(l,r)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=c.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math),function(){var t=e.CryptoJS,n=t.lib,i=n.WordArray,r=n.Hasher,o=[],n=t.algo.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],s=n[3],l=n[4],d=0;80>d;d++){if(16>d)o[d]=0|e[t+d];else{var u=o[d-3]^o[d-8]^o[d-14]^o[d-16];o[d]=u<<1|u>>>31}u=(i<<5|i>>>27)+l+o[d],u=20>d?u+((r&a|~r&s)+1518500249):40>d?u+((r^a^s)+1859775393):60>d?u+((r&a|r&s|a&s)-1894007588):u+((r^a^s)-899497514),l=s,s=a,a=r<<30|r>>>2,r=i,i=u}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(i+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=r._createHelper(n),t.HmacSHA1=r._createHmacHelper(n)}(),function(t){for(var n=e.CryptoJS,i=n.lib,r=i.WordArray,o=i.Hasher,i=n.algo,a=[],s=[],l=function(e){return 4294967296*(e-(0|e))|0},d=2,u=0;64>u;){var c;e:{c=d;for(var h=t.sqrt(c),p=2;h>=p;p++)if(!(c%p)){c=!1;break e}c=!0}c&&(8>u&&(a[u]=l(t.pow(d,.5))),s[u]=l(t.pow(d,1/3)),u++),d++}var f=[],i=i.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],l=n[4],d=n[5],u=n[6],c=n[7],h=0;64>h;h++){if(16>h)f[h]=0|e[t+h];else{var p=f[h-15],g=f[h-2];f[h]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+f[h-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+f[h-16]}p=c+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&d^~l&u)+s[h]+f[h],g=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&o^r&o),c=u,u=d,d=l,l=a+p|0,a=o,o=r,r=i,i=p+g|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0,n[5]=n[5]+d|0,n[6]=n[6]+u|0,n[7]=n[7]+c|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[(r+64>>>9<<4)+14]=t.floor(i/4294967296),n[(r+64>>>9<<4)+15]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(i),n.HmacSHA256=o._createHmacHelper(i)}(Math),function(){var t=e.CryptoJS,n=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var i=e.blockSize,r=4*i;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,l=a.words,d=0;i>d;d++)s[d]^=1549556828,l[d]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){function t(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new t(null)}function i(e,t,n,i,r,o){for(var a=16383&t,s=t>>14;--o>=0;){var l=16383&this[e],d=this[e++]>>14,u=s*l+d*a;l=a*l+((16383&u)<<14)+n[i]+r,r=(l>>28)+(u>>14)+s*d,n[i++]=268435455&l}return r}function r(e){return et.charAt(e)}function o(e,t){var n=tt[e.charCodeAt(t)];return null==n?-1:n}function a(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function s(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+DV:this.t=0}function l(e){var t=n();return t.fromInt(e),t}function d(e,n){var i;if(16==n)i=4;else if(8==n)i=3;else if(256==n)i=8;else if(2==n)i=1;else if(32==n)i=5;else{if(4!=n)return void this.fromRadix(e,n);i=2}this.t=0,this.s=0;for(var r=e.length,a=!1,s=0;--r>=0;){var l=8==i?255&e[r]:o(e,r);0>l?"-"==e.charAt(r)&&(a=!0):(a=!1,0==s?this[this.t++]=l:s+i>this.DB?(this[this.t-1]|=(l&(1<<this.DB-s)-1)<<s,this[this.t++]=l>>this.DB-s):this[this.t-1]|=l<<s,s+=i,s>=this.DB&&(s-=this.DB))}8==i&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),a&&t.ZERO.subTo(this,this)}function u(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function c(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,o=!1,a="",s=this.t,l=this.DB-s*this.DB%t;if(s-->0)for(l<this.DB&&(n=this[s]>>l)>0&&(o=!0,a=r(n));s>=0;)t>l?(n=(this[s]&(1<<l)-1)<<t-l,n|=this[--s]>>(l+=this.DB-t)):(n=this[s]>>(l-=t)&i,0>=l&&(l+=this.DB,--s)),n>0&&(o=!0),o&&(a+=r(n));return o?a:"0"}function h(){var e=n();return t.ZERO.subTo(this,e),e}function p(){return this.s<0?this.negate():this}function f(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function g(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function m(){return this.t<=0?0:this.DB*(this.t-1)+g(this[this.t-1]^this.s&this.DM)}function x(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function v(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function y(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|s,s=(this[n]&o)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function E(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}function b(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=0>i?-1:0,-1>i?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function C(e,n){var i=this.abs(),r=e.abs(),o=i.t;for(n.t=o+r.t;--o>=0;)n[o]=0;for(o=0;o<r.t;++o)n[o+i.t]=i.am(0,r[o],n,o,0,i.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)}function w(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function S(e,i,r){var o=e.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=n());var s=n(),l=this.s,d=e.s,u=this.DB-g(o[o.t-1]);u>0?(o.lShiftTo(u,s),a.lShiftTo(u,r)):(o.copyTo(s),a.copyTo(r));var c=s.t,h=s[c-1];if(0!=h){var p=h*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),f=this.FV/p,m=(1<<this.F1)/p,x=1<<this.F2,v=r.t,y=v-c,E=null==i?n():i;for(s.dlShiftTo(y,E),r.compareTo(E)>=0&&(r[r.t++]=1,r.subTo(E,r)),t.ONE.dlShiftTo(c,E),E.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--y>=0;){var b=r[--v]==h?this.DM:Math.floor(r[v]*f+(r[v-1]+x)*m);if((r[v]+=s.am(0,b,r,y,0,c))<b)for(s.dlShiftTo(y,E),r.subTo(E,r);r[v]<--b;)r.subTo(E,r)}null!=i&&(r.drShiftTo(c,i),l!=d&&t.ZERO.subTo(i,i)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),0>l&&t.ZERO.subTo(r,r)}}}function T(e){var i=n();return this.abs().divRemTo(e,null,i),this.s<0&&i.compareTo(t.ZERO)>0&&e.subTo(i,i),i}function P(e){this.m=e}function I(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function k(e){return e}function B(e){e.divRemTo(this.m,null,e)}function M(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function D(e,t){e.squareTo(t),this.reduce(t)}function R(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function A(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function F(e){var i=n();return e.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),e.s<0&&i.compareTo(t.ZERO)>0&&this.m.subTo(i,i),i}function L(e){var t=n();return e.copyTo(t),this.reduce(t),t}function O(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function V(e,t){e.squareTo(t),this.reduce(t)}function N(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function H(){return 0==(this.t>0?1&this[0]:this.s)}function z(e,i){if(e>4294967295||1>e)return t.ONE;var r=n(),o=n(),a=i.convert(this),s=g(e)-1;for(a.copyTo(r);--s>=0;)if(i.sqrTo(r,o),(e&1<<s)>0)i.mulTo(o,a,r);else{var l=r;r=o,o=l}return i.revert(r)}function W(e,t){var n;return n=256>e||t.isEven()?new P(t):new A(t),this.exp(e,n)}function _(){var e=n();return this.copyTo(e),e}function U(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function j(){return 0==this.t?this.s:this[0]<<24>>24}function q(){return 0==this.t?this.s:this[0]<<16>>16}function G(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function K(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function X(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var t=this.chunkSize(e),i=Math.pow(e,t),r=l(i),o=n(),a=n(),s="";for(this.divRemTo(r,o,a);o.signum()>0;)s=(i+a.intValue()).toString(e).substr(1)+s,o.divRemTo(r,o,a);return a.intValue().toString(e)+s}function $(e,n){this.fromInt(0),null==n&&(n=10);for(var i=this.chunkSize(n),r=Math.pow(n,i),a=!1,s=0,l=0,d=0;d<e.length;++d){var u=o(e,d);0>u?"-"==e.charAt(d)&&0==this.signum()&&(a=!0):(l=n*l+u,++s>=i&&(this.dMultiply(r),this.dAddOffset(l,0),s=0,l=0))}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(l,0)),a&&t.ZERO.subTo(this,this)}function Y(e,n,i){if("number"==typeof n)if(2>e)this.fromInt(1);else for(this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),re,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var r=[],o=7&e;r.length=(e>>3)+1,n.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}}function Q(){var e=this.t,t=[];t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-->0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)8>i?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,0>=i&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t}function Z(e){return 0==this.compareTo(e)}function J(e){return this.compareTo(e)<0?this:e}function ee(e){return this.compareTo(e)>0?this:e}function te(e,t,n){var i,r,o=Math.min(e.t,this.t);for(i=0;o>i;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=o;i<this.t;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<e.t;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function ne(e,t){return e&t}function ie(e){var t=n();return this.bitwiseTo(e,ne,t),t}function re(e,t){return e|t}function oe(e){var t=n();return this.bitwiseTo(e,re,t),t}function ae(e,t){return e^t}function se(e){var t=n();return this.bitwiseTo(e,ae,t),t}function le(e,t){return e&~t}function de(e){var t=n();return this.bitwiseTo(e,le,t),t}function ue(){for(var e=n(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function ce(e){var t=n();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function he(e){var t=n();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function pe(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function fe(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+pe(this[e]);return this.s<0?this.t*this.DB:-1}function ge(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function me(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=ge(this[n]^t);return e}function xe(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function ve(e,n){var i=t.ONE.shiftLeft(e);return this.bitwiseTo(i,n,i),i}function ye(e){return this.changeBit(e,re)}function Ee(e){return this.changeBit(e,le)}function be(e){return this.changeBit(e,ae)}function Ce(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=0>i?-1:0,i>0?t[n++]=i:-1>i&&(t[n++]=this.DV+i),t.t=n,t.clamp()}function we(e){var t=n();return this.addTo(e,t),t}function Se(e){var t=n();return this.subTo(e,t),t}function Te(e){var t=n();return this.multiplyTo(e,t),t}function Pe(e){var t=n();return this.divRemTo(e,t,null),t}function Ie(e){var t=n();return this.divRemTo(e,null,t),t}function ke(e){var t=n(),i=n();return this.divRemTo(e,t,i),[t,i]}function Be(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Me(e,t){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}function De(){}function Re(e){return e}function Ae(e,t,n){e.multiplyTo(t,n)}function Fe(e,t){e.squareTo(t)}function Le(e){return this.exp(e,new De)}function Oe(e,t,n){var i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;var r;for(r=n.t-this.t;r>i;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);r>i;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()}function Ve(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)}function Ne(e){this.r2=n(),this.q3=n(),
t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function He(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t}function ze(e){return e}function We(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function _e(e,t){e.squareTo(t),this.reduce(t)}function Ue(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function je(e,t){var i,r,o=e.bitLength(),a=l(1);if(0>=o)return a;i=18>o?1:48>o?3:144>o?4:768>o?5:6,r=8>o?new P(t):t.isEven()?new Ne(t):new A(t);var s=[],d=3,u=i-1,c=(1<<i)-1;if(s[1]=r.convert(this),i>1){var h=n();for(r.sqrTo(s[1],h);c>=d;)s[d]=n(),r.mulTo(h,s[d-2],s[d]),d+=2}var p,f,m=e.t-1,x=!0,v=n();for(o=g(e[m])-1;m>=0;){for(o>=u?p=e[m]>>o-u&c:(p=(e[m]&(1<<o+1)-1)<<u-o,m>0&&(p|=e[m-1]>>this.DB+o-u)),d=i;0==(1&p);)p>>=1,--d;if((o-=d)<0&&(o+=this.DB,--m),x)s[p].copyTo(a),x=!1;else{for(;d>1;)r.sqrTo(a,v),r.sqrTo(v,a),d-=2;d>0?r.sqrTo(a,v):(f=a,a=v,v=f),r.mulTo(v,s[p],a)}for(;m>=0&&0==(e[m]&1<<o);)r.sqrTo(a,v),f=a,a=v,v=f,--o<0&&(o=this.DB-1,--m)}return r.revert(a)}function qe(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var r=t.getLowestSetBit(),o=n.getLowestSetBit();if(0>o)return t;for(o>r&&(o=r),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Ge(e){if(0>=e)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n}function Ke(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var i=e.clone(),r=this.clone(),o=l(1),a=l(0),s=l(0),d=l(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),n?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),n?(s.isEven()&&d.isEven()||(s.addTo(this,s),d.subTo(e,d)),s.rShiftTo(1,s)):d.isEven()||d.subTo(e,d),d.rShiftTo(1,d);i.compareTo(r)>=0?(i.subTo(r,i),n&&o.subTo(s,o),a.subTo(d,a)):(r.subTo(i,r),n&&s.subTo(o,s),d.subTo(a,d))}return 0!=r.compareTo(t.ONE)?t.ZERO:d.compareTo(e)>=0?d.subtract(e):d.signum()<0?(d.addTo(e,d),d.signum()<0?d.add(e):d):d}function Xe(e){var t,n=this.abs();if(1==n.t&&n[0]<=nt[nt.length-1]){for(t=0;t<nt.length;++t)if(n[0]==nt[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<nt.length;){for(var i=nt[t],r=t+1;r<nt.length&&it>i;)i*=nt[r++];for(i=n.modInt(i);r>t;)if(i%nt[t++]==0)return!1}return n.millerRabin(e)}function $e(e){var i=this.subtract(t.ONE),r=i.getLowestSetBit();if(0>=r)return!1;var o=i.shiftRight(r);e=e+1>>1,e>nt.length&&(e=nt.length);for(var a=n(),s=0;e>s;++s){a.fromInt(nt[s]);var l=a.modPow(o,this);if(0!=l.compareTo(t.ONE)&&0!=l.compareTo(i)){for(var d=1;d++<r&&0!=l.compareTo(i);)if(l=l.modPowInt(2,this),0==l.compareTo(t.ONE))return!1;if(0!=l.compareTo(i))return!1}}return!0}var Ye;t.prototype.am=i,Ye=28,t.prototype.DB=Ye,t.prototype.DM=(1<<Ye)-1,t.prototype.DV=1<<Ye;var Qe=52;t.prototype.FV=Math.pow(2,Qe),t.prototype.F1=Qe-Ye,t.prototype.F2=2*Ye-Qe;var Ze,Je,et="0123456789abcdefghijklmnopqrstuvwxyz",tt=[];for(Ze="0".charCodeAt(0),Je=0;9>=Je;++Je)tt[Ze++]=Je;for(Ze="a".charCodeAt(0),Je=10;36>Je;++Je)tt[Ze++]=Je;for(Ze="A".charCodeAt(0),Je=10;36>Je;++Je)tt[Ze++]=Je;P.prototype.convert=I,P.prototype.revert=k,P.prototype.reduce=B,P.prototype.mulTo=M,P.prototype.sqrTo=D,A.prototype.convert=F,A.prototype.revert=L,A.prototype.reduce=O,A.prototype.mulTo=N,A.prototype.sqrTo=V,t.prototype.copyTo=a,t.prototype.fromInt=s,t.prototype.fromString=d,t.prototype.clamp=u,t.prototype.dlShiftTo=x,t.prototype.drShiftTo=v,t.prototype.lShiftTo=y,t.prototype.rShiftTo=E,t.prototype.subTo=b,t.prototype.multiplyTo=C,t.prototype.squareTo=w,t.prototype.divRemTo=S,t.prototype.invDigit=R,t.prototype.isEven=H,t.prototype.exp=z,t.prototype.toString=c,t.prototype.negate=h,t.prototype.abs=p,t.prototype.compareTo=f,t.prototype.bitLength=m,t.prototype.mod=T,t.prototype.modPowInt=W,t.ZERO=l(0),t.ONE=l(1),De.prototype.convert=Re,De.prototype.revert=Re,De.prototype.mulTo=Ae,De.prototype.sqrTo=Fe,Ne.prototype.convert=He,Ne.prototype.revert=ze,Ne.prototype.reduce=We,Ne.prototype.mulTo=Ue,Ne.prototype.sqrTo=_e;var nt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],it=(1<<26)/nt[nt.length-1];t.prototype.chunkSize=G,t.prototype.toRadix=X,t.prototype.fromRadix=$,t.prototype.fromNumber=Y,t.prototype.bitwiseTo=te,t.prototype.changeBit=ve,t.prototype.addTo=Ce,t.prototype.dMultiply=Be,t.prototype.dAddOffset=Me,t.prototype.multiplyLowerTo=Oe,t.prototype.multiplyUpperTo=Ve,t.prototype.modInt=Ge,t.prototype.millerRabin=$e,t.prototype.clone=_,t.prototype.intValue=U,t.prototype.byteValue=j,t.prototype.shortValue=q,t.prototype.signum=K,t.prototype.toByteArray=Q,t.prototype.equals=Z,t.prototype.min=J,t.prototype.max=ee,t.prototype.and=ie,t.prototype.or=oe,t.prototype.xor=se,t.prototype.andNot=de,t.prototype.not=ue,t.prototype.shiftLeft=ce,t.prototype.shiftRight=he,t.prototype.getLowestSetBit=fe,t.prototype.bitCount=me,t.prototype.testBit=xe,t.prototype.setBit=ye,t.prototype.clearBit=Ee,t.prototype.flipBit=be,t.prototype.add=we,t.prototype.subtract=Se,t.prototype.multiply=Te,t.prototype.divide=Pe,t.prototype.remainder=Ie,t.prototype.divideAndRemainder=ke,t.prototype.modPow=je,t.prototype.modInverse=Ke,t.prototype.pow=Le,t.prototype.gcd=qe,t.prototype.isProbablePrime=Xe,e.BigInteger=t}(),function(){String.prototype.toIntArray=function(){for(var e,t,n,i=[],r=[],o=0,a=this+"\x00\x00\x00",s=a.length-1;s>o;)e=a.charCodeAt(o++),t=a.charCodeAt(o+1),128>e?i.push(e):2048>e?(i.push(e>>>6&31|192),i.push(e>>>0&63|128)):55296!=(63488&e)?(i.push(e>>>12&15|224),i.push(e>>>6&63|128),i.push(e>>>0&63|128)):55296==(64512&e)&&56320==(64512&t)&&(n=(63&t|(63&e)<<10)+65536,i.push(n>>>18&7|240),i.push(n>>>12&63|128),i.push(n>>>6&63|128),i.push(n>>>0&63|128),o++),i.length>3&&r.push(i.shift()<<0|i.shift()<<8|i.shift()<<16|i.shift()<<24);return r};var t=function(){function e(e,t){var n=(65535&e)+(65535&t),i=(e>>>16)+(t>>>16)+(n>>>16);return i<<16|65535&n}function t(){s=l=d=0;for(var e=0;256>e;++e)a[e]=u[e]=0;c=0}function n(n){function r(){o^=s<<11,d=e(d,o),s=e(s,l),s^=l>>>2,h=e(h,s),l=e(l,d),l^=d<<8,p=e(p,l),d=e(d,h),d^=h>>>16,f=e(f,d),h=e(h,p),h^=p<<10,g=e(g,h),p=e(p,f),p^=f>>>4,o=e(o,p),f=e(f,g),f^=g<<8,s=e(s,f),g=e(g,o),g^=o>>>9,l=e(l,g),o=e(o,s)}var o,s,l,d,h,p,f,g,m;if(o=s=l=d=h=p=f=g=2654435769,n&&"string"==typeof n&&(n=n.toIntArray()),n&&"number"==typeof n&&(n=[n]),n instanceof Array)for(t(),m=0;m<n.length;m++)u[255&m]+="number"==typeof n[m]?n[m]:0;for(m=0;4>m;m++)r();for(m=0;256>m;m+=8)n&&(o=e(o,u[m+0]),s=e(s,u[m+1]),l=e(l,u[m+2]),d=e(d,u[m+3]),h=e(h,u[m+4]),p=e(p,u[m+5]),f=e(f,u[m+6]),g=e(g,u[m+7])),r(),a[m+0]=o,a[m+1]=s,a[m+2]=l,a[m+3]=d,a[m+4]=h,a[m+5]=p,a[m+6]=f,a[m+7]=g;if(n)for(m=0;256>m;m+=8)o=e(o,a[m+0]),s=e(s,a[m+1]),l=e(l,a[m+2]),d=e(d,a[m+3]),h=e(h,a[m+4]),p=e(p,a[m+5]),f=e(f,a[m+6]),g=e(g,a[m+7]),r(),a[m+0]=o,a[m+1]=s,a[m+2]=l,a[m+3]=d,a[m+4]=h,a[m+5]=p,a[m+6]=f,a[m+7]=g;i(),c=256}function i(t){var n,i,r;for(t=t&&"number"==typeof t?Math.abs(Math.floor(t)):1;t--;)for(d=e(d,1),l=e(l,d),n=0;256>n;n++){switch(3&n){case 0:s^=s<<13;break;case 1:s^=s>>>6;break;case 2:s^=s<<2;break;case 3:s^=s>>>16}s=e(a[n+128&255],s),i=a[n],a[n]=r=e(a[i>>>2&255],e(s,l)),u[n]=l=e(a[r>>>10&255],i)}}function r(){return c--||(i(),c=255),u[c]}function o(){return{a:s,b:l,c:d,m:a,r:u}}var a=Array(256),s=0,l=0,d=0,u=Array(256),c=0;return n(4294967295*Math.random()),{reset:t,seed:n,prng:i,rand:r,internals:o}}();t.random=function(){return.5+2.3283064365386963e-10*this.rand()},e.isaac=t}(),function(){var t=function(){function t(){var t,n=4;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)t=new Int32Array(n),window.crypto.getRandomValues(t);else if("undefined"!=typeof window&&window.msCrypto&&window.msCrypto.getRandomValues)t=new Int32Array(n),window.msCrypto.getRandomValues(t);else{var i=Date.now(),r=i%10;e.isaac.prng(1+r),t=[];for(var o=0;n>o;o++)t.push(e.isaac.rand())}for(var a="",o=0;n>o;o++){var s=t[o];0>s&&(s=-1*s),a+=s.toString(16)}return a}function n(){return"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?!0:"undefined"!=typeof window&&window.msCrypto&&window.msCrypto.getRandomValues?!0:!1}function i(t){if(!r)for(var n=Date.now(),i=n+t,o=Date.now();i>o;){var a=o%5;e.isaac.prng(1+a),o=Date.now()}}var r=n();return{random:t,isWebCryptoAPI:r,advance:i}}(),n=100;"undefined"!=typeof test_random16byteHexAdvance&&(n=test_random16byteHexAdvance),t.advance(n),e.Random16byteHex=t}(),function(){function t(){"use strict";this.INIT=0,this.STEP_1=1,this.STEP_2=2,this.STEP_3=3,this.state=this.INIT,this.x=null,this.v=null,this.I=null,this.P=null,this.B=null,this.A=null,this.a=null,this.k=null,this.u=null,this.S=null,this.K=null,this.M1str=null,this.check=function(e,t){if(void 0===e||null===e||""===e||"0"===e)throw Error(t+" must not be null, empty or zero")},this.generateX=function(e,t,n){this.check(e,"salt"),this.check(t,"identity"),this.check(n,"password");var i=this.H(t+":"+n),r=e+i,o=this.H(r.toUpperCase());return this.x=this.fromHex(o).mod(this.N()),this.x},this.computeSessionKey=function(e,t,n,i,r){this.check(e,"k"),this.check(t,"x"),this.check(n,"u"),this.check(i,"a"),this.check(r,"B");var o=n.multiply(t).add(i),a=this.g().modPow(t,this.N()).multiply(e);return r.subtract(a).modPow(o,this.N())}}t.prototype.toHex=function(e){"use strict";return e.toString(16)},t.prototype.fromHex=function(t){"use strict";return new e.BigInteger(""+t,16)},t.prototype.getState=function(){"use strict";return this.state},t.prototype.getSessionKey=function(e){"use strict";return null===this.S?null:(this.SS=this.toHex(this.S),void 0!==e&&e===!1?this.SS:(null===this.K&&(this.K=this.H(this.SS)),this.K))},t.prototype.getUserID=function(){"use strict";return this.I},t.prototype.generateRandomSalt=function(t){"use strict";var n=null;n=e.Random16byteHex.random();var i=this.H(Date.now()+":"+t+":"+n);return i},t.prototype.generateVerifier=function(e,t,n){"use strict";var i=this.generateX(e,t,n);return this.v=this.g().modPow(i,this.N()),this.toHex(this.v)},t.prototype.step1=function(e,t){"use strict";if(this.check(e,"identity"),this.check(t,"password"),this.I=e,this.P=t,this.state!==this.INIT)throw Error("IllegalStateException not in state INIT");this.state=this.STEP_1},t.prototype.computeU=function(t,n){"use strict";this.check(t,"Astr"),this.check(n,"Bstr");var i=this.H(t+n),r=new e.BigInteger(""+i,16);if(e.BigInteger.ZERO.equals(r))throw Error("SRP6Exception bad shared public value 'u' as u==0");return r},t.prototype.step2=function(t,n){"use strict";if(this.check(t,"s"),this.check(n,"BB"),this.state!==this.STEP_1)throw Error("IllegalStateException not in state STEP_1");this.B=this.fromHex(n);var i=null;if(i=e.BigInteger.ZERO,this.B.mod(this.N()).equals(i))throw Error("SRP6Exception bad server public value 'B' as B == 0 (mod N)");var r=this.generateX(t,this.I,this.P),o=null,a=null;o=e.Random16byteHex.random(),a=e.Random16byteHex.random();var s=this.H(Date.now()+":"+this.I+":"+o+":"+a);this.a=this.fromHex(s),this.A=this.g().modPow(this.a,this.N()),this.check(this.A,"A"),this.u=this.computeU(this.A.toString(16),n),this.S=this.computeSessionKey(this.k,r,this.u,this.a,this.B),this.check(this.S,"S");var l=this.toHex(this.A);for(this.M1str=this.H(l+n+this.toHex(this.S)),this.check(this.M1str,"M1str");"0"===this.M1str.substring(0,1);)this.M1str=this.M1str.substring(1);return this.state=this.STEP_2,{A:l,M1:this.M1str}},t.prototype.step3=function(e){"use strict";if(this.check(e),this.state!==this.STEP_2)throw Error("IllegalStateException State violation: Session must be in STEP_2 state");for(var t=this.H(this.toHex(this.A)+this.M1str+this.toHex(this.S));"0"===t.substring(0,1);)t=t.substring(1);if(""+t!=""+e)throw Error("SRP6Exception Bad server credentials");return this.state=this.STEP_3,!0},e.SRPClient=t}()}),Ext.cmd.derive("BP.ux.data.SIMPLE",Ext.Base,{singleton:!0,setTicket:Ext.emptyFn,credentialsVerify:Ext.emptyFn,credentialsCaptchaVerify:Ext.emptyFn,init:function(e,t,n){var i,r,o,a=this;if(BP.ux.data.Authorization.getTicket=Ext.emptyFn,BP.ux.data.Authorization.getUserName=Ext.emptyFn,BP.ux.data.Authorization.getSessionID=Ext.emptyFn,e.scope){e.params.token&&(e.params.tk=e.params.token,delete e.params.token),i=BP.ux.data.Authorization.getAuthUrl(),r=a.stepOneParams(e.params),o=null;for(o in r)break;if(!o||!i)return void setTimeout(function(){BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3);Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 1"),Ext.Ajax.request({url:i+"/auth",method:"GET",timeout:1e4,async:!0,scope:a,cors:!0,useDefaultXhrHeader:!1,withCredentials:!1,params:r,success:Ext.pass(a.requestSuccessStepTwo,[e,t,n]),failure:Ext.pass(a.requestFailureAuthorization,[e,t,n])})}},requestSuccessStepTwo:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)){if(d=u.getCredentials(l,e.params),Ext.merge(e.params,d),d){o=BP.ux.data.Authorization.getAuthUrl(),a=u.stepTwoParams(d),s=null;for(s in a)break;return s&&o?(Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 2"),void Ext.Ajax.request({url:o+"/auth",method:"GET",timeout:1e4,async:!0,scope:u,withCredentials:!1,cors:!0,useDefaultXhrHeader:!1,params:a,success:Ext.pass(u.requestSuccessStepSettings,[e,d,t,n]),failure:Ext.pass(u.requestFailureAuthorization,[e,t,n])})):void setTimeout(function(){BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureAuthorization(e,t,n,i,r)}},requestSuccessStepSettings:function(e,t,n,i,r,o){var a,s=this;if(o=o||{},r=r||{},e.scope){if(200==r.status&&r.responseText){try{a=Ext.decode(r.responseText)}catch(l){a=null}if(Ext.isObject(a))return e.scope.attemptsAuth=1,BP.ux.data.Authorization.setResetSelectServer(!0),Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-success")),void setTimeout(function(){if(Ext.isFunction(n)){if(a.uName=e.params.username,a.authApiURLs=e.params.authApiURLs,a.authTicket=e.params.authTicket,a.readOnly=e.params.readOnly,a.settings=a,n.call(e.scope||{},a,r,o))return BP.ux.data.Authorization.getUserName=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.username:void 0},BP.ux.data.Authorization.getSessionID=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.sessionID:void 0},BP.ux.data.Authorization.getTicket=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.authTicket:void 0},BP.ux.data.Authorization.getSingle=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?BP.ux.data.SRP6.toSingle(e.params.authTicket,e.params.sessionID):void 0},!0;200==r.status&&(r.status=903),s.requestFailureAuthorization(e,n,i,r,o)}},1e3)}200==r.status&&(r.status=0),s.requestFailureAuthorization(e,n,i,r,o)}},stepOneParams:function(e){var t={};return e.tk?t={service:"sts_token",token:e.tk,putent_genus:1,version:BP.config("app.version")}:void 0},stepTwoParams:function(e){var t={};return e.sessionID?t={service:"settings",putent_genus:1,session_id:e.sessionID,login_name:e.username,ticket:e.authTicket,platform:"DDS3_BIO_WEB"}:t},requestFailureAuthorization:function(){BP.ux.data.Authorization.requestFailureAuthorization.apply(BP.ux.data.Authorization,arguments)},getCredentials:function(e){var t={};return e.login&&e.authTicket&&e.sid?t={authApiURLs:e.authApiURLs||[e.authApiURL],username:e.login,sessionID:e.sid,authTicket:e.authTicket,readOnly:e.readOnly}:void 0}},0,0,0,0,0,0,[BP.ux.data,"SIMPLE"],0),Ext.cmd.derive("BP.ux.data.RELOGIN",Ext.Base,{singleton:!0,setTicket:Ext.emptyFn,credentialsVerify:Ext.emptyFn,credentialsCaptchaVerify:Ext.emptyFn,init:function(e,t,n){var i,r,o,a=this;if(BP.ux.data.Authorization.getTicket=Ext.emptyFn,BP.ux.data.Authorization.getSingle=Ext.emptyFn,BP.ux.data.Authorization.getUserName=Ext.emptyFn,BP.ux.data.Authorization.getSessionID=Ext.emptyFn,BP.ux.data.Authorization.isAllowRelogin=Ext.emptyFn,e.scope){e.params.session_id&&(e.params.sessionID=e.params.session_id,delete e.params.session_id),i=BP.ux.data.Authorization.getAuthUrl(),r=a.stepOneParams(e.params),o=null;for(o in r)break;if(!o||!i)return void setTimeout(function(){BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3);Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 1"),Ext.Ajax.request({url:i+"/auth",method:"GET",timeout:1e4,async:!0,scope:a,cors:!0,useDefaultXhrHeader:!1,withCredentials:!1,params:r,success:Ext.pass(a.requestSuccessStepTwo,[e,t,n]),failure:Ext.pass(a.requestFailureAuthorization,[e,t,n])})}},requestSuccessStepTwo:function(e,t,n,i,r){var o,a,s,l,d,u=this;if(r=r||{},i=i||{},e.scope){if(200==i.status&&i.responseText){try{l=Ext.decode(i.responseText)}catch(c){l=null}if(Ext.isObject(l)){if(d=u.getCredentials(l,e.params),Ext.merge(e.params,d),d){o=BP.ux.data.Authorization.getAuthUrl(),a=u.stepTwoParams(e.params),s=null;for(s in a)break;return s&&o?(Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")+" 2"),void Ext.Ajax.request({url:o+"/auth",method:"GET",timeout:1e4,async:!0,scope:u,withCredentials:!1,cors:!0,useDefaultXhrHeader:!1,params:a,success:Ext.pass(u.requestSuccessStepSettings,[e,d,t,n]),failure:Ext.pass(u.requestFailureAuthorization,[e,t,n])})):void setTimeout(function(){BP.ux.data.Authorization.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)}i.status=8001}}200==i.status&&(i.status=0),u.requestFailureAuthorization(e,t,n,i,r)}},requestSuccessStepSettings:function(e,t,n,i,r,o){var a,s=this;if(o=o||{},r=r||{},e.scope){if(200==r.status&&r.responseText){try{a=Ext.decode(r.responseText)}catch(l){a=null}if(Ext.isObject(a))return e.scope.attemptsAuth=1,BP.ux.data.Authorization.setResetSelectServer(!0),Ext.select(".bp-login .x-mask-msg-text").setText(BP.translate("msg.auth-verify")),void setTimeout(function(){if(Ext.isFunction(n)){if(a.uName=e.params.username,a.authApiURLs=e.params.authApiURLs,a.authTicket=e.params.authTicket,a.readOnly=e.params.readOnly,a.settings=a,n.call(e.scope||{},a,r,o))return BP.ux.data.Authorization.getUserName=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.username:void 0},BP.ux.data.Authorization.getSessionID=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.sessionID:void 0},BP.ux.data.Authorization.getTicket=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?e.params.authTicket:void 0},BP.ux.data.Authorization.getSingle=function(){return Ext.isFunction(this.isAllowThis)&&this.isAllowThis()?BP.ux.data.SRP6.toSingle(e.params.authTicket,e.params.sessionID):void 0},!0;200==r.status&&(r.status=903),s.requestFailureAuthorization(e,n,i,r,o)}},1e3)}200==r.status&&(r.status=0),s.requestFailureAuthorization(e,n,i,r,o)}},stepOneParams:function(e){var t={};return e.sessionID&&e.login&&e.ticket?t={service:"relogin",platform:"DDS3_BIO_WEB",session_id:e.sessionID,login_name:e.login,ticket:e.ticket,putent_genus:1,version:BP.config("app.version")}:void 0},stepTwoParams:function(e){var t={};return e.sessionID&&e.authTicket?t={service:"settings",putent_genus:1,session_id:e.sessionID,login_name:e.username,ticket:e.authTicket,platform:"DDS3_BIO_WEB"}:t},requestFailureAuthorization:function(){BP.ux.data.Authorization.requestFailureAuthorization.apply(BP.ux.data.Authorization,arguments)},getCredentials:function(e){var t={};return e.authTicket?t={authApiURLs:e.authApiURLs||[e.authApiURL],authTicket:e.authTicket,readOnly:e.readOnly}:void 0}},0,0,0,0,0,0,[BP.ux.data,"RELOGIN"],0),Ext.cmd.derive("BP.ux.data.Authorization",Ext.Base,function(){var e,t,n,i,r,o=[];return r=!1,i=3,{singleton:!0,codeError:{801:"Wrong Login or Password",802:"Wrong Login, Password or Secure code",803:"Client Access Reject",804:"Client Access Denied",820:"Wrong Version",821:"Wrong Ticket Authorization",823:"Account Locked",830:"Origin not Allowed",903:"Service Unavailable",800:"Wrong Request",900:"System Error",907:"Authorization Service Temporarily Unavailable",829:"Too Many Requests",808:"Client Request Timeout",8e3:"Authorization Service Temporarily Unavailable",8001:"Error Processing Verification",8002:"Failed to initialize Transport",8003:"Failed to initialize Settings",8004:"Failed to initialize Log Server",8005:"No trading Instruments"},getTicket:Ext.emptyFn,getUserName:Ext.emptyFn,getSessionID:Ext.emptyFn,isAllowRelogin:Ext.emptyFn,initErrorMessages:function(){this.codeError={801:BP.translate("error.authorization-codeerror-801"),802:BP.translate("error.authorization-codeerror-802"),803:BP.translate("error.authorization-codeerror-803"),804:BP.translate("error.authorization-codeerror-804"),820:BP.translate("error.authorization-codeerror-820"),821:BP.translate("error.authorization-codeerror-821"),823:BP.translate("error.authorization-codeerror-823"),830:BP.translate("error.authorization-codeerror-830"),903:BP.translate("error.authorization-codeerror-903"),904:BP.translate("error.authorization-codeerror-904"),800:BP.translate("error.authorization-codeerror-800"),900:BP.translate("error.authorization-codeerror-900"),907:BP.translate("error.authorization-codeerror-907"),908:BP.translate("error.authorization-codeerror-908"),829:BP.translate("error.authorization-codeerror-829"),808:BP.translate("error.authorization-codeerror-808"),8e3:BP.translate("error.authorization-codeerror-8000"),8001:BP.translate("error.authorization-codeerror-8001"),8002:BP.translate("error.authorization-codeerror-8002"),8003:BP.translate("error.authorization-codeerror-8003"),8004:BP.translate("error.authorization-codeerror-8004")}},initCaptcha:function(e,t,n){var i,r,o,a=this;return BP.config("wl."+BP.whiteLabel+".enable")!==!0?void setTimeout(function(){a.showError({errorCode:804,scope:e.scope,cb:n})},1e3):(i=a.getAuthUrl())?(t=t||Ext.emptyFn,n=n||Ext.emptyFn,o=Ext.encode({id:"{0}",image:"{1}",time:"{2}",expires:"{3}"}),o=o.substring(1,o.length-1),o="'{'"+o+"'}'",r={callback:o},e.params=e.params||r,void Ext.Ajax.request({url:i+"/captcha",method:"POST",timeout:1e4,async:!0,scope:a,cors:!0,useDefaultXhrHeader:!1,withCredentials:!1,params:e.params,success:Ext.pass(a.requestSuccessCaptcha,[e,t,n]),failure:Ext.pass(a.requestFailureCaptcha,[e,t,n])})):void setTimeout(function(){a.showError({errorCode:903,scope:e.scope,cb:n})},1e3)},clearHeaderStatus:function(e){delete e.headerStatus,delete e.headerStatusText},prepareHeaderStatus:function(e,t){var n;t=t||{},e&&(t.status&&(e.headerStatus=t.status),t.statusText&&(e.headerStatusText=t.statusText),Ext.isFunction(t.getAllResponseHeaders)&&(n=t.getAllResponseHeaders()||{},n.statuscode&&(e.headerStatus=n.statuscode),n.statusmessage&&(e.headerStatusText=n.statusmessage)))},requestFailureCaptcha:function(e,t,n,r,o){var a=this;if(o=o||{},r=r||{},n=n||Ext.emptyFn,e.scope){if(e.scope.attemptsAuth=e.scope.attemptsAuth||1,e.scope.attemptsAuth==i&&(e.scope.attemptsAuth=0,a.selectServer()),r.status&&[404,500,503].indexOf(r.status)>-1&&e.scope.attemptsAuth<i)return++e.scope.attemptsAuth,void setTimeout(function(){Ext.Ajax.request(o)},1e3);if(r.status=a.getStatusReturn(r.status),!r.status)return e.scope.attemptsAuth<i?(++e.scope.attemptsAuth,void setTimeout(function(){a.initCaptcha(e,t,n)},1e3)):void a.showError({errorCode:903,scope:e.scope,cb:n});r.responseText,a.showError({errorCode:r.status,scope:e.scope,cb:n})}},requestFailureAuthorization:function(e,t,n,r,o){var a,s=this;if(o=o||{},r=r||{},n=n||Ext.emptyFn,e.scope){if(BP.ux.data.Authorization.prepareHeaderStatus(e,r),e.scope.attemptsAuth=e.scope.attemptsAuth||1,e.scope.attemptsAuth==i&&(e.scope.attemptsAuth=0,s.selectServer(),!s.getAuthUrl()))return void setTimeout(function(){s.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3);if(r.status&&[821].indexOf(r.status)>-1)return void setTimeout(function(){n.call(e.scope||{},{},o)},200);if(r.status&&[404,500,503].indexOf(r.status)>-1&&e.scope.attemptsAuth<i)return++e.scope.attemptsAuth,void setTimeout(function(){Ext.Ajax.request(o)},1e3);if(r.status=s.getStatusReturn(r.status),!r.status)return e.scope.attemptsAuth<i?(++e.scope.attemptsAuth,void setTimeout(function(){Ext.select(".bp-window-login .bp-mask-msg-text").setText("Failure"),s.initAuthorization(e,t,n)},1e3)):void s.showError({animAllow:!1,errorCode:903,headerStatus:e.headerStatus,headerStatusText:e.headerStatusText,scope:e.scope,cb:n});r.responseText,e.params.captchaId&&(a=s.errorCodeMap(r.status),"801"==a&&(r.status=802)),s.showError({animAllow:!1,errorCode:r.status,scope:e.scope,cb:n})}},requestFailureAuthorizationRe:function(e,t,n,r,o){var a,s,l=this;if(o=o||{},r=r||{},n=n||Ext.emptyFn,e.scope){if(s=function(){Ext.select("div.x-mask-msg.bp-login").remove()},BP.ux.data.Authorization.prepareHeaderStatus(e,r),e.scope.attemptsAuth=e.scope.attemptsAuth||1,e.scope.attemptsAuth==i&&(e.scope.attemptsAuth=0,l.selectServer(),!l.getAuthUrl()))return void setTimeout(function(){s(),l.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3);if(r.status&&[821].indexOf(r.status)>-1)return void setTimeout(function(){n.call(e.scope||{},{},o)},200);if(r.status&&[404,500,503].indexOf(r.status)>-1&&e.scope.attemptsAuth<i)return++e.scope.attemptsAuth,void setTimeout(function(){Ext.Ajax.request(o)},1e3);if(r.status=l.getStatusReturn(r.status),!r.status)return e.scope.attemptsAuth<i?(++e.scope.attemptsAuth,void setTimeout(function(){Ext.select(".bp-window-login .bp-mask-msg-text").setText("Failure"),l.initAuthorization(e,t,n)},1e3)):(s(),void l.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n}));r.responseText,e.params.captchaId&&(a=l.errorCodeMap(r.status),"801"==a&&(r.status=802)),l.showError({animAllow:!1,errorCode:r.status,scope:e.scope,cb:n})}},requestSuccessCaptcha:function(e,t,n,i,r){var o,a=this;if(r=r||{},i=i||{},e.scope){if(200==i.status&&i.responseText){try{o=Ext.decode(i.responseText)}catch(s){o=null}if(Ext.isObject(o)){if(e.scope.attemptsAuth=1,a.setResetSelectServer(!0),o.time&&o.expires&&(o.lifetime=parseInt(o.expires),o.lifetime-=parseInt(o.time),o.lifetime=Math.abs(o.lifetime),delete o.time,delete o.expires),o.lifetime=Ext.isNumber(o.lifetime)?o.lifetime:0,o.lifetime=o.lifetime||3e5,Ext.isFunction(t)){if(t.call(e.scope||{},o,r))return!0;200==i.status&&(i.status=903),a.requestFailureCaptcha(e,t,n,i,r)}return}}200==i.status&&(i.status=0),a.requestFailureCaptcha(e,t,n,i,r)}},initAuthorization:function(e,t,n){var i,r=this;if(BP.config("wl."+BP.whiteLabel+".enable")!==!0)return void setTimeout(function(){r.showError({errorCode:804,scope:e.scope,cb:n})},1e3);if(i=r.getAuthUrl(),!i)return void setTimeout(function(){r.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3);switch(t=t||Ext.emptyFn,n=n||Ext.emptyFn,e.params.sessionID=BP.Bootstrap.getSessionId(),e.params.login&&(e.params.username=Ext.clone(e.params.login)),e.authType){case"SRP6":case"SRP6a":setTimeout(function(){r.initSRP6Authorization(e,t,n)},1e3);break;case"relogin":setTimeout(function(){r.initReloginAuthorization(e,t,n)},1e3);break;case"SRP6Re":case"SRP6aRe":setTimeout(function(){r.initSRP6ReAuthorization(e,t,n)},1e3);break;case"SRP6To":case"SRP6aTo":setTimeout(function(){r.initSRP6TokenAuthorization(e,t,n)},1e3);break;default:setTimeout(function(){r.showError({animAllow:!1,errorCode:903,scope:e.scope,cb:n})},1e3)}},initSRP6Authorization:function(){BP.ux.data.SRP6.init.apply(BP.ux.data.SRP6,arguments)},initSRP6TokenAuthorization:function(){BP.ux.data.SRP6.initToken.apply(BP.ux.data.SRP6,arguments)},initSimpleAuthorization:function(){BP.ux.data.SIMPLE.init.apply(BP.ux.data.SIMPLE,arguments)},initReloginAuthorization:function(){BP.ux.data.RELOGIN.init.apply(BP.ux.data.RELOGIN,arguments)},initSRP6ReAuthorization:function(){BP.ux.data.SRP6.initRe.apply(BP.ux.data.SRP6,arguments)},getNewTicketAuthorization:function(){BP.ux.data.SRP6.initSts.apply(BP.ux.data.SRP6,arguments)},doRelogin:function(){},doRenew:function(){},doReadSettings:function(){BP.ux.data.SRP6.initReadSettings.apply(BP.ux.data.SRP6,arguments)},setServers:function(){o=Ext.clone(BP.config("authorization.api")),this.selectServer()},getAuthUrl:function(){return n},setResetSelectServer:function(e){t=e},selectServer:function(){var i,a;return o&&o.length?t===!0?(e=this.getAuthUrl(),this.setResetSelectServer(!1),e==o[0]?(e=null,delete e,void(n=o[1]||null)):void(n=o[0]||null)):(i=this.getAuthUrl(),i||r===!0?(a=o.indexOf(i),e==i?(delete e,void(n=o[a+2]||null)):void(n=o[a+1]||null)):(r=!0,void(n=o[0]||null))):void 0},showWarning:function(e){var t,n,i,r,o=this;e=e||{},n=e.title||"Warning",t=e.msg||this.getErrorByCode(e.errorCode),i=void 0===e.animAllow?!0:e.animAllow,Ext.getBody().unmask(),Ext.isFunction(e.cb)&&(e.scope.isWarning=!0,e.cb.call(e.scope||{},e)),r={message:t,type:"authorization"},e.action&&(r.action=e.action),e.errorCode&&(r.errorCode=e.errorCode),e.headerStatus&&(r.headerStatus=e.headerStatus),e.headerStatusText&&(r.headerStatusText=e.headerStatusText),BP.getApplication().getController("LoggerManager").onMessage(r),BP.Msg.show({title:n,msg:t,action:"warning",resizable:!1,animAllow:i,animHideAllow:!0,animAllowWithoutMask:!0,allowKeyboardEvent:!0,hideable:!1,closable:!1,proxyDrag:!1,draggable:!1,buttonText:{ok:BP.translate("msg.ok")},events:{browserwindowresize:o.onBrowserWindowResizeMsg},fn:function(t,n,i,r){var o,a,s;if(r.hide(),e.scope)for(o=e.scope.query("textfield, hiddenfield"),s=o.length,a=0;s>a;a++)if(!o[a].disabled&&!o[a].hidden&&!o[a].isValid()){e.scope.fieldData={},o[a].focus(!1,50);break}},icon:BP.MessageBox.WARNING})},showError:function(e){var t,n,i,r,o=this;return e=e||{},o.isWarning(e.errorCode)?void o.showWarning(e):(n=e.title||"Error",t=e.msg||this.getErrorByCode(e.errorCode),i=void 0===e.animAllow?!0:e.animAllow,Ext.getBody().unmask(),Ext.isFunction(e.cb)&&e.cb.call(e.scope||{},e),r={message:t,type:"authorization"},e.errorCode&&(r.errorCode=e.errorCode),e.headerStatus&&(r.headerStatus=e.headerStatus),e.headerStatusText&&(r.headerStatusText=e.headerStatusText),BP.getApplication().getController("LoggerManager").onMessage(r),void BP.Msg.show({title:n,msg:t,action:"error",resizable:!1,animAllow:i,hideable:!1,closable:!1,proxyDrag:!1,draggable:!1,buttonText:{ok:BP.translate("msg.reload")},events:{browserwindowresize:o.onBrowserWindowResizeMsg},fn:function(e,t,n,i){i.el.fadeOut({remove:!0,duration:100,easing:"easeOut",callback:function(){document.location.reload()}})},icon:BP.MessageBox.ERROR}))},isWarning:function(e){return e=this.errorCodeMap(e),[801,802].indexOf(e)>-1},errorCodeMap:function(e){switch(e){case 401:case 801:case 10401:e=801;break;case 420:case 820:case 10420:e=820;break;case 421:case 821:case 10421:e=821;break;case 423:case 823:case 10423:e=823;break;case 430:case 830:case 10430:e=830;break;case 503:case 903:case 10503:e=903;break;case 400:case 800:case 10400:e=800;break;case 500:case 900:case 10500:e=900;break;case 429:case 829:case 10429:e=829;break;case 408:case 808:case 10408:e=808}return e},getErrorByCode:function(e){var t;return e=this.errorCodeMap(e),t=e?this.codeError[e]:"",t&&(t=e+": "+t),
t||(t=this.codeError[8e3]),t},onStopAnimation:function(){document.location.reload()},onBrowserWindowResizeMsg:function(){this.center()},getStatusReturn:function(e){return[403,404,500,503].indexOf(e)>-1?0:e},checkConnectionWakeup:function(e){var t,n=this;t=function(){Ext.Ajax.request({url:BP.Bootstrap.configUrl,async:!1,timeout:3e3,success:function(){clearInterval(n.timerCheckConnection),delete n.timerCheckConnection,Ext.isFunction(e)&&(e(),e=Ext.emptyFn)},failure:Ext.emptyFn})},n.timerCheckConnection=setInterval(t,5e3),t()},getDeviceId:function(e){var t;return e=e||BP.Bootstrap.platform.parse(window.navigator.userAgent),t=""+e.os+" "+e.name+" "+e.version,BP.ux.crypto.MD5.get(t,!1,!0)},getBrowserName:function(e){return e=e||BP.Bootstrap.platform.parse(window.navigator.userAgent),e.name+" "+e.version+" "+e.layout},getOSName:function(e){return e=e||BP.Bootstrap.platform.parse(window.navigator.userAgent),""+e.os}}},0,0,0,0,0,0,[BP.ux.data,"Authorization"],0),Ext.cmd.derive("BP.logging.ALS",Ext.Base,function(){var e,t,n,i,r,o,a,s,l,d,u,c,h=[];return i="userActivity",l=3,o=6e4,d=!1,r=!1,c=!1,{constructor:function(){this.allowThis=!0,this.mixins.observable.constructor.call(this),this.on("send",this.send,this)},isAllowThis:function(){return!!this.allowThis},setServers:function(e){e&&e[i]&&(h=Ext.clone(e[i]),this.selectServer())},getTimestamp:function(){return n||(new Date).getTime()},getApiUrl:function(){return e},setResetSelectServer:function(e){s=e},getAttemptsConnectMax:function(){return l},selectServer:function(){var n,i;return h&&h.length?s===!0?(t=this.getApiUrl(),this.setResetSelectServer(!1),t==h[0]?(t=null,delete t,void(e=h[1]||null)):void(e=h[0]||null)):(n=this.getApiUrl(),n||d?(i=h.indexOf(n),0>i?void(e=null):t==n?(delete t,void(e=h[i+2]||null)):void(e=h[i+1]||null)):(d=!0,void(e=h[0]||null))):void 0},init:function(e){var t=this;t.init=Ext.emptyFn,t.clearTimer(),r=!0,t.setServers(e.urls),u={SERVER_TYPE:"bp",SERVER_NAME:BP.config("app.version")},a=setInterval(function(){t.send()},o),t.send()},send:function(e){var t,n,i,o=this;if(!r)return void(c=!1);if(o.attemptsConnect>l)return void(c=!1);if(!c){if(c=!0,n=this.getMessages()||[],!n.length)return void(c=!1);if(t=o.getApiUrl(),!t)return void setTimeout(function(){o.clearTimer(),BP.logging.Logger.showError({animAllow:!1,errorCode:300,scope:o,cb:Ext.pass(o.requestFailureLogger,[n,o])})},1e3);i=o.getRequestParams(),i.DATA=Ext.encode(n),Ext.Ajax.request({url:t,method:"POST",timeout:3e4,cors:!0,useDefaultXhrHeader:!1,async:e===!0?!1:!0,scope:o,withCredentials:!1,params:i,success:Ext.pass(o.requestSuccessLogger,[n,o]),failure:Ext.pass(o.requestFailureLogger,[n,o])})}},clearTimer:function(){clearInterval(a)},getRequestParams:function(){return{SERVER_TYPE:u.SERVER_TYPE,SERVER_NAME:u.SERVER_NAME}},doMapMessagesParams:function(){},checkOrigParams:function(e){e.sessionId=u.SESSION_ID,e.origSessionId==u.SESSION_ID&&delete e.origSessionId,e.origVersion==u.SERVER_NAME&&delete e.origVersion,e.origLogin==u.LOGIN&&delete e.origLogin},getOrigLogin:function(){return u?u.LOGIN:""},getMessages:function(){var e,t,n,i,r,o=[];if(u.SESSION_ID=BP.ux.data.Authorization.getSessionID.call(this),u.LOGIN=BP.ux.data.Authorization.getUserName.call(this),n=BP.model.Account,n&&(u.USER_ID=n.get("accountId")),r=BP.logging.Logger.getMessages()||[],i=r.length,!i)return o;for(e=0;i>e;e++)t=r[e],t&&(t=Ext.clone(t.data),BP.logging.Logger.removeEmptyParams(t),this.doMapMessagesParams(t),this.checkOrigParams(t),t.type&&(t.BUSINESS_TYPE=this.getTypeMessage(t.type),delete t.type),t.message&&(t.MSG=t.message,delete t.message),t.id&&(t.MESSAGE_ID=t.id,delete t.id),u.LOGIN&&(t.LOGIN=u.LOGIN),u.USER_ID&&(t.USER_ID=u.USER_ID),u.SESSION_ID&&(t.SESSION_ID=u.SESSION_ID),u.SERVER_NAME&&(t.PLATFORM_VERSION=u.SERVER_NAME),t.platformTime&&(t.PLATFORM_TIMESTAMP=t.platformTime),o.push(t));return o},getTypeMessage:function(e){var t;return t={message:"activity_log",trade:"trade_log",conditions_change:"trade_log",transport:"connection_log",authorization:"connection_log",notification:"trade_log",settings:"activity_log",instruments:"activity_log",error:"activity_log",warning:"activity_log",activity:"activity_log",reject:"trade_log",logger:"activity_log"},t[e]||e},requestSuccessLogger:function(){BP.logging.Logger.requestSuccessLogger.apply(BP.logging.Logger,arguments),c=!1},requestFailureLogger:function(){BP.logging.Logger.requestFailureLogger.apply(BP.logging.Logger,arguments),c=!1},onFailure:function(e){var t=this;return e?Ext.isFunction(e.cb)?(t.attemptsConnect=t.attemptsConnect||1,t.attemptsConnect==l&&(t.attemptsConnect=0,t.selectServer()),t.attemptsConnect<l?(++t.attemptsConnect,void setTimeout(function(){e.cb.call(t)},1e3)):(t.isFatalError=!0,void setTimeout(function(){BP.logging.Logger.showError({errorCode:e.errorCode||300,cb:t.onFatalError})},1e3))):(t.isFatalError=!0,void setTimeout(function(){BP.logging.Logger.showError({errorCode:e.errorCode||300,cb:t.onFatalError})},1e3)):(t.isFatalError=!0,void setTimeout(function(){BP.logging.Logger.showError({errorCode:300,cb:t.onFatalError})},1e3))},onResetSelectServer:function(){this.attemptsConnect=1,this.flagShowWarning=!1,this.setResetSelectServer(!0)},checkIdInError:function(e,t){var n,i;if(i=e.length,!i)return!1;for(n=0;i>n;n++)if(e[n]&&e[n].message_id==t)return 3==e[n].code?!1:!0;return!1}}},1,0,0,0,["logging.als"],[["observable",Ext.util.Observable]],[BP.logging,"ALS"],0),Ext.cmd.derive("BP.settings.Logger",Ext.data.Model,{proxy:{type:"private",id:"BP"},idProperty:"key",fields:[{name:"key",type:"string",defaultValue:""},{name:"textMessages",type:"string",defaultValue:""}],set:function(){var e,t=this;return e=Ext.data.Model.prototype.set.apply(this,arguments),t.phantom=!1,t.save(),e||null},setDefault:function(e,t){var n=this,i=n.get(e);return i?null:n.set(e,t)},dataRestore:function(e){this.data=e.data},load:function(e){var t=this.getId();e=Ext.apply({},e),e=Ext.applyIf(e,{action:"read",id:t});var n,i=new Ext.data.Operation(e),r=e.scope||this,o=e.success||this.dataRestore;n=function(n){var i=null,a=n.wasSuccessful();a?(i=n.getRecords()[0],i.hasId()||i.setId(t),Ext.callback(o,r,[i,n])):Ext.callback(e.failure,r,[i,n]),Ext.callback(e.callback,r,[i,n,a])},this.getProxy().read(i,n,this)}},0,0,0,0,0,0,[BP.settings,"Logger"],0),Ext.cmd.derive("BP.logging.Logger",Ext.Base,{singleton:!0,codeError:{300:"Activity Log Server Temporarily Unavailable",301:"Not all logs are stored. Logging server is Temporarily Unavailable"},init:function(e,t){var n;switch(t=t||{},e.loggerType){case"ALS":return n=Ext.create("logging.als"),BP.getLogger=function(){return n},!0}return t.status=8004,!1},requestFailureLogger:function(e,t,n){var i,r,o,a,s,l=[];if(t.attemptsConnect=t.attemptsConnect||1,!t.flagShowWarning&&t.attemptsConnect>=t.getAttemptsConnectMax())return t.flagShowWarning=!0,void this.showWarning({errorCode:301,animAllow:!0});if(200==n.status&&n.responseText){try{i=Ext.decode(n.responseText)}catch(d){i=null}if(Ext.isObject(i)&&"OK"!=i.message&&i.errors)for(r={type:"logger"},l.push(i.message),Ext.isArray(i.errors)&&(s=i.errors.length,l.push("Error Count: "+s),i.errors[s-1]&&(i.errors[s-1].code&&l.push("Last Error Code: "+i.errors[s-1].code),i.errors[s-1].error&&l.push("Last Error Message: "+i.errors[s-1].error))),l.length&&(r.message=l.join("\n")),BP.app.getController("LoggerManager").onMessage(r),o=e.length,a=0;o>a;a++)e[a]&&(t.checkIdInError(i.errors,e[a].MESSAGE_ID)||BP.app.getController("LoggerManager").doRemoveMessage(e[a].MESSAGE_ID))}++t.attemptsConnect},requestSuccessLogger:function(e,t,n,i){var r,o,a,s=this;if(i=i||{},n=n||{},200==n.status&&n.responseText){try{r=Ext.decode(n.responseText)}catch(l){r=null}if(Ext.isObject(r)&&"OK"==r.message&&!r.errors){for(t.onResetSelectServer(),o=e.length,a=0;o>a;a++)e[a]&&BP.app.getController("LoggerManager").doRemoveMessage(e[a].MESSAGE_ID);return}}s.requestFailureLogger(e,t,n,i)},getMessages:function(e){return BP.app.getController("LoggerManager").getAllMessage(e)},removeEmptyParams:function(e){var t;for(t in e)void 0===e[t]&&delete e[t],-1==e[t]&&delete e[t],""==e[t]&&delete e[t]},showWarning:function(e){var t,n,i,r,o;e=e||{},n="test",t=e.msg||this.getErrorByCode(e.errorCode),i=void 0===e.animAllow?!0:e.animAllow,o=this.codeError[e.errorCode]||this.codeError[300],o&&BP.app.getController("MessageManager").addUserMessage(o),Ext.getBody().unmask(),r={message:t,type:"logger"},e.errorCode&&(r.errorCode=e.errorCode),e.headerStatus&&(r.headerStatus=e.headerStatus),e.headerStatusText&&(r.headerStatusText=e.headerStatusText),BP.app.getController("LoggerManager").onMessage(r)},showError:function(e){var t,n,i,r,o=this;e=e||{},n="test",t=e.msg||this.getErrorByCode(e.errorCode),i=void 0===e.animAllow?!0:e.animAllow,Ext.isFunction(e.cb)&&e.cb.call(this),r={message:t,type:"logger"},e.errorCode&&(r.errorCode=e.errorCode),e.headerStatus&&(r.headerStatus=e.headerStatus),e.headerStatusText&&(r.headerStatusText=e.headerStatusText),BP.app.getController("LoggerManager").onMessage(r),BP.Msg.show({title:n,msg:t,action:"error",resizable:!1,animAllow:i,hideable:!1,closable:!1,proxyDrag:!1,draggable:!1,buttonText:{ok:"reload"},events:{browserwindowresize:o.onBrowserWindowResizeMsg},fn:function(e,t,n,i){BP.app.getController("LoggerManager").onMessage({message:"Reload initialized by User",type:"logger"}),i.el.fadeOut({remove:!0,duration:100,easing:"easeOut",callback:function(){Ext.getBody().mask("Reload","bp-login",null,!0),Ext.select(".x-mask-msg-inner").on({animationiteration:o.onStopAnimation,webkitAnimationIteration:o.onStopAnimation,oanimationiteration:o.onStopAnimation,MSAnimationIteration:o.onStopAnimation}),Ext.select("div.x-mask-msg-bg").remove()}})},icon:BP.MessageBox.ERROR})},getErrorByCode:function(e){var t;return t=e?this.codeError[e]:"",t&&(t=e+": "+t),t||(t=this.codeError[300]),t},getErrorIsByCode:function(e){return e?this.codeError[e]:void 0},onStopAnimation:function(){document.location.reload()},onBrowserWindowResizeMsg:function(){this.center()},serializeMessages:function(){var e,t,n,i,r,o,a,s,l,d=[];if(this.localSettings){if(o=100,i=this.getMessages("DESC")||[],r=i.length,!r)return d;for(s=Ext.isFunction(BP.getLogger)?BP.getLogger().getOrigLogin():"",s||(l=Ext.ComponentQuery.query("dds-login dds-login-form textfield[name=login]")[0],l&&(s=l.getValue())),e=0;r>e;e++)if(t=i[e]){if(t=Ext.clone(t.data),this.removeEmptyParams(t),d.length>o-1){a={message:"All messages "+r+", but serialized last "+o,type:"error"},s&&(a.origLogin=s),BP.app.getController("LoggerManager").doRemapData(a),d.push(a);break}t.origLogin=t.origLogin||s,d.push(t)}n=Ext.encode(d),this.localSettings.set("textMessages",n),t=n=d=null}},serializeNotAuthMessages:function(){var e,t,n,i,r,o,a,s,l,d=[];if(this.localSettingsNotAuth){if(o=50,i=this.getMessages("DESC")||[],r=i.length,!r)return d;for(s=Ext.isFunction(BP.getLogger)?BP.getLogger().getOrigLogin():"",s||(l=Ext.ComponentQuery.query("dds-login dds-login-form textfield[name=login]")[0],l&&(s=l.getValue())),e=0;r>e;e++)if(t=i[e]){if(t=Ext.clone(t.data),this.removeEmptyParams(t),d.length>o-1){a={message:"All messages "+r+", but serialized last "+o,type:"error"},s&&(a.origLogin=s),BP.app.getController("LoggerManager").doRemapData(a),d.push(a);break}t.origLogin=t.origLogin||s,d.push(t)}n=Ext.encode(d),this.localSettingsNotAuth.set("textMessages",n),t=n=d=null}},unserializeMessages:function(e){var t;e&&(this.localSettings||(this.localSettings=Ext.create("BP.settings.Logger",{key:e}),this.localSettings.load()),t=Ext.decode(this.localSettings.get("textMessages"),!0),BP.app.getController("LoggerManager").doRestore(t),this.clearSerializeMessages())},unserializeNotAuthMessages:function(e){var t;e&&(this.localSettingsNotAuth||(this.localSettingsNotAuth=Ext.create("BP.settings.Logger",{key:e}),this.localSettingsNotAuth.load()),t=Ext.decode(this.localSettingsNotAuth.get("textMessages"),!0),BP.getApplication().getController("LoggerManager").doRestore(t),this.clearNotAuthSerializeMessages())},clearSerializeMessages:function(){this.localSettings&&this.localSettings.set("textMessages","[]")},clearNotAuthSerializeMessages:function(){this.localSettingsNotAuth&&this.localSettingsNotAuth.set("textMessages","[]")}},0,0,0,0,0,0,[BP.logging,"Logger"],0),Ext.cmd.derive("BP.ux.crypto.MD5",Ext.Base,{singleton:!0},0,0,0,0,0,0,[BP.ux.crypto,"MD5"],function(e){!function(){var t,n;t={},n={safe_add:function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},bit_rol:function(e,t){return e<<t|e>>>32-t},md5_cmn:function(e,t,i,r,o,a){return n.safe_add(n.bit_rol(n.safe_add(n.safe_add(t,e),n.safe_add(r,a)),o),i)},md5_ff:function(e,t,i,r,o,a,s){return n.md5_cmn(t&i|~t&r,e,t,o,a,s)},md5_gg:function(e,t,i,r,o,a,s){return n.md5_cmn(t&r|i&~r,e,t,o,a,s)},md5_hh:function(e,t,i,r,o,a,s){return n.md5_cmn(t^i^r,e,t,o,a,s)},md5_ii:function(e,t,i,r,o,a,s){return n.md5_cmn(i^(t|~r),e,t,o,a,s)},core_md5:function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,r=-271733879,o=-1732584194,a=271733878,s=0;s<e.length;s+=16){var l=i,d=r,u=o,c=a;i=n.md5_ff(i,r,o,a,e[s+0],7,-680876936),a=n.md5_ff(a,i,r,o,e[s+1],12,-389564586),o=n.md5_ff(o,a,i,r,e[s+2],17,606105819),r=n.md5_ff(r,o,a,i,e[s+3],22,-1044525330),i=n.md5_ff(i,r,o,a,e[s+4],7,-176418897),a=n.md5_ff(a,i,r,o,e[s+5],12,1200080426),o=n.md5_ff(o,a,i,r,e[s+6],17,-1473231341),r=n.md5_ff(r,o,a,i,e[s+7],22,-45705983),i=n.md5_ff(i,r,o,a,e[s+8],7,1770035416),a=n.md5_ff(a,i,r,o,e[s+9],12,-1958414417),o=n.md5_ff(o,a,i,r,e[s+10],17,-42063),r=n.md5_ff(r,o,a,i,e[s+11],22,-1990404162),i=n.md5_ff(i,r,o,a,e[s+12],7,1804603682),a=n.md5_ff(a,i,r,o,e[s+13],12,-40341101),o=n.md5_ff(o,a,i,r,e[s+14],17,-1502002290),r=n.md5_ff(r,o,a,i,e[s+15],22,1236535329),i=n.md5_gg(i,r,o,a,e[s+1],5,-165796510),a=n.md5_gg(a,i,r,o,e[s+6],9,-1069501632),o=n.md5_gg(o,a,i,r,e[s+11],14,643717713),r=n.md5_gg(r,o,a,i,e[s+0],20,-373897302),i=n.md5_gg(i,r,o,a,e[s+5],5,-701558691),a=n.md5_gg(a,i,r,o,e[s+10],9,38016083),o=n.md5_gg(o,a,i,r,e[s+15],14,-660478335),r=n.md5_gg(r,o,a,i,e[s+4],20,-405537848),i=n.md5_gg(i,r,o,a,e[s+9],5,568446438),a=n.md5_gg(a,i,r,o,e[s+14],9,-1019803690),o=n.md5_gg(o,a,i,r,e[s+3],14,-187363961),r=n.md5_gg(r,o,a,i,e[s+8],20,1163531501),i=n.md5_gg(i,r,o,a,e[s+13],5,-1444681467),a=n.md5_gg(a,i,r,o,e[s+2],9,-51403784),o=n.md5_gg(o,a,i,r,e[s+7],14,1735328473),r=n.md5_gg(r,o,a,i,e[s+12],20,-1926607734),i=n.md5_hh(i,r,o,a,e[s+5],4,-378558),a=n.md5_hh(a,i,r,o,e[s+8],11,-2022574463),o=n.md5_hh(o,a,i,r,e[s+11],16,1839030562),r=n.md5_hh(r,o,a,i,e[s+14],23,-35309556),i=n.md5_hh(i,r,o,a,e[s+1],4,-1530992060),a=n.md5_hh(a,i,r,o,e[s+4],11,1272893353),o=n.md5_hh(o,a,i,r,e[s+7],16,-155497632),r=n.md5_hh(r,o,a,i,e[s+10],23,-1094730640),i=n.md5_hh(i,r,o,a,e[s+13],4,681279174),a=n.md5_hh(a,i,r,o,e[s+0],11,-358537222),o=n.md5_hh(o,a,i,r,e[s+3],16,-722521979),r=n.md5_hh(r,o,a,i,e[s+6],23,76029189),i=n.md5_hh(i,r,o,a,e[s+9],4,-640364487),a=n.md5_hh(a,i,r,o,e[s+12],11,-421815835),o=n.md5_hh(o,a,i,r,e[s+15],16,530742520),r=n.md5_hh(r,o,a,i,e[s+2],23,-995338651),i=n.md5_ii(i,r,o,a,e[s+0],6,-198630844),a=n.md5_ii(a,i,r,o,e[s+7],10,1126891415),o=n.md5_ii(o,a,i,r,e[s+14],15,-1416354905),r=n.md5_ii(r,o,a,i,e[s+5],21,-57434055),i=n.md5_ii(i,r,o,a,e[s+12],6,1700485571),a=n.md5_ii(a,i,r,o,e[s+3],10,-1894986606),o=n.md5_ii(o,a,i,r,e[s+10],15,-1051523),r=n.md5_ii(r,o,a,i,e[s+1],21,-2054922799),i=n.md5_ii(i,r,o,a,e[s+8],6,1873313359),a=n.md5_ii(a,i,r,o,e[s+15],10,-30611744),o=n.md5_ii(o,a,i,r,e[s+6],15,-1560198380),r=n.md5_ii(r,o,a,i,e[s+13],21,1309151649),i=n.md5_ii(i,r,o,a,e[s+4],6,-145523070),a=n.md5_ii(a,i,r,o,e[s+11],10,-1120210379),o=n.md5_ii(o,a,i,r,e[s+2],15,718787259),r=n.md5_ii(r,o,a,i,e[s+9],21,-343485551),i=n.safe_add(i,l),r=n.safe_add(r,d),o=n.safe_add(o,u),a=n.safe_add(a,c)}return[i,r,o,a]},str2binl:function(e){for(var n=[],i=(1<<t.chrsz)-1,r=0;r<e.length*t.chrsz;r+=t.chrsz)n[r>>5]|=(e.charCodeAt(r/t.chrsz)&i)<<r%32;return n},binl2str:function(e){for(var n="",i=(1<<t.chrsz)-1,r=0;r<32*e.length;r+=t.chrsz)n+=String.fromCharCode(e[r>>5]>>>r%32&i);return n},binl2hex:function(e){for(var n=t.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",r=0;r<4*e.length;r++)i+=n.charAt(e[r>>2]>>r%4*8+4&15)+n.charAt(e[r>>2]>>r%4*8&15);return i}},e.get=function(e,i,r,o){return t.raw=i||!1,t.hexcase=r||!1,t.chrsz=o||8,t.raw?n.binl2str(n.core_md5(n.str2binl(e),e.length*t.chrsz)):n.binl2hex(n.core_md5(n.str2binl(e),e.length*t.chrsz))}}()}),Ext.cmd.derive("BP.ux.crypto.Crypto",Ext.Base,{alternateClassName:["Ext.Cryptography","Ext.crypto"],singleton:!0,compatibility:"4.2",charSets:{ISO_8859_1:"ISO-8859-1",US_ASCII:"US-ASCII",UTF_16:"UTF-16",UTF_16BE:"UTF-16BE",UTF_16LE:"UTF-16LE",UTF_8:"UTF-8"},digests:{MD2:"MD2",MD5:"MD5",SHA_1:"SHA-1",SHA_256:"SHA-256",SHA_384:"SHA-384",SHA_512:"SHA-512"},DEFAULT_BLOCKSIZE:16,MIME_CHUNK_SIZE:76,PEM_CHUNK_SIZE:64,DEFAULT_BUFFER_SIZE:8192,isPrime:function(e){var t,n=Math.sqrt(e);for(t=2;n>=t;t++)if(!(e%t))return!1;return!0},fractionalPart:function(e){return 4294967296*(e-(0|e))|0},isWhiteSpace:function(e){switch(e){case" ":case"\n":case"\r":case"	":case 12:case 8232:case 8233:return!0;default:return!1}},reverse:function(e){return Array.from(e).reverse().join("")}},0,0,0,0,["crypto.crypto"],0,[BP.ux.crypto,"Crypto",Ext,"Cryptography",Ext,"crypto"],0),Ext.cmd.derive("BP.ux.crypto.Base64",Ext.Base,{alternateClassName:["Ext.Crypto.base64"],singleton:!0,EOF:-1,BITS_PER_ENCODED_BYTE:6,BYTES_PER_UNENCODED_BLOCK:3,BYTES_PER_ENCODED_BLOCK:4,CHUNK_SEPARATOR:["\r","\n",8232,8233],PAD_DEFAULT:"=",PAD:"=",STANDARD_ENCODE_TABLE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",URL_SAFE_ENCODE_TABLE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",DECODE_TABLE:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,62,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],MASK_6BITS:63,lineLength:0,chunkSeparatorLength:1,encodeTable:"",keyMap:"",constructor:function(e){e=e||{},Ext.apply(this,e),this.encodeTable=e.encodeTable?e.encodeTable:this.STANDARD_ENCODE_TABLE,this.setKeyMap(this.encodeTable)},setKeyMap:function(e){this.keyMap=e+this.PAD},isURLsafe:function(){return this.encodeTable===this.URL_SAFE_ENCODE_TABLE},encode:function(e){var t,n,i,r,o,a,s=this,l="",d="",u="",c=0;for(input=s._utf8_encode(e),t=input.length;t>c;)n=input.charCodeAt(c++),i=input.charCodeAt(c++),l=input.charCodeAt(c++),r=n>>2,o=(n&s.BYTES_PER_UNENCODED_BLOCK)<<s.BYTES_PER_ENCODED_BLOCK|i>>s.BYTES_PER_ENCODED_BLOCK,a=(15&i)<<2|l>>s.BITS_PER_ENCODED_BYTE,d=l&s.MASK_6BITS,isNaN(i)?a=d=s.MASK_6BITS+1:isNaN(l)&&(d=s.MASK_6BITS+1),u+=s.keyMap.charAt(r)+s.keyMap.charAt(o)+s.keyMap.charAt(a)+s.keyMap.charAt(d),n=i=l="",r=o=a=d="";return u},decode:function(e){var t,n,i,r,o,a,s=this,l="",d="",u="",c=0;for(s.isURLsafe()?(t=/[^A-Za-z0-9\-\_\=]/g,t.exec(e),input=e.replace(t,"")):(t=/[^A-Za-z0-9\+\/\=]/g,t.exec(e),input=e.replace(t,""));c<input.length;)r=s.keyMap.indexOf(input.charAt(c++)),o=s.keyMap.indexOf(input.charAt(c++)),a=s.keyMap.indexOf(input.charAt(c++)),d=s.keyMap.indexOf(input.charAt(c++)),n=r<<2|o>>s.BYTES_PER_ENCODED_BLOCK,i=(15&o)<<s.BYTES_PER_ENCODED_BLOCK|a>>2,l=(a&s.BYTES_PER_UNENCODED_BLOCK)<<s.BITS_PER_ENCODED_BYTE|d,u+=String.fromCharCode(n),a!=s.MASK_6BITS+1&&(u+=String.fromCharCode(i)),d!=s.MASK_6BITS+1&&(u+=String.fromCharCode(l)),n=i=l="",r=o=a=d="";return s._utf8_decode(u)},isBase64:function(e){return e==this.PAD_DEFAULT||e>=0&&e<this.DECODE_TABLE.length&&-1!=this.DECODE_TABLE[e]},getRandomSalt:function(e){var t,n=1,i="";for(n=1;e>=n;n++)t=Ext.Number.randomInt(0,this.keyMap.length),i+=this.keyMap.charAt(t);return i},arrayToBase64:function(e){for(var t,n,i=0,r="",o=e.length*this.BYTES_PER_ENCODED_BLOCK;o>i;)t=i,n=(e[t>>2]>>(this.BYTES_PER_UNENCODED_BLOCK-(t&this.BYTES_PER_UNENCODED_BLOCK)<<this.BYTES_PER_UNENCODED_BLOCK)&255)<<16,t++,n|=(e[t>>2]>>(this.BYTES_PER_UNENCODED_BLOCK-(t&this.BYTES_PER_UNENCODED_BLOCK)<<this.BYTES_PER_UNENCODED_BLOCK)&255)<<8,t++,n|=e[t>>2]>>(this.BYTES_PER_UNENCODED_BLOCK-(t&this.BYTES_PER_UNENCODED_BLOCK)<<this.BYTES_PER_UNENCODED_BLOCK)&255,r+=this.keyMap[n>>18&this.MASK_6BITS],r+=this.keyMap[n>>12&this.MASK_6BITS],i++,r+=i>=o?this.PAD:this.keyMap[n>>this.BITS_PER_ENCODED_BYTE&this.MASK_6BITS],i++,r+=i>=o?this.PAD:this.keyMap[n&this.MASK_6BITS],i++;return r},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="",n=0,i=e.length;for(n=0;i>n;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>this.BITS_PER_ENCODED_BYTE|192),t+=String.fromCharCode(r&this.MASK_6BITS|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>this.BITS_PER_ENCODED_BYTE&63|128),t+=String.fromCharCode(r&this.MASK_6BITS|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=0,r=0,o=0,a=e.length;a>n;)i=e.charCodeAt(n),128>i?(t+=String.fromCharCode(i),n++):i>191&&224>i?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<this.BITS_PER_ENCODED_BYTE|o&this.MASK_6BITS),n+=2):(o=e.charCodeAt(n+1),r=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(o&this.MASK_6BITS)<<this.BITS_PER_ENCODED_BYTE|r&this.MASK_6BITS),n+=3);return t}},1,0,0,0,["crypto.base64"],0,[BP.ux.crypto,"Base64",Ext.Crypto,"base64"],0),Ext.cmd.derive("BP.Bootstrap",Ext.Base,{singleton:!0,settingsUrl:"resources/settings.json",configUrl:"resources/config.json",localeUrl:"resources/locale/",ipServiceUrl:"//freegeoip.net/json/",defaultLocale:"en",codeError:{6001:"Error loading configuration file",6002:"Error loading localization file",6003:'Localization file "{0}" has not been loaded. Default localization file used',6004:"Error loading chart instruments",6005:"Error loading chart files"},doLoadConfig:function(e,t,n){var i,r,o;e&&e.url&&(t=t||this.defaultSuccess,n=n||this.defaultFailure,i=e.scope||this,r=e.locale||this.defaultLocale,o={url:e.url,errorCode:e.errorCode,async:!1,locale:r,scope:i,timeout:5e3,success:t,failure:n},e.label&&(o.label=e.label,this.whiteLabel=e.label),Ext.Ajax.request(o))},doLoadingChart:function(e,t,n){var i,r,o,a=this;return e&&(t=t||a.defaultSuccess,n=n||a.defaultFailure,i=e.scope||a,r=BP.config("freeserv.api"),r&&(o=BP.config("freeserv.chart.rules.instruments")))?(Ext.data.JsonP.request({url:r,params:{path:o},errorCode:e.errorCode,callbackKey:"jsonp",disableCaching:!1,scope:i,timeout:5e3,success:t,failure:function(){a.defaultFailure({},{errorCode:6004})}}),!0):void 0},prepareLoadChartFiles:function(){var e,t,n,i=this;return e=BP.config("freeserv.api"),e&&(e="resources/js/",t="chartui/",n=BP.config("freeserv.chart.fileVersion"))?(e=e+t+n,Ext.Ajax.request({url:e,async:!1,scope:i,timeout:5e3,success:function(e){var t;if(Ext.isObject(e)){try{t=Ext.decode(e.responseText,!0)}catch(n){}if(t.version)return void(i.doLoadChartFiles(t.version)!==!0&&i.defaultFailure({},{errorCode:6005}))}i.doLoadChartFiles()!==!0&&i.defaultFailure({},{errorCode:6005})},failure:function(){i.doLoadChartFiles()!==!0&&i.defaultFailure({},{errorCode:6005})}}),!0):void 0},doLoadChartFiles:function(e){var t,n,i,r,o,a,s,l=this;return n="1.20.0408",1==n.split(".").length&&(n="1.0.0.0-dev"),o=BP.config("freeserv.chart.fileJS"),o&&(a=BP.config("freeserv.chart.fileCSS"),a&&(s=BP.config("freeserv.chart.version"),s&&e&&(Object.addPrivateProperty(BP,"chartVersion",e),r=BP.config("freeserv.api"),r&&(i=BP.config("freeserv.chart.path")))))?(i=i.replace("{version}",s),r+=i,o=r+o,a=r+a,o=void 0,a=void 0,o=o||"resources/js/chartui/chartui.js",a=a||"resources/js/chartui/chartui.css",o=o.replace(/([^\.]*)\.(js)/,"$1-1.4.96.$2"),a=a.replace(/([^\.]*)\.(css)/,"$1-1.4.96.$2"),l.getChartFiles=function(){return{JS:o,CSS:a}},t=window.document.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("media","all"),t.setAttribute("href",a),t.onload=function(){t=window.document.createElement("script"),t.onload=function(){var e=l.localeUrl+l.defaultLocale+".json";e=e.replace(/([^\.]*)\.(json)/,"$1-1.18.14.$2"),l.doLoadConfig({url:e,errorCode:6002},l.afterLoadDefaultLocaleConfig)},t.setAttribute("type","text/javascript"),t.setAttribute("charset","utf-8"),t.setAttribute("src",o+"?v="+n),window.document.getElementsByTagName("head")[0].appendChild(t)},window.document.getElementsByTagName("head")[0].appendChild(t),!0):void 0},defaultSuccess:function(){},loadDefaultLocaleFailure:function(e,t){Ext.util.Cookies.clear("locale"),this.defaultFailure(e,t)},defaultFailure:function(e,t){var n,i,r,o,a=this;setTimeout(function(){i="Error",r=t?t.errorCode:"",n=a.getErrorByCode(r),Ext.select("div.p-mask").remove(),Ext.select("div.p-mask-msg").remove(),Ext.select("script[data-title=boot]").remove(),o={message:n,type:"error"},t.locale&&(o.locale=t.locale),t.errorCode&&(o.errorCode=t.errorCode),e.status&&(o.headerStatus=e.status),e.statusText&&(o.headerStatusText=e.statusText),BP.getApplication&&BP.getApplication().getController("LoggerManager").onMessage(o),BP.Msg.show({title:i,msg:n,action:"error",resizable:!1,hideable:!1,animAllow:!1,closable:!1,proxyDrag:!1,draggable:!1,buttonText:{ok:"Reload"},events:{browserwindowresize:a.onBrowserWindowResizeMsg},fn:function(e,t,n,i){BP.getApplication&&BP.getApplication().getController("LoggerManager").onMessage({userActivity:!1,message:"Reload initialized by User",type:"activity"}),i.el.fadeOut({remove:!0,duration:250,easing:"easeOut",callback:function(){Ext.getBody().mask("Reload","BP-login",null,!0),Ext.select(".x-mask-msg-inner").on({animationiteration:a.onStopAnimation,webkitAnimationIteration:a.onStopAnimation,oanimationiteration:a.onStopAnimation,MSAnimationIteration:a.onStopAnimation}),Ext.select("div.x-mask-msg-bg").remove()}})},icon:BP.MessageBox.ERROR})},1e3)},onStopAnimation:function(){document.location.reload()},onBrowserWindowResizeMsg:function(){this.center()},init:function(){var e,t=this;BP.config=Ext.emptyFn,e=t.settingsUrl,e=e.replace(/([^\.]*)\.(json)/,"$1-1.18.14.$2"),t.doLoadConfig({url:e,errorCode:6001},t.afterLoadSettingsConfig),BP.translate=Ext.bind(t.getLocaleValueByKey,t)},afterLoadSettingsConfig:function(e,t){var n,i,r=this;if(e){try{n=Ext.decode(e.responseText)}catch(o){}if(n&&(BP.config=Ext.pass(this.getConfigParam,["get",n],this),BP.config("auth")))return i=r.configUrl,void r.doLoadConfig({url:i,errorCode:6001},r.afterLoadConfig)}this.defaultFailure(e,t)},afterLoadConfig:function(e,t){var n,i,r=this.getUrlParam("env");if(e){try{n=Ext.decode(e.responseText)}catch(o){}if(n&&(i="",n.authorization&&(n.authorization.api&&BP.config("authorization.api",n.authorization.api,"extended"),"demo"==r?BP.config("authorization.api",["https://www.dukascopy.com/authorization/demo","https://login.dukascopy.com/authorization/demo"],"extended"):"live"==r&&BP.config("authorization.api",["https://www.dukascopy.com/authorization/live"],"extended"),n.pingAPI&&BP.config("pingAPI",n.pingAPI,"extended"),n.alslog.api&&BP.config("alslog.api",n.alslog.api,"extended"),n.instance&&BP.config("instance",n.instance,"extended")),n.registration&&BP.config("registration",n.registration,"extended"),BP.config("authorization")&&BP.config("authorization.api")))return void this.loadConfigExt()}this.defaultFailure(e,t)},afterLoadInstruments:function(e,t){var n;if(Ext.isObject(e)){n=null;for(n in e)break;if(n)return this.getChartInstruments=function(){return e},void(this.prepareLoadChartFiles()!==!0&&this.defaultFailure({},{errorCode:6005}))}this.defaultFailure(e,t)},loadConfigExt:function(){var e,t,n,i,r=this;t="swiss",e='{"europe":"eu|dukascopy.eu","international":"int","swiss":"dukascopy.com"}',e=Ext.decode(e,!0),n||(n=this.getUrlParam("wl")||this.getWhitelabel()),t=n||t,n=t,n+="/property",n+=".json",i="resources/",i+="wl/",i+=n,i=i.replace(/([^\.]*)\.(json)/,"$1-1.18.14.$2"),Object.addPrivateProperty(BP,"whiteLabel",t),r.doLoadConfig({url:i,label:t,errorCode:6001},r.afterLoadConfigExt)},getUrlParam:function(e){var t=Ext.Object.fromQueryString(location.search);return e?t[e]:t},getWhitelabel:function(){var e=document.location.host;return this.checkServerName(e,"eu")===!0?"europe":this.checkServerName(e,"int")===!0?"international":this.checkServerName(e,"hdforex")===!0?"hdforex":this.checkServerName(e,"fxfinpro")===!0?"fxfinpro":this.checkServerName(e,"atom8")===!0?"atom8":this.checkServerName(e,"tier1fx")===!0?"tier1fx":this.checkServerName(e,"fxdd")===!0?"fxdd":this.checkServerName(e,"nsfxtrading")===!0?"nsfxtrading":"swiss"},checkServerName:function(e,t){return-1!=e.search(t)},afterLoadConfigExt:function(e,t){var n,i,r,o,a=this;if(e){try{n=Ext.decode(e.responseText)}catch(s){}if(n)return BP.config("wl."+t.label,n,"extended"),o="1.18.14",BP.config("app.version",o,"extended"),r=t.label,r+="/config",r+=".json",i="resources/",i+="wl/",i+=r,i=i.replace(/([^\.]*)\.(json)/,"$1-1.18.14.$2"),void a.doLoadConfig({url:i,label:t.label,errorCode:6001},a.afterLoadConfigJExt,a.afterLoadConfigJExtFailure)}this.defaultFailure(e,t)},afterLoadConfigJExt:function(e,t){var n;if(e){try{n=Ext.decode(e.responseText)}catch(i){}n&&(n.bookmarks&&BP.config("wl."+t.label+".bookmarks",n.bookmarks,"extended"),n.channel&&BP.config("wl."+t.label+".channel",n.channel,"extended"),n.disclaimer&&BP.config("wl."+t.label+".disclaimer",n.disclaimer,"extended"),n.forgotUri&&BP.config("wl."+t.label+".forgotUri",n.forgotUri[BP.config("instance")],"extended"),n.forgotUri&&BP.config("wl."+t.label+".forgotUri",n.forgotUri[BP.config("instance")],"extended"),n.reg.uriLiveReg&&BP.config("wl."+t.label+".uriLiveReg",n.reg.uriLiveReg,"extended"),n.reg.uriUpFund&&BP.config("wl."+t.label+".uriUpFund",n.reg.uriUpFund,"extended"))}this.afterLoadConfigJExtFailure(e,t)},afterLoadConfigJExtFailure:function(){BP.ux.data.Authorization.setServers(),this.initSessionId(),this.doLoadingChart({errorCode:6004},this.afterLoadInstruments)!==!0&&this.defaultFailure({},{errorCode:6004})},afterLoadDefaultLocaleConfig:function(e,t){var n,i,r;if(e){try{n=Ext.decode(e.responseText)}catch(o){}if(n&&(this.getDefaultLocaleConfig=Ext.pass(this.getConfigParam,["get",n],this),r=BP.Bootstrap.getLocaleValueByKey("login.language-field-label")||BP.Bootstrap.getDefaultLocaleValueByKey("login.auth-loading"),r&&window.localStorage.setItem("lastLoadingText",r),this.getDefaultLocaleConfig("login"))){if(BP.ux.data.Authorization.initErrorMessages(),i=Ext.util.Cookies.get("locale"),i&&i!==this.defaultLocale){var a=this.localeUrl+i+".json";a=a.replace(/([^\.]*)\.(json)/,"$1-1.18.14.$2"),this.doLoadConfig({url:a,errorCode:6002},this.afterLoadLocaleConfig,this.loadDefaultLocaleFailure)}else this.getCurrentLocaleConfig=Ext.emptyFn,Object.addPrivateProperty(BP,"init",!0),BP.getApplication&&BP.getApplication().isLaunch!==!0&&BP.getApplication()["l"+(!1+[1])[+!+[0]]+([1][[2]]+[1])[+[0]]+([0][[2]]+[0])[+!+[0]]+"ch"](),this.getGeoIP();return}}this.defaultFailure(e,t)},afterLoadLocaleConfig:function(e,t){var n,i;if(e){try{n=Ext.decode(e.responseText)}catch(r){}if(n&&(this.getCurrentLocaleConfig=Ext.pass(this.getConfigParam,["get",n],this),i=BP.Bootstrap.getLocaleValueByKey("message.loading-text")||BP.Bootstrap.getDefaultLocaleValueByKey("message.loading-text"),i&&window.localStorage.setItem("lastLoadingText",i),this.getCurrentLocaleConfig("login")))return BP.ux.data.Authorization.initErrorMessages(),Object.addPrivateProperty(BP,"init",!0),BP.getApplication&&BP.getApplication().isLaunch!==!0&&BP.getApplication()["l"+(!1+[1])[+!+[0]]+([0][[1]]+[0])[+[0]]+([][[2]]+[3])[+!+[0]]+"ch"](),void this.getGeoIP()}Ext.util.Cookies.clear("locale"),this.defaultFailure(e,t)},getConfigParam:function(){return"get"!=arguments[0]?null:arguments[2]&&Ext.isObject(arguments[1])?"extended"==arguments[4]?(this.doSetObjectByPath(arguments[2],arguments[1],arguments[3]),!0):this.doSearchObjectByPath(arguments[2],arguments[1]):null},doSearchObjectByPath:function(e,t){
var n,i,r,o;if(!e)return null;if(!Ext.isObject(t))return null;for(i=(e+"").split("."),r=i.length,o=t,n=0;r>n;n++){if(void 0===o[i[n]])return null;o=o[i[n]]}return Ext.clone(o)},getUrlParam:function(e){var t=Ext.Object.fromQueryString(location.search);return e?t[e]:t},doSetObjectByPath:function(e,t,n){var i,r,o,a;if(!e)return null;if(!Ext.isObject(t))return null;for(r=(e+"").split("."),o=r.length,a=t,i=0;o>i;i++)void 0!==a[r[i]]&&r[r.length-1]!==r[i]?a=a[r[i]]:r[r.length-1]!==r[i]?(a[r[i]]={},a=a[r[i]]):a[r[i]]=n},getErrorByCode:function(e){var t;return t=e?this.codeError[e]:"",t&&(t=e+": "+t),t||(t="7000: Fatal System Error"),t},getLocaleValueByKey:function(e){var t;return e?(Ext.isFunction(this.getCurrentLocaleConfig)&&(t=this.getCurrentLocaleConfig(e)),t&&t.value?t.value:(Ext.isFunction(this.getDefaultLocaleConfig)&&(t=this.getDefaultLocaleConfig(e)),t&&t.value?t.value:void 0)):void 0},getDefaultLocaleValueByKey:function(e){var t;return e?(Ext.isFunction(this.getDefaultLocaleConfig)&&(t=this.getDefaultLocaleConfig(e)),t&&t.value?t.value:void 0):void 0},saveCurrentLocale:function(e){var t;e&&(t=new Date,t.setFullYear(t.getFullYear()+10),Ext.util.Cookies.get("locale")!==e&&Ext.util.Cookies.set("locale",e,t))},chanceDirection:function(){window.rtlEnable="fa"==locale},initSessionId:function(){var e,t,n;e=new Date,e.setHours(e.getHours()+24),t=Ext.util.Cookies.get("__ddsuid"),t||(n=new Ext.data.identifier.Uuid,t=n.generate(),Ext.util.Cookies.set("__ddsuid",t,e))},getSessionId:function(){var e;return e=Ext.util.Cookies.get("__ddsuid"),e||(this.initSessionId(),e=Ext.util.Cookies.get("__ddsuid")),e},hideMask:function(e){Ext.getBody().unmask(e),Ext.select(".line-load").removeCls("is-active"),Ext.select("html").removeCls("stop-keyboard-event")},initNotAuthLogging:function(){var e,t;e="notauth",t=e,t+="bp",t+="serialize",BP.ux.data.Private.setEnabled(!0),BP.ux.data.Private.setPrivate(BP.ux.crypto.MD5.get(t,!1,!0)),BP.ux.data.Private.getApi().setToken(),BP.logging.Logger.unserializeNotAuthMessages(BP.ux.crypto.MD5.get(e,!1,!0))},getGeoIP:function(){this.getClientIP=function(){return"127.0.0.1"}},afterForceLoadLocaleConfig:function(e,t){var n,i;if(t){try{i=Ext.decode(t.responseText)}catch(r){}i&&(Ext.util.Cookies.set("locale",e),this.getCurrentLocaleConfig=Ext.pass(this.getConfigParam,["get",i],this),n=BP.Bootstrap.getLocaleValueByKey("message.loading-text")||BP.Bootstrap.getDefaultLocaleValueByKey("message.loading-text"),n&&window.localStorage.setItem("lastLoadingText",n),BP.logging.Logger.initErrorMessages(),BP.transport.Transport.initErrorMessages(),BP.ux.data.Authorization.initErrorMessages())}},forceLoadLocale:function(e){if(e&&e!==this.defaultLocale){var t=this.localeFolder+e+".json";t=t.replace(/([^\.]*)\.(json)/,"$1-1.18.14.$2"),this.doLoadConfig({url:t,errorCode:6002},Ext.pass(this.afterForceLoadLocaleConfig,[e],this),Ext.emptyFn)}},loadFavicon:function(e){var t,n,i,r,o,a,s,l;a="1.20.0408",1==a.split(".").length&&(a="1.0.0.0-dev"),o=BP.config("wl."+e+".faviconFile"),s="resources/favicon.ico",o&&(s=BP.config("wl.path")+"/"+e+"/favicon/"+o),s+="?v="+a,document.head=document.head||document.getElementsByTagName("head")[0],r=document.getElementById("favicon"),i=document.getElementById("favicon-shortcut"),t=document.createElement("link"),n=document.createElement("link"),t.setAttribute("id","favicon"),n.setAttribute("id","favicon-shortcut"),t.setAttribute("rel","icon"),n.setAttribute("rel","shortcut icon"),l=RegExp(".ico","i"),l.test(s)&&(t.setAttribute("type","image/x-icon"),n.setAttribute("type","image/x-icon"),s=s.replace(/([^\.]*)\.(ico)/,"$1-1.18.14.$2")),l=RegExp(".png","i"),l.test(s)&&(t.setAttribute("type","image/png"),n.setAttribute("type","image/png"),s=s.replace(/([^\.]*)\.(png)/,"$1-1.18.14.$2")),l=RegExp(".gif","i"),l.test(s)&&(t.setAttribute("type","image/gif"),n.setAttribute("type","image/gif"),s=s.replace(/([^\.]*)\.(gif)/,"$1-1.18.14.$2")),t.setAttribute("href",s),n.setAttribute("href",s),r&&document.head.removeChild(r),i&&document.head.removeChild(i),document.head.appendChild(n),document.head.appendChild(t)}},0,0,0,0,0,0,[BP,"Bootstrap"],function(e){this.init(),function(){"use strict";function t(e){return e+="",e.charAt(0).toUpperCase()+e.slice(1)}function n(e,t,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"7 / Server 2008 R2","6.0":"Vista / Server 2008",5.2:"XP 64-bit / Server 2003",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e+="",t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=r(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function i(e,t){var n=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&v>=i)for(;++n<i;)t(e[n],n,e);else o(e,t)}function r(e){return e=u(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:t(e)}function o(e,t){for(var n in e)C.call(e,n)&&t(e[n],n,e)}function a(e){return null==e?t(e):w.call(e).slice(8,-1)}function s(e,t){var n=null!=e?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&("object"==n?!!e[t]:!0)}function l(e){return(e+"").replace(/([ -])(?!$)/g,"$1?")}function d(e,t){var n=null;return i(e,function(i,r){n=t(n,i,r,e)}),n}function u(e){return(e+"").replace(/^ +| +$/g,"")}function c(e){function t(t){return d(t,function(t,n){return t||RegExp("\\b"+(n.pattern||l(n))+"\\b","i").exec(e)&&(n.label||n)})}function i(t){return d(t,function(t,n,i){return t||(n[$]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec($)]||RegExp("\\b"+l(i)+"(?:\\b|\\w*\\d)","i").exec(e))&&i})}function h(t){return d(t,function(t,n){return t||RegExp("\\b"+(n.pattern||l(n))+"\\b","i").exec(e)&&(n.label||n)})}function g(t){return d(t,function(t,i){var r=i.pattern||l(i);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=n(t,r,i.label||i)),t})}function m(t){return d(t,function(t,n){var i=n.pattern||l(n);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=((n.label&&!RegExp(i,"i").test(n.label)?n.label:t)+"").split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=r(t[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function x(t){return d(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function v(){return this.description||""}var b=p,C=e&&"object"==typeof e&&"String"!=a(e);C&&(b=e,e=null);var S=b.navigator||{},T=S.userAgent||"";e||(e=T);var P,I,k=C||E==f,B=C?!!S.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(""+w),M="Object",D=C?M:"ScriptBridgingProxyObject",R=C?M:"Environment",A=C&&b.java?"JavaPackage":a(b.java),F=C?M:"RuntimeObject",L=/\bJava/.test(A)&&b.java,O=L&&a(b.environment)==R,V=L?"a":"α",N=L?"b":"β",H=b.document||{},z=b.operamini||b.opera,W=y.test(W=C&&z?z["[[Class]]"]:a(z))?W:z=null,_=e,U=[],j=null,q=e==T,G=q&&z&&"function"==typeof z.version&&z.version(),K=t([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),X=h(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox Mobile",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),$=m([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Y=i({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Q=g(["Windows Phone ","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(K&&(K=[K]),Y&&!$&&($=m([Y])),(P=/\bGoogle TV\b/.exec($))&&($=P[0]),/\bSimulator\b/i.test(e)&&($=($?$+" ":"")+"Simulator"),"Opera Mini"==X&&/\bOPiOS\b/.test(e)&&U.push("running in Turbo/Uncompressed mode"),/^iP/.test($)?(X||(X="Safari"),Q="iOS"+((P=/ OS ([\d_]+)/i.exec(e))?" "+P[1].replace(/_/g,"."):"")):"Konqueror"!=X||/buntu/i.test(Q)?Y&&"Google"!=Y&&(/Chrome/.test(X)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test($))?(X="Android Browser",Q=/\bAndroid\b/.test(Q)?Q:"Android"):"Silk"==X?(/\bMobi/i.test(e)||(Q="Android",U.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&U.unshift("accelerated")):"PaleMoon"==X&&(P=/\bFirefox\/([\d.]+)\b/.exec(e))?U.push("identifying as Firefox "+P[1]):"Firefox"==X&&(P=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(Q||(Q="Firefox OS"),$||($=P[1])):(!X||(P=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(X)))&&(X&&!$&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(P+"/")+8))&&(X=null),(P=$||Y||Q)&&($||Y||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Q))&&(X=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Q)?Q:P)+" Browser")):Q="Kubuntu",G||(G=x(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",l(X),"(?:Firefox|Minefield|NetFront)"])),(P="iCab"==K&&parseFloat(G)>3&&"WebKit"||/\bOpera\b/.test(X)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(K)&&"WebKit"||!K&&/\bMSIE\b/i.test(e)&&("Mac OS"==Q?"Tasman":"Trident")||"WebKit"==K&&/\bPlayStation\b(?! Vita\b)/i.test(X)&&"NetFront")&&(K=[P]),"IE"==X&&(P=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(X+=" Mobile",Q="Windows Phone "+(/\+$/.test(P)?P:P+".x"),U.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(X="IE Mobile",Q="Windows Phone 8.x",U.unshift("desktop mode"),G||(G=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=X&&"Trident"==K&&(P=/\brv:([\d.]+)/.exec(e))&&(X&&U.push("identifying as "+X+(G?" "+G:"")),X="IE",G=P[1]),q){if(s(b,"global"))if(L&&(P=L.lang.System,_=P.getProperty("os.arch"),Q=Q||P.getProperty("os.name")+" "+P.getProperty("os.version")),k&&s(b,"system")&&(P=[b.system])[0]){Q||(Q=P[0].os||null);try{P[1]=b.require("ringo/engine").version,G=P[1].join("."),X="RingoJS"}catch(Z){P[0].global.system==b.system&&(X="Narwhal")}}else"object"==typeof b.process&&(P=b.process)?(X="Node.js",_=P.arch,Q=P.platform,G=/[\d.]+/.exec(P.version)[0]):O&&(X="Rhino");else a(P=b.runtime)==D?(X="Adobe AIR",Q=P.flash.system.Capabilities.os):a(P=b.phantom)==F?(X="PhantomJS",G=(P=P.version||null)&&P.major+"."+P.minor+"."+P.patch):"number"==typeof H.documentMode&&(P=/\bTrident\/(\d+)/i.exec(e))&&(G=[G,H.documentMode],(P=+P[1]+4)!=G[1]&&(U.push("IE "+G[1]+" mode"),K&&(K[1]=""),G[1]=P),G="IE"==X?G[1].toFixed(1)+"":G[0]);Q=Q&&r(Q)}G&&(P=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(G)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(q&&S.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(j=/b/i.test(P)?"beta":"alpha",G=G.replace(RegExp(P+"\\+?$"),"")+("beta"==j?N:V)+(/\d+\+?/.exec(P)||"")),"Fennec"==X||"Firefox"==X&&/\b(?:Android|Firefox OS)\b/.test(Q)?X="Firefox Mobile":"Maxthon"==X&&G?G=G.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test($)?(Q=null,"Xbox 360"==$&&/\bIEMobile\b/.test(e)&&U.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(X)&&(!X||$||/Browser|Mobi/.test(X))||"Windows CE"!=Q&&!/Mobi/i.test(e)?"IE"==X&&q&&null===b.external?U.unshift("platform preview"):(/\bBlackBerry\b/.test($)||/\bBB10\b/.test(e))&&(P=(RegExp($.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||G)?(P=[P,/BB10/.test(e)],Q=(P[1]?($=null,Y="BlackBerry"):"Device Software")+" "+P[0],G=null):this!=o&&"Wii"!=$&&(q&&z||/Opera/.test(X)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==X&&/\bOS X (?:\d+\.){2,}/.test(Q)||"IE"==X&&(Q&&!/^Win/.test(Q)&&G>5.5||/\bWindows XP\b/.test(Q)&&G>8||8==G&&!/\bTrident\b/.test(e)))&&!y.test(P=c.call(o,e.replace(y,"")+";"))&&P.name&&(P="ing as "+P.name+((P=P.version)?" "+P:""),y.test(X)?(/\bIE\b/.test(P)&&"Mac OS"==Q&&(Q=null),P="identify"+P):(P="mask"+P,X=W?r(W.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(P)&&(Q=null),q||(G=null)),K=["Presto"],U.push(P)):X+=" Mobile",(P=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(P=[parseFloat(P.replace(/\.(\d)$/,".0$1")),P],"Safari"==X&&"+"==P[1].slice(-1)?(X="WebKit Nightly",j="alpha",G=P[1].slice(0,-1)):(G==P[1]||G==(P[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1]))&&(G=null),P[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==P[0]&&537.36==P[2]&&parseFloat(P[1])>=28&&"WebKit"==K&&(K=["Blink"]),q&&(B||P[1])?(K&&(K[1]="like Chrome"),P=P[1]||(P=P[0],530>P?1:532>P?2:532.05>P?3:533>P?4:534.03>P?5:534.07>P?6:534.1>P?7:534.13>P?8:534.16>P?9:534.24>P?10:534.3>P?11:535.01>P?12:535.02>P?"13+":535.07>P?15:535.11>P?16:535.19>P?17:536.05>P?18:536.1>P?19:537.01>P?20:537.11>P?"21+":537.13>P?23:537.18>P?24:537.24>P?25:537.36>P?26:"Blink"!=K?"27":"28")):(K&&(K[1]="like Safari"),P=P[0],P=400>P?1:500>P?2:526>P?3:533>P?4:534>P?"4+":535>P?5:537>P?6:538>P?7:601>P?8:"8"),K&&(K[1]+=" "+(P+="number"==typeof P?".x":/[.+]/.test(P)?"":"+")),"Safari"==X&&(!G||parseInt(G)>45)&&(G=P)),"Opera"==X&&(P=/\bzbov|zvav$/.exec(Q))?(X+=" ",U.unshift("desktop mode"),"zvav"==P?(X+="Mini",G=null):X+="Mobile",Q=Q.replace(RegExp(" *"+P+"$"),"")):"Safari"==X&&/\bChrome\b/.exec(K&&K[1])&&(U.unshift("desktop mode"),X="Chrome Mobile",G=null,/\bOS X\b/.test(Q)?(Y="Apple",Q="iOS 4.3+"):Q=null),G&&0==G.indexOf(P=/[\d.]+$/.exec(Q))&&e.indexOf("/"+P+"-")>-1&&(Q=u(Q.replace(P,""))),K&&!/\b(?:Avant|Nook)\b/.test(X)&&(/Browser|Lunascape|Maxthon/.test(X)||"Safari"!=X&&/^iOS/.test(Q)&&/\bSafari\b/.test(K[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(X)&&K[1])&&(P=K[K.length-1])&&U.push(P),U.length&&(U=["("+U.join("; ")+")"]),Y&&$&&$.indexOf(Y)<0&&U.push("on "+Y),$&&U.push((/^on /.test(U[U.length-1])?"":"on ")+$),Q&&(P=/ ([\d.+]+)$/.exec(Q)||(I=/^[a-z]+ ([\d.+]+) \//i.exec(Q)),Q={architecture:32,family:P&&!I?Q.replace(P[0],""):Q,version:P?P[1]:null,toString:function(){var e=this.version;return this.family+(e&&!I?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(P=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(_))&&!/\bi686\b/i.test(_)&&(Q&&(Q.architecture=64,Q.family=Q.family.replace(RegExp(" *"+P),"")),X&&(/\bWOW64\b/i.test(e)||q&&/\w(?:86|32)$/.test(S.cpuClass||S.platform)&&!/\bWin64; x64\b/i.test(e))&&U.unshift("32-bit")),e||(e=null);var J={};return J.description=e,J.layout=K&&K[0],J.manufacturer=Y,J.name=X,J.prerelease=j,J.product=$,J.ua=e,J.version=X&&G,J.os=Q||{architecture:null,family:null,version:null,toString:function(){return"null"}},J.parse=c,J.toString=v,J.version&&U.unshift(G),J.name&&U.unshift(X),Q&&X&&(Q!=(Q+"").split(" ")[0]||Q!=X.split(" ")[0]&&!$)&&U.push($?"("+Q+")":"on "+Q),U.length&&(J.description=U.join(" ")),J}var h={"function":!0,object:!0},p=h[typeof e]&&e||this,f=p,g=h[typeof exports]&&exports,m=h[typeof module]&&module&&!module.nodeType&&module,x=g&&m&&"object"==typeof global&&global;!x||x.global!==x&&x.window!==x&&x.self!==x||(p=x);var v=Math.pow(2,53)-1,y=/\bOpera/,E=this,b=Object.prototype,C=b.hasOwnProperty,w=b.toString;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return c()}):g&&m?o(c(),function(e,t){g[t]=e}):p.platform=c()}.call(e)}),Ext.cmd.derive("BP.preference.Instruments",Ext.Base,{singleton:!0,types:["CURRENCIES","CFD"],units:{CURRENCIES:["millions","lots","thousands","units"],CFD:["contracts"]},list:{CURRENCIES:{millions:[.001,.01,.1,.2,.3,.4,.5,1,2,3,4,5,10],lots:[.1,.2,.3,.4,.5,1,2,3,4,5,10],thousands:[10,20,30,40,50,100,200,300,400,500,1e3],units:[1e4,2e4,3e4,4e4,5e4,1e5]}},"default":{instrument:"EUR/USD",type:"CURRENCIES",unit:{CURRENCIES:"millions"}},getList:function(e,t){var n;return e=e||this.getDefaultType(),t=t||this.getDefaultUnits(e),e=e.split("."),n=this.list[e[0]]||[],"CFD"!=e[0]&&e[1]&&(n=n[e[1]]||[]),n[t]||[]},getPrefixShort:function(e,t){return t=t||this.getDefaultUnits(e),this.prefixShort[t]||""},getPrefix:function(e,t,n){var i;return t=t||this.getDefaultUnits(e),i=n?this.prefixCat[t]||t:this.prefix[t]||t},getMultiplier:function(e,t){return e=e||this.getDefaultType(),t=t||this.getDefaultUnits(e),this.multiplier[t]||1e6},getDefaultAmount:function(e,t,n,i){var r,o,a,s,l;return s=this.getDefaultParam(e,"defaultAmount"),!n&&s?s:(a=e||this.getDefaultType(),t=t||this.getDefaultUnits(e),e=a.split("."),r=this.getMultiplier(e,t),l=this["default"].amount[e[0]]||[],"CFD"!=e[0]&&e[1]&&(l=l[e[1]]||[]),o=this.getMultiplier(a,(i?i:l[1])||"thousands"),"METAL"==e[0]&&(o=this.getMultiplier(a,(i?i:l[1])||"ounces")),"CFD"==e[0]&&(o=this.getMultiplier(a,(i?i:l[1])||"contracts")),s=n||l[0]||1,Ext.isNumber(s)||(s=1),s*=o,s/=r)},getMaxDefaultAmount:function(e,t,n,i){var r,o,a,s,l,d,u,c;return l=n||this.getDefaultParam(e,"defaultMaxAmount"),a=e||this.getDefaultType(),c=this.getDefaultUnits(e),t=t||c,e=a.split("."),r=this.getMultiplier(e,t),d=this["default"].amount[e[0]]||[],"CFD"!=e[0]&&e[1]&&(d=d[e[1]]||[]),u=this["default"].amountExposure[e[0]]||[],"CFD"!=e[0]&&e[1]&&(u=u[e[1]]||[]),o=this.getMultiplier(a,(i?i:c)||"thousands"),"METAL"==e[0]&&(o=this.getMultiplier(a,(i?i:c)||"ounces")),"CFD"==e[0]&&(o=this.getMultiplier(a,(i?i:c)||"contracts")),s=l||u[d[1]||"thousands"].max||1,"METAL"==e[0]&&(s=l||u[d[1]||"ounces"].max||1),"CFD"==e[0]&&(s=l||u[d[1]||"contracts"].max||1),Ext.isNumber(s)||(s=1),s*=o,s/=r},getDefaultUnits:function(e){var t,n;return e=e||this.getDefaultType(),(t=this.getDefaultParam(e,"defaultUnit"))?t:(e=e.split("."),n="millions","METAL"==e[0]&&(n="ounces"),"CFD"==e[0]&&(n="contracts"),t=this["default"].unit[e[0]]||n,"CFD"!=e[0]&&e[1]&&(t=t[e[1]]||n),Ext.isString(t)||(t=n),t)},getDefaultParam:function(e,t){return e&&t?(e=(""+e).split("."),t+=Ext.String.capitalize(e[0].toLowerCase()),"CFD"!=e[0]&&e[1]&&(t+=Ext.String.capitalize(e[1].toLowerCase())),BP.localSettings?BP.localSettings.get(t):""):""},isDefaultParamValue:function(e,t){var n,i;return e&&t?(e=(""+e).split("."),t+=Ext.String.capitalize(e[0].toLowerCase()),"CFD"!=e[0]&&e[1]&&(t+=Ext.String.capitalize(e[1].toLowerCase())),DDS.localSettings?(n=DDS.localSettings.get(t)||"",DDS.localSettings.fields.map[t]&&(i=DDS.localSettings.fields.map[t].defaultValue),n===i):!1):""},getDefaultInstrument:function(){var e;return(e=this.getDefaultParam("instrument","default"))?e:e=this["default"].instrument||"EUR/USD"},getDefaultType:function(){var e;return(e=this.getDefaultParam("instrument.type","default"))?e:e=this["default"].type||"CURRENCIES"}},0,0,0,0,0,0,[BP.preference,"Instruments"],0),Ext.cmd.derive("BP.view.chart.MarketChartUIController",Ext.app.ViewController,{ticks:[],init:function(){this.initRealNameInstruments(),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-market-chart-ui":{boxready:"onBoxReadyMarketChartUI",beforerender:"onBeforeRenderMarketChartUI",afterrender:"onAfterRenderMarketChartUI",resize:"onResizeChartUI",initchartui:"onInitChartUI",beforechangeinstrument:{fn:"onBeforeChangeInstrument",buffer:50},afterchangeinstrument:{fn:"onAfterChangeInstrument",buffer:50}}}},onInitChartUI:function(){},onBeforeRenderMarketChartUI:function(e){var t,n;return n=BP.localSettings.getChartSettings(),e.currentDate||(e.currentDate=new Date),e.currency||(t=BP.localSettings.get("defaultInstrument"),e.currency=t),e.keyCurrency=e.keyCurrency||this.getRealNameInstruments(e.currency),e.period||(e.period=BP.localSettings.get("defaultChartPeriod")),e.availableInstruments||(e.availableInstruments=this.getAvailableInstruments()),e.offerSide||(e.offerSide=BP.localSettings.get("defaultChartOfferSide")),e.presentationType||(e.presentationType=BP.localSettings.get("defaultChartPresentationType")),e.platformTheme||(e.platformTheme=e.getTheme()),!0},getAvailableInstruments:function(){var e,t=this,n=BP.localSettings.get("defaultInstruments"),i=BP.localSettings.get("defaultInstrument");return n&&n.length?(n.push(i),e=n.map(this.getRealNameInstruments,t),Ext.Array.unique(e)):t.getInstrumentsFromStore()},getInstrumentsFromStore:function(){var e=this,t=(BP.localSettings.get("defaultInstruments"),BP.localSettings.get("defaultInstrument"),Ext.getStore("Instruments")),n=[];return t.data.each(function(e){n.push(e.get("instrument"))}),n.map(this.getRealNameInstruments,e)},onAfterRenderMarketChartUI:function(){BP.app.getController("MarketTickManager").on("tick",this.onRealMarketTick,this)},onRealMarketTick:function(e){var t,n,i,r=this,o=r.getView();if(o.chart&&(t=o.chart.getInstrument(),(t||t.getTitle())&&o.initialized&&e.get("bidPrice")&&e.get("askPrice")&&o.currency===e.get("instrument")&&t.getTitle()===e.get("instrument")&&Ext.isFunction(o.chart.getTransport)&&(n=o.chart.getTransport()))){o.firstTick&&(setTimeout(function(){o.chart.updateLastData()},0),o.firstTick=!1);try{i=o.chart.getOptions()}catch(a){i=null}if(i&&!i.live&&o.chart.getDataProvider().peek())try{setTimeout(function(){n.tick(e.get("timestamp"),e.get("bidPrice"),e.get("askPrice"),e.get("askAmount"),e.get("bidAmount"))},0)}catch(a){}}},doPrepareChartState:function(e){var t,n,i,r,o,a,s,l=this;if(l.chart&&e&&(t=Ext.clone(window.DDS.getRealDDS().preference.Chart.serializeAllow))){if(i={},t.drawings===!0){i.drawings=[],s=[];try{r=l.chart.getChartObjectMonitor().serialize(),r=Ext.decode(r,!0),Ext.each(r,function(e){a=null;try{a=Ext.decode(e,!0)}catch(t){window._ce.addCatch(t,"MarketChartUI.doPrepareChartState")}switch(a.type){case"HistoricalOrder":break;default:s.push(e)}}),r=s.length?s:null}catch(d){window._ce.addCatch(d,"doPrepareChartState.doPrepareChartState1")}s=null,i.drawings=r||i.drawings}if(t.indicators===!0){i.indicators=[];try{o=l.chart.getIndicatorList(),Ext.Object.each(o,function(e,t){i.indicators.push(t.serialize())})}catch(d){window._ce.addCatch(d,"doPrepareChartState.doPrepareChartState2")}}if(i.options={},Ext.isObject(t.options)){i.options={},Ext.Object.each(t.options,function(t,n){n===!0&&Ext.isValidValue(e[t])&&("dataUnitWidth"==t?i.options[t]=l.getValidDataUnitWidth(e[t]):i.options[t]=e[t])}),n=null;for(n in i.options)break;n||delete i.options}return i}},onAddTicks:function(e,t){var n=this;n.ticks.length>=50?n.onLoadTicks():n.ticks.push([t.timestamp,t.bidPrice,t.askPrice,t.bidAmount,t.askAmount])},onLoadTicks:function(){var e,t=this,n=t.getView();if(e=n.chart.getTransport(),e&&t.ticks.length){try{e.ticks(t.ticks)}catch(i){}t.ticks=[]}},onResizeChartUI:function(e,t,n){100>t||(e.chartUI&&e.chartUI.resize(),e.chart&&e.chart.resize()),180>=n||380>=t?e.chartUI.showUI(!1):(e.chartUI.showUI(!0),e.chartUI.showTabs(!1)),n>=465&&t>=400?e.chart.setTimeline(!0):e.chart.setTimeline(!1)},onBoxReadyMarketChartUI:function(e){e.chartUI||(e.initChartUI(),this.doInitChartEvents.call(this,e),e.initChart())},doInitChartEvents:function(e){if(e.chart){var t,n,i;n=new Ext.Element(e.chart),i=new Ext.Element(e.chart.getChartObjectMonitor()),n.on({changeperiod:Ext.pass(this.onChangePeriod,[this]),changeofferside:Ext.pass(this.onChangeOfferSide,[this]),changepresentationtype:Ext.pass(this.onChangePresentationType,[this]),changeinstrument:Ext.pass(this.onChangeChartInstrument,[this]),changetimezone:Ext.pass(this.onChangeTimeZone,[this]),applytheme:function(){},dataload:this.onDataLoad,init:Ext.pass(this.onInit,[this]),indicatoradd:Ext.pass(this.onIndicatorUpdate,[this]),indicatorupdate:Ext.pass(this.onIndicatorUpdate,[this]),indicatorremove:Ext.pass(this.onIndicatorUpdate,[this]),scope:e,delegated:!1,single:!1}),e.chartUI.getDetachButton().addEventListener("action",Ext.bind(this.showChartOnPopUpWindow,this,[e],!0)),t=e.chart.getContainer(),n=Ext.get(t),n.on({contextmenu:Ext.pass(this.onContextMenuChart,[e]),scope:this,delegated:!1,stopEvent:!0}),i.on({objectcomplete:Ext.pass(this.onObjectAdd,[this]),objectremove:Ext.pass(this.onObjectAdd,[this]),scope:e,delegated:!1,stopEvent:!0})}},onChartDrawingsLoad:function(){var e,t;BP.localSettings.get("chartDrawings")&&(e=new Ext.util.DelayedTask(function(){if(t=Ext.decode(BP.localSettings.get("chartDrawings"),!0),t[this.currency])try{this.chart.getChartObjectMonitor().unserialize(t[this.currency])}catch(e){}},this),e.delay(1e3))},onObjectAdd:function(){var e,t=Ext.decode(BP.localSettings.get("chartDrawings"),!0)||{};try{e=Ext.decode(this.chart.serialize()),e.drawings&&(t[this.currency]=e.drawings,BP.localSettings.set("chartDrawings",Ext.encode(t)))}catch(n){}},onObjectRemove:function(){var e,t=Ext.decode(BP.localSettings.get("chartDrawings"),!0)||{};try{e=Ext.decode(this.chart.serialize()),e.drawings&&(t[this.currency]=e.drawings,BP.localSettings.set("chartDrawings",Ext.encode(t)))}catch(n){}},openWindow:function(){var e=this,t="about:blank";this.getView().chartUI.getSettings().toOptionHash();var n=this.popupCenterDual(t,"chart",800,400);baseURI=window.document.baseURI,baseURI||(baseURI=window.document.location.href),e.loadBase(n,baseURI),this.loadJsFile("ext/build/ext-all-debug.js",n,null,{}),this.loadJsFile("app.js",n,null,{})},loadFavicon:function(e,t){var n,i,r=e.document.createElement("link");n="1.18.14",1==n.split(".").length&&(n="1.0.0.0-dev"),i=t+".ico",i+="?v="+n,r.setAttribute("rel","shortcut icon"),r.setAttribute("href",i),e.document.getElementsByTagName("head")[0].appendChild(r)},loadBase:function(e,t){var n,i=e.document.createElement("base");n=t,n+="resources/",i.setAttribute("href",n),e.document.getElementsByTagName("head")[0].appendChild(i)},loadJsFile:function(e,t,n,i){var r=t.document.createElement("script");r.onload=Ext.pass(this.onLoadJavascript,[t,n,i,this]),r.setAttribute("type","text/javascript"),r.setAttribute("charset","utf-8"),r.setAttribute("src",e),t.document.getElementsByTagName("head")[0].appendChild(r)},onLoadJavascript:function(e,t,n){Ext.isFunction(t)&&t.call(this),n&&(n.options=null,delete n.options)},popupCenterDual:function(e,t,n,i){var r=void 0!=window.screenLeft?window.screenLeft:screen.left,o=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var a=width/2-n/2+r,s=height/2-i/2+o,l=window.open(e,t,"scrollbars=yes, width="+n+", height="+i+", top="+s+", left="+a);return window.focus&&l.focus(),l},onChangeChartInstrument:function(){if(this.chart&&this.chartUI){var e=this.chart.getInstrument();this.currency=e.getName(),this.keyCurrency=e.getId()}},onBeforeChangeInstrument:function(e,t,n){var i=this;e.initialized&&e.chart&&n&&e.currency&&(e.keyCurrency=this.getRealNameInstruments(e.currency),Ext.defer(i._setInstrument,100,e,[e.keyCurrency]))},onAfterChangeInstrument:function(){},onChartUIChangeInstrument:function(e,t){var n=this;e.initialized&&e.chart&&t&&e.currency&&(e.keyCurrency=this.getRealNameInstruments(e.currency),n.removeAllIndicators(),Ext.defer(n._setInstrument,100,e,[e.keyCurrency]))},_setInstrument:function(e){var t=this;t.ticks=[],t.chart.setInstrument(e);var n=BP.util.Clock.getTimestamp();t.chart.setDateInterval([n.getTime()-5e5,n.getTime()]),t.chart.setAutoShift(!0),t.chart.reload(),t.firstTick=!0},onMarketTick:function(e){var t=this;t.initialized&&t.keyCurrency===e.get("instrument")&&(e.get("timestamp"),e.get("bidPrice"),e.get("askPrice"),e.get("askAmount"),e.get("bidAmount"))},onLoadIndicatorSettings:function(){this.unmask(),this.chart&&!this.chartUI},onRemoveIndicatorSettings:function(){this.chart&&!this.chartUI},onChangePeriod:function(){var e=this.chart.getPeriod();e.name&&(this.period=e.name)},onChangeOfferSide:function(){},onChangePresentationType:function(){},onChangeInstrument:function(){this.chartUI.resize(),this.chart.resize()},onContextMenuChart:function(e,t,n){e.getChartContextMenu()&&"DIV"==n.tagName&&"f"==n.className&&this.doContextMenu(e,t)},onDataLoad:function(){},onInit:function(e){this.chartUI&&this.chartUI.resize(),this.chart&&this.chart.resize(),this.initialized||(this.initialized=!0,this.updateOrders(),this.chart&&(e.onInitTimeZone.call(this),e.onChartDrawingsLoad.call(this)),this.chart&&this.keyCurrency&&e.addAllIndicators())},onReload:function(){},initRealNameInstruments:function(){var e,t;this.realNameInstruments={},Ext.isFunction(BP.Bootstrap.getChartInstruments)&&(e=BP.Bootstrap.getChartInstruments()||{},e=e.instruments||{});for(t in e)e[t]&&(this.realNameInstruments[e[t].name]=t)},getRealNameInstruments:function(e){var t;return t=BP.localSettings.get("defaultInstrument"),e?(this.realNameInstruments=this.realNameInstruments||{},this.realNameInstruments[e]?this.realNameInstruments[e]:t):t},onInitTimeZone:function(){var e,t,n=0;e=BP.localSettings.get("localTime"),t=new Date,e===!0&&(n=t.getTimezoneOffset()),this.chart&&Ext.isFunction(this.chart.setTimezone)&&this.chart.setTimezone(n)},onChangeTimeZone:function(e){var t,n,i=0;t=BP.localSettings.get("localTime"),n=new Date,t===!0&&(i=n.getTimezoneOffset()),BP.localSettings.set("localTime",!!this.chart.getTimezone().getTimeZoneData().std_offset),e.publish("changetimezone",t)},doContextMenu:function(e,t){var n;n=e.contextMenuCfg||{},e.contextMenuItemsCfg&&(n.items=this.controlContextMenu(e),n.items.length&&this.createContextMenu(n,t))},createContextMenu:function(e,t){if(e&&t){var n;n=Ext.widget("menu",e),n.on("hide",this.onHideContextMenu,this),n.on("destroy",this.onDestroyContextMenu,this),n.on("mouseleave",this.onMouseLeaveContextMenu,this),n.on("mouseenter",this.onMouseEnterContextMenu,this),t.stopEvent(),n.showAt(t.getXY(),0,!1)}},onHideContextMenu:function(e){e.destroy()},onDestroyContextMenu:function(e){e=null},onMouseLeaveContextMenu:function(e){e.callTask&&e.callTask.delay(e.delayMouseLeave||1e3)},onMouseEnterContextMenu:function(e){e.callTask||(e.callTask=new Ext.util.DelayedTask(function(){e.hide()})),e.callTask.cancel()},controlContextMenu:function(e){var t,n=this,i=[];return e.contextMenuItemsCfg&&(t=Ext.getStore("Instruments").getById(e.currency))?"TRADING_ALLOWED"!=t.get("status")?i:(Ext.Object.each(e.contextMenuItemsCfg,function(r,o){o=Ext.clone(o),o.action=r,o.href="javascript:void(0);",o.disabled=!0,o.currency=e.currency,n.controlItemsContextMenu(o,t),n.addHandlerToItemContextMenu(o),o.remove||i.push(o),o=null}),i):i},controlItemsContextMenu:function(e,t){switch(e.action){case"saveSettingsForInstrument":case"saveSettingsForAllInstruments":e.disabled=!1;break;default:return e.disabled=!0,void(e.remove=!0)}"TRADING_ALLOWED"!=t.get("status")&&(e.disabled=!0)},addHandlerToItemContextMenu:function(e){var t,n=this;
if(!e.disabled){if(t="onMenuItem",t+=Ext.util.Format.capitalize(e.action),!n[t])return void(e.handler=function(){});e.scope=n,e.handler=n[t]}},onMenuItemSaveSettingsForInstrument:function(){},onMenuItemSaveSettingsForAllInstruments:function(){},onIndicatorUpdate:function(e){var t=e.view.chart,n=t.serialize(),i=Ext.decode(n,!0),r=i.indicators;e.saveIndicators(r||{})},addAllIndicators:function(){var e,t=this,n=dc.IndicatorProvider,i=t.getView(),r=t.validationLocalStorageSettings(BP.localSettings.get("chartState"))||{};if(r)for(var o in r)r.hasOwnProperty(o)&&(e=n.getIndicator(JSON.parse(r[o])[0]),e.unserialize(r[o]),delete r[o],t.saveIndicators(r),i.chart.addIndicator(e),e=null)},removeAllIndicators:function(){var e=this,t=e.getView(),n=t.chart.getIndicatorList();if(n)for(var i in n)n.hasOwnProperty(i)&&t.chart.removeIndicator(n[i])},validationLocalStorageSettings:function(e){var t=BP.util.Validation,n=Ext.decode(e,!0);return null===n?!1:t.isArray(n)||t.isString(n)||t.isNumber(n)||t.isBoolean(n)||Ext.Object.isEmpty(n)?!1:n},saveIndicators:function(e){var t=Ext.encode(e);BP.localSettings.set("chartState",t)},showChartOnPopUpWindow:function(){var e=this.view.chart.getInstrument();BP.app.getController("Window").create({internalId:"instrument-manager",title:e,options:{resizable:!0,blurClose:!0,toCenter:!0,height:560,width:770},component:{xtype:"bp-window-chart-ui",data:[]}})},isUsed:function(e){var t,n=this;return t=n.getView(),t?t.currency==e:void 0},addAllIndicatorsFromFile:function(e){var t=this,n=t.getView();Ext.defer(t.removeAllIndicators,100,n.getController()),Ext.defer(t.addAllIndicators,500,n.getController(),[n.currency]),n.chart.setPresentationType(e.defaultChartPresentationType),n.chart.setOfferSide(e.defaultChartOfferSide),n.chart.setPeriod(dc.Period[e.defaultChartPeriod])}},0,0,0,0,["controller.bp-market-chart-ui"],0,[BP.view.chart,"MarketChartUIController"],0),Ext.cmd.derive("BP.util.Format",Ext.Base,{singleton:!0,cssPrefix:"bp-",dateFormat:"d.m.Y",timeFormat:"H:i",dateRenderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),numberRenderer:Ext.util.Format.numberRenderer("0,000"),money:function(e,t){return Ext.util.Format.number(e,"0,000.00")+" "+t},percent:function(e){return Ext.util.Format.number(e,"0")+"  %"},price:function(e,t){return t=t||5,Ext.Number.toFixed(e,t)},pips:function(e){return Ext.util.Format.number(e,"0.0")+" pips"},optionType:function(e){var t=BP.util.Format.cssPrefix+("PUT"==e?"down":"up");return Ext.String.format('<span class="{0}">{1}</span>',t,e)},orderType:function(e){var t="";switch(e){case"REG":t="BINARY";break;case"TOUCH":t="TOUCH";break;default:t="-"}return t},state:function(e,t){switch(e){case"PENDING":t.tdCls="bp-icon-pending";break;case"PROCESSING":t.tdCls="bp-icon-processing";break;case"EXECUTING":t.tdCls="bp-icon-executing"}return e},gmtDate:function(e){if(!e)return"";var t=Ext.String;return t.format("{0}.{1}.{2} {3}",t.leftPad(e.getUTCDate(),2,"0"),t.leftPad(e.getUTCMonth()+1,2,"0"),t.leftPad(e.getUTCFullYear(),2,"0"),this.gmtTime(e))},gmtTime:function(e){if(!e&&!e instanceof Date)return"";var t=Ext.String;return t.format("{0}:{1}:{2}",t.leftPad(BP.localSettings.get("localTime")?e.getHours():e.getUTCHours(),2,"0"),t.leftPad(e.getUTCMinutes(),2,"0"),t.leftPad(e.getUTCSeconds(),2,"0"))},gmtDateTime:function(e){if(!e)return"";var t=Ext.String;return t.format("{0}:{1}:{2} {3}/{4}/{5}",t.leftPad(BP.localSettings.get("localTime")?e.getHours():e.getUTCHours(),2,"0"),t.leftPad(e.getUTCMinutes(),2,"0"),t.leftPad(e.getUTCSeconds(),2,"0"),t.leftPad(BP.localSettings.get("localTime")?e.getDate():e.getUTCDate(),2,"0"),t.leftPad(e.getUTCMonth()+1,2,"0"),t.leftPad(e.getUTCFullYear(),4,"0"))},gmtTimeWihoutSecond:function(e){if(!e&&!e instanceof Date)return"";var t=Ext.String;return t.format("{0}:{1}",t.leftPad(BP.localSettings.get("localTime")?e.getHours():e.getUTCHours(),2,"0"),t.leftPad(e.getUTCMinutes(),2,"0"))},gmtDateTimeWihoutSecond:function(e){if(!e)return"";var t=Ext.String;return t.format("{0}:{1} {2}/{3}/{4}",t.leftPad(BP.localSettings.get("localTime")?e.getHours():e.getUTCHours(),2,"0"),t.leftPad(e.getUTCMinutes(),2,"0"),t.leftPad(BP.localSettings.get("localTime")?e.getDate():e.getUTCDate(),2,"0"),t.leftPad(e.getUTCMonth()+1,2,"0"),t.leftPad(e.getUTCFullYear(),4,"0"))},msToString:function(e){if(!Ext.isNumber(e))return"";var t=this.msToObject(e),n=Ext.String,i="";return t.days&&(i+=t.days+"d "),t.hours&&(i+=n.leftPad(t.hours,2,"0")+":"),i+=n.leftPad(t.minutes,2,"0")+":",i+=n.leftPad(t.seconds,2,"0")},msToStringWithHours:function(e){if(!Ext.isNumber(e))return"";var t=this.msToObject(e),n=Ext.String,i="";return t.days&&(i+=t.days+"d "),i+=n.leftPad(t.hours,2,"0")+":",i+=n.leftPad(t.minutes,2,"0")+":",i+=n.leftPad(t.seconds,2,"0")},msToObject:function(e){var t=1e3,n=60*t,i=60*n,r=24*i,o={days:0,hours:0,minutes:0,seconds:0};return o.days=Math.floor(e/r),e-=o.days*r,o.hours=Math.floor(e/i),e-=o.hours*i,o.minutes=Math.floor(e/n),e-=o.minutes*n,o.seconds=Math.floor(e/t),e-=o.seconds*t,o.days<0?{days:0,hours:0,minutes:0,seconds:0}:o},progress:function(e,t,n){n=n||{};var i=new Ext.ProgressBar(n),r=n.text||"",o=(e-t)/(e/100)*.01;i.updateProgress(o,r,!0);var a=Ext.DomHelper.markup(i.getRenderTree());return Ext.destroy(i),a},instrumentRenderer:function(e){return e.getId()},amountRenderer:function(e){return Ext.util.Format.number(e,"0,000.00")},orderPay:function(e,t,n){var i,r,o=n.get("ccy");return e=BP.util.Format.money(e,o),Ext.Array.contains(["TOUCH"],n.get("orderType"))?e+" / "+n.get("payOutPerc")+"%":(i=n.get("profitLoss")||-e,r=i>0?"bp-positive":"bp-negative",i=BP.util.Format.money(i,o),e+' / <span class="'+r+'">'+i+"</span>")},orderMaturity:function(e,t,n){return t.tdAttr='data-qtip="Expected expiry: '+BP.util.Format.gmtDateTime(n.get("trigTime"))+'"',BP.util.Format.secondsToTime(60*e)},orderDistance:function(e,t,n){return n.isTOUCH()?n.isCall()?Ext.util.Format.format('<span style="direction: ltr" class="order-call-win">-{0} pips</span> / <span class="order-call-lose">-{1} pips</span>',n.get("wPips"),n.get("lPips")):Ext.util.Format.format('<span style="direction: ltr"  class="order-call-lose">{0} pips</span> / <span class="order-call-win">{1} pips</span>',n.get("lPips"),n.get("wPips")):Ext.isNumber(e)?(e>0?t.tdCls="bp-positive":t.tdCls="bp-negative",e+" pips"):""},timeStartRenderer:function(){return Ext.bind(this.gmtTime,this)},timeLeftRenderer:function(){return Ext.bind(this.msToString,this)},gmtTimeRenderer:function(e){return BP.util.Format.gmtTime(e)},gmtDateRenderer:function(e){return BP.util.Format.gmtDate(e)},gmtTimeString:function(e){e||(e=new Date);var t=BP.localSettings.get("localTime")?"":" GMT";return this.gmtTime(e)+t},splitPrice:function(e){var t=""+e;for(-1==t.indexOf(".")&&(t+=".0");t.length<10;)t+="0";var n=t.substr(0,7),i=4,r=6;return-1!==n.substring(i,r).indexOf(".")&&i--,[n.substring(0,i),n.substring(i,r),n.substring(r)]},priceRenderer:function(e){if(!e)return"";var t=BP.util.Format.splitPrice(e);return t[0]+'<span class="pips">'+t[1]+"</span>"+t[2]},bloombergSymbol:function(e,t,n,i){return e?e.split(RegExp("\\s+")).slice(t,n).join(i):e},secondsToTime:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i={hours:t,minutes:n};return i.hours?i.hours+" h "+i.minutes+" m":i.minutes+" m"},getDataTime:function(e){return{year:BP.localSettings.get("localTime")?e.getFullYear():e.getUTCFullYear(),month:BP.localSettings.get("localTime")?e.getMonth():e.getUTCMonth(),day:BP.localSettings.get("localTime")?e.getDate():e.getUTCDate(),hours:BP.localSettings.get("localTime")?e.getHours():e.getUTCHours(),minutes:BP.localSettings.get("localTime")?e.getMinutes():e.getUTCMinutes(),seconds:BP.localSettings.get("localTime")?e.getSeconds():e.getUTCSeconds()}},createWorldPartZoneLabel:function(e){if(!e)return"";var t=e.split("/");switch(t[0]){case"Europe":return"europe";case"Asia":case"Pacific":return"asia_pacific";case"America":return"america";default:return"default"}},convertToBloombergSymbol:function(e){return e?e.split(RegExp("\\s+")).slice(0,2).join(":"):e},firstToUpperCase:function(e){return e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}},0,0,0,0,0,0,[BP.util,"Format"],0),Ext.cmd.derive("BP.view.chart.MarketChartUI",Ext.panel.Panel,{cls:"bp-market-chart-ui",rtl:!1,controller:"bp-market-chart-ui",tickCount:0,layout:{type:"fit"},chartContextMenu:!1,contextMenuCfg:{shadow:!1,delayMouseLeave:1e3},contextMenuItemsCfg:{saveSettingsForInstrument:{xtype:"menuitem",text:"SAVE SETTINGS FOR INSTRUMENT",iconCls:"fa fa-info-circle"},saveSettingsForAllInstruments:{xtype:"menuitem",text:"SAVE SETTINGS FOR ALL INSTRUMENTS",iconCls:"fa fa-info-circle"}},padding:"2px 5px 5px",bodyBorder:!1,border:!1,header:!1,initChartUI:function(){window.dc&&(this.doCreateChartUI(),this.configureChartUIOptions(),this.configureChartUI(),this.doRenderChartUI(),this.doCreateChart(),this.configureChart())},initChart:function(){this.chart.init()},doCreateChartUI:function(){window.dc&&(this.chartUI=new window.dc.ChartUI)},doCreateChart:function(){window.dc&&(this.chartUI||this.doRenderChartUI(),this.chart=this.chartUI.getChart())},doRenderChartUI:function(){window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.render(this.body.el.dom))},configureChartUIOptions:function(){var e;e=BP.config("freeserv.api")||"https://freeserv.dukascopy.com/2.0/",e=(e+"").replace(/(https:\/\/|http:\/\/)/,"//"),window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.appendChartOptions({instrument:this.keyCurrency,showUI:!0,allowPeriodChange:!1,allowOfferSideChange:!1,showDetachButton:!0,filter:dc.Filter.ALL_FLATS,axisX:!0,axisY:!0,dataUnitCount:250,dataUnitWidth:5,eet:!1,timeline:!0,panOffset:10,presentationType:dc.PresentationType[this.presentationType],lineMethod:dc.LineMethod.MEDIAN,period:dc.Period[this.period],dataType:"TICK"==this.period?dc.DataType.TICK:dc.DataType.CANDLE,offerSide:dc.OfferSide[this.offerSide],additionalLegendText:this.additionalLegendText||"",theme:"dark"==this.platformTheme?dc.Theme.Predefined.Dark:dc.Theme.Predefined.Pastelle,live:!1,liveEmulation:!1,preload:!0,dataServerURI:e+"index.php?path=chart/json3",activity:!0,activitySync:!1,activitySyncId:"binary-web"}))},configureChartUI:function(){window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.showTabs(!1),this.chartUI.showLogo(!1),this.chartUI.showObjectPane(!0),this.chartUI.showInstrumentSelect(!1),this.chartUI.showLiveButton(!1),this.chartUI.watermarkImage(null),this.chartUI.setRequestsCacheEnabled(!1),this.chartUI.showThemeToolbarButton(!1),function(e){var t=e.prepareInstruments();e.chartUI.instrumentTransport(function(e,n){n(t)})}(this),this.chartUI.showPanDialog(!0),this.chartUI.showOnlineNewsButton(!1),this.chartUI.showNewsButton(!1),this.chartUI.showContextMenu(!0),this.chartUI.setMenuOutwards(!0),this.chartUI.setEnabledPopup(!1),this.chartUI.allowInstrumentChange(!1),this.chartUI.showTabsSettings(!1),this.chartUI.showDetachButton(!0),this.chartUI.allowChartWorkspaceImport(!1),this.chartUI.allowChartWorkspaceExport(!1),this.chartUI.allowSocialSharing(!1),this.chartUI.showAdditionalToolbar(!0),this.chartUI.setTime(+BP.util.Clock.getTimestamp()+1e4))},configureChart:function(){if(window.dc){this.chart||this.doCreateChart(),this.chart=this.chartUI.getChart(),this.chart.getTheme().setValueLabelBackground("#3BAE14"),this.chart.getTheme().setLastValueTrackingLineColor("#3BAE14");var e=BP.util.Clock.getTimestamp();this.chart.setDateInterval([e.getTime()-5e5,e.getTime()]),this.chart.setAutoShift(!0),Ext.isIE&&(this.chart.attachEvent=this.chart.addEventListener)}},updateInstrument:function(e){var t,n=this,i=Ext.getStore("Instruments");n.panelType&&n.updateOrders(),i&&(t=i.getById(n.currency),n.currency!=e.id&&e&&(n.currency=e.id,this.fireEvent("beforechangeinstrument",this,t,e),Ext.defer(this.fireEvent,1500,this,["afterchangeinstrument",this,e])))},updateOrdersType:function(e){var t=this;t.panelType!=e&&(t.panelType=e,t.panelType&&t.updateOrders())},initComponent:function(){this.fireEvent("initchartui",this),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},getChartContextMenu:function(){return!!this.chartContextMenu},orderObjects:{},showOrder:function(e){var t=this;t.initialized?Ext.callback(t._createOrder,t,[e]):Ext.defer(t._createOrder,2e3,t,[e])},updateOrders:function(){this.removeOrders(this.addOrders)},addOrders:function(){for(var e=this,t=Ext.getStore("ExecutingOrders"),n=t.queryRecordsBy(function(t){return t.get("orderType")==e.panelType&&t.get("instrument")==e.currency}),i=0;i<n.length;i++)e._createOrder(n[i])},removeOrders:function(e){var t=this;Ext.Object.each(this.orderObjects,function(e,n,i){i[e].figure&&t.chart.getChartObjectMonitor().deleteObject(i[e].figure),i[e].active&&t.chart.getChartObjectMonitor().deleteObject(i[e].active),delete i[e]}),Ext.callback(e,t,[],100)},_createOrder:function(e){var t=Ext.getStore("Instruments");e&&t.getById(e.get("instrument"))&&("REG"==e.data.orderType?this._showRegOrder(e):"TOUCH"==e.data.orderType&&this._showTouchOrder(e))},_showRegOrder:function(e){var t,n,i=this,r=i.chart.getChartObjectMonitor();"CALL"==e.data.optionType?(t=e.data.priceStrike+e.getInstrument().data.pipValue/10,n="#308B0E"):(t=e.data.priceStrike-e.getInstrument().data.pipValue/10,n="#BF1015");var o=new dc.drawing.Polyline([{time:e.data.startTime,value:e.data.priceStrike},{time:e.data.trigTime,value:e.data.priceStrike},{time:e.data.trigTime,value:t}]);o.setColor(n),o.setSystemUseOnly(!0),o.setStrokeWidth(2),o.setStrokeOpacity(.5),o.setPickable(!1),i.hasOrder(e)||e.get("orderType")!=i.panelType||(r.addObject(o),i.orderObjects[e.data.orderId]={figure:o,active:null})},_showTouchOrder:function(e){var t=this,n=e.isCall()?"#00bd00":"#ff0000",i=e.isCall()?"#ff0000":"#00bd00",r=t.chart.getChartObjectMonitor(),o=new dc.drawing.Rectangle([{time:+e.data.startTime,value:e.data.touchPriceSymmetric},{time:+e.data.trigTime,value:e.data.touchPrice}]);o.setStrokeOpacity(0),o.setColor("#0000ff"),o.setFillOpacity(.05),o.setPickable(!1),o.setTopBottomBorderWidth(1,1),o.setSystemUseOnly(!0),o.setTopBottomBorderColor(n,i),t.hasOrder(e)||e.get("orderType")!=t.panelType||(r.addObject(o),t.orderObjects[e.data.orderId]={figure:o,active:null})},hasOrder:function(e){return this.orderObjects.hasOwnProperty(e.data.orderId)},_removeOrder:function(e){Ext.isEmpty(this.orderObjects[e.data.orderId])||(this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[e.data.orderId].figure),this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[e.data.orderId].active),delete this.orderObjects[e.data.orderId])},activeOrderId:0,setActiveOrder:function(e){"REG"==e.data.orderType?this.setActiveRegOrder(e):"TOUCH"==e.data.orderType&&this.setActiveTouchOrder(e)},setActiveRegOrder:function(e){var t,n,i=this,r=i.chart.getChartObjectMonitor();i.activeOrderId&&i.orderObjects[i.activeOrderId]&&i.orderObjects[i.activeOrderId].active&&r.deleteObject(i.orderObjects[i.activeOrderId].active),"CALL"==e.data.optionType?(t=1*e.data.priceStrike+500*e.getInstrument().data.pipValue,n="#3BAE14"):(t=1*e.data.priceStrike-500*e.getInstrument().data.pipValue,n="#EF151A");var o=new dc.drawing.Rectangle([{time:e.data.startTime,value:e.data.priceStrike},{time:e.data.trigTime,value:t}]);o.setColor(n),o.setSystemUseOnly(!0),o.setStrokeOpacity(.5),o.setFillOpacity(.25),o.setPickable(!1),i.orderObjects[e.data.orderId].active=o,i.activeOrderId=e.data.orderId,r.addObject(o)},removeActiveOrder:function(e){"REG"==e.data.orderType?this.removeActiveRegOrder():"TOUCH"==e.data.orderType&&this.removePreviousActiveTouchOrder()},removeActiveRegOrder:function(){var e,t=this,n=this.chart.getChartObjectMonitor();t.activeOrderId&&(e=t.orderObjects[t.activeOrderId].active,n.deleteObject(e),t.activeOrderId=0)},setActiveTouchOrder:function(e){var t=this;t.hasOrder(e)&&(t.activeOrderId&&t.removePreviousActiveTouchOrder(),t.orderObjects[e.data.orderId].figure.setFillOpacity(.2),t.chart.redraw(),t.activeOrderId=e.data.orderId)},removePreviousActiveTouchOrder:function(){var e=this;e.activeOrderId&&e.orderObjects[e.activeOrderId]&&(e.orderObjects[e.activeOrderId].figure.setColor("#0000ff"),e.orderObjects[e.activeOrderId].figure.setFillOpacity(.05),e.chart.redraw(),e.activeOrderId=0)},removeObjects:function(e){var t=this.chart.getChartObjectMonitor();Ext.Object.each(e,function(e,n){t.deleteObject(n)},this)},showTouchOrder:function(e){var t=this;t.initialized?Ext.callback(t._showTouchOrder,t,[e]):Ext.defer(t._showTouchOrder,2e3,t,[e])},removeTouchOrder:function(e){Ext.isEmpty(this.orderObjects[e.data.orderId])||(this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[e.data.orderId].figure),this.orderObjects[e.data.orderId].active&&this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[e.data.orderId].active),delete this.orderObjects[e.data.orderId])},prepareInstruments:function(){var e,t,n,i,r,o,a=this.availableInstruments,s={instruments:{},groups:{},tags:[]};if(r=BP.Bootstrap.getChartInstruments().instruments,o=BP.Bootstrap.getChartInstruments().groups,e=a.length,!e)return s;for(i=0;e>i;i++)t=a[i],t&&(n=r[t],n&&(n.title=n.name,s.instruments[t]=n));return s.groups=o,s}},0,["bp-market-chart-ui"],["component","box","container","panel","bp-market-chart-ui"],{component:!0,box:!0,container:!0,panel:!0,"bp-market-chart-ui":!0},["widget.bp-market-chart-ui"],0,[BP.view.chart,"MarketChartUI"],0),Ext.cmd.derive("BP.data.Store",Ext.data.Store,{proxy:"memory",getById:function(e){var t;return e?(t=this.snapshot||this.data,t.map[e]):void 0},getAll:function(){var e;return e=this.snapshot||this.data,e.items},fastRemove:function(e){var t;return e?(t=this.data.items.indexOf(e),this.snapshot&&this.snapshot.remove(e),e.unjoin(this),this.data.removeAt(t),e=null,this.sync(),t):!1},fastInsert:function(e){var t,n,i,r,o,a,s=this,l=s.modelDefaults;if(o=Ext.isIterable(e)?[]:e=[e],n=e.length){for(t=0;n>t;t++)i=e[t],i.isModel||(s.removeUndefined(i),s.model.prototype.checkInputData&&(i=s.model.prototype.checkInputData(i)),i=s.createModel(i)),o[t]=i,l&&(i.suspendEvents(),i.set(l),i.resumeEvents()),i.join(s);r=s.data.length,s.data.insert(r,o),s.snapshot&&(r=s.snapshot.length,s.snapshot.insert(r,o))}return s.filters.length&&(a=s.filters.items,n=a.length,s.clearFilter(!0),s.filter(a)),o[0]},removeUndefined:function(e){for(var t in e)void 0===e[t]&&delete e[t]}},0,0,0,0,0,0,[BP.data,"Store"],0),Ext.cmd.derive("BP.model.Base",Ext.data.Model,{fields:[{name:"id",type:"int"}],schema:{namespace:"BP.model"},updateCurrentData:function(e){if(e){var t,n=this;for(t in e)n.fieldsMap[t]&&(this.data[t]=e[t])}}},0,0,0,0,0,0,[BP.model,"Base"],0),Ext.cmd.derive("BP.model.Instrument",BP.model.Base,{idProperty:"instrument",fields:[{name:"instrument",type:"string"},{name:"description",type:"string"},{name:"pipValue",type:"float"},{name:"priceScale",type:"int"},{name:"currency",type:"string"},{name:"status",type:"string",defaultValue:""},{name:"type",type:"string"},{name:"position",type:"int"},{name:"askPrice",type:"float",defaultValue:0},{name:"askAmount",type:"float",defaultValue:0},{name:"bidPrice",type:"float",defaultValue:0},{name:"bidAmount",type:"float",defaultValue:0},{name:"timestamp",type:"int"},{name:"fulltext",type:"string",convert:function(e,t){return t.data.instrument+" "+t.data.description}}],getPrimary:function(){return this.getId().split("/")[0]},getSecondary:function(){var e=this.getId().split("/");return e[1]?e[1]:void 0},isTradable:function(){return"TRADING_ALLOWED"==this.get("status")},getMarketTick:function(){return Ext.getStore("Market").getById(this.getId())},getMarketPrice:function(e){var t=this.getMarketTick();return t?t.get(e.toLowerCase()+"Price"):void 0},getChartSettings:function(){return Ext.getStore("ChartSettings").getById(this.getId())}},0,0,0,0,0,0,[BP.model,"Instrument"],0),Ext.cmd.derive("BP.store.Instruments",BP.data.Store,{model:"BP.model.Instrument",sorters:[{property:"type",direction:"ASC"},{property:"instrument",direction:"ASC"}],data:[{instrument:"FRA.IDX/EUR",fulltext:"FRA.IDX/EUR France 40 Index",type:"FX_CCY"},{instrument:"EUR/USD",fulltext:"EUR/USD Euro vs US Dollar",type:"FX_CCY"},{instrument:"GBP/USD",fulltext:"GBP/USD Pound Sterling vs US Dollar",type:"FX_CCY"},{instrument:"NZD/USD",fulltext:"NZD/USD New Zealand Dollar vs US Dollar",type:"CFD"}]},0,0,0,0,0,0,[BP.store,"Instruments"],0),Ext.cmd.derive("BP.controller.InstrumentManager",Ext.app.Controller,{stores:["Instruments"],doAfterCreateViewport:function(){BP.getTransport().on({scope:this,instrumentstatusupdatemessage:"onChangeInstrumentStatus",cm:"onInstrument"})},onChangeInstrumentStatus:function(e){var t=this;if(t.disableTradingForEU(e),e.instrument){if(t.bufferStatus=t.bufferStatus||{},t.bufferStatus[e.instrument])return void(t.bufferStatus[e.instrument]=e);t.bufferStatus[e.instrument]=e,setTimeout(function(){t.doUpdateInstrument({instrument:t.bufferStatus[e.instrument].instrument,status:t.bufferStatus[e.instrument].state}),t.fireEvent("instrumentstatusupdate",t.bufferStatus[e.instrument].instrument,t.bufferStatus[e.instrument].state),t.bufferStatus[e.instrument]=!1},500)}},disableTradingForEU:function(e){var t=new Date,n=new Date(2018,5,14),i=new Date(2018,5,19),r=new Date(2018,5,30);return"europe"==BP.whiteLabel&&"PRE"==BP.config("instance")&&t>n?e.state="TRADING_TEMPORARY_BLOCKED":"europe"==BP.whiteLabel&&"DEMO"==BP.config("instance")&&t>i?e.state="TRADING_TEMPORARY_BLOCKED":"europe"==BP.whiteLabel&&"LIVE"==BP.config("instance")&&t>r&&(e.state="TRADING_TEMPORARY_BLOCKED"),e.state},onInstrument:function(e){this.doRemapData(e),this.doChangeInstrument(e)},doRemapData:function(e){e.p&&e.s&&(e.instrument=e.p+"/"+e.s,delete e.p,delete e.s),e.t&&(e.timestamp=e.t,delete e.t),e.aa&&(e.askAmount=e.aa[0]||0),e.ba&&(e.bidAmount=e.ba[0]||0),e.ap&&(e.askPrice=e.ap[0]||0),e.bp&&(e.bidPrice=e.bp[0]||0),e.apa&&e.apb&&(e.isDepth=!0)},doChangeInstrument:function(e){var t,n;e.instrument&&(t=this.getStore("Instruments"),n=this.getInstrumentById(e.instrument,t),this.fireEvent("pricetick",{instrument:e.instrument,askPrice:e.askPrice,bidPrice:e.bidPrice,timestamp:e.timestamp,force:e.force||!1}),n?this.doUpdateInstrument(e,t,n):this.doAddInstrument(e,t))},doAddInstrument:function(e,t){var n;e.instrument&&(t=t||this.getStore("Instruments"),Ext.suspendLayouts(),t.suspendEvents(),n=t.fastInsert(e),e.askPrice&&e.bidPrice&&this.getController("MarketTickManager").fireEvent("markettick",n),t.resumeEvents(),Ext.resumeLayouts(!1),this.fireEvent("addinstrument",n))},doUpdateInstrument:function(e,t,n){e.instrument&&(t=t||this.getStore("Instruments"),n=n||this.getInstrumentById(e.instrument,t),n&&(Ext.suspendLayouts(),t.suspendEvents(),n.updateCurrentData(e),e.askPrice&&e.bidPrice&&this.getController("MarketTickManager").fireEvent("markettick",n),t.resumeEvents(),Ext.resumeLayouts(!1)))},doRemoveInstrument:function(e,t){var n,i;e&&(t=t||this.getStore("Instruments"),n=n||this.getInstrumentById(e,t),n&&(this.fireEvent("removeinstrument",n),Ext.suspendLayouts(),t.suspendEvents(),i=t.fastRemove(n),n=null,t.resumeEvents(),Ext.resumeLayouts(!1)))},getInstrumentById:function(e,t){var n;return e?(t=t||this.getStore("Instruments"),n=t.data,n.map[e]):void 0},getAllInstrument:function(e){var t;return e=e||this.getStore("Instruments"),t=e.snapshot||e.data,t.items}},0,0,0,0,0,0,[BP.controller,"InstrumentManager"],0),Ext.cmd.derive("BP.model.JCloud",BP.model.Base,{idPrefix:"JCLOUD",idProperty:"communityUserId",fields:[{name:"communityUserId",type:"string"},{name:"communityLoginName",type:"string"},{name:"accountId",type:"string"},{name:"communityUserName",type:"string"},{name:"created",type:"int"},{name:"ownerUserId",type:"string"},{name:"createdParentFolderStorage",type:"int"},{name:"lastModifiedParentFolderStorage",type:"int"},{name:"idParentFolderStorage",type:"string"},{name:"createdSettingsFolderStorage",type:"int"},{name:"lastModifiedSettingsFolderStorage",type:"int"},{name:"idSettingsFolderStorage",type:"string"},{name:"createdSettingsFileStorage",type:"int"},{name:"lastModifiedSettingsFileStorage",type:"int"},{name:"idSettingsFileStorage",type:"string"},{name:"nameSettingsFileStorage",type:"string"},{name:"createdSettingsVersionFileStorage",type:"int"},{name:"lastModifiedSettingsVersionFileStorage",type:"int"},{name:"idSettingsVersionFileStorage",type:"string"},{name:"nameSettingsVersionFileStorage",type:"string"},{name:"sizeSettingsVersionFileStorage",type:"int"},{name:"storedSizeSettingsVersionFileStorage",type:"int"},{name:"settingsLoaded",type:"boolean",defaultValue:!1}]},0,0,0,0,0,0,[BP.model,"JCloud"],0),Ext.cmd.derive("BP.store.JCloud",Ext.data.Store,{model:"BP.model.JCloud"},0,0,0,0,0,0,[BP.store,"JCloud"],0),Ext.cmd.derive("BP.controller.JCloudManager",Ext.app.Controller,{parentFolderStorage:"System",settingsFolderStorage:"Binary",stores:["JCloud"],initEvents:function(){BP.getTransport().on({listlevelresponsemessage:this.onListLevel,loadcommunityuserresponsemessage:this.onLoadCommunityUser,createfolderresponsemessage:this.onCreateFolder,editfolderresponsemessage:this.onEditFolder,deletefolderresponsemessage:this.onDeleteFolder,createfileheaderchunkedresponsemessage:this.onCreateFileHeaderChunked,editfileheaderresponsemessage:this.onEditFileHeader,downloadversioncontentchunkedresponsemessage:this.onDownloadVersionContentChunked,loadversionsresponsemessage:this.onLoadVersions,loadkeysresponsemessage:this.onLoadKeys,createversionchunkedresponsemessage:this.onCreateVersionChunked,editversionresponsemessage:this.onEditVersion,deleteversionresponsemessage:this.onDeleteVersion,deletefileheaderresponsemessage:this.onDeleteFileHeader,rewriteversioncontentchunkedresponsemessage:this.onRewriteVersionContentChunked,scope:this})},getParentFolderStorage:function(){return BP.config("jcloud.parentFolderStorage")||this.parentFolderStorage},getSettingsFolderStorage:function(){return BP.config("jcloud.settingsFolderStorage")||this.settingsFolderStorage},onListLevel:function(e){var t,n,i;if(BP.localSettings.get("storeJCloud")===!0){if(e.schemasSlice&&e.schemasSlice.length)for(t=e.schemasSlice.length,i=this.getAccount(),n=0;t>n;n++)if(e.schemasSlice[n]&&e.schemasSlice[n].communityLoginName==i.get("communityUserName"))return this.onCommunityAccountData({created:e.schemasSlice[n].created,ownerUserId:e.schemasSlice[n].ownerUserId}),void BP.getTransport().getJCloudListLevel(e.schemas[n].ownerUserId);this.actionEndJCloud()}},actionEndJCloud:function(e){BP.localSettings.set("storeJCloud",!!e),BP.getTransport().setStoreJCloudSuccess(!0),Ext.ComponentQuery.query("bp-app").length||(BP.getTransport().fireEvent("authorized"),BP.getTransport().afterAllowAuthorized())},onLoadCommunityUser:function(e){BP.localSettings.get("storeJCloud")===!0&&(e.communityAccountLink?(this.onCommunityAccountData(e.communityAccountLink),BP.getTransport().loadCommunitySchemas()):(Ext.select(".bp-preload").elements.length||BP.util.PopupMessage("connect to FO","SRPa to FO"),this.actionEndJCloud()))},onCreateFolder:function(){},onEditFolder:function(){},onDeleteFolder:function(){},onCreateFileHeaderChunked:function(){},onEditFileHeader:function(){},onDownloadVersionContentChunked:function(){},onLoadVersions:function(){},onLoadKeys:function(){},onCreateVersionChunked:function(){},onEditVersion:function(){},onDeleteVersion:function(){},onDeleteFileHeader:function(){},onRewriteVersionContentChunked:function(){},getAccount:function(e){var t;return e=e||this.getStore("JCloud"),t=e.snapshot||e.data,t.getAt(0)},onCommunityAccountData:function(e){var t,n;t=this.getStore("JCloud"),n=this.getAccount(t),n?this.doUpdateCommunityAccount(e,t,n):this.doAddCommunityAccount(e,t)},doAddCommunityAccount:function(e,t){var n;t=t||this.getStore("JCloud"),Ext.suspendLayouts(),t.suspendEvents(),n=t.add(e),t.resumeEvents(),Ext.resumeLayouts(!1)},doUpdateCommunityAccount:function(e,t,n){t=t||this.getStore("JCloud"),n=n||this.getAccount(t),n&&(Ext.suspendLayouts(),t.suspendEvents(),n.updateCurrentData(e),t.resumeEvents(),Ext.resumeLayouts(!1))}},0,0,0,0,0,0,[BP.controller,"JCloudManager"],0),Ext.cmd.derive("BP.model.Logging",BP.model.Base,{idPrefix:"LOGGING",idProperty:"id",fields:[{name:"id",type:"string"},{name:"type",type:"string",defaultValue:"message"},{name:"message",type:"string"},{name:"orderType",type:"string"},{name:"clickType",type:"string"},{name:"clickMode",type:"string"},{name:"instrument",type:"string"},{name:"direction",type:"string"},{name:"stopDirectionTP",type:"string"},{name:"stopDirectionSL",type:"string"},{name:"stopDirection",type:"string"},{name:"origStopDirection",type:"string"},{name:"side",type:"string"},{name:"orderId",type:"string"},{name:"origOrderId",type:"string"},{name:"amount",type:"float",defaultValue:-1},{name:"origAmount",type:"float",defaultValue:-1},{name:"priceTrailingLimit",type:"float",defaultValue:-1},{name:"origPriceTrailingLimit",type:"float",defaultValue:-1},{name:"priceLimit",type:"float",defaultValue:-1},{name:"origPriceLimit",type:"float",defaultValue:-1},{name:"priceStopSL",type:"float",defaultValue:-1},{name:"priceStopTP",type:"float",defaultValue:-1},{name:"priceStop",type:"float",defaultValue:-1},{name:"origPriceStop",type:"float",defaultValue:-1},{name:"platfPrice",type:"float",defaultValue:-1},{name:"priceClient",type:"float",defaultValue:-1},{name:"origPriceClient",type:"float",defaultValue:-1},{name:"delay",type:"int",defaultValue:-1},{name:"execTimeoutMillis",type:"int",defaultValue:-1},{name:"origExecTimeoutMillis",type:"int",defaultValue:-1},{name:"platformTime",type:"int"},{name:"timezoneOffset",type:"int"},{name:"origVersion",type:"string"},{name:"origSessionId",type:"string"},{name:"origLogin",type:"string"},{name:"locale",type:"string"},{name:"headerStatusText",type:"string"},{name:"errorCode",type:"int",defaultValue:-1},{name:"headerStatus",type:"int",defaultValue:-1},{name:"headerStatusText",type:"string"},{name:"codeNotice",type:"string"},{name:"levelNotice",type:"string"},{name:"userId",type:"string"},{name:"accountLoginId",type:"string"},{name:"userEquity",type:"float"},{name:"externalSysId",type:"string"},{name:"activeActions",type:"string"},{name:"subscribedInstrument",type:"string"},{name:"unsubscribedInstrument",type:"string"},{name:"ignoredInstrument",type:"string"},{name:"notAllowedInstrument",type:"string"},{name:"amountOrder",type:"float",defaultValue:-1},{name:"origAmountOrder",type:"float",defaultValue:-1},{name:"sources",type:"string"},{name:"subscribedSources",type:"string"},{name:"unsubscribedSources",type:"string"},{name:"languages",type:"string"},{name:"keywords",type:"string"},{name:"indicies",type:"string"},{name:"from",type:"int",defaultValue:-1},{name:"to",type:"int",defaultValue:-1},{name:"hot",type:"boolean"},{name:"notResponse",type:"boolean"},{name:"userAgent",type:"string"},{name:"userScreen",type:"string"},{name:"userUrl",type:"string"},{name:"chartVersion",type:"string"},{name:"indicatorKey",type:"string"}]},0,0,0,0,0,0,[BP.model,"Logging"],0),Ext.cmd.derive("BP.store.Logging",Ext.data.Store,{model:"BP.model.Logging"},0,0,0,0,0,0,[BP.store,"Logging"],0),Ext.cmd.derive("BP.controller.LoggerManager",Ext.app.Controller,{countId:1e3,stores:["Logging"],init:function(){BP.Bootstrap.initNotAuthLogging()},onMessage:function(e){e.message&&(this.doRemapData(e),this.doAddMessage(e))},doRemapData:function(e){var t,n;e.timezoneOffset=BP.util.Clock.getTZOffset(),e.platformTime=e.platfTime||BP.util.Clock.getServerTS(),delete e.platfTime,e.id="BP-"+e.platformTime+"-"+ ++this.countId,e.timestamp=e.platformTime,e.origVersion=BP.config("app.version"),e.origSessionId=BP.Bootstrap.getSessionId(),n||(t=Ext.ComponentQuery.query("bp-window-login textfield[name=login]")[0],t&&(n=t.getValue()),BP.localSettings.id&&(n=BP.localSettings.get("login"))),n&&(e.origLogin=e.origLogin||n)},doRestore:function(e){var t,n,i;if(Ext.isArray(e)&&(i=e.length)){for(t=0;i>t;t++)e[t]&&this.doAddMessage(e[t],null,!0);n=Ext.isFunction(BP.getLogger)?BP.getLogger():"",n&&n.fireEvent("send")}},doAddMessage:function(e,t){e.message&&(t=Ext.getStore("Logging"),
t.suspendEvents(),t.add(e),t.resumeEvents())},doRemoveMessage:function(e,t){var n;e&&(t=t||this.getStore("Logging"),n=this.getMessageById(e,t),n&&(t.suspendEvents(),t.remove(n),t.resumeEvents()))},getMessageById:function(e,t){var n;return e?(t=t||this.getStore("Logging"),n=t.data,n.map[e]):void 0},getAllMessage:function(e,t){var n;return e=e||"ASC",t=t||Ext.getStore("Logging"),t.sort("platformTime",e),n=t.data,n.items},registerData:function(e,t,n,i){var r;e&&(this.groupData=this.groupData||{},this.groupData[e]=this.groupData[e]||[],r={sendMessage:t},n&&(r.oldData=n),i&&(r.fieldParams=i),n=n||{},n.instrument&&(r.instrument=n.instrument),n.orderGroupId&&(r.orderGroupId=n.orderGroupId),n.orderId&&(r.orderId=n.orderId),this.groupData[e].push(r),void 0==this.removeTimerId&&(this.removeTimerId=setInterval(function(){},6e4)),t=n=null)}},0,0,0,0,0,0,[BP.controller,"LoggerManager"],0),Ext.cmd.derive("BP.controller.MarketTickManager",Ext.app.Controller,{init:function(){this.on({markettick:{fn:this.onMarketTick}})},onMarketTick:function(e){this.fireEvent("tick",e)}},0,0,0,0,0,0,[BP.controller,"MarketTickManager"],0),Ext.cmd.derive("BP.model.Messages",BP.model.Base,{idPrefix:"MESSAGES",idProperty:"id",fields:[{name:"text",type:"string",defaultValue:"message"},{name:"timestamp",type:"date",dateFormat:"time"},{name:"level",type:"string",defaultValue:""},{name:"ttl",type:"int",defaultValue:""}],checkTTL:function(e){var t=this,n=+t.get("timestamp")+t.get("ttl");return+e>n}},0,0,0,0,0,0,[BP.model,"Messages"],0),Ext.cmd.derive("BP.store.Messages",Ext.data.Store,{model:"BP.model.Messages"},0,0,0,0,0,0,[BP.store,"Messages"],0),Ext.cmd.derive("BP.controller.MessageManager",Ext.app.Controller,{refs:[],stores:["Messages"],init:function(){this.control({"bp-messages":{afterrender:"onAfterRenderMessage"}})},onAfterRenderMessage:function(e){var t;t=BP.getTransport().on({destroyable:!0,notificationmessage:this.onNotification,personalnotificationmessage:this.onPersonalNotification,orders:this.onPersonalNotification,errorresponsemessage:this.errorResponse,scope:this}),e.addDestroyableListeners(t)},onPersonalNotification:function(e){var t;t=this.getStore("Messages"),e.text=e.text||e.reason,this.doAddMessage(e,t)},onNotification:function(e){var t;t=this.getStore("Messages"),this.doAddMessage(e,t)},errorResponse:function(e){var t;t=this.getStore("Messages"),e.code="ERROR_RESPONSE",e.text=e.text||e.reason,this.doAddMessage(e,t)},doAddMessage:function(e,t){t=t||this.getStore("Messages"),Ext.suspendLayouts(),e.text&&(e.text=Ext.util.Format.trim(e.text),e.text=Ext.util.Format.stripTags(e.text),e.text=e.text.replace(/(?:\r\n|\r|\n)/g," ")),Ext.resumeLayouts(!1)},doRemoveMessage:function(e,t){var n,i,r,o;e&&(t=t||this.getStore("Messages"),i=t.snapshot||t.data,n=i.map[e],n&&(Ext.suspendLayouts(),t.suspendEvents(),r=t.fastRemove(n),o=this.getController("FilterManager"),i=t.snapshot||t.data,1==i.length&&o.doControlDisableMessageFilter(t),this.getController("message.Grid").fireEvent("domfastremove",r,n),n=null,t.resumeEvents(),Ext.resumeLayouts(!1)))},addUserMessage:function(e,t,n){var i,r={};e&&(i=new Date,t=t||"INFOCLIENT",n=n||"USER_NOTICE",r.timestamp=i.getTime(),r.level=t,r.code=n,r.text=e,this.doAddMessage(r))}},0,0,0,0,0,0,[BP.controller,"MessageManager"],function(e){!function(t,n){"use strict";var i,r,o,a=t,s=a.document,l=a.navigator,d=a.setTimeout,u=a.clearTimeout,c=a.setInterval,h=a.clearInterval,p=a.getComputedStyle,f=a.encodeURIComponent,g=a.ActiveXObject,m=a.Error,x=a.Number.parseInt||a.parseInt,v=a.Number.parseFloat||a.parseFloat,y=a.Number.isNaN||a.isNaN,E=a.Date.now,b=a.Object.keys,C=a.Object.defineProperty,w=a.Object.prototype.hasOwnProperty,S=a.Array.prototype.slice,T=function(){var e=function(e){return e};if("function"==typeof a.wrap&&"function"==typeof a.unwrap)try{var t=s.createElement("div"),n=a.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=a.unwrap)}catch(i){}return e}(),P=function(e){return S.call(e,0)},I=function(){var e,t,i,r,o,a,s=P(arguments),l=s[0]||{};for(e=1,t=s.length;t>e;e++)if(null!=(i=s[e]))for(r in i)w.call(i,r)&&(o=l[r],a=i[r],l!==a&&a!==n&&(l[r]=a));return l},k=function(e){var t,n,i,r;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,i=e.length;i>n;n++)w.call(e,n)&&(t[n]=k(e[n]));else{t={};for(r in e)w.call(e,r)&&(t[r]=k(e[r]))}return t},B=function(e,t){for(var n={},i=0,r=t.length;r>i;i++)t[i]in e&&(n[t[i]]=e[t[i]]);return n},M=function(e,t){var n={};for(var i in e)-1===t.indexOf(i)&&(n[i]=e[i]);return n},D=function(e){if(e)for(var t in e)w.call(e,t)&&delete e[t];return e},R=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},A=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},F=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},L=function(){var e,t;try{throw new m}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||F(t.stack)),e},O=function(){var e,t,i;if(s.currentScript&&(e=s.currentScript.src))return e;if(t=s.getElementsByTagName("script"),1===t.length)return t[0].src||n;if("readyState"in t[0])for(i=t.length;i--;)if("interactive"===t[i].readyState&&(e=t[i].src))return e;return"loading"===s.readyState&&(e=t[t.length-1].src)?e:(e=L())?e:n},V=function(){var e,t,i,r=s.getElementsByTagName("script");for(e=r.length;e--;){if(!(i=r[e].src)){t=null;break}if(i=A(i),null==t)t=i;else if(t!==i){t=null;break}}return t||n},N=function(){var e=A(O())||V()||"";return e+"ZeroClipboard.swf"},H=function(){var e=/win(dows|[\s]?(nt|me|ce|xp|vista|[\d]+))/i;return!!l&&(e.test(l.appVersion||"")||e.test(l.platform||"")||-1!==(l.userAgent||"").indexOf("Windows"))},z=function(){return null==t.opener&&(!!t.top&&t!=t.top||!!t.parent&&t!=t.parent)}(),W={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},_="11.0.0",U={},j={},q=null,G=0,K=0,X={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},$=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],Y=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],Q=RegExp("^flash-("+Y.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Z=RegExp("^flash-("+Y.slice(1).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),J={swfPath:N(),trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,fixLineEndings:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},ee=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(w.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents|fixLineEndings)$/.test(t))J[t]=e[t];else if(null==W.bridge)if("containerId"===t||"swfObjectId"===t){if(!ge(e[t]))throw Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");J[t]=e[t]}else J[t]=e[t];return"string"==typeof e&&e?w.call(J,e)?J[e]:void 0:k(J)},te=function(){return Xe(),{browser:B(l,["userAgent","platform","appName","appVersion"]),flash:M(W,["bridge"]),zeroclipboard:{version:Ye.version,config:Ye.config()}}},ne=function(){return!!(W.disabled||W.outdated||W.sandboxed||W.unavailable||W.degraded||W.deactivated)},ie=function(e,t){var r,o,a,s={};if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(r in e)w.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&Ye.on(r,e[r]);if(a&&a.length){for(r=0,o=a.length;o>r;r++)e=a[r].replace(/^on/,""),s[e]=!0,U[e]||(U[e]=[]),U[e].push(t);if(s.ready&&W.ready&&Ye.emit({type:"ready"}),s.error){for(r=0,o=Y.length;o>r;r++)if(W[Y[r].replace(/^flash-/,"")]===!0){Ye.emit({type:"error",name:Y[r]});break}i!==n&&Ye.version!==i&&Ye.emit({type:"error",name:"version-mismatch",jsVersion:Ye.version,swfVersion:i})}}return Ye},re=function(e,t){var n,i,r,o,a;if(0===arguments.length)o=b(U);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)w.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&Ye.off(n,e[n]);if(o&&o.length)for(n=0,i=o.length;i>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=U[e],a&&a.length)if(t)for(r=a.indexOf(t);-1!==r;)a.splice(r,1),r=a.indexOf(t,r);else a.length=0;return Ye},oe=function(e){var t;return t="string"==typeof e&&e?k(U[e])||null:k(U)},ae=function(e){var t,n,i;return e=me(e),e&&!we(e)?"ready"===e.type&&W.overdue===!0?Ye.emit({type:"error",name:"flash-overdue"}):(t=I({},e),be.call(this,t),"copy"===e.type&&(i=De(j),n=i.data,q=i.formatMap),n):void 0},se=function(){var e=W.sandboxed;if(Xe(),"boolean"!=typeof W.ready&&(W.ready=!1),W.sandboxed!==e&&W.sandboxed===!0)W.ready=!1,Ye.emit({type:"error",name:"flash-sandboxed"});else if(!Ye.isFlashUnusable()&&null===W.bridge){var t=J.flashLoadTimeout;"number"==typeof t&&t>=0&&(G=d(function(){"boolean"!=typeof W.deactivated&&(W.deactivated=!0),W.deactivated===!0&&Ye.emit({type:"error",name:"flash-deactivated"})},t)),W.overdue=!1,Be()}},le=function(){Ye.clearData(),Ye.blur(),Ye.emit("destroy"),Me(),Ye.off()},de=function(e,t){var n;if("object"==typeof e&&e&&void 0===t)n=e,Ye.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var i in n)"string"==typeof i&&i&&w.call(n,i)&&"string"==typeof n[i]&&n[i]&&(j[i]=Ke(n[i]))},ue=function(e){void 0===e?(D(j),q=null):"string"==typeof e&&w.call(j,e)&&delete j[e]},ce=function(e){return void 0===e?k(j):"string"==typeof e&&w.call(j,e)?j[e]:void 0},he=function(e){if(e&&1===e.nodeType){r&&(He(r,J.activeClass),r!==e&&He(r,J.hoverClass)),r=e,Ne(e,J.hoverClass);var t=e.getAttribute("title")||J.title;if("string"==typeof t&&t){var n=ke(W.bridge);n&&n.setAttribute("title",t)}var i=J.forceHandCursor===!0||"pointer"===ze(e,"cursor");qe(i),je()}},pe=function(){var e=ke(W.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),r&&(He(r,J.hoverClass),He(r,J.activeClass),r=null)},fe=function(){return r||null},ge=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},me=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=o),I(e,{type:t,target:e.target||r||null,relatedTarget:e.relatedTarget||null,currentTarget:W&&W.bridge||null,timeStamp:e.timeStamp||E()||null});var n=X[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&I(e,{target:null,version:W.version}),"error"===e.type&&(Q.test(e.name)&&I(e,{target:null,minimumVersion:_}),Z.test(e.name)&&I(e,{version:W.version})),"copy"===e.type&&(e.clipboardData={setData:Ye.setData,clearData:Ye.clearData}),"aftercopy"===e.type&&(e=Re(e,q)),e.target&&!e.relatedTarget&&(e.relatedTarget=xe(e.target)),ve(e)}},xe=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?s.getElementById(t):null},ve=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var t=e.target,i="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:n,r="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:n,o=We(t),l=a.screenLeft||a.screenX||0,d=a.screenTop||a.screenY||0,u=s.body.scrollLeft+s.documentElement.scrollLeft,c=s.body.scrollTop+s.documentElement.scrollTop,h=o.left+("number"==typeof e._stageX?e._stageX:0),p=o.top+("number"==typeof e._stageY?e._stageY:0),f=h-u,g=p-c,m=l+f,x=d+g,v="number"==typeof e.movementX?e.movementX:0,y="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,I(e,{srcElement:t,fromElement:i,toElement:r,screenX:m,screenY:x,pageX:h,pageY:p,clientX:f,clientY:g,x:f,y:g,movementX:v,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ye=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},Ee=function(e,t,n,i){i?d(function(){e.apply(t,n)},0):e.apply(t,n)},be=function(e){if("object"==typeof e&&e&&e.type){var t=ye(e),n=U["*"]||[],i=U[e.type]||[],r=n.concat(i);if(r&&r.length){var o,s,l,d,u,c=this;for(o=0,s=r.length;s>o;o++)l=r[o],d=c,"string"==typeof l&&"function"==typeof a[l]&&(l=a[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(d=l,l=l.handleEvent),"function"==typeof l&&(u=I({},e),Ee(l,d,[u],t))}return this}},Ce=function(e){var t=null;return(z===!1||e&&"error"===e.type&&e.name&&-1!==$.indexOf(e.name))&&(t=!1),t},we=function(e){var t=e.target||r||null,n="swf"===e._source;switch(delete e._source,e.type){case"error":var a="flash-sandboxed"===e.name||Ce(e);"boolean"==typeof a&&(W.sandboxed=a),-1!==Y.indexOf(e.name)?I(W,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(i=e.swfVersion,I(W,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Ue();break;case"ready":i=e.swfVersion;var s=W.deactivated===!0;I(W,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:s,ready:!s}),Ue();break;case"beforecopy":o=t;break;case"copy":var l,d,u=e.relatedTarget;!j["text/html"]&&!j["text/plain"]&&u&&(d=u.value||u.outerHTML||u.innerHTML)&&(l=u.value||u.textContent||u.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),d!==l&&e.clipboardData.setData("text/html",d)):!j["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":Se(e),Ye.clearData(),t&&t!==Ve()&&t.focus&&t.focus();break;case"_mouseover":Ye.focus(t),J.bubbleEvents===!0&&n&&(t&&t!==e.relatedTarget&&!R(e.relatedTarget,t)&&Te(I({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),Te(I({},e,{type:"mouseover"})));break;case"_mouseout":Ye.blur(),J.bubbleEvents===!0&&n&&(t&&t!==e.relatedTarget&&!R(e.relatedTarget,t)&&Te(I({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),Te(I({},e,{type:"mouseout"})));break;case"_mousedown":Ne(t,J.activeClass),J.bubbleEvents===!0&&n&&Te(I({},e,{type:e.type.slice(1)}));break;case"_mouseup":He(t,J.activeClass),J.bubbleEvents===!0&&n&&Te(I({},e,{type:e.type.slice(1)}));break;case"_click":o=null,J.bubbleEvents===!0&&n&&Te(I({},e,{type:e.type.slice(1)}));break;case"_mousemove":J.bubbleEvents===!0&&n&&Te(I({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},Se=function(e){if(e.errors&&e.errors.length>0){var t=k(e);I(t,{type:"error",name:"clipboard-error"}),delete t.success,d(function(){Ye.emit(t)},0)}},Te=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,i=n&&n.ownerDocument||s,r={view:i.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:i.createEvent?0:1},o=I(r,e);n&&i.createEvent&&n.dispatchEvent&&(o=[o.type,o.canBubble,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget],t=i.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,o),t._source="js",n.dispatchEvent(t)))}},Pe=function(){var e=J.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=J.swfObjectId+"_fallbackContent";K=c(function(){var e=s.getElementById(n);_e(e)&&(Ue(),W.deactivated=null,Ye.emit({type:"error",name:"swf-not-found"}))},t)}},Ie=function(){var e=s.createElement("div");return e.id=J.containerId,e.className=J.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+Ge(J.zIndex),e},ke=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Be=function(){var e,t=W.bridge,n=ke(t);if(!t){var i=Oe(a.location.host,J),r="never"===i?"none":"all",o=Fe(I({jsVersion:Ye.version},J)),l=J.swfPath+Ae(J.swfPath,J);n=Ie();var d=s.createElement("div");n.appendChild(d),s.body.appendChild(n);var u=s.createElement("div"),c="activex"===W.pluginType;u.innerHTML='<object id="'+J.swfObjectId+'" name="'+J.swfObjectId+'" width="100%" height="100%" '+(c?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(c?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+i+'"/><param name="allowNetworking" value="'+r+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+o+'"/><div id="'+J.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=u.firstChild,u=null,T(t).ZeroClipboard=Ye,n.replaceChild(t,d),Pe()}return t||(t=s[J.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),W.bridge=t||null,t},Me=function(){var e=W.bridge;if(e){var t=ke(e);t&&("activex"===W.pluginType&&"readyState"in e?(e.style.display="none",function r(){if(4===e.readyState){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else d(r,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),Ue(),W.ready=null,W.bridge=null,W.deactivated=null,i=n}},De=function(e){var t={},n={};if("object"==typeof e&&e){for(var i in e)if(i&&w.call(e,i)&&"string"==typeof e[i]&&e[i])switch(i.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[i],n.text=i;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[i],n.html=i;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[i],n.rtf=i}return{data:t,formatMap:n}}},Re=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var i in e)if(w.call(e,i))if("errors"===i){n[i]=e[i]?e[i].slice():[];for(var r=0,o=n[i].length;o>r;r++)n[i][r].format=t[n[i][r].format]}else if("success"!==i&&"data"!==i)n[i]=e[i];else{n[i]={};var a=e[i];for(var s in a)s&&w.call(a,s)&&w.call(t,s)&&(n[i][t[s]]=a[s])}return n},Ae=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+E():""},Fe=function(e){var t,n,i,r,o="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?r=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(r=e.trustedDomains)),r&&r.length)for(t=0,n=r.length;n>t;t++)if(w.call(r,t)&&r[t]&&"string"==typeof r[t]){if(i=Le(r[t]),!i)continue;if("*"===i){s.length=0,s.push(i);break}s.push.apply(s,[i,"//"+i,a.location.protocol+"//"+i])}return s.length&&(o+="trustedOrigins="+f(s.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+f(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(o+=(o?"&":"")+"jsVersion="+f(e.jsVersion)),o},Le=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},Oe=function(){var e=function(e){var t,n,i,r=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return r;for(t=0,n=e.length;n>t;t++)if(w.call(e,t)&&(i=Le(e[t]))){if("*"===i){r.length=0,r.push("*");break}-1===r.indexOf(i)&&r.push(i)}return r};return function(t,n){var i=Le(n.swfPath);null===i&&(i=t);var r=e(n.trustedDomains),o=r.length;if(o>0){if(1===o&&"*"===r[0])return"always";if(-1!==r.indexOf(t))return 1===o&&t===i?"sameDomain":"always"}return"never"}}(),Ve=function(){try{return s.activeElement}catch(e){return null}},Ne=function(e,t){var n,i,r,o=[];if("string"==typeof t&&t&&(o=t.split(/\s+/)),e&&1===e.nodeType&&o.length>0){for(r=(" "+(e.className||"")+" ").replace(/[\t\r\n\f]/g," "),n=0,i=o.length;i>n;n++)-1===r.indexOf(" "+o[n]+" ")&&(r+=o[n]+" ");r=r.replace(/^\s+|\s+$/g,""),r!==e.className&&(e.className=r)}return e},He=function(e,t){var n,i,r,o=[];if("string"==typeof t&&t&&(o=t.split(/\s+/)),e&&1===e.nodeType&&o.length>0&&e.className){for(r=(" "+e.className+" ").replace(/[\t\r\n\f]/g," "),n=0,i=o.length;i>n;n++)r=r.replace(" "+o[n]+" "," ");r=r.replace(/^\s+|\s+$/g,""),r!==e.className&&(e.className=r)}return e},ze=function(e,t){var n=p(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},We=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),i=a.pageXOffset,r=a.pageYOffset,o=s.documentElement.clientLeft||0,l=s.documentElement.clientTop||0,d=0,u=0;if("relative"===ze(s.body,"position")){var c=s.body.getBoundingClientRect(),h=s.documentElement.getBoundingClientRect();d=c.left-h.left||0,u=c.top-h.top||0}t.left=n.left+i-o-d,t.top=n.top+r-l-u,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},_e=function(e){if(!e)return!1;var t=p(e,null);if(!t)return!1;var n=v(t.height)>0,i=v(t.width)>0,r=v(t.top)>=0,o=v(t.left)>=0,a=n&&i&&r&&o,s=a?null:We(e),l="none"!==t.display&&"collapse"!==t.visibility&&(a||!!s&&(n||s.height>0)&&(i||s.width>0)&&(r||s.top>=0)&&(o||s.left>=0));return l},Ue=function(){u(G),G=0,h(K),K=0},je=function(){var e;if(r&&(e=ke(W.bridge))){var t=We(r);I(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+Ge(J.zIndex)})}},qe=function(e){W.ready===!0&&(W.bridge&&"function"==typeof W.bridge.setHandCursor?W.bridge.setHandCursor(e):W.ready=!1)},Ge=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||y(e)?"string"==typeof e&&(t=Ge(x(e,10))):t=e,"number"==typeof t?t:"auto"},Ke=function(e){var t=/(\r\n|\r|\n)/g;return"string"==typeof e&&J.fixLineEndings===!0&&(H()?/((^|[^\r])\n|\r([^\n]|$))/.test(e)&&(e=e.replace(t,"\r\n")):/\r/.test(e)&&(e=e.replace(t,"\n"))),e},Xe=function(e){var n,i,r,o=W.sandboxed,a=null;if(e=e===!0,z===!1)a=!1;else{try{i=t.frameElement||null}catch(s){r={name:s.name,message:s.message}}if(i&&1===i.nodeType&&"IFRAME"===i.nodeName)try{a=i.hasAttribute("sandbox")}catch(s){a=null}else{try{n=document.domain||null}catch(s){n=null}(null===n||r&&"SecurityError"===r.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&&(a=!0)}}return W.sandboxed=a,o===a||e||$e(g),a},$e=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function i(e){e&&(s=!0,e.version&&(c=t(e.version)),!c&&e.description&&(c=t(e.description)),e.filename&&(u=n(e.filename)))}var r,o,a,s=!1,d=!1,u=!1,c="";if(l.plugins&&l.plugins.length)r=l.plugins["Shockwave Flash"],i(r),l.plugins["Shockwave Flash 2.0"]&&(s=!0,c="2.0.0.11");else if(l.mimeTypes&&l.mimeTypes.length)a=l.mimeTypes["application/x-shockwave-flash"],r=a&&a.enabledPlugin,i(r);else if(void 0!==e){d=!0;try{o=new e("ShockwaveFlash.ShockwaveFlash.7"),s=!0,c=t(o.GetVariable("$version"))}catch(h){try{o=new e("ShockwaveFlash.ShockwaveFlash.6"),s=!0,c="6.0.21"}catch(p){try{o=new e("ShockwaveFlash.ShockwaveFlash"),s=!0,c=t(o.GetVariable("$version"))}catch(f){d=!1}}}}W.disabled=s!==!0,W.outdated=c&&v(c)<v(_),W.version=c||"0.0.0",W.pluginType=u?"pepper":d?"activex":s?"netscape":"unknown"};$e(g),Xe(!0);var Ye=function(){return this instanceof Ye?void("function"==typeof Ye._createClient&&Ye._createClient.apply(this,P(arguments))):new Ye};C(Ye,"version",{value:"2.3.0-beta.1",writable:!1,configurable:!0,enumerable:!0}),Ye.config=function(){return ee.apply(this,P(arguments))},Ye.state=function(){return te.apply(this,P(arguments))},Ye.isFlashUnusable=function(){return ne.apply(this,P(arguments))},Ye.on=function(){return ie.apply(this,P(arguments))},Ye.off=function(){return re.apply(this,P(arguments))},Ye.handlers=function(){return oe.apply(this,P(arguments))},Ye.emit=function(){return ae.apply(this,P(arguments))},Ye.create=function(){return se.apply(this,P(arguments))},Ye.destroy=function(){return le.apply(this,P(arguments))},Ye.setData=function(){return de.apply(this,P(arguments))},Ye.clearData=function(){return ue.apply(this,P(arguments))},Ye.getData=function(){return ce.apply(this,P(arguments))},Ye.focus=Ye.activate=function(){return he.apply(this,P(arguments))},Ye.blur=Ye.deactivate=function(){return pe.apply(this,P(arguments))},Ye.activeElement=function(){return fe.apply(this,P(arguments))};var Qe=0,Ze={},Je=0,et={},tt={};I(J,{autoActivate:!0});var nt=function(e){var t=this;t.id=""+Qe++,Ze[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),Ye.on("*",function(e){return t.emit(e)}),Ye.on("destroy",function(){t.destroy()}),Ye.create()},it=function(e,t){var r,o,a,s={},l=Ze[this.id],d=l&&l.handlers;if(!l)throw Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(r in e)w.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&this.on(r,e[r]);if(a&&a.length){for(r=0,o=a.length;o>r;r++)e=a[r].replace(/^on/,""),s[e]=!0,d[e]||(d[e]=[]),d[e].push(t);if(s.ready&&W.ready&&this.emit({type:"ready",client:this}),s.error){for(r=0,o=Y.length;o>r;r++)if(W[Y[r].replace(/^flash-/,"")]){this.emit({type:"error",name:Y[r],client:this});break}i!==n&&Ye.version!==i&&this.emit({type:"error",name:"version-mismatch",jsVersion:Ye.version,swfVersion:i})}}return this},rt=function(e,t){var n,i,r,o,a,s=Ze[this.id],l=s&&s.handlers;if(!l)return this;if(0===arguments.length)o=b(l);else if("string"==typeof e&&e)o=e.split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)w.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(o&&o.length)for(n=0,i=o.length;i>n;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=l[e],a&&a.length)if(t)for(r=a.indexOf(t);-1!==r;)a.splice(r,1),r=a.indexOf(t,r);else a.length=0;return this},ot=function(e){var t=null,n=Ze[this.id]&&Ze[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:k(n)),t},at=function(e){if(ct.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=I({},e));var t=I({},me(e),{client:this});ht.call(this,t)}return this},st=function(e){if(!Ze[this.id])throw Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=pt(e);for(var t=0;t<e.length;t++)if(w.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===et[e[t].zcClippingId].indexOf(this.id)&&et[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Je++,et[e[t].zcClippingId]=[this.id],J.autoActivate===!0&&ft(e[t]));var n=Ze[this.id]&&Ze[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},lt=function(e){var t=Ze[this.id];if(!t)return this;var n,i=t.elements;e=void 0===e?i.slice(0):pt(e);for(var r=e.length;r--;)if(w.call(e,r)&&e[r]&&1===e[r].nodeType){for(n=0;-1!==(n=i.indexOf(e[r],n));)i.splice(n,1);var o=et[e[r].zcClippingId];if(o){for(n=0;-1!==(n=o.indexOf(this.id,n));)o.splice(n,1);0===o.length&&(J.autoActivate===!0&&gt(e[r]),delete e[r].zcClippingId)}}return this},dt=function(){var e=Ze[this.id];return e&&e.elements?e.elements.slice(0):[]},ut=function(){Ze[this.id]&&(this.unclip(),this.off(),delete Ze[this.id])},ct=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Ze[this.id],n=t&&t.elements,i=!!n&&n.length>0,r=!e.target||i&&-1!==n.indexOf(e.target),o=e.relatedTarget&&i&&-1!==n.indexOf(e.relatedTarget),a=e.client&&e.client===this;return t&&(r||o||a)?!0:!1},ht=function(e){var t=Ze[this.id];if("object"==typeof e&&e&&e.type&&t){var n=ye(e),i=t&&t.handlers["*"]||[],r=t&&t.handlers[e.type]||[],o=i.concat(r);if(o&&o.length){var s,l,d,u,c,h=this;for(s=0,l=o.length;l>s;s++)d=o[s],u=h,"string"==typeof d&&"function"==typeof a[d]&&(d=a[d]),"object"==typeof d&&d&&"function"==typeof d.handleEvent&&(u=d,d=d.handleEvent),"function"==typeof d&&(c=I({},e),Ee(d,u,[c],n))}}},pt=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},ft=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=a.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=a.event))&&(t(n),Ye.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),tt[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},gt=function(e){if(e&&1===e.nodeType){var t=tt[e.zcClippingId];if("object"==typeof t&&t){for(var n,i,r=["move","leave","enter","out","over"],o=0,a=r.length;a>o;o++)n="mouse"+r[o],i=t[n],"function"==typeof i&&e.removeEventListener(n,i,!1);delete tt[e.zcClippingId]}}};Ye._createClient=function(){nt.apply(this,P(arguments))},Ye.prototype.on=function(){return it.apply(this,P(arguments))},Ye.prototype.off=function(){return rt.apply(this,P(arguments))},Ye.prototype.handlers=function(){return ot.apply(this,P(arguments))},Ye.prototype.emit=function(){return at.apply(this,P(arguments))},Ye.prototype.clip=function(){return st.apply(this,P(arguments))},Ye.prototype.unclip=function(){return lt.apply(this,P(arguments))},Ye.prototype.elements=function(){return dt.apply(this,P(arguments))},Ye.prototype.destroy=function(){return ut.apply(this,P(arguments))},Ye.prototype.setText=function(e){if(!Ze[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.setData("text/plain",e),this},Ye.prototype.setHtml=function(e){if(!Ze[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.setData("text/html",e),
this},Ye.prototype.setRichText=function(e){if(!Ze[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.setData("application/rtf",e),this},Ye.prototype.setData=function(){if(!Ze[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.setData.apply(this,P(arguments)),this},Ye.prototype.clearData=function(){if(!Ze[this.id])throw Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.clearData.apply(this,P(arguments)),this},Ye.prototype.getData=function(){if(!Ze[this.id])throw Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Ye.getData.apply(this,P(arguments))},"function"==typeof define&&define.amd?define(function(){return Ye}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Ye:e.prototype.ZeroClipboard=Ye}(function(){return this||window}()),e.prototype.ZeroClipboard&&(e.prototype.ZeroClipboard.config({swfPath:"resources/js/ZeroClipboard.swf",forceEnhancedClipboard:!0}),e.prototype.ZeroClipboard.clearData())}),Ext.cmd.derive("BP.view.field.Instrument",Ext.data.field.Field,{convert:function(){}},0,0,0,0,["data.field.instrument"],0,[BP.view.field,"Instrument"],0),Ext.cmd.derive("BP.model.OrderBase",Ext.data.Model,{statics:{START_IMMEDIATELY:"i",START_POSTPONED:"p"},idProperty:"orderId",fields:[{name:"orderId",type:"int"},{name:"optionType",type:"string"},{name:"orderType",type:"string",defaultValue:""}],constructor:function(){var e=this;e.mixins.observable.constructor.call(e),Ext.data.Model.prototype.constructor.apply(this,arguments)},canBeCancelled:function(){return this.isPending()},isPending:function(){return"PENDING"==this.get("orderState")},isProcessing:function(){return"PROCESSING"==this.get("orderState")},isActive:function(){return"EXECUTING"==this.get("orderState")},isCompleted:function(){var e=this.get("orderState");return"FILLED"==e||"REJECTED"==e||"CANCELLED"==e},isRejected:function(){return"REJECTED"==this.get("orderState")},isCancelled:function(){return"CANCELLED"==this.get("orderState")},getMessageText:function(){var e=this.get("msg");return e.params?e.params.reason:e.code},playSoundFx:function(){var e=this,t=e.get("orderState"),n=t;if("FILLED"==t||"REJECTED"==t||"EXECUTING"==t){"FILLED"==t&&(n=e.get("profitLoss")>0?"profit":"loss");try{new Audio("./resources/audio/"+n+".mp3").play()}catch(i){BP.log("warn","no audio support!")}}},onStateChange:function(){var e=this;if(e.isActive())e._generateOrderData(),e.getPendingOrdersStore().remove(e),e.getActiveOrdersStore().add(e);else if(e.isCompleted()){var t=e.get("instrument").getId();e.getPendingOrdersStore().remove(e),e.getActiveOrdersStore().remove(e),e.getHistoryStore().add(e),e.getMarketStore().unTick(t,e.onMarketTick,e),BP.getApplication().getClock().un("tick",e.onClockTick,e)}e.calculateTimeInterval(),e.fireEvent("statechanged",e.get("orderState")),BP.localSettings.get("playSounds")&&e.playSoundFx()},getProgressConfig:function(){var e,t,n,i=this;return i.isPending()||i.isProcessing()?(e=i.get("pendingTime"),t=i.get("pendingLeft"),n="#E2E2E2"):(e=i.get("executingTime"),t=i.get("executingLeft"),n="MCO"==i.get("orderType")?"#E2E2E2":i.get("pips")>0?"#D3EAC9":"#FBCFD0"),{percent:(e-t)/(e/100),color:n}},getPendingOrdersStore:function(){return this.pendingOrdersStore||(this.pendingOrdersStore=Ext.getStore("PendingOrders"))},getActiveOrdersStore:function(){return this.ordersStore||(this.ordersStore=Ext.getStore("Orders"))},getHistoryStore:function(){return this.historyStore||(this.historyStore=Ext.getStore("History"))},getMarketStore:function(){return this.marketStore||(this.marketStore=Ext.getStore("Market"))},isREG:function(){return"REG"==this.get("orderType")}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[BP.model,"OrderBase"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.model.Order",BP.model.OrderBase,{statics:{START_IMMEDIATELY:"i",START_POSTPONED:"p"},idProperty:"orderId",fields:[{name:"orderId",type:"int"},{name:"optionType",type:"string"},{name:"orderType",type:"string",defaultValue:""},{name:"store",type:"string",defaultValue:"active"},{name:"instrument",type:"instrument"},{name:"ccy",type:"string"},{name:"side",type:"string"},{name:"amount",type:"float"},{name:"maturity",type:"int"},{name:"orderState",type:"string"},{name:"payOutPerc",type:"float",useNull:!0},{name:"refundPercent",type:"float",useNull:!0},{name:"priceStrike",type:"float",useNull:!0},{name:"priceTrig",type:"float",useNull:!0},{name:"amountPl",type:"float",useNull:!0},{name:"msg",type:"auto"},{name:"creationTime",type:"date",dateFormat:"time"},{name:"startTime",type:"date",dateFormat:"time"},{name:"trigTime",type:"date",dateFormat:"time"},{name:"timeToLive",type:"date",dateFormat:"time"},{name:"condPrice",type:"float",useNull:!0},{name:"condDirection",type:"string"},{name:"minPayOutPerc",type:"float",useNull:!0},{name:"pendingTime",type:"int",persist:!1},{name:"pendingLeft",type:"int",persist:!1},{name:"executingTime",type:"int",persist:!1},{name:"executingLeft",type:"int",persist:!1},{name:"spotPrice",type:"float",persist:!1},{name:"pips",type:"float",persist:!1,useNull:!0},{name:"profitLoss",type:"float",persist:!1,useNull:!0},{name:"priceStrike",type:"float",persist:!1},{name:"priceTrig",type:"float",persist:!1},{name:"indexPriceStrike",type:"float",persist:!1},{name:"indexPriceTrig",type:"float",persist:!1}],onMarketTick:function(e){this.isCompleted()||this._generateOrderData(e)},_generateOrderData:function(e){var t=this;if("REG"==t.get("orderType")){e=e||this.getMarketStore().getById(this.get("instrument").getId());var n,i,r,o=t.get("optionType"),a=t.get("priceStrike"),s=t.get("instrument").get("pipValue"),l=t.get("amount");"CALL"==o?(n=e.get("bidPrice"),r=Ext.Number.toFixed((n-a)/s,1)):(n=e.get("askPrice"),r=Ext.Number.toFixed((a-n)/s,1)),i=r>0?l*t.get("payOutPerc")/100:l*t.get("refundPercent")/100-l,t.set({spotPrice:n,profitLoss:i,pips:r}),t.commit()}},canBeCancelled:function(){return this.isPending()},isPending:function(){return"PENDING"==this.get("orderState")},isProcessing:function(){return"PROCESSING"==this.get("orderState")},isActive:function(){return"EXECUTING"==this.get("orderState")},isCompleted:function(){var e=this.get("orderState");return"FILLED"==e||"REJECTED"==e||"CANCELLED"==e},isRejected:function(){return"REJECTED"==this.get("orderState")},isCancelled:function(){return"CANCELLED"==this.get("orderState")},getMessageText:function(){var e=this.get("msg");return e.params?e.params.reason:e.code},playSoundFx:function(){var e=this,t=e.get("orderState"),n=t;if("FILLED"==t||"REJECTED"==t||"EXECUTING"==t){"FILLED"==t&&(n=e.get("profitLoss")>0?"profit":"loss");try{new Audio("./resources/audio/"+n+".mp3").play()}catch(i){BP.log("warn","no audio support!")}}},calculateTimeInterval:function(){var e=this,t=e.get("startTime")-e.get("creationTime"),n=e.get("startTime"),i=0;e.isPending()&&e.isREG()?(t=e.get("timeToLive")-e.get("creationTime"),n=e.get("timeToLive")):i=e.get("trigTime")-e.get("startTime"),e.set({pendingTime:t,pendingLeft:t,pendingStart:n,executingTime:i,executingLeft:i,store:""}),e.commit()},onStateChange:function(e){var t=this;if(t.isActive())t._generateOrderData(),t.getPendingOrdersStore().remove(t),t.getActiveOrdersStore().add(t);else if(t.isCompleted()){var n=t.get("instrument").getId();t.getPendingOrdersStore().remove(t),t.getActiveOrdersStore().remove(t),t.getHistoryStore().add(t),e&&(t.getMarketStore().unTick(n,t.onMarketTick,t),BP.getApplication().getClock().un("tick",t.onClockTick,t),t.set("store","history"))}t.calculateTimeInterval(),t.fireEvent("statechanged",t.get("orderState")),BP.localSettings.get("playSounds")&&t.playSoundFx()},getProgressConfig:function(){var e,t,n,i=this;return i.isPending()||i.isProcessing()?(e=i.get("pendingTime"),t=i.get("pendingLeft"),n="#E2E2E2"):(e=i.get("executingTime"),t=i.get("executingLeft"),n=Ext.Array.contains(["MCO","PAIR"],i.get("orderType"))?"#E2E2E2":i.get("pips")>0?"#D3EAC9":"#FBCFD0"),{percent:(e-t)/(e/100),color:n}},onClockTick:function(e){var t=this,n=t.get("startTime")-e,i=0;if(t.isPending()&&t.isREG())n=t.get("timeToLive")-e;else{if(t.isSCFD())return void(i=t.get("creationTime")-e);i=t.get("trigTime")-e}t.set({pendingLeft:n,executingLeft:i}),t.commit()},showOnChart:function(e){e.showOrder(this)},removeFromChart:function(e){e.removeOrder(this)},getPendingOrdersStore:function(){return this.pendingOrdersStore||(this.pendingOrdersStore=Ext.getStore("PendingOrders"))},getActiveOrdersStore:function(){return this.ordersStore||(this.ordersStore=Ext.getStore("Orders"))},getHistoryStore:function(){return this.historyStore||(this.historyStore=Ext.getStore("History"))},getMarketStore:function(){return this.marketStore||(this.marketStore=Ext.getStore("Market"))},isREG:function(){return"REG"==this.get("orderType")}},0,0,0,0,0,0,[BP.model,"Order"],0),Ext.cmd.derive("BP.store.Orders",Ext.data.Store,{model:"BP.model.Order"},0,0,0,0,0,0,[BP.store,"Orders"],0),Ext.cmd.derive("BP.controller.OrdersManager",Ext.app.Controller,{stores:["Orders"],init:function(){this.initStores()},initStores:function(){Ext.create("BP.store.Orders",{model:"PendingOrder",storeId:"PendingOrders",sorters:[{property:"orderId",direction:"DESC"}]}),Ext.create("BP.store.Orders",{model:"ExecutingOrder",storeId:"ExecutingOrders",sorters:[{property:"orderId",direction:"DESC"}]}),Ext.create("BP.store.Orders",{model:"HistoryOrder",storeId:"HistoryOrders",sorters:[{property:"trigTime",direction:"DESC"}]})},prepareOrders:function(e){var t=this,n=BP.app.getController("Subscribe");if(e&&e.instrument)switch(e.orderState){case"PENDING":case"PROCESSING":t.addPendingOrder(e);break;case"EXECUTING":t.removePendingOrder(e),t.addExecutingOrder(e),("REG"==e.orderType||"TOUCH"==e.orderType)&&n.onSubscribed(e.instrument);break;case"FILLED":case"REJECTED":case"CANCELLED":case"REVOKED":t.removePendingOrder(e),t.removeExecutingOrder(e),t.addHistoryOrders(e),("REG"==e.orderType||"TOUCH"==e.orderType)&&n.onUnsubscribed(e.instrument)}},addPendingOrder:function(e){var t=this.getStore("PendingOrders"),n=t.data.containsKey(e.orderId),i=n?t.data.getByKey(e.orderId):null;i?i.set(e):(i=t.getModel().create(e),t.add(i)),i.commit(!0)},removePendingOrder:function(e){var t=this.getStore("PendingOrders"),n=t.data.containsKey(e.orderId),i=n?t.data.getByKey(e.orderId):null;i&&t.remove(i)},addExecutingOrder:function(e){var t=this.getStore("ExecutingOrders"),n=t.data.containsKey(e.orderId),i=n?t.data.getByKey(e.orderId):null;i?i.set(e):(i=t.getModel().create(e),t.add(i)),i.commit(!0)},removeExecutingOrder:function(e){var t=this.getStore("ExecutingOrders"),n=t.data.containsKey(e.orderId),i=n?t.data.getByKey(e.orderId):null;i&&t.remove(i)},addHistoryOrders:function(e){var t=this.getStore("HistoryOrders"),n=t.data.containsKey(e.orderId),i=n?t.data.getByKey(e.orderId):null;i?i.set(e):(i=t.getModel().create(e),t.add(i)),i.commit(!0)},hasOrder:function(){var e=this.getStore("PendingOrders"),t=e.data.containsKey(msg.orderId),n=t?e.data.getByKey(msg.orderId):null;n?n.set(msg):(n=e.getModel().create(msg),e.add(n)),n.commit(!0)}},0,0,0,0,0,0,[BP.controller,"OrdersManager"],0),Ext.cmd.derive("BP.model.RequestIds",Ext.data.Model,{idPrefix:"REQUESTID",idProperty:"requestId",fields:[{name:"requestId",type:"string"},{name:"timestamp",type:"int"},{name:"action",type:"string"},{name:"custom",type:"string"},{name:"response",type:"string"}],updateResponse:function(e){e.responseTimestamp&&e.responseAction&&(this.data.response=this.data.response||"",this.data.response&&(this.data.response+=";"),this.data.response+=e.responseAction+":"+(e.responseTimestamp-this.data.timestamp))}},0,0,0,0,0,0,[BP.model,"RequestIds"],0),Ext.cmd.derive("BP.store.RequestIds",Ext.data.Store,{model:"BP.model.RequestIds"},0,0,0,0,0,0,[BP.store,"RequestIds"],0),Ext.cmd.derive("BP.controller.RequestIdManager",Ext.app.Controller,{stores:["RequestIds"],onRegistration:function(e){e.requestId&&(this.doRemapData(e),this.doChange(e))},doRemapData:function(e){var t,n={};e.timestamp=(new Date).getTime();for(t in e)BP.model.RequestIds.getField(t)&&(n[t]=e[t],delete e[t]);e.custom=Ext.encode(n)},doChange:function(e){var t,n;e.requestId&&(t=this.getStore("RequestIds"),n=this.getRequestIdById(e.requestId,t),n?this.doUpdate(e,t,n):this.doAdd(e,t))},doAdd:function(e,t){e.requestId&&(t=t||this.getStore("RequestIds"),t.suspendEvents(),t.fastInsert(e),t.resumeEvents())},doUpdate:function(e,t,n){e.requestId&&(t=t||this.getStore("RequestIds"),n=n||this.getRequestIdById(e.requestId,t),n&&(t.suspendEvents(),n.suspendEvents(),n.updateResponse(e),n.resumeEvents(),t.resumeEvents()))},doRemove:function(e,t){var n;e&&(t=t||this.getStore("RequestIds"),n=this.getRequestIdById(e,t),n&&(t.suspendEvents(),t.fastRemove(n),n=null,t.resumeEvents()))},getRequestIdById:function(e,t){var n;return e?(t=t||this.getStore("RequestIds"),n=t.data,n.map[e]):void 0}},0,0,0,0,0,0,[BP.controller,"RequestIdManager"],0),Ext.cmd.derive("BP.model.Settings",Ext.data.Model,{singleton:!0,localStorage:localStorage,needReload:!1,fields:[{name:"login",type:"string",defaultValue:""},{name:"language",type:"string",defaultValue:"en"},{name:"captchaId",type:"string",defaultValue:""},{name:"captchaPin",type:"string",defaultValue:""},{name:"pin",type:"boolean",defaultValue:!1},{name:"session_id",type:"string",defaultValue:""},{name:"ticket",type:"string",defaultValue:""},{name:"read_only",type:"boolean",defaultValue:!0},{name:"balance_currency",type:"string",defaultValue:""},{name:"min_trade_amount",type:"int",defaultValue:1},{name:"max_trade_amount",type:"int",defaultValue:1e3},{name:"defaultAmount",type:"int",defaultValue:1},{name:"defaultDuration",type:"int",defaultValue:1},{name:"noConfirmTrade",type:"boolean",defaultValue:!1},{name:"defaultInstrument",type:"string",defaultValue:"EUR/USD"},{name:"defaultInstruments",type:"auto"},{name:"defaultPeriod",type:"string",defaultValue:"TICK"},{name:"defaultOfferSide",type:"string",defaultValue:"BID"},{name:"defaultPresentationType",type:"string",defaultValue:"LINE"},{name:"chartState",type:"string",defaultValue:""},{name:"defaultTimeZone",type:"int",defaultValue:0},{name:"productType",type:"string",defaultValue:"BI_ACCOUNT_T"},{name:"showSliders",type:"boolean",defaultValue:!1},{name:"playSounds",type:"boolean",defaultValue:!1},{name:"reports_action",type:"string",defaultValue:"open_reports"},{name:"chat_action",type:"string",defaultValue:"open_chat"},{name:"reports_service",type:"string",defaultValue:"sts"},{name:"chat_service",type:"string",defaultValue:"sts"},{name:"payoutReg",type:"int",defaultValue:90},{name:"refundReg",type:"int",defaultValue:0},{name:"payoutMco",type:"int",defaultValue:70},{name:"refundMco",type:"int",defaultValue:0}],hasIdentity:function(){return!!(this.get("login")&&this.get("ticket")&&this.get("session_id"))},getCredentials:function(){var e=this;return e.hasIdentity()?{login:e.get("login"),password:e.get("password"),captchaId:e.get("captchaId"),captchaPin:e.get("captchaPin"),session_id:e.get("session_id"),ticket:e.get("ticket"),read_only:e.get("read_only")}:void 0},clearCredentials:function(){var e=this;Ext.Object.each(e.getCredentials(),function(t){e.set(t,"")})},getReports:function(){var e=this;return{action:e.get("reports_action"),login_name:e.get("login"),service:e.get("reports_service"),session_id:e.get("session_id"),ticket:e.get("ticket"),to:BP.config("reports.to")}},getChat:function(){var e=this;return{action:e.get("chat_action"),login_name:e.get("login"),service:e.get("chat_service"),session_id:e.get("session_id"),ticket:e.get("ticket"),to:BP.config("reports.to")}},get:function(){return this.callParent(arguments)},add:function(e){var t=this;Ext.Object.each(e,function(e,n){t.set(e,n)})}},0,0,0,0,0,0,[BP.model,"Settings"],0),Ext.cmd.derive("BP.model.Account",Ext.data.Model,{singleton:!0,constructor:function(e){var t=this;t.mixins.observable.constructor.call(t,e),this.callParent(arguments)},fields:[{name:"accountId",type:"int"},{name:"name",type:"string"},{name:"currency",type:"string"},{name:"equity",type:"float"},{name:"usableMargin",type:"float"},{name:"state",type:"string"},{name:"revokeTimeSec",type:"int",defaultValue:0}],set:function(){var e=this.callParent(arguments);return e&&this.fireEvent("datachange",this),e}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[BP.model,"Account"],0),Ext.cmd.derive("BP.view.window.Window",Ext.window.Window,{componentCls:"bp-window",border:!1,closable:!1,draggable:!1,resizable:!1,shadow:!1,modal:!0,constrain:!0,floating:!0,frame:!0,autoRender:!0,closableEsc:!0,allowKeyboardEvent:!0,animAllow:!0,anim:{duration:100,easing:"easeOut"},ghost:function(e){return rt=this,e=e?e+" "+this.componentCls:this.componentCls,this.superclass.superclass.ghost.call(this,e)},beforeRender_:function(){var e,t,n=this,i=n.floating,r=n.getComponentLayout();n.ui=n.getTheme(),n._renderState=1,t=n.controller,t&&t.beforeRender&&t.beforeRender(n),n.initBindable(),n.renderConfigs&&n.flushRenderConfigs(),n.reference&&n.publishState(),i&&(n.addCls(n.fixed?n._fixedLayerCls:n._layerCls),e=i.cls,e&&n.addCls(e)),n.frame=n.frame||n.alwaysFramed,r.initialized||r.initLayout(),n.initOverflow(),n.setUI(n.ui)},afterRender:function(){var e,t=this,n=t.header;t.maximized&&(t.maximized=!1,t.maximize(),n&&(n.removeCls(n.indicateDragCls),n.setUI(t.getTheme()))),Ext.window.Window.prototype.afterRender.call(this),t.closable?(e=t.getKeyMap(),e.on(27,t.onEsc,t)):t.closableEsc?(e=t.getKeyMap(),e.on(27,t.onEsc,t)):e=t.keyMap,e&&t.hidden&&e.disable()}},0,["bp-window"],["component","box","container","panel","window","bp-window"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0},["widget.bp-window"],0,[BP.view.window,"Window"],0),Ext.cmd.derive("BP.view.registration.RegistrationController2",Ext.app.ViewController,{listen:{component:{"bp-registration-window":{beforerender:"onBeforeRender",browserwindowresize:"onBrowserWindowResize",show:"onShow"}}},onBeforeRender:function(e){var t,n,i;t=e.getViewModel(),n=Ext.util.Cookies.get("locale"),i=BP.whiteLabel||"swiss",t&&(t.set("language",n),t.set("whitelabel",i))},onBrowserWindowResize:function(e){e.center()},onShow:function(e){e.anim&&(e.anim.listeners=e.anim.listeners||{},Ext.apply(e.anim.listeners,{beforeanimate:function(){}}),e.getEl().setVisible(!0,e.anim))},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()},onLoginClick:function(){this.getView().destroy(),Ext.widget("app-main")}},0,0,0,0,["controller.registration"],0,[BP.view.registration,"RegistrationController2"],0),Ext.cmd.derive("BP.view.registration.RegistrationModel2",Ext.app.ViewModel,{data:{language:"en",whitelabel:"",translate:{windowTitle:"registration-demo.title",accountTypeFieldLabel:"registration-demo.account-type",firstnameFieldLabel:"registration-demo.firstname",lastnameFieldLabel:"registration-demo.lastname",emailFieldLabel:"registration-demo.email",phoneFieldLabel:"registration-demo.phone",countryFieldLabel:"registration-demo.country",languageFieldLabel:"registration-demo.language",balanceFieldLabel:"registration-demo.balance",acceptBoxLabel:"registration-demo.accept",registerButtonText:"registration-demo.register",registerWaiverSwissText:"registration-demo.waiver-swiss",registerWaiverEuropeText:"registration-demo.waiver-europe"}},formulas:{tplWindowWaiverText:{bind:{whitelabel:"{whitelabel}",waiverText:"{translate.registerWaiverSwissText}",waiverEuropeText:"{translate.registerWaiverEuropeText}"},get:function(e){var t=this.get("whitelabel");"europe"==t&&(e.waiverText=e.waiverEuropeText);var n=["{waiverText}"];return Ext.create("Ext.Template",n).apply(e)}},waiverTextHeight:{bind:{whitelabel:"{whitelabel}"},get:function(){var e=this.get("whitelabel");return"europe"==e?185:140}}}},0,0,0,0,["viewmodel.registration"],0,[BP.view.registration,"RegistrationModel2"],0),Ext.cmd.derive("BP.view.registration.Registration2",BP.view.window.Window,{controller:"registration",viewModel:"registration",autoShow:!0,width:450,cls:"bp-registration-panel",layout:"card",defaults:{labelWidth:50,labelPad:10,labelAlign:"right",labelSeparator:"",msgTarget:"none",enableKeyEvents:!0,anchor:"100%",border:!1},bind:{title:"{translate.windowTitle}"},tools:[{renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],initComponent:function(){var e,t,n=this;n.reset(),n.prepareParamsBefore(),n.queryMetaRoot({type:n.accountType,scope:n},n.metaRootSuccess,n.metaRootFailure),e={rtl:window.rtlEnable,allowBlank:!0,items:n.buildFormSwitch(n),buttons:n.buildBar(n)},Ext.apply(n,e),BP.view.window.Window.prototype.initComponent.apply(this,arguments),n.captchaTimerStop(),(t=n.down("form").getForm())&&t.reset(),Ext.getCmp("regSecurity").hide(),Ext.getCmp("errorLabel").setText("")},queryMetaRoot:function(e,t,n){var i=this,r={};r.lang=e.lang||Ext.util.Cookies.get("locale")||BP.Bootstrap.defaultLocale||"en",r.type=e.type||"binary",t=t||Ext.emptyFn,n=n||Ext.emptyFn,Ext.Ajax.request({url:i.apiUrl,method:"GET",timeout:3e4,async:!0,scope:i,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:r,success:Ext.pass(i.requestSuccessQueryMeta,[e,t,n]),failure:Ext.pass(i.requestFailureQueryMeta,[e,t,n])})},queryCaptchaMetaRoot:function(e,t,n){var i=this,r={};r.width=e.width||100,r.height=e.height||50,r.textColor=e.textColor||"363636",r.backColor=e.backColor||"F6F6F6",Ext.Ajax.request({url:i.apiCaptchaUrl,method:"GET",timeout:3e4,async:!0,scope:i,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:r,success:Ext.pass(i.requestSuccessQueryMeta,[e,t,n]),failure:Ext.pass(i.requestFailureQueryMeta,[e,t,n])})},refreshCaptcha:function(){var e,t,n,i,r=this;r.captchaTimerStop(),e=r.down("form"),e&&((t=e.down('hidden[name="captchaUid"]'))&&t.setValue(""),(i=e.down('textfield[name="captchaText"]'))&&(i.setDisabled(!0),i.setValue("")),(n=e.down('image[id="captchaImage"]'))&&n.setSrc(""),r.queryCaptchaMetaRoot({scope:r},r.metaRootCaptchaSuccess,r.metaRootCaptchaFailure))},queryCreateAccount:function(e,t,n){var i,r=this,o={};i=e.type||"binary",o.firstName=e.firstname,o.lastName=e.lastname,o.email=e.email,o.country=e.country,o.phone=(e.phone+"").replace(RegExp("^\\"+r.defaultCallingCode+"[\\s -]?"),""),1==r.isCaptchaRequired&&(e.captchaUid&&(o.captchaUid=e.captchaUid),e.captchaText&&(o.captchaPhrase=e.captchaText)),o[i+"Account"]=1,o[i+"Balance"]=e.balance,o[i+"Currency"]=e.currency,t=t||Ext.emptyFn,n=n||Ext.emptyFn,Ext.Ajax.request({url:r.apiUrl,method:"POST",timeout:3e4,async:!0,scope:r,cors:!0,useDefaultXhrHeader:!1,withCredentials:!0,params:o,success:Ext.pass(r.requestSuccessQueryAccount,[e,t,n]),failure:Ext.pass(r.requestFailureQueryAccount,[e,t,n])})},prepareParamsBefore:function(){this.prepareAccountType(),this.prepareUrlApi()},prepareParamsAfter:function(e){var t;return t=this.prepareCaptcha(e),t=t&&this.prepareLanguage(e),t=t&&this.prepareCountry(e),t=t&&this.prepareMultipliers(e),t=t&&this.prepareAccount(e)},prepareCaptchaParamsAfter:function(e){var t,n,i,r,o,a,s=this;return a=12e4,e&&(t=s.down("form"))?(e.captchaUid&&(n=t.down('hidden[name="captchaUid"]'))&&n.setValue(e.captchaUid),(i=t.down('textfield[name="captchaText"]'))&&(i.setDisabled(!1),i.setValue("")),s.captchaTimerStop(),e.expiredDate&&e.createdDate&&(o=new Date(e.expiredDate)-new Date(e.createdDate),o=o?o:a,o=isNaN(o)?a:o),s.captchaTimer=setTimeout(function(){},o||a),e.image&&e.type&&e.encode&&(r=t.down('image[id="captchaImage"]'))&&r.setSrc("data:"+e.type+";"+e.encode+","+e.image),Ext.getCmp("regSecurity").show(),!0):!1},captchaTimerStop:function(){(void 0!==this.captchaTimer||null!==this.captchaTimer)&&(clearTimeout(this.captchaTimer),this.captchaTimer=null)},prepareCaptcha:function(e){var t,n,i=this;return i.isCaptchaRequired=e?!!e.isCaptchaRequired:!1,i.isCaptchaRequired?i.refreshCaptcha():(n=i.down("form"),n&&(t=n.down('textfield[name="captchaText"]'))&&(t.setDisabled(!0),t.setValue(""))),!0},prepareLanguage:function(e){var t,n,i,r=this;return r.defaultLanguage=e.defaultLanguage||"en",i=[],Ext.iterate(e.languages||{},function(e,t){t&&i.push({languageId:e,languageName:t})}),t=r.down("form"),n=t?t.down('combobox[name="language"]'):null,n&&i.length&&(n.store.add(i),r.defaultLanguage&&n.setValue(r.defaultLanguage)),!0},prepareCountry:function(e){var t,n,i,r,o=this;return e?(o.defaultCountry=e.defaultCountry||null,t=e.bannedCountryList||[],r=[],Ext.iterate(e.countries||{},function(e,n){(!t.length||t.indexOf(e)<0)&&n&&n.name&&(r.push({countryId:e,countryName:n.name,countryCurrency:n.currency||null,countryCallingCode:n.callingCode||null,countryFlag:n.flag||null}),o.defaultCountry&&o.defaultCountry==e&&o.setDefaultsCountryData({countryCurrency:n.currency,countryCallingCode:n.callingCode,countryFlag:n.flag}))}),n=o.down("form"),i=n?n.down('combobox[name="country"]'):null,i&&r.length&&(i.store.add(r),o.defaultCountry&&i.setValue(o.defaultCountry)),!0):!1},setDefaultsCountryData:function(e){this.defaultCountryCurrency=e.countryCurrency||null,this.defaultCallingCode=e.countryCallingCode||null,this.defaultFlag=e.countryFlag||null},prepareAccount:function(e,t){var n,i=this;return e&&e.accounts&&e.accounts.binary?(n=i.prepareBalanceList(e.accounts.binary,t),n=n&&i.prepareCurrencyList(e.accounts.binary,t),n=n&&i.prepareCurrencyBalanceList()):!1},prepareMultipliers:function(e){var t=this;return e?(t.currencyMultipliersList={},Ext.iterate(e.multipliers||{},function(e,n){n&&(t.currencyMultipliersList[e]=n)}),!0):!1},prepareBalanceList:function(e){var t=this;return e?(t.defaultBalance=e.defaultBalance||null,t.minBalance=e.minBalance||null,t.maxBalance=e.maxBalance||null,t.defaultBalanceList=[],Ext.iterate(e.balanceList||[],function(e){t.defaultBalanceList.push({balanceId:e,balanceName:e})}),!0):!1},prepareCurrencyBalanceList:function(e){var t,n,i,r,o,a,s,l=this;return(e=e||l.defaultCurrency)?(n=l.defaultBalance,i=l.minBalance,r=l.maxBalance,l.currencyMultipliersList&&(o=l.currencyMultipliersList[e])&&(n&&(n*=o),i&&(i*=o),r&&(r*=o)),s=[],Ext.iterate(l.defaultBalanceList||[],function(e){s.push({balanceId:o?e.balanceId*o:e.balanceId,balanceName:o?e.balanceName*o:e.balanceName})}),t=l.down("form"),a=t?t.down('combobox[name="balance"]'):null,a&&s.length&&(a.store.clearFilter(!0),a.queryCaching=!1,a.queryFilter=!1,a.store.removeAll(!0),a.bindStore(Ext.create("Ext.data.Store",{fields:["balanceId","balanceName"],data:s})),a.setValue(n||i||s[0].balanceId)),!0):!1},prepareCurrencyList:function(e){var t,n,i,r=this;return e?(r.defaultCurrency=e.defaultCurrency||r.defaultCountryCurrency||null,i=[],Ext.iterate(e.currencyList||[],function(e){i.push({currencyId:e,currencyName:e})}),t=r.down("form"),n=t?t.down('combobox[name="currency"]'):null,n&&i.length&&(n.store.add(i),n.lastValue_=r.defaultCurrency||i[0].currencyId,n.setValue(n.lastValue_)),!0):!1},metaRootSuccess:function(e){var t;return t=this.prepareParamsAfter(e)},metaRootFailure:function(e){var t=this,n=[],i="";return Ext.iterate(e||[],function(e){n.push(e.code&&"0"!=e.code?e.code+":"+e.title:e.title)}),n.length&&(i="<p>"+n.join("<br/>")+"</p>"),Ext.getCmp("errorLabel").setHtml(i),t.setLoading(!1),!0},metaRootCaptchaSuccess:function(e){var t;return t=this.prepareCaptchaParamsAfter(e)},metaRootCaptchaFailure:function(e,t,n){return this.metaRootFailure(e,t,n)},accountCreateSuccess:function(e){var t,n,i,r=this;return!e||e&&!(t=e[0])?!1:t.type!==r.accountType?!1:(n=r.down('button[name="send"]'))&&(i=Ext.ComponentQuery.query("bp-window-login")[0])?(i.down('textfield[name="login"]').setValue(t.login),i.down('textfield[name="password"]').setValue(t.password),r.setLoading(!1),r.navigate(r,"next"),n.hide(),n.next().show(),r.setLoading(!1),!0):!1},accountCreateFailure:function(e,t,n){return this.metaRootFailure(e,t,n)},requestSuccessQueryMeta:function(e,t,n,i,r){var o,a=this;if(r=r||{},i=i||{},e.scope){if(200==i.status&&i.responseText){try{o=Ext.decode(i.responseText)}catch(s){o=null}if(Ext.isObject(o)&&o.meta&&!o.errors){if(Ext.isFunction(t)){if(t.call(e.scope||{},o.meta,i,r))return!0;200==i.status&&(i.status=0),a.requestFailureQueryMeta(e,t,n,i,r)}return}}200==i.status&&(i.status=0),a.requestFailureQueryMeta(e,t,n,i,r)}},requestFailureQueryMeta:function(e,t,n,i,r){var o;if(r=r||{},i=i||{},this.captchaTimerStop(),e.scope){if(i.responseText)try{o=Ext.decode(i.responseText)}catch(a){o=null}return(!o||o&&!o.errors)&&(o={},o.errors=[{status:0,code:"0",title:"System Unavailable."}]),Ext.isFunction(n)&&n.call(e.scope||{},o.errors,i,r)?!0:(this.setLoading(!1),!1)}},requestSuccessQueryAccount:function(e,t,n,i,r){var o,a=this;if(r=r||{},i=i||{},a.captchaTimerStop(),e.scope){if(200==i.status&&i.responseText){try{o=Ext.decode(i.responseText)}catch(s){o=null}if(Ext.isObject(o)&&o.data&&!o.errors){if(Ext.isFunction(t)){if(t.call(e.scope||{},o.data,i,r))return!0;200==i.status&&(i.status=0),a.requestFailureQueryAccount(e,t,n,i,r)}return}}200==i.status&&(i.status=0),a.requestFailureQueryAccount(e,t,n,i,r)}},requestFailureQueryAccount:function(e,t,n,i,r){return this.requestFailureQueryMeta(e,t,n,i,r)},prepareUrlApi:function(){var e;e=location.protocol,e+="//",e+=location.host,e+="/api/cabinet/demo",this.fakeApiUrl=BP.config("registration.url"),this.apiUrl=BP.config("registration.fakeUrlEnable")?this.fakeApiUrl:e,this.apiCaptchaUrl=(this.apiUrl+"").replace("/cabinet/demo","/cabinet/captcha")},prepareAccountType:function(){this.accountType="binary"},changeCombobobxControl:function(e,t){e&&(t&&e.getValue()||(e.store.clearFilter(!0),e.store.hasInternalKeys=!1,e.queryCaching=!1,e.queryFilter=!1,e.setValue(e.store.first())))},buildFormSwitch:function(e){var t=BP.translate;return[{id:"card-form",xtype:"form",bodyPadding:"10px",border:!1,formBind:!0,minWidth:350,defaults:{labelPad:10,labelAlign:"right",labelSeparator:"",labelWidth:80},defaultType:"textfield",items:[{name:"firstname",anchor:"100%",allowBlank:!1,bind:{fieldLabel:"{translate.firstnameFieldLabel}"}},{name:"lastname",allowBlank:!1,anchor:"100%",bind:{fieldLabel:"{translate.lastnameFieldLabel}"}},{name:"email",allowBlank:!1,vtype:"email",anchor:"100%",bind:{fieldLabel:"{translate.emailFieldLabel}"}},{xtype:"combobox",name:"country",emptyText:t("registration-demo.country-empty-text"),allowBlank:!1,anchor:"100%",queryMode:"local",forceSelection:!0,bind:{fieldLabel:"{translate.countryFieldLabel}"},listeners:{select:function(e,t){t&&this.setDefaultsCountryData({countryCurrency:t.get("countryCurrency"),countryCallingCode:t.get("countryCallingCode"),countryFlag:t.get("countryFlag")})},scope:e},store:new Ext.data.ArrayStore({fields:["countryId","countryName","countryCurrency","countryCallingCode","countryFlag"]}),valueField:"countryId",displayField:"countryName"},{name:"phone",vtype:"phone",emptyCls:"b-phone-filed-empty",emptyText:"+41 78 123 45 67",allowBlank:!1,anchor:"100%",bind:{fieldLabel:"{translate.phoneFieldLabel}"},listeners:{focus:function(e){var t=this.defaultCallingCode?this.defaultCallingCode+" ":"+";e.getValue()||e.setRawValue(t)},blur:function(e){var t=this.defaultCallingCode?this.defaultCallingCode+" ":"+";e.getValue()==t&&e.setRawValue("")},scope:e}},{xtype:"combobox",name:"language",forceSelection:!0,anchor:"100%",value:Ext.util.Cookies.get("locale"),queryMode:"local",bind:{fieldLabel:"{translate.languageFieldLabel}"},store:new Ext.data.ArrayStore({fields:["languageId","languageName"]}),valueField:"languageId",displayField:"languageName"},{xtype:"hidden",name:"lang",value:Ext.util.Cookies.get("locale"),allowBlank:!1},{xtype:"container",layout:"hbox",defaultType:"textfield",defaults:{labelPad:10,labelAlign:"right",labelSeparator:":",labelWidth:80},items:[{name:"balance",bind:{fieldLabel:"{translate.balanceFieldLabel}"},xtype:"combobox",vtype:"natural",queryMode:"local",forceSelection:!0,listeners:{select:function(e,t){this.changeCombobobxControl(e,t)},blur:function(e){this.changeCombobobxControl(e,e.findRecordByValue(e.getValue()));
},scope:e},anchor:"100%",allowBlank:!1,flex:3,store:new Ext.data.ArrayStore({fields:["balanceId","balanceName"]}),listConfig:{cls:"bp-form-account-type-list",shadow:!1},valueField:"balanceId",displayField:"balanceName"},{name:"currency",xtype:"combobox",queryMode:"local",enforceMaxLength:3,maxLength:3,maskRe:/^[a-zA-Z]$/,listeners:{select:function(e,t){(!e.lastValue_||e.lastValue_&&e.lastValue_!==e.getValue())&&(e.lastValue_=e.getValue(),this.prepareCurrencyBalanceList(e.getValue())),this.changeCombobobxControl(e,t)},blur:function(e){(!e.lastValue_||e.lastValue_&&e.lastValue_!==e.getValue())&&(e.lastValue_=e.getValue(),this.prepareCurrencyBalanceList(e.getValue())),this.changeCombobobxControl(e,e.findRecordByValue(e.getValue()))},scope:e},flex:1,allowBlank:!1,store:new Ext.data.ArrayStore({fields:["currencyId","currencyName"]}),valueField:"currencyId",displayField:"currencyName"}]},{xtype:"container",padding:"10 0 0 90",id:"regSecurity",hidden:!0,layout:{type:"table",columns:2},defaults:{bodyStyle:"padding:20px"},items:[{xtype:"image",id:"captchaImage",width:100,height:50},{xtype:"image",iconCls:"btn-refresh",cls:"captcha-refresh",src:"resources/images/refresh.png",height:32,width:32,margin:"0 0 0 10",listeners:{el:{click:function(){e.refreshCaptcha()}}}},{name:"captchaText",allowBlank:!1,disabled:!0,xtype:"textfield",width:100,rowspan:2}]},{xtype:"hidden",name:"captchaUid",value:""},{xtype:"hidden",name:"gmt",value:-1*(new Date).getTimezoneOffset()},{xtype:"label",text:"",id:"errorLabel",cls:"error-massage",padding:"5 0 5 0"},{xtype:"container",id:"regWaiver",layout:{type:"vbox",align:"stretch",pack:"start"},defaults:{bodyStyle:"padding:5px"},items:[{autoScroll:!0,border:!1,xtype:"panel",cls:"reg-waiver-text",bind:{height:"{waiverTextHeight}",html:"{tplWindowWaiverText}"}},{xtype:"checkboxfield",bind:{boxLabel:"{translate.acceptBoxLabel}"},id:"accept",margin:"5 0 0 180",listeners:{afterrender:function(e){e.center()}},handler:function(t){e.down("button").setDisabled(!t.checked)}}]}]},{id:"card-complate",html:"<p>"+BP.translate("registration-demo.complate")+"</p>",listeners:{beforeactivate:function(t){t.setHeight(e.getHeight()/2),new Ext.util.DelayedTask(function(){e.captchaTimerStop(),e.close()}).delay(3e3)}}}]},buildBar:function(e){return[{text:BP.translate("registration-demo.register"),bind:{text:"{translate.registerButtonText}"},name:"send",margin:"0 5px",ui:"green",disabled:!0,handler:function(){var t;(t=e.down("form").getForm())&&t.isValid()&&(e.queryCreateAccount(Ext.apply({type:e.accountType,scope:e},t.getFieldValues()),e.accountCreateSuccess,e.accountCreateFailure),e.setLoading(BP.translate("registration-demo.processing")))}},{translate:function(){this.setText(BP.translate("registration-demo.run"))},text:BP.translate("registration-demo.run"),hidden:!0,name:"run",ui:"green",handler:function(){e.captchaTimerStop(),e.close()}}]},navigate:function(e,t){var n=e.getLayout();n[t](),n.getNext()&&n.next()},reset:function(){this.isCaptchaRequired=!1,this.defaultLanguage=null,this.defaultCountry=null,this.defaultCountryCurrency=null,this.defaultCallingCode=null,this.defaultFlag=null,this.defaultBalance=null,this.minBalance=null,this.maxBalance=null,this.defaultBalanceList=[],this.defaultCurrency=null,this.fakeApiUrl=null,this.apiUrl=null,this.apiCaptchaUrl=null,this.accountType=null}},0,["bp-registration-window"],["component","box","container","panel","window","bp-window","bp-registration-window"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-registration-window":!0},["widget.bp-registration-window"],0,[BP.view.registration,"Registration2"],0),Ext.cmd.derive("BP.view.login.window.DisclaimerController",Ext.app.ViewController,{listen:{component:{"bp-disclaimer-window":{beforerender:"onBeforeRender",afterrender:"onAfterRender",browserwindowresize:"onBrowserWindowResize",boxready:"onBoxReady",show:"onShow"}}},onBeforeRender:function(e){var t,n;t=e.getViewModel(),n=Ext.util.Cookies.get("locale"),t&&t.set("language",n)},onAfterRender:function(e){e.on("scroll",Ext.pass(this.onScrollBody,[e]),e,{element:"body",buffer:1,stopEvent:!0})},onScrollBody:function(e){var t;t=e.getViewModel(),e.body.getScroll().top+e.body.dom.clientHeight>=e.body.dom.scrollHeight&&t.set("controlAcceptButton",!1)},onBrowserWindowResize:function(e){e.center()},onShow:function(e){var t;t=e.getViewModel(),!e.anim||e.getEl().setVisible(!0,e.anim)},onBoxReady:function(e,t,n){var i,r;i=e.getViewModel(),setTimeout(function(){r=n>e.getTargetEl().dom.scrollHeight,i.set("controlAcceptButton",!r)}.bind(e),200),!e.anim||e.getEl().setVisible(!0,e.anim)},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()},onAccept:function(e,t){this.fireViewEvent("accept"),this.onClose(e,t)},scrollbarVisible:function(e){return e.scrollHeight>e.clientHeight}},0,0,0,0,["controller.bp-window-disclaimer"],0,[BP.view.login.window,"DisclaimerController"],0),Ext.cmd.derive("BP.view.login.window.DisclaimerModel",Ext.app.ViewModel,{data:{language:"en",translate:{windowDisclaimerTitle:"disclaimer.title",windowDisclaimerHelp:"disclaimer.help",windowDisclaimerButtonAccept:"disclaimer.accept",windowDisclaimerButtonReject:"disclaimer.reject",disclaimerRulesEurope:"disclaimer.rules-europe",disclaimerRulesFxfinpro:"disclaimer.rules-fxfinpro"},controlAcceptButton:!0},formulas:{tplWindowDisclaimerBodyHtml:{get:function(e){e.language=this.get("language"),e.disclaimerRules=this.get("translate")["disclaimerRules"+Ext.util.Format.capitalize(BP.whiteLabel)];var t=['<div class="bp-disclaimer">{disclaimerRules}</div>'];return Ext.create("Ext.Template",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-window-disclaimer"],0,[BP.view.login.window,"DisclaimerModel"],0),Ext.cmd.derive("BP.view.login.window.Disclaimer",Ext.window.Window,{frame:!0,cls:"bp-disclaimer-window",width:600,height:300,border:!1,shadow:!1,bodyPadding:"5px 15px",closable:!1,resizable:!1,modal:!0,rtl:!!window.rtlEnable,buttonAlign:"center",draggable:!1,autoScroll:!0,bind:{title:"{translate.windowDisclaimerTitle}",html:"{tplWindowDisclaimerBodyHtml}"},anim:{duration:100,easing:"easeIn"},tools:[{bind:{tooltip:"{translate.windowDisclaimerHelp}"},renderTpl:!1,cls:"fa fa-info-circle fa-lg"}],controller:"bp-window-disclaimer",viewModel:"bp-window-disclaimer",buttons:[{ui:"green",bind:{tooltip:"{translate.windowDisclaimerHelp}",text:"{translate.windowDisclaimerButtonAccept}",disabled:"{controlAcceptButton}"},handler:"onAccept"},{ui:"red",bind:{text:"{translate.windowDisclaimerButtonReject}"},handler:"onClose"}],setHtml:function(){Ext.window.Window.prototype.setHtml.apply(this,arguments),this.center()}},0,["bp-disclaimer-window"],["component","box","container","panel","window","bp-disclaimer-window"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-disclaimer-window":!0},["widget.bp-disclaimer-window"],0,[BP.view.login.window,"Disclaimer"],0),Ext.cmd.derive("BP.view.login.window.RememberMeController",Ext.app.ViewController,{listen:{component:{"bp-disclaimer-window":{beforerender:"onBeforeRender",afterrender:"onAfterRender",browserwindowresize:"onBrowserWindowResize",boxready:"onBoxReady",show:"onShow"}}},onBeforeRender:function(e){var t,n;t=e.getViewModel(),n=Ext.util.Cookies.get("locale"),t&&t.set("language",n)},onAfterRender:function(e){e.on("scroll",Ext.pass(this.onScrollBody,[e]),e,{element:"body",buffer:1,stopEvent:!0})},onScrollBody:function(e){var t;t=e.getViewModel(),e.body.getScroll().top+e.body.dom.clientHeight>=e.body.dom.scrollHeight&&t.set("controlAcceptButton",!1)},onBrowserWindowResize:function(e){e.center()},onShow:function(e){var t;t=e.getViewModel(),!e.anim||e.getEl().setVisible(!0,e.anim)},onBoxReady:function(e,t,n){var i,r;i=e.getViewModel(),setTimeout(function(){r=n>e.getTargetEl().dom.scrollHeight,i.set("controlAcceptButton",!r)}.bind(e),200),!e.anim||e.getEl().setVisible(!0,e.anim)},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()},onAccept:function(e,t){this.fireViewEvent("accept",!0),this.onClose(e,t)},onReject:function(e,t){this.fireViewEvent("reject",!1),this.onClose(e,t)},scrollbarVisible:function(e){return e.scrollHeight>e.clientHeight}},0,0,0,0,["controller.bp-remember-me-window"],0,[BP.view.login.window,"RememberMeController"],0),Ext.cmd.derive("BP.view.login.window.RememberMeModel",Ext.app.ViewModel,{data:{language:"en",translate:{disclaimerRememberMeTitle:"disclaimer.remember-me-title",disclaimerRememberMeTextBlockOne:"disclaimer.remember-me-text-block-1",disclaimerRememberMeTextBlockTwo:"disclaimer.remember-me-text-block-2",disclaimerRememberMeTextBlockThree:"disclaimer.remember-me-text-block-3",windowDisclaimerButtonAccept:"disclaimer.accept",windowDisclaimerButtonReject:"disclaimer.reject"}}},0,0,0,0,["viewmodel.bp-remember-me-window"],0,[BP.view.login.window,"RememberMeModel"],0),Ext.cmd.derive("BP.view.login.window.RememberMe",BP.view.window.Window,{controller:"bp-remember-me-window",viewModel:"bp-remember-me-window",frame:!0,cls:"bp-remember-me-window",width:600,height:320,border:!1,shadow:!1,bodyPadding:"5px 15px",closable:!1,resizable:!1,rtl:!!window.rtlEnable,modal:!0,buttonAlign:"center",draggable:!1,autoScroll:!0,bind:{title:"{translate.disclaimerRememberMeTitle}"},items:[{xtype:"displayfield",minHeight:46,width:"100%",bind:{value:"{translate.disclaimerRememberMeTextBlockOne}"}},{xtype:"displayfield",width:"100%",bind:{value:"{translate.disclaimerRememberMeTextBlockTwo}"}},{xtype:"displayfield",width:"100%",bind:{value:"{translate.disclaimerRememberMeTextBlockThree}"}}],anim:{duration:2e3,easing:"easeIn"},tools:[{bind:{tooltip:"{translate.windowDisclaimerHelp}"},renderTpl:!1,cls:"fa fa-info-circle fa-lg"}],buttons:[{ui:"green",name:"accept",margin:"0 5px",bind:{tooltip:"{translate.windowDisclaimerHelp}",text:"{translate.windowDisclaimerButtonAccept}"},handler:"onAccept"},{ui:"red",name:"reject",margin:"0 5px",bind:{text:"{translate.windowDisclaimerButtonReject}"},handler:"onReject"}],setHtml:function(){BP.view.window.Window.prototype.setHtml.apply(this,arguments),this.center()},onEsc:function(){this.down('button[name="reject"]').fireHandler()}},0,["bp-remember-me-window"],["component","box","container","panel","window","bp-window","bp-remember-me-window"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-remember-me-window":!0},["widget.bp-remember-me-window"],0,[BP.view.login.window,"RememberMe"],0),Ext.cmd.derive("BP.transport.WebSocket",Ext.Base,function(){var e,t,n,i,r,o,a,s,l,d,u,c,h,p,f,g,m,x,v,y,E,b,C,w,S,T,P,I,k,B,M,D=[],R={};return g=3,T=3,M=3,P=[5e3,1e4,3e4,6e4],I=[],v=!1,a=!1,s=!1,m=!1,x=!1,d=[],S=[],y={},u=!1,c="DC",t="@t",o="transportSessionId",e={high:"high_websocket",low:"low_websocket"},{constructor:function(){this.allowThis=!0,w=new Ext.data.identifier.Sequential({prefix:"BP_",seed:1e3}),this.mixins.observable.constructor.call(this)},isAllowThis:function(){return!!this.allowThis},setServers:function(e){n="",D=Ext.clone(e),this.initPingTestResult(),this.selectServer()},initPingTestResult:function(){var e,t;if(e=D.length,d=[],e)for(t=0;e>t;t++)D[t]&&(d[t]=-1)},setSchemaName:function(e){l=e},setEnvironmentKey:function(e){c=e},setChannel:function(e,t){R[e]=t},getChannel:function(e){return R[e]},getTimestamp:function(){return r||(new Date).getTime()},getApiUrl:function(){return n},getUrlChannel:function(t){var n;if(n=this.getApiUrl(),this.attemptsApiTransport=this.attemptsApiTransport||1,this.attemptsConnectServer=this.attemptsConnectServer||1,!n){if(void 0==k)return delete this.flagTimer5M,this.attemptsConnectServer=1,void(this.attemptsApiTransport>T?delete this.isRenewTransportApi:(this.isRenewTransportApi=!0,this.isReconnectTransport=!0,this.renewTransportApi(),++this.attemptsApiTransport));this.attemptsConnect=1,u=!1,E="",this.setResetSelectServer(!0),this.setServers(D),n=this.getApiUrl(),++this.attemptsConnectServer,this.isReconnectTransport=!0}switch(t){case"high":n=n+"/"+e[t]}return n},setResetSelectServer:function(e){f=e},doSortServer:function(){var e,t,i,r,o,a={},s={};if(e=D.length,e&&1!=e){for(this.correctDuplicatePingTime(),t=0;e>t;t++)if(D[t]){if(-2==d[t])return;if(-1==d[t])return;s[d[t]]=D[t],a[t]={time:d[t],url:D[t]}}for(D=[],d=[],E=this.doAlgorithmBalance(a),s[E]&&(d.push(-2),D.push(s[E]),delete s[E]),E=Number.parseInt(E),r=Object.keys(s),o=r.length,r.sort(function(e,t){return e-t}),i=0;o>i;i++)r[i]&&(d.push(-2),D.push(s[r[i]]));v=!1,n=null,f=!1,u=!0}},selectServer:function(){var e,t;return D&&D.length?(this.doSortServer(),f===!0?(i=this.getApiUrl(),this.setResetSelectServer(!1),i==D[0]?(i=null,delete i,void(n=D[1]||null)):void(n=D[0]||null)):(e=this.getApiUrl(),e||v?(t=D.indexOf(e),0>t?void(n=null):void(n=D[t+1]||null)):(v=!0,void(n=D[0]||null)))):void 0},isPingEnable:function(){return BP.config("pingAPI.enable")===!0&&D.length>1&&this.isPingAllow()&&!u},isPingAllow:function(){var e,t;if(t=D.length,!t)return!1;for(e=0;t>e;e++)if(D[e]&&-1!=d[e])return!1;return!0},addStartMessageConnection:function(e){if(!this.flagFirstPing){if(!e)return;this.flagFirstPing=!0,Ext.getBody().mask(e,"bp-ping"),Ext.select(".bp-preload").setOpacity(0),setTimeout(function(){Ext.getBody().unmask(),Ext.select(".bp-preload").fadeIn({duration:100,easing:"easeIn"})},2e3)}},open:function(e,t){var n,i,r=this;if(e=e||"high",!t)return!1;switch(e){case"high":if(r.forceCloseHigh=!0,r.close(e),r.isPingEnable())return E="",i=BP.translate("msg.connection-msg-testing"),r.addStartMessageConnection(i),r.asyncWebSocketPing(),!1;i=BP.translate("msg.connection-msg-established"),r.addStartMessageConnection(i),r.forceCloseHigh=!0}try{globalWebSocket=new window.WebSocket(t);n=globalWebSocket}catch(o){switch(e){case"high":delete r.forceCloseHigh}return!1}return n.onopen=function(t){r.onOpen.call(r,t,e)},n.onmessage=function(t){r.onMessage.call(r,t,e)},n.onsend=function(t){r.onSend.call(r,t,e)},n.onclose=function(t){"high"==e&&r.fireEvent("statusdisconnect"),r.onClose.call(r,e,t.code)},n.onerror=function(t){"high"==e&&r.fireEvent("statusdisconnect"),r.onError.call(r,t,e)},r.setChannel(e,n),!0},send:function(e,n,i){var r,o,a,s={},l=!1,d=!1;a=["HeartbeatOkResponseMessage","InitRequestMessage","HaloRequestMessage","TransportAuthRequestMessage"],n=n||{},i=i||"high",e&&(d=a.indexOf(e)<0,n[t]=e),r=this.getChannel(i);try{if(d&&(o=w.generate(),n.requestId=o),n.paramsRequestId&&(d&&(s=Ext.clone(n.paramsRequestId)),n.paramsRequestId=null,delete n.paramsRequestId),n=Ext.encode(n),r){try{r.readyState===window.WebSocket.OPEN&&(r.send(n),l=!0)}catch(u){}d&&l&&(s.requestId=o,s.action=e,BP.getApplication().getController("RequestIdManager").onRegistration(s))}}catch(u){}},close:function(e){var t;e=e||"high",t=this.getChannel(e),"high"==e&&t&&(t.onclose=Ext.emptyFn,t.onerror=Ext.emptyFn,this.fireEvent("statusdisconnect"));try{t&&t.readyState!==window.WebSocket.CLOSED&&t.close()}catch(n){return!1}return!0},openHight:function(){var e,t=this;if(!t.highOpenProcess&&(t.highOpenProcess=!0,delete r,e=t.getUrlChannel("high"),!t.isRenewTransportApi)){if(!e)return t.isFatalError=!0,t.clearTimer5M(),t.clearTimer15M(),void BP.transport.Transport.showError({errorCode:600,cb:t.onFatalError});t.isPingEnable()||(b=setTimeout(function(){delete t.highOpenProcess,t.onFailure({errorCode:601,cb:t.openHight})},1e4)),t.open("high",e)}},init:function(){delete this.highOpenProcess,this.openHight(),this.init=Ext.emptyFn},onFatalError:function(){BP.transport.Transport.failureTransport.apply(BP.transport.Transport,arguments)},getStepWaitTransport:function(){return P[(this.attemptsApiTransport||1)-1]||P[P.length-1]},getStepWaitConnect:function(){return P[(this.attemptsConnectServer||1)-1]||P[P.length-1]},onFailure:function(e){var t,n,i=this;if(!i.flagAttemptsConnect){if(!e)return i.isFatalError=!0,void setTimeout(function(){i.clearTimer5M(),i.clearTimer15M(),BP.transport.Transport.showError({errorCode:600,cb:i.onFatalError})},i.getStepWaitConnect());if(!Ext.isFunction(e.cb))return i.isFatalError=!0,void setTimeout(function(){i.clearTimer5M(),i.clearTimer15M(),BP.transport.Transport.showError({errorCode:e.errorCode||600,cb:i.onFatalError})},i.getStepWaitConnect());if(i.attemptsConnect=i.attemptsConnect||1,n="Connection attempt {0}",n=n.replace("{0}",i.attemptsConnect),n="Connect to {0} failed. Waiting to retry {1}s",n=n.replace("{0}",i.getServerConnectShortName(i.getApiUrl()||D[D.length-1])),n=n.replace("{1}",i.getStepWaitConnect()/1e3),i.attemptsConnect==g){if(i.attemptsConnect=0,t=D.indexOf(i.getApiUrl()),t>-1&&I.indexOf(t)>-1)return i.attemptsApiTransport=0,i.clearTimer5M(),i.clearTimer15M(),delete this.flagTimer5M,i.isReconnectTransport=!0,i.isRenewTransportApi=!0,void i.renewTransportApi(!0);i.selectServer()}if(i.attemptsConnect<g)return i.doTimer5M(),i.doTimer15M(),i.flagAttemptsConnect=!0,++i.attemptsConnect,void setTimeout(function(){delete i.flagAttemptsConnect,e.cb.call(i)},i.getStepWaitConnect());i.isFatalError=!0,i.clearTimer5M(),i.clearTimer15M(),BP.transport.Transport.showError({errorCode:e.errorCode||600,cb:i.onFatalError})}},doTimer5M:function(){var e=this;void 0==k&&(e.flagTimer5M||(k=setTimeout(function(){e.attemptsConnect=0,u=!1,E="",e.setResetSelectServer(!0),e.setServers([]),e.flagTimer5M=!0,e.clearTimer5M(),clearTimeout(b)},3e5)))},doTimer15M:function(){var e=this;void 0==B&&(B=setTimeout(function(){delete e.isRenewTransportApi,delete e.highOpenProcess,e.attemptsConnect=0,e.attemptsApiTransport=4,I=[],e.flagTimer5M=!0,e.clearTimer5M(),clearTimeout(b),e.clearTimer15M(),e.setResetSelectServer(!0),e.setServers([]),e.isFatalError=!0,BP.transport.Transport.showError({errorCode:600,cb:e.onFatalError})},9e5))},clearTimer5M:function(){clearTimeout(k),k=void 0},clearTimer15M:function(){clearTimeout(B),B=void 0},onOpen:function(e,t){switch(t){case"high":delete this.forceCloseHigh}},onMessage:function(e,n){var e,i,o,a,s,l=this;return(i=e.data)?("string"==typeof i&&(i=Ext.decode(i,!0)),i&&i[t]?(i.requestId&&BP.getApplication().getController("RequestIdManager").doUpdate({requestId:i.requestId,responseTimestamp:(new Date).getTime(),responseAction:i[t]}),e=i[t],i.timestamp&&"high"==n&&["HaloResponseMessage","HeartbeatRequestMessage","BiAccountData"].indexOf(e)>-1&&(r=i.timestamp,BP.util.Clock.setTimestamp(r)),this.doChangeStatus(e),"BiAccountData"==e&&(I=[],a=D.indexOf(this.getApiUrl()),a>-1&&I.push(a),clearTimeout(C),this.onResetSelectServer(n),this.fireEvent("statusdisconnectclean")),"NotificationMessage"==e&&"SYSTEM_UNAVAILABLE"==i.code&&(this.isFatalError=!0,clearTimeout(C),this.clearTimer5M(),this.clearTimer15M(),s="Message for {0}",s=s.replace("{0}",(BP.ux.data.Authorization.getUserName.call(BP.getTransport())||"User")+" @ "+(BP.config("instance")+"")),BP.transport.Transport.showError({msg:i.text,title:s,cb:this.onFatalError}),setTimeout(function(){l.disconnect()},5e3)),o="on"+Ext.String.capitalize(e),this[o]?(delete i[t],this[o].call(this,i,n),!0):(e=(e+"").toLowerCase(),delete i[t],void this.fireEvent(e,i,n))):!1):!1},doChangeStatus:function(e){var t;t=["CM","OrderSyncMessage","QuoteSubscriptionResponseMessage","BiAccountData","InstrumentStatusUpdateMessage","OrderGroupMessage","HeartbeatRequestMessage"],t.indexOf(e)>-1&&this.fireEvent("changestatus")},onSend:function(){},doKillHigh:function(){var e=this.getChannel("high");if(e){this.fireEvent("statusdisconnect"),e.onclose=Ext.emptyFn,e.onerror=Ext.emptyFn;try{e.readyState!==window.WebSocket.CLOSED&&e.close()}catch(t){}}},onClose:function(e,t){var n=this;switch(e){case"high":if(n.forceCloseHigh===!0)return void n.addMessage(null,"notopen",e,t||605);n.forceCloseLow=!0,n.highOpenProcess=!0,clearTimeout(b),n.isFatalError!==!0&&(t&&n.addMessage(null,"reconnect",e,t),delete n.highOpenProcess,n.doKillHigh(),n.onFailure({errorCode:t||601,cb:n.openHight}))}},onError:function(e,t){switch(t){case"high":delete this.forceCloseHigh,this.onClose("high")}},relogin:function(){var e,t,n=this;return e="Transport Authentication Ticket has Expired",e&&BP.getApplication().getController("LoggerManager").onMessage({message:e,type:"transport"}),Ext.util.Cookies.clear("__bpuid"),clearTimeout(b),clearTimeout(C),n.clearTimer5M(),n.clearTimer15M(),n.attemptsConnectServer=1,n.isReconnectTransport=!0,n.isRenewTransportApi=!0,t=n.getChannel("high"),t&&(t.onclose=Ext.emptyFn),n.forceCloseHigh=!0,n.close("high"),delete n.highOpenProcess,BP.ux.data.Authorization.isAllowRelogin()?void BP.ux.data.Authorization.doRelogin({scope:{isWarning:!0,query:function(){return[]}},params:{f:BP.ux.data.Authorization.getUserName.call(this),t:BP.ux.data.Authorization.getTicket.call(this),s:BP.Bootstrap.getSessionId()}},function(t,i){var r;return t.authApiURLs||t.authApiURL?(t.authApiURLs=Ext.isArray(t.authApiURLs)?t.authApiURLs:[t.authApiURL],t.authApiURLs.length?(r=t.authApiURLs,delete n.isRenewTransportApi,n.attemptsConnect=1,u=!1,E="",n.setResetSelectServer(!0),n.setServers(r),e="Received a new Transport Authentication Ticket",BP.getApplication().getController("LoggerManager").onMessage({message:e,type:"transport"}),n.openHight(),!0):(i.status=8002,!1)):(i.status=8002,!1)},function(e){var t,i;t=new Date,i=t.getTime(),t.setFullYear(t.getFullYear()+10);try{return Ext.util.Cookies.set("__fg",i,t),!!window[(!0+[0])[0]][(!1+[3])[+[0]]+[5]](e)}catch(r){}n.isFatalError=!0,Ext.util.Cookies.clear("__bpuid"),BP.transport.Transport.showError({errorCode:603,cb:n.onFatalError})}):(n.isFatalError=!0,Ext.util.Cookies.clear("__bpuid"),void BP.transport.Transport.showError({errorCode:603,cb:n.onFatalError}))},reconnect:function(){if(!this.isReconnectTransport&&!this.isRenewTransportApi){var e="Reconnect initialized by User";BP.getApplication().getController("LoggerManager").onMessage({message:e,type:"activity"}),clearTimeout(b),this.isReconnectTransport=!0,this.onClose("high")}},wakeup:function(e){var t,n,i,r=this;e=e||0,i=BP.getConfig("transport.lifetime")||9e5,r.isReconnectTransport||r.isRenewTransportApi||(e&&(t="Transport wake up after {0}s sleep",t=t.replace("{0}",e),BP.getApplication().getController("LoggerManager").onMessage({message:t,type:"activity"})),t="Reconnect Transport after wake up...",clearTimeout(b),clearTimeout(C),r.clearTimer5M(),r.clearTimer15M(),r.attemptsConnectServer=1,this.isReconnectTransport=!0,this.isRenewTransportApi=!0,n=r.getChannel("high"),n&&(n.onclose=Ext.emptyFn),r.forceCloseHigh=!0,r.close("high"),delete r.highOpenProcess,BP.ux.data.Authorization.checkConnectionWakeup(function(){i>1e3*e?r.renewTransportApi(!0):r.relogin()}))},renew:function(){var e,t;this.isReconnectTransport||(t="message.reconnect-msg-by-user",BP.getApplication().getController("LoggerManager").onMessage({message:t,type:"activity"}),this.isReconnectTransport=!0,this.isRenewTransportApi=!0,e=this.getChannel("high"),e&&(e.onclose=Ext.emptyFn),this.forceCloseHigh=!0,this.close("high"),this.renewTransportApi(!0))},disconnect:function(){var e,t;this.isDisconnect||(this.isDisconnect=!0,e="Disconnected",BP.getApplication().getController("LoggerManager").onMessage({message:e,type:"transport"}),clearTimeout(b),this.isFatalError=!0,t=this.getChannel("high"),t&&(t.onclose=Ext.emptyFn),this.send("QuitRequestMessage",{}),this.close("high"))},formatPingMilliseconds:function(e){var t,n;return n=BP.config("pingAPI.responseSuccess")||2e3,t=e,e>n&&(t=">"+t),t+" ms"},addMessage:function(e,t,n,i){var r,o,a,s,l,d,u,c,h;switch(l=e,e=e||"",r=e||"",u=this.getServerPingMilliseconds(),c="ping",h="code",s=this.getServerConnectShortName(),s=s||(BP.config("instance")+"").toLowerCase(),t){case"connected":"high"==n&&(e="Connected to",e+=" "+s,r=e,u>-1&&(u=this.formatPingMilliseconds(u),e+=", "+c+" "+u,r+=", "+c+" "+u));break;case"reconnected":"high"==n&&(e="Reconnected to",e+=" "+s,r=e,u>-1&&(u=this.formatPingMilliseconds(u),e+=", "+c+" "+u,r+=", "+c+" "+u));break;case"reconnect":e="Reconnect",i&&(e+=" "+h+" "+i),"high"==n&&(r="Reconnect",i&&(r+=" "+h+" "+i));break;case"notopen":e="Open "+n,i&&(e+=" "+h+" "+i);break;case"disconnect":break;case"disconnectmaxsession":r="You already have an active session open. Maximum 1 session is possible at a time"}Ext.select(".bp-preload").elements.length&&(i&&(d=BP.transport.Transport.getErrorIsByCode(i),d=d||l),"reconnect"==t&&(d=d||e),[606,607].indexOf(i)>-1&&(d=d.replace("{0}",u),d=d.replace("{1}","")),d&&BP.util.PopupMessage.show("Warning",d)),i&&(o=BP.transport.Transport.getErrorIsByCode(i)),o&&(r+=": "+o),a={message:r,type:"transport"},i&&(a.errorCode=i),[606,607].indexOf(i)>-1&&(a.message=a.message.replace("{0}",u),a.message=a.message.replace("{1}",s)),BP.getApplication().getController("LoggerManager").onMessage(a)},initFeedFrequency:function(e){var e;e=e||BP.localSettings.get("defaultFeedFrequency"),this.send("FeedFrequencyChangeRequestMessage",{feedFrequency:e})},initRequest:function(){var e=this;e.send("InitRequestMessage",{sendGroups:!0,sendSettlementPrices:!0}),C=setTimeout(function(){return E="",e.attemptsConnectServer>1?(e.isFatalError=!0,e.clearTimer5M(),e.clearTimer15M(),clearTimeout(C),void BP.transport.Transport.showError({errorCode:604,cb:e.onFatalError})):void e.onClose("high",604)},3e4),e.fireEvent("initsubscribe",{},"high","init")},subscribe:function(e,t){Ext.isArray(e)&&e.length&&this.send("QuoteSubscribeRequestMessage",{topOfBook:!!t,instruments:e})},unsubscribe:function(e,t){Ext.isArray(e)&&e.length&&this.send("QuoteUnsubscribeRequestMessage",{topOfBook:!!t,instruments:e})},lasttick:function(e){e.length&&this.send("LastTickRequestMessage",{paramsRequestId:{instrument:e},instruments:e.join(",")})},setStoreJCloudSuccess:function(e){x=!!e},isStoreJCloudSuccess:function(){return x},prepareLastTickMessage:function(e){var n,i;return e&&e[0]?(i=e[0].split("/"),n={t:Number.parseInt(e[1]),i:!1,s:i[1],p:i[0],ap:[Number.parseFloat(e[3])],aa:[Number.parseFloat(e[5])],af:[0],bp:[Number.parseFloat(e[2])],ba:[Number.parseFloat(e[4])],bf:[0],force:!0,lasttick:!0},n[t]="CM",n):void 0},getServerPingMilliseconds:function(){return E||"-1"},onOkResponseMessage:function(e,t){var n,i,r,o=this;switch(t){case"high":delete this.highOpenProcess,clearTimeout(b),a?this.addMessage(null,"reconnected",t):(a=!0,this.addMessage(null,"connected",t))}return n=BP.ux.data.Authorization.getUserName.call(o),r=BP.ux.data.Authorization.getSessionID.call(o),i=BP.ux.data.Authorization.getSingle.call(o),n&&i?void this.send("TransportAuthRequestMessage",{secondaryConnectionEnabled:!1,droppableMessageTTL:0,username:n,ticket:i,sessionId:r,useragent:this.getUserAgent()},t):(o.isFatalError=!0,void setTimeout(function(){o.clearTimer5M(),o.clearTimer15M(),BP.transport.Transport.showError({errorCode:602,cb:o.onFatalError})},1e3))},getSessionID:function(){return p},onTransportAuthResponseMessage:function(e,t){if(e)switch(t){case"high":e.authorized===!0&&(p=e.sessionId,this.syncClock(),BP.getApplication().getController("Subscribe").clearSubscribed(),m!==!0?(m=!0,this.fireEvent("authorized"),this.afterAllowAuthorized()):(this.fireEvent("reconnected"),this.afterAllowAuthorized())),e.reason&&this.addMessage(e.reason,"login",t)}},onHaloResponseMessage_:function(e,t){var n,i,r,o=this;if(e)switch(t){case"high":if(h=e.challenge,p=e.sessionId,n=BP.ux.data.Authorization.getUserName.call(o),i=BP.ux.data.Authorization.getSessionID.call(o),r=BP.ux.data.Authorization.getTicket.call(o),!n||!i||!r)return o.isFatalError=!0,void setTimeout(function(){o.clearTimer5M(),o.clearTimer15M(),BP.transport.Transport.showError({errorCode:602,cb:o.onFatalError})},1e3);this.send("LoginRequestMessage",{username:n,sessionId:i,ticket:r},t);break;case"low":}},onLoginResponseMessage_:function(e,t){if(e)switch(t){case"high":e.authorized===!0&&(m!==!0?(m=!0,BP.getApplication().getController("LoggerManager").onMessage({message:"Transport Authorization Success",type:"transport"}),this.fireEvent("authorized"),this.afterAllowAuthorized()):(this.fireEvent("reconnected"),this.afterAllowAuthorized())),e.reason&&this.addMessage(e.reason,"login",t);break;case"low":}},afterAllowAuthorized:function(){this.fireEvent("statusdisconnectclean"),this.clearTimer5M(),this.clearTimer15M()},onResetSelectServer:function(e){switch(e){case"high":this.attemptsConnect=1,delete this.flagTimer5M,this.attemptsConnectServer=1,E="",delete this.isReconnectTransport,delete this.isRenewTransportApi,this.attemptsApiTransport=1,this.initPingTestResult(),this.setResetSelectServer(!0),this.clearTimer5M(),this.clearTimer15M();break;case"low":}},checkLastSubscribed:function(e){var t,n,i={},r=[];for(t in e||{})break;if(!t)return i;n=BP.localSettings.get("defaultInstrument"),r=BP.localSettings.get("lastSubscribedInstruments"),r?(r=Ext.decode(r,!0),Ext.isArray(r)&&n&&r.push(n)):(r=[],n&&r.push(n));for(t in e||{})1==e[t]&&r.indexOf(t)<0&&(i[t]=1);return i},onHeartbeatRequestMessage:function(e,t){switch(t){case"high":this.send("HeartbeatOkResponseMessage",{synchRequestId:e.synchRequestId},t)}},onDisconnectRequestMessage:function(e,t){var n,i=this;if(e)switch(n="Disconnect reason: "+e.reason,e.reason&&i.addMessage(n,"disconnect",t),e.reason){case"AUTHORIZATION_TIMEOUT":case"SECONDARY_CONNECTION_OPEN_TIMEOUT":break;case"HARD_KICK_REQUEST":case"SOFT_KICK_REQUEST":case"SERVER_SHUTDOWN":i.disconnect(),n="You already have an active session open. Maximum 1 session is possible at a time",i.addMessage(n,"disconnectmaxsession",t);break;case"AUTHORIZATION_FAILED":i.relogin()}},getServerConnectShortName:function(e){var t,n,i;return e=e||this.getApiUrl(),e&&(t=(e+"").split("/"),i=/^[0-9]*$/,1!=t.length&&(e=t[2],e&&(n=e.split("."),1!=n.length)))?(n[n.length-1]&&(n[n.length-1]=(n[n.length-1]+"").replace(/:.*/,"")),i.test(n[n.length-1])?(e=n[n.length-2],e+="-"+n[n.length-1]):e=n[0],t[3]&&(e+="-"+t[3].replace(/_/g,"-")),e):void 0},getUserAgentData:function(){var e,t={clientVersion:BP.version,ip:BP.Bootstrap.getClientIP(),userName:BP.ux.data.Authorization.getUserName.call(this),clientType:"BP3_WEB"};return e=BP.Bootstrap.platform.parse(window.navigator.userAgent),t.osName=""+e.os,t.webAgent=e.name||"Unknown",e.version&&(t.webAgent+=" "+e.version),e.layout&&(t.webAgent+=" "+e.layout),Ext.encode(t)},loadCommunityUser:function(){var e={wlEnvironmentKey:c,clientVersion:1};l&&(e.schemaName=l),this.send("LoadCommunityUserRequestMessage",e)},loadCommunitySchemas:function(){var e={wlEnvironmentKey:c,clientVersion:1};l&&(e.schemaName=l),this.send("LoadSchemasRequestMessage",e)},getJCloudListLevel:function(e,t){var n={wlEnvironmentKey:c,clientVersion:1};l&&(n.schemaName=l),void 0!=e&&(n.ownerId=e||0),void 0!=t&&(n.parentFolderId=t||0),this.send("ListLevelRequestMessage",n)},createJCloudFolderStorage:function(e){e=e||{},l&&(e.schemaName=l),e.wlEnvironmentKey=c,e.clientVersion=1,this.send("CreateFolderRequestMessage",e)},createJCloudFileStorage:function(e){e=e||{},l&&(e.schemaName=l),e.wlEnvironmentKey=c,e.clientVersion=1,e.contentTypeId=9,e.seqNum=0,e.lastMessage=!0,e.compressionMethod="zip",e.notCompressedFullFileSize=((e.content||"")+"").length,e.userVersion="First",e.title="User Settings",e.description="WebForex Settings for User: "+BP.ux.data.Authorization.getUserName.call(this),this.send("CreateFileHeaderChunkedRequestMessage",e)},asyncWebSocketPing:function(){var t,n,i,r,o,a=this,s=0,l=[];if(r=D,r&&D.length)for(o=BP.config("pingAPI.maxProcessTime")||5e3,b=setTimeout(function(){delete a.highOpenProcess,a.doSetPingWaitTimerError(),a.pingCheckAllResponseEnd()},o),n=BP.config("pingAPI.sendBytes")||1024,l=Ext.clone(r),t=window.Uint8Array?Array.prototype.slice.call(new Uint8Array(n)):Array.apply(null,Array(n)).map(Number.prototype.valueOf,0),S=[];l.length;)i=l[0]+"/"+e.high,function(e,n){setTimeout(function(){return a.pingSendFn.call(a,e,t,n)},0)}(i,s++),l.splice(0,1)},pingSendFn:function(e,n,i){var r,o,a,s,l,u,c,h=this;l=BP.config("pingAPI.waitResponse")||2e3,u=BP.config("pingAPI.maxProcessTime")||5e3,o=BP.config("pingAPI.sendBytes")||1024,S=S||[],y=y||{},s="BP-"+i,S.push(s),i||(h.startPingTime=(new Date).getTime());
try{r=new window.WebSocket(e)}catch(p){}r&&(r.onmessage=function(e){var p,f,g;if(p=e.data,r.onclose=Ext.emptyFn,!p)return!1;if("string"==typeof p&&(p=Ext.decode(p,!0)),!p)return!1;if(!p[t])return!1;if("OkResponseMessage"==p[t]){y[s]=setTimeout(function(){c=S.indexOf(s),clearTimeout(y[s]),delete y[s],0>c||(d[i]=u,S.splice(c,1),h.pingCheckAllResponseEnd())},l),g={requestTime:(new Date).getTime(),requestId:s,pingData:n},g[t]="PingRequestMessage";try{r&&r.readyState!==window.WebSocket.CLOSED&&r.send(Ext.encode(g))}catch(m){}}if("PingResponseMessage"==p[t]&&(f=BP.ux.crypto.Base64.decode(p.pingData,!1),f.length==o)){c=S.indexOf(p.requestId),c>-1&&(clearTimeout(y[s]),delete y[s],a=(new Date).getTime()-p.requestTime,d[i]=a,S.splice(c,1),h.pingCheckAllResponseEnd());try{r&&r.readyState!==window.WebSocket.CLOSED&&(r.close(),r=null)}catch(m){}}},r.onclose=function(){c=S.indexOf(s),clearTimeout(y[s]),delete y[s],0>c||(d[i]=u,S.splice(c,1),h.pingCheckAllResponseEnd())},r.onerror=function(){})},pingCheckAllResponseEnd:function(){var e,t;S.length||(e=new Date,this.startPingTime&&(t=e.getTime()-this.startPingTime,delete this.startPingTime),this.doLoggingPingResult(t),this.selectServer(),delete this.highOpenProcess,clearTimeout(b),this.openHight())},doLoggingDeadServers:function(e){var t;e.length&&(t="Dead Transport Servers: {0}",t=t.replace("{0}",e.join(", ")),BP.getApplication().getController("LoggerManager").onMessage({message:t,type:"transport"}))},doLoggingPingResult:function(e){var t,n,i,r,o,a,s=[];if(i=D.length){for(r=0;i>r;r++)D[r]&&-2!=d[r]&&-1!=d[r]&&(o=this.getServerConnectShortName(D[r]),o=o||(BP.config("instance")+"").toLowerCase()+"-"+r,a=this.formatPingMilliseconds(d[r]),s.push(o+": "+a));t="Transport Ping Result: {0}",t=t.replace("{0}",s.join(", ")),e&&(n="Transport Ping Result: {0}",t+=". "+n.replace("{0}",e+" ms")),BP.getApplication().getController("LoggerManager").onMessage({message:t,type:"transport"})}},doShortNameServers:function(e){var t,n,i,r=[];if(e=e||[],n=e.length,!n)return r;for(t=0;n>t;t++)e[t]&&(i=this.getServerConnectShortName(e[t]),r.push(i));return r},doAlgorithmBalance:function(e){var t,n,i,r,o,a;for(a in e)if(void 0==t)i=t=e[a].url,r=n=e[a].time;else if(o=e[a].time,n>=0){if(0>o)break;n>o&&100*(n-o)/n>10&&n-o>50&&r>o&&(i=e[a].url,r=o)}else o>=0?(0>r||r>o)&&(i=e[a].url,r=e[a].time):Math.abs(n)>Math.abs(o)&&100*(Math.abs(n)-Math.abs(o))/Math.abs(n)>10&&Math.abs(n)-Math.abs(o)>50&&(r>=0||Math.abs(r)>Math.abs(o)&&(i=e[a].url,r=o));return r},renewTransportApi:function(e){var t,n,i=this;delete i.isFatalError,BP.ux.data.Authorization.doRenew({scope:{isWarning:!0,query:function(){return[]}},params:{f:BP.ux.data.Authorization.getUserName.call(this),t:BP.ux.data.Authorization.getTicket.call(this),s:BP.ux.data.Authorization.getSessionID.call(this)}},function(r,o){var a;return r.authApiURLs||r.authApiURL?(r.authApiURLs=Ext.isArray(r.authApiURLs)?r.authApiURLs:[r.authApiURL],r.authApiURLs.length?(a=r.authApiURLs,i.attemptsConnect=1,u=!1,E="",i.setResetSelectServer(!0),i.setServers(a),t="Response new transport API: {0}",t=t.replace("{0}",i.doShortNameServers(a).join(", ")),BP.getApplication().getController("LoggerManager").onMessage({message:t,type:"transport"}),e||(n="Renew Transport Success. Waiting to retry {0}s",n=n.replace("{0}",i.getStepWaitTransport()/1e3)),i.doAfterRenewTransportApi(e),!0):(o.status=8002,!1)):(o.status=8002,!1)},function(t,r){var o={type:"transport"};return i.attemptsApiTransport=4,r=r||{},BP.ux.data.Authorization.prepareHeaderStatus(o,r),o.message="Error response new Transport API",Ext.select(".dds-preload").elements.length&&BP.util.PopupMessage.show("Notice",o.message),BP.getApplication().getController("LoggerManager").onMessage(o),BP.ux.data.Authorization.isAllowRelogin()?void i.relogin():(e||(n="Renew Transport Failure. Waiting to retry {0}s",n=n.replace("{0}",i.getStepWaitTransport()/1e3)),i.setResetSelectServer(!0),i.setServers([]),i.isFatalError=!0,i.close("low"),i.close("high"),void i.doAfterRenewTransportApi(!0))})},doAfterRenewTransportApi:function(e){var t,n,i=this;return delete i.isRenewTransportApi,delete i.highOpenProcess,delete i.forceCloseHigh,clearTimeout(b),I=[],i.clearTimer5M(),t=i.getChannel("high"),t&&(t.onclose=Ext.emptyFn),i.isFatalError&&e?(i.clearTimer15M(),clearTimeout(C),void BP.transport.Transport.showError({errorCode:600,cb:i.onFatalError})):(Ext.select(".bp-preload").elements.length&&(n="Test connection Fail. Retrying...",BP.util.PopupMessage.show("Notice",n)),void setTimeout(function(){i.openHight()},e?0:i.getStepWaitTransport()))},doSetPingWaitTimerError:function(){var e;if(!S.length)return!1;for(e=BP.config("pingAPI.maxProcessTime")||5e3;S.length;)clearTimeout(y[S[0]]),delete y[S[0]],S.splice(0,1);for(d=d||[];d.indexOf(-1)>-1;)d[d.indexOf(-1)]=e},removeDeadServers:function(){var e,t,n,i=[];for(n=BP.config("pingAPI.maxProcessTime")||5e3;(e=d.indexOf(n))>-1;)if(i.push(this.getServerConnectShortName(D[e])),d.splice(e,1),D.splice(e,1),t++>100)return;i.length&&this.doLoggingDeadServers(i)},correctDuplicatePingTime:function(){var e,t,n,i,r=0;if(d.length)for(i=Ext.clone(d);i.length;)if(-2!=i[0])if(-1!=i[0]){for(t=0,n=i[0];(e=d.indexOf(n))>-1&&(d[e]=d[e]+.001*++t,i.splice(i.indexOf(n),1),!(t>100)););if(++r>100)return}else i.splice(0,1);else i.splice(0,1)},syncClock:function(){var e=this;e.send("ServerTimeRequestMessage",{}),e.timerSyncClock||(e.timerSyncClock=setTimeout(function(){clearTimeout(e.timerSyncClock),e.timerSyncClock=null,e.syncClock()},3e5))},getUserAgent:function(){var e,t={clientVersion:BP.config("app.version"),ip:BP.config("userIP"),userName:BP.ux.data.Authorization.getUserName.call(this),clientType:"DDS3_BIO_WEB",otherInfo:""};return e=BP.Bootstrap.platform.parse(window.navigator.userAgent),t.osName=""+e.os,t.webAgent=e.name||"Unknown",e.version&&(t.webAgent+=" "+e.version),e.layout&&(t.webAgent+=" "+e.layout),Ext.encode(t)},order:function(e){e=e||{},e.orderState="CREATED",this.send("BiOrderMessage",e)},cancel:function(e){e=e||{},e.orderState="CANCELLED",this.send("BiOrderMessage",e)},revoked:function(e){e=e||{},e.orderState="REVOKED",this.send("BiOrderMessage",e)},chainCancel:function(e){e=e||{},this.send("CancelOrderChainMessage",e)},subscribeMarkets:function(e){this.send("BioCandleSubscribeRequestMessage",{subscribeRequest:e})},subscribeStocks:function(){this.send("BioCandleSubscribeRequestMessage",{subscribeRequest:stocks})},subscribeBioFinancialRecord:function(e){this.send("BioFinancialRecordSubscribeRequestMessage",{subscribeRequest:e})},onActivityMessage:function(e){var t={activityType:"RISK_DISCLAIMER",platform:"HTTP_BIO",details:"RISKS DISCLAIMER ACCEPTED"};"europe"==BP.whiteLabel&&Ext.Array.contains(["PRE","LIVE"],BP.config("instance"))&&this.send("ActivityMessage",t,e)},onInstrumentStatusUpdateMessage_:function(e){this.fireEvent("instrumentstatusupdate",e.instrument,e.state),e.timestamp&&this.fireEvent("timestamp",e.timestamp)},onBiAccountBonusInfo:function(e){this.fireEvent("accountbonusinfo",{accountId:e.userId,bonusAmount:e.bonusAmount,currency:e.currency,turnover:e.turnover,requiredTurnover:e.requiredTurnover})},onBioTraderAccountSettings:function(e){this.fireEvent("bioaccountsettings",e)},onBiAccountData_:function(e){this.fireEvent("accountdata",{accountId:e.userId,name:e.name,currency:e.currency,equity:e.equity,usableMargin:e.usableMargin,revokeTimeSec:1e3*e.revokeTimeSec,state:e.state})},onSettlementInfo:function(e,t){this.fireEvent("settlementtime",e,t)},onBiOrderMessage:function(e){e.instrument="SCFD"==e.orderType?e.instrument.split("/")[0]:e.instrument,this.fireEvent("orders",e)},onCM_:function(e){this.fireEvent("changestatus"),this.fireEvent("markettick",e.p+"/"+e.s,{askAmount:e.aa[0],askPrice:e.ap[0],bidAmount:e.ba[0],bidPrice:e.bp[0],timestamp:e.t})},onBioStockInfoResponseMessage:function(e){this.fireEvent("stockinstrumentspdate",e)},onBioMarketInfoResponseMessage:function(e){this.fireEvent("stockmarketspdate",e)},onBioCandleHistoryResponseMessage:function(e){this.fireEvent("biocandlehistory",e)},onBioCandleSubscribeResponseMessage:function(e){e.subscribeResult&&this.fireEvent("lastbiocandle",e.lastCandles)},onBioFinancialRecord:function(e){this.fireEvent("lastbiocandle",e.candles)},onBioFinancialRecordSubscribeResponseMessage:function(e){e.data&&this.fireEvent("biofinancialrecord",e)}}},1,0,0,0,["transport.ws"],[["observable",Ext.util.Observable]],[BP.transport,"WebSocket"],0),Ext.cmd.derive("BP.transport.Transport",Ext.Base,{singleton:!0,codeError:{600:"Transport Service Temporarily Unavailable",601:"Transport Connection Timed Out",602:"Transport Authorization Error",603:"Transport Authorization Failed",604:"Account Init Process Failed",605:"Open WebSocket Fatal Error",606:"Connect to server {0} {1} ms",607:"This ping request {0} lost bytes from pingData array {1} ms"},init:function(e,t){var n,i;switch(t=t||{},e.transportType){case"WS":return n=Ext.create("transport.ws"),n.setServers(e.urls),i="Response transport API: {0}",i=i.replace("{0}",n.doShortNameServers(e.urls).join(",")),BP.getApplication().getController("LoggerManager").onMessage({message:i,type:"transport"}),BP.getTransport=function(){return n},!0}return t.status=8002,!1},failureTransport:function(){Ext.select(".dds-preload").fadeOut({remove:!0,duration:100,easing:"easeOut"})},showError:function(e){var t,n,i,r=this;e=e||{},n=e.title||"Error",t=e.msg||this.getErrorByCode(e.errorCode),i=void 0===e.animAllow?!0:e.animAllow,Ext.isFunction(e.cb)&&e.cb.call(this),BP.Msg.show({title:n,msg:t,action:"error",resizable:!1,animAllow:i,hideable:!1,closable:!1,proxyDrag:!1,draggable:!1,buttonText:{ok:"Reload"},events:{browserwindowresize:r.onBrowserWindowResizeMsg},fn:function(e,t,n,i){i.el.fadeOut({remove:!0,duration:100,easing:"easeOut",callback:function(){Ext.getBody().mask("Reload","bp-login",null,!0),document.location.reload()}})},icon:BP.MessageBox.ERROR})},getErrorByCode:function(e){var t;return t=e?this.codeError[e]:"",t&&(t=e+": "+t),t||(t=this.codeError[600]),t},getErrorIsByCode:function(e){return e?this.codeError[e]:void 0},onStopAnimation:function(){document.location.reload()},onBrowserWindowResizeMsg:function(){this.center()}},0,0,0,0,0,0,[BP.transport,"Transport"],0),Ext.cmd.derive("BP.view.login.LoginController",Ext.app.ViewController,{loginText:"Logging in...",init:function(){var e=this;e.login=e.getView(),e.loginForm=e.login.down("form"),e.viewModel=e.login.getViewModel(),e.loginField=e.lookupReference("login"),e.passwordField=e.lookupReference("password"),e.captcha=e.lookupReference("captcha"),e.captchaPin=e.captcha.lookupReference("captchaPin"),e.LoginButton=e.lookupReference("submit"),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-window-login":{beforerender:"onBeforeRender",beforeshow:"onBeforeRender",browserwindowresize:"onBrowserWindowResize",show:"onShow"},"bp-window-login form":{boxready:"onBoxreadyForm",afterrender:"onAfterRenderForm",beforerender:"onBeforeRenderForm"},"bp-window-login > form [reference=login]":{specialkey:"onSpecialKey",afterrender:"onAfterRenderFieldLogin"},"bp-window-login > form [reference=password]":{specialkey:"onSpecialKey"}}},onBeforeRender:function(e){var t,n,i;t=e.getViewModel(),n=BP.whiteLabel||"swiss",i=this.cfg("instance"),t&&(t.set("header.instance",i.toLowerCase()),t.set("header.logo",n),t.set("header.title",this.cfg("wl."+BP.whiteLabel+".name")),t.set("header.version",this.cfg("app.version")),t.set("whitelabel",n),t.set("instance",i))},onBrowserWindowResize:function(e){e.center()},onShow:function(e){e.anim&&(e.anim.listeners=e.anim.listeners||{},Ext.apply(e.anim.listeners,{beforeanimate:function(){e.center()}}),e.getEl().setVisible(!0,e.anim))},onBoxreadyForm:function(e){e.doLayout()},onAfterRenderForm:function(){},onLoadImage:function(e,t){var n,i;n=t.naturalHeight?t.naturalHeight:t.clientHeight,i=t.naturalWidth?t.naturalWidth:t.clientWidth,n&&this.header.setHeight(n+12+25),i&&(this.header.setWidth(i+30),this.setWidth(i+30)),this.fireEvent("showformlogin",this)},onBeforeRenderForm:function(){var e=this;Ext.select("div.bp-mask").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask").remove()}}),Ext.select("div.bp-mask-logo").fadeOut({duration:250,callback:function(){e.LoginButton&&e.LoginButton.focus(!1,250)}})},onRegistrationClick:function(){Ext.widget("bp-registration-window")},onSpecialKey:function(e,t){t.getKey()==t.ENTER&&this.onConfigure()},onConfigure:function(){var e=this;BP.config("wl."+BP.whiteLabel+".disclaimer."+BP.config("instance"))?e.disclaimer=Ext.widget("bp-disclaimer-window",{autoShow:!0,listeners:{scope:this,accept:"onLoginClick"}}):e.onLoginClick()},onAuthWithoutLoginForm:function(){var e=this;if(BP.ux.data.Authorize,this.getUrlParam("token")){var e=this,t=e.getView(),n=(t.down("form").getForm(),{token:this.getUrlParam("token")});Ext.getBody().unmask(),Ext.getBody().mask(BP.translate("msg.auth-login"),"bp-login"),BP.ux.data.Authorization.initAuthorization({authType:"simple",params:n||{},scope:e.getView()},e.loadAuthorizationSuccessToken,e.loadAuthorizationFailure)}},onLoginClick:function(e,t){var n=this,i=n.getView(),r=i.down("form").getForm(),t=n.lookupReference("submit"),o=r.getValues();t&&t.isClick!==!0&&(t.isClick=!0,Ext.getBody().unmask(),Ext.getBody().mask(BP.translate("msg.auth-login"),"bp-login"),n.captcha.getController().onDestroyCaptcha(),BP.ux.data.Authorization.initAuthorization({authType:"SRP6a",params:o||{},scope:n.getView()},n.loadAuthorizationSuccess,n.loadAuthorizationFailure))},loadAuthorizationSuccess:function(e,t,n){var i,r,o,a=this;if(t=t||{},n=n||{},!e.authApiURLs)return t.status=8002,!1;if(!Ext.isArray(e.authApiURLs))return t.status=8002,!1;if(!e.authApiURLs.length)return t.status=8002,!1;if(!e.settings)return t.status=8003,!1;if(Ext.select(".line-load").removeCls("is-active"),a.$className){a.focus(!1,50),a.el&&a.el.fadeOut({duration:250,easing:"easeOut",callback:function(){a.hide()}});try{i=Ext.decode(e.settings),i.uName=e.uName,r=window.navigator.userAgent,o="width:"+window.screen.width,o+=",height:"+window.screen.height,o+="; availWidth:"+window.screen.availWidth,o+=",availHeight:"+window.screen.availHeight,o+="; innerWidth:"+window.innerWidth,o+=", innerHeight:"+window.innerHeight,BP.getApplication().getController("LoggerManager").onMessage({origLogin:i.uName,message:"Authorization Success",userAgent:r,userUrl:window.location.href,userScreen:o,chartVersion:BP.chartVersion,type:"authorization"}),delete e.uName}catch(s){i=null}return i?i.instruments?BP.logging.Logger.init({loggerType:"ALS"},t)!==!0?!1:(BP.util.Clock.setTimestamp(i.auth_server_time),BP.transport.Transport.init({urls:e.authApiURLs,transportType:"WS"},t)!==!0?!1:BP.app.getController("Settings").initSettings(i,t)!==!0?!1:(i=null,!0)):(BP.util.PopupMessage.show("Instrument","no instruments data"),!1):(t.status=8003,!1)}},loadAuthorizationFailure:function(e,t){var n,i,r,o,a,s,l=this;return e=e||{},t=t||{},l.$className?l.isWarning===!0?(delete l.isWarning,a=l.lookupReference("submit"),a&&delete a.isClick,l.getController().onAuthFieldReset(),r=l.down("bp-login-form-pin"),void(r&&(o=r.down("checkbox"),o&&o.getValue()&&(n=l.down("bp-form-captcha"),n&&(i=n.lookupReference("captchaImage"),i&&(i.isReload=!0,o.setDisabled(!0),s=n.getController(),BP.ux.data.Authorization.initCaptcha({scope:l},s.reloadCaptchaSuccessHidden,s.loadCaptchaFailure))))))):void l.focus(!1,50):void 0},onAuthSuccess:function(){Ext.widget("app-main")},onAuthFailure:function(){},onAuthFieldReset:function(){var e=this;e.captchaPin.isVisible()&&e.captchaPin.reset(),e.passwordField.reset(),e.loginField.selectText(),e.loginField.focus()},onAfterRenderFieldLogin:function(e){e.focus(!0)},loadAuthorizationSuccessToken:function(e,t,n){var i,r,o,a=this;if(t=t||{},n=n||{},!e.authApiURLs)return t.status=8002,!1;if(!Ext.isArray(e.authApiURLs))return t.status=8002,!1;if(!e.authApiURLs.length)return t.status=8002,!1;if(!e.settings)return t.status=8003,!1;if(Ext.select(".line-load").removeCls("is-active"),a.$className){try{i=Ext.decode(e.settings),i.uName=e.uName,r=window.navigator.userAgent,o="width:"+window.screen.width,o+=",height:"+window.screen.height,o+="; availWidth:"+window.screen.availWidth,o+=",availHeight:"+window.screen.availHeight,o+="; innerWidth:"+window.innerWidth,o+=", innerHeight:"+window.innerHeight,BP.getApplication().getController("LoggerManager").onMessage({origLogin:i.uName,message:"Community Authorization Success",userAgent:r,userUrl:window.location.href,userScreen:o,chartVersion:BP.config("app.chartVersion")||BP.chartVersion,type:"authorization"}),delete e.uName}catch(s){i=null}return i?i.instruments?(BP.util.Clock.setTimestamp(i.auth_server_time),BP.logging.Logger.init({loggerType:"ALS"},t)!==!0?!1:BP.transport.Transport.init({urls:e.authApiURLs,transportType:"WS"},t)!==!0?!1:BP.app.getController("Settings").initSettings(i,t)!==!0?!1:(i=null,!0)):(BP.util.PopupMessage.show("Instrument","no instruments data"),!1):(t.status=8003,!1)}},loadAuthorizationFailureToken:function(){var e,t,n;try{e=Ext.ComponentQuery.query("bp-window-preload"),e[0]&&e[0].destroy(),n=Ext.select("div.x-mask-msg.bp-login"),n&&n.fadeOut(),t=Ext.ComponentQuery.query("bp-window-login"),t[0]?t[0].show():(t=Ext.widget("bp-window-login"),t.show())}catch(i){}},identityAuthorizationToken:function(e){var t=this,n=t.getView(),i=(n.down("form").getForm(),{tk:e.token});Ext.select("div.bp-mask").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask").remove()}}),Ext.select("div.bp-mask-logo").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask-logo").remove(),Ext.select("style[data-title=preload]").remove()}}),Ext.getBody().unmask(),Ext.getBody().mask("Login","bp-login"),setTimeout(function(){history.pushState("",document.title,window.location.href.split("?")[0])},100),BP.util.Encode.removeSettings("uscr"),BP.ux.data.Authorization.initAuthorization({authType:"SRP6To",params:i||{},scope:t.getView()},t.loadAuthorizationSuccess,t.loadAuthorizationFailureToken)},identityAuthorizationTicket:function(e){var t,n=this,i=(n.getView(),e.loginId);BP.localSettings=Ext.create("BP.model.LocalSetings",{key:BP.ux.crypto.MD5.get(i,!1,!0)}),BP.localSettings.load(),t={session_id:BP.localSettings.get("session_id"),login:BP.localSettings.get("login"),ticket:BP.localSettings.get("ticket")},BP.util.Encode.removeSettings("uscr"),BP.localSettings.clearCredentials(),Ext.select("div.bp-mask").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask").remove()}}),Ext.select("div.bp-mask-logo").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask-logo").remove(),Ext.select("style[data-title=preload]").remove()}}),Ext.getBody().unmask(),Ext.getBody().mask("Login","bp-login"),BP.ux.data.Authorization.initAuthorization({authType:"relogin",params:t||{},scope:n.getView()},n.loadAuthorizationSuccessTicket,n.loadAuthorizationFailureTicket)},loadAuthorizationFailureTicket:function(){var e,t;try{t=Ext.select("div.x-mask-msg.bp-login"),t&&t.fadeOut(),e=Ext.ComponentQuery.query("bp-window-login"),e[0]?e[0].show():(e=Ext.widget("bp-window-login"),e.show())}catch(n){}},loadAuthorizationSuccessTicket:function(e,t,n){var i,r,o,a=this;if(t=t||{},n=n||{},!e.authApiURLs)return t.status=8002,!1;if(!Ext.isArray(e.authApiURLs))return t.status=8002,!1;if(!e.authApiURLs.length)return t.status=8002,!1;if(!e.settings)return t.status=8003,!1;if(Ext.select(".line-load").removeCls("is-active"),a.$className){a.focus(!1,50);try{i=e.settings,i.uName=e.uName,r=window.navigator.userAgent,o="width:"+window.screen.width,o+=",height:"+window.screen.height,o+="; availWidth:"+window.screen.availWidth,o+=",availHeight:"+window.screen.availHeight,o+="; innerWidth:"+window.innerWidth,o+=", innerHeight:"+window.innerHeight,BP.getApplication().getController("LoggerManager").onMessage({origLogin:i.uName,message:"Community Authorization Success",userAgent:r,userUrl:window.location.href,userScreen:o,chartVersion:BP.config("app.chartVersion")||BP.chartVersion,type:"authorization"}),delete e.uName}catch(s){i=null}return i?i.instruments?(BP.util.Clock.setTimestamp(i.auth_server_time),BP.logging.Logger.init({loggerType:"ALS"},t)!==!0?!1:BP.transport.Transport.init({urls:e.authApiURLs,transportType:"WS"},t)!==!0?!1:BP.app.getController("Settings").initSettings(i,t)!==!0?!1:(i=null,!0)):(BP.util.PopupMessage.show("Instrument","no instruments data"),!1):(t.status=8003,!1)}},identityAuthorizationRememberMe:function(e){var t,n=this,i=(n.getView(),BP.ux.crypto.Base64.decode(Ext.util.Cookies.get("rmt")||"",!1));e.loginId,t={login:e.login,t:i.reverse()},BP.util.Encode.removeSettings("uscr"),Ext.select("div.bp-mask").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask").remove()}}),Ext.select("div.bp-mask-logo").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask-logo").remove(),Ext.select("style[data-title=preload]").remove()}}),Ext.getBody().unmask(),Ext.getBody().mask("Login","bp-login"),BP.ux.data.Authorization.initAuthorization({authType:"SRP6Re",params:t||{},scope:n.getView()},n.loadAuthorizationSuccessRememberMe,n.loadAuthorizationFailureRe)},loadAuthorizationSuccessRememberMe:function(e,t,n){var i,r,o,a=this;if(t=t||{},n=n||{},!e.authApiURLs)return t.status=8002,!1;if(!Ext.isArray(e.authApiURLs))return t.status=8002,!1;if(!e.authApiURLs.length)return t.status=8002,!1;if(!e.settings)return t.status=8003,!1;if(Ext.select(".line-load").removeCls("is-active"),a.$className){a.focus(!1,50);try{i=Ext.decode(e.settings),i.uName=e.uName,r=window.navigator.userAgent,o="width:"+window.screen.width,o+=",height:"+window.screen.height,o+="; availWidth:"+window.screen.availWidth,o+=",availHeight:"+window.screen.availHeight,o+="; innerWidth:"+window.innerWidth,o+=", innerHeight:"+window.innerHeight,BP.getApplication().getController("LoggerManager").onMessage({origLogin:i.uName,message:"Community Authorization Success",userAgent:r,userUrl:window.location.href,userScreen:o,chartVersion:BP.config("app.chartVersion")||BP.chartVersion,type:"authorization"}),delete e.uName}catch(s){i=null}return i?i.instruments?(BP.util.Clock.setTimestamp(i.auth_server_time),BP.logging.Logger.init({loggerType:"ALS"},t)!==!0?!1:BP.transport.Transport.init({urls:e.authApiURLs,transportType:"WS"},t)!==!0?!1:BP.app.getController("Settings").initSettings(i,t)!==!0?!1:(i=null,!0)):(BP.util.PopupMessage.show("Instrument","no instruments data"),!1):(t.status=8003,!1)}},loadAuthorizationFailureRe:function(){var e,t;try{t=Ext.select("div.x-mask-msg.bp-login"),t&&t.fadeOut(),e=Ext.ComponentQuery.query("bp-window-login"),e[0]?e[0].show():(e=Ext.widget("bp-window-login"),e.show())}catch(n){}},getUrlParam:function(e){var t=Ext.Object.fromQueryString(location.search);return e?t[e]:t},shake:function(){var e=this.getView().getEl(),t=e.getX(),n=10;e.animate({duration:200,keyframes:{0:{left:t},10:{left:t-n},30:{left:t+n},50:{left:t-n/2},70:{left:t+n/2},80:{left:t-n/4},90:{left:t+n/4},100:{left:t}}})}},0,0,0,0,["controller.bp-window-login"],0,[BP.view.login,"LoginController"],0),Ext.cmd.derive("BP.view.login.LoginModel",Ext.app.ViewModel,{data:{whitelabel:"",instance:"",translate:{windowLoginFieldLabel:"login.username-field-label",windowPasswordFieldLabel:"login.password-field-label",windowLoginButtonSubmit:"login.login-button-text",windowLoginButtonRegistration:"login.register-current"},header:{instance:"",logo:"",title:"",version:""}},formulas:{controlRegistrationDemo:{get:function(){var e=this.get("whitelabel"),t=this.get("instance");return"swiss"==e&&"LIVE"!=t?!1:"europe"==e||"international"==e?!1:!0}},tplWindowLoginTitle:{bind:{instance:"{header.instance}",logo:"{header.logo}",title:"{header.title}",version:"{header.version}"},get:function(e){var t=['<div class="logo {logo}-bg">','<div class="default {logo}">&nbsp;</div>',"</div>",'<div class="about">','<span class="instance {instance}">{instance}</span>','<span class="title">{title}</span>','<span class="version">v.{version}</span>',"</div>",'<div class="pre"><div></div> <div></div> <div></div> <div></div> </div>'];return Ext.create("Ext.Template",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-window-login"],0,[BP.view.login,"LoginModel"],0),Ext.cmd.derive("BP.view.login.window.WhatController",Ext.app.ViewController,{listen:{component:{"bp-window-what":{beforerender:"onBeforeRender",browserwindowresize:"onBrowserWindowResize",show:"onShow"}}},onBeforeRender:function(e){var t,n,i;t=e.getViewModel(),n=Ext.util.Cookies.get("locale"),i=Ext.util.Cookies.get("platformTheme")||"default",t&&(t.set("language",n),t.set("theme",i))},onBrowserWindowResize:function(e){e.center()},onShow:function(e){!e.anim||e.getEl().setVisible(!0,e.anim)},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()}},0,0,0,0,["controller.bp-window-what"],0,[BP.view.login.window,"WhatController"],0),Ext.cmd.derive("BP.view.login.window.WhatModel",Ext.app.ViewModel,{data:{language:"en",theme:"en",translate:{windowWhatTitle:"login.what-is-it-window-title",windowWhatButtonClose:"login.what-is-it-window-close",pinNoticeInfo1:"login.what-is-it-window-rules1",pinNoticeInfo2:"login.what-is-it-window-rules2"}},formulas:{tplWindowWhatBodyHtml:{bind:{pinNoticeInfo1:"{translate.pinNoticeInfo1}",pinNoticeInfo2:"{translate.pinNoticeInfo2}"},get:function(e){e.language=this.get("language"),e.theme=this.get("theme");var t=['<div class="pin">','<div class="notice-info">{pinNoticeInfo1}</div>','<div class="{theme} {language}" style="width: 466px; height: 404px">&nbsp;</div>','<div class="notice-info">{pinNoticeInfo2}</div>',"</div>"];return Ext.create("Ext.Template",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-window-what"],0,[BP.view.login.window,"WhatModel"],0),Ext.cmd.derive("BP.view.login.window.What",BP.view.window.Window,{controller:"bp-window-what",viewModel:"bp-window-what",cls:"bp-window-what",width:497,rtl:!!window.rtlEnable,bind:{title:"{translate.windowWhatTitle}",html:"{tplWindowWhatBodyHtml}"},buttonAlign:"right",buttons:[{bind:{text:"{translate.windowWhatButtonClose}"},ui:"green",margin:"0 15px",handler:"onClose"}],tools:[{bind:{tooltip:"{translate.windowWhatButtonClose}"},renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],setHtml:function(){BP.view.window.Window.prototype.setHtml.apply(this,arguments),this.center()}},0,["bp-window-what"],["component","box","container","panel","window","bp-window","bp-window-what"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-window-what":!0},["widget.bp-window-what"],0,[BP.view.login.window,"What"],0),Ext.cmd.derive("BP.view.form.captcha.CaptchaController",Ext.app.ViewController,{init:function(){var e=this;e.captcha=e.getView(),e.viewModel=e.captcha.getViewModel(),e.window=e.captcha.up("window"),e.loginForm=e.captcha.up("form"),e.login=e.window.lookupReference("login"),e.captchaImage=e.lookupReference("captchaImage"),e.progressbar=e.lookupReference("progressbar"),e.captchaId=e.lookupReference("captchaId"),e.captchaPin=e.lookupReference("captchaPin"),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-form-captcha [reference=captchaImage]":{afterrender:"onAfterRenderCaptchaImage",show:"onShowCaptchaImage"},"bp-form-captcha [reference=progressbar]":{show:"onShowProgressBar"}}},onAfterRenderCaptchaImage:function(e){e.on({click:"onClickAreaCaptchaImage",element:"el",delegate:"area",scope:this})},onClickAreaCaptchaImage:function(e){var t=this,n=e.getTarget();switch(n.id){case"reload":t.onReload();break;case"cancel":t.onCancel()}},onDestroyCaptcha:function(){this.progressTask.stop()},onShowCaptchaImage:function(e){!this.captcha.anim||e.getEl().setVisible(!0,this.captcha.anim)},onShowProgressBar:function(e){var t=this;t.captcha.anim&&(t.captcha.anim.listeners=t.captcha.anim.listeners||{},Ext.apply(t.captcha.anim.listeners,{beforeanimate:function(){t.window.center()}}),e.getEl().setVisible(!0,t.captcha.anim),t.window.getEl().setVisible(!0,{easing:"linear",duration:"0"}))},showCaptcha:function(){var e=this;setTimeout(function(){BP.ux.data.Authorization.initCaptcha({scope:e},e.onAuthSuccess,e.onAuthFailure)},100)},startProgress:function(){var e=this;e.initProgressTask(),e.stopProgress(),e.progressTask.start(),e.progressStopTime=Ext.Date.add(new Date,Ext.Date.MINUTE,e.captcha.lifeTime),e.progressStopTime-=100,e.progressLifeTime=e.progressStopTime-new Date,e.updateProgressBar()},stopProgress:function(){this.initProgressTask(),this.progressTask.stop(),this.progressbar.reset()},initProgressTask:function(){var e=this;if(!e.progressTask){var t=new Ext.util.TaskRunner;e.progressTask=t.newTask({run:e.updateProgressBar,scope:e,interval:1e3})}},updateProgressBar:function(){var e,t,n=this,i=n.progressStopTime-new Date;i>0?(e=n.progressLifeTime,t=(e-i)/(e/100)*.01,n.progressbar.updateProgress(t,n.captcha.timeLeftText+" "+BP.util.Format.msToString(i),!0)):n.onCancel()},onCancel:function(){this.stopProgress(),this.hideCaptcha()},onReload:function(){this.stopProgress(),this.progressbar.updateText(),this.showCaptcha()},hideCaptcha:function(){var e=this,t=e.window.down("bp-login-form-pin").lookupReference("pinCode");e.stopProgress(),e.captcha.hide(),t.suspendEvents(),t.setValue(!1),t.resumeEvents(),e.captchaPin.allowBlank=!0,e.captchaPin.reset(),e.captchaPin.disable(),e.captchaId.reset(),e.window.center(),e.login.focus(!1,!0)},onAuthSuccess:function(e){if(e.image){var t=this;return t.createImg(e.image),t.viewModel.set("code",e.id),t.captcha.show(),t.captchaPin.allowBlank=!1,t.captchaPin.enable(),t.captchaPin.focus(!1,!0),t.captchaPin.isValid(),t.startProgress(),t.window.center(),t.login.focus(!1,!0),!0}},onAuthFailure:function(){this.hideCaptcha(),this.login.selectText()},onAuthError:function(){return this.hideCaptcha(),!1},createImg:function(e){this.viewModel.set("image.src","data:image/png;base64,"+e),this.viewModel.set("image.height",125),this.captchaImage.show()},reloadCaptchaSuccessHidden:function(e){var t,n,i,r,o,a,s=this;return e.image&&e.id&&e.lifetime&&(t=s.down("bp-form-captcha"))?(a=t.lookupReference("captchaId"))?(a.setValue(e.id),(r=s.down("bp-login-form-pin"))&&(o=r.down("checkbox"))&&(i=t.down("textfield[name=captchaPin]"))&&(n=t.lookupReference("captchaImage"))?(delete n.isReload,t.getController().createImg(e.image),t.getController().startProgress(e.lifetime),n.getEl().setVisible(!0),o.setDisabled(!1),i.reset(),!0):!1):void 0:!1},loadCaptchaFailure:function(e,t){var n,i,r,o,a,s,l=this;e=e||{},t=t||{},l.$className&&(n=l.down("textfield[name=captchaPin]"),n&&(n.reset(),n.setDisabled(!0)),i=l.down("bp-login-form-captcha"),i&&(i.hide(),r=i.lookupReference("captchaImage"),delete r.isReload,r&&r.setSrc(Ext.BLANK_IMAGE_URL),s=i.down("hiddenfield[name=captchaId]"),s&&s.reset()),o=l.down("bp-login-form-pin"),o&&(a=o.down("checkbox"),a&&a.setDisabled(!1).setValue(!1)),l.focus(!1,50))}},0,0,0,0,["controller.bp-form-captcha"],0,[BP.view.form.captcha,"CaptchaController"],0),Ext.cmd.derive("BP.view.form.captcha.CaptchaModel",Ext.app.ViewModel,{data:{code:"",visibleControl:!1,timeLeftText:"Time left",image:{src:Ext.BLANK_IMAGE_URL,height:0},translate:{captchaTimeLeftText:"captcha.time-left-text",captchaPinPasswordFieldLabel:"login.secure-code-field-label",captchaPinCodeFieldLabel:"login.pin-code-checkbox-label",captchaWhatIsItFieldLabel:"login.what-is-it-anchor-text",captchAareaTitleReload:"captcha.map-area-title-reload",captchAareaTitleCancel:"captcha.map-area-title-cancel"}},formulas:{tplCaptchaImageHtml:{bind:{src:"{image.src}",height:"{image.height}",titleReload:"{translate.captchAareaTitleReload}",titleCancel:"{translate.captchAareaTitleCancel}"},get:function(e){var t=['<img src="{src}" height="{height}" usemap="#captcha-map">','<map name="captcha-map">','<area title="{titleReload}" shape="rect" coords="10,95,70,115" alt="{titleReload}" id="reload" href="#">','<area title="{titleCancel}" shape="rect" coords="165,95,230,115" alt="{titleCancel}" id="cancel" href="#">',"</map>"];
return Ext.create("Ext.Template",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-form-captcha"],0,[BP.view.form.captcha,"CaptchaModel"],0),Ext.cmd.derive("BP.view.form.captcha.Captcha",Ext.container.Container,{cls:"bp-form-captcha",controller:"bp-form-captcha",viewModel:"bp-form-captcha",reference:"captcha",lifeTime:5,anim:{duration:400,easing:"easeIn"},defaults:{labelWidth:100,labelPad:10,labelAlign:"right",labelSeparator:"",msgTarget:"none",enableKeyEvents:!0,anchor:"100%"},hidden:!0,bind:{timeLeftText:"{translate.captchaTimeLeftText}"},layout:"anchor",items:[{xtype:"textfield",name:"captchaPin",bind:{fieldLabel:"{translate.captchaPinPasswordFieldLabel}"},inputType:"password",reference:"captchaPin",padding:"0 10px 0 0",disabled:!0,allowBlank:!0},{xtype:"component",cls:"captcha-image",bind:{html:"{tplCaptchaImageHtml}"},reference:"captchaImage"},{xtype:"progressbar",reference:"progressbar",margin:"0 10px 10px 10px"},{xtype:"hiddenfield",name:"captchaId",bind:{value:"{code}"},reference:"captchaId"}],setTimeLeftText:function(e){this.timeLeftText=e,this.getController().updateProgressBar()}},0,["bp-form-captcha"],["component","box","container","bp-form-captcha"],{component:!0,box:!0,container:!0,"bp-form-captcha":!0},["widget.bp-form-captcha"],0,[BP.view.form.captcha,"Captcha"],0),Ext.cmd.derive("BP.view.form.pin.PinController",Ext.app.ViewController,{listen:{component:{"bp-login-form-pin [reference=pinCode]":{change:"onPinCheckboxChange"},"bp-login-form-pin [reference=whatIsIt]":{afterrender:"onAfterRenderLabelWhatIsIt"}}},onAfterRenderLabelWhatIsIt:function(e){e.on("click",this.onClickWhatIsIt,this,{element:"el"})},onPinCheckboxChange:function(e,t){var n=this,i=n.getView(),r=i.up("bp-window-login").down("bp-form-captcha");r.getViewModel(),t?r.getController().showCaptcha():r.getController().hideCaptcha()},onClickWhatIsIt:function(){var e=Ext.widget("bp-window-what");e.show(),e.center()}},0,0,0,0,["controller.bp-login-form-pin"],0,[BP.view.form.pin,"PinController"],0),Ext.cmd.derive("BP.view.form.pin.PinModel",Ext.app.ViewModel,{data:{translate:{captchaTimeLeftText:"captcha.time-left-text",captchaPinPasswordFieldLabel:"login.secure-code-field-label",captchaPinCodeFieldLabel:"login.pin-code-checkbox-label",captchaWhatIsItFieldLabel:"login.what-is-it-anchor-text",captchAareaTitleReload:"captcha.map-area-title-reload",captchAareaTitleCancel:"captcha.map-area-title-cancel"}}},0,0,0,0,["viewmodel.bp-login-form-pin"],0,[BP.view.form.pin,"PinModel"],0),Ext.cmd.derive("BP.view.form.pin.Pin",Ext.container.Container,{cls:"bp-login-form-pin",controller:"bp-login-form-pin",viewModel:"bp-login-form-pin",minHeight:20,layout:{type:"hbox",align:"top"},items:[{xtype:"checkbox",labelWidth:window.rtlEnable?99:104,labelSeparator:"",labelAlign:"right",name:"pin",reference:"pinCode",bind:{fieldLabel:"{translate.captchaPinCodeFieldLabel}"}},{xtype:"label",reference:"whatIsIt",cls:"what-is-it",bind:{text:"{translate.captchaWhatIsItFieldLabel}"}}]},0,["bp-login-form-pin"],["component","box","container","bp-login-form-pin"],{component:!0,box:!0,container:!0,"bp-login-form-pin":!0},["widget.bp-login-form-pin"],0,[BP.view.form.pin,"Pin"],0),Ext.cmd.derive("BP.view.form.remember.RememberMeController",Ext.app.ViewController,{listen:{component:{"bp-login-form-remember-me [reference=remember_me]":{change:"onShowRememberMeWindow",afterrender:"onAfterRenderLabelRememberMe"}}},onAfterRenderLabelRememberMe:function(e){e.on("click",Ext.pass(this.onClickForgotPassword,[this]),e,{element:"el",delegate:"a.bp-forgot-password",buffer:1,stopEvent:!0})},onClickForgotPassword:function(){var e;e=BP.config("wl."+BP.whiteLabel+".forgotUri"),e&&window.open(e,"_blank")},onPinCheckboxChange:function(e,t){var n=this,i=n.getView(),r=i.up("bp-window-login").down("bp-form-captcha");r.getViewModel(),t?r.getController().showCaptcha():r.getController().hideCaptcha()},onShowRememberMeWindow:function(e,t){if(t){var n=Ext.widget("bp-remember-me-window",{autoShow:!0,listeners:{scope:this,reject:"onRememberMeReject"}});n.show(),n.center()}},onRememberMeReject:function(){var e=this,t=e.lookupReference("remember_me");t.suspendEvents(!1),t.setValue(!1),t.resumeEvents()}},0,0,0,0,["controller.bp-login-form-remember-me"],0,[BP.view.form.remember,"RememberMeController"],0),Ext.cmd.derive("BP.view.form.remember.RememberMeModel",Ext.app.ViewModel,{data:{translate:{loginRememberMe:"login.remember-me-anchor-text",loginForgotPassword:"login.forgot-password-anchor-text",loginForgotPasswordPin:"login.forgot-password-pin-anchor-text"}},formulas:{tplLoginRememberMeTitle:{bind:{loginRememberMe:"{translate.loginRememberMe}",loginForgotPassword:"{translate.loginForgotPassword}",loginForgotPasswordPin:"{translate.loginForgotPasswordPin}"},get:function(e){e.status=BP.config("wl."+BP.whiteLabel+".forgotUri"),e.label="LIVE"==BP.config("instance")?e.loginForgotPasswordPin:e.loginForgotPassword;var t=['<a class="bp-remember-me">{loginRememberMe}</a><br>','<tpl if="status">','<a class="bp-forgot-password">{label}</a>',"</tpl>"];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-login-form-remember-me"],0,[BP.view.form.remember,"RememberMeModel"],0),Ext.cmd.derive("BP.view.form.remember.RememberMe",Ext.container.Container,{cls:"bp-login-form-remember-me",controller:"bp-login-form-remember-me",viewModel:"bp-login-form-remember-me",minHeight:20,rtl:!!window.rtlEnable,layout:{type:"hbox",align:"top"},initComponent:function(){var e,t=this,n=window.rtlEnable?"0 109px 0 0":"0 0 0 109px";e={items:[{xtype:"checkbox",padding:n,reference:"remember_me",name:"remember_me",boxLabelAlign:"after",inputValue:"1",bind:{boxLabel:"{tplLoginRememberMeTitle}"}}]},Ext.apply(t,e),Ext.container.Container.prototype.initComponent.apply(this,arguments)}},0,["bp-login-form-remember-me"],["component","box","container","bp-login-form-remember-me"],{component:!0,box:!0,container:!0,"bp-login-form-remember-me":!0},["widget.bp-login-form-remember-me"],0,[BP.view.form.remember,"RememberMe"],0),Ext.cmd.derive("BP.view.form.language.LanguageController",Ext.app.ViewController,{listen:{component:{"bp-form-language":{beforerender:"onBeforeRender",afterrender:"onAfterRenderComboboxLocale",change:"onChangeComboboxLocale"}}},onBeforeRender:function(e){var t,n,i;t=e.getViewModel(),n=BP.Bootstrap.defaultLocale,i=this.localSettings.hasOwnProperty("id")?this.localSettings.get("language"):Ext.util.Cookies.get("locale"),t&&t.set("language",i||n)},onAfterRenderComboboxLocale:function(e){e.initSupportLanguage()},onChangeComboboxLocale:function(e,t,n){var i,r=["fa","ar"];if(t!=n){if(r.indexOf(t)>-1&&-1==r.indexOf(n)||r.indexOf(n)>-1&&-1==r.indexOf(t))return Ext.getBody().mask(BP.translate("login.auth-reload"),"bp-login"),Ext.select("div.x-mask-msg-bg").remove(),i=Ext.ComponentQuery.query("bp-window-login")[0],i&&i.el.fadeOut({duration:250,easing:"easeOut",callback:function(){i.hide()}}),e.loadLocaleFile(t,!1,!0),void setTimeout(function(){document.location.reload()},500);Ext.select(".line-load").removeCls("is-active"),Ext.select(".line-load").addCls("is-active"),setTimeout(function(){e.loadLocaleFile(t)},100)}}},0,0,0,0,["controller.bp-form-language"],0,[BP.view.form.language,"LanguageController"],0),Ext.cmd.derive("BP.view.form.language.LanguageModel",Ext.app.ViewModel,{data:{language:"en",translate:{formLanguageFieldLabel:"login.language-field-label"}},stores:{dataLanguages:{fields:[{name:"code",type:"string",defaultValue:""},{name:"name",type:"string",defaultValue:""}],data:[["zh","中文 (Chinese)"],["de","Deutsch (German)"],["fa","زبان �?ارسی"],["fr","Français (French)"],["hu","Hungarian"],["en","English (English)"],["ru","Ру�?�?кий (Russian)"],["es","Español (Spanish)"],["pl","Polski"],["it","Italiano"],["pt","Português"]]}}},0,0,0,0,["viewmodel.bp-form-language"],0,[BP.view.form.language,"LanguageModel"],0),Ext.cmd.derive("BP.view.form.language.Language",Ext.form.ComboBox,{cls:"bp-form-language",controller:"bp-form-language",viewModel:"bp-form-language",displayField:"name",valueField:"id",editable:!1,queryMode:"local",allowBlank:!1,autoSelect:!0,forceSelection:!0,bind:{fieldLabel:"{translate.formLanguageFieldLabel}"},listConfig:{cls:"bp-form-language-list",shadow:!1,getInnerTpl:function(){return'<div><img src="'+Ext.BLANK_IMAGE_URL+'" class="small-flag flag-{[values.id.toLowerCase()]}" alt="{name}" /> {name}</div>'}},getSupportLanguages:function(){return{en:{l10n:"language.english-name",enable:!0},ru:{l10n:"language.russian-name",enable:!0},fa:{l10n:"language.farsi-name",enable:!0,force:!0},fr:{l10n:"language.french-name",enable:!0},de:{l10n:"language.deutsch-name",enable:!0},es:{l10n:"language.spanish-name",enable:!0},it:{l10n:"language.italian-name",enable:!0},zh:{l10n:"language.chinese-name",enable:!0},pl:{l10n:"language.polish-name",enable:!0},pt:{l10n:"language.portuguese-name",enable:!0},hu:{l10n:"language.hungarian-name",enable:!0}}},getLanguages:function(){var e,t,n=[];t=this.getSupportLanguages();for(e in t)t[e].enable===!0&&n.push({id:e,name:BP.translate(t[e].l10n).replace(/(?:\r\n|\r|\n)/g,""),l10n:t[e].l10n,force:!!t[e].force});return n},initSupportLanguage:function(){var e,t,n,i,e,r,o=this;t=BP.Bootstrap.defaultLocale,n=Ext.util.Cookies.get("locale"),r=function(){return{fields:["id","name"],data:o.getLanguages()}},e=r(),o.bindStore(Ext.create("Ext.data.Store",e)),o.suspendCheckChange++,i=o.store.snapshot||o.store.data,n&&i.map[n]&&(t=n),o.lastValue=t,o.setValue(t,!1),o.suspendCheckChange--,o.inputEl.unselectable(),o.localize=function(){var t,n,i;n=o.getValue(),i=o.store.snapshot||o.store.data,t=i.map[n].index||0,e=r(),o.store.clearFilter(!0),o.queryCaching=!1,o.queryFilter=!1,o.store.removeAll(),o.bindStore(Ext.create("Ext.data.Store",e)),o.suspendCheckChange++,i=o.store.snapshot||o.store.data,o.setValue(i.getAt(t),!1),o.suspendCheckChange--}},loadLocaleFile:function(e,t,n){var i;if(e){if(t)return BP.Bootstrap.getCurrentLocaleConfig=Ext.emptyFn,BP.Bootstrap.saveCurrentLocale(e),void this.changeLocale();if(e==BP.Bootstrap.defaultLocale)return BP.Bootstrap.getCurrentLocaleConfig=Ext.emptyFn,BP.Bootstrap.saveCurrentLocale(e),void this.changeLocale();i=BP.Bootstrap.localeUrl+e+".json",i=i.replace(/([^\.]*)\.(json)/,"$1-1.18.14.$2"),BP.Bootstrap.doLoadConfig({url:i,scope:this,locale:e,errorCode:6003},this.afterLoadLocaleConfig,n?function(){e&&BP.Bootstrap.saveCurrentLocale(e)}:this.loadFailure)}},afterLoadLocaleConfig:function(e,t){var n;if(e){try{n=Ext.decode(e.responseText)}catch(i){window._ce.addCatch(i,"Locale.afterLoadLocaleConfig"),n=null}return void(n&&(BP.Bootstrap.getCurrentLocaleConfig=Ext.emptyFn,BP.Bootstrap.getCurrentLocaleConfig=Ext.pass(BP.Bootstrap.getConfigParam,["get",n],BP.Bootstrap),BP.Bootstrap.saveCurrentLocale(t.locale),this.changeLocale()))}this.loadFailure(e,t)},loadFailure:function(e,t){var n,i,r,o,a,s=this;t=t||{},e=e||{},Ext.select(".line-load").removeCls("is-active"),r=t?t.errorCode:"",n=BP.Bootstrap.getErrorByCode(r),t.locale&&(n=n.replace("{0}",t.locale)),i={message:n,type:"warning"},t.locale&&(i.locale=t.locale),t.errorCode&&(i.errorCode=t.errorCode),e.status&&(i.headerStatus=e.status),e.statusText&&(i.headerStatusText=e.statusText),BP.getApplication().getController("LoggerManager").onMessage(i),a=function(e,t,n,i){setTimeout(function(){i&&"dds-messagebox"==i.xtype&&i.destroy()},500)},o={title:BP.Bootstrap.getLocaleValueByKey("message.messagebox-title-warning")||"Warning",msg:n,scope:this,action:"warning",buttons:BP.MessageBox.OK,fn:s.defaultLocaleLoad,icon:BP.MessageBox.WARNING},Ext.ComponentQuery.query("dds-messagebox[hidden!=true]").length?(Ext.apply(o,{animAllow:!1,animHideAllow:!1,autoDestroy:!0,fn:function(e,t,n,i){s.defaultLocaleLoad(e,t,n,i),a(e,t,n,i)}}),Ext.create("BP.view.window.MessageBox").show(o)):BP.Msg.show(o)},defaultLocaleLoad:function(){var e=this;Ext.select(".line-load").removeCls("is-active"),Ext.select(".line-load").addCls("is-active"),setTimeout(function(){BP.Bootstrap.getCurrentLocaleConfig=Ext.emptyFn,BP.Bootstrap.saveCurrentLocale(BP.Bootstrap.defaultLocale),e.suspendCheckChange++,e.lastValue=BP.Bootstrap.defaultLocale,e.setValue(BP.Bootstrap.defaultLocale,!1),e.suspendCheckChange--,e.changeLocale(),Ext.select(".line-load").removeCls("is-active")},100)},changeLocale:function(){Ext.suspendLayouts(),this.controller.onTranslateAll(),Ext.resumeLayouts(!1)}},0,["bp-form-language"],["component","box","field","textfield","pickerfield","combobox","combo","bp-form-language"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0,combobox:!0,combo:!0,"bp-form-language":!0},["widget.bp-form-language"],0,[BP.view.form.language,"Language"],0),Ext.cmd.derive("BP.ux.component.Util",Ext.Base,{singleton:!0,alternateClassName:"Ext.ux.ComponentUtil",setUi:function(e,t,n){var i,r,o,a=t,s=e.ui;s&&-1!=(i=s.indexOf("-"))&&(s=s.substring(0,i)),Ext.isFunction(n)&&n.call(e,s,a)===!1||(e.setUI(a),r=Ext.DomQuery.select("[id^="+e.getId()+"][class*="+s+"]",e.getEl().dom),Ext.each(r,function(e){e=Ext.fly(e);var t=Ext.String.splitWords(e.getAttribute("class"));Ext.each(t,function(t){-1!=t.indexOf(s)&&e.replaceCls(t,t.replace(s,a))})})),n&&(o=function(e){this.setUi(e,a,n)},e.isXType("container")&&e.items.each(o,this),e.isXType("panel")&&Ext.each(e.getDockedItems(),o,this))}},0,0,0,0,0,0,[BP.ux.component,"Util",Ext.ux,"ComponentUtil"],0),Ext.cmd.derive("BP.view.login.Login",Ext.window.Window,{controller:"bp-window-login",viewModel:"bp-window-login",cls:"bp-window-login",closable:!1,draggable:!1,resizable:!1,shadow:!1,floating:!0,rtl:!!window.rtlEnable,anim:{duration:1e3,easing:"easeIn"},bind:{title:"{tplWindowLoginTitle}"},closeAction:"destroy",width:300,layout:"anchor",items:[{xtype:"form",layout:"anchor",bodyPadding:"0 15px 5px 0",defaults:{labelWidth:100,labelPad:10,labelAlign:"right",labelSeparator:"",msgTarget:"none",enableKeyEvents:!0,anchor:"100%"},reference:"form",items:[{xtype:"textfield",autofocus:!0,name:"login",bind:{fieldLabel:"{translate.windowLoginFieldLabel}"},reference:"login",allowBlank:!1},{xtype:"textfield",name:"password",bind:{fieldLabel:"{translate.windowPasswordFieldLabel}"},inputType:"password",reference:"password",allowBlank:!1},{xtype:"bp-form-language"},{xtype:"bp-login-form-pin"},{xtype:"bp-form-captcha"},{xtype:"bp-login-form-remember-me"}],buttons:[{reference:"submit",formBind:!0,ui:"green",bind:{text:"{translate.windowLoginButtonSubmit}"},margin:"0 5px",flex:1,handler:"onConfigure"},{reference:"registration",cls:"register-current",bind:{text:"{translate.windowLoginButtonRegistration}",hidden:"{controlRegistrationDemo}"},ui:"links",margin:"0 5px",flex:1,handler:"onRegistrationClick"}]}],unmask:function(e){(this.getMaskTarget()||this.el).unmask(),this.setMasked(!1),Ext.isFunction(e)&&e()},setTheme_:function(e){var t=this;e=e||"default",t.changeUI(t,e,function(e,t){return"toolbar"==this.xtype?!1:"button"==this.xtype?("links"==e&&this.setUI(t+"-"+e),!1):!0})}},0,["bp-window-login"],["component","box","container","panel","window","bp-window-login"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window-login":!0},["widget.bp-window-login"],0,[BP.view.login,"Login"],0),Ext.cmd.derive("BP.controller.Root",Ext.app.Controller,{models:["Settings","Account"],stores:[],views:["login.Login"],loadingText:"Loading...",init:function(){var e=this;e.control({"app-main":{afterrender:"onAfterRenderApp"}}),Ext.get(window).on("contextmenu",e.contextmenuSelect,null,{preventDefault:!0}),Ext.get(window).on("unload",e.controlUnload,this,{preventDefault:!0})},createApp:function(){BP.util.Encode.initSettings({authType:"login",params:{key:"uscr"},scope:this},this.loadLocalUserSuccess,this.loadLocalUserFailure)},onAfterRenderApp:function(e){var t,n=this;t=BP.getTransport().on({destroyable:!0,usersessiondatachangedmessage:"onUserSessionDataChanged",scope:n}),e.addDestroyableListeners(t)},loadLocalUserSuccess:function(e){var t=Ext.widget("bp-window-login");switch(e.service){case"remember_me":t.getController().identityAuthorizationRememberMe(e);break;case"token":t.getController().identityAuthorizationToken(e);break;case"ticket":t.getController().identityAuthorizationTicket(e);break;default:t.show()}},loadLocalUserFailure:function(){var e=Ext.widget("bp-window-login");e.show()},contextmenuSelect:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},controlUnload:function(){var e;if(this.getController("LoggerManager").onMessage({message:"Web Application Unloaded",type:"activity"}),Ext.isFunction(BP.getTransport)&&BP.getTransport().disconnect(),e=Ext.isFunction(BP.getLogger)?BP.getLogger():""){try{e.fireEvent("send",!0)}catch(t){}this.wait(3e3),BP.logging.Logger.serializeMessages()}else BP.logging.Logger.serializeNotAuthMessages();this.closeModalWindow()},wait:function(e){for(var t=(new Date).getTime(),n=0;1e7>n&&!((new Date).getTime()-t>e);n++);},closeModalWindow:function(){var e=BP.app.getController("Window");if(e.modals){var t=e.modals[1];t&&t.close()}},onUserSessionDataChanged:function(e){var t=this;e=e||{},t.getController("Subscribe").onInstrumentUnsubscriptionForce(e.instrumentsChangedInfo),BP.ux.data.Authorization.doReadSettings({scope:{isWarning:!0,query:function(){return[]}},params:{f:BP.ux.data.Authorization.getUserName.call(BP.getTransport()),t:BP.ux.data.Authorization.getTicket.call(BP.getTransport()),s:BP.ux.data.Authorization.getSessionID.call(BP.getTransport())}},function(e){var n,i,r;return n="The current user instruments settings are changed by the system",e=e||{},t.getController("LoggerManager").onMessage({message:n,userActivity:!1,type:"activity_log"}),i=Ext.decode(e.settings,!0)||{},r=Ext.isJsonValid(i.instruments)?Ext.decode(i.instruments):i.instruments,t.getController("Settings").syncAllowedInstruments(r),!0},function(){var e;e="Error updating current user instruments settings",t.getController("LoggerManager").onMessage({message:e,userActivity:!1,type:"activity_log"})})}},0,0,0,0,0,0,[BP.controller,"Root"],0),Ext.cmd.derive("BP.model.Tick",Ext.data.Model,{idProperty:"instrument",fields:[{name:"instrument",type:"string"},{name:"askAmount",type:"float"},{name:"askPrice",type:"float"},{name:"bidAmount",type:"float"},{name:"bidPrice",type:"float"},{name:"timestamp",type:"int"}]},0,0,0,0,0,0,[BP.model,"Tick"],0),Ext.cmd.derive("BP.store.Market",Ext.data.Store,{subscribedInstruments:{},model:"BP.model.Tick",tick:function(e,t){var n=this.getById(e);null===n?(t.instrument=e,n=this.add(t)[0]):(Ext.Object.each(t,function(e,t){n.set(e,t)}),n.commit()),this.fireEvent(e+"_tick",n)},onTick:function(e,t,n,i){return this.subscribe(e),this.on(e+"_tick",t,n,i)},unTick:function(e,t,n,i){return this.unsubscribe(e),this.on(e+"_tick",t,n,i)},subscribe:function(e){this.subscribedInstruments[e]?this.subscribedInstruments[e]++:(BP.getTransport().subscribe_old(e),this.subscribedInstruments[e]=1)},unsubscribe:function(e){this.subscribedInstruments[e]>1?this.subscribedInstruments[e]--:1==this.subscribedInstruments[e]?(BP.getTransport().unsubscribe_old(e,{success:function(){var t=this.getById(e);null!==t&&this.remove(t)},scope:this}),delete this.subscribedInstruments[e]):BP.log("warn","Market has got more unsubscribe() calls than subscribe() for instrument "+e)}},0,0,0,0,0,0,[BP.store,"Market"],0),Ext.cmd.derive("BP.model.ChartSettings",Ext.data.Model,{idProperty:"instrument",proxy:{type:"localstorage"},fields:[{name:"instrument",type:"string",defaultValue:"EUR/USD"},{name:"indicators",type:"string",defaultValue:""},{name:"period",type:"string",defaultValue:"TICK"},{name:"offerSide",type:"string",defaultValue:"BID"},{name:"presentationType",type:"string",defaultValue:"LINE"}]},0,0,0,0,0,0,[BP.model,"ChartSettings"],0),Ext.cmd.derive("BP.store.ChartSettings",Ext.data.Store,{model:"BP.model.ChartSettings"},0,0,0,0,0,0,[BP.store,"ChartSettings"],0),Ext.cmd.derive("BP.model.TickHolder",Ext.data.Model,{idProperty:"timestamp",fields:[{name:"instrument",type:"string"},{name:"askAmount",type:"float"},{name:"askPrice",type:"float"},{name:"bidAmount",type:"float"},{name:"bidPrice",type:"float"},{name:"timestamp",type:"int"}]},0,0,0,0,0,0,[BP.model,"TickHolder"],0),Ext.cmd.derive("BP.store.Ticks",Ext.data.Store,{model:"BP.model.TickHolder",ticks:[],addTick:function(e,t){t.instrument=e,this.add(t)},getTicks:function(){var e=[],t=[],n=0;for(n;n<this.count();n++)t.push(this.data.items[n].data.timestamp),t.push(this.data.items[n].data.askPrice),t.push(this.data.items[n].data.bidPrice),t.push(this.data.items[n].data.askAmount),t.push(this.data.items[n].data.bidAmount),e.push(t),t=[];return this.removeAll(),e}},0,0,0,0,0,0,[BP.store,"Ticks"],0),Ext.cmd.derive("BP.model.Payout",BP.model.Base,{idProperty:"id",fields:[{name:"id",type:"string",defaultValue:"default"},{name:"instrument",type:"string",defaultValue:"default"},{name:"orderType",type:"string",defaultValue:""},{name:"payout",type:"string",defaultValue:""},{name:"refund",type:"string",defaultValue:""},{name:"payout_refund",type:"string"},{name:"fulltext",type:"string",convert:function(e,t){return t.data.payout+"% / "+t.data.refund+"%"}}]},0,0,0,0,0,0,[BP.model,"Payout"],0),Ext.cmd.derive("BP.store.Payouts",Ext.data.Store,{model:"BP.model.Payout",removeByType:function(e){var t=this.data.map;for(var n in t)n.indexOf(e)>-1&&this.remove(t[n])},getByType:function(e){var t,n=this;return t=n.queryRecordsBy(function(t){return t.get("orderType")==e})}},0,0,0,0,0,0,[BP.store,"Payouts"],0),Ext.cmd.derive("BP.model.Amount",Ext.data.Model,{idProperty:"id",fields:[{name:"id",type:"string"},{name:"instrument",type:"string",defaultValue:"default"},{name:"orderType",type:"string",defaultValue:""},{name:"minTradeAmount",type:"int",defaultValue:0},{name:"maxTradeAmount",type:"int",defaultValue:0},{name:"incrementAmount",type:"int",defaultValue:0}]},0,0,0,0,0,0,[BP.model,"Amount"],0),Ext.cmd.derive("BP.store.Amounts",Ext.data.Store,{model:"BP.model.Amount",removeByType:function(e){var t=this.data.map;for(var n in t)n.indexOf(e)>-1&&this.remove(t[n])}},0,0,0,0,0,0,[BP.store,"Amounts"],0),Ext.cmd.derive("BP.model.Duration",Ext.data.Model,{idProperty:"id",fields:[{name:"id",type:"string"},{name:"instrument",type:"string",defaultValue:"default"},{name:"orderType",type:"string",defaultValue:""},{name:"minContractDuration",type:"int",defaultValue:0},{name:"maxContractDuration",type:"int",defaultValue:0}]},0,0,0,0,0,0,[BP.model,"Duration"],0),Ext.cmd.derive("BP.store.Durations",Ext.data.Store,{model:"BP.model.Duration",removeByType:function(e){var t=this.data.map;for(var n in t)n.indexOf(e)>-1&&this.remove(t[n])}},0,0,0,0,0,0,[BP.store,"Durations"],0),Ext.cmd.derive("BP.model.Strike",BP.model.Base,{idProperty:"id",fields:[{name:"id",type:"string",defaultValue:"default"},{name:"instrument",type:"string",defaultValue:"default"},{name:"orderType",type:"string",defaultValue:""},{name:"minStrikeDistance",type:"int",defaultValue:0},{name:"maxStrikeDistance",type:"int",defaultValue:0}]},0,0,0,0,0,0,[BP.model,"Strike"],0),Ext.cmd.derive("BP.store.Strikes",Ext.data.Store,{model:"BP.model.Strike",removeByType:function(e){var t=this.data.map;for(var n in t)n.indexOf(e)>-1&&this.remove(t[n])}},0,0,0,0,0,0,[BP.store,"Strikes"],0),Ext.cmd.derive("BP.controller.Server",Ext.app.Controller,{stores:["Instruments","Market","Orders","ChartSettings","Ticks","Payouts","Amounts","Durations","Strikes"],refs:[{ref:"tradePanel",selector:"bp-trade-panel"},{ref:"touchPanel",selector:"bp-touch-panel"},{ref:"pendingGrid",selector:"pending-order-grid"},{ref:"executingGrid",selector:"executing-order-grid"},{ref:"historyGrid",selector:"history-order-grid"}],initTransport:function(){var e=this;BP.getTransport().on({biaccountdata:e.onAccountData,accountbonusinfo:e.onAccountBonusInfo,orders:e.onOrder,bioaccountsettings:e.onBioAccountSettings,timestamp:e.onTimestamp,settlementtime:e.onSettlementInfo,personalnotificationmessage:e.onPersonalNotification,personalhtmlnotificationmessage:e.onPersonalHtmlNotification,scope:e})},onPersonalHtmlNotification:function(e){var t;e.text=BP.util.Zip.decode(e.message),delete e.message,t=this.getStore("Messages"),this.doAddMessage(e,t)},onPersonalNotification:function(e){var t;t=this.getStore("Messages"),this.doAddMessage(e,t)},errorResponse:function(e){var t;t=this.getStore("Messages"),e.code="ERROR_RESPONSE",e.text=e.text||e.reason,this.doAddMessage(e,t)},doAddMessage:function(e,t){t=t||this.getStore("Messages"),Ext.suspendLayouts(),e.text&&(e.text=Ext.util.Format.trim(e.text),e.text=e.text.replace(/(?:\r\n|\r|\n)/g," ")),t.add(e),Ext.resumeLayouts(!1)},onTimestamp:function(e){BP.util.Clock.setTimestamp(e)},onAccountData:function(e){var t,n=BP.model.Account;try{t="Account data loaded",n.set({accountId:e.userId,name:e.name,currency:e.currency,equity:e.equity,usableMargin:e.usableMargin,revokeTimeSec:1e3*e.revokeTimeSec,state:e.state}),n.commit()}catch(i){t="Account data not found!"}this.getController("LoggerManager").onMessage({message:t,userEquity:e.equity||"",type:"activity"}),this.saveSettings()},sendActivityMessage:function(){"europe"==BP.whiteLabel&&Ext.Array.contains(["PRE","LIVE"],BP.config("instance"))&&BP.getTransport().onActivityMessage("high")},onSettlementInfo:function(e){var t=BP.model.SettlementInfo,n=Ext.clone(BP.util.Clock.getTimestamp()),i=+new Date(n.setUTCHours(new Date(e.nextSettlementTime).getUTCHours(),0,0,0));e.nextSettlementTime=e.nextSettlementTime>BP.util.Clock.getTimestamp()?e.nextSettlementTime:i,e.state=!0,t.set(e),t.commit()},onAccountBonusInfo:function(e){var t=BP.model.AccountBonusInfo;t.set(e),t.commit()},onBioAccountSettings:function(e){var t=this,n=e.baseSettings,i=e.settingsByInstrument,r=e.orderType,o=[],a=[],s=[],l=[];if(n){if(n.amount&&o.push({id:r+"_default",instrument:"default",orderType:r,minTradeAmount:n.amount.min,maxTradeAmount:n.amount.max,incrementAmount:n.amount.increment}),n.duration&&-1!==["REG","TOUCH"].indexOf(r)&&a.push({id:r+"_default",instrument:"default",orderType:r,minContractDuration:n.duration.min||n.duration.min,maxContractDuration:n.duration.max||n.duration.max}),n.payoutRefundTable)for(var d in n.payoutRefundTable)n.payoutRefundTable.hasOwnProperty(d)&&s.push({id:r+"-default-"+d+"-"+n.payoutRefundTable[d],instrument:"default",orderType:r,payout:d,refund:n.payoutRefundTable[d],payout_refund:d+"-"+n.payoutRefundTable[d]});n.strikeDistance&&-1!==["TOUCH"].indexOf(r)&&l.push({id:r+"_default",instrument:"default",orderType:r,minStrikeDistance:n.strikeDistance.min||n.strikeDistance.min,maxStrikeDistance:n.strikeDistance.max||n.strikeDistance.max})}if(i)for(var u in i)if(i.hasOwnProperty(u)){if(i[u].amount&&o.push({id:r+"_"+u,instrument:u,orderType:r,minTradeAmount:i[u].amount.min||n.amount.min,maxTradeAmount:i[u].amount.max||n.amount.max,incrementAmount:i[u].amount.increment||n.amount.increment}),i[u].duration&&-1!==["REG","TOUCH"].indexOf(r)&&a.push({id:r+"_"+u,instrument:u,orderType:r,minContractDuration:i[u].duration.min||n.duration.min,maxContractDuration:i[u].duration.max||n.duration.max}),i[u].payoutRefundTable)for(var c in i[u].payoutRefundTable)i[u].payoutRefundTable.hasOwnProperty(c)&&s.push({id:r+"-"+u+"-"+c+"-"+i[u].payoutRefundTable[c],instrument:u,orderType:r,payout:c,refund:i[u].payoutRefundTable[c],payout_refund:c+"-"+i[u].payoutRefundTable[c]});i[u].strikeDistance&&-1!==["TOUCH"].indexOf(r)&&l.push({id:r+"_"+u,instrument:u,orderType:r,minStrikeDistance:i[u].strikeDistance.min||n.strikeDistance.min,maxStrikeDistance:i[u].strikeDistance.max||n.strikeDistance.max})}o.length&&t.onBioAmount(o,r),a.length&&t.onBioDuration(a,r),s.length&&t.onPayoutRate(s,r),l.length&&t.onBioStrike(l,r)},onBioAmount:function(e,t){var n,i,r=this;n=r.getAmountsStore(),i="bioamount",n.suspendEvents(),n.removeByType(t),n.add(e),n.resumeEvents(),n.fireEvent(Ext.String.format("{0}{1}",t.toLowerCase(),i),e)},onBioDuration:function(e,t){var n,i,r=this;n=r.getDurationsStore(),i="bioduration",n.suspendEvents(),n.removeByType(t),n.add(e),n.resumeEvents(),n.fireEvent(Ext.String.format("{0}{1}",t.toLowerCase(),i),e)},onPayoutRate:function(e,t){var n,i,r=this;n=r.getPayoutsStore(),i="payoutrate",n.suspendEvents(),n.removeByType(t),n.add(e),n.resumeEvents(),n.fireEvent(Ext.String.format("{0}{1}",t.toLowerCase(),i),e)},onBioStrike:function(e,t){var n,i,r=this;n=r.getStrikesStore(),i="biostrike",n.suspendEvents(),n.removeByType(t),n.add(e),n.resumeEvents(),n.fireEvent(Ext.String.format("{0}{1}",t.toLowerCase(),i),e)},sendBioInfoSubscribeMessage:function(){BP.getTransport().send("BioInfoSubscribeMessage",{subscribeOnMarkets:!0,subscribeOnStocks:!0},"high"),this.saveSettings()},saveSettings:function(){var e,t,n,i;e=BP.getTransport(),i=BP.ux.data.Authorization.getUserName.call(e),t=BP.ux.data.Authorization.getSessionID.call(e),n=BP.ux.data.Authorization.getTicket.call(e),BP.localSettings.set("login",i),BP.localSettings.set("session_id",t),BP.localSettings.set("ticket",n),BP.util.Encode.setSettings({login:i},"uscr")},setFavoriteMarkets:function(e){var t=BP.localSettings.get("defaultMarkets");return t&&t.length?Ext.Array.contains(t,e):!1},onOrder:function(e){e.userId&&BP.app.getController("OrdersManager").prepareOrders(e)},toObject:function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}},0,0,0,0,0,0,[BP.controller,"Server"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.Viewport",Ext.container.Viewport,{cls:"dds-app",minWidth:800,minHeight:600,border:!1,layout:"border",items:[{region:"north",html:'<h1 class="x-panel-header">Page Title</h1>',border:!1,margin:"0 0 5 0"},{region:"west",collapsible:!0,title:"Navigation",width:150},{region:"south",title:"South Panel",collapsible:!0,html:"Information goes here",split:!0,height:100,minHeight:100},{region:"east",title:"East Panel",collapsible:!0,split:!0,width:150},{region:"center",xtype:"tabpanel",activeTab:0,items:{title:"Default Tab",html:"The first tab's content. Others may be added dynamically"}}]},0,["bp-app"],["component","box","container","viewport","bp-app"],{component:!0,box:!0,container:!0,viewport:!0,"bp-app":!0},["widget.bp-app"],0,[BP.view,"Viewport"],0),Ext.cmd.derive("BP.view.window.orders.OrderDetailsController",Ext.app.ViewController,{listen:{component:{"bp-window-order-details":{browserwindowresize:"onBrowserWindowResize",show:"onShow"}}},onBrowserWindowResize:function(e){e.center()},onShow:function(e){e.anim&&(e.anim.listeners=e.anim.listeners||{},Ext.apply(e.anim.listeners,{beforeanimate:function(){e.center()}}),e.getEl().setVisible(!0,e.anim))},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()}},0,0,0,0,["controller.bp-window-order-details"],0,[BP.view.window.orders,"OrderDetailsController"],0),Ext.cmd.derive("BP.view.window.orders.OrderDetailsModel",Ext.app.ViewModel,{data:{selectedNode:!1,translate:{titleLabel:"order-details.title-label",orderIdLabel:"order-details.order-id-label",typeLabel:"order-details.type-label",instrumentLabel:"order-details.instrument-label",amountLabel:"order-details.amount-label",payoutLabel:"order-details.payout-label",statusLabel:"order-details.status-label",createdLabel:"order-details.created-label",startTimeLabel:"order-details.start-time-label",expireLabel:"order-details.expire-label",strikePriceLabel:"order-details.strike-price-label",triggerPriceLabel:"order-details.trigger-price-label"}},formulas:{orderTitle:{bind:{titleLabel:"{translate.titleLabel}",orderId:"{order.orderId}",orderInstrument:"{order.instrument}"},get:function(e){return Ext.create("Ext.XTemplate","{titleLabel}: {orderId} ({orderInstrument})").apply(e)}},aboutOneInstrumentInfo:{bind:{orderId:"{order.orderId}",optionType:"{order.optionType}",orderType:"{order.orderType}",orderInstrument:"{order.instrument}",orderCreationTime:"{order.creationTime}",orderStartTime:"{order.startTime}",orderTrigTime:"{order.trigTime}",orderAmount:"{order.amount}",orderCcy:"{order.ccy}",orderState:"{order.orderState}",orderProfitLoss:"{order.profitLoss}",orderPayOutPerc:"{order.payOutPerc}",orderMinPayOutPerc:"{order.minPayOutPerc}",
orderPriceStrike:"{order.priceStrike}",orderPriceScale:"{order.priceScale}",orderPriceTrig:"{order.priceTrig}",touchPrice:"{order.touchPrice}",touchPriceSymmetric:"{order.touchPriceSymmetric}",orderIdLabel:"{translate.orderIdLabel}",typeLabel:"{translate.typeLabel}",instrumentLabel:"{translate.instrumentLabel}",amountLabel:"{translate.amountLabel}",payoutLabel:"{translate.payoutLabel}",statusLabel:"{translate.statusLabel}",createdLabel:"{translate.createdLabel}",startTimeLabel:"{translate.startTimeLabel}",expireLabel:"{translate.expireLabel}",strikePriceLabel:"{translate.strikePriceLabel}",triggerPriceLabel:"{translate.triggerPriceLabel}"},get:function(e){var t=['<div class="order-details-info">','<div class="data">','<table class="left">',"<tr>","<td>{orderIdLabel}</td>","<td>{orderId}</td>","</tr>","<tr>","<td>{typeLabel}</td>","<td>{orderType}</td>","</tr>","<tr>","<td>{instrumentLabel}</td>","<td>{orderInstrument}</td>","</tr>","<tr>","<td>{amountLabel}</td>","<td>{[this.money(values.orderAmount, values.orderCcy)]}</td>","</tr>","<tr>","<td>{payoutLabel}</td>","<td>{[this.payout(values.orderCcy, values.orderProfitLoss, values.orderPayOutPerc, values.orderMinPayOutPerc, values.orderState)]}</td>","</tr>","<tr>","<td>{statusLabel}</td>","<td>{orderState}</td>","</tr>","</table>",'<table class="right">',"<tr>","<td>{createdLabel}</td>","<td>{[this.gmtTime(values.orderCreationTime)]}</td>","</tr>","<tr>","<td>{startTimeLabel}</td>","<td>{[this.gmtTime(values.orderStartTime)]}</td>","</tr>","<tr>","<td>{expireLabel}</td>","<td>{[this.gmtTime(values.orderTrigTime)]}</td>","</tr>","<tr>","<td>{strikePriceLabel}</td>","<td>","<tpl if=\"orderType == 'TOUCH'\">","{[this.triggerTouch(values.touchPrice, values.touchPriceSymmetric, values.orderPriceScale, values.orderState, values.optionType)]}","<tpl elseif=\"orderType == 'REG'\">","{[this.strike(values.orderPriceStrike, values.orderPriceScale, values.orderState)]}","<tpl else>-</tpl>","</td>","</tr>","<tr>","<td>{triggerPriceLabel}</td>","<td>{[this.trigger(values.orderPriceTrig, values.orderPriceScale, values.orderState)]}</td>","</tr>","<tr>","<td>--</td>","<td></td>","</tr>","</table>","</div>","</div>",{payout:function(e,t,n,i,r){var o="";if("FILLED"==r)o=t>0?BP.util.Format.money(t,e):"";else{var a=n||i;o=BP.util.Format.percent(a)}return o},triggerTouch:function(e,t,n,i,r){return"PENDING"!=i&&"REJECTED"!=i&&"CANCELLED"!=i&&(e=BP.util.Format.price(e,n),t=BP.util.Format.price(t,n)),"CALL"==r?Ext.util.Format.format('<span class="order-call-win">{0}</span> / <span class="order-call-lose">{1}</span>',e,t):Ext.util.Format.format('<span class="order-call-lose">{0}</span> / <span class="order-call-win">{1}</span>',t,e)},strike:function(e,t,n){var i="";return"PENDING"!=n&&"REJECTED"!=n&&"CANCELLED"!=n&&(i=BP.util.Format.price(e,t)),i},trigger:function(e,t,n){var i="";return"FILLED"==n&&(i=BP.util.Format.price(e,t)),i},money:function(e,t){return BP.util.Format.money(e,t)},optionType:function(e){return BP.util.Format.optionType(e)},gmtTime:function(e){return BP.util.Format.gmtTime(e)}}];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-window-order-details"],0,[BP.view.window.orders,"OrderDetailsModel"],0),Ext.cmd.derive("BP.view.window.orders.OrderDetails",BP.view.window.Window,{cls:"bp-window-order-details",autoShow:!0,controller:"bp-window-order-details",viewModel:"bp-window-order-details",tools:[{renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],height:230,width:460,layout:"fit",bind:{title:"{orderTitle}",html:"{aboutOneInstrumentInfo}"},setOrder:function(e){var t=this,n=t.getViewModel();n&&e&&n.set("order",e)}},0,["bp-window-order-details"],["component","box","container","panel","window","bp-window","bp-window-order-details"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-window-order-details":!0},["widget.bp-window-order-details"],0,[BP.view.window.orders,"OrderDetails"],0),Ext.cmd.derive("BP.view.panel.trade.TradeController",Ext.app.ViewController,{settlementTime:0,active:!0,stores:["Market","Instruments","Orders","Payouts","Ticks"],models:["Account"],listen:{component:{"bp-trade-panel":{beforerender:"onTradePanelBeforeRender",afterrender:"onTradePanelAfterRender",boxready:"onTradePanelBoxReady"},"bp-instrument-ticker":{afterrender:"onAfterRenderInstrumentTicker"},"bp-payout-refund-selector":{beforerender:"onPayoutRefundBeforeRender"},'bp-conditions fieldcontainer checkbox[name="price-toggle"]':{change:"onPriceToggle"}}},init:function(){var e=this,t={simpleForm:e.lookupReference("simple_form"),simpleInstrumentSelector:e.lookupReference("simple_form").down("bp-instrumentfield"),simpleAmountField:e.lookupReference("simple_form").down('numberfield[name="amount"]'),simplePayoutRefundSelector:e.lookupReference("simple_form").down("bp-payout-refund-selector"),simpleDurationSelector:e.lookupReference("simple_form").down('component[name="duration"]'),instrumentTicker:e.getView().down("bp-instrument-ticker"),chainAdd:this.getView().down('bp-chain-panel checkbox[name="chain-add"]'),chainType:this.getView().down('bp-chain-panel combobox[name="chain-type"]'),chainLength:this.getView().down('bp-chain-panel numberboxfield[name="chain-length"]'),extendedForm:e.lookupReference("extended_form"),typeRadioGroup:e.lookupReference("extended_form").down('radiogroup[name="types"]'),extendedInstrumentSelector:e.lookupReference("extended_form").down("bp-instrumentfield"),extendedAmountField:e.lookupReference("extended_form").down('numberfield[name="amount"]'),extendedDurationSelector:e.lookupReference("extended_form").down("bp-datetime"),extendedConditionsSelector:e.lookupReference("extended_form").down("bp-conditions"),extendedPayoutRefundSelector:e.lookupReference("extended_form").down("bp-conditions").down("bp-payout-refund-selector"),timeSelector:e.lookupReference("extended_form").down("bp-datetimefield"),priceToggle:e.lookupReference("extended_form").down('checkbox[name="price-toggle"]'),directionCombobox:e.lookupReference("extended_form").down('combobox[name="direction"]'),priceField:e.lookupReference("extended_form").down('numberfield[name="price"]'),payoutToggle:e.lookupReference("extended_form").down('checkbox[name="payout-toggle"]'),payoutRadioGroup:e.lookupReference("extended_form").down('combobox[name="payout"]'),orderButton:e.lookupReference("extended_form").down('button[action="order"]'),switcherPanel:e.lookupReference("switcher_panel"),marketChartUI:e.getView('bp-market-chart-ui[name="reg-chart"]')};e.transport=BP.getTransport(),BP.model.Account.on("datachange",e.setDefaultAccount,e),BP.app.getClock().on("tick",e.adjustStartTime,e),Ext.apply(e,t),Ext.app.ViewController.prototype.init.apply(this,arguments)},onTradePanelBeforeRender:function(e){var t,n,i,r,o,a;t=e.getViewModel(),i=BP.localSettings.get("defaultAmount"),r=BP.localSettings.get("min_trade_amount"),o=BP.localSettings.get("max_trade_amount"),a=BP.localSettings.get("min_trade_amount"),n=BP.localSettings.get("defaultInstrument"),t&&(t.set("currency",BP.localSettings.get("balance_currency")),t.set("instrument",n),t.set("defaultAmount",i),t.set("minTradeAmount",r),t.set("maxTradeAmount",o),t.set("incrementAmount",a))},onTradePanelAfterRender:function(e){var t,n,i,r,o,a,s,l;if(t=e.getViewModel(),i=Ext.getStore("Instruments"),r=t.getStore("instruments"),n=BP.localSettings.get("defaultInstrument"),o=Ext.Array.clone(BP.localSettings.get("defaultInstruments")||[]),s=0,o.indexOf(n)>-1&&o.push(n),o=Ext.Array.unique(o),a=o.length,t&&t.set("instrument",n),Ext.suspendLayouts(),r.suspendEvents(),a>1){for(s;a>s;s++)l=i.data.map[o[s]].clone(),r.insert(s,l),l=null;return r.resumeEvents(),void Ext.resumeLayouts(!1)}i.each(function(e){var t=e.copy();r.add(t)}),r.resumeEvents(),Ext.resumeLayouts(!1)},onTradePanelBoxReady:function(e){var t=this;t.setDefaultPayout(),t.setDefaultAmount(),t.setDefaultDuration(),t.disableTradingForEU(e)},onAfterRenderInstrumentTicker:function(){var e=this;BP.app.getController("MarketTickManager").on({scope:e,destroyable:!0,tick:this.onMarketTick}),BP.app.getController("InstrumentManager").on({scope:e,destroyable:!0,instrumentstatusupdate:this.onUpdateInstrumentStatus})},disableTradingForEU:function(e){var t=new Date,n=new Date(2018,5,14),i=new Date(2018,5,19),r=new Date(2018,5,30);"europe"==BP.whiteLabel&&"PRE"==BP.config("instance")&&t>n?e.setTradeDisabled(!0):"europe"==BP.whiteLabel&&"DEMO"==BP.config("instance")&&t>i?e.setTradeDisabled(!0):"europe"==BP.whiteLabel&&"LIVE"==BP.config("instance")&&t>r&&e.setTradeDisabled(!0)},setDefaultAccount:function(e){var t=this,n=t.getView(),i=n.getViewModel();i.set("currency",e.get("currency"))},onPayoutRefundBeforeRender:function(){},changeInstrument:function(){},setDefaultPayout:function(){var e,t,n,i,r,o,a,s,l=this;e=l.getView(),t=e.getViewModel(),n=Ext.getStore("Payouts"),o=e.getInstrument(),a=o?o.getId():"default",i=t.getStore("payoutRefund"),s=n.getByType("REG"),s&&(Ext.suspendLayouts(),i.suspendEvents(),i.removeAll(),i.insert(0,s),i.resumeEvents(),Ext.resumeLayouts(!1)),l.filterPayoutStoreByType(i,a),r=i.data,i.data&&t.set("payoutRefundValue",r.getAt(0)),n.hasListener("regpayoutrate")||n.on("regpayoutrate",l.setDefaultPayout,l)},filterPayoutStoreByType:function(e,t){var n;e.isFiltered()&&e.clearFilter(!0),n=e.collect("instrument"),e.filter("instrument",-1!==n.indexOf(t)?t:"default")},setDefaultAmount:function(){var e,t=this,n=t.getView(),i=n.getViewModel(),r=Ext.getStore("Amounts"),o=n.getInstrument(),a=o?o.getId():"default",s=r.data.map["REG_"+a]||r.data.map.REG_default;i&&s&&(e=Ext.Number.snap(s.get("minTradeAmount"),s.get("incrementAmount")||i.get("incrementAmount"),s.get("minTradeAmount"),s.get("maxTradeAmount")),i.set("incrementAmount",s.get("incrementAmount")||i.get("incrementAmount")),i.set("minTradeAmount",s.get("minTradeAmount")||i.get("minTradeAmount")),i.set("maxTradeAmount",s.get("maxTradeAmount")||i.get("maxTradeAmount")),i.set("defaultAmount",e)),r.hasListener("regbioamount")||r.on("regbioamount",t.setDefaultAmount,t)},setDefaultDuration:function(){var e=this,t=e.getView(),n=Ext.getStore("Durations"),i=t.getInstrument(),r=i?i.getId():!1;r&&t.down("bp-time").getController().onBioDurationChange(i),r&&t.down("bp-datetime").getController().onBioDurationChange(i),n.hasListener("regbioduration")||n.on("regbioduration",e.setDefaultDuration,e)},getDefaultAmount:function(){var e,t=this,n=t.simpleInstrumentSelector.getValue();n&&(e=this.validationLocalStorageSettings(BP.localSettings.get("defaultAmounts"))||{},e[n]=value,t.saveSettings("defaultAmounts",e))},onMarketTick:function(e){var t=this,n=t.getView(),i=n.down("bp-instrument-ticker"),r=n.getInstrument(),o=r?r.getId():!1;o===e.get("instrument")&&(n.onMarketTick(e),i.updateMarketTick(e))},onUpdateInstrumentStatus:function(e,t){var n=this,i=n.getView(),r=i.down("bp-instrument-ticker"),o=i.getInstrument(),a=o?o.getId():!1;a===e&&r.setNotTradable(t)},onSettlemenTime:function(e){this.settlementTime=e.nextSettlementTime},onSimpleInstrumentSelect:function(e,t){t&&this.extendedInstrumentSelector.setValue(t);var n=e.getStore().getById(t);n&&this.getView().setInstrument(n),this.setDefaultPayout(),this.setDefaultAmount(),this.setDefaultDuration(),this.onModalWindowChartUpdate(t)},onModalWindowChartUpdate:function(e){var t=BP.app.getController("Window");if(t.modals){var n=t.modals[1],i=n.Ext,r=Ext.ComponentQuery.query("bp-market-chart-ui")[0],o=(r.chart.serialize(),i.ComponentQuery.query("bp-window-chart-ui")[0]);o&&(o.chart.setInstrument(e),o.chart.reload(),n.document.title=e)}},onSimpleAmountChange:function(e,t){var n=t;null!==n&&(n?n>e.maxValue&&e.setValue(e.maxValue):e.setValue(e.minValue))},onSimpleDurationSelect:function(){},onSimplePayoutRefundSelect:function(e,t){var n=e.findRecordByValue(t);n&&(BP.localSettings.set("payoutReg",n.get("payout")),BP.localSettings.set("refundReg",n.get("refund")))},onTypeRadioGroupChange:function(e,t){var n=t.type,i=this.priceToggle,r=this.directionCombobox,o="CALL"==n?"ASK":"BID",a="CALL"==n?BP.translate("trade-panel.ask"):BP.translate("trade-panel.bid"),s="bp-order-"+o,l="bp-order-"+("CALL"==o?"ASK":"BID");r.getStore().data.each(function(e){e.set("text",a+" "+e.data.text.split(" ")[1])}),r.reset(),i.setDisabled(!n),!n&&i.setValue(n),this.orderButton.setDisabled(!n),this.orderButton.removeCls(l),this.orderButton.addCls(s),this.calculatePrice()},onCalendarSelectorChange:function(e,t){this.timeSelector.getHourSlider().setMaxValue(5==t.getDay()?this.settlementTime-1:23)},onTimeSelectorChange:function(e,t){var n=this,i=n.timeSelector,r=0,o="hours"===e.name?t:i.getHourSlider().getValue(),a=n.getApplication().getClock().getTimestamp();o===n.settlementTime-1&&(r="hours"===e.name?i.getMinuteSlider().getValue():t),this.extendedDurationSelector.setMaxValue(60-r),a.getUTCHours()!=n.settlementTime-1&&(r=0),this.simpleDurationSelector.setMaxValue(60-r)},onExtendedInstrumentSelect:function(e,t){var n=this,i=Ext.getStore("Instruments").getById(t),r=n.priceField;i&&(n.simpleInstrumentSelector.setValue(t),r.decimalPrecision=i.get("priceScale"),r.step=i.get("pipValue"),r.reset(),n.calculatePrice())},onExtendedAmountChange:function(e,t){var n=t;null!==n&&(n?n>e.maxValue&&e.setValue(e.maxValue):e.setValue(e.minValue))},onExtendedDurationSelect:function(e,t){this.simpleDurationSelector.setValue(t)},orderConfirmation:function(){var e=this,t=e.extendedPayoutRefundSelector.getSelectedRecord(),n={optionType:e.typeRadioGroup.getValue().type,instrument:e.extendedInstrumentSelector.getValue(),amount:e.extendedAmountField.getValue(),payOutPerc:t.get("payout"),refundPercent:t.get("refund"),side:"BUY",maturity:e.extendedDurationSelector.getDurationValue()};BP.localSettings.get("noConfirmTrade")?e.onOrder(n):BP.MessageBox.confirmorder(BP.translate("trade-panel.order_confirm_title"),e.createOrderMsg(n),function(t){"yes"===t&&e.onOrder(n)})},showOrder:function(e){var t=this;t.getView().isVisible()&&t.marketChartUI.showOrder(e)},showAllOrders:function(e){var t=this,n=t.getView();n.isVisible()&&t.marketChartUI.showOrder(e)},onPriceToggle:function(e,t){var n=this;n.directionCombobox.setDisabled(!t),n.priceField.setDisabled(!t),n.calculatePrice(),n.extendedForm.isValid()},onPayoutToggle:function(e,t){this.payoutRadioGroup.setDisabled(!t),this.extendedForm.isValid()},calculatePrice:function(){var e=this,t=e.lookupReference("extended_form"),n=t.down('checkbox[name="price-toggle"]').getValue(),i=t.down('numberfield[name="price"]'),r=t.down('radiogroup[name="types"]').getValue().type;if(n&&r){var o=t.down("bp-instrumentfield").getValue(),a=Ext.getStore("Instruments").getById(o);i.setValue("CALL"==r?a.get("askPrice"):a.get("bidPrice"))}else i.reset()},adjustStartTime:function(e){var t=this;t.simpleDurationSelector.fireEvent("clocktick",e),t.extendedDurationSelector.fireEvent("clocktick",e)},getTradeWeekDay:function(e){var t=this,n=parseInt(e.getUTCDay()),i=parseInt(e.getUTCHours());return 0===n&&(n=7),5===n&&i>=t.settlementTime||6===n||7===n&&i<t.settlementTime?!1:n},getTradeTimeOffset:function(e){return 7==e?432e6:0>=5-e?0:24*(5-e)*36e5},onOrderCancel:function(e,t,n,i,r,o){r.stopEvent(),o.canBeCancelled()&&this.transport.cancel({orderId:o.getId()})},showOrderDetails:function(e){var t=Ext.widget("bp-window-order-details");t.setOrder(e)},onCreate:function(e){var t=this,e=e.toUpperCase(),n=t.createOrderDetails(e);BP.localSettings.get("noConfirmTrade")?t.postOrder(n):BP.MessageBox.confirmorder(BP.translate("trade-panel.order_confirm_title"),t.createOrderMsg(n),function(e){"yes"===e&&t.postOrder(n)})},createOrderDetails:function(e){var t=this,n=t.getView().getInstrument(),i=t.lookupReference("simple_form"),r=i.down("bp-payout-refund-selector").getSelectedRecord(),o=i.down('numberfield[name="amount"]'),a=t.simpleDurationSelector.getValue(),s=t.chainAdd.getValue(),l={optionType:e,instrument:n.getId(),amount:o.getValue(),side:"BUY",payOutPerc:r.get("payout"),refundPercent:r.get("refund"),maturity:a};return s&&(l.chainLength=t.chainLength.getValue(),l.chainType=t.chainType.getValue()),l},createOrderMsg:function(e){var t=Ext.merge({optionTypeLabel:BP.translate("trade-panel."+e.optionType.toLowerCase()),currency:BP.localSettings.get("balance_currency"),instrumentLabel:BP.translate("order-details.instrument-label"),durationLabel:BP.translate("trade-panel.duration"),time:BP.translate("trade-panel.min"),payoutRefundLabel:BP.translate("trade-panel.payout_refund"),confirmMessage:BP.translate("trade-panel.order_confirm_message"),addedChain:BP.translate("trade-panel.order_added-chain"),contractsChain:BP.translate("trade-panel.order_contracts-chain"),revokeTimeSec:BP.model.Account.get("revokeTimeSec"),duration:e.maturity},e),n=["{optionTypeLabel} {amount} {currency}{a}<br />","{instrumentLabel} {instrument} <br />","{durationLabel} {[this.duration(values.duration)]}<br />","{payoutRefundLabel} {payOutPerc}% - {refundPercent}%","{[this.hasChainMessage(values)]}","{[this.hasIndividualMessage(values)]}","{[this.hasChainWarningMessage(values)]}",'<p class="confirm-message">{confirmMessage}</p>',"</div>",{hasIndividualMessage:function(e){if("fxfinpro"==BP.whiteLabel){var t="CALL"==e.optionType?BP.translate("order-details.individual-message-ask"):BP.translate("order-details.individual-message-bid");return Ext.String.format('<p class="individual-message">'+t+"</p>",BP.util.Format.money(e.amount/100*e.payOutPerc,e.currency),BP.util.Format.secondsToTime(60*e.duration),BP.util.Format.money(e.amount-e.amount/100*e.refundPercent,e.currency))}},hasChainMessage:function(e){return e.chainLength?Ext.String.format("<br />{0} {1}<br />{2} {3}",e.addedChain,BP.util.Format.firstToUpperCase(e.chainType),e.contractsChain,e.chainLength):void 0},hasChainWarningMessage:function(e){if("MARTINGALE"==e.chainType){var t=e.amount*((1-Math.pow(2,e.chainLength+1))/-1);return Ext.String.format('<h4 class="chain-warning">'+BP.translate("chain-panel.order-warning-label")+"</h4>"+BP.translate("chain-panel.order-warning-message"),t,e.currency)}},duration:function(e){return BP.util.Format.secondsToTime(60*e)}}];return Ext.create("Ext.XTemplate",n).apply(t)},onOrder:function(e){var t=this,n=t.typeRadioGroup;if(t.extendedForm.isValid()){if(e.optionType){var i=t.extendedDurationSelector;e.timeToLive=t.createTimeForOpenOrder(i)}t.priceToggle.getValue()&&(e.condDirection=t.directionCombobox.getValue()+"_"+("CALL"==e.optionType?"ASK":"BID"),e.condPrice=t.priceField.getValue()),t.isValidOrder(e)&&(t.transport.order(e),n.reset())}},createTimeForOpenOrder:function(e){var t=e.getHourSlider().getValue(),n=e.getMinuteSlider().getValue(),i=e.getCalendar().getValue();return BP.localSettings.get("localTime")?+new Date(i.getFullYear(),i.getMonth(),i.getDate(),t,n,0,0):Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),t,n,0,0)},postOrder:function(e){this.simpleForm.isValid()&&(this.isValidOrder(e)&&this.transport.order(e),BP.getApplication().getController("LoggerManager").onMessage({message:"order "+Ext.encode(e),type:"trade"}))},onConfirm:function(){},isValidOrder:function(e){return new Date((e.timeToLive?e.timeToLive:BP.app.getClock().getTimestamp().getTime())+6e4*e.maturity),this.simplePayoutRefundSelector.getSelectedRecord()?!0:(BP.util.PopupMessage.show(BP.translate("trade-panel.order_cannot_be_accepted"),BP.translate("trade-panel.payout_0_trading_not_available")),!1)},checkOrders:function(){var e=Ext.getStore("PendingOrders"),t=Ext.getStore("Orders"),n=[];e.each(function(e){n.push(e.internalId)}),t.each(function(e){n.push(e.internalId)}),n.length&&BP.getTransport().send("BiOrderStatusRequest",{orderIds:n})},onSwitcherChange:function(e){var t=this.view.getLayout();e?t.getNext()&&t.next():t.getPrev()&&t.prev()},onTimeChange:function(e){var t,n=this,i=n.simpleInstrumentSelector.getValue();i&&(t=this.validationLocalStorageSettings(BP.localSettings.get("defaultDurations"))||{},t[i]=e,n.saveSettings("defaultDurations",t))},validationLocalStorageSettings:function(e){var t=BP.util.Validation,n=Ext.decode(e,!0);return null===n?!1:t.isArray(n)||t.isString(n)||t.isNumber(n)||t.isBoolean(n)||Ext.Object.isEmpty(n)?!1:n},saveSettings:function(e,t){var n=Ext.encode(t);BP.localSettings.set(e,n)},isUsed:function(e){var t=this,n=t.getView(),i=n.getInstrument(),r=i?i.getId():!1;return r?r==e:!1},setOrdersToChart:function(){var e=Ext.getStore("ExecutingOrders"),t=Ext.ComponentQuery.query("executing-order-grid")[0];t&&t.getController().onOrdersAdd(e,e.data.items)},removeOrdersToChart:function(){var e=Ext.getStore("ExecutingOrders"),t=Ext.ComponentQuery.query("executing-order-grid")[0];t&&t.getController().onOrdersRemove(e,e.data.items)},activateEvent:function(){var e=this,t=e.getView(),n=t.down("bp-market-chart-ui");e.active=!0,setTimeout(function(){n.getController().onLoadTicks(),BP.app.getClock().on("tick",e.adjustStartTime,e),e.setOrdersToChart()},500),n.chartUI&&n.chartUI.resize()},suspendEvent:function(){var e=this;e.active=!1}},0,0,0,0,["controller.trade"],0,[BP.view.panel.trade,"TradeController"],0),Ext.cmd.derive("BP.view.panel.trade.TradeModel",Ext.app.ViewModel,{data:{instrument:"EUR/USD",currency:"",defaultAmount:0,minTradeAmount:0,maxTradeAmount:1,incrementAmount:1,payoutRefundValue:"90_0",translate:{tradeTabTitle:"trade-panel.tab-name",openNowTitle:"viewport.open-now",placePendingTitle:"viewport.place-pending",tradePanelInstrumentSelector:"trade-panel.instrument-selector",amountFieldLabel:"trade-panel.amount-field",durationFieldLabel:"trade-panel.duration",minFieldLabel:"trade-panel.min",shortHourSymbol:"trade-panel.short-hour",shortMinutesSymbol:"trade-panel.short-minutes",payoutRefundFieldLabel:"trade-panel.payout-refund",sendOrderButton:"trade-panel.send-order",boxLabelUpCall:"trade-panel.up-call",boxLabelDownPut:"trade-panel.down-put",tradingTermsFieldLabel:"trade-panel.trading-terms",tradingRangeTips:"trade-panel.field-range-tips"}},formulas:{tradeAmountValue:function(e){return e(e("defaultAmount")<e("minTradeAmount")?"minTradeAmount":"defaultAmount")},tplAmountFieldLabel:{bind:{currency:"{currency}",amountFieldLabel:"{translate.amountFieldLabel}"},get:function(e){var t=["{amountFieldLabel} ({currency})</span>"];return Ext.create("Ext.XTemplate",t).apply(e)}},tplLinkFieldLabel:{bind:{tradingTermsFieldLabel:"{translate.tradingTermsFieldLabel}"},get:function(e){var t=['<a class="bp-link-field-label" href="https://fxfinpro.com/en/binary-options" target="_blank">{tradingTermsFieldLabel}</a>'];return"fxfinpro"==BP.whitelabel?Ext.create("Ext.XTemplate",t).apply(e):""}},tplAmountTooltip:{bind:{defaultAmount:"{defaultAmount}",minTradeAmount:"{minTradeAmount}",maxTradeAmount:"{maxTradeAmount}",tradingRangeTips:"{translate.tradingRangeTips}"},get:function(e){return Ext.String.format(e.tradingRangeTips,e.minTradeAmount,e.maxTradeAmount)}}},stores:{instruments:{model:"Instrument",groupField:"type",sorters:[{property:"position",direction:"ASC"}]},payoutRefund:{model:"Payout",sorters:[{property:"payout",direction:"DESC"}]},bioAmount:{model:"Amount"}}},0,0,0,0,["viewmodel.trade"],0,[BP.view.panel.trade,"TradeModel"],0),Ext.cmd.derive("BP.view.selector.Instrument",Ext.form.ComboBox,{store:"Instruments",displayField:"instrument",valueField:"instrument",queryMode:"local",allowBlank:!1,autoSelect:!0,forceSelection:!0,matchFieldWidth:!1,constructor:function(){Ext.form.field.ComboBox.prototype.constructor.apply(this,arguments),this.queryFilter=new Ext.util.Filter({scope:this,id:Ext.id(),disabled:!0,root:"data",filterFn:function(e){return e.data.fulltext.toLowerCase()}}),this.store.filter(this.queryFilter)},listeners:{afterrender:function(e){e.getPicker().setWidth(300)}},listConfig:{cls:"grouped-list"},tpl:Ext.create("Ext.XTemplate",'{[this.currentKey = null]}<tpl for=".">','<tpl if="this.shouldShowHeader(type)"><div class="group-header">{[this.showHeader(values.type)]}</div></tpl><div class="x-boundlist-item"><strong>{instrument}</strong> <span>{description}</span></div>',"</tpl>",{shouldShowHeader:function(e){return this.currentKey!=e},showHeader:function(e){switch(this.currentKey=e,e){case"FX_CCY":return"Forex";case"CFD":return"CFD"}return"Other"}})},1,["bp-instrument-selector"],["component","box","field","textfield","pickerfield","combobox","combo","bp-instrument-selector"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0,combobox:!0,combo:!0,"bp-instrument-selector":!0},["widget.bp-instrument-selector"],0,[BP.view.selector,"Instrument"],0),Ext.cmd.derive("BP.view.form.field.Date",Ext.form.field.Picker,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:"x-form-date-trigger",showToday:!0,useStrict:void 0,initTime:"12",initTimeFormat:"H",matchFieldWidth:!1,startDay:0,valuePublishEvent:["select","blur"],initComponent:function(){var e,t,n=this,i=Ext.isString;e=n.minValue,t=n.maxValue,i(e)&&(n.minValue=n.parseDate(e)),i(t)&&(n.maxValue=n.parseDate(t)),n.disabledDatesRE=null,n.initDisabledDays(),Ext.form.field.Picker.prototype.initComponent.call(this)},initValue:function(){var e=this,t=e.value;Ext.isString(t)&&(e.value=e.rawToValue(t)),Ext.form.field.Picker.prototype.initValue.call(this)},initDisabledDays:function(){if(this.disabledDates){var e,t,n=this.disabledDates,i=n.length-1,r="(?:",o=n.length;for(e=0;o>e;e++)t=n[e],r+=Ext.isDate(t)?"^"+Ext.String.escapeRegex(t.dateFormat(this.format))+"$":t,e!==i&&(r+="|");this.disabledDatesRE=RegExp(r+")")}},setDisabledDates:function(e){var t=this,n=t.picker;t.disabledDates=e,t.initDisabledDays(),n&&n.setDisabledDates(t.disabledDatesRE)},setDisabledDays:function(e){var t=this.picker;this.disabledDays=e,t&&t.setDisabledDays(e)},setMinValue:function(e){var t=this,n=t.picker,i=Ext.isString(e)?t.parseDate(e):e;t.minValue=i,n&&(n.minText=Ext.String.format(t.minText,t.formatDate(t.minValue)),n.setMinDate(i))},setMaxValue:function(e){var t=this,n=t.picker,i=Ext.isString(e)?t.parseDate(e):e;t.maxValue=i,n&&(n.maxText=Ext.String.format(t.maxText,t.formatDate(t.maxValue)),n.setMaxDate(i))},getErrors:function(e){e=arguments.length>0?e:this.formatDate(this.processRawValue(this.getRawValue()));var t,n,i,r,o=this,a=Ext.String.format,s=Ext.Date.clearTime,l=Ext.form.field.Picker.prototype.getErrors.call(this,e),d=o.disabledDays,u=o.disabledDatesRE,c=o.minValue,h=o.maxValue,p=d?d.length:0,f=0;if(null===e||e.length<1)return l;if(t=e,e=o.parseDate(e),!e)return l.push(a(o.invalidText,t,Ext.Date.unescapeFormat(o.format))),l;if(r=e.getTime(),c&&r<s(c).getTime()&&l.push(a(o.minText,o.formatDate(c))),h&&r>s(h).getTime()&&l.push(a(o.maxText,o.formatDate(h))),d)for(i=e.getDay();p>f;f++)if(i===d[f]){l.push(o.disabledDaysText);break}return n=o.formatDate(e),u&&u.test(n)&&l.push(a(o.disabledDatesText,n)),l},rawToValue:function(e){return this.parseDate(e)||e||null},valueToRaw:function(e){return this.formatDate(this.parseDate(e))},safeParse:function(e,t){var n,i=this,r=Ext.Date,o=null,a=i.useStrict;return r.formatContainsHourInfo(t)?o=r.parse(e,t,a):(n=r.parse(e+" "+i.initTime,t+" "+i.initTimeFormat,a),n&&(o=r.clearTime(n))),o},getSubmitValue:function(){var e=this.submitFormat||this.format,t=this.getValue();return t?Ext.Date.format(t,e):""},parseDate:function(e){if(!e||Ext.isDate(e))return e;var t,n=this,i=n.safeParse(e,n.format),r=n.altFormats,o=n.altFormatsArray,a=0;if(!i&&r)for(o=o||r.split("|"),t=o.length;t>a&&!i;++a)i=n.safeParse(e,o[a]);return i},formatDate:function(e){return Ext.isDate(e)?Ext.Date.dateFormat(e,this.format):e},createPicker:function(){var e=this,t=Ext.String.format;return new Ext.picker.Date({pickerField:e,floating:!0,focusable:!1,hidden:!0,minDate:e.minValue,maxDate:e.maxValue,disabledDatesRE:e.disabledDatesRE,disabledDatesText:e.disabledDatesText,disabledDays:e.disabledDays,disabledDaysText:e.disabledDaysText,format:e.format,showToday:e.showToday,startDay:e.startDay,minText:t(e.minText,e.formatDate(e.minValue)),maxText:t(e.maxText,e.formatDate(e.maxValue)),listeners:{scope:e,select:e.onSelect},keyNavConfig:{esc:function(){e.collapse()}}})},onSelect:function(e,t){var n=this;n.setValue(t),n.fireEvent("select",n,t),n.collapse()},onExpand:function(){var e=this.getValue();this.picker.setValue(Ext.isDate(e)?e:new Date)},onBlur:function(e){var t=this,n=t.rawToValue(t.getRawValue());Ext.isDate(n)&&t.setValue(n),Ext.form.field.Picker.prototype.onBlur.call(this,e)}},0,["bp-datefield"],["component","box","field","textfield","pickerfield","bp-datefield"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0,"bp-datefield":!0},["widget.bp-datefield"],0,[BP.view.form.field,"Date"],0),Ext.cmd.derive("BP.view.form.datetime.DateTimeController",Ext.app.ViewController,{models:["SettlementInfo"],subscribe:{changetimezone:"onChangeTimeZone"},init:function(){var e=this;e.startAtSelector=e.lookupReference("start_at"),e.startAtHours=e.lookupReference("start_at").down('[name="hours"]'),e.startAtMinutes=e.lookupReference("start_at").down('[name="minutes"]'),e.durationHours=e.lookupReference("duration").down('[name="hours"]'),e.durationMinutes=e.lookupReference("duration").down('[name="minutes"]'),BP.model.SettlementInfo.on("datachange",e.setDefaultSettlementTime,e),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-datetime":{beforerender:"onBeforeRender",afterrender:"setDefaultSettlementTime"}}},onBeforeRender:function(e){e.setValue(new Date)},setDefaultSettlementTime:function(e){var t=this,n=t.getView(),i=BP.model.SettlementInfo,r=i.data;n.getCalendar().setMinValue(new Date),n.getCalendar().setMaxValue(new Date(r.thisWeekLastSettlementTime)),n.setMaxValue(new Date(r.thisWeekLastSettlementTime-1)),e.on("clocktick",t.onClockTick,t)},onClockTick:function(e){var t,n=this,i=n.getView(),r=i.getValue(),o=i.getViewModel(),a=Ext.clone(r),s=BP.model.SettlementInfo,l=s.data,t=l.nextSettlementTime?l.nextSettlementTime:BP.util.Clock.getNextSettlementTime(a),d=i.getDurationValue(),u=i.getDurationMinValue(),c=Ext.Date.add(e,Ext.Date.MINUTE,1),h=Ext.Date.add(l.thisWeekLastSettlementTime,Ext.Date.MINUTE,-2);if(i&&l.state){l.nextSettlementTime&&t.getDate()!==a.getDate()&&(t=BP.util.Clock.getNextSettlementTime(a)),c>r&&i.setValue(c);var p=Ext.Date.diff(r,t,Ext.Date.MINUTE);0>=p&&(t=Ext.Date.add(t,Ext.Date.DAY,1),p=Ext.Date.diff(r,t,Ext.Date.MINUTE));var f=p>o.get("maxContractDuration")?o.get("maxContractDuration"):p;f=f<o.get("minContractDuration")?o.get("minContractDuration"):f,r>=h&&i.setValue(h),f>u&&(f-=1),u>d&&i.setDurationValue(u),d>f&&i.setDurationValue(f),i.setDurationMaxValue(f)}},onChangeTimeZone:function(){this.getView().displayValue()},onBioDurationChange:function(e){var t,n=this,i=n.getView(),r=i.getViewModel(),o=Ext.getStore("Durations");if(r){if(t=o.getById("REG_"+e.getId())||o.getById("REG_default"),!t)return;i.setDurationMinValue(t.get("minContractDuration")),i.setDurationValue(t.get("minContractDuration")),i.setDurationMaxValue(t.get("maxContractDuration")),r.set("maxContractDuration",t.get("maxContractDuration")),r.set("minContractDuration",t.get("minContractDuration"))}},updateInstrument:function(e){var t=this,n=t.getView(),i=n.getViewModel(),r=i.getStore("bioDuration"),o=r.getById("REG_"+e.getId())||r.getById("REG_default");o&&(n.setDurationMinValue(o.get("minContractDuration")),n.setDurationValue(o.get("minContractDuration")),n.setDurationMaxValue(o.get("maxContractDuration")),i.set("maxContractDuration",o.get("maxContractDuration")),i.set("minContractDuration",o.get("minContractDuration")))}},0,0,0,0,["controller.bp-datetime"],0,[BP.view.form.datetime,"DateTimeController"],0),Ext.cmd.derive("BP.view.form.datetime.DateTimeModel",Ext.app.ViewModel,{data:{instrument:"EUR/USD",defaultContractDuration:1,minContractDuration:1,maxContractDuration:1e4,translate:{durationFieldLabel:"trade-panel.duration",startAtFieldLabel:"trade-panel.start-at",shortHourSymbol:"trade-panel.short-hour",
shortMinutesSymbol:"trade-panel.short-minutes",dateFieldLabel:"trade-panel.date",timeFieldLabel:"trade-panel.time",orderStartAt:"order-grid.start-at-header"}},stores:{bioDuration:{model:"Duration"}}},0,0,0,0,["viewmodel.bp-datetime"],0,[BP.view.form.datetime,"DateTimeModel"],0),Ext.cmd.derive("BP.view.picker.Day",Ext.Component,{rtl:!1,cls:"bp-daypicker",alternateClassName:"BP.DayPicker",isDatePicker:!0,focusable:!0,childEls:["innerEl","eventEl","middleBtnEl","footerEl"],border:!0,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl">','<div class="{baseCls}-header">','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">','<span id="splitbutton-1040-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="x-btn-inner x-btn-inner-default-small">{.:this.renderMonthTitle}</span></div>',"</div>",'<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" {%','if (values.$comp.focusable) {out.push("tabindex=\\"0\\"");}','%} cellspacing="0">','<thead><tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header day-name-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr></thead>",'<tbody><tr role="row">','<tpl for="days">','<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>',"</td>","</tpl>","</tr></tbody>","</table>",'<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</div>",{firstInitial:function(e){return e.substr(0,1)},renderMonthTitle:function(){var e=new Date;return Ext.Date.format(e,"F")},renderTodayBtn:function(e,t){Ext.DomHelper.generateMarkup(e.$comp.todayBtn.getRenderTree(),t)}}],todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:!0,disabledDays:[0,6],disableAnim:!1,baseCls:"x-datepicker",longDayFormat:"F d, Y",initHour:12,numDays:7,initComponent:function(){var e=this,t=Ext.Date.clearTime;e.selectedCls=e.baseCls+"-selected",e.disabledCellCls=e.baseCls+"-disabled",e.prevCls=e.baseCls+"-prevday",e.activeCls=e.baseCls+"-active",e.cellCls=e.baseCls+"-cell",e.nextCls=e.baseCls+"-prevday",e.todayCls=e.baseCls+"-today",e.tradeDays=e.getDaysOfWeek(new Date,0),e.format||(e.format=Ext.Date.defaultFormat),e.dayNames||(e.dayNames=Ext.Date.dayNames),e.dayNames=e.dayNames.slice(e.startDay).concat(e.dayNames.slice(0,e.startDay)),Ext.Component.prototype.initComponent.call(this),e.value=e.value?t(e.value,!0):t(new Date),e.initDisabledDays()},getRefOwner:function(){return this.pickerField||Ext.Component.prototype.getRefOwner.call(this)},getRefItems:function(){var e=[],t=this.todayBtn;return t&&e.push(t),e},beforeRender:function(){var e=this,t=Ext.Date.format(new Date,e.format);e.getDaysOfWeek(new Date,0),e.padding&&!e.width&&e.cacheWidth(),e.showToday&&(e.todayBtn=new Ext.button.Button({ownerCt:e,ui:"green",ownerLayout:e.getComponentLayout(),text:Ext.String.format(e.todayText,t),tooltip:Ext.String.format(e.todayTip,t),tooltipType:"title",handler:e.selectToday,scope:e})),Ext.Component.prototype.beforeRender.call(this),Ext.applyIf(e,{renderData:{}}),Ext.apply(e.renderData,{dayNames:e.dayNames,showToday:e.showToday,prevText:e.prevText,nextText:e.nextText,days:e.tradeDays}),e.protoEl.unselectable()},getDaysOfWeek:function(e,t){var n=[],i=e||new Date,r=i.getDate()-i.getDay();r=t?r+1:r,i.setDate(r);for(var o=0;7>o;o++)n.push(new Date(+i)),i.setDate(i.getDate()+1);return n},cacheWidth:function(){var e=this,t=e.parseBox(e.padding),n=Ext.getBody().createChild({cls:e.baseCls+" "+e.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});e.self.prototype.width=n.getWidth()+t.left+t.right,n.destroy()},onRender:function(){var e=this,t="div."+e.baseCls+"-date";Ext.Component.prototype.onRender.apply(this,arguments),e.headerCells=e.eventEl.select("thead th"),e.headerTextNodes=e.eventEl.query("thead th div"),e.cells=e.eventEl.select("tbody td"),e.textNodes=e.eventEl.query(t),e.mon(e.eventEl,{scope:e,mousewheel:e.handleMouseWheel,click:{fn:e.handleDateClick,delegate:t}})},initEvents:function(){var e=this,t=e.pickerField,n=Ext.Date;n.DAY,Ext.Component.prototype.initEvents.call(this),e.focusable||e.el.on({mousedown:e.onMouseDown}),e.keyNav=new Ext.util.KeyNav(t?t.inputEl:e.eventEl,Ext.apply({scope:e,capture:!0,left:function(t){e.showPrevDay(t)},right:function(t){e.showNextDay(t)}},e.keyNavConfig)),e.disabled&&e.syncDisabled(!0),e.update(e.value)},onMouseDown:function(e){e.preventDefault()},handleTabClick:function(){var e=this,t=e.getSelectedDate(e.activeDate),n=e.handler;e.disabled||!t.dateValue||Ext.fly(t.parentNode).hasCls(e.disabledCellCls)||(e.setValue(new Date(t.dateValue)),e.fireEvent("select",e,e.value),n&&n.call(e.scope||e,e,e.value),e.onSelect())},getSelectedDate:function(e){var t,n,i=this,r=e.getTime(),o=i.cells,a=i.selectedCls,s=o.elements,l=s.length;for(o.removeCls(a),n=0;l>n;n++)if(t=s[n].firstChild,t.dateValue===r)return t;return null},initDisabledDays:function(){var e,t,n,i,r=this,o=r.disabledDates,a="(?:";if(!r.disabledDatesRE&&o){for(e=o.length-1,n=o.length,t=0;n>t;t++)i=o[t],a+=Ext.isDate(i)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(i,r.format))+"$":i,t!==e&&(a+="|");r.disabledDatesRE=RegExp(a+")")}},setDisabledDates:function(e){var t=this;return Ext.isArray(e)?(t.disabledDates=e,t.disabledDatesRE=null):t.disabledDatesRE=e,t.initDisabledDays(),t.update(t.value,!0),t},setDisabledDays:function(e){return this.disabledDays=e,this.update(this.value,!0)},setMinDate:function(e){return this.minDate=e,this.update(this.value,!0)},setMaxDate:function(e){return this.maxDate=e,this.update(this.value,!0)},setValue:function(e){return this.value=Ext.Date.clearTime(e||new Date,!0),this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(e){return e.substr(0,1)},onEnable:function(){var e=this;Ext.Component.prototype.onEnable.call(this),e.syncDisabled(!1,!0),e.update(e.activeDate)},beforeShow:function(){var e=this;e.doTranslate(),Ext.Component.prototype.beforeShow.call(this)},onShow:function(){var e=this;Ext.Component.prototype.onShow.call(this),e.syncDisabled(!1),e.pickerField&&(e.startValue=e.pickerField.getValue())},onHide:function(){Ext.Component.prototype.onHide.call(this),this.syncDisabled(!0)},onDisable:function(){Ext.Component.prototype.onDisable.call(this),this.syncDisabled(!0,!0)},getActive:function(){return this.activeDate||this.value},runAnimation:function(e){var t=this.monthPicker,n={duration:200,preventHide:e,callback:function(){t.setVisible(!e)}};e?t.el.slideOut("t",n):t.el.slideIn("t",n)},hideMonthPicker:function(e){var t=this,n=t.monthPicker;return n&&n.isVisible()&&(t.shouldAnimate(e)?t.runAnimation(!0):n.hide()),t},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(e){var t,n=this,i=n.el;return n.rendered&&!n.disabled&&(t=n.createMonthPicker(),t.isVisible()||(t.setValue(n.getActive()),t.setSize(i.getSize()),t.floatParent=null,t.setPosition(-i.getBorderWidth("l"),-i.getBorderWidth("t")),n.shouldAnimate(e)?n.runAnimation(!1):t.show())),n},shouldAnimate:function(e){return Ext.isDefined(e)?e:!this.disableAnim},createMonthPicker:function(){var e=this,t=e.monthPicker;return t||(e.monthPicker=t=new Ext.picker.Month({renderTo:e.el,ownerCmp:e,floating:!0,padding:e.padding,shadow:!1,small:e.showToday===!1,listeners:{scope:e,cancelclick:e.onCancelClick,okclick:e.onOkClick,yeardblclick:e.onOkClick,monthdblclick:e.onOkClick}}),e.disableAnim||t.el.setStyle("display","none"),t.hide(),e.on("beforehide",e.doHideMonthPicker,e)),t},onOkClick:function(e,t){var n=this,i=t[0],r=t[1],o=new Date(r,i,n.getActive().getDate());o.getMonth()!==i&&(o=Ext.Date.getLastDateOfMonth(new Date(r,i,1))),n.setValue(o),n.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate),this.hideMonthPicker()},showPrevDay:function(){var e=this,t=Ext.Date,n=t.DAY,i=t.add(e.activeDate,n,-1),r=t.clearTime(this.minDate,!0),o=r>i?this.maxDate:i;return this.setValue(o)},showNextDay:function(){var e=this,t=Ext.Date,n=t.DAY,i=t.add(e.activeDate,n,1),r=t.clearTime(this.maxDate,!0),o=i>r?this.minDate:i;return this.setValue(o)},showPrevMonth:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(e){if(e.stopEvent(),!this.disabled){var t=e.getWheelDelta();t>0?this.showPrevMonth():0>t&&this.showNextMonth()}},handleDateClick:function(e,t){var n=this,i=n.handler;e.stopEvent(),n.disabled||!t.dateValue||Ext.fly(t.parentNode).hasCls(n.disabledCellCls)||(n.setValue(new Date(t.dateValue)),n.fireEvent("select",n,n.value),i&&i.call(n.scope||n,n,n.value),n.onSelect())},onSelect:function(){this.hideOnSelect&&this.hide()},selectToday:function(){var e=this,t=e.todayBtn,n=e.handler;return t&&!t.disabled&&(e.setValue(Ext.Date.clearTime(new Date)),e.fireEvent("select",e,e.value),n&&n.call(e.scope||e,e,e.value),e.onSelect()),e},selectedUpdate:function(e){var t,n,i=this,r=e.getTime(),o=i.cells,a=i.selectedCls,s=o.getCount();for(n=i.activeCell,n&&(Ext.fly(n).removeCls(a),n.setAttribute("aria-selected",!1)),t=0;s>t;t++)if(n=o.item(t),i.textNodes[t].dateValue===r){i.activeCell=n.dom,i.eventEl.dom.setAttribute("aria-activedescendant",n.dom.id),n.dom.setAttribute("aria-selected",!0),n.addCls(a),i.fireEvent("highlightitem",i,n);break}},fullUpdate:function(e){var t,n,i,r,o,a,s=this,l=s.cells.elements,d=s.textNodes,u=s.disabledCellCls,c=s.tradeDays,h=s.getDaysOfWeek(new Date,0),p=Ext.Date,f=0,g=+p.clearTime(e,!0),m=+p.clearTime(new Date),x=s.minDate?p.clearTime(s.minDate,!0):Number.NEGATIVE_INFINITY,v=s.maxDate?p.clearTime(s.maxDate,!0):Number.POSITIVE_INFINITY,y=s.disabledDatesRE,E=s.disabledDatesText,b=s.disabledDays?s.disabledDays.join(""):!1,C=s.disabledDaysText,w=s.format,S=(p.getDaysInMonth(e),p.getFirstDateOfMonth(e)),T=(S.getDay()-s.startDay,p.add(e,p.MONTH,-1),s.ariaTitleDateFormat);for(n=function(e,n){var i=l[e],r=s.todayCellIndex||null;c=s.tradeDays||null,a=+p.clearTime(c[e],!0),i.setAttribute("aria-label",p.format(a,T)),i.firstChild.dateValue=a,a===m?(n+=" "+s.todayCls,i.firstChild.title=s.todayText,s.todayCellIndex=e):r===e&&(i.firstChild.removeAttribute("title"),delete s.todayCellIndex),a===g?(s.activeCell=i,s.eventEl.dom.setAttribute("aria-activedescendant",i.id),i.setAttribute("aria-selected",!0),n+=" "+s.selectedCls,s.fireEvent("highlightitem",s,i)):i.setAttribute("aria-selected",!1),x>a?(n+=" "+u,i.setAttribute("aria-label",s.minText)):a>v?(n+=" "+u,i.setAttribute("aria-label",s.maxText)):b&&-1!==b.indexOf(t.getDay())?(i.setAttribute("aria-label",C),n+=" "+u):y&&w&&(o=p.dateFormat(t,w),y.test(o)&&(i.setAttribute("aria-label",E.replace("%0",o)),n+=" "+u)),i.className=n+" "+s.cellCls};f<h.length;++f)i=h[f].getDate(),r=+h[f]<m?s.prevCls:s.activeCls,d[f].innerHTML=i,n(f,r)},update:function(e,t){var n=this,i=n.activeDate;return n.rendered&&(n.activeDate=e,!t&&i&&n.el&&i.getMonth()===e.getMonth()&&i.getFullYear()===e.getFullYear()?n.selectedUpdate(e,i):n.fullUpdate(e,i)),n},doTranslate:function(){for(var e=this,t=e.headerCells.elements,n=e.cells.elements,i=n.length,r=Ext.Date,o=0;i>o;++o)t[o].setAttribute("aria-label",r.format(new Date(n[o].firstChild.dateValue),"l")),e.setText(e.headerTextNodes[o],r.format(new Date(n[o].firstChild.dateValue),"D"));e.setText(e.el.dom.getElementsByClassName("x-datepicker-month")[0].firstElementChild,Ext.Date.format(this.value,"F"))},setText:function(e,t){void 0===e.innerText?e.textContent=t:e.innerText=t},beforeDestroy:function(){var e=this;e.rendered&&(Ext.destroy(e.keyNav,e.monthPicker,e.nextRepeater,e.prevRepeater,e.todayBtn,e.todayElSpan),delete e.textNodes,delete e.headerTextNodes,delete e.cells.elements,delete e.headerCells.elements),Ext.Component.prototype.beforeDestroy.call(this)},privates:{finishRenderChildren:function(){var e=this;Ext.Component.prototype.finishRenderChildren.call(this),e.showToday&&e.todayBtn.finishRender()},getFocusEl:function(){return this.eventEl},syncDisabled:function(e,t){var n=this,i=n.keyNav,r=n.todayBtn;i&&i.setDisabled(e),t&&r&&r.setDisabled(n.todayDisabled||e)}}},0,["bp-daypicker"],["component","box","bp-daypicker"],{component:!0,box:!0,"bp-daypicker":!0},["widget.bp-daypicker"],0,[BP.view.picker,"Day",BP,"DayPicker"],0),Ext.cmd.derive("BP.view.form.field.Day",Ext.form.field.Date,{value:new Date,createPicker:function(){var e=this,t=Ext.String.format;return e.minValue=new Date,e.maxValue=e.getNextDayOfWeek(e.minValue,5),new BP.view.picker.Day({pickerField:e,floating:!0,focusable:!1,hidden:!0,minDate:e.minValue,maxDate:e.maxValue,disabledDatesRE:e.disabledDatesRE,disabledDatesText:e.disabledDatesText,disabledDays:e.disabledDays,disabledDaysText:e.disabledDaysText,format:e.format,showToday:e.showToday,startDay:e.startDay,value:new Date,minText:t(e.minText,e.formatDate(e.minValue)),maxText:t(e.maxText,e.formatDate(e.maxValue)),listeners:{scope:e,select:e.onSelect},keyNavConfig:{esc:function(){e.collapse()}}})},getDaysOfWeek:function(e,t){var n=[],i=e||new Date,r=i.getDate()-i.getDay();r=t?r+1:r,i.setDate(r);for(var o=0;7>o;o++)n.push(new Date(+i)),i.setDate(i.getDate()+1);return n},getNextDayOfWeek:function(e,t){var n=new Date(e.getTime());return e.getDay()==t?e:(n.setDate(e.getDate()+(7+t-e.getDay()-1)%7+1),n)}},0,["bp-dayfield"],["component","box","field","textfield","pickerfield","datefield","bp-dayfield"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0,datefield:!0,"bp-dayfield":!0},["widget.bp-dayfield"],0,[BP.view.form.field,"Day"],0),Ext.cmd.derive("BP.view.form.datetime.DateTime",Ext.form.FieldSet,{cls:"bp-datetime",defaults:{anchor:"100%",labelWidth:80},layout:"anchor",bind:{title:"{translate.orderStartAt}",tooltip:"{tplAmountTooltip}"},minValue:new Date,maxValue:new Date,value:new Date,duration:0,durationMinValue:1,durationMaxValue:550,controller:"bp-datetime",viewModel:"bp-datetime",initComponent:function(){var e,t=this;e={items:[t.buildDateFieldForm(t),t.buildStartAtContainer(t),t.buildDurationContainer(t)]},Ext.apply(t,e),Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},buildDateFieldForm:function(){return{xtype:"bp-dayfield",name:"datetime",value:new Date,minValue:new Date,flex:1,bind:{fieldLabel:"{translate.dateFieldLabel}"},format:"d.m.Y",listeners:{}}},buildStartAtContainer:function(){return{xtype:"fieldcontainer",layout:"hbox",reference:"start_at",border:!1,bind:{fieldLabel:"{translate.timeFieldLabel}"},items:[{xtype:"bp-numberfield",name:"hours",vtype:"natural",step:1,bind:{triggerSymbol:"{translate.shortHourSymbol}"},value:0,maxValue:23,minValue:0,flex:1,allowNegative:!1,allowDecimals:!1,enforceMaxLength:!0,maxLength:2,allowBlank:!1,padding:"0"},{xtype:"bp-numberfield",name:"minutes",vtype:"natural",step:1,bind:{triggerSymbol:"{translate.shortMinutesSymbol}"},value:1,minValue:0,maxValue:59,flex:1,enforceMaxLength:!0,allowDecimals:!1,allowNegative:!1,maxLength:2,allowBlank:!1,margin:"0 0 0 4"}]}},buildDurationContainer:function(e){return{xtype:"fieldcontainer",layout:"hbox",reference:"duration",bind:{fieldLabel:"{translate.durationFieldLabel}"},items:[{xtype:"bp-numberfield",name:"hours",step:1,bind:{triggerSymbol:"{translate.shortHourSymbol}"},value:1,minValue:0,maxValue:23,enforceMaxLength:!0,allowDecimals:!1,allowNegative:!1,maxLength:2,allowBlank:!1,flex:1,padding:"0",listeners:{spinup:e.onSpinUpHours,spindown:e.onSpinDownHours,change:e.onMinutesChange}},{xtype:"bp-numberfield",name:"minutes",step:1,symbol:"m",value:1,minValue:0,maxValue:59,bind:{triggerSymbol:"{translate.shortMinutesSymbol}"},allowNegative:!1,allowDecimals:!1,enforceMaxLength:!0,maxLength:2,allowBlank:!1,flex:1,margin:"0 0 0 4",listeners:{spinup:e.onSpinUpMinutes,spindown:e.onSpinDownMinutes,change:e.onMinutesChange}}]}},getHourSlider:function(){return this.lookupReference("start_at").down('[name="hours"]')},getMinuteSlider:function(){return this.lookupReference("start_at").down('[name="minutes"]')},getCalendar:function(){return this.down('[name="datetime"]')},getDurationHourSlider:function(){return this.lookupReference("duration").down('[name="hours"]')},getDurationMinuteSlider:function(){return this.lookupReference("duration").down('[name="minutes"]')},getValue:function(){var e=this,t=e.getCalendar(),n=e.getHourSlider(),i=e.getMinuteSlider(),r=t.getValue(),o=n.getValue(),a=i.getValue();return BP.localSettings.get("localTime")?(r.setHours(o),r.setMinutes(a)):r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),o,a,0,0)),r},setValue:function(e){var t=this;e&&(t.value=e>t.getMaxValue()?t.getMaxValue():e,t.displayValue())},setMinValue:function(e){var t=this,n=Ext.isString(e)?t.parseDate(e):e;t.minValue=n},getMinValue:function(){return this.minValue},getMaxValue:function(){return this.maxValue},setMaxValue:function(e){var t=this,n=Ext.isString(e)?t.parseDate(e):e;t.maxValue=n},setDurationValue:function(e){var t=this;e&&(t.duration=e>t.getDurationMinValue()?e>t.getDurationMaxValue()?t.getDurationMaxValue():e:t.getDurationMinValue(),t.displayDuration(),this.setTooltip())},setDMaxValue:function(e){this.dMaxValue=e,this.setTooltip()},setDurationMinValue:function(e){var t,n=this,i=n.getDurationHourSlider(),r=n.getDurationMinuteSlider(),o=this.timeConvert(e);t=i.getValue(),i.setMinValue(o.hours),r.setMinValue(0),this.durationMinValue=e,this.setTooltip()},setDurationMaxValue:function(e){var t,n=this,i=n.getDurationHourSlider(),r=n.getDurationMinuteSlider(),o=this.timeConvert(e);t=i.getValue(),i.setMaxValue(o.hours),r.setMaxValue(59),this.durationMaxValue=e,this.setTooltip()},timeConvert:function(e){var t=e%60,n=(e-t)/60;return{hours:n,minutes:t}},getDurationValue:function(){var e=this.getDurationHourSlider().getValue(),t=this.getDurationMinuteSlider().getValue();return 60*e+t},getDurationMinValue:function(){return this.durationMinValue},getDurationMaxValue:function(){return this.durationMaxValue},displayValue:function(){var e=this,t=e.value,n=e.getCalendar(),i=e.getHourSlider(),r=e.getMinuteSlider(),o=e.formatUtil.getDataTime(t);t&&(n&&n.setValue(t),i&&i.setValue(o.hours),r&&r.setValue(o.minutes))},displayDuration:function(){var e=this,t=this.getDurationHourSlider(),n=this.getDurationMinuteSlider(),i=Math.floor(e.duration/60),r=e.duration%60;t.setValue(i),n.setValue(r)},setTooltip:function(){var e=this,t=Ext.String.format("The value for this field must be in the range: {0} - {1}",BP.util.Format.secondsToTime(60*e.durationMinValue),BP.util.Format.secondsToTime(60*e.durationMaxValue));return e.rendered&&!BP.localSettings.get("showTipsHints")&&(e.tooltip?e.tooltip.setHtml(t):e.tooltip=new Ext.ToolTip({target:e.down('[reference="duration"]').id,trackMouse:!0,cls:"bp-amountfield-help",anchor:"b",mouseOffset:[0,-5],maxWidth:320,minWidth:100,html:t})),e},onSpinUpHours:function(e){var t,n=this.up("bp-datetime"),i=n.getDurationValue(),r=e.getValue();i>=n.getDurationMaxValue()&&n.setDurationValue(n.getDurationMaxValue()),t=n.timeConvert(n.getDurationMaxValue()),r==t.hours&&(n.getDurationValue()==n.getDurationMaxValue()||n.setDurationValue(n.getDurationMaxValue()),e.suspendEvents(),e.setValue(e.getValue()-1),e.resumeEvents())},onSpinDownHours:function(e){var t,n=this.up("bp-datetime"),i=n.getDurationValue(),r=e.getValue();i<=n.getDurationMinValue()&&n.setDurationValue(n.getDurationMinValue()),t=n.timeConvert(n.getDurationMinValue()),r==t.hours&&(n.getDurationValue()==n.getDurationMinValue()||n.setDurationValue(n.getDurationMinValue()),e.suspendEvents(),e.setValue(e.getValue()+1),e.resumeEvents())},onSpinUpMinutes:function(e){var t,n=this.up("bp-datetime"),i=n.getDurationValue(),r=e.getValue(),o=n.getDurationHourSlider(),a=o.getValue(),s=e.getMaxValue(),l=o.getMaxValue();i>=n.getDurationMaxValue()&&n.setDurationValue(n.getDurationMaxValue()),t=n.timeConvert(n.getDurationValue()),(r==s||n.getDurationValue()==n.getDurationMaxValue())&&(o.setValue(a==l?n.getDurationValue()==n.getDurationMaxValue()?o.getMinValue():t.hours:a+1),e.suspendEvents(),e.setValue(e.getMinValue()-1),e.resumeEvents())},onSpinDownMinutes:function(e){var t,n=this.up("bp-datetime"),i=n.getDurationValue(),r=e.getValue(),o=n.getDurationHourSlider(),a=o.getValue(),s=e.getMinValue(),l=o.getMinValue();i<=n.getDurationMinValue()&&n.setDurationValue(n.getDurationMinValue()),t=n.timeConvert(n.getDurationValue()),(r==s||n.getDurationValue()==n.getDurationMinValue())&&(o.setValue(a==l?n.getDurationValue()==n.getDurationMinValue()?o.getMaxValue():t.hours:a-1),e.suspendEvents(),e.setValue(e.getMaxValue()+1),e.resumeEvents())},onMinutesChange:function(){var e,t=this.up("bp-datetime"),n=t.getDurationValue();n<=t.getDurationMinValue()&&(e=t.getDurationMinValue(),t.setDurationValue(e)),n>=t.getDurationMaxValue()&&(e=t.getDurationMaxValue(),t.setDurationValue(e))}},0,["bp-datetime"],["component","box","container","fieldset","bp-datetime"],{component:!0,box:!0,container:!0,fieldset:!0,"bp-datetime":!0},["widget.bp-datetime"],0,[BP.view.form.datetime,"DateTime"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.form.time.TimeController",Ext.app.ViewController,{init:function(){var e=this;BP.model.SettlementInfo.on("datachange",e.setDefaultSettlementTime,e),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-time":{beforerender:"onDurationSelectorNumBeforeRender",afterrender:"setDefaultSettlementTime"}}},onDurationSelectorNumBeforeRender:function(){this.getView().setValue(59)},setDefaultSettlementTime:function(e){var t=this,n=t.getView(),i=n.getViewModel(),r=BP.model.SettlementInfo,o=r.data,a=BP.util.Clock.getTimestamp(),s=o.nextSettlementTime?o.nextSettlementTime:BP.util.Clock.getNextSettlementTime(a),l=parseInt((s-a)/6e4);l>1&&i.set("statusOfTrade",!1),n.setMaxValue(1>l?1:l),e.on("clocktick",t.onCountdownTiker,t)},onCountdownTiker:function(e){var t=BP.model.SettlementInfo,n=t.data;this.getView()&&n.state&&(this.onAdjustedmentSettlemenTime(e),this.onAdjustedmentTime(e),this.changeValue(e),this.onAdjustedmentMaxValue(e))},onAdjustedmentSettlemenTime:function(e){var t=this,n=t.getView(),i=BP.model.SettlementInfo,r=i.data,o=r.nextSettlementTime?r.nextSettlementTime:BP.util.Clock.getNextSettlementTime(e);if(+e>=o){var a=parseInt((o-e)/6e4);n.setValue(a)}},onAdjustedmentTime:function(e){var t=this,n=t.getView(),i=BP.model.SettlementInfo,r=i.data,o=r.nextSettlementTime?r.nextSettlementTime:BP.util.Clock.getNextSettlementTime(e),a=parseInt((o-e)/6e4),s=n.getValue()>a?a:n.getValue();n.setValue(s)},changeValue:function(e){var t=this.getView(),n=t.getValue(),i=+e+6e4*n,r=BP.model.SettlementInfo,o=r.data,a=o.nextSettlementTime?o.nextSettlementTime:BP.util.Clock.getNextSettlementTime(+e),s=i>a?a:i;t.setTime(s)},onAdjustedmentMaxValue:function(e){var t=this.getView(),n=BP.model.SettlementInfo,i=n.data,r=i.nextSettlementTime?i.nextSettlementTime:BP.util.Clock.getNextSettlementTime(e),o=t.getMaxValue(),a=parseInt((r-e)/6e4);a>o?t.setMaxValue(o):t.setMaxValue(a)},onBioDurationChange:function(e){var t,n=this,i=n.getView(),r=i.getViewModel(),o=Ext.getStore("Durations");if(r){if(t=o.getById("REG_"+e.getId())||o.getById("REG_default"),!t)return;i.setMinValue(t.get("minContractDuration")),i.setMaxValue(t.get("maxContractDuration")),i.setValue(t.get("minContractDuration"))}},updateInstrument:function(e){var t=this,n=t.getView(),i=(n.getViewModel(),Ext.getStore("Durations")),r=i.getById("REG_"+e.getId())||i.getById("REG_default");r&&(n.setMinValue(r.get("minContractDuration")),n.setMaxValue(r.get("maxContractDuration")),n.setValue(r.get("minContractDuration")))},validationLocalStorageSettings:function(e){var t=BP.util.Validation,n=Ext.decode(e,!0);return null===n?!1:t.isArray(n)||t.isString(n)||t.isNumber(n)||t.isBoolean(n)||Ext.Object.isEmpty(n)?!1:n}},0,0,0,0,["controller.bp-time"],0,[BP.view.form.time,"TimeController"],0),Ext.cmd.derive("BP.view.form.time.TimeModel",Ext.app.ViewModel,{data:{statusOfTrade:!0,instrument:"EUR/USD",defaultContractDuration:1,minContractDuration:1,maxContractDuration:1e4},formulas:{},stores:{bioDuration:{model:"Duration"}}},0,0,0,0,["viewmodel.bp-time"],0,[BP.view.form.time,"TimeModel"],0),Ext.cmd.derive("BP.view.form.trigger.Spinner",Ext.form.trigger.Spinner,{renderTpl:['<div class="x-form-text-wrap x-form-text-wrap-{ui} bp-trigger-symbol-wrap" <tpl if="triggerSymbolStyle"> style="{triggerSymbolStyle}"</tpl>><span class="x-form-field x-form-text x-form-text-{ui} bp-trigger-symbol">{triggerSymbol}</span></div><div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],renderTrigger:function(e){var t=this,n=t.width,i=t.hidden?"display:none;":"",r=t.field.triggerSymbol?"":"display:none;";return n&&(i+="width:"+n),Ext.XTemplate.getTpl(t,"renderTpl").apply({$trigger:t,fieldData:e,ui:e.ui,childElCls:e.childElCls,triggerId:t.domId=t.field.id+"-trigger-"+t.id,triggerSymbol:t.field.triggerSymbol||" ",cls:t.cls,triggerStyle:i,triggerSymbolStyle:r,extraCls:t.extraCls,baseCls:t.baseCls})},setUI:function(){}},0,0,0,0,["trigger.bp-spinner"],0,[BP.view.form.trigger,"Spinner"],0),Ext.cmd.derive("BP.view.form.field.Number",Ext.form.field.Number,{baseCls:"x-field bp-numberfield",triggerSymbol:null,tooltip:null,config:{triggers:{spinner:{type:"bp-spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},allowDecimal:!1,allowNegative:!0,enableKeyEvents:!0,initComponent:function(){var e=this;null===e.triggerSymbol&&(e.triggerSymbol=!1),Ext.form.field.Number.prototype.initComponent.apply(this,arguments)},setTriggerSymbol:function(e){if(e){this.triggerSymbol=e;var t=this.getEl().dom.getElementsByClassName("bp-trigger-symbol-wrap")[0],n=this.getEl().dom.getElementsByClassName("bp-trigger-symbol")[0];n&&(this.setText(n,this.triggerSymbol),t.style.display="")}},setStep:function(e){this.step=e},getStep:function(){return this.step},setText:function(e,t){void 0===e.innerText?e.textContent=t:e.innerText=t},getMinValue:function(){return this.minValue},getMaxValue:function(){return this.maxValue},onKeyDown:function(e){var t=e.browserEvent.keyCode;!this.allowDecimal||this.allowNegative||t>=48&&57>=t||t>=97&&105>=t||46===t||8===t||37===t||39===t||190===t||110===t||48===t||96===t?this.allowDecimal||this.allowNegative||t>=48&&57>=t||t>=97&&105>=t||46===t||8===t||37===t||39===t||48===t||96===t||e.stopEvent():e.stopEvent(),Ext.form.field.Number.prototype.onKeyDown.apply(this,arguments)},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var e=this;e.disabled||(e.fireEvent("spin",e,"up"),e.fireEvent("spinup",e),e.onSpinUp())},spinDown:function(){var e=this;e.disabled||(e.fireEvent("spin",e,"down"),e.fireEvent("spindown",e),e.onSpinDown())},setTooltip:function(e){var t=this;return t.rendered&&!BP.localSettings.get("showTipsHints")&&(t.tooltip?t.tooltip.setHtml(e):t.tooltip=new Ext.ToolTip({target:this.id,trackMouse:!0,cls:"bp-amountfield-help",anchor:"b",mouseOffset:[0,-5],maxWidth:280,minWidth:100,html:e})),t}},0,["bp-numberfield"],["component","box","field","textfield","spinnerfield","numberfield","bp-numberfield"],{component:!0,box:!0,field:!0,textfield:!0,spinnerfield:!0,numberfield:!0,"bp-numberfield":!0},["widget.bp-numberfield"],0,[BP.view.form.field,"Number"],0),Ext.cmd.derive("BP.view.form.time.Time",Ext.form.FieldContainer,{cls:"bp-time",layout:"anchor",minValue:5,maxValue:140,value:10,controller:"bp-time",viewModel:"bp-time",bind:{fieldLabel:"{translate.durationFieldLabel}",tooltip:"{tplAmountTooltip}"},initComponent:function(){var e=this,t={items:e.buildItems(e)};Ext.apply(e,t),Ext.form.FieldContainer.prototype.initComponent.apply(this,arguments)},buildItems:function(e){return BP.translate,[{layout:"hbox",border:!1,items:[{xtype:"bp-numberfield",name:"hours",vtype:"natural",step:1,bind:{disabled:"{statusOfTrade}",triggerSymbol:"{translate.shortHourSymbol}"},minValue:0,maxValue:23,allowNegative:!1,allowDecimals:!1,enforceMaxLength:!0,maxLength:2,allowBlank:!1,flex:1,padding:"0",listeners:{spinup:e.onSpinUpHours,spindown:e.onSpinDownHours,change:e.onMinutesChange}},{xtype:"bp-numberfield",name:"minutes",vtype:"natural",step:1,bind:{disabled:"{statusOfTrade}",triggerSymbol:"{translate.shortMinutesSymbol}"},minValue:0,maxValue:59,enforceMaxLength:!0,allowDecimals:!1,allowNegative:!1,maxLength:2,allowBlank:!1,flex:1,margin:"0 0 0 5",listeners:{spinup:e.onSpinUpMinutes,spindown:e.onSpinDownMinutes,change:e.onMinutesChange}}]},{border:!1,xtype:"component",name:"starttime",html:'<i class="expected-expire-tips fa fa-info-circle" data-qtip="'+BP.translate("trade-panel.expected-expiry-tips")+'"></i><span class="expected-time"></span>',padding:"10 0 0 5",flex:1}]},onSpinUpHours:function(){var e=this.up("bp-time"),t=e.getValue();t>=e.getMaxValue()&&e.setValue(e.getMaxValue())},onSpinDownHours:function(){var e=this.up("bp-time"),t=e.getValue();t<=e.getMinValue()&&e.setValue(e.getMinValue())},onSpinUpMinutes:function(e){var t=this.up("bp-time"),n=t.getValue(),i=e.getValue(),r=t.getHourSlider(),o=r.getValue(),a=e.getMinValue(),s=e.getMaxValue(),l=r.getMaxValue(),d=r.getMinValue();n>=t.getMaxValue()&&t.setValue(t.getMaxValue()-1),i==s&&(r.setValue(o==l?d:o+1),e.setValue(a-1))},onSpinDownMinutes:function(e){var t=this.up("bp-time"),n=t.getValue(),i=e.getValue(),r=t.getHourSlider(),o=r.getValue(),a=e.getMinValue(),s=e.getMaxValue(),l=r.getMinValue();r.getMaxValue(),n<=t.getMinValue()&&t.setValue(t.getMinValue()+1),i==a&&(r.setValue(o==l?l:o-1),e.setValue(s-1))},onMinutesChange:function(){var e,t=this.up("bp-time"),n=t.getValue();n<=t.getMinValue()&&(e=t.getMinValue(),t.setValue(e)),n>=t.getMaxValue()&&(e=t.getMaxValue(),t.setValue(e)),t.fireEvent("timechange",e||n)},getHourSlider:function(){return this.down('[name="hours"]')},getMinuteSlider:function(){return this.down('[name="minutes"]')},getValue:function(){var e=this.getHourSlider().getValue(),t=this.getMinuteSlider().getValue();return 60*e+t},setValue:function(e){var t=this.timeConvert(e||1);this.down('[name="hours"]').setValue(t.hours),this.down('[name="minutes"]').setValue(t.minutes),this.setTooltip()},timeConvert:function(e){var t=e%60,n=(e-t)/60;return{hours:n,minutes:t}},setMinValue:function(e){this.minValue=e,this.setTooltip()},getMinValue:function(){return this.minValue},getMaxValue:function(){return this.maxValue},setMaxValue:function(e){this.maxValue=e,this.setTooltip()},setTime:function(e){this.setText(this.down('component[name="starttime"]').el.dom.children[1],BP.util.Format.gmtTimeString(new Date(e)))},setText:function(e,t){void 0===e.innerText?e.textContent=t:e.innerText=t},setAdjustedmentMinValue:function(e,t){var n=this.down('[name="hours"]').getValue();this.down('[name="hours"]').setMinValue(e),this.down('[name="minutes"]').setMinValue(n==e?t:59),this.down('[name="minutes"]').setMinValue(0==n?1:0)},setAdjustedmentMaxValue:function(e,t){var n=this.down('[name="hours"]').getValue();this.down('[name="hours"]').setMaxValue(e),this.down('[name="minutes"]').setMaxValue(n==e?t:59),this.down('[name="minutes"]').setMinValue(0==n?1:0)},setTooltip:function(){var e=this,t=Ext.String.format(BP.translate("trade-panel.field-range-tips"),BP.util.Format.secondsToTime(60*e.minValue),BP.util.Format.secondsToTime(60*e.maxValue));
return e.rendered&&!BP.localSettings.get("showTipsHints")&&(e.tooltip?e.tooltip.setHtml(t):e.tooltip=new Ext.ToolTip({target:e.down().id,trackMouse:!0,cls:"bp-amountfield-help",anchor:"b",mouseOffset:[0,-5],maxWidth:320,minWidth:100,html:t})),e}},0,["bp-time"],["component","box","container","fieldcontainer","bp-time"],{component:!0,box:!0,container:!0,fieldcontainer:!0,"bp-time":!0},["widget.bp-time"],0,[BP.view.form.time,"Time"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.form.amount.AmountFieldController",Ext.app.ViewController,{init:function(){Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-amountfield":{afterrender:"onAfterRender"}}},onAfterRender:function(){var e=this;e.getView()},onShowInstrumentTooltip:function(e,t){t.setAttribute("data-qtip","765756765756")},onAmountChange:function(e,t){var n=100*Math.floor(t/100);null!==n&&(n?n>e.maxValue?e.setValue(e.maxValue):n<e.minValue&&e.setValue(e.minValue):e.setValue(e.minValue))},onAmountBlur:function(e){var t,n=e.getValue();n=n<e.minValue?e.minValue:n,t=Ext.Number.snap(n,e.getStep(),e.minValue,e.maxValue),e.setValue(t)},blinkField:function(e){e.addCls("red"),setTimeout(function(){e.removeCls("red")},500)}},0,0,0,0,["controller.bp-amountfield"],0,[BP.view.form.amount,"AmountFieldController"],0),Ext.cmd.derive("BP.view.form.amount.AmountField",Ext.form.field.Number,{cls:"bp-amountfield",controller:"bp-amountfield",enableKeyEvents:!0,allowDecimals:!1,allowNegative:!1,allowExponential:!1,bind:{step:"{incrementAmount}",fieldLabel:"{tplAmountFieldLabel}",minValue:"{minTradeAmount}",maxValue:"{maxTradeAmount}",value:"{defaultAmount}",tooltip:"{tplAmountTooltip}"},minLength:1,maxLength:10,maxText:BP.translate("trade-panel.max-amount-msg")+" {0}",allowBlank:!1,listeners:{blur:"onAmountBlur"},initComponent:function(){var e,t=this,n=BP.localSettings.get("incerementAmount"),i=BP.localSettings.get("defaultAmount")<BP.localSettings.get("min_trade_amount")?BP.localSettings.get("min_trade_amount"):BP.localSettings.get("defaultAmount");e={value:i,step:n},Ext.apply(Ext.form.field.VTypes,{natural:function(e){var t=/^\d+$/i;return t.test(e)},naturalText:"Must be a natural number",naturalMask:/^[0-9]/i}),Ext.apply(t,e),Ext.form.field.Number.prototype.initComponent.apply(this,arguments)},onKeyDown:function(e){var t=e.browserEvent.keyCode||0;8==t||46==t||t>=35&&40>=t||t>=48&&57>=t||t>=96&&105>=t||e.stopEvent(),Ext.form.field.Number.prototype.onKeyDown.apply(this,arguments)},setStep:function(e){this.step=e},getStep:function(){return this.step},setTooltip:function(e){var t=this;return t.rendered&&!BP.localSettings.get("showTipsHints")&&(t.tooltip?t.tooltip.setHtml(e):t.tooltip=new Ext.ToolTip({target:this.id,trackMouse:!0,cls:"bp-amountfield-help",anchor:"b",mouseOffset:[0,-5],maxWidth:280,minWidth:100,html:e})),t}},0,["bp-amountfield"],["component","box","field","textfield","spinnerfield","numberfield","bp-amountfield"],{component:!0,box:!0,field:!0,textfield:!0,spinnerfield:!0,numberfield:!0,"bp-amountfield":!0},["widget.bp-amountfield"],0,[BP.view.form.amount,"AmountField"],0),Ext.cmd.derive("BP.view.selector.PayoutRefund",Ext.form.ComboBox,{fieldLabel:"payout",displayField:"fulltext",valueField:"payout_refund",queryMode:"local",allowBlank:!1,editable:!1,autoSelect:!0,forceSelection:!0,matchFieldWidth:!1,listeners:{afterrender:function(e){e.getPicker().setWidth(124)},beforerender:function(){}},listConfig:{getInnerTpl:function(){return'<div class="bp-instrument-selector-item"><strong>{payout}% / {refund}%</strong></div>'}}},0,["bp-payout-refund-selector"],["component","box","field","textfield","pickerfield","combobox","combo","bp-payout-refund-selector"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0,combobox:!0,combo:!0,"bp-payout-refund-selector":!0},["widget.bp-payout-refund-selector"],0,[BP.view.selector,"PayoutRefund"],0),Ext.cmd.derive("BP.view.button.TickerController",Ext.app.ViewController,{listen:{component:{"bp-instrument-ticker":{afterrender:"onAfterRenderInstrumentTicker"}}},onTranslate:function(e){e.onTranslate(),(arguments.callee.$previous||Ext.app.ViewController.prototype.onTranslate).apply(this,arguments)},onAfterRenderInstrumentTicker:function(e){e.on("click",Ext.pass(this.onCallClick,[this]),e,{element:"el",delegate:"div.call > .bp-trade-mask",buffer:100,stopEvent:!0}),e.on("click",Ext.pass(this.onPutClick,[this]),e,{element:"el",delegate:"div.put > .bp-trade-mask",buffer:100,stopEvent:!0}),e.on("mouseover",Ext.pass(this.onMouseOver,[this]),e,{element:"el",delegate:"div.bp-trade-mask",buffer:1,stopEvent:!0}),e.on("mouseout",Ext.pass(this.onMouseOut,[this]),e,{element:"el",delegate:"div.bp-trade-mask",buffer:1,stopEvent:!0})},onMouseOver:function(e,t,n){var i=Ext.get(n);i.up().toggleCls("active")},onMouseOut:function(e,t,n){var i=Ext.get(n);i.up().toggleCls("active")},onCallClick:function(e){this.tradingLocked&&e.fireViewEvent("trade","call")},onPutClick:function(e){this.tradingLocked&&e.fireViewEvent("trade","put")}},0,0,0,0,["controller.bp-instrument-ticker"],0,[BP.view.button,"TickerController"],0),Ext.cmd.derive("BP.view.button.Ticker",Ext.Component,{controller:"bp-instrument-ticker",tradingLocked:!0,tickingStopped:!1,initComponent:function(){var e=this;Ext.apply(e,{tpl:e.buildTpl(e),action:this.optionType,height:175,data:e.dataReset(!0)}),Ext.Component.prototype.initComponent.apply(this,arguments)},buildTpl:function(){return['<div unselectable="on" class="bp-instrument-ticker x-unselectable','<tpl if="tradingLocked">'," untradable","<tpl else>"," tradable","</tpl>",' ">','<div unselectable="on" class="call x-unselectable">','<div unselectable="on" class="arrow x-unselectable"></div>','<div unselectable="on" class="text x-unselectable">','<div unselectable="on" class="side x-unselectable">{callSide}</div>','<div unselectable="on" class="title x-unselectable">{callTitle}</div>',"</div>",'<div unselectable="on" class="price x-unselectable">','<div unselectable="on" class="bid-title x-unselectable">{putAskTitle}</div>','<div unselectable="on" class="minor-major x-unselectable">','<span unselectable="on" class="minor x-unselectable">{callPriceMinor}</span>','<span unselectable="on" class="major x-unselectable">{callPriceMajor}</span>',"</div>","</div>",'<div class="bp-trade-mask"></div>',"</div>",'<div unselectable="on" class="put x-unselectable">','<div unselectable="on" class="arrow x-unselectable"></div>','<div unselectable="on" class="text x-unselectable">','<div unselectable="on" class="side x-unselectable">{putSide}</div>','<div unselectable="on" class="title x-unselectable">{putTitle}</div>',"</div>",'<div unselectable="on" class="price x-unselectable">','<div unselectable="on" class="ask-title x-unselectable">{callBidTitle}</div>','<div unselectable="on" class="minor-major x-unselectable">','<span unselectable="on" class="minor x-unselectable">{putPriceMinor}</span>','<span unselectable="on" class="major x-unselectable">{putPriceMajor}</span>',"</div>","</div>",'<div class="bp-trade-mask"></div>',"</div>","</div>"]},dataReset:function(e){var t=this,n={callSide:BP.translate("trade-panel.up"),callTitle:BP.translate("trade-panel.call"),callBidTitle:BP.translate("trade-panel.bid"),callPriceMinor:"-",callPriceMajor:"-",putSide:BP.translate("trade-panel.down"),putTitle:BP.translate("trade-panel.put"),putAskTitle:BP.translate("trade-panel.ask"),putPriceMinor:"-",putPriceMajor:"-",tradingLocked:!0};return t.tradingLocked=!0,t.tickingStopped=!1,e===!0?n:void t.setPrice(n)},setPrice:function(e){var t,n=this;n.tradingLocked=e.tradingLocked||!0,n.tickingStopped=e.tickingStopped||!0,t=document.createElement("div"),t.style.display="none",t.innerHTML=n.tpl.apply(e),Ext.Array.each(t.children[0].children,function(e,t){n.setText(n.el.dom.children[0].children[t].children[2].children[1].children[0],e.children[2].children[1].children[0]),n.setText(n.el.dom.children[0].children[t].children[2].children[1].children[1],e.children[2].children[1].children[1])}),t=null},onTranslate:function(){var e,t=this,n={callSide:BP.translate("trade-panel.up"),callTitle:BP.translate("trade-panel.call"),callBidTitle:BP.translate("trade-panel.bid"),putSide:BP.translate("trade-panel.down"),putTitle:BP.translate("trade-panel.put"),putAskTitle:BP.translate("trade-panel.ask"),tradingLocked:t.tradingLocked};t.tradingLocked=t.tradingLocked||!0,t.tickingStopped=t.tickingStopped||!0,e=document.createElement("div"),e.style.display="none","function"==typeof t.tpl.apply&&(e.innerHTML=t.tpl.apply(n),Ext.Array.each(e.children[0].children,function(e,n){t.setText(t.el.dom.children[0].children[n].children[1].children[0],e.children[1].children[0]),t.setText(t.el.dom.children[0].children[n].children[1].children[1],e.children[1].children[1]),t.setText(t.el.dom.children[0].children[n].children[2].children[0],e.children[2].children[0])}),e=null)},setText:function(e,t){void 0===e.innerText?e.textContent=t.textContent:e.innerText=t.innerText},getMajorMinor:function(e){var t="",n="";if(e){var i=e.split("."),t=i[0];Ext.isEmpty(i[1])||(t+="."+i[1].substr(0,i[1].length-1),n+=i[1].substr(-1))}return{minor:t,major:n}},formatPrice:function(e){var t=this,n=e.get("priceScale"),i=t.formatUtil.price(e.get("bidPrice"),n),r=t.formatUtil.price(e.get("askPrice"),n),o=!e||!e.isTradable();return{callPriceMinor:t.getMajorMinor(r).minor,callPriceMajor:t.getMajorMinor(r).major,putPriceMinor:t.getMajorMinor(i).minor,putPriceMajor:t.getMajorMinor(i).major,tradingLocked:o}},setNotTradable:function(e){if(e=this.isTradable(e),this.tradingLocked!=e){var t=this,n=BP.translate("msg.not-tradable");this.tradingLocked=e,e?t.getEl().mask(n,"mask-below-menu"):(t.getEl().unmask(),t.setTradableStyle(e))}},isTradable:function(e){return"TRADING_ALLOWED"!=e},setTradableStyle:function(e){var t,n=this;n.tradingLocked=e.tradingLocked||!0,n.tickingStopped=e.tickingStopped||!0,t=document.createElement("div"),t.style.display="none",t.innerHTML=n.tpl.apply(e),n.el.dom.children[0].className=t.children[0].className,t=null},updateMarketTick:function(e){var t=this;Ext.suspendLayouts(),t.setPrice(t.formatPrice(e)),Ext.resumeLayouts(!1)},updateInstrument:function(e){var t=this;Ext.suspendLayouts(),t.setNotTradable(e.get("status")),t.setPrice(t.formatPrice(e)),Ext.resumeLayouts(!1)}},0,["bp-instrument-ticker"],["component","box","bp-instrument-ticker"],{component:!0,box:!0,"bp-instrument-ticker":!0},["widget.bp-instrument-ticker"],0,[BP.view.button,"Ticker"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.panel.header.SwitcherController",Ext.app.ViewController,{listen:{component:{"bp-switcher":{afterrender:"onAfterRenderSwitcher"}}},onAfterRenderSwitcher:function(e){e.on("click",Ext.pass(this.onSwitcherClick,[this]),e,{element:"el",delegate:"div.switcher-icon",buffer:1,stopEvent:!0})},onSwitcherClick:function(e){var t=e.getView(),n=t.getViewModel(),i=n.get("switcherState");n.set("switcherState",!i),e.fireViewEvent("switcherchange",!i)}},0,0,0,0,["controller.bp-switcher"],0,[BP.view.panel.header,"SwitcherController"],0),Ext.cmd.derive("BP.view.panel.header.SwitcherModel",Ext.app.ViewModel,{data:{switcherState:!1,translate:{openNowTitle:"viewport.open-now",placePendingTitle:"viewport.place-pending",pendingOptionModeTitle:"viewport.pending-option-mode"}},formulas:{tplSwitcher:{bind:{switcherState:"{switcherState}",placePendingTitle:"{translate.pendingOptionModeTitle}"},get:function(e){var t=["<span class=\"switcher-title {[values.switcherState ? 'on' : 'off' ]}\">{placePendingTitle}:</span> ","<div class=\"switcher-icon fa fa-{[values.switcherState ? 'toggle-on' : 'toggle-off' ]} fa-lg\"></div>"];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-switcher"],0,[BP.view.panel.header,"SwitcherModel"],0),Ext.cmd.derive("BP.view.panel.header.Switcher",Ext.panel.Header,{padding:"7 5 5 5",controller:"bp-switcher",viewModel:"bp-switcher",cls:"bp-switcher",bind:{title:"{tplSwitcher}"}},0,["bp-switcher"],["component","box","container","header","bp-switcher"],{component:!0,box:!0,container:!0,header:!0,"bp-switcher":!0},["widget.bp-switcher"],0,[BP.view.panel.header,"Switcher"],0),Ext.cmd.derive("BP.view.form.conditions.ConditionsController",Ext.app.ViewController,{listen:{component:{"bp-payout-refund-selector":{}}},init:function(){var e=this,t={conditionsPane:e.getView(),payoutRefund:e.getView().down("bp-payout-refund-selector"),priceCondition:e.lookupReference("price_condition"),priceToggle:e.lookupReference("price_condition").down('[name="price-toggle"]'),priceDirection:e.lookupReference("price_condition").down('combobox[name="direction"]'),priceOnMarket:e.lookupReference("price_condition").down('[name="price"]')};e.transport=BP.getTransport(),Ext.apply(e,t),Ext.app.ViewController.prototype.init.apply(this,arguments)},onPriceToggle:function(e,t){var n,i,r=this;i=r.conditionsPane.up("#extended"),n=r.conditionsPane.getViewModel(),n&&n.set("priceToggle",!t),r.calculatePrice(),i.isValid()},onPayoutToggle:function(e,t){var n,i,r=this;i=r.conditionsPane.up("#extended"),n=r.conditionsPane.getViewModel(),n&&n.set("payoutToggle",!t),i.isValid()},calculatePrice:function(){var e=this,t=e.conditionsPane.up("#extended"),n=t.down('checkbox[name="price-toggle"]').getValue(),i=t.down('numberfield[name="price"]'),r=t.down('radiogroup[name="types"]').getValue().type;if(n&&r){var o=t.down("bp-instrumentfield").getValue(),a=Ext.getStore("Instruments").getById(o);i.setValue(a.getMarketPrice("CALL"==r?"ask":"bid"))}else i.reset()}},0,0,0,0,["controller.bp-conditions"],0,[BP.view.form.conditions,"ConditionsController"],0),Ext.cmd.derive("BP.view.form.conditions.ConditionsModel",Ext.app.ViewModel,{data:{priceToggle:!0,translate:{startAtFieldLabel:"trade-panel.start-at",shortHourSymbol:"trade-panel.short-hour",shortMinutesSymbol:"trade-panel.short-minutes",ifPriceLabel:"trade-panel.if-price",ifPayoutLabel:"trade-panel.if-payout",payoutRefundFieldLabel:"trade-panel.payout-refund",conditionsTitle:"trade-panel.conditions"}},stores:{direction:{fields:[{name:"id",type:"string",defaultValue:""},{name:"text",type:"string",defaultValue:""}],data:[{id:"LESS",text:BP.translate("trade-panel.spot")+" ≤"},{id:"GREATER",text:BP.translate("trade-panel.spot")+" ≥"}]},payout:{fields:[{name:"id",type:"string",defaultValue:""},{name:"text",type:"string",defaultValue:""}],data:[{text:"≥ 75%",id:75},{text:"≥ 80%",id:80},{text:"≥ 85%",id:85},{text:"≥ 90%",id:90}]}}},0,0,0,0,["viewmodel.bp-conditions"],0,[BP.view.form.conditions,"ConditionsModel"],0),Ext.cmd.derive("BP.view.form.conditions.Conditions",Ext.form.FieldSet,{cls:"bp-conditions",controller:"bp-conditions",viewModel:"bp-conditions",collapsible:!0,itemId:"maskSelector",bind:{title:"{translate.conditionsTitle}"},defaults:{anchor:"100%",labelWidth:80},initComponent:function(){var e,t=this;e={items:t.buildConditionsPanel(t)},Ext.apply(t,e),Ext.form.FieldSet.prototype.initComponent.apply(this,arguments)},buildConditionsPanel:function(){return[{xtype:"bp-payout-refund-selector",referenceHolder:!0,bind:{fieldLabel:"{translate.payoutRefundFieldLabel}",store:"{payoutRefund}",value:"{payoutRefundValue}"}},{xtype:"fieldcontainer",layout:"hbox",reference:"price_condition",items:[{xtype:"checkbox",name:"price-toggle",bind:{boxLabel:"{translate.ifPriceLabel}"},flex:1,disabled:!0},{xtype:"combobox",name:"direction",queryMode:"local",height:24,margin:"0 5 0 0",valueField:"id",displayField:"text",store:{xtype:"store",fields:["id","text"],data:[{id:"LESS",text:BP.translate("trade-panel.spot")+" ≤"},{id:"GREATER",text:BP.translate("trade-panel.spot")+" ≥"}]},value:"LESS",forceSelection:!0,editable:!1,disabled:!0,bind:{disabled:"{priceToggle}"},allowBlank:!1,width:65},{xtype:"numberfield",name:"price",allowBlank:!1,allowNegative:!1,bind:{disabled:"{priceToggle}"},flex:1}]}]},getValue:function(){var e=this.down('[name="hour"]').getValue(),t=this.down('[name="minute"]').getValue();return 60*e+t}},0,["bp-conditions"],["component","box","container","fieldset","bp-conditions"],{component:!0,box:!0,container:!0,fieldset:!0,"bp-conditions":!0},["widget.bp-conditions"],0,[BP.view.form.conditions,"Conditions"],0),Ext.cmd.derive("BP.view.slider.Single",Ext.slider.Single,{cls:"bp-sliderfield",sliderLegend:!0,fieldSubTpl:['<tpl if="values.$comp.sliderLegend">','<table class="bp-slider-legend">',"<tr>",'<td class="min-value">{minValue}</td>','<td class="average-value">',"{[this.showAverage(out, values)]}","</td>",'<td class="max-value">{maxValue}</td>',"</tr>","</table>","</tpl>",'<div id="{id}" role="{role}" {inputAttrTpl} class="x-slider {fieldCls} {vertical}','{childElCls}"','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="isVertical"> aria-orientation="vertical"<tpl else> aria-orientation="horizontal"</tpl>',">",'<div id="{cmpId}-endEl" data-ref="endEl" class="x-slider-end" role="presentation">','<div id="{cmpId}-innerEl" data-ref="innerEl" class="x-slider-inner" role="presentation">',"{%this.renderThumbs(out, values)%}","</div>","</div>","</div>",{renderThumbs:function(e,t){for(var n,i,r=t.$comp,o=0,a=r.thumbs,s=a.length;s>o;o++)n=a[o],i=n.getElConfig(),i.id=r.id+"-thumb-"+o,Ext.DomHelper.generateMarkup(i,e)},showAverage:function(e,t){return Math.ceil(Math.floor(t.maxValue)/2)},disableFormats:!0}]},0,["bp-sliderfield","bp-slider"],["component","box","field","multislider","slider","sliderfield","bp-slider","bp-sliderfield"],{component:!0,box:!0,field:!0,multislider:!0,slider:!0,sliderfield:!0,"bp-slider":!0,"bp-sliderfield":!0},["widget.bp-slider","widget.bp-sliderfield"],0,[BP.view.slider,"Single"],0),Ext.cmd.derive("BP.view.form.field.Radio",Ext.form.field.Radio,{cls:"bp-radiofield",onBoxClick:function(){var e=this;e.disabled||e.readOnly||this.setValue(!this.value)}},0,["bp-radiofield"],["component","box","field","checkboxfield","checkbox","radiofield","radio","bp-radiofield"],{component:!0,box:!0,field:!0,checkboxfield:!0,checkbox:!0,radiofield:!0,radio:!0,"bp-radiofield":!0},["widget.bp-radiofield"],0,[BP.view.form.field,"Radio"],0),Ext.cmd.derive("BP.view.form.chain.ChainType",Ext.form.RadioGroup,{cls:"bp-chain-type",fieldLabel:"Add Chain",defaultType:"bp-radiofield",defaults:{flex:1},vertical:!0,fieldDefaults:{labelAlign:"right",labelSeparator:"",anchor:"70%",labelWidth:70},items:[{boxLabel:"Winning",ui:"green",name:"type",inputValue:"WINNING"},{boxLabel:"Martingale",ui:"green",name:"type",inputValue:"MARTINGALE"}]},0,["bp-chain-type"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup","bp-chain-type"],{component:!0,box:!0,container:!0,fieldcontainer:!0,checkboxgroup:!0,radiogroup:!0,"bp-chain-type":!0},["widget.bp-chain-type"],0,[BP.view.form.chain,"ChainType"],0),Ext.cmd.derive("BP.view.form.field.NumberBox",Ext.form.field.Base,{cls:"bp-numberbox-field",ariaRole:"textbox",childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","nextEl"],minValue:0,maxValue:1,fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" class="{wrapInnerCls} {noBoxLabelCls}" role="presentation">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<table id="{id}" data-ref="inputEl" role="numberbox" class="table-{ui} {fieldCls}-inner">','<tbody><tr role="row">','<tpl for="numbers">','<td role="gridcell">','<div hidefocus="on" class="{parent.gridCellCls}-number"></div>',"</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:!0,compiled:!0}],focusable:!1,readOnly:!0,focusCls:"bp-form-number-numberbox-focus",fieldBodyCls:"bp-form-numberbox-field-body",checkedCls:"bp-form-number-numberbox-cb-checked",boxLabelCls:"x-form-cb-label",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-wrap-inner-no-box-label",fieldCls:"bp-form-number-numberbox-field",htmlEncode:!1,noWrap:!1,validateOnChange:!1,submitValue:!1,baseCls:"bp-numberboxfield",initComponent:function(){var e=this;e.selectedCls=e.baseCls+"-selected",e.disabledCellCls=e.baseCls+"-disabled",e.prevCls=e.baseCls+"-prevday",e.activeCls=e.baseCls+"-active",e.cellCls=e.baseCls+"-cell",e.rtlCls=window.rtlEnable?"x-rtl":"x-ltr",e.nextCls=e.baseCls+"-prevday",e.todayCls=e.baseCls+"-today",Ext.form.field.Base.prototype.initComponent.call(this),e.value=e.value||e.minValue},getValue:function(){return this.value},valueToRaw:function(e){return e||0===e||e===!1?e:""},isDirty:function(){return!1},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(e){var t=this;return e=Ext.valueFrom(e,""),t.rawValue=e,t.rendered&&(t.inputEl.dom.innerHTML=t.getDisplayValue(),t.updateLayout()),e},getDisplayValue:function(){var e,t=this,n=this.getRawValue();return e=t.renderer?t.renderer.call(t.scope||t,n,t):t.htmlEncode?Ext.util.Format.htmlEncode(n):n},getSubTplData:function(){var e=this,t=e.boxLabel,n=e.boxLabelAlign,i="before"===n,r=Array.apply(null,{length:this.maxValue+1}).map(Number.call,Number).slice(this.minValue),o="gridcell";return Ext.apply(Ext.form.field.Base.prototype.getSubTplData.apply(this,arguments),{disabled:e.readOnly||e.disabled,wrapInnerCls:e.wrapInnerCls,boxLabel:t,boxLabelCls:e.boxLabelCls,boxLabelAlign:n,labelAlignedBefore:i,afterLabelCls:i?e.afterLabelCls:"",noBoxLabelCls:t?"":e.noBoxLabelCls,gridCellCls:o,numbers:r})},initEvents:function(){var e=this;Ext.form.field.Base.prototype.initEvents.call(this),e.focusable||e.el.on({mousedown:e.onMouseDown}),e.update(e.value)},update:function(e,t){var n=this,i=n.activeValue;return n.rendered&&(n.activeValue=e,!t&&i&&n.el&&i===e?n.selectedUpdate(e,i):n.fullUpdate(e,i)),n},selectedUpdate:function(){},fullUpdate:function(){var e,t,n,i,r=this,o=r.cells.elements,a=r.textNodes,s=(r.value,0),l=0;for(e=r.value,t=function(t,n){var a=o[t];r.todayCellIndex||null,i=e,a.setAttribute("aria-label",e),a.firstChild.dateValue=i,i===r.value&&(n+=" "+r.selectedCls,r.todayCellIndex=t),n+=t==r.maxValue-1?" bp-last-cell":"",a.className=r.cellCls+" "+n+" "+r.rtlCls};s<r.maxValue;++s)n=s-l+1,a[s].innerHTML=n,e=s+1,t(s,"")},setValue:function(e){return this.value=e,this.update(this.value)},onRender:function(){var e=this,t="div.gridcell-number";(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).apply(this,arguments),e.cells=e.inputEl.select("tbody td"),e.textNodes=e.inputEl.query(t),e.mon(e.inputEl,{scope:e,mousewheel:e.handleMouseWheel,click:{fn:e.handleDateClick,delegate:t}})},handleMouseWheel:function(e){if(e.stopEvent(),!this.disabled){var t=e.getWheelDelta();t>0?this.showNextNumber():0>t&&this.showPrevNumber()}},handleDateClick:function(e,t){var n=this,i=n.handler;e.stopEvent(),n.disabled||!t.dateValue||Ext.fly(t.parentNode).hasCls(n.disabledCellCls)||(n.setValue(t.dateValue),n.fireEvent("select",n,n.value),i&&i.call(n.scope||n,n,n.value))},showPrevNumber:function(){var e=this,t=this.value;return t=--t<e.minValue?e.maxValue:t,this.setValue(t)},showNextNumber:function(){var e=this,t=this.value;return t=++t>e.maxValue?e.minValue:t,this.setValue(t)},getPrevElId:function(){return this.prevEl||(this.prevEl=this.id+"-prevEl")},getMiddleElId:function(){return this.middleEl||(this.middleEl=this.id+"-middleEl")},getNextElId:function(){return this.nextEl||(this.nextEl=this.id+"-nextEl")},privates:{_onDisplayElMouseDown:function(e){e.preventDefault(),this.inputEl.focus(1)},getFocusEl:function(){return this.eventEl},applyRenderSelectors:function(){var e=this;Ext.form.field.Base.prototype.applyRenderSelectors.call(this),e.prevEl||(e.prevEl=e.el.getById(e.getPrevElId())),e.middleEl||(e.middleEl=e.el.getById(e.getMiddleElId())),e.nextEl||(e.nextEl=e.el.getById(e.getNextElId()))}}},0,["numberboxfield"],["component","box","field","numberboxfield"],{component:!0,box:!0,field:!0,numberboxfield:!0},["widget.numberboxfield"],0,[BP.view.form.field,"NumberBox"],0),Ext.cmd.derive("BP.view.form.chain.ChainPanelController",Ext.app.ViewController,{},0,0,0,0,["controller.chain-panel"],0,[BP.view.form.chain,"ChainPanelController"],0),Ext.cmd.derive("BP.view.form.chain.ChainPanelModel",Ext.app.ViewModel,{data:{addChainUrl:"https://www.dukascopy.com/swiss/english/binary-options/what-are-binary-options/chained-option-contracts/",translate:{chainAddLabel:"chain-panel.chain-add",chainContractsLabel:"chain-panel.contracts",chainMartingale:"chain-panel.martingale",chainWinning:"chain-panel.winning"}},formulas:{tplChainUrl:{bind:{chainAddLabel:"{translate.chainAddLabel}",addChainUrl:"{addChainUrl}"},get:function(e){var t=['<a href="{addChainUrl}" target="_blank">{chainAddLabel}</a>'];return Ext.create("Ext.Template",t).apply(e)}}}},0,0,0,0,["viewmodel.chain-panel"],0,[BP.view.form.chain,"ChainPanelModel"],0),Ext.cmd.derive("BP.view.form.chain.ChainPanel",Ext.container.Container,{cls:"bp-chain-panel",controller:"chain-panel",viewModel:"chain-panel",border:!1,fieldDefaults:{labelAlign:"right"},layout:{type:"hbox",align:"top"},initComponent:function(){var e,t=this;e={items:[{xtype:"panel",border:!1,layout:{type:"vbox"},items:[{xtype:"container",layout:{type:"hbox",align:"top"},items:[{xtype:"checkbox",name:"chain-add",listeners:{change:t.onChangeAddChain}},{xtype:"label",disabled:!0,width:80,cls:"chain-checkbox-label",bind:{html:"{tplChainUrl}"}}]},{xtype:"combobox",name:"chain-type",flex:1,width:100,disabled:!0,store:Ext.create("Ext.data.Store",{fields:["abbr","name"],data:[{type:"WINNING",name:"Winning"},{type:"MARTINGALE",name:"Martingale"}]}),queryMode:"local",editable:!1,allowBlank:!1,autoSelect:!0,forceSelection:!0,displayField:"name",value:"WINNING",valueField:"type"}]},{xtype:"numberboxfield",name:"chain-length",labelAlign:"top",disabled:!0,minValue:1,value:1,maxValue:3,margin:"0 0 0 5px",bind:{fieldLabel:"{translate.chainContractsLabel}"},flex:1}]},Ext.apply(t,e),Ext.container.Container.prototype.initComponent.apply(this,arguments)},onChangeAddChain:function(e,t){var n=this,i=n.up().next(),r=n.up("bp-chain-panel").down("numberboxfield");i.setDisabled(!t),r.setDisabled(!t)}},0,["bp-chain-panel"],["component","box","container","bp-chain-panel"],{component:!0,box:!0,container:!0,"bp-chain-panel":!0},["widget.bp-chain-panel"],0,[BP.view.form.chain,"ChainPanel"],0),Ext.cmd.derive("BP.view.form.instrument.Instrument",Ext.form.field.ComboBox,{cls:"bp-instrumentfield",store:"Instruments",displayField:"instrument",valueField:"instrument",queryMode:"local",allowBlank:!1,autoSelect:!0,forceSelection:!0,matchFieldWidth:!1,listeners:{afterrender:function(e){var t=e.getStore();t&&(t.on("updatestore",e.onUpdateStore,e,{buffer:100}),t.on("selectnext",e.selectNext,e))}},onUpdateStore:function(){var e=Ext.getStore("Instruments");this.bindStore(e)},selectNext:function(e){var t,n,i;e&&(t=this.store.snapshot||this.store.data,n=t.items.indexOf(t.map[e]),n=0>n?0:n,i=t.getAt(n+1),i||(i=t.getAt(n-1)),i||(i=t.getAt(0)),this.setValue(i))},constructor:function(){Ext.form.field.ComboBox.prototype.constructor.apply(this,arguments),this.queryFilter=new Ext.util.Filter({scope:this,id:Ext.id(),disabled:!0,root:"data",filterFn:function(e){return e.data.fulltext.toLowerCase()}}),this.store.filter(this.queryFilter)},listConfig:{cls:"bp-grouped-list",width:220},tpl:Ext.create("Ext.XTemplate","{[this.currentKey = null]}","{%this.currentKey=null;this.calculateCount(values)%}",'<tpl for=".">','<tpl if="this.shouldShowHeader(type)">','<div class="group-header">{[this.showHeader(values.type)]}</div>',"</tpl>",'<div class="x-boundlist-item"><span class="instrument-name">{instrument}</span></br><span class="instrument-description">{description}</span></div>',"</tpl>",{calculateCount:function(e){var t,n=e.length;if(this.forex=0,this.cfd=0,n=e.length)for(t=0;n>t;t++)e[t]&&("FX_CCY"==e[t].type&&++this.forex,"CFD"==e[t].type&&++this.cfd)},shouldShowHeader:function(e){return this.currentKey!=e},showHeader:function(e){switch(this.currentKey=e,e){case"FX_CCY":return"Forex ("+this.forex+")";case"CFD":return"CFD ("+ +this.cfd+")"}return"OTHER"}})},1,["bp-instrumentfield"],["component","box","field","textfield","pickerfield","combobox","combo","bp-instrumentfield"],{component:!0,box:!0,field:!0,textfield:!0,pickerfield:!0,combobox:!0,combo:!0,"bp-instrumentfield":!0},["widget.bp-instrumentfield"],0,[BP.view.form.instrument,"Instrument"],0),Ext.cmd.derive("BP.view.panel.trade.Trade",Ext.Panel,{cls:"bp-trade-panel",controller:"trade",viewModel:"trade",border:!1,config:{instrument:null},layout:{animation:"slide",type:"card"},header:{xtype:"bp-switcher",titleAlign:"right",border:!0,listeners:{switcherchange:"onSwitcherChange"}},height:405,headerPosition:"bottom",bodyCls:"bottom-border",bodyBorder:!0,reference:"switcher_panel",panelType:"REG",defaults:{cls:"greybg"},listeners:{afterrender:function(e){var t=this;e.getViewModel().bind("{currency}",function(){t.unmask()})}},initComponent:function(){var e,t=this;e={items:[t.buildSimpleForm(t),t.buildExtendedForm(t)]},Ext.apply(t,e),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},buildTradePanel:function(e){return{preventHeader:!0,hideCollapseTool:!0,collapsible:!0,animCollapse:!0,split:{xtype:"bp-bordersplitter",collapseOnDblClick:!0,collapsible:!0},border:!1,collapseMode:"mini",region:"west",width:255,maxWidth:255,minWidth:255,height:360,items:[{xtype:"panel",reference:"switcher_panel",cls:"switcher-panel",height:405,layout:{animation:"slide",type:"card"},header:{xtype:"bp-switcher",titleAlign:"right",border:!0,listeners:{switcherchange:"onSwitcherChange"}},headerPosition:"bottom",defaults:{cls:"greybg"},bodyCls:"bottom-border",border:!1,bodyBorder:!0,items:[e.buildSimpleForm(e),e.buildExtendedForm(e)]}]}},buildSimpleForm:function(){return{xtype:"panel",itemId:"simple",bodyPadding:5,border:!1,layout:{type:"vbox",align:"stretch",pack:"start"},items:[{xtype:"bp-instrument-ticker",name:"binary-ticker",listeners:{trade:"onCreate"}},{xtype:"component",margin:"5 0 0 0",style:"border-top: 1px solid #D7D7D7"},{xtype:"form",reference:"simple_form",width:255,bodyPadding:5,border:!1,layout:"anchor",cls:"simpleForm",fieldDefaults:{labelAlign:"right",labelSeparator:"",anchor:"100%",labelWidth:100},items:[{xtype:"bp-instrumentfield",referenceHolder:!0,bind:{fieldLabel:"{translate.tradePanelInstrumentSelector}",store:"{instruments}",value:"{instrument}"},listeners:{change:"onSimpleInstrumentSelect"}},{itemId:"amount",referenceHolder:!0,xtype:"bp-amountfield",name:"amount",listeners:{change:"onSimpleAmountChange"}},{xtype:"bp-time",name:"duration",referenceHolder:!0,bind:{fieldLabel:"{translate.durationFieldLabel}"}},{xtype:"bp-payout-refund-selector",referenceHolder:!0,bind:{store:"{payoutRefund}",fieldLabel:"{translate.payoutRefundFieldLabel}",value:"{payoutRefundValue}"},listeners:{change:"onSimplePayoutRefundSelect"}},{xtype:"bp-chain-panel"},{border:!1,xtype:"component",bind:{html:"{tplLinkFieldLabel}"},flex:1}]}]}},buildExtendedForm:function(){return{xtype:"form",itemId:"extended",width:255,reference:"extended_form",cls:"extended_form",border:!1,bodyPadding:5,layout:"anchor",fieldDefaults:{labelAlign:"left",labelSeparator:"",anchor:"100%",labelWidth:90},items:[{xtype:"radiogroup",name:"types",padding:"0 0 0 2",items:[{bind:{boxLabel:"&nbsp;{translate.boxLabelUpCall}"},name:"type",inputValue:"CALL",boxLabelCls:"x-form-cb-label bp-up"},{bind:{boxLabel:"&nbsp;{translate.boxLabelDownPut}"},name:"type",inputValue:"PUT",boxLabelCls:"x-form-cb-label bp-down"}],allowBlank:!1,listeners:{change:"onTypeRadioGroupChange"}},{xtype:"bp-instrumentfield",name:"instrument",
bind:{fieldLabel:"{translate.tradePanelInstrumentSelector}",store:"{instruments}",value:"{instrument}"},listeners:{change:"onExtendedInstrumentSelect"}},{xtype:"bp-amountfield",name:"amount",listeners:{change:"onExtendedAmountChange"}},{xtype:"bp-datetime"},{xtype:"bp-conditions"},{xtype:"button",margin:"10px 0 0 0",action:"order",bind:{text:"{translate.sendOrderButton}"},cls:"bp-panding-btn",disabled:!0,scale:"medium",listeners:{click:"orderConfirmation"}}]}},selectInstrument:function(e){var t=this.down("bp-instrumentfield");if(!t)return!1;var n=t.getStore().getById(e);n&&t.select(n)},updateInstrument:function(e,t){var n,i=this,r=BP.app.getController("Subscribe"),o=Ext.getStore("Instruments"),a=Ext.ComponentQuery.query('bp-market-chart-ui[name="main-chart"]')[0];e&&r.onSubscribed([e.getId()]),t&&r.onUnsubscribed([t.getId()]),Ext.suspendLayouts(),setTimeout(function(){n=o.getById(e.getId()),n&&i.down("bp-instrument-ticker").updateInstrument(n),a&&a.updateInstrument(e),i.down("bp-time").getController().updateInstrument(e),i.down("bp-datetime").getController().updateInstrument(e)},200),Ext.resumeLayouts(!1)},onMarketTick:function(){var e=this;BP.localSettings.get("read_only")&&e.down("radiogroup").setDisabled(!0)},onMarketTickAggregate:function(e,t){var n=this,i=n.down("bp-market-chart-ui");i&&i.getController().onAddTicks(e,t)},notTradable:!1,setNotTradable:function(e,t){if(this.notTradable!=e){t=t||BP.translate("msg.not-tradable"),this.notTradable=e;var n=this,i=n.down("bp-instrument-ticker"),r=n.down("#maskSelector");n.setTradeDisabled(e),e?(i.getEl().mask(t,"mask-below-menu"),r.mask(t,"mask-below-menu")):(i.getEl().unmask(),r.getEl().unmask())}},tradeDisabled:!0,setTradeDisabled:function(e){var t=this,n=t.down('radiogroup[name="types"]'),i=t.down('button[action="order"]');t.down("bp-instrument-ticker").setDisabled(e),n.setDisabled(e),e?i.setDisabled(!0):Ext.isDefined(n.getValue().type)&&i.setDisabled(!1)},setTheme_:function(e){var t=this,e=e||"default",n=BP.ux.component.Util,i=t.query("textfield");i.length,n.setUi(t,e,!0)}},0,["bp-trade-panel"],["component","box","container","panel","bp-trade-panel"],{component:!0,box:!0,container:!0,panel:!0,"bp-trade-panel":!0},["widget.bp-trade-panel"],0,[BP.view.panel.trade,"Trade"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.panel.touch.TouchController",Ext.app.ViewController,{active:!0,models:["SettlementInfo"],listen:{component:{"bp-touch-panel":{beforerender:"onTouchPanelBeforeRender",afterrender:"onTouchPanelAfterRender",boxready:"onTouchPanelBoxReady"},"bp-instrument-ticker":{afterrender:"onAfterRenderInstrumentTicker"},'bp-numberfield[name="strike-distance"]':{afterrender:"onAfterRenderStrikePanel",change:"onChangeStrikeDistance"},'displayfield[name="expiration-time"]':{afterrender:"setDefaultExpirationTime"}}},init:function(){var e=this,t={touchForm:this.getView(),simpleForm:e.lookupReference("form"),tradeButton:e.lookupReference("tradeButton"),touchTicker:this.getView().down("bp-instrument-ticker"),touchTime:this.getView().down("bp-touchtime"),chartUI:this.getView().down("bp-market-chart-ui"),strikeDistance:this.getView().down('bp-numberfield[name="strike-distance"]'),expirationTime:this.getView().down('displayfield[name="expiration-time"]'),chainAdd:this.getView().down('bp-chain-panel checkbox[name="chain-add"]'),chainType:this.getView().down('bp-chain-panel combobox[name="chain-type"]'),chainLength:this.getView().down('bp-chain-panel numberboxfield[name="chain-length"]'),gainLevel:this.getView().down('label[name="gain-level-distance-pips"]')};BP.model.Account.on("datachange",e.setDefaultAccount,e),BP.model.SettlementInfo.on("datachange",e.setDefaultExpirationTime,e),Ext.getStore("Instruments").on("update",e.changeInstrument,e),e.transport=BP.getTransport(),Ext.apply(e,t),Ext.app.ViewController.prototype.init.apply(this,arguments)},onTouchPanelBeforeRender:function(e){var t,n,i,r,o;t=e.getViewModel(),n=BP.localSettings.get("defaultAmount"),i=BP.localSettings.get("min_trade_amount"),r=BP.localSettings.get("max_trade_amount"),o=BP.localSettings.get("min_trade_amount"),t&&(t.set("currency",BP.localSettings.get("balance_currency")),t.set("defaultAmount",n),t.set("minTradeAmount",i),t.set("maxTradeAmount",r),t.set("incrementAmount",o))},onTouchPanelAfterRender:function(e){var t,n,i,r,o,a,s,l;if(t=e.getViewModel(),i=Ext.getStore("Instruments"),r=t.getStore("instruments"),n=BP.localSettings.get("defaultInstrument"),o=Ext.Array.clone(BP.localSettings.get("defaultInstruments")||[]),s=0,o.indexOf(n)>-1&&o.push(n),o=Ext.Array.unique(o),a=o.length,t&&t.set("instrument",n),Ext.suspendLayouts(),r.suspendEvents(),a>1){for(s;a>s;s++)l=i.data.map[o[s]].clone(),r.insert(s,l),l=null;return r.resumeEvents(),void Ext.resumeLayouts(!1)}i.each(function(e){var t=e.copy();r.add(t)}),r.resumeEvents(),Ext.resumeLayouts(!1)},onTouchPanelBoxReady:function(e){var t=this;t.setDefaultPayout(),t.setDefaultAmount(),t.disableTradingForEU(e)},onAfterRenderInstrumentTicker:function(){var e=this;BP.app.getController("MarketTickManager").on({scope:e,destroyable:!0,tick:this.onMarketTick}),BP.app.getController("InstrumentManager").on({scope:e,destroyable:!0,instrumentstatusupdate:this.onUpdateInstrumentStatus})},setDefaultAccount:function(e){var t=this,n=t.getView(),i=n.getViewModel();i.set("currency",e.get("currency"))},disableTradingForEU:function(e){var t=new Date,n=new Date(2018,5,14),i=new Date(2018,5,19),r=new Date(2018,5,30);"europe"==BP.whiteLabel&&"PRE"==BP.config("instance")&&t>n?e.setTradeDisabled(!0):"europe"==BP.whiteLabel&&"DEMO"==BP.config("instance")&&t>i?e.setTradeDisabled(!0):"europe"==BP.whiteLabel&&"LIVE"==BP.config("instance")&&t>r&&e.setTradeDisabled(!0)},changeInstrument:function(){},onChangeStrike:function(e,t){var n,i,r,o=e.getEl().dom.querySelectorAll('[data-ref="inputWrap"]')[0];null!==t&&(t?t>e.maxValue&&e.setValue(e.maxValue):e.setValue(e.minValue),n=10>t?14:t>=10&&100>t?21:t>=100?27:14,i=o.getAttribute("style"),r="width: "+n+"px;",i!==r&&o.setAttribute("style",r))},onStrikeBlur:function(e){var t,n=e.getValue();n=n<e.minValue?e.minValue:n,t=Ext.Number.snap(n,e.getStep(),e.minValue,e.maxValue),e.setValue(t)},onChainToggle:function(e,t){var n=this;n.chainType.setDisabled(!t),n.chainLength.setDisabled(!t)},setDefaultPayout:function(){var e,t,n,i,r,o,a,s,l=this;e=l.getView(),t=e.getViewModel(),n=Ext.getStore("Payouts"),o=e.getInstrument(),a=o?o.getId():"default",i=t.getStore("payoutRefund"),s=n.getByType("TOUCH"),s&&(Ext.suspendLayouts(),i.suspendEvents(),i.removeAll(),i.insert(0,s),i.resumeEvents(),Ext.resumeLayouts(!1)),l.filterPayoutStoreByType(i,a),r=i.data,i.data&&t.set("payoutRefundValue",r.getAt(0)),n.hasListener("touchpayoutrate")||n.on("touchpayoutrate",l.setDefaultPayout,l)},filterPayoutStoreByType:function(e,t){var n;e.isFiltered()&&e.clearFilter(!0),n=e.collect("instrument"),e.filter("instrument",-1!==n.indexOf(t)?t:"default")},setDefaultExpirationTime:function(){var e=this,t=e.getView(),n=t.getViewModel(),i=BP.model.SettlementInfo,r=i.data;n.set("expirationTime",r.nextSettlementTime||new Date)},setDefaultAmount:function(){var e,t=this,n=t.getView(),i=n.getViewModel(),r=Ext.getStore("Amounts"),o=n.getInstrument(),a=o?o.getId():"default",s=r.data.map["TOUCH_"+a]||r.data.map.TOUCH_default;i&&s&&(e=Ext.Number.snap(s.get("minTradeAmount"),s.get("incrementAmount")||i.get("incrementAmount"),s.get("minTradeAmount"),s.get("maxTradeAmount")),i.set("incrementAmount",s.get("incrementAmount")||i.get("incrementAmount")),i.set("minTradeAmount",s.get("minTradeAmount")||i.get("minTradeAmount")),i.set("maxTradeAmount",s.get("maxTradeAmount")||i.get("maxTradeAmount")),i.set("defaultAmount",e)),r.hasListener("touchbioamount")||r.on("touchbioamount",t.setDefaultAmount,t)},setDefaultStrikes:function(){var e=this,t=e.getView(),n=t.getViewModel(),i=Ext.getStore("Strikes"),r=t.getInstrument(),o=r?r.getId():"default",a=i.data.map["TOUCH_"+o]||i.data.map.TOUCH_default;n&&a&&(n.set("minStrikeDistance",a.get("minStrikeDistance")||n.get("minStrikeDistance")),n.set("maxStrikeDistance",a.get("maxStrikeDistance")||n.get("maxStrikeDistance")),n.set("defaultStrike",a.get("minStrikeDistance")||n.get("minStrikeDistance")),e.strikeDistance.setMinValue(a.get("minStrikeDistance")),e.strikeDistance.setMaxValue(a.get("maxStrikeDistance")),e.strikeDistance.setValue(a.get("minStrikeDistance"))),i.hasListener("touchbiostrike")||i.on("touchbiostrike",e.setDefaultStrikes,e)},onInstrumentSelect:function(e,t){if(t)var n=e.getStore().getById(t);n&&this.getView().setInstrument(n),this.setDefaultPayout(),this.setDefaultAmount(),this.setDefaultStrikes(),this.onModalWindowChartUpdate(t)},onModalWindowChartUpdate:function(e){var t=BP.app.getController("Window");if(t.modals){var n=t.modals[1],i=n.Ext,r=Ext.ComponentQuery.query("bp-market-chart-ui")[0],o=(r.chart.serialize(),i.ComponentQuery.query("bp-window-chart-ui")[0]);o&&(o.chart.setInstrument(e),o.chart.reload(),n.document.title=e)}},onCreate:function(e){var t=this,e=e.toUpperCase(),n=t.createOrderDetails(e);BP.localSettings.get("noConfirmTrade")?t.postOrder(n):BP.MessageBox.confirmorder(BP.translate("trade-panel.order_confirm_title"),t.createOrderMsg(n),function(e){"yes"===e&&t.postOrder(n)})},createOrderDetails:function(e){var t=this,n=t.getView().getInstrument(),i=t.touchForm,r=i.down("bp-payout-refund-selector").getSelectedRecord(),o=i.down('numberfield[name="amount"]'),a=t.strikeDistance.getValue(),s=t.chainAdd.getValue(),l={orderType:"TOUCH",optionType:e,instrument:n.getId(),amount:o.getValue(),side:"BUY",payOutPerc:r.get("payout"),refundPercent:r.get("refund"),touchDistance:a};return s&&(l.chainLength=t.chainLength.getValue(),l.chainType=t.chainType.getValue()),l},createOrderMsg:function(e){var t=Ext.merge({optionTypeLabel:BP.translate("trade-panel."+e.optionType.toLowerCase()),currency:BP.localSettings.get("balance_currency"),instrumentLabel:BP.translate("order-details.instrument-label"),payoutRefundLabel:BP.translate("trade-panel.payout_refund"),confirmMessage:BP.translate("trade-panel.order_confirm_message"),revokeTimeSec:BP.model.Account.get("revokeTimeSec"),distanceLabel:BP.translate("touch-panel.strike-distance-field"),addedChain:BP.translate("trade-panel.order_added-chain"),contractsChain:BP.translate("trade-panel.order_contracts-chain"),distanceValue:e.touchDistance+" pips"},e),n=["{optionTypeLabel} {amount} {currency}{a}<br />","{instrumentLabel} {instrument} <br />","{payoutRefundLabel} {payOutPerc}% - {refundPercent}% <br />","{distanceLabel} {distanceValue}","{[this.hasChainMessage(values)]}","{[this.hasChainWarningMessage(values)]}",'<p class="confirm-message">{confirmMessage}</p>',"</div>",{duration:function(e){return BP.util.Format.secondsToTime(60*e)},hasChainMessage:function(e){return e.chainLength?Ext.String.format("<br />{0} {1}<br />{2} {3}",e.addedChain,BP.util.Format.firstToUpperCase(e.chainType),e.contractsChain,e.chainLength):void 0},hasChainWarningMessage:function(e){if("MARTINGALE"==e.chainType){var t=e.amount*((1-Math.pow(2,e.chainLength+1))/-1);return Ext.String.format('<h4 class="chain-warning">'+BP.translate("chain-panel.order-warning-label")+"</h4>"+BP.translate("chain-panel.order-warning-message"),t,e.currency)}}}];return Ext.create("Ext.XTemplate",n).apply(t)},isValidOrder:function(e){var t=Ext.getStore("Instruments"),n=t.getById(e.instrument),i=BP.model.SettlementInfo,r=Ext.getStore("Durations"),o=r.getById("TOUCH_"+n)||r.getById("TOUCH_default");return Ext.Date.diff(BP.util.Clock.getTimestamp(),i.get("nextSettlementTime"),"MINUTE")>=o.get("minContractDuration")?!0:e.touchDistance?!0:(BP.util.PopupMessage.show(BP.translate("trade-panel.order_cannot_be_accepted"),BP.translate("touch-panel.touch-strike-price-invalid")),!1)},postOrder:function(e){this.simpleForm.isValid()&&(this.isValidOrder(e)&&this.transport.order(e),BP.getApplication().getController("LoggerManager").onMessage({message:"order "+Ext.encode(e),type:"trade"}))},onAfterRenderStrikePanel:function(e){e.on("click",Ext.pass(this.onShowSymmetricTooltip,[this]),e,{element:"el",delegate:"i.external-chart",buffer:1,stopEvent:!0})},onShowSymmetricTooltip:function(e,t,n){var i=(Ext.get(n),e.view),r=i.getInstrument(),o=i.getSettings(),a=Ext.ComponentQuery.query('panel[name="tab-panel"]')[0],s=Ext.ComponentQuery.query("bp-symmetric-tooltip")[0],l=a.width+10,d=t.pageY-20;r&&(s||Ext.widget("bp-symmetric-tooltip",{x:l,y:d,settings:o,listeners:{scope:e}}))},onAmountChange:function(e,t){var n=t;null!==n&&(n?n>e.maxValue&&e.setValue(e.maxValue):e.setValue(e.minValue))},onCloseSymmetricTooltip:function(){var e=Ext.ComponentQuery.query("bp-symmetric-tooltip")[0];e&&e.close()},onToggleCls:function(e,t){"none"!=this.touchTicker.getValue()&&t.toggleCls("disabled")},onChangeStrikeDistance:function(){this.updateSymmetricTooltip()},updateSymmetricTooltip:function(){var e,t,n=this,i=n.getView();e=Ext.ComponentQuery.query("bp-symmetric-tooltip")[0],e&&(t=i.getSettings(),e.updateSettings(t))},onMarketTick:function(e){var t=this,n=t.getView(),i=n.down("bp-instrument-ticker"),r=n.down("bp-market-chart-ui"),o=n.getInstrument(),a=o?o.getId():!1;a===e.get("instrument")&&(i.updateMarketTick(e),r&&r.getController().onRealMarketTick(e),t.updateSymmetricTooltip())},onUpdateInstrumentStatus:function(e,t){var n=this,i=n.getView(),r=i.down("bp-instrument-ticker"),o=i.getInstrument(),a=o?o.getId():!1;a===e&&r.setNotTradable(t)},showOrderDetails:function(e){var t=Ext.widget("bp-window-order-details");t.setOrder(e)},isUsed:function(e){var t=this,n=t.getView(),i=n.getInstrument(),r=i?i.getId():!1;return r?r==e:!1},setOrdersToChart:function(){var e=Ext.getStore("ExecutingOrders"),t=Ext.ComponentQuery.query("executing-order-grid")[0];t&&t.getController().onOrdersAdd(e,e.data.items)},removeOrdersToChart:function(){var e=Ext.getStore("ExecutingOrders"),t=Ext.ComponentQuery.query("executing-order-grid")[0];t&&t.getController().onOrdersRemove(e,e.data.items)},activateEvent:function(){var e=this,t=e.getView(),n=t.down("bp-market-chart-ui");e.active=!0,setTimeout(function(){n.getController().onLoadTicks(),e.setOrdersToChart()},1e3),n.chartUI&&n.chartUI.resize()},suspendEvent:function(){var e=this;e.active=!1,e.onCloseSymmetricTooltip()}},0,0,0,0,["controller.touch"],0,[BP.view.panel.touch,"TouchController"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.panel.touch.TouchModel",Ext.app.ViewModel,{data:{instrument:"EUR/USD",currency:"",defaultAmount:0,minTradeAmount:0,maxTradeAmount:1,defaultStrike:1,minStrikeDistance:1,maxStrikeDistance:100,incrementAmount:1,payoutRefundValue:"90_0",expirationTime:"",translate:{touchTabTitle:"touch-panel.tab-name",tradePanelInstrumentSelector:"trade-panel.instrument-selector",amountFieldLabel:"trade-panel.amount-field",payoutRefundFieldLabel:"trade-panel.payout-refund",durationFieldLabel:"trade-panel.duration",strikeDistanceField:"touch-panel.strike-distance-field",shortHourSymbol:"trade-panel.short-hour",shortMinutesSymbol:"trade-panel.short-minutes",expirationTimeField:"touch-panel.touch-expiration-time",strikeDistanceFieldHelp:"Show on chart "}},formulas:{tradeAmountValue:function(e){return e(e("defaultAmount")<e("minTradeAmount")?"minTradeAmount":"defaultAmount")},tplAmountFieldLabel:{bind:{currency:"{currency}",amountFieldLabel:"{translate.amountFieldLabel}"},get:function(e){var t=["{amountFieldLabel} ({currency})</span>"];return Ext.create("Ext.XTemplate",t).apply(e)}},tplAmountTooltip:{bind:{defaultAmount:"{defaultAmount}",minTradeAmount:"{minTradeAmount}",maxTradeAmount:"{maxTradeAmount}"},get:function(e){var t=["The value for this field must be in the range: {minTradeAmount} - {maxTradeAmount}</span>"];return Ext.create("Ext.XTemplate",t).apply(e)}},tplStrikeDistanceTitle:{bind:{strikeDistanceField:"{translate.strikeDistanceField}"},get:function(e){var t=['{strikeDistanceField} <i class="fa fa-external-link external-chart" aria-hidden="true"></i>'];return Ext.create("Ext.XTemplate",t).apply(e)}},tplExpirationTime:{bind:{expirationTime:"{expirationTime}"},get:function(e){e.rtlCls=window.rtlEnable?"x-rtl":"x-ltr";var t=['<i style="" class="expected-expire-tips fa fa-info-circle" data-qtip="Expected expiry"></i>','<span class="expected-time {rtlCls}">{[BP.util.Format.gmtTimeString(values.expirationTime)]} </span>'];return Ext.create("Ext.XTemplate",t).apply(e)}},tplStrikeDistanceTooltip:{bind:{minStrikeDistance:"{minStrikeDistance}",maxStrikeDistance:"{maxStrikeDistance}"},get:function(e){var t=["The value for this field must be in the range: {minStrikeDistance} - {maxStrikeDistance}</span>"];return Ext.create("Ext.XTemplate",t).apply(e)}}},stores:{instruments:{model:"Instrument",groupField:"type",sorters:[{property:"position",direction:"ASC"}]},payoutRefund:{model:"Payout",sorters:[{property:"payout",direction:"DESC"}]},bioAmount:{model:"Amount"}}},0,0,0,0,["viewmodel.touch"],0,[BP.view.panel.touch,"TouchModel"],0),Ext.cmd.derive("BP.view.panel.touch.window.SymmetricTooltipUIModel",Ext.app.ViewModel,{data:{translate:{symmetricTooltipTitle:"touch-panel.chart-tooltip-title"}},formulas:{tplWindowTargetChartTitle:{bind:{chartTitle:"{translate.symmetricTooltipTitle}"},get:function(e){var t=["<span>{chartTitle}</span>"];return Ext.create("Ext.Template",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-symmetric-tooltip"],0,[BP.view.panel.touch.window,"SymmetricTooltipUIModel"],0),Ext.cmd.derive("BP.view.panel.touch.window.SymmetricTooltipUIController",Ext.app.ViewController,{listen:{component:{"bp-symmetric-tooltip":{afterrender:"onAfterRender",browserwindowresize:"onBrowserWindowResize",beforeshow:"onBeforeShow",show:"onShow",boxready:"onBoxReady",close:"onWindowClose"}}},onAfterRender:function(e){var t;t=e.getViewModel()},onBrowserWindowResize:function(e){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;(1100>t||690>n)&&e.close()},onBeforeShow:function(){},onShow:function(e){!e.anim||e.getEl().setVisible(!0,e.anim)},onBoxReady:function(e){var t=e.el.dom.querySelectorAll('[data-ref="iconEl"]')[0];t&&t.setAttribute("style",window.rtlEnable?"margin-right: -28px;":"margin-left: -31px;")},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()},onWindowFullScreen:function(e,t,n,i){var r,o;r=i.up("window"),o=r.maximized?"restore":"maximize",r[o]()},onWindowClose:function(e){var t=e.down("bp-chart-tooltip-ui");t.fireEvent("destroy",t)},onSideChange:function(e){this.view.updateSettings({side:e})}},0,0,0,0,["controller.bp-symmetric-tooltip"],0,[BP.view.panel.touch.window,"SymmetricTooltipUIController"],0),Ext.cmd.derive("BP.view.panel.touch.window.chart.ChartTooltipUIController",Ext.app.ViewController,{ticks:[],init:function(){this.initRealNameInstruments(),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-chart-tooltip-ui":{beforerender:"onBeforeRenderMarketChartUI",afterrender:"onAfterRenderMarketChartUI",boxready:"onBoxReadyMarketChartUI",resize:"onResizeChartUI",initchartui:"onInitChartUI",beforechangeinstrument:{fn:"onBeforeChangeInstrument",buffer:50},afterchangeinstrument:{fn:"onAfterChangeInstrument",buffer:50},destroy:"onDestroyChart"}}},onBeforeRenderMarketChartUI:function(e){var t;return e.currentDate||(e.currentDate=new Date),e.currency||(t=BP.localSettings.get("defaultInstrument"),e.currency=t),e.keyCurrency=e.keyCurrency||this.getRealNameInstruments(e.currency),e.period||(e.period="ONE_MIN"),e.availableInstruments||(e.availableInstruments=this.getAvailableInstruments()),e.offerSide||(e.offerSide=BP.localSettings.get("defaultChartOfferSide")),e.presentationType||(e.presentationType="CANDLE"),e.platformTheme||(e.platformTheme=e.getTheme()),!0},onBoxReadyMarketChartUI:function(e){e.chartUI||(e.initChartUI(),this.doInitChartEvents.call(this,e),e.initChart())},onInitChartUI:function(){},getAvailableInstruments:function(){var e,t=this,n=BP.localSettings.get("defaultInstruments"),i=BP.localSettings.get("defaultInstrument");return n&&n.length?(n.push(i),e=n.map(this.getRealNameInstruments,t),Ext.Array.unique(e)):t.getInstrumentsFromStore()},getInstrumentsFromStore:function(){var e=this,t=(BP.localSettings.get("defaultInstruments"),BP.localSettings.get("defaultInstrument"),Ext.getStore("Instruments")),n=[];return t.data.each(function(e){n.push(e.get("instrument"))}),n.map(this.getRealNameInstruments,e)},onAfterRenderMarketChartUI:function(){BP.app.getController("MarketTickManager").on("tick",this.onRealMarketTick,this)},onResizeChartUI:function(e){e.chartUI&&e.chartUI.resize(),e.chart&&e.chart.resize()},doInitChartEvents:function(e){if(e.chart){var t;t=new Ext.Element(e.chart),t.on({changeinstrument:Ext.pass(this.onChangeChartInstrument,[this]),changetimezone:Ext.pass(this.onChangeTimeZone,[this]),dataload:this.onDataLoad,init:Ext.pass(this.onInit,[this]),loaded:Ext.pass(this.onLoadIndicatorSettings,[this]),scope:e,delegated:!1,single:!1})}},onChangeChartInstrument:function(){if(this.chart&&this.chartUI){var e=this.chart.getInstrument();this.currency=e.getName(),this.keyCurrency=e.getId()}},onChartUIChangeInstrument:function(e,t){var n=this;e.initialized&&e.chart&&t&&e.currency&&(e.keyCurrency=this.getRealNameInstruments(e.currency),Ext.defer(n._setInstrument,100,e,[e.keyCurrency]))},onBeforeChangeInstrument:function(e,t,n){var i=this;BP.app.getController("MarketTickManager").un("tick",i.onRealMarketTick,i),e.initialized&&e.chart&&n&&e.currency&&(e.keyCurrency=this.getRealNameInstruments(e.currency),Ext.defer(i._setInstrument,0,e,[e.keyCurrency]))},onAfterChangeInstrument:function(){var e=this;BP.app.getController("MarketTickManager").on("tick",e.onRealMarketTick,e)},_setInstrument:function(e){var t=this;t.chart.setInstrument(e),t.chart.setAutoShift(!0),t.chart.reload()},onLoadIndicatorSettings:function(){this.unmask(),this.chart&&!this.chartUI},onRemoveIndicatorSettings:function(){this.chart&&!this.chartUI},onChangePeriod:function(){var e=this.chart.getPeriod();e.name&&(this.period=e.name)},onChangeOfferSide:function(){},onChangePresentationType:function(){},onChangeInstrument:function(){this.chartUI.resize(),this.chart.resize()},onDataLoad:function(){},onInit:function(e){this.chartUI&&this.chartUI.resize(),this.chart&&this.chart.resize(),this.initialized||(this.initialized=!0,this.chart&&e.onInitTimeZone.call(this),this.prOrderObjects&&(this.initPrepareOrder(this.prOrderObjects),delete this.prOrderObjects))},onReload:function(){},initRealNameInstruments:function(){var e,t;this.realNameInstruments={},Ext.isFunction(BP.Bootstrap.getChartInstruments)&&(e=BP.Bootstrap.getChartInstruments()||{},e=e.instruments||{});for(t in e)e[t]&&(this.realNameInstruments[e[t].name]=t)},getRealNameInstruments:function(e){var t;return t=BP.localSettings.get("defaultInstrument"),e?(this.realNameInstruments=this.realNameInstruments||{},this.realNameInstruments[e]?this.realNameInstruments[e]:t):t},onInitTimeZone:function(){var e,t,n=0;e=BP.localSettings.get("localTime"),t=new Date,e===!0&&(n=t.getTimezoneOffset()),this.chart&&Ext.isFunction(this.chart.setTimezone)&&this.chart.setTimezone(n)},onChangeTimeZone:function(e){var t,n,i=0;t=BP.localSettings.get("localTime"),n=new Date,t===!0&&(i=n.getTimezoneOffset()),BP.localSettings.set("localTime",!!this.chart.getTimezone().getTimeZoneData().std_offset),e.publish("changetimezone",t)},onRealMarketTick:function(e){var t,n,i,r=this,o=r.getView();if(o.chart&&(t=o.chart.getInstrument(),(t||t.getTitle())&&o.initialized&&e.get("bidPrice")&&e.get("askPrice")&&o.currency===e.get("instrument")&&t.getTitle()===e.get("instrument")&&Ext.isFunction(o.chart.getTransport)&&(n=o.chart.getTransport()))){try{i=o.chart.getOptions()}catch(a){i=null}if(i&&!i.live&&o.chart.getDataProvider().peek())try{setTimeout(function(){n.tick(e.get("timestamp"),e.get("bidPrice"),e.get("askPrice"),e.get("askAmount"),e.get("bidAmount"))},0)}catch(a){}}},isUsed:function(e){var t,n=this;return t=n.getView(),t?t.currency==e:void 0},setActiveOrder:function(e){e.updatePrepareOrder({})},onDestroyChart:function(e){e.chartUI&&e.chartUI.destroy()}},0,0,0,0,["controller.bp-chart-tooltip-ui"],0,[BP.view.panel.touch.window.chart,"ChartTooltipUIController"],0),Ext.cmd.derive("BP.view.panel.touch.window.chart.ChartTooltipUI",Ext.panel.Panel,{cls:"bp-chart-tooltip-ui",rtl:!1,controller:"bp-chart-tooltip-ui",layout:{type:"fit"},chartContextMenu:!1,contextMenuCfg:{shadow:!1,delayMouseLeave:1e3},contextMenuItemsCfg:{saveSettingsForInstrument:{xtype:"menuitem",text:"SAVE SETTINGS FOR INSTRUMENT",iconCls:"fa fa-info-circle"},saveSettingsForAllInstruments:{xtype:"menuitem",text:"SAVE SETTINGS FOR ALL INSTRUMENTS",iconCls:"fa fa-info-circle"}},border:!1,header:!1,orderObjects:{},initChartUI:function(){window.dc&&(this.doCreateChartUI(),this.configureChartUIOptions(),this.configureChartUI(),this.doRenderChartUI(),this.doCreateChart(),this.configureChart())},initChart:function(){this.chart.init()},doCreateChartUI:function(){window.dc&&(this.chartUI=new window.dc.ChartUI)},doCreateChart:function(){window.dc&&(this.chartUI||this.doRenderChartUI(),this.chart=this.chartUI.getChart())},doRenderChartUI:function(){window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.render(this.body.el.dom))},configureChartUIOptions:function(){var e;e=BP.config("freeserv.api")||"https://freeserv.dukascopy.com/2.0/",e=(e+"").replace(/(https:\/\/|http:\/\/)/,"//"),window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.appendChartOptions({instrument:this.keyCurrency,showUI:!0,allowPeriodChange:!1,allowOfferSideChange:!1,showDetachButton:!0,filter:dc.Filter.ALL_FLATS,axisX:!0,axisY:!0,includeDrawingsInScale:!0,timeline:!1,panOffset:5,presentationType:dc.PresentationType[this.presentationType],lineMethod:dc.LineMethod.MEDIAN,period:dc.Period[this.period],dataType:"TICK"==this.period?dc.DataType.TICK:dc.DataType.CANDLE,offerSide:dc.OfferSide[this.offerSide],theme:"dark"==this.platformTheme?dc.Theme.Predefined.Dark:dc.Theme.Predefined.Pastelle,live:!1,liveEmulation:!1,preload:!0,dataServerURI:e+"index.php?path=chart/json3",activity:!1,activitySync:!1,activitySyncId:"binary-web"}))},configureChartUI:function(){window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.showUI(!1),this.chartUI.showTabs(!1),this.chartUI.showLogo(!1),this.chartUI.showObjectPane(!1),this.chartUI.showOnlineNewsButton(!1),this.chartUI.showInstrumentSelect(!1),this.chartUI.showLiveButton(!1),this.chartUI.watermarkImage(null),function(e){var t=e.prepareInstruments();e.chartUI.instrumentTransport(function(e,n){n(t)})}(this),this.chartUI.showPanDialog(!1),this.chartUI.showNewsButton(!1),this.chartUI.showContextMenu(!1),this.chartUI.setMenuOutwards(!0),this.chartUI.allowInstrumentChange(!1),this.chartUI.showDetachButton(!1),this.chartUI.allowChartWorkspaceImport(!1),this.chartUI.allowChartWorkspaceExport(!1),this.chartUI.allowSocialSharing(!1),this.chartUI.showAdditionalToolbar(!1))},configureChart:function(){window.dc&&(this.chart||this.doCreateChart(),this.chart=this.chartUI.getChart(),this.chart.getTheme().setValueLabelBackground("#3BAE14"),this.chart.getTheme().setLastValueTrackingLineColor("#3BAE14"),this.chart.setAutoShift(!0),this.chart.setPanOffset(50),this.chart.setFreeMode(!1),Ext.isIE&&(this.chart.attachEvent=this.chart.addEventListener))},updateSettings:function(e){var t=this;(t.chart||t.chartUI)&&(t.updateInstrument(e.instrument),t.updateOfferSide(e.offerSide),t.updatePrepareOrder(e))},updateInstrument:function(e){var t,n=Ext.getStore("Instruments");n&&(t=n.getById(this.currency),this.currency!=e.id&&t&&e&&(this.currency=e.id,this.fireEvent("beforechangeinstrument",this,t,e),Ext.defer(this.fireEvent,1500,this,["afterchangeinstrument",this,e])))},updateOfferSide:function(e){this.chart.getOfferSide()!==e&&(this.chart.setOfferSide(e),this.chart.reload())},initPrepareOrder:function(e){var t=this,n=t.chart.getChartObjectMonitor(),i=new dc.drawing.Rectangle([{time:e.startTime,value:+e.gainLevel},{time:e.endTime,value:+e.loseLevel}]);i.setStrokeOpacity(0),i.setColor("#0000ff"),i.setPickable(!1),i.setSystemUseOnly(!0),i.setTopBottomBorderColor("#ff0000","#00bd00"),e.distance>=e.minDistance&&e.distance<=e.maxDistance?(i.setFillOpacity(.05),i.setTopBottomBorderWidth(1,1)):(i.setFillOpacity(0),i.setTopBottomBorderWidth(0,0)),n.addObject(i),t.orderObjects=i},updatePrepareOrder:function(e){var t=this,n=t.orderObjects;0!==Object.keys(n).length&&(e.distance>=e.minDistance&&e.distance<=e.maxDistance?(n.setTopBorderColor(e.topColor),n.setBottomBorderColor(e.bottomColor),n.setValue(0,+e.gainLevel),n.setValue(1,+e.loseLevel),n.setTime(0,e.startTime),n.setTime(1,e.endTime),n.setFillOpacity(.05),n.setTopBottomBorderWidth(1,1)):(n.setFillOpacity(0),n.setTopBottomBorderWidth(0,0)),t.chart.redraw()),t.chart&&t.chart.setIncludeDrawingsInScale(!0)},removeOrder:function(){Ext.isEmpty(this.orderObjects[0])||(this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[0]),delete this.orderObjects[0])},initComponent:function(){this.fireEvent("initchartui",this),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},getChartContextMenu:function(){return!!this.chartContextMenu},prepareInstruments:function(){var e,t,n,i,r,o,a=this.availableInstruments,s={instruments:{},groups:{},tags:[]};if(r=BP.Bootstrap.getChartInstruments().instruments,o=BP.Bootstrap.getChartInstruments().groups,e=a.length,!e)return s;for(i=0;e>i;i++)t=a[i],t&&(n=r[t],n&&(n.title=n.name,s.instruments[t]=n));return s.groups=o,s}},0,["bp-chart-tooltip-ui"],["component","box","container","panel","bp-chart-tooltip-ui"],{component:!0,box:!0,container:!0,panel:!0,"bp-chart-tooltip-ui":!0},["widget.bp-chart-tooltip-ui"],0,[BP.view.panel.touch.window.chart,"ChartTooltipUI"],0),Ext.cmd.derive("BP.view.panel.touch.window.level.Level",Ext.Component,{cls:"bp-touch-level",initComponent:function(){var e=this;Ext.apply(e,{tpl:e.buildTpl(e),height:125,side:"call",data:e.dataReset(!0)}),Ext.Component.prototype.initComponent.apply(this,arguments)},buildTpl:function(){return['<div unselectable="on" class="bp-touch-level-wrap x-unselectable">','<table class="level-top {side}">',"<tr>",'<td rowspan="2" class="arrow x-unselectable"></td>','<td class="title x-unselectable">',"<tpl if=\"side == 'call'\">{topTitle}<tpl elseif=\"side == 'put'\">{bottomTitle}<tpl else>Select side</tpl>","</td>",'<td rowspan="2" class="arrow x-unselectable"></td>',"</tr>","<tr>",'<td class="value x-unselectable">',"<tpl if=\"side == 'call'\">{gainLevel}<tpl elseif=\"side == 'put'\">{loseLevel}<tpl else>-</tpl>","</td>","</tr>","</table>",'<div unselectable="on" class="contract-returned x-unselectable {side}">{contRetTitle}</div>','<table class="level-down {side}">',"<tr>",'<td rowspan="2" class="arrow x-unselectable"></td>','<td class="value x-unselectable">',"<tpl if=\"side == 'call'\">{loseLevel}<tpl elseif=\"side == 'put'\">{gainLevel}<tpl else>-</tpl>","</td>",'<td rowspan="2" class="arrow x-unselectable"></td>',"</tr>","<tr>",'<td class="title x-unselectable">',"<tpl if=\"side == 'call'\">{bottomTitle}<tpl elseif=\"side == 'put'\">{topTitle}<tpl else>Select side</tpl>","</td>","</tr>","</table>","</div>"]},dataReset:function(e){var t=this,n={side:"call",distance:+t.distance||0,callSide:BP.translate("trade-panel.up"),callTitle:BP.translate("trade-panel.call"),topTitle:BP.translate("touch-panel.touch-level-gain"),bottomTitle:BP.translate("touch-panel.touch-level-lose"),contRetTitle:BP.translate("touch-panel.touch-�?ontract-returned"),gainLevel:t.gainLevel||"-",loseLevel:t.loseLevel||"-",tradingLocked:!1};return e===!0?n:void t.updateSettings(n)},updateSettings:function(e){var t,n=this;e.topTitle=BP.translate("touch-panel.touch-level-gain"),e.bottomTitle=BP.translate("touch-panel.touch-level-lose"),e.contRetTitle=BP.translate("touch-panel.touch-�?ontract-returned"),t=document.createElement("div"),
t.style.display="none",t.innerHTML=n.tpl.apply(e),n.el.dom.children[0].children[0].className=t.children[0].children[0].className,n.el.dom.children[0].children[1].className=t.children[0].children[1].className,n.el.dom.children[0].children[2].className=t.children[0].children[2].className,n.setText(n.el.dom.children[0].children[0].children[0].children[0].children[1],t.children[0].children[0].children[0].children[0].children[1]),n.setText(n.el.dom.children[0].children[2].children[0].children[1].children[0],t.children[0].children[2].children[0].children[1].children[0]),n.setText(n.el.dom.children[0].children[0].children[0].children[1].children[0],t.children[0].children[0].children[0].children[1].children[0]),n.setText(n.el.dom.children[0].children[2].children[0].children[0].children[1],t.children[0].children[2].children[0].children[0].children[1]),t=null},setText:function(e,t){void 0===e.innerText?e.textContent=t.textContent:e.innerText=t.innerText}},0,["bp-touch-level"],["component","box","bp-touch-level"],{component:!0,box:!0,"bp-touch-level":!0},["widget.bp-touch-level"],0,[BP.view.panel.touch.window.level,"Level"],0),Ext.cmd.derive("BP.view.button.touch.TouchTickerController",Ext.app.ViewController,{listen:{component:{"bp-touch-ticker":{afterrender:"onAfterRenderInstrumentTicker"}}},onTranslate:function(e){e.onTranslate(),(arguments.callee.$previous||Ext.app.ViewController.prototype.onTranslate).apply(this,arguments)},onAfterRenderInstrumentTicker:function(e){e.on("click",Ext.pass(this.onCallClick,[this,"call"]),e,{element:"el",delegate:"div.block.ask",buffer:1,stopEvent:!0}),e.on("click",Ext.pass(this.onPutClick,[this,"put"]),e,{element:"el",delegate:"div.block.bid",buffer:1,stopEvent:!0})},onCallClick:function(e,t,n,i){var r=Ext.get(i),o=r.next(".block.bid"),a=o.down(".button");"call"!==this.getValue()&&(r.down(".button").addCls("checked"),r.addCls("active"),o.removeCls("active"),a.removeCls("checked"),this.setValue(t),e.fireViewEvent("change",t))},onPutClick:function(e,t,n,i){var r=Ext.get(i),o=r.prev(".block.ask"),a=o.down(".button");"put"!==this.getValue()&&(r.down(".button").addCls("checked"),r.addCls("active"),o.removeCls("active"),a.removeCls("checked"),this.setValue(t),e.fireViewEvent("change",t))}},0,0,0,0,["controller.bp-touch-ticker"],0,[BP.view.button.touch,"TouchTickerController"],0),Ext.cmd.derive("BP.view.button.touch.TouchTicker",Ext.Component,{controller:"bp-touch-ticker",initComponent:function(){var e=this;Ext.apply(e,{tpl:e.buildTpl(e),action:this.optionType,height:90,value:"call",data:e.dataReset(!0)}),Ext.Component.prototype.initComponent.apply(this,arguments)},buildTpl:function(){return['<div unselectable="on" class="bp-touch-ticker x-unselectable">','<div class="block ask active">','<div unselectable="on" class="button {rtlCls} call checked x-unselectable">','<div unselectable="on" class="side x-unselectable">{callSide:capitalize} ({callTitle})</div>',"</div>","</div>",'<div class="block bid">','<div unselectable="on" class="button {rtlCls} put x-unselectable">','<div unselectable="on" class="side x-unselectable">{putSide:capitalize} ({putTitle})</div>',"</div>","</div>","</div>"]},dataReset:function(e){var t={callSide:BP.translate("trade-panel.up"),callTitle:BP.translate("trade-panel.call"),callBidTitle:BP.translate("trade-panel.bid"),putSide:BP.translate("trade-panel.down"),putTitle:BP.translate("trade-panel.put"),putAskTitle:BP.translate("trade-panel.ask"),rtlCls:window.rtlEnable?"x-rtl":"x-ltr"};return e===!0?t:void 0},onTranslate:function(){var e,t=this,n={callSide:BP.translate("trade-panel.up"),callTitle:BP.translate("trade-panel.call"),callBidTitle:BP.translate("trade-panel.bid"),putSide:BP.translate("trade-panel.down"),putTitle:BP.translate("trade-panel.put"),putAskTitle:BP.translate("trade-panel.ask"),tradingLocked:!1};t.tradingLocked=t.tradingLocked||!1,t.tickingStopped=t.tickingStopped||!1,e=document.createElement("div"),e.style.display="none","function"==typeof t.tpl.apply&&(e.innerHTML=t.tpl.apply(n),Ext.Array.each(e.children[0].children,function(e,n){t.setText(t.el.dom.children[0].children[n].children[0].children[0],e.children[0].children[0])}),e=null)},setText:function(e,t){void 0===e.innerText?e.textContent=t.textContent:e.innerText=t.innerText},getMajorMinor:function(e){var t,n,i="";return e&&(t=e.substr(0,e.length-3),n=e.substr(-3,2),i=e.substr(-1,1)),{primary:t,minor:n,major:i}},setValue:function(e){-1!==["call","put","none"].indexOf(e)&&(this.value=e)},getValue:function(){return this.value}},0,["bp-touch-ticker"],["component","box","bp-touch-ticker"],{component:!0,box:!0,"bp-touch-ticker":!0},["widget.bp-touch-ticker"],0,[BP.view.button.touch,"TouchTicker"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.panel.touch.window.SymmetricTooltipUI",Ext.window.Window,{cls:"bp-symmetric-tooltip",controller:"bp-symmetric-tooltip",viewModel:"bp-symmetric-tooltip",bind:{title:"{tplWindowTargetChartTitle}"},dock:"top",width:820,height:320,shadow:!1,draggable:!1,autoDestroy:!0,bodyPadding:"5px 10px",closable:!1,resizable:!1,iconCls:"bp-icon",bodyStyle:"border-color: #6c6c6c;border-width: 0 1px 1px;",layout:{type:"hbox",pack:"start",align:"stretch"},autoShow:!0,constrain:!0,anim:{duration:100,easing:"easeIn"},tools:[{renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],initComponent:function(){var e,t=this;t.settings.side="call",t.setSettings(t.settings),e={items:[t.buildChartPanel(t),{xtype:"panel",border:!1,layout:{type:"vbox"},items:[t.buildButtonPanel(t),t.buildLevelPanel(t)]}]},Ext.apply(t,e),Ext.window.Window.prototype.initComponent.apply(this,arguments)},buildChartPanel:function(e){return{xtype:"bp-chart-tooltip-ui",reference:"chart-panel",currency:e.settings.instrument.id,prOrderObjects:e.settings,cls:"chart-body",width:580}},buildButtonPanel:function(e){return Ext.apply({xtype:"bp-touch-ticker",padding:"5px 35px",border:!1,listeners:{change:"onSideChange"}},e.settings)},buildLevelPanel:function(e){return Ext.apply({xtype:"bp-touch-level",border:!1,padding:"10px 35px 10px 35px",width:220},e.settings)},updateSettings:function(e){var t=this,n=t.down("bp-chart-tooltip-ui"),i=t.down("bp-touch-level");t.setSettings(e),n&&n.updateSettings(t.settings),i&&i.updateSettings(t.settings)},setSettings:function(e){var t=this,n=BP.model.SettlementInfo,i=Ext.getStore("Instruments"),r=e.instrument||t.settings.instrument;e.side=e.side||t.settings.side,e.distance=e.distance||t.settings.distance,e.instrument=i.getById(r.getId()),e.askPrice=e.instrument.get("askPrice"),e.bidPrice=e.instrument.get("bidPrice"),e.pipValue=e.instrument.get("pipValue"),e.priceScale=e.instrument.get("priceScale"),e.startTime=+BP.util.Clock.getTimestamp(),e.endTime=+n.get("nextSettlementTime"),"call"==e.side?(e.gainLevel=t.formatUtil.price(e.askPrice+e.pipValue*e.distance,e.priceScale),e.loseLevel=t.formatUtil.price(e.askPrice-e.pipValue*e.distance,e.priceScale),e.offerSide="ASK",e.topColor="00bd00",e.bottomColor="ff0000"):"put"==e.side&&(e.gainLevel=t.formatUtil.price(e.bidPrice-e.pipValue*e.distance,e.priceScale),e.loseLevel=t.formatUtil.price(e.bidPrice+e.pipValue*e.distance,e.priceScale),e.offerSide="BID",e.topColor="ff0000",e.bottomColor="00bd00"),Ext.apply(t.settings,e)}},0,["bp-symmetric-tooltip"],["component","box","container","panel","window","bp-symmetric-tooltip"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-symmetric-tooltip":!0},["widget.bp-symmetric-tooltip"],0,[BP.view.panel.touch.window,"SymmetricTooltipUI"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.resizer.BorderSplitter",Ext.resizer.Splitter,{cls:"bp-border-splitter",collapseTarget:null,overCls:"bp-splitter-over",size:5,getTrackerConfig:function(){var e=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);return e.xclass="BP.view.resizer.BorderSplitterTracker",e}},0,["bp-bordersplitter"],["component","box","splitter","bp-bordersplitter"],{component:!0,box:!0,splitter:!0,"bp-bordersplitter":!0},["widget.bp-bordersplitter"],0,[BP.view.resizer,"BorderSplitter"],0),Ext.cmd.derive("BP.view.panel.touch.Touch",Ext.Panel,{cls:"bp-touch-panel",controller:"touch",viewModel:"touch",config:{instrument:null},preventHeader:!0,hideCollapseTool:!0,collapsible:!0,animCollapse:!0,reference:"touch_form",layout:{type:"vbox",align:"stretch",pack:"start"},split:{xtype:"bp-bordersplitter",collapseOnDblClick:!0,collapsible:!0},border:!1,collapseMode:"mini",bodyCls:"bp-grey-body",region:"west",width:255,maxWidth:255,minWidth:255,height:360,bodyPadding:5,panelType:"TOUCH",initComponent:function(){var e,t=this;e={items:[{xtype:"bp-instrument-ticker",name:"touch-ticker",listeners:{trade:"onCreate"}},{xtype:"component",margin:"5 0 0 0",style:"border-top: 1px solid #a4a4a4"},t.buildTradeForm(t)]},Ext.apply(t,e),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},buildTradeForm:function(){return{xtype:"form",reference:"form",bodyPadding:5,bodyCls:"bp-grey-body",border:!1,layout:"anchor",cls:"simpleForm",fieldDefaults:{labelAlign:"right",labelSeparator:"",anchor:"100%",labelWidth:100},items:[{xtype:"bp-instrumentfield",referenceHolder:!0,bind:{fieldLabel:"{translate.tradePanelInstrumentSelector}",store:"{instruments}",value:"{instrument}"},listeners:{change:"onInstrumentSelect"}},{xtype:"bp-amountfield",name:"amount",listeners:{change:"onAmountChange"}},{xtype:"bp-numberfield",name:"strike-distance",bodyPadding:0,allowNegative:!1,vtype:"natural",step:1,bind:{fieldLabel:"{tplStrikeDistanceTitle}",minValue:"{minStrikeDistance}",maxValue:"{maxStrikeDistance}",value:"{defaultStrike}",triggerSymbol:"pips",tooltip:"{tplStrikeDistanceTooltip}"},listeners:{blur:"onStrikeBlur",change:"onChangeStrike"}},{xtype:"bp-payout-refund-selector",bind:{store:"{payoutRefund}",fieldLabel:"{translate.payoutRefundFieldLabel}",value:"{payoutRefundValue}"}},{xtype:"displayfield",name:"expiration-time",margin:"0",bind:{fieldLabel:"{translate.expirationTimeField}",value:"{tplExpirationTime}"}},{xtype:"bp-chain-panel"}]}},selectInstrument:function(e){var t=this.down("bp-instrumentfield");if(!t)return!1;var n=t.getStore().getById(e);n&&t.select(n)},updateInstrument:function(e,t){var n,i=this,r=BP.app.getController("Subscribe"),o=Ext.getStore("Instruments"),a=Ext.ComponentQuery.query('bp-market-chart-ui[name="main-chart"]')[0],s=Ext.ComponentQuery.query("bp-symmetric-tooltip")[0];e&&r.onSubscribed([e.getId()]),t&&r.onUnsubscribed([t.getId()]),Ext.suspendLayouts(),setTimeout(function(){n=o.getById(e.getId()),n&&i.down("bp-instrument-ticker").updateInstrument(n),a&&a.updateInstrument(e),s&&s.setSettings(i.getSettings())},200),Ext.resumeLayouts(!1)},getSettings:function(){var e=this,t=e.down("bp-instrumentfield"),n=e.down('numberfield[name="strike-distance"]');if(!t)return!1;var i=t.getStore().getById(t.getValue());return{instrument:i,distance:n.getValue(),minDistance:n.getMinValue(),maxDistance:n.getMaxValue()}},setTradeDisabled:function(e){this.down("bp-instrument-ticker").setDisabled(e)}},0,["bp-touch-panel"],["component","box","container","panel","bp-touch-panel"],{component:!0,box:!0,container:!0,panel:!0,"bp-touch-panel":!0},["widget.bp-touch-panel"],0,[BP.view.panel.touch,"Touch"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.panel.history.HistoryController",Ext.app.ViewController,{init:function(){var e=this;e.getView(),Ext.getStore("HistoryOrders").on({add:e.plusOne,scope:e}),e.instrumentStore=Ext.getStore("StocksCFD"),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"#":{activate:"activateTab"}}},plusOne:function(e,t){t[0]&&BP.localSettings.get("playSounds")&&this.playSoundFx(t[0])},clearOptionLog:function(e,t,n){Ext.Array.each(n.up("panel").getView().getNodes(),function(){this.style.display="none"})},playSoundFx:function(e){var t=e.get("orderState"),n=t;if("FILLED"==t||"REJECTED"==t||"EXECUTING"==t||"REVOKED"==t){"FILLED"==t&&(n=e.get("profitLoss")>0?"profit":"loss"),"REVOKED"==t&&(n="profit");try{new Audio("./resources/audio/"+n+".mp3").play()}catch(i){BP.log("warn","no audio support!")}}},activateTab:function(){var e,t=this,n=t.getView(),i=n.getViewModel(),r=i.get("orderIds"),o=r.length,a=0;setTimeout(function(){if(n.getView().refresh(),o)for(;o>a;a++)e=n.getView().getRow(n.store.getById(r[a])),e&&Ext.get(e).highlight(),delete e},200),setTimeout(function(){i.set("orderIds",[])},500)},suspendEvent:function(){var e=this,t=e.getView(),n=t.getViewModel();setTimeout(function(){n.set("orderIds",[])},500)}},0,0,0,0,["controller.bp-history-panel"],0,[BP.view.panel.history,"HistoryController"],0),Ext.cmd.derive("BP.model.HistoryOrder",BP.model.OrderBase,{idProperty:"orderId",fields:[{name:"orderId",type:"int"},{name:"parentOrderId",type:"int"},{name:"optionType",type:"string"},{name:"orderType",type:"string",defaultValue:""},{name:"instrument",type:"string"},{name:"ccy",type:"string"},{name:"side",type:"string"},{name:"amount",type:"float"},{name:"maturity",type:"int"},{name:"orderState",type:"string"},{name:"payOutPerc",type:"float",useNull:!0},{name:"refundPercent",type:"float",useNull:!0},{name:"priceStrike",type:"float",useNull:!0},{name:"priceTrig",type:"float",useNull:!0},{name:"amountPl",type:"float",useNull:!0},{name:"msg",type:"auto"},{name:"creationTime",type:"date",dateFormat:"time"},{name:"startTime",type:"date",dateFormat:"time"},{name:"trigTime",type:"date",dateFormat:"time"},{name:"timeToLive",type:"date",dateFormat:"time"},{name:"condPrice",type:"float",useNull:!0},{name:"condDirection",type:"string"},{name:"minPayOutPerc",type:"float",useNull:!0},{name:"pendingTime",type:"int",persist:!1},{name:"pendingLeft",type:"int",persist:!1},{name:"executingTime",type:"int",persist:!1},{name:"executingLeft",type:"int",persist:!1},{name:"spotPrice",type:"float",persist:!1},{name:"pips",type:"float",persist:!1,useNull:!0},{name:"profitLoss",type:"float",persist:!1,useNull:!0},{name:"priceStrike",type:"float",persist:!1},{name:"priceTrig",type:"float",persist:!1},{name:"indexPriceStrike",type:"float",persist:!1},{name:"indexPriceTrig",type:"float",persist:!1},{name:"chainType",type:"string"},{name:"chainLength",type:"int"}],getInstrument:function(){var e;return this.get("instrument")&&(e=Ext.Array.contains(["MCO","SCFD","PAIR"],this.get("orderType"))?Ext.getStore("StocksCFD").getById(this.get("instrument")):Ext.getStore("Instruments").getById(this.get("instrument"))),e},isCall:function(){return"CALL"==this.get("optionType")},isPut:function(){return"PUT"==this.get("optionType")},isREG:function(){return"REG"==this.get("orderType")},isTOUCH:function(){return"TOUCH"==this.get("orderType")}},0,0,0,0,0,0,[BP.model,"HistoryOrder"],0),Ext.cmd.derive("BP.view.panel.history.HistoryModel",Ext.app.ViewModel,{data:{orderIds:[],translate:{orderHistoryTitle:"history-grid.title",parentOrderId:"history-grid.parent-order-id",orderId:"order-grid.order-id-header",orderSide:"history-grid.side-header",orderInstrument:"history-grid.instrument-header",orderPayIn:"history-grid.pay-in-header",orderPayOut:"history-grid.pay-out-header",orderMaturity:"order-grid.maturity-header",orderClosed:"history-grid.closed-header",orderStrikePrice:"history-grid.strike-price-header",orderExpirPerfom:"order-grid.order-expiration-price-header",orderState:"history-grid.state-header",orderChainType:"order-grid.chain-type-header",orderContractsLeft:"order-grid.chain-contracts-left-header",orderChainCancel:"order-grid.chain-cancel-header"}},formulas:{isVisable:{get:function(){return"fxfinpro"!=BP.whitelabel}},tplPanelTitle:{bind:{orderIds:"{orderIds}",orderHistoryTitle:"{translate.orderHistoryTitle}"},get:function(e){var t=['<span class="panel-{[this.isActivate(values.orderIds)]}">{orderHistoryTitle} {[this.hasOrder(values.orderIds)]}</span>',{hasOrder:function(e){return e.length?"("+e.length+")":""}},{isActivate:function(e){return e.length?"activate":"default"}}];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-history-panel"],0,[BP.view.panel.history,"HistoryModel"],0),Ext.cmd.derive("BP.view.panel.history.History",Ext.grid.Panel,{bind:{store:"HistoryOrders"},controller:"bp-history-panel",viewModel:"bp-history-panel",cls:"bp-history-order-panel",initComponent:function(){var e=this,t={columns:e.buildColumns(e)};Ext.apply(e,t),Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},buildColumns:function(e){return[{bind:{text:"{translate.orderId}"},dataIndex:"orderId",align:"center",width:110},{bind:{text:"{translate.orderSide}"},dataIndex:"optionType",align:"center",width:75,renderer:e.formatUtil.optionType},{bind:{text:"{translate.orderInstrument}"},dataIndex:"instrument",align:"center",width:75,renderer:e.instrumentRenderer},{bind:{text:"{translate.orderPayIn}"},dataIndex:"amount",align:"center",width:85,renderer:e.payInRenderer},{bind:{text:"{translate.orderPayOut}"},dataIndex:"amountPl",align:"center",width:85,renderer:e.payOutRenderer},{bind:{text:"{translate.orderMaturity}"},dataIndex:"maturity",align:"center",width:75,renderer:e.maturityRenderer},{bind:{text:"{translate.orderClosed}"},dataIndex:"trigTime",align:"center",width:120,renderer:e.formatUtil.gmtDateRenderer},{bind:{text:"{translate.orderStrikePrice}"},dataIndex:"priceStrike",align:"center",width:180,renderer:e.priceStrikeRenderer},{bind:{text:"{translate.orderExpirPerfom}"},dataIndex:"priceTrig",align:"center",width:100,renderer:e.priceRenderer},{xtype:"actioncolumn",bind:{hidden:"{isVisable}"},width:20,menuDisabled:!0,resizable:!1,hideable:!1,getClass:function(e,t,n){var i;switch(n.get("orderState")){case"FILLED":i="Expiration";break;case"REVOKED":i="Revoke"}return i?(t.tdAttr=Ext.String.format('data-qtip="{0} Ask : {1}  / {2} Bid : {3}"',i,n.get("currentAsk"),i,n.get("currentBid")),"bp-icon-more-info"):void 0}},{bind:{text:"{translate.parentOrderId}"},dataIndex:"parentOrderId",align:"center",width:110,renderer:e.parentOrderIdRenderer},{bind:{text:"{translate.orderChainType}"},dataIndex:"chainType",align:"center",width:90},{bind:{text:"{translate.orderContractsLeft}"},dataIndex:"chainLength",align:"center",width:100,renderer:e.chainLengthRenderer},{bind:{text:"{translate.orderState}"},dataIndex:"orderState",align:"center",width:100,renderer:e.stateRenderer}]},instrumentRenderer:function(e,t,n){var e=n.getInstrument();try{return"PAIR"==n.get("orderType")&&"PUT"==n.get("optionType")?Ext.util.Format.format('<span class="order-scfd  green">{0}</span> / <span class="order-scfd">{1}</span>',n.get("index"),e.getId()):"PAIR"==n.get("orderType")&&"CALL"==n.get("optionType")?Ext.util.Format.format('<span class="order-scfd">{0}</span> / <span class="order-scfd  green">{1}</span>',n.get("index"),e.getId()):"MCO"==n.get("orderType")?Ext.util.Format.format("<span>{0}</span>",e.getId()):e.getId()}catch(i){}},payInRenderer:function(e,t,n){return this.formatUtil.money(e,n.get("ccy"))},payOutRenderer:function(e,t,n){return e=e||0,t.tdCls=0==e?"bp-none":e>0?"bp-positive":"bp-negative",this.formatUtil.money(e,n.get("ccy"))},stateRenderer:function(e,t,n){switch(e){case"REJECTED":t.tdCls="bp-icon-important",t.tdAttr='data-qtip="'+n.getMessageText()+'"';break;case"FILLED":t.tdCls="bp-icon-ok";break;case"REVOKED":t.tdCls="bp-icon-revoked";break;case"CANCELLED":t.tdCls="bp-icon-canceled"}return e},maturityRenderer:function(e,t,n){return Ext.Array.contains(["MCO","PAIR"],n.get("orderType"))?" 1 session":this.formatUtil.secondsToTime(60*e)},plusOne:function(){this.plusOneCount++,this.setTitle(BP.translate("history-grid.title")+" ("+this.plusOneCount+")")},plusOneReset:function(){this.plusOneCount=0,BP.localSettings.get("playSounds")&&this.playSoundFx(),this.setTitle(BP.translate("history-grid.title"))},playSoundFx:function(){var e=this,t=e.get("orderState"),n=t;if("FILLED"==t||"REJECTED"==t||"EXECUTING"==t){"FILLED"==t&&(n=e.get("profitLoss")>0?"profit":"loss");try{new Audio("./resources/audio/"+n+".mp3").play()}catch(i){BP.log("warn","no audio support!")}}},priceStrikeRenderer:function(e,t,n){var i="";if(e)switch(n.get("orderType")){case"PAIR":return"PUT"==n.get("optionType")?"Index > Stock":"Stock > Index";case"TOUCH":return n.isCall()?Ext.util.Format.format('<span class="order-call-win">{0}</span> / <span class="order-call-lose">{1}</span>',n.get("touchPrice"),n.get("touchPriceSymmetric")):Ext.util.Format.format('<span class="order-call-lose">{0}</span> / <span class="order-call-win">{1}</span>',n.get("touchPriceSymmetric"),n.get("touchPrice"));default:return i="PUT"==n.get("optionType")?"ASK ":"BID ",this.formatUtil.priceRenderer(e)}},priceRenderer:function(e){return this.formatUtil.priceRenderer(e)},parentOrderIdRenderer:function(e){return e>0?e:""},chainLengthRenderer:function(e,t,n){return n.get("chainType")||e>0?e:""}},0,["history-order-panel"],["component","box","container","panel","tablepanel","gridpanel","grid","history-order-panel"],{component:!0,box:!0,container:!0,panel:!0,tablepanel:!0,gridpanel:!0,grid:!0,"history-order-panel":!0},["widget.history-order-panel"],0,[BP.view.panel.history,"History"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.grid.pending.PendingController",Ext.app.ViewController,{init:function(){var e=this;e.transport=BP.getTransport(),BP.app.getClock().on("tick",e.calculateTime,e),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"pending-order-grid":{afterrender:"onBeforeRender"}}},onBeforeRender:function(e){var t=this,n=t.getView(),i=n.getViewModel(),r=e.getStore();r&&r.on({add:t.onOrdersAdd,remove:t.onOrdersRemove,scope:t}),i.set("orderSum",r.count())},onOrdersAdd:function(e){var t=this.getViewModel();t&&t.set("orderSum",e.count())},onOrdersRemove:function(e){var t=this.getViewModel();t&&t.set("orderSum",e.count())},calculateTime:function(e){var t,n,i,r,o,a=this,s=0,l=a.getView();if(n=l.getStore(),t=Ext.getStore("Instruments"),o=n.data.length,o&&l.isVisible())for(;o>s;s++)Ext.suspendLayouts(),r=n.data.getAt(s),r&&t.getById(r.get("instrument"))&&(r.onClockTick(e),n.data.map[r.internalId]=r,i=l.view.dataSource.indexOf(r),-1!=i&&a.fastUpdate(l,r,i),Ext.resumeLayouts(!1))},fastUpdate:function(e,t,n){var i,r,o,a,s;i=this,o=e.view,r=document.createElement("div"),r.innerHTML=o.tpl.apply(o.collectData([t],n)),a=r.getElementsByTagName("tr")[0],a&&(s=o.all.elements[n],o.all.elements[n]=null,s&&(i.updateColumnIsModefied(s,a),o.all.elements[n]=s),a.innerHTML=null),t=null,r=null,s=null,a=null},updateColumnIsModefied:function(e,t){var n,i,r,o=0;for(n=e.getElementsByTagName("td"),i=n.length;i>o;o++)if(n[o].className+n[o].innerHTML!=t.children[o].className+t.children[o].innerHTML){for(n[o].className=t.children[o].className;r=n[o].lastChild;)n[o].removeChild(r);n[o].innerHTML=null,n[o].innerHTML=t.children[o].innerHTML}t.innerHTML=null,t=null,n=null,r=null},onOrder:function(e){var t,n,i,r,o=this;if(t=o.getViewModel(),e.orderId&&t){if(n=t.getStore("pendingOrders"),i=n.data.containsKey(e.orderId),r=i?n.data.getByKey(e.orderId):null)switch(e.orderState){case"PENDING":case"PROCESSING":r.set(e);break;case"EXECUTING":n.remove(r);break;case"FILLED":case"REJECTED":case"CANCELLED":n.remove(r)}else switch(r=n.getModel().create(e),e.orderState){case"PENDING":case"PROCESSING":n.add(r)}r.commit(!0)}},onOrderCancel:function(e,t,n,i,r,o){r.stopEvent(),o.canBeCancelled()&&this.transport.cancel({orderId:o.getId()})},onOrderGridClick:function(e,t,n,i,r){var o=this.getView().up("app-main").down("bp-trade-panel bp-chart");r.stopEvent(),"REG"===t.get("orderType")&&o.setActiveOrder(t)},onOrderInfo:function(e,t,n,i,r,o){var a,s=this;a=this.getView().up("app-main").down("tabpanel"),r.stopEvent(),"REG"===o.get("orderType")?this.getView().up("app-main").down("tabpanel bp-trade-panel").getController().onOrderGridDblClick(a,o):"MCO"===o.get("orderType")&&(this.getView().up("app-main").down("tabpanel").setActiveTab(1),setTimeout(function(){s.getView().down("tabpanel bp-market-panel").getController().onOrderGridDblClick(a,o)},1e3))},onOrderGridContextMenu:function(e,t,n,i,r){var o=this;r.stopEvent();var a=Ext.create("Ext.menu.Menu",{width:140,items:[{text:"Show on chart",icon:"resources/images/icon_chart.png",hidden:Ext.Array.contains(["MCO","SCFD","PAIR"],t.get("orderType")),handler:function(){o.onOrderGridClick(e,t,n,i,r)}},{text:"Order info",icon:"resources/images/icon_info.gif",handler:function(){o.onOrderInfo(e,t,n,i,r,t)}}]});a.showAt(r.getXY())}},0,0,0,0,["controller.bp-pending"],0,[BP.view.grid.pending,"PendingController"],0),Ext.cmd.derive("BP.model.PendingOrder",Ext.data.Model,{idProperty:"orderId",fields:[{name:"orderId",type:"int"},{name:"optionType",type:"string"},{name:"orderType",type:"string",defaultValue:""},{name:"instrument",type:"string"},{name:"ccy",type:"string"},{name:"side",type:"string"},{name:"amount",type:"float"},{name:"maturity",type:"int"},{name:"orderState",type:"string"},{name:"payOutPerc",type:"float",useNull:!0},{name:"refundPercent",type:"float",useNull:!0},{name:"priceStrike",type:"float",useNull:!0},{name:"priceTrig",type:"float",useNull:!0},{name:"amountPl",type:"float",useNull:!0},{name:"msg",type:"auto"},{name:"creationTime",type:"date",dateFormat:"time"},{name:"startTime",type:"date",dateFormat:"time"},{name:"trigTime",type:"date",dateFormat:"time"},{name:"timeToLive",type:"date",dateFormat:"time"},{name:"condPrice",type:"float",useNull:!0},{name:"condDirection",type:"string"},{name:"minPayOutPerc",type:"float",useNull:!0},{name:"pendingTime",type:"int",persist:!1},{name:"pendingLeft",type:"int",persist:!1},{name:"executingTime",type:"int",persist:!1},{name:"executingLeft",type:"int",persist:!1},{name:"spotPrice",type:"float",persist:!1},{name:"pips",type:"float",persist:!1,useNull:!0},{name:"profitLoss",type:"float",persist:!1,useNull:!0},{name:"priceStrike",type:"float",persist:!1},{name:"priceTrig",type:"float",persist:!1},{name:"indexPriceStrike",type:"float",persist:!1},{name:"indexPriceTrig",type:"float",persist:!1}],constructor:function(){var e=this;Ext.data.Model.prototype.constructor.apply(this,arguments),e.calculateTimeInterval()},getInstrument:function(){var e;return this.get("instrument")&&(e=Ext.Array.contains(["MCO","SCFD","PAIR"],this.get("orderType"))?Ext.getStore("StocksCFD").getById(this.get("instrument")):Ext.getStore("Instruments").getById(this.get("instrument"))),e},calculateTimeInterval:function(){var e=this,t=e.data.startTime-e.data.creationTime,n=e.data.startTime,i=0;e.isPending()&&e.isREG()?(t=e.data.timeToLive-e.data.creationTime,n=e.data.timeToLive):i=e.data.trigTime-e.data.startTime,e.data.pendingTime=t,e.data.pendingLeft=t,e.data.pendingStart=n,e.data.executingTime=i,e.data.executingLeft=i},onClockTick:function(e){var t=this,n=t.data.startTime-e,i=0;t.isPending()&&t.isREG()?n=t.data.timeToLive-e:i=t.data.trigTime-e,t.data.pendingLeft=n,t.data.executingLeft=i},canBeCancelled:function(){return this.isPending()},isPending:function(){return"PENDING"==this.get("orderState")},isREG:function(){return"REG"==this.get("orderType")},isTOUCH:function(){return"TOUCH"==this.get("orderType")}},1,0,0,0,0,0,[BP.model,"PendingOrder"],0),Ext.cmd.derive("BP.view.grid.pending.PendingModel",Ext.app.ViewModel,{data:{orderSum:0,translate:{orderPendingTitle:"order-grid.pending-title",orderId:"order-grid.order-id-header",orderType:"order-grid.order-type-header",orderSide:"order-grid.side-header",orderInstrument:"order-grid.instrument-header",orderPayIn:"order-grid.pay-in-header",orderMaturity:"order-grid.maturity-header",orderPriceCondition:"order-grid.price-condition-header",orderPayoutCondition:"order-grid.payout-condition-header",orderStartAt:"order-grid.start-at-header",orderState:"history-grid.state-header",orderStart:"order-grid.start-header"}},formulas:{tplGridTitle:{bind:{orderSum:"{orderSum}",orderPendingTitle:"{translate.orderPendingTitle}"},get:function(e){var t=["{orderPendingTitle} {[this.hasOrder(values.orderSum)]}</span>",{hasOrder:function(e){return e?"("+e+")":""}}];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.pending"],0,[BP.view.grid.pending,"PendingModel"],0),Ext.cmd.derive("BP.view.grid.pending.Pending",Ext.grid.Panel,{store:"PendingOrders",bind:{title:"{tplGridTitle}"},controller:"bp-pending",viewModel:"pending",cls:"pending-order-grid",initComponent:function(){var e,t=this;e={columns:t.buildColumns(t),viewConfig:{emptyText:BP.translate("order-grid.no-pending-orders")}},Ext.apply(t,e),Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},buildColumns:function(e){return[{bind:{text:"{translate.orderId}"},dataIndex:"orderId",align:"center",width:150},{bind:{text:"{translate.orderType}"},dataIndex:"orderType",align:"center",width:75,renderer:e.orderTypeRenderer},{bind:{text:"{translate.orderSide}"},dataIndex:"optionType",align:"center",width:75,renderer:e.optionType},{bind:{text:"{translate.orderInstrument}"},dataIndex:"instrument",align:"center",width:120,renderer:e.instrumentRenderer},{bind:{text:"{translate.orderPayIn}"},dataIndex:"amount",align:"center",width:150,renderer:e.payInRenderer},{bind:{text:"{translate.orderMaturity}"},dataIndex:"maturity",align:"center",width:75,renderer:e.maturityRenderer},{bind:{text:"{translate.orderPriceCondition}"},dataIndex:"condPrice",align:"center",width:100,renderer:e.priceConditionRenderer},{bind:{text:"{translate.orderPayoutCondition}"},dataIndex:"payOutPerc",align:"center",width:120,renderer:e.payRenderer},{bind:{text:"{translate.orderStartAt}"},dataIndex:"pendingStart",align:"center",width:150,renderer:e.timeStartRenderer},{bind:{text:"{translate.orderState}"},dataIndex:"orderState",align:"center",width:100,renderer:e.stateRenderer},{bind:{text:"{translate.orderStart}"},dataIndex:"pendingLeft",align:"center",width:100,renderer:e.formatUtil.timeLeftRenderer()},{xtype:"actioncolumn",action:"cancel",width:40,menuDisabled:!0,resizable:!1,hideable:!1,getClass:function(e,t,n){return n.canBeCancelled()?"bp-cancel-order":"bp-cant-cancel-order"},handler:"onOrderCancel"}]},orderTypeRenderer:function(e,t,n){var i="";switch(n.get("orderType")){case"REG":i="BINARY";break;case"TOUCH":i="TOUCH";break;default:i="-"}return i},optionType:function(e){return this.formatUtil.optionType(e)},instrumentRenderer:function(e,t,n){var e=n.getInstrument();return e.getId()},payInRenderer:function(e,t,n){return this.formatUtil.money(e,n.get("ccy"))},priceConditionRenderer:function(e,t,n){var i="";switch(e&&(i="PUT"==n.get("optionType")?"BID":"ASK"),n.get("condDirection")){case"LESS_BID":case"LESS_ASK":i+=" ≤ ";break;case"GREATER_BID":case"GREATER_ASK":i+=" ≥ "}return e=e||"",i+e},payRenderer:function(e,t,n){return e?e+"% / "+n.get("refundPercent")+"%":void 0},payoutConditionRenderer:function(e){return e?"≥ "+e+"%":void 0},pipsRenderer:function(e,t){return Ext.isNumber(e)?(e>0?t.tdCls="bp-positive":t.tdCls="bp-negative",e+" pips"):""},maturityRenderer:function(e){return this.formatUtil.secondsToTime(60*e)},timeStartRenderer:function(e){return BP.util.Clock.getTimestamp().getUTCDate()==e.getUTCDate()?this.formatUtil.gmtTime(e):this.formatUtil.gmtDateTime(e)},stateRenderer:function(e,t){switch(e){case"PENDING":t.tdCls="bp-icon-pending";break;case"PROCESSING":t.tdCls="bp-icon-processing";break;case"EXECUTING":t.tdCls="bp-icon-executing"}return e}},0,["pending-order-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","pending-order-grid"],{component:!0,box:!0,container:!0,panel:!0,tablepanel:!0,gridpanel:!0,grid:!0,"pending-order-grid":!0},["widget.pending-order-grid"],0,[BP.view.grid.pending,"Pending"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.grid.executing.ExecutingController",Ext.app.ViewController,{init:function(){var e=this,t=e.getView(),n=t.getViewModel(),i=t.getStore();e.transport=BP.getTransport(),BP.model.Account.on("datachange",e.showRevokedAccount,e),BP.app.getClock().on("tick",e.calculateTime,e),i&&i.on({add:e.onOrdersAdd,remove:e.onOrdersRemove,scope:e}),n.set("orderSum",Ext.getStore("ExecutingOrders").count()),Ext.app.ViewController.prototype.init.apply(this,arguments);
},listen:{component:{"executing-order-grid":{beforerender:"onBeforeRender",afterrender:"onAfterRender"}}},onBeforeRender:function(e){var t=this,n=t.getView(),i=n.getViewModel(),r=e.getStore();i.set("orderSum",r.count())},onAfterRender:function(){BP.app.getController("MarketTickManager").on("tick",this.onMarketTick,this)},onPanelActivate:function(e){var t=this,n=t.getView(),i=n.getViewModel(),r=e.getStore();i.set("orderSum",r.count())},showRevokedAccount:function(e){var t=this,n=t.getView(),i=n.getViewModel();i.set("isRevVisable",!e.get("revokeTimeSec"))},onOrdersAdd:function(e,t){var n=this.getViewModel(),i=Ext.ComponentQuery.query('bp-market-chart-ui[name="main-chart"]')[0];n.set("orderSum",e.count()),Ext.Array.each(t,function(e){i&&e.showOnChart(i)},this)},onOrdersRemove:function(e,t){var n=this.getViewModel(),i=Ext.ComponentQuery.query('bp-market-chart-ui[name="main-chart"]')[0];n.set("orderSum",e.count()),Ext.Array.each(t,function(e){i&&i.initialized&&e.removeFromChart(i)},this)},calculateTime:function(e){var t,n,i,r,o,a,s=this,l=0,d=s.getView();if(t=s.getViewModel(),i=d.getStore(),n=Ext.getStore("Instruments"),a=i.data.length,a&&d.isVisible())for(;a>l;l++)Ext.suspendLayouts(),o=i.data.getAt(l),o&&n.getById(o.get("instrument"))&&(o.onClockTick(e),i.data.map[o.internalId]=o,r=d.view.dataSource.indexOf(o),o.data.executingLeft<0&&i.removeAt(r),-1!=r&&s.fastUpdate(d,o,r)),Ext.resumeLayouts(!1)},onMarketTick:function(e){var t,n,i,r,o,n,a,s=this,l=0,d=s.getView();if(t=s.getViewModel(),t&&(n=Ext.getStore("Instruments"),i=d.getStore(),a=i.data.length,a&&d.isVisible()))for(;a>l;l++)o=i.data.getAt(l),(o&&n.getById(o.get("instrument"))&&o.isREG()||o&&o.isTOUCH())&&o.get("instrument")==e.id&&(Ext.suspendLayouts(),o.isREG()?o.onMarketTick(e.data):o.isTOUCH()&&o.onTouchMarketTick(e.data),i.data.map[o.internalId]=o,r=d.view.dataSource.indexOf(o),-1!=r&&s.fastUpdate(d,o,r),Ext.resumeLayouts(!1))},fastUpdate:function(e,t,n){var i,r,o,a,s;i=this,o=e.view,r=document.createElement("div"),r.innerHTML=o.tpl.apply(o.collectData([t],n)),a=r.getElementsByTagName("tr")[0],a&&(s=o.all.elements[n],o.all.elements[n]=null,s&&(i.updateColumnIsModefied(s,a),o.all.elements[n]=s),a.innerHTML=null),t=null,r=null,s=null,a=null},updateColumnIsModefied:function(e,t){var n,i,r,o=0;for(n=e.getElementsByTagName("td"),i=n.length;i>o;o++)if(n[o].className+n[o].innerHTML!=t.children[o].className+t.children[o].innerHTML){for(n[o].className=t.children[o].className;r=n[o].lastChild;)n[o].removeChild(r);n[o].innerHTML=null,n[o].innerHTML=t.children[o].innerHTML}t.innerHTML=null,t=null,n=null,r=null},onOrder:function(e){var t,n,i,r,o=this;if(t=o.getViewModel(),e.orderId&&t){if(n=t.getStore("executingOrders"),i=n.data.containsKey(e.orderId),r=i?n.data.getByKey(e.orderId):null)switch(e.orderState){case"PENDING":case"PROCESSING":n.remove(r);break;case"EXECUTING":r.set(e);break;case"FILLED":case"REJECTED":case"CANCELLED":case"REVOKED":n.remove(r)}else switch(r=n.getModel().create(e),e.orderState){case"EXECUTING":n.add(r)}r.commit(!0)}},onOrderRevoked:function(e,t,n,i,r,o){r.stopEvent(),o.isRevoked()&&this.transport.revoked({orderId:o.getId()}),e.store.removeAt(t)},onChainCancel:function(e,t,n,i,r,o){r.stopEvent(),o.isChainCancel()&&this.transport.chainCancel({orderId:o.getId()})},onOrderInfo:function(){},onOrderGridDblClick:function(e,t){var n=this;n.activateTab(t,function(){t&&n.fireViewEvent("showorderdetails",t)},n.cbFailure)},onOrderDeselect:function(){},onOrderGridContextMenu:function(e,t,n,i,r){var o=e.up("grid");n.status=e.isSelected(n),o.getGridContextMenu()&&"TABLE"==n.tagName&&this.doContextMenu(o,t,r)},doContextMenu:function(e,t,n){var i;i=e.contextMenuCfg||{},e.contextMenuItemsCfg&&(i.cls="bp-executing-menu",i.items=this.controlContextMenu(e,t),i.items.length&&this.createContextMenu(i,t,n))},createContextMenu:function(e,t,n){if(e&&n){var i;i=Ext.widget("menu",e),i.on("destroy",this.onDestroyContextMenu,this),i.on("mouseleave",this.onMouseLeaveContextMenu,this),i.on("mouseenter",this.onMouseEnterContextMenu,this),n.stopEvent(),i.showAt(n.getXY(),0,!1)}},onHideContextMenu:function(e){e.destroy()},onDestroyContextMenu:function(e){e=null},onMouseLeaveContextMenu:function(e){e.callTask&&e.callTask.delay(e.delayMouseLeave||1e3)},onMouseEnterContextMenu:function(e){e.callTask||(e.callTask=new Ext.util.DelayedTask(function(){e.hide()})),e.callTask.cancel()},controlContextMenu:function(e,t){var n=this,i=[];return e.contextMenuItemsCfg?(Ext.Object.each(e.contextMenuItemsCfg,function(e,r){r=Ext.clone(r),r.action=e,r.order=t,r.href="javascript:void(0);",r.disabled=!0,n.controlItemsContextMenu(r),n.addHandlerToItemContextMenu(r),r.remove||i.push(r),r=null}),i):i},getActiveOrderFromChart:function(){var e=Ext.ComponentQuery.query('bp-market-chart-ui[name="main-chart"]')[0];return e.activeOrderId?e.activeOrderId:void 0},controlItemsContextMenu:function(e){var t=this.getActiveOrderFromChart(),n=t==e.order.id&&(e.order.isREG()||e.order.isTOUCH());switch(e.action){case"showOnChart":e.disabled=!1,e.hidden=n;break;case"hideFromChart":e.disabled=!1,e.hidden=!n;break;case"showOrderDetails":e.disabled=!1;break;default:return e.disabled=!0,void(e.remove=!0)}},addHandlerToItemContextMenu:function(e){var t,n=this;if(!e.disabled){if(t="onMenuItem",t+=Ext.util.Format.capitalize(e.action),!n[t])return void(e.handler=function(){});e.scope=n,e.handler=n[t]}},onMenuItemShowOnChart:function(e){var t=this;t.activateTab(e.order,function(){e.order&&t.fireViewEvent("showonchart",e.order)},t.cbFailure)},onMenuItemHideFromChart:function(e){var t=this;t.activateTab(e.order,function(){e.order&&t.fireViewEvent("hidefromchart",e.order)},t.cbFailure)},onMenuItemShowOrderDetails:function(e){var t=this;t.activateTab(e.order,function(){e.order&&t.fireViewEvent("showorderdetails",e.order)},t.cbFailure)},cbFailure:function(){},activateTab:function(e,t){var n,i,r=this;switch(n=Ext.ComponentQuery.query("bp-tabgroup")[0],e.get("orderType")){case"REG":i=n.down('button[childTab="trade-panel"]');break;case"TOUCH":i=n.down('button[childTab="touch-panel"]')}i.order=e,i.fireEvent("click",i),setTimeout(function(){return Ext.isFunction(t)&&t.call(r,e)?!0:void 0},0)},onBeforeSelect:function(){},onOrderGridClick:function(e,t,n,i,r){var o=this,a=r.position.column.xtype;"actioncolumn"===a&&(r.preventDefault(),r.stopEvent(),r.position.column.stopSelection),e.isSelected(n)?o.activateTab(t,function(){t&&o.fireViewEvent("showonchart",t)},o.cbFailure):o.activateTab(t,function(){t&&o.fireViewEvent("hidefromchart",t)},o.cbFailure)},showActiveOrderOnChart:function(e,t){var n=e.down("bp-instrumentfield"),i=Ext.getStore("Instruments"),r=e.down("bp-market-chart-ui"),o=i.getById(t.get("instrument"));t.isREG()?(setTimeout(function(){r.setActiveOrder(t)},200),n.setValue(o.getId())):t.isTOUCH()&&(setTimeout(function(){r.setActiveTouchOrder(t)},200),n.setValue(o.getId()))},hideActiveOrderFromChart:function(e){e.down("bp-market-chart-ui")},isUsed:function(e){var t,n,i=this;if(t=i.getView(),n=t.getViewModel()){r=t.getStore("ExecutingOrders");var r,o;return e?(o=r.find("instrument",e),o>-1):!1}}},0,0,0,0,["controller.bp-executing"],0,[BP.view.grid.executing,"ExecutingController"],0),Ext.cmd.derive("BP.model.ExecutingOrder",Ext.data.Model,{idProperty:"orderId",fields:[{name:"orderId",type:"int"},{name:"optionType",type:"string"},{name:"orderType",type:"string",defaultValue:""},{name:"instrument",type:"string",defaultValue:"-"},{name:"ccy",type:"string"},{name:"side",type:"string"},{name:"amount",type:"float"},{name:"maturity",type:"int"},{name:"orderState",type:"string"},{name:"payOutPerc",type:"float",useNull:!0},{name:"refundPercent",type:"float",useNull:!0},{name:"priceStrike",type:"float",useNull:!0},{name:"priceTrig",type:"float",useNull:!0},{name:"amountPl",type:"float",useNull:!0},{name:"msg",type:"auto"},{name:"creationTime",type:"date",dateFormat:"time"},{name:"startTime",type:"date",dateFormat:"time"},{name:"trigTime",type:"date",dateFormat:"time"},{name:"timeToLive",type:"date",dateFormat:"time"},{name:"condPrice",type:"float",useNull:!0},{name:"condDirection",type:"string"},{name:"minPayOutPerc",type:"float",useNull:!0},{name:"pendingTime",type:"int",persist:!1},{name:"pendingLeft",type:"int",persist:!1},{name:"executingTime",type:"int",persist:!1},{name:"executingLeft",type:"int",persist:!1},{name:"spotPrice",type:"float",persist:!1},{name:"pips",type:"float",persist:!1,useNull:!0},{name:"wPips",type:"float",persist:!1,useNull:!0},{name:"lPips",type:"float",persist:!1,useNull:!0},{name:"profitLoss",type:"float",persist:!1,useNull:!0},{name:"priceStrike",type:"float",persist:!1},{name:"priceTrig",type:"float",persist:!1},{name:"indexPriceStrike",type:"float",persist:!1},{name:"indexPriceTrig",type:"float",persist:!1},{name:"revoked",type:"float",defaultValue:!1},{name:"chainType",type:"string"},{name:"chainLength",type:"int"}],constructor:function(){var e=this;e.mixins.observable.constructor.call(e),Ext.data.Model.prototype.constructor.apply(this,arguments),e.calculateTimeInterval()},getInstrument:function(){var e;return this.get("instrument")&&(e=Ext.getStore("Instruments").getById(this.get("instrument"))),e},onMarketTick:function(e){var t=this;e=e||t.getInstrument().getId();var n,i,r,o=t.get("optionType"),a=t.get("priceStrike"),s=t.getInstrument().get("pipValue"),l=t.get("amount");"CALL"==o?(n=e.bidPrice,r=Ext.Number.toFixed((n-a)/s,1)):(n=e.askPrice,r=Ext.Number.toFixed((a-n)/s,1)),i=r>0?l*t.get("payOutPerc")/100:l*t.get("refundPercent")/100-l,t.data.spotPrice=n,t.data.profitLoss=i,t.data.pips=parseFloat(r)},onTouchMarketTick:function(e){var t=this;e=e||t.getInstrument().getId();var n,i,r,o,a=t.get("optionType"),s=(t.get("touchPrice"),t.getInstrument().get("pipValue")),l=t.get("amount");"CALL"==a?(n=e.bidPrice,r=Ext.Number.toFixed((t.get("touchPrice")-e.bidPrice)/s,1),o=Ext.Number.toFixed((e.bidPrice-t.get("touchPriceSymmetric"))/s,1)):(r=Ext.Number.toFixed((t.get("touchPrice")-e.askPrice)/s,1),o=Ext.Number.toFixed((e.askPrice-t.get("touchPriceSymmetric"))/s,1),n=e.askPrice),i=r>0?l*t.get("payOutPerc")/100:l*t.get("refundPercent")/100-l,t.data.spotPrice=n,t.data.profitLoss=l*t.get("payOutPerc")/100,t.data.wPips=parseFloat(r),t.data.lPips=parseFloat(o)},isCall:function(){return"CALL"==this.get("optionType")},isPut:function(){return"PUT"==this.get("optionType")},canBeCancelled:function(){return this.isPending()},isPending:function(){return"PENDING"==this.get("orderState")},isProcessing:function(){return"PROCESSING"==this.get("orderState")},isActive:function(){return"EXECUTING"==this.get("orderState")},isCompleted:function(){var e=this.get("orderState");return"FILLED"==e||"REJECTED"==e||"CANCELLED"==e},isRejected:function(){return"REJECTED"==this.get("orderState")},isCancelled:function(){return"CANCELLED"==this.get("orderState")},isRevoked:function(){return this.get("revoked")},isChainCancel:function(){return this.get("chainLength")>0},getMessageText:function(){var e=this.get("msg");return e.params?e.params.reason:e.code},playSoundFx:function(){var e=this,t=e.get("orderState"),n=t;if("FILLED"==t||"REJECTED"==t||"EXECUTING"==t){"FILLED"==t&&(n=e.get("profitLoss")>0?"profit":"loss");try{new Audio("./resources/audio/"+n+".mp3").play()}catch(i){BP.log("warn","no audio support!")}}},calculateTimeInterval:function(){var e=this,t=e.get("startTime")-e.get("creationTime"),n=e.get("startTime"),i=0;e.isPending()&&e.isREG()?(t=e.get("timeToLive")-e.get("creationTime"),n=e.get("timeToLive")):i=e.get("trigTime")-e.get("startTime"),e.data.pendingTime=t,e.data.pendingLeft=t,e.data.pendingStart=n,e.data.executingTime=i,e.data.executingLeft=i},onStateChange:function(e){var t=this;if(t.isActive())t._generateOrderData(),t.getPendingOrdersStore().remove(t),t.getActiveOrdersStore().add(t);else if(t.isCompleted()){var n=t.getInstrument().getId();t.getPendingOrdersStore().remove(t),t.getActiveOrdersStore().remove(t),t.getHistoryStore().add(t),e&&(t.getMarketStore().unTick(n,t.onMarketTick,t),BP.getApplication().getClock().un("tick",t.onClockTick,t),t.set("store","history"))}t.calculateTimeInterval(),t.fireEvent("statechanged",t.get("orderState")),BP.localSettings.get("playSounds")&&t.playSoundFx()},getProgressConfig:function(){var e,t,n,i=this;return i.isPending()||i.isProcessing()?(e=i.get("pendingTime"),t=i.get("pendingLeft"),n="#E2E2E2"):(e=i.get("executingTime"),t=i.get("executingLeft"),n=Ext.Array.contains(["TOUCH"],i.get("orderType"))?i.colorMap()[2]:i.get("pips")>0?i.colorMap()[0]:i.colorMap()[1]),{percent:(e-t)/(e/100),color:n,textColor:i.colorMap()[3]}},colorMap:function(){var e=this.getTheme(),t={"default":["#D3EAC9","#FBCFD0","#E2E2E2","#000"],dark:["#67704b","#694338","#252b31","#f0f0f0"]};return t[e]},getTheme:function(){var e=Ext.util.Cookies.get("platformTheme");return this.validUI(e)?e:"default"},validUI:function(e){var t=["default","dark"];return!!~t.indexOf(e)},onClockTick:function(e){var t=this,n=t.get("startTime")-e,i=0;t.isPending()&&t.isREG()?n=t.get("timeToLive")-e:i=t.get("trigTime")-e,BP.model.Account.get("revokeTimeSec")&&t.isREG()&&(t.data.revoked=e-t.get("startTime")<=BP.model.Account.get("revokeTimeSec")),t.data.pendingLeft=n,t.data.executingLeft=i},showOnChart:function(e){e._createOrder(this)},removeFromChart:function(e){e._removeOrder(this)},getPendingOrdersStore:function(){return this.pendingOrdersStore||(this.pendingOrdersStore=Ext.getStore("PendingOrders"))},getActiveOrdersStore:function(){return this.ordersStore||(this.ordersStore=Ext.getStore("Orders"))},getHistoryStore:function(){return this.historyStore||(this.historyStore=Ext.getStore("History"))},getMarketStore:function(){return this.marketStore||(this.marketStore=Ext.getStore("Market"))},isREG:function(){return"REG"==this.get("orderType")},isTOUCH:function(){return"TOUCH"==this.get("orderType")}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[BP.model,"ExecutingOrder"],0),Ext.cmd.derive("BP.view.grid.executing.ExecutingModel",Ext.app.ViewModel,{data:{orderSum:0,isRevVisable:!0,translate:{orderActiveTitle:"order-grid.active-title",orderId:"order-grid.order-id-header",orderType:"order-grid.order-type-header",orderSide:"order-grid.side-header",orderInstrument:"order-grid.instrument-header",orderPayInPayOut:"order-grid.pay-in-pay-out-header",orderMaturity:"order-grid.maturity-header",orderStrikePrice:"order-grid.strike-price-header",orderSpotPrice:"order-grid.spot-price-header",orderDistance:"order-grid.distance-header",orderState:"history-grid.state-header",orderExpire:"order-grid.expire-header",orderExpirationTime:"order-grid.expiration-time-header",orderChainType:"order-grid.chain-type-header",orderContractsLeft:"order-grid.chain-contracts-left-header",orderChainCancel:"order-grid.chain-cancel-header"}},formulas:{tplGridTitle:{bind:{orderSum:"{orderSum}",orderActiveTitle:"{translate.orderActiveTitle}"},get:function(e){var t=["{orderActiveTitle} {[this.hasOrder(values.orderSum)]}</span>",{hasOrder:function(e){return e?"("+e+")":""}}];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.executing"],0,[BP.view.grid.executing,"ExecutingModel"],0),Ext.cmd.derive("BP.view.plugin.RowProgressBar",Ext.AbstractPlugin,{updateMethodName:"getProgressConfig",init:function(e){var t=this,n=e.getView(),i=e.columns;t.grid=e,t.view=n,t.columns=i;for(var r in i)this.addColumnRenderer(i[r]);n.on({boxready:t.onViewBoxReady,scope:t})},onViewBoxReady:function(){this.calculatePercentage()},calculatePercentage:function(){for(var e,t,n=this,i=n.columns,r=0,o={},a=0,s=i.length;s>a;a++)e=i[a],e.isVisible()&&(t=e.getWidth(),o[a]={width:t},r+=t);var l,d,u=0;for(a in o)l=o[a],d=l.width/(r/100),l.startPercent=u,l.endPercent=l.startPercent+d,u=l.endPercent;n.cols=o,n.onePercentWidth=r/100},addColumnRenderer:function(e){var t,n=this,i=e.renderer,r="actioncolumn"==e.getXType()?e:n.grid;t=Ext.isFunction(i)?function(){var e=i.apply(r,arguments);return Ext.callback(n.progressRenderer,n,arguments),e}:Ext.bind(n.progressRenderer,n),e.renderer=t},progressRenderer:function(e,t,n,i,r){if(this.cols){var o,a,s=this.cols[r],l=n[this.updateMethodName]();return(a=this.getStyle(s,l))&&(o=t.style,t.style=o+(o?";":"")+a),e}},getStyle:function(e,t){t=t||{};var n=t.color,i=t.percent,r=window.rtlEnable?"left":"right",o="";if(!i||!n)return o;if(i>e.endPercent)o="background: "+n;else if(i>e.startPercent&&i<e.endPercent){var a=(i-e.startPercent)*this.onePercentWidth,s=a/(e.width/100),o="background: linear-gradient(to "+r+", {0} {1}%, {2} {3}%)";o=Ext.String.format(o,n,s,"transparent",s)}return o}},0,0,0,0,["plugin.bp-row-progress-bar"],0,[BP.view.plugin,"RowProgressBar"],0),Ext.cmd.derive("BP.view.grid.executing.Executing",Ext.grid.GridPanel,{gridContextMenu:!0,allowDeselect:!0,contextMenuCfg:{shadow:!1,delayMouseLeave:1e3},contextMenuItemsCfg:{showOnChart:{xtype:"menuitem",text:"Show on chart",iconCls:"show-on-chart-icon"},hideFromChart:{xtype:"menuitem",text:"Hide from chart",iconCls:"hide-from-chart-icon"},showOrderDetails:{xtype:"menuitem",text:"Order info",iconCls:"show-order-details-icon"}},store:"ExecutingOrders",bind:{title:"{tplGridTitle}"},viewConfig:{emptyText:"You have no active options"},cls:"executing-order-grid",controller:"bp-executing",viewModel:"executing",resizable:!0,listeners:{itemdblclick:"onOrderGridDblClick",itemclick:{fn:"onOrderGridClick",buffer:200},itemcontextmenu:"onOrderGridContextMenu"},plugins:[{ptype:"bp-row-progress-bar",updateMethodName:"getProgressConfig"}],initComponent:function(){var e,t=this;e={columns:t.buildColumns(t)},Ext.apply(t,e),Ext.grid.Panel.prototype.initComponent.apply(this,arguments)},getGridContextMenu:function(){return!!this.gridContextMenu},buildColumns:function(e){var t=[{bind:{text:"{translate.orderId}"},dataIndex:"orderId",align:"center",width:150},{bind:{text:"{translate.orderType}"},dataIndex:"orderType",align:"center",width:75,renderer:e.formatUtil.orderType},{bind:{text:"{translate.orderSide}"},dataIndex:"optionType",align:"center",width:75,renderer:e.formatUtil.optionType},{bind:{text:"{translate.orderInstrument}"},dataIndex:"instrument",align:"center",width:120},{bind:{text:"{translate.orderPayInPayOut}"},dataIndex:"amount",align:"center",width:150,renderer:e.formatUtil.orderPay},{bind:{text:"{translate.orderMaturity}"},dataIndex:"maturity",align:"center",width:85,renderer:e.formatUtil.orderMaturity},{bind:{text:"{translate.orderStrikePrice}"},dataIndex:"priceStrike",align:"center",width:120,renderer:e.priceRenderer},{bind:{text:"{translate.orderSpotPrice}"},dataIndex:"spotPrice",align:"center",width:110,renderer:e.spotPriceRenderer},{bind:{text:"{translate.orderDistance}"},dataIndex:"pips",align:"center",width:120,renderer:e.formatUtil.orderDistance},{bind:{text:"{translate.orderState}"},dataIndex:"orderState",align:"center",width:100,renderer:e.formatUtil.state},{bind:{text:"{translate.orderExpire}"},dataIndex:"executingLeft",align:"center",width:75,renderer:e.timeLeftRenderer},{bind:{text:"{translate.orderChainType}"},dataIndex:"chainType",align:"center",width:90},{bind:{text:"{translate.orderContractsLeft}"},dataIndex:"chainLength",align:"center",width:100,renderer:e.chainLengthRenderer},{bind:{text:"{translate.orderChainCancel}"},align:"center",xtype:"actioncolumn",width:100,getClass:function(e,t,n){return n.isChainCancel()?"bp-cancel-chain":"bp-cant-revoked-order"},handler:"onChainCancel"}];return"fxfinpro"==BP.config("whitelabel")?e.buildAdditionalColumns(e,t):t},buildAdditionalColumns:function(e,t){return t.push({bind:{text:"{translate.orderExpirationTime}"},dataIndex:"trigTime",align:"center",width:130,renderer:e.formatUtil.gmtDateTime},{xtype:"actioncolumn",width:40,items:[{getClass:function(e,t,n){return n.isRevoked()?"bp-revoked-order":"bp-cant-revoked-order"},handler:"onOrderRevoked"}]}),t},payRenderer:function(e,t,n){var i,r,o=n.get("ccy");return e=this.formatUtil.money(e,o),Ext.Array.contains(["TOUCH"],n.get("orderType"))?e+" / "+n.get("payOutPerc")+"%":(i=n.get("profitLoss")||-e,r=i>0?"bp-positive":"bp-negative",i=this.formatUtil.money(i,o),e+' / <span class="'+r+'">'+i+"</span>")},pipsRenderer:function(e,t,n){return n.isTOUCH()?n.isCall()?Ext.util.Format.format('<span style="direction: ltr" class="order-call-win">-{0} pips</span> / <span class="order-call-lose">-{1} pips</span>',n.get("wPips"),n.get("lPips")):Ext.util.Format.format('<span style="direction: ltr"  class="order-call-lose">{0} pips</span> / <span class="order-call-win">{1} pips</span>',n.get("lPips"),n.get("wPips")):Ext.isNumber(e)?(e>0?t.tdCls="bp-positive":t.tdCls="bp-negative",e+" pips"):""},priceRenderer:function(e,t,n){var i=n.getInstrument(),r="";if(e)switch(n.get("orderType")){case"TOUCH":return n.isCall()?Ext.util.Format.format('<span class="order-call-win">{0}</span> / <span class="order-call-lose">{1}</span>',n.get("touchPrice"),n.get("touchPriceSymmetric")):Ext.util.Format.format('<span class="order-call-lose">{0}</span> / <span class="order-call-win">{1}</span>',n.get("touchPriceSymmetric"),n.get("touchPrice"));default:return r="PUT"==n.get("optionType")?"ASK ":"BID ",this.formatUtil.price(e,i.get("priceScale"))}},spotPriceRenderer:function(e,t,n){var i=n.getInstrument(),r="";return e&&"REG"==n.get("orderType")?r="PUT"==n.get("optionType")?"ASK ":"BID ":e&&"TOUCH"==n.get("orderType")&&(r="PUT"==n.get("optionType")?"ASK ":"BID "),r+this.formatUtil.price(e,i.get("priceScale"))},maturityRenderer:function(e,t,n){return t.tdAttr='data-qtip="Expected expiry: '+this.formatUtil.gmtDateTime(n.get("trigTime"))+'"',this.formatUtil.secondsToTime(60*e)},isRevoked:function(e,t,n){n.isRevoked()||(t.tdAttr='style="display: none"')},timeLeftRenderer:function(e,t,n){return t.tdAttr='data-qtip="Expected expiry: '+this.formatUtil.gmtDateTime(n.get("trigTime"))+'"',this.formatUtil.msToString(e)},timeExecutingRenderer:function(e){return this.formatUtil.gmtDateTime(e)},chainLengthRenderer:function(e,t,n){return n.get("chainType")||e>0?e:""}},0,["executing-order-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","executing-order-grid"],{component:!0,box:!0,container:!0,panel:!0,tablepanel:!0,gridpanel:!0,grid:!0,"executing-order-grid":!0},["widget.executing-order-grid"],0,[BP.view.grid.executing,"Executing"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.grid.history.HistoryController",Ext.app.ViewController,{init:function(){var e=this;e.instrumentStore=Ext.getStore("StocksCFD"),e.transport=BP.getTransport(),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"pending-order-grid":{beforerender:"onBeforeRender"}}},onBeforeRender:function(e){e.on({mouseover:"onShowInstrumentTooltip",element:"el",delegate:"span",scope:this})},onShowInstrumentTooltip:function(e,t){var n=this.instrumentStore.getById(t.innerText);n&&t.setAttribute("data-qtip",n.get("name"))},clearOptionLog:function(e,t,n){Ext.Array.each(n.up("panel").getView().getNodes(),function(){this.style.display="none"})},playSoundFx:function(e){var t=e.orderState,n=t;if("FILLED"==t||"REJECTED"==t||"EXECUTING"==t){"FILLED"==t&&(n=e.profitLoss>0?"profit":"loss");try{new Audio("./resources/audio/"+n+".mp3").play()}catch(i){BP.log("warn","no audio support!")}}},activateEvent:function(){},suspendEvent:function(){}},0,0,0,0,["controller.bp-history"],0,[BP.view.grid.history,"HistoryController"],0),Ext.cmd.derive("BP.view.grid.history.HistoryModel",Ext.app.ViewModel,{data:{translate:{orderHistoryTitle:"history-grid.title",orderId:"order-grid.order-id-header",parentOrderId:"history-grid.parent-order-id",orderSide:"history-grid.side-header",orderInstrument:"history-grid.instrument-header",orderPayIn:"history-grid.pay-in-header",orderPayOut:"history-grid.pay-out-header",orderMaturity:"order-grid.maturity-header",orderClosed:"history-grid.closed-header",orderStrikePrice:"history-grid.strike-price-header",orderExpirPerfom:"order-grid.order-expiration-price-header",orderState:"history-grid.state-header",orderChainType:"order-grid.chain-type-header",orderContractsLeft:"order-grid.chain-contracts-left-header",orderChainCancel:"order-grid.chain-cancel-header"}},formulas:{isVisable:{get:function(){return"fxfinpro"!=BP.config("whitelabel")}}}},0,0,0,0,["viewmodel.history"],0,[BP.view.grid.history,"HistoryModel"],0),Ext.cmd.derive("BP.view.grid.history.History",Ext.grid.Panel,{store:"HistoryOrders",bind:{title:"{translate.orderHistoryTitle}"},plusOneCount:0,controller:"bp-history",viewModel:"history",cls:"bp-history-order-grid",initComponent:function(){var e=this,t={columns:e.buildColumns(e)};Ext.apply(e,t),Ext.grid.Panel.prototype.initComponent.apply(this,arguments),e.on("show",e.plusOneReset,e)},buildColumns:function(e){return[{bind:{text:"{translate.orderId}"},dataIndex:"orderId",align:"center",width:150},{bind:{text:"{translate.orderSide}"},dataIndex:"optionType",align:"center",width:75,renderer:e.formatUtil.optionType},{bind:{text:"{translate.orderInstrument}"},dataIndex:"instrument",align:"center",width:120,renderer:e.instrumentRenderer},{bind:{text:"{translate.orderPayIn}"},dataIndex:"amount",align:"center",width:150,renderer:e.payInRenderer},{bind:{text:"{translate.orderPayOut}"},dataIndex:"amountPl",align:"center",width:85,renderer:e.payOutRenderer},{bind:{text:"{translate.orderMaturity}"},dataIndex:"maturity",align:"center",width:75,renderer:e.maturityRenderer},{bind:{text:"{translate.orderClosed}"},dataIndex:"trigTime",align:"center",width:120,renderer:e.formatUtil.gmtDateRenderer},{bind:{text:"{translate.orderStrikePrice}"},dataIndex:"priceStrike",align:"center",width:180,renderer:e.priceStrikeRenderer},{bind:{text:"{translate.orderExpirPerfom}"},dataIndex:"priceTrig",align:"center",width:120,renderer:e.priceRenderer},{bind:{text:"{translate.parentOrderId}"},dataIndex:"parentOrderId",align:"center",width:110,renderer:e.parentOrderIdRenderer},{bind:{text:"{translate.orderChainType}"},dataIndex:"chainType",align:"center",width:90},{bind:{text:"{translate.orderContractsLeft}"},dataIndex:"chainLength",align:"center",width:100,renderer:e.chainLengthRenderer},{xtype:"actioncolumn",bind:{hidden:"{isVisable}"},width:20,menuDisabled:!0,resizable:!1,hideable:!1,getClass:function(e,t,n){var i;switch(n.get("orderState")){case"FILLED":i="Expiration";break;case"REVOKED":i="Revoke"}return i?(t.tdAttr=Ext.String.format('data-qtip="{0} Ask : {1}  / {2} Bid : {3}"',i,n.get("currentAsk"),i,n.get("currentBid")),"bp-icon-more-info"):void 0}},{bind:{text:"{translate.orderState}"},dataIndex:"orderState",align:"right",width:100,renderer:e.stateRenderer}]},instrumentRenderer:function(e,t,n){var e=n.getInstrument();try{return e.getId()}catch(i){}},payInRenderer:function(e,t,n){return this.formatUtil.money(e,n.get("ccy"))},payOutRenderer:function(e,t,n){return e=e||0,t.tdCls=0==e?"bp-none":e>0?"bp-positive":"bp-negative",this.formatUtil.money(e,n.get("ccy"))},stateRenderer:function(e,t,n){switch(e){case"REJECTED":t.tdCls="bp-icon-important",t.tdAttr='data-qtip="'+n.getMessageText()+'"';break;case"FILLED":t.tdCls="bp-icon-ok";break;case"REVOKED":t.tdCls="bp-icon-revoked";break;case"CANCELLED":t.tdCls="bp-icon-canceled"}return e},maturityRenderer:function(e,t,n){return Ext.Array.contains(["MCO","PAIR"],n.get("orderType"))?" 1 session":this.formatUtil.secondsToTime(60*e)},plusOne:function(){this.plusOneCount++,this.setTitle(BP.translate("history-grid.title")+" ("+this.plusOneCount+")")},plusOneReset:function(){this.plusOneCount=0,BP.localSettings.get("playSounds")&&this.playSoundFx(),this.setTitle(BP.translate("history-grid.title"))},playSoundFx:function(){var e=this,t=e.get("orderState"),n=t;if("FILLED"==t||"REJECTED"==t||"EXECUTING"==t){"FILLED"==t&&(n=e.get("profitLoss")>0?"profit":"loss");try{new Audio("./resources/audio/"+n+".mp3").play()}catch(i){BP.log("warn","no audio support!")}}},priceStrikeRenderer:function(e,t,n){var i="";if(e)switch(n.get("orderType")){case"TOUCH":return n.isCall()?Ext.util.Format.format('<span class="order-call-win">{0}</span> / <span class="order-call-lose">{1}</span>',n.get("touchPrice"),n.get("touchPriceSymmetric")):Ext.util.Format.format('<span class="order-call-lose">{0}</span> / <span class="order-call-win">{1}</span>',n.get("touchPriceSymmetric"),n.get("touchPrice"));default:return i="PUT"==n.get("optionType")?"ASK ":"BID ",this.formatUtil.priceRenderer(e)}},priceRenderer:function(e){return this.formatUtil.priceRenderer(e)},parentOrderIdRenderer:function(e){return e>0?e:""},chainLengthRenderer:function(e,t,n){return n.get("chainType")||e>0?e:""}},0,["history-order-grid"],["component","box","container","panel","tablepanel","gridpanel","grid","history-order-grid"],{component:!0,box:!0,container:!0,panel:!0,tablepanel:!0,gridpanel:!0,grid:!0,"history-order-grid":!0},["widget.history-order-grid"],0,[BP.view.grid.history,"History"],function(){this.prototype.formatUtil=BP.util.Format}),Ext.cmd.derive("BP.view.toolbar.StatusBarModel",Ext.app.ViewModel,{data:{account:{equity:"",usableMargin:"",currency:"",newMessages:0},translate:{equityText:"viewport.equity",availableMarginText:"viewport.available-margin"}},formulas:{tplEquity:{bind:{equity:"{account.equity}",currency:"{account.currency}",equityText:"{translate.equityText}"},get:function(e){var t=['<span>{equityText}:</span> {equity:number( "0,000.00" )} {currency}'];return Ext.create("Ext.XTemplate",t).apply(e)}},tplUsableMargin:{bind:{usableMargin:"{account.usableMargin}",currency:"{account.currency}",availableMarginText:"{translate.availableMarginText}"},get:function(e){var t=['<span>{availableMarginText}:</span> {usableMargin:number( "0,000.00" )} {currency}'];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.status-bar"],0,[BP.view.toolbar,"StatusBarModel"],0),Ext.cmd.derive("BP.view.window.messages.MessagesModel",Ext.app.ViewModel,{data:{translate:{viewportMessagesTitle:"viewport.messages-title"}},stores:{dataMessages:{model:"Messages",data:[{id:1,title:"Alert",msg:"Connected to d-ja-gva-91-191, ping 70 ms",creationTime:+new Date},{id:2,title:"Warning",msg:"AdBlock or other ad blocking app is enabled",creationTime:+new Date},{id:2,title:"Warning",msg:"Testing Connections. Please wait",creationTime:+new Date},{id:3,title:"Personal",msg:"change settings for EUR/USD",creationTime:+new Date}]}}},0,0,0,0,["viewmodel.messages"],0,[BP.view.window.messages,"MessagesModel"],0),Ext.cmd.derive("BP.view.window.messages.MessagesController",Ext.app.ViewController,{onBrowserWindowResize:function(e){e.center()},onShow:function(e){e.anim&&(e.anim.listeners=e.anim.listeners||{},Ext.apply(e.anim.listeners,{beforeanimate:function(){e.center()}}),e.getEl().setVisible(!0,e.anim))},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.hide()}},0,0,0,0,["controller.messages"],0,[BP.view.window.messages,"MessagesController"],0),Ext.cmd.derive("BP.view.window.messages.Messages",BP.view.window.Window,{cls:"bp-messages-window",width:800,rtl:!!window.rtlEnable,autoShow:!1,scrollable:!0,border:!1,shadow:!1,closable:!1,resizable:!1,modal:!0,draggable:!1,autoScroll:!1,controller:"messages",viewModel:"messages",tools:[{renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],bind:{title:"{translate.viewportMessagesTitle}"},initComponent:function(){var e,t=this;e={items:[{xtype:"grid",header:!1,hideHeaders:!0,viewConfig:{enableTextSelection:!0},columnLines:!0,enableLocking:!0,store:"Messages",iconCls:"icon-grid",flex:1,height:450,columns:t.buildColumns(t)}]},Ext.apply(t,e),BP.view.window.Window.prototype.initComponent.apply(this,arguments)},buildColumns:function(){return[{text:"Message",flex:1,dataIndex:"text"}]}},0,["bp-messages-window"],["component","box","container","panel","window","bp-window","bp-messages-window"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-messages-window":!0},["widget.bp-messages-window"],0,[BP.view.window.messages,"Messages"],0),Ext.cmd.derive("BP.view.toolbar.StatusBarController",Ext.app.ViewController,{
models:["Account"],msgWin:!1,init:function(){var e=this,t={msgCmp:e.lookupReference("messages")};Ext.app.ViewController.prototype.init.apply(this,arguments),BP.util.Clock.on("tick",e.onClockTick,e),BP.util.Clock.on("tick",e.deleteTtlTime,e),BP.model.Account.on("datachange",e.onAccountDataChange,e),e.msgWin=Ext.widget("bp-messages-window"),e.msgWin.on({show:e.showMsgWin,hide:e.hideMsgWin,scope:e}),Ext.getStore("Messages").on({add:e.addNewMessage,scope:e}),Ext.apply(e,t),Ext.app.ViewController.prototype.init.apply(this,arguments)},addNewMessage:function(){var e=this,t=e.msgCmp.getText();e.msgCmp.addCls("warm"),e.msgCmp.setText(++t),t&&e.msgWin.isHidden()&&e.msgWin.show()},onClockTick:function(e){var t=(this.lookupReference("status_bar"),this.lookupReference("clock")),n=BP.localSettings.get("localTime")?BP.translate("viewport.local-time"):BP.translate("viewport.server-time");t&&t.setText("<span>"+n+":</span> "+BP.util.Format.gmtTimeString(e))},showMessages:function(){this.msgWin.show()},onAccountDataChange:function(e){var t=this,n=t.getView(),i=n.getViewModel();i.set("account",e.getData())},showMsgWin:function(){var e=this;e.msgCmp.removeCls("warm")},hideMsgWin:function(){var e=this;e.msgCmp.removeCls("warm"),e.msgCmp.setText(0)},deleteTtlTime:function(){}},0,0,0,0,["controller.status-bar"],0,[BP.view.toolbar,"StatusBarController"],0),Ext.cmd.derive("BP.view.toolbar.StatusBar",Ext.toolbar.Toolbar,{cls:"bp-status-bar",controller:"status-bar",viewModel:"status-bar",items:[{xtype:"tbtext",referenceHolder:!0,reference:"credit_line",bind:{html:"{tplEquity}"}}," ","-"," ",{xtype:"tbtext",reference:"free_margin",referenceHolder:!0,bind:{html:"{tplUsableMargin}"}},"->","-",{xtype:"tbtext",reference:"clock",referenceHolder:!0},"->","-",{xtype:"button",reference:"messages",cls:"messages-icon empty",text:"0",handler:"showMessages",iconCls:"fa fa-envelope fa-lg"}]},0,["status-bar"],["component","box","container","toolbar","status-bar"],{component:!0,box:!0,container:!0,toolbar:!0,"status-bar":!0},["widget.status-bar"],0,[BP.view.toolbar,"StatusBar"],0),Ext.cmd.derive("BP.view.menu.MainMenuModel",Ext.app.ViewModel,{data:{whitelabel:"",instance:"",channel:!0,translate:{viewportMyReportsLabel:"viewport.my-reports",viewportReconnectLabel:"viewport.reconnect",viewportSettingsLabel:"viewport.settings",viewportWorkspaceLabel:"viewport.workspace",viewportWorkspaceOpenLabel:"viewport.workspace_open",viewportWorkspaceSaveAsLabel:"viewport.workspace_save_as",viewportSupportChatLabel:"viewport.supportchat",viewportMessagesTitle:"viewport.messages-title",viewportRegistrationLiveLabel:"viewport.registration-live",viewportLogOutLabel:"login.log-out"}},formulas:{controlRegistrationLive:{get:function(){var e=(this.get("whitelabel"),this.get("instance"));return!(Ext.Array.contains(["standart","europe"],this.get("whitelabel"))&&"DEMO"==e)}}}},0,0,0,0,["viewmodel.main-menu"],0,[BP.view.menu,"MainMenuModel"],0),Ext.cmd.derive("BP.view.window.settings.window.WorkspaceController",Ext.app.ViewController,{listen:{component:{"bp-settings-window-workspace":{browserwindowresize:"onBrowserWindowResize",show:"onShow"}}},onBrowserWindowResize:function(e){e.center()},onShow:function(e){e.anim&&(e.anim.listeners=e.anim.listeners||{},Ext.apply(e.anim.listeners,{beforeanimate:function(){e.center()}}),e.getEl().setVisible(!0,e.anim))},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()},onLoadWorkspace:function(e){var t,n=e.getEl().query('input[type="file"]')[0].files[0],i=e.up("bp-settings-window-workspace"),r=new FileReader;i.body.mask("Loading settings from local file..."),r.onload=function(e){var n=e.target.result,i=Ext.decode(BP.ux.data.Private.getApi().decrypt(n));delete i.ticket,delete i.session_id,delete i.login,i.allowReload=!0,t=Ext.ComponentQuery.query("bp-settings-window")[0],t&&t.getController().setDataFromFile(i)},r.readAsText(n,"UTF-8"),i.body.unmask(),setTimeout(function(){i.close()},1e3)}},0,0,0,0,["controller.bp-settings-window-workspace"],0,[BP.view.window.settings.window,"WorkspaceController"],0),Ext.cmd.derive("BP.view.window.settings.window.WorkspaceModel",Ext.app.ViewModel,{data:{translate:{viewportWorkspaceTitle:"viewport.workspace",viewportWorkspaceOpenLabel:"viewport.workspace_open",viewportWorkspaceSaveAsLabel:"viewport.workspace_save_as"}}},0,0,0,0,["viewmodel.bp-settings-window-workspace"],0,[BP.view.window.settings.window,"WorkspaceModel"],0),Ext.cmd.derive("BP.view.window.settings.window.Workspace",BP.view.window.Window,{cls:"bp-settings-window-workspace",controller:"bp-settings-window-workspace",viewModel:"bp-settings-window-workspace",title:"Workspace",frame:!0,width:400,height:110,border:!1,shadow:!1,closable:!1,autoShow:!0,resizable:!1,modal:!0,draggable:!1,autoScroll:!1,tools:[{renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],anim:{duration:1e3,easing:"easeIn"},bind:{title:"{translate.viewportWorkspaceTitle}"},closeAction:"destroy",bodyPadding:5,layout:"anchor",items:[{xtype:"form",frame:!1,border:!1,layout:"anchor",items:[{xtype:"filefield",regex:/^.*\.(txt)$/,regexText:"Only TXT files allowed",name:"file",fieldLabel:"File",labelWidth:50,msgTarget:"side",allowBlank:!1,anchor:"100%",buttonText:"Select file...",listeners:{change:"onLoadWorkspace"}}]}]},0,["bp-settings-window-workspace"],["component","box","container","panel","window","bp-window","bp-settings-window-workspace"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-settings-window-workspace":!0},["widget.bp-settings-window-workspace"],0,[BP.view.window.settings.window,"Workspace"],0),Ext.cmd.derive("BP.view.window.SettingsController",Ext.app.ViewController,{init:function(){var e=this;e.settings=e.getView(),e.settingsForm=e.settings.down("form"),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-settings-window":{browserwindowresize:"onBrowserWindowResize",show:"onShow"}}},onBrowserWindowResize:function(e){e.center()},onShow:function(e){e.anim&&(e.anim.listeners=e.anim.listeners||{},Ext.apply(e.anim.listeners,{beforeanimate:function(){e.center()}}),e.getEl().setVisible(!0,e.anim))},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()},onSaveSettings:function(){var e,t,n=this.settingsForm.getForm();n.isValid()&&(e=n.getFieldValues(),t=BP.localSettings.get("defaultInstrument"),e.defaultInstruments.length&&(e.defaultInstruments=Ext.Array.unique(e.defaultInstruments),e.defaultInstruments=Ext.Array.remove(e.defaultInstruments,t)),BP.Bootstrap.saveCurrentLocale(e.language),BP.localSettings.set(e),BP.localSettings.set("allowReload",!0),Ext.util.Cookies.set("platformTheme",e.platformTheme),BP.util.Encode.setSettings({service:"ticket"},"uscr"),document.location.reload())},getInstrumentFromGrids:function(e){var t=Ext.ComponentQuery.query("pending-order-grid")[0],n=Ext.ComponentQuery.query("executing-order-grid")[0];return t.store.each(function(t){e.push(t.get("instrument"))}),n.store.each(function(t){e.push(t.get("instrument"))}),Ext.encode(Ext.Array.unique(e),!0)},showWorkspaceWindow:function(){Ext.widget("bp-settings-window-workspace")},setDataFromFile:function(e){var t,n,i,r,o,a,s,l,d,u,c,h;t=this.getView(),n=t.down("bp-form-language"),i=t.down("bp-instrumentfield"),r=t.down("bp-settings-tab-general > instruments-selector > itemselector"),o=t.down('combobox[name="localTime"]'),a=t.down('checkbox[name="noConfirmTrade"]'),s=t.down('checkbox[name="playSounds"]'),c=Ext.ComponentQuery.query("bp-market-chart-ui")[0],l=t.down('combobox[name="defaultChartPeriod"]'),d=t.down('combobox[name="defaultChartOfferSide"]'),u=t.down('combobox[name="defaultChartPresentationType"]'),n.setValue(e.language),i.setValue(e.defaultInstrument),r.setValue(e.defaultInstruments),o.setValue(e.localTime),a.setValue(e.noConfirmTrade),s.setValue(e.playSounds),l.setValue(e.defaultChartPeriod),d.setValue(e.defaultChartOfferSide),u.setValue(e.defaultChartPresentationType),c&&(h=c.getController(),h.addAllIndicatorsFromFile(e)),BP.localSettings.set(e)}},0,0,0,0,["controller.settings"],0,[BP.view.window,"SettingsController"],0),Ext.cmd.derive("BP.view.window.SettingsModel",Ext.app.ViewModel,{data:{windowHeight:500,defaultTimeZone:1,defaultDuration:{hours:0,minutes:1},noConfirmTrade:!1,playSounds:!1,chartDefaultPeriod:"TICK",chartDefaultOfferSide:"BID",chartDefaultPresentationType:"LINE",translate:{windowSettingsTitle:"settings.title",tabsGeneralName:"settings.tabs-general-name",tabsChartName:"settings.tabs-chart-name",defaultInstrumentFieldLabel:"settings.default_instrument",timezoneFieldLabel:"settings.timezone",durationFieldLabel:"settings.default_duration",noConfirmationTradingFieldLabel:"settings.no_confirmation_trading",playSoundsFieldLabel:"settings.play_sounds",defaultPeriodFieldLabel:"settings.default_period",defaultOfferSideFieldLabel:"settings.default_offer_side",defaultPresentationTypeFieldLabel:"settings.default_presentation_type",defaultThemeFieldLabel:"settings.platform-theme",saveSettingsToFile:"settings.save-settings-to-file",loadSettingsFromFile:"settings.load-settings-from-file"}},formulas:{duration:{get:function(e){var t=e("defaultDuration");return{hours:t.hours,minutes:t.minutes}},set:function(e){var t=e%60,n=(e-t)/60;this.set("defaultDuration",{hours:n,minutes:t})}}}},0,0,0,0,["viewmodel.settings"],0,[BP.view.window,"SettingsModel"],0),Ext.cmd.derive("BP.view.selector.InstrumentsSelector",Ext.form.Panel,{width:500,height:250,layout:"fit",border:!1,id:"bp-instruments-selector",cls:"bp-instruments-selector",translate:function(){this.setFieldLabel(BP.translate("settings.default_instruments"))},initComponent:function(){var e,t=this;e={items:t.buildItems(t)},Ext.apply(t,e),Ext.form.Panel.prototype.initComponent.apply(this,arguments)},buildItems:function(){return[{xtype:"itemselector",store:Ext.getStore("Instruments"),displayField:"instrument",valueField:"instrument",labelWidth:125,labelSeparator:"",queryMode:"local",autoSelect:!0,forceSelection:!0,matchFieldWidth:!1,name:"defaultInstruments",multiSelect:!0,allowBlank:!0,value:BP.localSettings.get("defaultInstruments"),anchor:"100%",id:"itemselector-field",msgTarget:"side",fromTitle:BP.translate("settings.default_instruments_from_title"),toTitle:BP.translate("settings.default_instruments_to_title"),listeners:{added:function(){this.setFieldLabel(BP.translate("settings.default_instruments"))}},buttonsText:{top:"Move to Top",up:"Move Up",add:"Add to Selected",remove:"Remove from Selected",down:"Move Down",bottom:"Move to Bottom"}}]}},0,["instruments-selector"],["component","box","container","panel","form","instruments-selector"],{component:!0,box:!0,container:!0,panel:!0,form:!0,"instruments-selector":!0},["widget.instruments-selector"],0,[BP.view.selector,"InstrumentsSelector"],0),Ext.cmd.derive("BP.view.window.settings.tabs.GeneralController",Ext.app.ViewController,{listen:{component:{"bp-settings-tab-general":{beforerender:"onBeforeRender"}}},onBeforeRender:function(e){var t,n,i,r,o,a,s,l,d;t=e.getViewModel(),n=BP.localSettings.get("localTime"),i=BP.localSettings.get("defaultDuration"),r=BP.localSettings.get("noConfirmTrade"),o=BP.localSettings.get("playSounds"),a=BP.localSettings.get("platformTheme")||"default",s=BP.localSettings.get("showTips"),l=BP.localSettings.get("showTipsHints"),d=BP.localSettings.hasOwnProperty("id")?BP.localSettings.get("language"):Ext.util.Cookies.get("locale"),t&&(t.set("language",d||language),t.set("defaultTimeZone",n),t.set("duration",i),t.set("noConfirmTrade",r),t.set("playSounds",o),t.set("platformTheme",a),t.set("showTips",s),t.set("showTipsHints",l))}},0,0,0,0,["controller.bp-settings-tab-general"],0,[BP.view.window.settings.tabs,"GeneralController"],0),Ext.cmd.derive("BP.view.window.settings.tabs.GeneralModel",Ext.app.ViewModel,{data:{language:"en",defaultTimeZone:1,defaultDuration:{hours:0,minutes:1},noConfirmTrade:!1,playSounds:!1,translate:{formLanguageFieldLabel:"login.language-field-label",windowSettingsTitle:"settings.title",tabsGeneralName:"settings.tabs-general-name",defaultInstrumentFieldLabel:"settings.default_instrument",timezoneFieldLabel:"settings.timezone",durationFieldLabel:"settings.default_duration",noConfirmationTradingFieldLabel:"settings.no_confirmation_trading",playSoundsFieldLabel:"settings.play_sounds",shortHourSymbol:"trade-panel.short-hour",shortMinutesSymbol:"trade-panel.short-minutes",payoutRefundFieldLabel:"trade-panel.payout-refund",defaultThemeFieldLabel:"settings.platform-theme",hideOrderOpeningHints:"settings.hide_order_opening_hints"}},formulas:{duration:{get:function(e){var t=e("defaultDuration");return{hours:t.hours,minutes:t.minutes}},set:function(e){var t=e%60,n=(e-t)/60;this.set("defaultDuration",{hours:n,minutes:t})}}},stores:{dataLanguages:{fields:[{name:"code",type:"string",defaultValue:""},{name:"name",type:"string",defaultValue:""}],data:[["zh","中文 (Chinese)"],["de","Deutsch (German)"],["fa","زبان �?ارسی"],["fr","Français (French)"],["hu","Hungarian"],["en","English (English)"],["ru","Ру�?�?кий (Russian)"],["es","Español (Spanish)"],["pl","Polski"],["it","Italiano"],["pt","Português"]]}}},0,0,0,0,["viewmodel.bp-settings-tab-general"],0,[BP.view.window.settings.tabs,"GeneralModel"],0),Ext.cmd.derive("BP.view.window.settings.tabs.General",Ext.Panel,{cls:"bp-settings-tab-general",controller:"bp-settings-tab-general",viewModel:"bp-settings-tab-general",title:"General",border:!1,bodyPadding:5,defaults:{labelPad:10,labelAlign:"left",labelSeparator:"",labelWidth:120,anchor:"99%"},initComponent:function(){var e,t=this;BP.translate,e={items:[{xtype:"bp-form-language",changeLocale:function(){}},{xtype:"bp-instrumentfield",name:"defaultInstrument",value:BP.localSettings.get("defaultInstrument"),bind:{fieldLabel:"{translate.defaultInstrumentFieldLabel}"},listeners:{afterrender:function(e){e.getPicker().setWidth(255)}}},{xtype:"instruments-selector",margin:"5px 0"},{xtype:"combo",name:"localTime",editable:!1,value:BP.localSettings.get("localTime"),valueField:"option",displayField:"value",store:new Ext.data.ArrayStore({fields:["option","value"],data:[[!1,"UTC time"],[!0,"Local time"]]}),bind:{fieldLabel:"{translate.timezoneFieldLabel}"}},{xtype:"checkbox",name:"noConfirmTrade",bind:{fieldLabel:"{translate.noConfirmationTradingFieldLabel}",value:"{noConfirmTrade}"}},{xtype:"checkbox",name:"playSounds",bind:{fieldLabel:"{translate.playSoundsFieldLabel}",value:"{playSounds}"}},{xtype:"combo",name:"platformTheme",editable:!1,valueField:"option",displayField:"value",store:new Ext.data.ArrayStore({fields:["option","value"],data:[["default","Light"],["dark","Dark"]]}),bind:{fieldLabel:"{translate.defaultThemeFieldLabel}",value:"{platformTheme}"}},{xtype:"checkbox",name:"showTips",bind:{fieldLabel:"Show tips on startup",value:"{showTips}"}},{xtype:"checkbox",name:"showTipsHints",bind:{fieldLabel:"{translate.hideOrderOpeningHints}",value:"{showTipsHints}"}}]},Ext.apply(t,e),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},setDefaultDuration:function(e){var t=this.timeConvert(e);this.down('bp-form-duration-spinner[name="hour"]').setValue(t.hours),this.down('bp-form-duration-spinner[name="minute"]').setValue(t.minutes)},getDurationValue:function(){var e=this.down('bp-form-duration-spinner[name="hour"]').getValue(),t=this.down('bp-form-duration-spinner[name="minute"]').getValue();return 60*e+t},timeConvert:function(e){var t=e%60,n=(e-t)/60;return{hours:n,minutes:t}},onHourChangeComplete:function(e,t){var n=this.up("bp-settings-window").down('[name="minute"]'),i=n.getValue();n.setMinValue(t?0:1),n.setValue(t?i:1),BP.localSettings.set("defaultDuration",this.up("bp-settings-window").getDurationValue())},onChangeComplete:function(){BP.localSettings.set("defaultDuration",this.up("bp-settings-window").getDurationValue())},onChangeTimeZone:function(){}},0,["bp-settings-tab-general"],["component","box","container","panel","bp-settings-tab-general"],{component:!0,box:!0,container:!0,panel:!0,"bp-settings-tab-general":!0},["widget.bp-settings-tab-general"],0,[BP.view.window.settings.tabs,"General"],0),Ext.cmd.derive("BP.view.window.settings.tabs.ChartController",Ext.app.ViewController,{listen:{component:{"bp-settings-tab-chart":{beforerender:"onBeforeRender"}}},onBeforeRender:function(){}},0,0,0,0,["controller.bp-settings-tab-chart"],0,[BP.view.window.settings.tabs,"ChartController"],0),Ext.cmd.derive("BP.view.window.settings.tabs.ChartModel",Ext.app.ViewModel,{data:{windowHeight:400,defaultTimeZone:1,defaultDuration:{hours:0,minutes:1},noConfirmTrade:!1,playSounds:!1,chartDefaultPeriod:"TICK",chartDefaultOfferSide:"BID",chartDefaultPresentationType:"LINE",translate:{windowSettingsTitle:"settings.title",tabsChartName:"settings.tabs-chart-name",defaultInstrumentFieldLabel:"settings.default_instrument",timezoneFieldLabel:"settings.timezone",durationFieldLabel:"settings.default_duration",noConfirmationTradingFieldLabel:"settings.no_confirmation_trading",playSoundsFieldLabel:"settings.play_sounds",defaultPeriodFieldLabel:"settings.default_period",defaultOfferSideFieldLabel:"settings.default_offer_side",defaultPresentationTypeFieldLabel:"settings.default_presentation_type"}}},0,0,0,0,["viewmodel.bp-settings-tab-chart"],0,[BP.view.window.settings.tabs,"ChartModel"],0),Ext.cmd.derive("BP.view.window.settings.tabs.Chart",Ext.Panel,{cls:"bp-settings-tab-chart",controller:"bp-settings-tab-chart",viewModel:"bp-settings-tab-chart",title:"Chart",border:!1,bodyPadding:5,defaults:{labelPad:10,labelAlign:"left",labelSeparator:"",labelWidth:180,anchor:"99%"},initComponent:function(){var e,t=this,n=BP.translate;e={items:[{xtype:"combo",editable:!1,allowBlank:!1,name:"defaultChartPeriod",bind:{fieldLabel:"{translate.defaultPeriodFieldLabel}"},valueField:"option",value:BP.localSettings.get("defaultChartPeriod"),displayField:"value",store:new Ext.data.ArrayStore({fields:["option","value"],data:[["TICK",n("settings.Tick")],["ONE_SEC","1 "+n("settings.Second")],["TEN_SECS","10 "+n("settings.Second")],["THIRTY_SECS","30 "+n("settings.Second")],["ONE_MIN","1 "+n("settings.Minute")],["FIVE_MINS","5 "+n("settings.Minute")],["TEN_MINS","10 "+n("settings.Minute")],["FIFTEEN_MINS","15 "+n("settings.Minute")],["THIRTY_MINS","30 "+n("settings.Minute")],["ONE_HOUR","1 "+n("settings.Hour")],["FOUR_HOURS","4 "+n("settings.Hour")],["DAILY","1 "+n("settings.Day")],["WEEKLY","1 "+n("settings.Week")]]})},{xtype:"combo",editable:!1,allowBlank:!1,name:"defaultChartOfferSide",bind:{fieldLabel:"{translate.defaultOfferSideFieldLabel}"},value:BP.localSettings.get("defaultChartOfferSide"),valueField:"option",displayField:"value",store:new Ext.data.ArrayStore({autoLoad:!0,fields:["option","value"],data:[["BID",n("trade-panel.bid")],["ASK",n("trade-panel.ask")]]})},{xtype:"combo",editable:!1,allowBlank:!1,name:"defaultChartPresentationType",value:BP.localSettings.get("defaultChartPresentationType"),bind:{fieldLabel:"{translate.defaultPresentationTypeFieldLabel}"},valueField:"option",displayField:"value",store:new Ext.data.ArrayStore({fields:["option","value"],data:[["LINE",n("settings.LINE")],["BAR",n("settings.BAR")],["CANDLE",n("settings.CANDLE")]]})}]},Ext.apply(t,e),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["bp-settings-tab-chart"],["component","box","container","panel","bp-settings-tab-chart"],{component:!0,box:!0,container:!0,panel:!0,"bp-settings-tab-chart":!0},["widget.bp-settings-tab-chart"],0,[BP.view.window.settings.tabs,"Chart"],0),Ext.cmd.derive("BP.view.window.settings.tabs.JCloudController",Ext.app.ViewController,{listen:{component:{"bp-settings-tab-chart":{beforerender:"onBeforeRender"}}},init:function(){var e=this;Ext.getStore("JCloud").on("add ",e.onJCloudChange,e),Ext.app.ViewController.prototype.init.apply(this,arguments)},onBeforeRender:function(){},connectToJCloudStore:function(e,t){t===!0?(BP.localSettings.set("storeJCloud",!0),BP.getTransport().loadCommunityUser(),setTimeout(function(){},250)):(BP.localSettings.set("storeJCloud",!1),setTimeout(function(){},250))},onJCloudChange:function(){}},0,0,0,0,["controller.bp-settings-tab-jcloud"],0,[BP.view.window.settings.tabs,"JCloudController"],0),Ext.cmd.derive("BP.view.window.settings.tabs.JCloudModel",Ext.app.ViewModel,{data:{windowHeight:400,defaultTimeZone:1,defaultDuration:{hours:0,minutes:1},noConfirmTrade:!1,playSounds:!1,chartDefaultPeriod:"TICK",chartDefaultOfferSide:"BID",chartDefaultPresentationType:"LINE",translate:{windowSettingsTitle:"settings.title",defaultInstrumentFieldLabel:"settings.default_instrument",timezoneFieldLabel:"settings.timezone",durationFieldLabel:"settings.default_duration",noConfirmationTradingFieldLabel:"settings.no_confirmation_trading",playSoundsFieldLabel:"settings.play_sounds",defaultPeriodFieldLabel:"settings.default_period",defaultOfferSideFieldLabel:"settings.default_offer_side",defaultPresentationTypeFieldLabel:"settings.default_presentation_type"}}},0,0,0,0,["viewmodel.bp-settings-tab-jcloud"],0,[BP.view.window.settings.tabs,"JCloudModel"],0),Ext.cmd.derive("BP.view.window.settings.tabs.JCloud",Ext.Panel,{cls:"bp-settings-tab-jcloud",controller:"bp-settings-tab-jcloud",viewModel:"bp-settings-tab-jcloud",bind:{title:"{translate.tradeTabTitle}"},title:"JCloud",border:!1,bodyPadding:5,initComponent:function(){var e,t=this;BP.translate,e={items:[{xtype:"checkbox",name:"noConfirmTrade",bind:{fieldLabel:"{translate.noConfirmationTradingFieldLabel}"},listeners:{change:"connectToJCloudStore"}}]},Ext.apply(t,e),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)}},0,["bp-settings-tab-jcloud"],["component","box","container","panel","bp-settings-tab-jcloud"],{component:!0,box:!0,container:!0,panel:!0,"bp-settings-tab-jcloud":!0},["widget.bp-settings-tab-jcloud"],0,[BP.view.window.settings.tabs,"JCloud"],0),Ext.cmd.derive("BP.util.FileManager",Ext.Base,{singleton:!0,saveTextAsFile:function(){return"save text to file"},readAsText:function(){return"read text from file"}},0,0,0,0,0,0,[BP.util,"FileManager"],0),Ext.cmd.derive("BP.view.form.file.FileWriter",Ext.button.Button,{cls:"bp-form-filewriter",text:"Save settings to File",handler:function(){var e,t,n,i,r;BP.localSettings.id&&(e=localStorage.getItem("BP-"+BP.localSettings.id),t=new Blob([e],{type:"text/plain"}),n="binary_settings"+BP.localSettings.id,i=function(e){document.body.removeChild(e.target)},r=document.createElement("a"),r.download=n,r.innerHTML="Download File",null!=window.URL?r.href=window.URL.createObjectURL(t):(r.href=window.URL.createObjectURL(t),r.onclick=i,r.style.display="none",document.body.appendChild(r)),r.click())}},0,["bp-form-filewriter"],["component","box","button","bp-form-filewriter"],{component:!0,box:!0,button:!0,"bp-form-filewriter":!0},["widget.bp-form-filewriter"],0,[BP.view.form.file,"FileWriter"],0),Ext.cmd.derive("BP.view.window.Settings",BP.view.window.Window,{cls:"bp-settings-window",padding:5,width:680,rtl:!!window.rtlEnable,autoShow:!0,scrollable:!0,tools:[{renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],controller:"settings",viewModel:"settings",bind:{title:"{translate.windowSettingsTitle}"},initComponent:function(){var e,t=this;e={items:t.buildFormSwitch(t),buttons:t.buildBar(t)},Ext.apply(t,e),BP.view.window.Window.prototype.initComponent.apply(this,arguments)},buildFormSwitch:function(){return BP.translate,[{xtype:"form",border:!1,items:[{xtype:"tabpanel",scrollable:!0,tabPosition:"left",tabRotation:0,height:560,border:!1,bodyPadding:20,items:[{xtype:"bp-settings-tab-general"},{xtype:"bp-settings-tab-chart"}]}]}]},timeConvert:function(e){var t=e%60,n=(e-t)/60;return{hours:n,minutes:t}},onChangeComplete:function(){BP.localSettings.set("defaultDuration",this.up("bp-settings-window").getDurationValue())},buildBar:function(){return[{xtype:"bp-form-filewriter",ui:"green",hidden:!0,bind:{text:"{translate.saveSettingsToFile}"}},{xtype:"button",hidden:!0,ui:"green",bind:{text:"{translate.loadSettingsFromFile}"},handler:"showWorkspaceWindow"},"->",{xtype:"button",ui:"red",text:"Cancel",handler:"onClose"},{xtype:"button",ui:"green",text:"Save",handler:"onSaveSettings"}]}},0,["bp-settings-window"],["component","box","container","panel","window","bp-window","bp-settings-window"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-settings-window":!0},["widget.bp-settings-window"],0,[BP.view.window,"Settings"],0),Ext.cmd.derive("BP.view.menu.window.RegisterLiveController",Ext.app.ViewController,{init:function(){Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-register-live-window":{beforerender:"onBeforeRender",browserwindowresize:"onBrowserWindowResize",show:"onShow"}}},onBeforeRender:function(e){var t,n,i,r;t=e.getViewModel(),i=this.localSettings.get("language"),n=this.cfg("whitelabel"),r=BP.config("app.reg.uriLiveReg"),t&&(t.set("whitelabel",n),t.set("language",i),t.set("uriLiveReg",r))},onBrowserWindowResize:function(e){e.center()},onShow:function(e){!e.anim||e.getEl().setVisible(!0,e.anim)},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()},onCollapsePanel:function(e,t,n,i){var r,o;o=Ext.get(t),r=i.up("panel")}},0,0,0,0,["controller.register-live-window"],0,[BP.view.menu.window,"RegisterLiveController"],0),Ext.cmd.derive("BP.view.menu.window.RegisterLiveModel",Ext.app.ViewModel,{data:{whitelabel:"",instance:"",language:"en",uriLiveReg:"",translate:{windowRegistrationLiveTitle:"viewport.registration-live",registerLiveAboutStepByStepProcedure:"register-live.about-step-by-step-procedure",registerLiveItemApplyOnLine:"register-live.item-apply-on-line",registerLiveItemFundYourNewTradingAccount:"register-live.item-fund-your-new-trading-account",registerLiveItemReceiveYourLoginPassword:"register-live.item-receive-your-login-password",registerLiveApplyOnline:"register-live.apply-online",registerLiveEuropeApplyOnline:"register-live.europe-apply-online",registerLiveFundAccount:"register-live.fund-account",registerLiveEuropeFundAccount:"register-live.europe-fund-account",registerLiveReceiveLoginPass:"register-live.receive-login-pass",registerLiveEuropeReceiveLoginPass:"register-live.europe-receive-login-pass",registerLiveRegistration:"register-live.registration",registerLiveFund:"register-live.fund",registerLiveContact:"register-live.contact",registerLiveEuropeContact:"register-live.europe-contact"}},formulas:{applyRegisterUrl:{bind:{language:"{language}",uriLiveReg:"{uriLiveReg}"},get:function(e){return e.uriLiveReg+e.language}},controlRegisterLiveFund:function(){var e=this.get("whitelabel");return"europe"==e},applyOnlineHtml:{bind:{whitelabel:"{whitelabel}",registerLiveApplyOnline:"{translate.registerLiveApplyOnline}",registerLiveEuropeApplyOnline:"{translate.registerLiveEuropeApplyOnline}"},get:function(e){var t=['<tpl switch="whitelabel">','<tpl case="standart">',"{registerLiveApplyOnline}",'<tpl case="europe">',"{registerLiveEuropeApplyOnline}","</tpl>"];return Ext.create("Ext.XTemplate",t).apply(e)}},fundAccountHtml:{bind:{whitelabel:"{whitelabel}",registerLiveFundAccount:"{translate.registerLiveFundAccount}",registerLiveEuropeFundAccount:"{translate.registerLiveEuropeFundAccount}"},get:function(e){var t=['<tpl switch="whitelabel">','<tpl case="standart">',"{registerLiveFundAccount}",'<tpl case="europe">',"{registerLiveEuropeFundAccount}","</tpl>"];return Ext.create("Ext.XTemplate",t).apply(e)}},receiveLoginPassHtml:{bind:{whitelabel:"{whitelabel}",registerLiveReceiveLoginPass:"{translate.registerLiveReceiveLoginPass}",registerLiveEuropeReceiveLoginPass:"{translate.registerLiveEuropeReceiveLoginPass}"},get:function(e){var t=['<tpl switch="whitelabel">','<tpl case="standart">',"{registerLiveReceiveLoginPass}",'<tpl case="europe">',"{registerLiveEuropeReceiveLoginPass}","</tpl>"];return Ext.create("Ext.XTemplate",t).apply(e)}},registerLiveContactHtml:{bind:{whitelabel:"{whitelabel}",registerLiveContact:"{translate.registerLiveContact}",registerLiveEuropeContact:"{translate.registerLiveEuropeContact}"},get:function(e){var t=['<tpl switch="whitelabel">','<tpl case="standart">',"{registerLiveContact}",'<tpl case="europe">',"{registerLiveEuropeContact}","</tpl>"];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.register-live-window"],0,[BP.view.menu.window,"RegisterLiveModel"],0),Ext.cmd.derive("BP.view.menu.window.RegisterLive",Ext.window.Window,{cls:"bp-registration-live-panel",viewModel:"register-live-window",controller:"register-live-window",border:!1,resizable:!1,autoShow:!0,width:650,closable:!1,draggable:!1,shadow:!1,anim:{duration:100,easing:"easeIn"},defaults:{border:!1},tools:[{renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],bind:{title:"{translate.windowRegistrationLiveTitle}"},layout:{type:"hbox",align:"stretch",pack:"start"},initComponent:function(){var e,t=this;e={items:[t.buildInfoForm(t),t.buildButtonForm(t)]},Ext.apply(t,e),Ext.window.Window.prototype.initComponent.apply(this,arguments)},buildInfoForm:function(){return{xtype:"panel",flex:2.2,layout:{type:"vbox",align:"stretch",pack:"start"},defaults:{border:!1},bodyStyle:{background:"#fff",padding:"5px 10px"},items:[{bind:{html:"{translate.registerLiveAboutStepByStepProcedure}"}},{height:300,defaults:{bodyStyle:"padding:15px"},layout:{type:"accordion",titleCollapse:!0,animate:!0,dock:"left"},cls:"accardion",items:[{bind:{title:"{translate.registerLiveItemApplyOnLine:uppercase}",html:"{applyOnlineHtml}"}},{bind:{title:"{translate.registerLiveItemFundYourNewTradingAccount:uppercase}",html:"{fundAccountHtml}"}},{bind:{title:"{translate.registerLiveItemReceiveYourLoginPassword:uppercase}",html:"{receiveLoginPassHtml}"}}]}]}},buildButtonForm:function(){return{xtype:"panel",flex:1,bodyStyle:{background:"#fff",padding:"0 10px 0 15px"},items:[{xtype:"button",ui:"green",margin:"5px",bind:{text:"{translate.registerLiveRegistration}",url:"{applyRegisterUrl}"},setUrl:function(e){this.el.dom.setAttribute("href",e)},url:BP.config("app.reg.uriLiveReg")+BP.model.Settings.get("language"),cls:"btn-success"},{xtype:"button",ui:"green",margin:"5px",url:BP.config("app.reg.uriUpFund"),bind:{text:"{translate.registerLiveFund}",hidden:"{!controlRegisterLiveFund}"}},{border:!1,cls:"contact-info",margin:"15px 5px",bind:{html:"{registerLiveContactHtml}"}}]}},setHtml:function(){Ext.window.Window.prototype.setHtml.apply(this,arguments),this.center()}},0,["bp-register-live-window"],["component","box","container","panel","window","bp-register-live-window"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-register-live-window":!0},["widget.bp-register-live-window"],0,[BP.view.menu.window,"RegisterLive"],0),Ext.cmd.derive("BP.view.menu.MainMenuController",Ext.app.ViewController,{init:function(){Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"main-menu":{beforeshow:"onBeforeRender",show:"onMenuShow",browserwindowunload:"onBeforeReloadPage"}}},onBeforeRender:function(e){var t,n,i,r;t=e.getViewModel(),n=this.cfg("whitelabel")||"standart",i=this.cfg("instance"),r=this.cfg("app","channel","show"),t&&(t.set("whitelabel",n),t.set("instance",i),t.set("channel",r))},onMenuShow:function(){this.calculateMenuWidth()},calculateMenuWidth:function(){var e=this,t=e.getView(),n=t.up("button"),i=t.getWidth(),r=n.getWidth();r>i&&(Ext.each(t.items.items,function(e){e.setWidth(r)}),t.doLayout())},onReports:function(e){BP.util.PopupMessage.show(BP.translate("msg.get-reports"),BP.translate("msg.please-wait"));var t,n,i,r=this;e.setDisabled(!0),BP.app.getController("Settings").getNewTicketData("open_reports",function(o){var a;return e.setDisabled(!1),r.waitResponse=!1,o&&(a=BP.app.getController("Settings").getReportUrl("report",o),a&&a.url&&a.params)?(t=a.url+"?"+Ext.Object.toQueryString(a.params),n=window.open(t,"_blank"),
a=null,n?(r.ReportWindow=n,!0):(i="message.blocked-pop-up",BP.app.getController("MessageManager").addUserMessage(i,"ERROR","WINDOW_OPEN_BLOCKED"),BP.getApplication().getController("LoggerManager").onMessage({message:"Block window",type:"warning"}),!0)):void 0},function(){e.setDisabled(!1),r.waitResponse=!1})},onReconnect:function(e){BP.config("authorization.api"),BP.localSettings.getCredentials(),e.up("menu").hide(),BP.util.PopupMessage.show(BP.translate("msg.reconnection"),BP.translate("msg.please-wait")),BP.getTransport().close()},showMessages:function(){this.msgWin=new BP.view.window.messages.Messages,this.msgWin.show()},showSettings:function(){this.settings=new BP.view.window.Settings},onChat:function(){BP.util.PopupMessage.show(BP.translate("msg.get-chat"),BP.translate("msg.please-wait"));var e,t,n,i,r;e=BP.localSettings.getChat(),e&&Ext.Ajax.request({url:BP.ux.data.Authorization.getAuthUrl()+"/auth",method:"GET",timeout:6e4,withCredentials:!1,cors:!0,useDefaultXhrHeader:!1,params:e,success:function(o){var a;if(a=Ext.decode(o.responseText,!0),a&&a.result){if(o.error)return BP.log("warn",o.error),void BP.util.PopupMessage.show(BP.translate("msg.error"),BP.translate("msg.cannot-connect-to-reports"));if(r="DEMO"==BP.config("instance")?2:3,window.open(Ext.String.format(BP.config("wl."+BP.whiteLabel+".channel.url"),BP.config("wl."+BP.whiteLabel+".channel."+BP.config("instance")),r,a.result),"_blank"),e&&e.url&&e.params)return t=e.url+"?"+Ext.Object.toQueryString(e.params),n=window.open(t,"_blank"),a=e=null,n?void 0:void(i="Your Web Browser Blocked Pop-up Windows! Please turn Off Pop-up Blocker")}}})},showRegistrationLive:function(){var e,t,n,e=BP.config("wl."+BP.whiteLabel+".uriLiveReg")+BP.localSettings.get("language");return e?(t=window.open(e,"_blank"),t?void 0:void(n="Your Web Browser Blocked Pop-up Windows! Please turn Off Pop-up Blocker")):void 0},onWorkspaceOpen:function(e){var t=e.getEl().query('input[type="file"]')[0].files[0],n=new FileReader;n.onload=function(e){var t=e.target.result,n=Ext.decode(BP.ux.data.Private.getApi().decrypt(t));BP.localSettings.set(n),BP.localSettings.set("allowReload",!0),document.location.reload()},t&&n.readAsText(t,"UTF-8")},onWorkspaceSave:function(){var e=this,t=BP.ux.data.Private.getApi().encrypt(Ext.encode(e.getDataForSave())),n=new Blob([t],{type:"text/plain"}),i="binary_settings",r=function(e){document.body.removeChild(e.target)},o=document.createElement("a");o.download=i,o.innerHTML="Download File",null!=window.URL?o.href=window.URL.createObjectURL(n):(o.href=window.URL.createObjectURL(n),o.onclick=r,o.style.display="none",document.body.appendChild(o)),o.click()},getDataForSave:function(){return{chartState:BP.localSettings.get("chartState")}},onLogout:function(){BP.getApplication().getController("LoggerManager").onMessage({message:"Logout initialized by User",type:"activity"}),this.localSettings.clearCredentials(),BP.Bootstrap.forceLoadLocale(BP.localSettings.get("language")),this.localSettings.set("allowReload",!1),BP.util.Encode.removeSettings("uscr"),window.location.reload(!1)},onBeforeReloadPage:function(){var e=this,t=BP.getTransport(),n=!!e.localSettings.get("allowReload");BP.Bootstrap.forceLoadLocale(BP.localSettings.get("language")),n||(e.localSettings.clearCredentials(),e.localSettings.set("allowReload",!1)),t.disconnect()}},0,0,0,0,["controller.main-menu"],0,[BP.view.menu,"MainMenuController"],0),Ext.cmd.derive("BP.view.menu.MainMenu",Ext.menu.Menu,{cls:"bp-main-menu",defaults:{textAlign:"left",cls:"bp-menu-button"},viewModel:"main-menu",controller:"main-menu",plain:!0,shadow:!1,bodyBorder:!1,border:!1,minWidth:150,width:200,windowResizeBuffer:5,items:[{xtype:"button",bind:{text:"{translate.viewportMyReportsLabel}"},handler:"onReports",iconCls:"reports fa fa-list-alt fa-lg"},{xtype:"button",bind:{text:"{translate.viewportSettingsLabel}"},handler:"showSettings",iconCls:"settings fa fa-wrench fa-lg"},{xtype:"button",bind:{text:"{translate.viewportSupportChatLabel}",hidden:"{!channel}"},handler:"onChat",iconCls:"chat fa fa-info-circle fa-lg",hidden:!0},{xtype:"button",bind:{text:"{translate.viewportMessagesTitle}"},handler:"showMessages",iconCls:"messages fa fa-envelope fa-lg"},{xtype:"button",bind:{text:"{translate.viewportRegistrationLiveLabel}",hidden:"{controlRegistrationLive}"},hidden:!0,iconCls:"live-register fa fa-check-circle fa-lg",handler:"showRegistrationLive"},{xtype:"button",iconCls:"logout fa fa-power-off fa-lg",bind:{text:"{translate.viewportLogOutLabel}"},handler:"onLogout"}]},0,["main-menu"],["component","box","container","panel","menu","main-menu"],{component:!0,box:!0,container:!0,panel:!0,menu:!0,"main-menu":!0},["widget.main-menu"],0,[BP.view.menu,"MainMenu"],0),Ext.cmd.derive("BP.view.toolbar.FooterBar",Ext.toolbar.Toolbar,{cls:"footer-bar",border:!1,initComponent:function(){var e=this;Ext.apply(e,{items:[{xtype:"tbtext",itemId:"copyright",text:BP.config("wl."+BP.whiteLabel+".copyright")},"->",{xtype:"tbtext",itemId:"appversion",text:"Version: "+BP.config("app.version")}]}),Ext.toolbar.Toolbar.prototype.initComponent.apply(this,arguments)}},0,["bp-footer-bar"],["component","box","container","toolbar","bp-footer-bar"],{component:!0,box:!0,container:!0,toolbar:!0,"bp-footer-bar":!0},["widget.bp-footer-bar"],0,[BP.view.toolbar,"FooterBar"],0),Ext.cmd.derive("BP.view.template.SCFD",Ext.container.Viewport,{layout:"border",initComponent:function(){var e,t=this;e={items:[t.buildHeader(t),{region:"center",minHeight:380,flex:.8,layout:"fit",xtype:"tabpanel",items:[t.buildTradeTab(t),t.buildMcoTab(t),t.buildPairTab(t)]},t.buildSouthGrids(t),t.buildSouthFooter(t)]},Ext.apply(t,e),Ext.container.Viewport.prototype.initComponent.apply(this,arguments)},buildHeader:function(){return{region:"north",xtype:"toolbar",cls:"bp-toolbar-main",id:"app-header",height:52,padding:"0 10",border:!1,items:[{xtype:"image",src:Ext.BLANK_IMAGE_URL,cls:"bp-logo small "+BP.config("whitelabel")||"standart",width:150,height:30,listeners:{click:"onClickButton",element:"el"}},"->",{xtype:"status-bar",border:!1,referenceHolder:!0,reference:"status_bar"},{xtype:"button",text:"_",reference:"current_user",iconCls:"bp-icon-user connected-true",textAlign:"left",menuAlign:"tr-br?",cls:"bp-user-name-button",menu:{xtype:"main-menu"}}]}},buildTradeTab:function(){return{xtype:"bp-trade-panel"}},buildMcoTab:function(){return{xtype:"bp-market-panel"}},buildPairTab:function(){return{xtype:"bp-pair-panel"}},buildSouthGrids:function(){return{region:"south",preventHeader:!0,hideCollapseTool:!0,collapsible:!0,split:!0,collapseMode:"mini",flex:1,minHeight:300,cmargins:"5 0 0 0",layout:{type:"border"},items:[{region:"north",xtype:"pending-order-grid",minHeight:120,height:120,split:!0},{region:"center",xtype:"executing-order-grid",flex:1,minHeight:100,split:!0},{region:"south",xtype:"history-order-grid",tradeType:"history",flex:1,minHeight:100,split:!0,collapsible:!0,animCollapse:!1,collapseFirst:!1,tools:[{type:"clear",region:"west",margin:"0 4 0 0",listeners:{render:function(){this.tooltip=BP.translate("history-grid.clear_all")}},handler:function(e,t,n){Ext.Array.each(n.up("panel").getView().getNodes(),function(){this.style.display="none"})}}]}]}},buildSouthFooter:function(){return{region:"south",xtype:"bp-footer-bar"}}},0,["app-main-cfd"],["component","box","container","viewport","app-main-cfd"],{component:!0,box:!0,container:!0,viewport:!0,"app-main-cfd":!0},["widget.app-main-cfd"],0,[BP.view.template,"SCFD"],0),Ext.cmd.derive("BP.view.main.layouts.VerticalGrids",Ext.panel.Panel,{cls:"bp-vertical-grids",width:"100%",layout:{type:"vbox"},items:[{xtype:"pending-order-grid",width:"100%",split:!0,flex:3},{xtype:"executing-order-grid",collapsible:!0,animCollapse:!1,collapseFirst:!1,hideCollapseTool:!0,width:"100%",split:!0,flex:3},{xtype:"history-order-grid",collapsible:!0,animCollapse:!1,collapseFirst:!1,hideCollapseTool:!0,width:"100%",split:!0,flex:2,tools:[{renderTpl:!1,cls:"fa fa-trash fa-lg",handler:"clearOptionLog"}]}]},0,["bp-vertical-grids"],["component","box","container","panel","bp-vertical-grids"],{component:!0,box:!0,container:!0,panel:!0,"bp-vertical-grids":!0},["widget.bp-vertical-grids"],0,[BP.view.main.layouts,"VerticalGrids"],0),Ext.cmd.derive("BP.view.main.layouts.TabsGridsController",Ext.app.ViewController,{init:function(){this.onTranslateAll(),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-tabs-grids":{afterrender:"onBeforeRender"}}},onBeforeRender:function(){}},0,0,0,0,["controller.bp-tabs-grids"],0,[BP.view.main.layouts,"TabsGridsController"],0),Ext.cmd.derive("BP.view.main.layouts.TabsGrids",Ext.tab.Panel,{cls:"bp-tabs-grids",controller:"bp-tabs-grids",split:{xtype:"bp-bordersplitter",collapseOnDblClick:!0,collapsible:!0},collapseMode:"mini",flex:1,items:[{xtype:"pending-order-grid",flex:1},{xtype:"executing-order-grid",flex:1},{xtype:"history-order-grid",flex:1}]},0,["bp-tabs-grids"],["component","box","container","panel","tabpanel","bp-tabs-grids"],{component:!0,box:!0,container:!0,panel:!0,tabpanel:!0,"bp-tabs-grids":!0},["widget.bp-tabs-grids"],0,[BP.view.main.layouts,"TabsGrids"],0),Ext.cmd.derive("BP.view.main.news.WhatNewController",Ext.app.ViewController,{listen:{component:{"bp-window-what":{beforerender:"onBeforeRender",browserwindowresize:"onBrowserWindowResize",show:"onShow"}}},onBeforeRender:function(e){var t,n;t=e.getViewModel(),n=Ext.util.Cookies.get("locale"),t&&t.set("language",n)},onBrowserWindowResize:function(e){e.center()},onShow:function(e){!e.anim||e.getEl().setVisible(!0,e.anim)},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()}},0,0,0,0,["controller.bp-window-what-new"],0,[BP.view.main.news,"WhatNewController"],0),Ext.cmd.derive("BP.view.main.news.WhatNewModel",Ext.app.ViewModel,{data:{language:"en",translate:{windowWhatTitle:"login.what-is-it-window-title",windowWhatButtonClose:"login.what-is-it-window-close",pinNoticeInfo1:"login.what-is-it-window-rules1",pinNoticeInfo2:"login.what-is-it-window-rules2"}},formulas:{tplWindowWhatBodyHtml:{bind:{pinNoticeInfo1:"{translate.pinNoticeInfo1}",pinNoticeInfo2:"{translate.pinNoticeInfo2}"},get:function(e){e.language=this.get("language");var t=['<div class="pin">','<div class="notice-info">{pinNoticeInfo1}</div>','<div class="default {language}">&nbsp;</div>','<div class="notice-info">{pinNoticeInfo2}</div>',"</div>"];return Ext.create("Ext.Template",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-window-what-new"],0,[BP.view.main.news,"WhatNewModel"],0),Ext.cmd.derive("BP.view.main.news.WhatNew",BP.view.window.Window,{controller:"bp-window-what-new",viewModel:"bp-window-what-new",cls:"bp-window-what",width:497,autoShow:!0,modal:!1,anim:{duration:1e3,easing:"easeIn"},bind:{title:"What's new?"},buttonAlign:"right",html:"Sed ut perspiciatis unde omnis?",buttons:[{xtype:"checkbox",boxLabel:"Don't show this message again",name:"topping",inputValue:"1",handler:"onCloseTool"},"->",{text:"More",ui:"green",handler:function(){var e=Ext.ComponentQuery.query("bp-trade-panel bp-chain-panel")[0];e.toggleClass("blink")}}],tools:[{bind:{tooltip:"{translate.windowWhatButtonClose}"},renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],setHtml:function(){BP.view.window.Window.prototype.setHtml.apply(this,arguments),this.center()}},0,["bp-window-what-new"],["component","box","container","panel","window","bp-window","bp-window-what-new"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-window-what-new":!0},["widget.bp-window-what-new"],0,[BP.view.main.news,"WhatNew"],0),Ext.cmd.derive("BP.view.main.window.WelcomeController",Ext.app.ViewController,{listen:{component:{"bp-window-welcome":{beforerender:"onBeforeRender",browserwindowresize:"onBrowserWindowResize",show:"onShow"},"bp-window-welcome tabpanel":{tabchange:"onTabPanelChange"}}},onBeforeRender:function(e){var t,n,i,r;t=e.getViewModel(),n=Ext.util.Cookies.get("locale"),i=Ext.util.Cookies.get("platformTheme")||"default",r=BP.localSettings.get("showTips"),t&&(t.set("language",n),t.set("theme",i),t.set("showTips",r))},onBrowserWindowResize:function(e){e.center()},onShow:function(e){!e.anim||e.getEl().setVisible(!0,e.anim)},onCloseTool:function(e,t,n){var i=Ext.tip.QuickTipManager.getQuickTip();i&&(i.clearTimer("show"),i.hide()),this.onClose(n,e)},onClose:function(e){var t;t=e.up("window"),t.close()},onTipsShowChange:function(e,t){BP.localSettings.set("showTips",!!t)},onTipsChange:function(e){var t,n,i,r=this,o=this.getView().down("panel[name='what-new-tips']");o&&(t=o.getLayout(),n=t.getActiveItem(),i=n.el.query("iframe"),i.length&&i[0].contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*"),setTimeout(Ext.bind(r.checkDownloadComplete,o[0],[t,e]),500))},onTabPanelChange:function(e,t){var n=this.getView().down("button[name='next']"),i=this.getView().down("button[name='prev']");n.setVisible(t.name),i.setVisible(t.name)},checkDownloadComplete:function(e,t){"next"==t.name&&e.getNext()?e.next():"next"!=t.name||e.getNext()?"prev"==t.name&&e.getPrev()?e.prev():"prev"!=t.name||e.getPrev()||e.setActiveItem(e.activeItemCount-1):e.setActiveItem(0)},onShowWhatsNew:function(){var e=this.getView().getLayout(),t=e.getActiveItem();t.el.query("iframe"),e.setActiveItem(0)}},0,0,0,0,["controller.bp-window-welcome"],0,[BP.view.main.window,"WelcomeController"],0),Ext.cmd.derive("BP.view.main.window.WelcomeModel",Ext.app.ViewModel,{data:{language:"en",theme:"en",youtubeIds:["f3rz2Q9cyeI","FglBeLjKaOw","C40C-dUyF-k"],youtubeFrame:'<iframe width="854" height="480" src="https://www.youtube.com/embed/{0}?enablejsapi=1&rel=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',translate:{windowWhatTitle:"login.welcome-is-it-window-title",windowWhatButtonClose:"login.welcome-is-it-window-close",pinNoticeInfo1:"login.welcome-is-it-window-rules1",pinNoticeInfo2:"login.welcome-is-it-window-rules2"}},formulas:{tplWindowWhatBodyHtml:{bind:{pinNoticeInfo1:"{translate.pinNoticeInfo1}",pinNoticeInfo2:"{translate.pinNoticeInfo2}"},get:function(e){e.language=this.get("language"),e.theme=this.get("theme");var t=['<div class="pin">','<div class="notice-info">{pinNoticeInfo1}</div>','<div class="{theme} {language}" style="width: 466px; height: 404px">&nbsp;</div>','<div class="notice-info">{pinNoticeInfo2}</div>',"</div>"];return Ext.create("Ext.Template",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-window-welcome"],0,[BP.view.main.window,"WelcomeModel"],0),Ext.cmd.derive("BP.view.main.window.Welcome",BP.view.window.Window,{controller:"bp-window-welcome",viewModel:"bp-window-welcome",cls:"bp-window-welcome",width:880,height:610,border:0,rtl:!!window.rtlEnable,autoShow:!0,name:"slider",title:"Welcome to Binary Platform",items:[{xtype:"tabpanel",activeTab:0,deferredRender:!1,layoutOnTabChange:!0,defaults:{autoHeight:!0},border:!1,items:[{title:"Tips",padding:"5px ",border:!1,name:"what-new-tips",layout:{animation:{type:"slide",direction:"left"},type:"card"},items:[{html:'<iframe width="854" height="480" src="https://www.youtube.com/embed/f3rz2Q9cyeI?enablejsapi=1&rel=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',border:0,height:565},{html:'<iframe width="854" height="480" src="https://www.youtube.com/embed/FglBeLjKaOw?enablejsapi=1&rel=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',border:0,height:565},{html:'<iframe width="854" height="480" src="https://www.youtube.com/embed/C40C-dUyF-k?enablejsapi=1&rel=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',border:0,height:565}]},{title:"What's New",padding:"5px 0",html:['<h2 class="whats-new-title">What\'s New</h2>','<h4 class="new-feature-title">New Dark Theme</h4>','<p class="available">Available since version 1.16.1</p>','<img src="resources/images/whats_new/dark_themes.jpg">'],border:0,autoScroll:!0,height:555}]}],tools:[{bind:{tooltip:"{translate.windowWhatButtonClose}"},renderTpl:!1,cls:"fa fa-close fa-lg",handler:"onCloseTool"}],dockedItems:[{xtype:"toolbar",padding:"10px 15px",dock:"bottom",items:[{xtype:"checkbox",bind:{boxLabel:"Show tips on startup",value:"{showTips}"},listeners:{change:"onTipsShowChange"}},"->",{xtype:"button",ui:"green",name:"prev",text:"Previous Tip",listeners:{click:"onTipsChange"}},"-",{xtype:"button",ui:"green",name:"next",text:"Next Tip",listeners:{click:"onTipsChange"}},"-",{xtype:"button",ui:"red",text:"Close",listeners:{click:"onClose"}}]}],setHtml:function(){BP.view.window.Window.prototype.setHtml.apply(this,arguments),this.center()}},0,["bp-window-welcome"],["component","box","container","panel","window","bp-window","bp-window-welcome"],{component:!0,box:!0,container:!0,panel:!0,window:!0,"bp-window":!0,"bp-window-welcome":!0},["widget.bp-window-welcome"],0,[BP.view.main.window,"Welcome"],0),Ext.cmd.derive("BP.view.main.MainController",Ext.app.ViewController,{models:["Account"],init:function(){var e=this,t={mainChartUI:e.getView().down('bp-market-chart-ui[name="main-chart"]'),mainTradePanel:e.getView().down('panel[name="tab-panel"]')};e.transport=BP.getTransport(),e.transport.on({changestatus:{fn:this.changeUserIconStatus,buffer:250},scope:e}),Ext.apply(e,t),Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"#":{beforerender:"onBeforeRender"},'panel[name="tab-panel"]':{beforerender:"onTabPanelBeforeRender",afterrender:"onTabPanelAfterRender"},"executing-order-grid":{showonchart:"showOrderOnChart",hidefromchart:"hideOrderFromChart",showorderdetails:"showOrderDetails"}}},onBeforeRender:function(e){var t,n,i,r,o=this;t=e.getViewModel(),i=this.localSettings.get("balance_currency"),n=o.localSettings.get("language"),r=BP.ux.data.Authorization.getUserName.call(o.transport),t&&(t.set("balanceCurrency",i),t.set("language",n),t.set("login",r)),o.onShowFormLogin(),o.onShowTipsWindow()},onMainPanelResize:function(e,t,n){this.buildAdaptivePanel(e,340>n?"bp-tabs-grids":"bp-vertical-grids")},onTabPanelBeforeRender:function(e){var t=this,n=e.down().panelType;t.mainChartUI.updateOrdersType(n)},onTabPanelAfterRender:function(){},showOrderOnChart:function(e){var t,t,n=this,i=n.mainTradePanel.getLayout(),r=i.getActiveItem(),o=Ext.getStore("Instruments");t=o.getById(e.get("instrument")),t&&(t=r.getInstrument(),r.down("bp-instrumentfield").select(t),n.mainChartUI&&(n.mainChartUI.updateOrdersType(r.panelType),setTimeout(function(){n.mainChartUI.setActiveOrder(e)},300)))},hideOrderFromChart:function(e){var t,n,i=this,r=i.mainTradePanel.getLayout(),o=r.getActiveItem(),a=Ext.getStore("Instruments");t=a.getById(e.get("instrument")),t&&(n=o.getInstrument(),o.down("bp-instrumentfield").select(t),i.mainChartUI&&(i.mainChartUI.updateOrdersType(o.panelType),i.mainChartUI.removeActiveOrder(e)))},showOrderDetails:function(e){var t=this,n=t.mainTradePanel.getLayout(),i=n.getActiveItem();i.getController().showOrderDetails(e)},buildAdaptivePanel:function(e,t){Ext.ComponentQuery.query(t).length||(e.suspendEvents(),e.el.fadeIn({duration:250,callback:function(){e.removeAll(),e.add(Ext.widget(t))}}),e.resumeEvents())},onShowFormLogin:function(){Ext.select("div.bp-mask").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask").remove()}}),Ext.select("div.bp-mask-logo").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask-logo").remove()}})},onShowTipsWindow:function(){BP.localSettings.get("showTips")&&setTimeout(function(){Ext.widget("bp-window-welcome")},2e3)},changeUserIconStatus:function(){var e=this,t=e.getView(),n=(t.getLayout(),t.getViewModel()),i=n.get("connectionStatus")?!1:!0;n.set("connectionStatus",i)},onCloseSymmetricTooltip:function(){var e=Ext.ComponentQuery.query("bp-symmetric-tooltip")[0];e&&e.close()},changeMainTab:function(e,t,n){n&&n.getController().suspendEvent(),t&&t.getController().activateEvent()},onTradeCardChange:function(e){var t=this,n=e.instrument?e.getInstrument():"";t.onCloseSymmetricTooltip(),t.mainChartUI&&n&&(t.mainChartUI.updateOrdersType(e.panelType),t.mainChartUI.updateInstrument(n),t.mainChartUI.chart.setFreeMode(!1))}},0,0,0,0,["controller.main"],0,[BP.view.main,"MainController"],0),Ext.cmd.derive("BP.view.main.MainModel",Ext.app.ViewModel,{data:{balanceCurrency:"",connectionStatus:!1,translate:{tradeTabTitle:"trade-panel.tab-name",touchTabTitle:"touch-panel.tab-name",orderHistoryTitle:"history-grid.title",tradePanelAmountField:"trade-panel.amount-field"},disabled:!0},formulas:{name:function(e){var t=e("login");return t?t:""},amountLabelTpl:{bind:{amountField:"{translate.tradePanelAmountField}",balanceCurrency:"{balanceCurrency}"},get:function(e){var t=["{amountField}&nbsp;({balanceCurrency})"];return Ext.create("Ext.Template",t).apply(e)}},tplConnectionIcon:{bind:{connectionStatus:"{connectionStatus}"},get:function(e){var t=['{[values.connectionStatus ? "bp-icon-user connected-true one" : "bp-icon-user connected-true second"]}'];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.main"],0,[BP.view.main,"MainModel"],0),Ext.cmd.derive("BP.view.toolbar.BonusInfoBarModel",Ext.app.ViewModel,{data:{controlBonusInfoBar:!0,bonusinfo:{bonusAmount:"0",currency:"   ",turnover:"0",requiredTurnover:"0"},translate:{pendingBonusText:"viewport.pending-bonus",turnoverPointText:"viewport.turnover-point"}},formulas:{tplPendingBonus:{bind:{bonusAmount:"{bonusinfo.bonusAmount}",currency:"{bonusinfo.currency}",turnover:"{bonusinfo.turnover}",requiredTurnover:"{bonusinfo.requiredTurnover}",pendingBonusText:"{translate.pendingBonusText}"},get:function(e){var t=['<span class="bonusLabel">{pendingBonusText}</span>: <span class="bonus-amount">{bonusAmount:bigmoney( 2 )} {currency}</span>'];return Ext.create("Ext.XTemplate",t).apply(e)}},tplTurnoverProgressBar:{bind:{requiredTurnover:"{bonusinfo.requiredTurnover}",turnover:"{bonusinfo.turnover}",turnoverPointText:"{translate.turnoverPointText}"},get:function(e){var t=['<span class="bonusLabel point">{turnoverPointText}:</span>','<div class="progress">','<div class="progress-bar" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width:{[this.calculate(values)]}%"></div>','<div class="turnover-label">{turnover:bigmoney( 1 )} /  {requiredTurnover:bigmoney( 2 )}</div>',"</div>",{calculate:function(e){return 100*e.turnover/e.requiredTurnover}}];return Ext.create("Ext.XTemplate",t).apply(e)}}}},0,0,0,0,["viewmodel.bp-bonusinfo"],0,[BP.view.toolbar,"BonusInfoBarModel"],0),Ext.cmd.derive("BP.model.AccountBonusInfo",Ext.data.Model,{singleton:!0,constructor:function(e){var t=this;t.mixins.observable.constructor.call(t,e),this.callParent(arguments)},fields:[{name:"accountId",type:"int"},{name:"bonusAmount",type:"int"},{name:"currency",type:"string"},{name:"turnover",type:"float"},{name:"requiredTurnover",type:"float"}],set:function(){var e=this.callParent(arguments);return e&&this.fireEvent("datachange",this),e}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[BP.model,"AccountBonusInfo"],0),Ext.cmd.derive("BP.view.toolbar.BonusInfoBarController",Ext.app.ViewController,{models:["AccountBonusInfo"],listen:{component:{"bonus-info-bar":{beforerender:"onBeforeRender"}}},init:function(){var e=this;BP.model.AccountBonusInfo.on("datachange",e.onAccountDataChange,e),Ext.app.ViewController.prototype.init.apply(this,arguments)},onBeforeRender:function(){},onAccountDataChange:function(e){var t=this,n=t.getView(),i=n.getViewModel(),r=!e.get("bonusAmount")&&!e.get("requiredTurnover")&&!e.get("turnover");i.set("bonusinfo",e.getData()),i.set("controlBonusInfoBar",r)}},0,0,0,0,["controller.bp-bonusinfo"],0,[BP.view.toolbar,"BonusInfoBarController"],0),Ext.cmd.derive("BP.view.toolbar.BonusInfoBar",Ext.toolbar.Toolbar,{cls:"bp-bonus-info-bar",controller:"bp-bonusinfo",viewModel:"bp-bonusinfo",bind:{hidden:"{controlBonusInfoBar}"},items:[{xtype:"tbtext",referenceHolder:!0,reference:"bonus_amount",cls:"bonus_amount",bind:{html:"{tplPendingBonus}"}}," ",{xtype:"tbtext",reference:"turnover_point",referenceHolder:!0,bind:{html:"{tplTurnoverProgressBar}"}}]},0,["bonus-info-bar"],["component","box","container","toolbar","bonus-info-bar"],{component:!0,box:!0,container:!0,toolbar:!0,"bonus-info-bar":!0},["widget.bonus-info-bar"],0,[BP.view.toolbar,"BonusInfoBar"],0),Ext.cmd.derive("BP.view.panel.orders.OrderDetailsController",Ext.app.ViewController,{activateEvent:function(){},suspendEvent:function(){}},0,0,0,0,["controller.bp-order-details"],0,[BP.view.panel.orders,"OrderDetailsController"],0),Ext.cmd.derive("BP.view.panel.orders.OrderDetails",Ext.form.Panel,{height:370,config:{order:null},controller:"bp-order-details",autoScroll:!0,bodyPadding:10,bodyStyle:"background-color: #e9e9e9;",title:"Order Details",initComponent:function(e){var e,t=this;t.WIDTH=512,t.LABEL_WIDTH=100,t.FIELD_STYLE="text-align: right",e={items:[t.buildFirstLevel(t),t.buildSecondLevel(t),t.buildThirdLevel(t)]},Ext.apply(t,e),Ext.form.Panel.prototype.initComponent.apply(this,arguments)},buildFirstLevel:function(e){var t,n,i=BP.translate;return t=[{fieldLabel:i("order-details.order-id-label"),name:"id"},{fieldLabel:i("order-details.type-label"),name:"type"},{fieldLabel:i("order-details.instrument-label"),name:"instrument"}],n=[{fieldLabel:i("order-details.created-label"),name:"created"},{fieldLabel:i("order-details.start-time-label"),name:"started"},{fieldLabel:i("order-details.expire-label"),name:"expire"}],e.buildLevel(t,n)},buildSecondLevel:function(e){var t,n,i=BP.translate;return t=[{fieldLabel:i("order-details.amount-label"),name:"amount"},{fieldLabel:i("order-details.payout-label"),name:"payout"}],n=[{fieldLabel:i("order-details.strike-price-label"),name:"strikePrice"},{fieldLabel:i("order-details.trigger-price-label"),name:"triggerPrice"}],e.buildLevel(t,n)},buildThirdLevel:function(e){var t=[{fieldLabel:BP.translate("order-details.status-label"),name:"state"}],n=[{name:"message"}];return e.buildLevel(t,n)},buildLevel:function(e,t){var n={xtype:"component",width:10};return{xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{xtype:"fieldset"},items:[this.buildFieldSet(e),n,this.buildFieldSet(t)]}},buildFieldSet:function(e){return{flex:1,defaults:{xtype:"displayfield",anchor:"100%",labelWidth:this.LABEL_WIDTH,fieldStyle:this.FIELD_STYLE},items:e}},updateOrder:function(e){var t=this;t.changeTitle(e),t.populate(e),e.isCompleted()||e.on("statechanged",t.onOrderStateChanged,t)},changeTitle:function(e){var t=BP.translate("order-details.title"),n=e.getInstrument();this.setTitle(Ext.String.format(t,n.getId()))},populate:function(e){var t=BP.util.Format,n=e.getData(),i=e.get("priceScale"),r=n.orderState,o="";if("FILLED"==r)o=n.profitLoss>0?t.money(n.profitLoss,n.ccy):"";else{var a=n.payOutPerc||n.minPayOutPerc;o=t.percent(a)}var s="";"PENDING"!=r&&"REJECTED"!=r&&"CANCELLED"!=r&&(s=t.price(n.priceStrike,i));var l="";"FILLED"==r&&(l=t.price(n.priceTrig,i));var d={id:n.orderId,type:t.optionType(n.optionType),instrument:e.getInstrument().getId(),created:t.gmtTime(n.creationTime),started:t.gmtTime(n.startTime),expire:t.gmtTime(n.trigTime),amount:t.money(n.amount,n.ccy),payout:o,strikePrice:s,triggerPrice:l,state:r,message:e.getMessageText()};this.getForm().setValues(d)},onOrderStateChanged:function(){var e=this.getOrder();this.changeTitle(e),this.populate(e),e.isCompleted()&&e.un("statechanged",this.onOrderStateChanged,this)},onDestroy:function(){var e=this.getOrder();e.isCompleted()||e.un("statechanged",this.onOrderStateChanged,this)}},0,["bp-order-details"],["component","box","container","panel","form","bp-order-details"],{component:!0,box:!0,container:!0,panel:!0,form:!0,"bp-order-details":!0},["widget.bp-order-details"],0,[BP.view.panel.orders,"OrderDetails"],0),Ext.cmd.derive("BP.view.main.tabgroup.TabGroupController",Ext.app.ViewController,{listen:{component:{"bp-tabgroup":{beforerender:"onBeforeRender",boxready:"onBoxReadyRender"}}},onBeforeRender:function(e){var t=this,n=t.checkBookmarksSettings();e.tabFactory(n)},onBoxReadyRender:function(e){e.down().addCls("active")},checkBookmarksSettings:function(){var e=BP.localSettings.get("productType");switch(e){case"BI_ACC_CTS_T":return{biop:!0,touch:!1};case"BI_ACC_TCH_T":return{biop:!1,touch:!0};default:return BP.config("wl."+BP.whiteLabel+".bookmarks")}},onButtonsClick:function(e){var t,n=this,i=n.getView(),r=i.query("> button"),o=Ext.ComponentQuery.query('panel[name="main-tab-panel"]')[0],a=Ext.ComponentQuery.query('panel[name="tab-panel"]')[0];o&&o.getLayout().setActiveItem(e.parentTab),a&&a.el.fadeIn({duration:50,easing:"linear",callback:function(){for(var t=0;t<r.length;t++)e.id==r[t].id?r[t].addCls("active"):r[t].removeCls("active")}}),e.childTab&&a.getLayout().activeItem.itemId!==e.childTab&&(t=a.getLayout().setActiveItem(e.childTab))}},0,0,0,0,["controller.bp-tabgroup"],0,[BP.view.main.tabgroup,"TabGroupController"],0),Ext.cmd.derive("BP.view.main.tabgroup.TabGroupModel",Ext.app.ViewModel,{data:{translate:{tradeTabTitle:"trade-panel.tab-name",touchTabTitle:"touch-panel.tab-name",orderHistoryTitle:"history-grid.title"}}},0,0,0,0,["viewmodel.bp-tabgroup"],0,[BP.view.main.tabgroup,"TabGroupModel"],0),Ext.cmd.derive("BP.view.main.tabgroup.TabGroup",Ext.container.ButtonGroup,{cls:"bp-tabgroup",controller:"bp-tabgroup",viewModel:"bp-tabgroup",width:500,plain:!0,header:!1,frame:!1,border:!1,buildBiopButton:function(){return{parentTab:"main-panel",childTab:"trade-panel",bind:{text:"{translate.tradeTabTitle}"},listeners:{click:"onButtonsClick"}}},buildTouchButton:function(){return{parentTab:"main-panel",childTab:"touch-panel",bind:{text:"{translate.touchTabTitle}"},listeners:{click:"onButtonsClick"}}},tabFactory:function(e){var t=this,n={biop:"buildBiopButton",touch:"buildTouchButton"},i=[];for(var r in e)e[r]&&n.hasOwnProperty(r)&&"function"==typeof t[n[r]]&&i.push(t[n[r]].call(t));i.push({parentTab:"history-panel",bind:{text:"{translate.orderHistoryTitle}"},listeners:{click:"onButtonsClick"}}),t.add(i)}},0,["bp-tabgroup"],["component","box","container","panel","buttongroup","bp-tabgroup"],{component:!0,box:!0,container:!0,panel:!0,buttongroup:!0,"bp-tabgroup":!0},["widget.bp-tabgroup"],0,[BP.view.main.tabgroup,"TabGroup"],0),Ext.cmd.derive("BP.view.main.Main",Ext.container.Viewport,{cls:"bp-app-main",controller:"main",viewModel:"main",rtl:!!window.rtlEnable,layout:"border",initComponent:function(){var e,t=this;e={items:[t.buildHeader(t),{region:"north",xtype:"panel",minHeight:475,height:455,frame:!1,border:!1,bodyStyle:"background:transparent;",split:{xtype:"bp-bordersplitter",collapseOnDblClick:!0},layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",cls:"bp-tabs-manager",height:35,frame:!1,border:!1,bodyStyle:"background:transparent;",layout:{type:"hbox",align:"stretch"},items:[{xtype:"bp-tabgroup"},{xtype:"tbfill"},{xtype:"bonus-info-bar",width:390,border:!1,referenceHolder:!0,reference:"bonus_info_bar"}]},{layout:"card",xtype:"panel",name:"main-tab-panel",border:!1,flex:1,items:[{xtype:"panel",layout:"border",itemId:"main-panel",split:{xtype:"bp-bordersplitter",collapseOnDblClick:!0},items:[{xtype:"panel",region:"west",preventHeader:!0,hideCollapseTool:!0,collapsible:!0,animCollapse:!0,split:{xtype:"bp-bordersplitter",collapseOnDblClick:!0,collapsible:!0},border:!1,collapseMode:"mini",layout:"card",name:"tab-panel",width:255,maxWidth:255,minWidth:255,items:t.tabFactory(t)},{layout:"fit",region:"center",bodyPadding:0,cls:"chart-body",flex:1,border:"0 1",xtype:"bp-market-chart-ui",name:"main-chart"}],flex:1},{itemId:"history-panel",header:!1,xtype:"history-order-panel",listeners:{activate:"onTradeCardChange"}}]}]},{split:!0},{region:"center",xtype:"panel",cls:"order-grids-panel",layout:"fit",listeners:{resize:"onMainPanelResize"}},t.buildSouthFooter(t)]},Ext.apply(t,e),Ext.container.Viewport.prototype.initComponent.apply(this,arguments)},buildHeader:function(){return{region:"north",xtype:"toolbar",
cls:"bp-toolbar-main",id:"app-header",height:52,padding:"0 10",border:!1,items:[{xtype:"image",src:Ext.BLANK_IMAGE_URL,cls:"bp-logo small "+BP.whiteLabel||"swiss",width:150,height:30,listeners:{click:"onClickButton",element:"el"}},"->",{xtype:"status-bar",border:!1,referenceHolder:!0,reference:"status_bar"},{xtype:"button",reference:"current_user",bind:{text:"{login}",iconCls:"{tplConnectionIcon}"},textAlign:"left",menuAlign:"tr-br?",cls:"bp-user-name-button",menu:{xtype:"main-menu"}}]}},checkBookmarksSettings:function(){var e=BP.localSettings.get("productType");switch(e){case"BI_ACC_CTS_T":return{biop:!0,touch:!1};case"BI_ACC_TCH_T":return{biop:!1,touch:!0};default:return BP.config("wl."+BP.whiteLabel+".bookmarks")}},tabFactory:function(e){var t=[],n=e.checkBookmarksSettings(),i={biop:{xtype:"bp-trade-panel",itemId:"trade-panel",listeners:{activate:"onTradeCardChange"}},touch:{xtype:"bp-touch-panel",itemId:"touch-panel",listeners:{activate:"onTradeCardChange"}}};for(var r in n)n[r]&&i.hasOwnProperty(r)&&t.push(i[r]);return t},buildSouthFooter:function(){return{region:"south",height:20,xtype:"bp-footer-bar"}},addTabs:function(e){var t=this.down("tabpanel#main-tabs");t.add(e)},addOrdersGrids:function(){for(var e=this.down("panel#main-panel-orders"),t=0;t<arguments.length;t++)e.add(arguments[t])}},0,["app-main"],["component","box","container","viewport","app-main"],{component:!0,box:!0,container:!0,viewport:!0,"app-main":!0},["widget.app-main"],0,[BP.view.main,"Main"],0),Ext.cmd.derive("BP.controller.Settings",Ext.app.Controller,{refs:[],stores:["Instruments","ChartSettings"],init:function(){this.doWhiteLabel()},initSettings:function(e,t){t=t||{},Ext.resumeLayouts(!1);try{this.prepareLocalSettings(e),this.prepareSettings(e)}catch(n){return t.status=n.code||8003,Ext.resumeLayouts(!1),!1}return Ext.resumeLayouts(!1),!0},prepareLocalSettings:function(e){var t,n,i;t=e.loginId||"default",n=t+"logger"+(e.uName||"default"),i=t+"bp"+(e.uName||"default"),BP.ux.data.Private.setEnabled(!0),BP.ux.data.Private.setPrivate(BP.ux.crypto.MD5.get(i,!1,!0)),BP.ux.data.Private.getApi().setToken(),delete e.uName,i=null,BP.localSettings=Ext.create("BP.model.LocalSetings",{key:BP.ux.crypto.MD5.get(t,!1,!0)}),BP.localSettings.load(),BP.util.Encode.setSettings({loginId:t},"uscr"),BP.logging.Logger.unserializeMessages(BP.ux.crypto.MD5.get(n,!1,!0)),BP.localSettings.set("read_only",e.readOnly)},prepareSettings:function(e){this.doAllowedInstruments(e.instruments),this.doUserLoginId(e.loginId),this.doWlCurrencySettings(e["wlp.currency.settings"]),this.doWlBookmarksSettings(e.productType),this.doLogger(e),this.doWlabel(e)},doWlBlock:function(e){if(e["alslog.url"]=e["alslog.url"]||BP.config("alslog.uri")||BP.config("alslog.api"),BP.whitelabel){if(BP.config("app.company")!=me.responses.settings.LABEL_SHORT)return void me.fireEvent("errorauthorized")}else if(BP.config("app.company")!=me.responses.settings.LABEL_SHORT)return void me.fireEvent("errorauthorized")},doLogger:function(e){var t,n,i={};e["alslog.url"]=e["alslog.url"]||BP.config("alslog.uri")||BP.config("alslog.api"),t||(n=document.location.protocol,n=n.substring(0,n.length-1),i.userActivity=[Ext.String.format("{0}/{1}",e["alslog.url"][n],"userActivity")],i.devLog=[Ext.String.format("{0}/{1}",e["alslog.url"][n],"devLog")],t=!0),t&&(this.loggerServers=i)},doUserLoginId:function(e){if(e){var t=BP.model.Account;try{t.set("accountId",e),t.commit()}catch(n){}}},doAllowedInstruments:function(e){var t,n=this,i=[],r=[];if(!Object.keys(e).length)throw{code:8005};t=n.getInstrumentsStore(),Ext.iterate(e,function(e,t){i.push({instrument:t.name,description:t.description,pipValue:t.pipValue,priceScale:t.priceScale,type:t.type}),r.push(t.name)}),t.removeAll(),t.sync(),t.add(i),BP.getApplication().getController("LoggerManager").onMessage({message:"Allow instruments: "+Ext.encode(Object.keys(e)),type:"settings"})},doWlCurrencySettings:function(e){var t;t=e,t.length&&(BP.localSettings.set("min_trade_amount",t[0].minTradeAmount),BP.localSettings.set("max_trade_amount",t[0].maxTradeAmount),BP.localSettings.set("balance_currency",t[0].currency),BP.localSettings.set("incerementAmount",t[0].incerementAmount))},doWlBookmarksSettings:function(e){var t;t=e,t.length&&BP.localSettings.set("productType",t)},doChartSettings:function(){var e=this;e.getChartSettingsStore().sync()},doWlabel:function(e){this.doWlabelfoUrl(e.FO_URL),this.doWlabelLongLabel(e.LABEL_SHORT);var t="img";this.doWlabelLogo(t)},doWlabelLongLabel:function(e){if(!e)throw{code:803};if(BP.config("wl."+BP.whiteLabel+".company")!=e)throw{code:803};Object.addPrivateProperty(BP,"longLabel",e)},doWlabelfoUrl:function(e){this.foUrl=e},doWlabelLogo:function(e){e&&(e=e.replace(/(?:\r\n|\r|\n)/g,""),this.splitImage(e))},createPreloadLogo:function(){var e,t,n,i=this;e=document.createElement("div"),e.className="bp-preload",t=document.createElement("div"),t.innerHTML='<div class="bp-mask-logo"> <div class="bp-mask-logo-inner"></div> <div class="bp-mask-logo-img"></div></div>',e.appendChild(t),document.getElementsByTagName("body")[0].appendChild(e),n=Ext.select(".bp-preload"),n&&(Ext.getBody().unmask(),n.setOpacity(1),n.show(),i.initLogger(),i.initTransport())},splitImage:function(e){var t,n=this,i=[];return e?(t=new Image,t.src="data:image/png;base64,"+e,void n.createPreloadLogo()):i},initTransport:function(){var e;try{e=Ext.ComponentQuery.query("viewport"),e[0]&&e[0].destroy(),e=Ext.ComponentQuery.query("bp-window-login"),e[0]&&e[0].destroy(),Ext.select("body").removeCls("bp-window-login")}catch(t){}e=null,this.getController("JCloudManager").initEvents(),BP.getTransport().init(),BP.getTransport().on({single:!0,scope:this,delay:150,authorized:this.createViewport,accountinfomessageinit:this.onHideLogo}),BP.getTransport().on({scope:this,reconnected:this.doAfterTransportConnection,initsubscribe:this.doInitSubscribe,instrumentstatusupdate:this.doInstrumentStatusUpdate})},initLogger:function(){BP.getLogger().init({urls:this.loggerServers})},doInitSubscribe:function(e,t,n){var i,r,o,a;if(e=e||{},i=BP.localSettings.get("defaultInstrument"),r=BP.localSettings.get("lastSubscribedInstruments"),i&&(e[i]=1),r&&(r=Ext.decode(r,!0),Ext.isArray(r)&&(o=r.length)))for(a=0;o>a;a++)r[a]&&(e[r[a]]=1);this.doPackedSubscribe(e,t,n)},doPackedSubscribe:function(e,t,n){var i,r;r=[];for(i in e)1==e[i]&&r.push(i);r.length&&this.getController("Subscribe").onSubscribed(r,n)},doSettlementQuoteLis:function(e){var t,n;if("settlement_quote_list"==e.action&&Ext.isArray(e.listResponse)&&(n=e.listResponse.length))for(t=0;n>t;t++)this.getController("SettlementManager").onSettlementList(e.listResponse[t])},doInstrumentStatusUpdate:function(e,t){var n=Ext.getStore("Instruments").getById(e);n&&(n.set("status",t),n.commit())},doAfterTransportConnection:function(){BP.getTransport().initFeedFrequency(),setTimeout(function(){BP.getTransport().initRequest()},500)},createViewport:function(){var e,t,n,i=this;n=(new Date).getTime(),Ext.suspendLayouts(),e=Ext.create("widget.app-main"),i.getController("InstrumentManager").doAfterCreateViewport(),i.getController("Subscribe").doAfterCreateViewport(),t=e.on({scope:i,destroyable:!0,boxready:function(){i.doAfterTransportConnection()}}),e.addDestroyableListeners(t),Ext.resumeLayouts(!1),BP.app.getController("Server").initTransport()},onHideLogo:function(){var e,t;setTimeout(function(){e=Ext.select(".bp-preload"),e&&(t=Ext.ComponentQuery.query("viewport"),t[0]&&t[0].doLayout(),e.hide(),e.remove())},200)},doClientMode:function(e){e&&Object.addPrivateProperty(DDS,"clientMode",e)},getReportsList:function(){return this.reportsData||{}},getNewTicketData:function(e,t,n){var i,r;e=e||"open_reports",i=["open_reports","open_chat"],i.indexOf(e)<0||(r=BP.getTransport(),BP.ux.data.Authorization.getNewTicketAuthorization({scope:{isWarning:!0,query:function(){return[]}},params:{a:e,m:"FO",f:BP.ux.data.Authorization.getUserName.call(r),t:BP.ux.data.Authorization.getTicket.call(r),s:BP.ux.data.Authorization.getSessionID.call(r)}},t,n))},getNewTicketData_:function(){var e,t,n,i,r;return e=BP.getTransport(),t=BP.ux.data.Authorization.getAuthUrl(),r=BP.ux.data.Authorization.getSessionID.call(e),i=BP.ux.data.Authorization.getTicket.call(e),n=BP.ux.data.Authorization.getUserName.call(e),t&&r&&n&&i?{url:t+"/auth",params:{type:1,login_name:n,session_id:r,ticket:i,action:"open_reports",service:"sts",to:"FO",platform:"DDS3_BIO_WEB"}}:void 0},getReportUrl:function(e,t){return e&&t&&this.foUrl?{url:this.foUrl+"/cabinet/binary",params:{token:t}}:void 0},isAllowedInstruments:function(e){return this.getController("AllowedInstrumentManager").getAllowedInstrumentById(e)},getPluginsData:function(e){var t;return t={forex_calculator:{toCenter:!0,url:"http://www.dukascopy.com/plugins/calc/",height:420,width:620}},t[e]},doWhiteLabel:function(){var e;Ext.util.Cookies.get("locale")||(e=BP.Bootstrap.defaultLocale,BP.Bootstrap.forceLoadLocale(e))},syncAllowedInstruments:function(e){var t,n,i,r,o,a,s,l,d,u,c=this;if(e&&(d=[],l=c.getInstrumentsStore(),l&&(n=Ext.clone(e),i=l.getAll(),i&&(o=i.length)))){for(a=0;o>a;a++)i[a]&&(t=i[a].get("instrument"),n[t]?(r=l.getById(t),r&&(u=Ext.clone(n[t]),u.instrument=u.name,r.updateCurrentData(u),r.commit()),delete n[t]):this.getController("Subscribe").onInstrumentUnsubscriptionForceSingle(t));for(s in n)u=n[s],d.push({instrument:u.name,description:u.description,pipValue:u.pipValue,priceScale:u.priceScale,type:u.type});if(d.length&&c.getInstrumentsStore().add(d),u=null,r=l.getById(t),!r)return!1;r.updateCurrentData(r),r.commit(),l.fireEvent("updatestore","syncAllowedInstruments")}}},0,0,0,0,0,0,[BP.controller,"Settings"],0),Ext.cmd.derive("BP.controller.Subscribe",Ext.app.Controller,{init:function(){this.on({savestatesubscribed:{fn:this.doSaveStateSubscribed,buffer:1e3}})},doAfterCreateViewport:function(){BP.getTransport().on({scope:this,quotesubscriptionresponsemessage:"onQuoteSubscription",quoteunsubscriptionresponsemessage:"onQuoteUnsubscription",lasttickresponsemessage:"onLastTick"})},doSaveStateSubscribed:function(){var e,t;this.subscribed=this.subscribed||{},e=[];for(t in this.subscribed)1==this.subscribed[t]&&e.push(t);if(e.length)try{BP.localSettings.set("lastSubscribedInstruments",Ext.encode(e))}catch(n){}},isSubscribed:function(e){return this.subscribed=this.subscribed||{},1==this.subscribed[e]?!0:!1},isFullSubscribed:function(e){return this.subscribedFull=this.subscribedFull||{},1==this.subscribedFull[e]?!0:!1},addFullSubscribed:function(e){this.subscribedFull=this.subscribedFull||{},this.isFullSubscribed(e)||(this.subscribedFull[e]=1,this.fireEvent("savestatesubscribedfull"))},addSubscribed:function(e){this.subscribed=this.subscribed||{},this.isSubscribed(e)||(this.subscribed[e]=1,this.fireEvent("savestatesubscribed"))},removeSubscribed:function(e){this.subscribed=this.subscribed||{},this.isSubscribed(e)&&(this.subscribed[e]=0,delete this.subscribed[e],this.removeFullSubscribed(e),this.fireEvent("savestatesubscribed"))},removeFullSubscribed:function(e){this.subscribedFull=this.subscribedFull||{},this.isFullSubscribed(e)&&(this.subscribedFull[e]=0,delete this.subscribedFull[e],this.fireEvent("savestatesubscribedfull"))},clearSubscribed:function(){var e;e=null;for(e in this.subscribedFull)break;e&&(this.lastFullSubscribed=this.subscribedFull),e=null;for(e in this.subscribed)break;e&&(this.lastSubscribed=this.subscribed),this.subscribed={},this.subscribedFull={},this.tmpSubscribed={},this.tmpSubscribedFull={}},onSubscribed:function(e,t){"init"==t&&(this.subscribed={},this.subscribedFull={}),e=this.checkSubscribed(e),e.length&&(this.getController("LoggerManager").registerData("INSTRUMENTS",{clickMode:t,clickType:"subscribe",instrument:Ext.Array.sort(Ext.clone(e)).join(",")}),BP.getTransport().subscribe(e,!0))},onUnsubscribed:function(e){e=this.checkUnsubscribed(e),e.length&&(BP.getApplication().getController("LoggerManager").onMessage({message:"Scribe service",unsubscribedInstrument:Ext.Array.sort(Ext.clone(e)).join(","),type:"activity_log"}),BP.getTransport().unsubscribe(e,!0))},onFullSubscribed:function(e){e=this.checkFullSubscribed(e),e.length&&BP.getTransport().subscribe(e,!1)},onFullUnsubscribed:function(e){e=this.checkFullUnsubscribed(e),e.length&&BP.getTransport().unsubscribe(e,!1)},checkSubscribed:function(e){var t,n,i=[];if(Ext.isArray(e)||(e=[e]),n=e.length,!n)return i;for(t=0;n>t;t++)e[t]&&(this.isSubscribed(e[t])||i.push(e[t]));return i},checkUnsubscribed:function(e){var t,n,i=[];if(Ext.isArray(e)||(e=[e]),n=e.length,!n)return i;for(t=0;n>t;t++)e[t]&&this.isSubscribed(e[t])&&i.push(e[t]);return this.checkInstrumentUsed(i)},checkFullSubscribed:function(e){var t,n,i=[];if(Ext.isArray(e)||(e=[e]),n=e.length,!n)return i;for(t=0;n>t;t++)e[t]&&(this.isFullSubscribed(e[t])||i.push(e[t]));return i},checkFullUnsubscribed:function(e){var t,n,i=[];if(Ext.isArray(e)||(e=[e]),n=e.length,!n)return i;for(t=0;n>t;t++)e[t]&&(this.isFullSubscribed(e[t])||i.push(e[t]));return i},checkInstrumentUsed:function(e){var t,n,i,r,o,a=[],s=[],l=[];for(Ext.isArray(e)||(e=[e]),n=e.length,t=0;n>t;t++)e[t]&&(i=Ext.ComponentQuery.query("executing-order-grid")[0],i&&l.push(i.getController().isUsed(e[t])),r=Ext.ComponentQuery.query("bp-trade-panel")[0],r&&l.push(r.getController().isUsed(e[t])),o=Ext.ComponentQuery.query("bp-touch-panel")[0],o&&l.push(o.getController().isUsed(e[t])),l.indexOf(!0)>-1?s.push(e[t]):a.push(e[t]));return a},checkInstrumentUsedSingle:function(e){var t,n;return t=Ext.ComponentQuery.query("bp-trade-panel")[0],t&&t.getController().isUsed(e)?!0:(n=Ext.ComponentQuery.query("bp-touch-panel")[0],n&&t.getController().isUsed(e)?!0:!1)},onQuoteSubscription:function(e,t){var n,i,r=[];if(e){i=BP.getTransport(),e.marketSnapshot=e.marketSnapshot||{},e.instrumentStatuses=e.instrumentStatuses||{},e.subscriptionResult=e.subscriptionResult||{};for(n in e.subscriptionResult)"SUBSCRIBED"==e.subscriptionResult[n]&&(this.addSubscribed(n),e.instrumentStatuses[n]&&i.onMessage({data:e.instrumentStatuses[n]},t),e.marketSnapshot[n]?(e.marketSnapshot[n].snapshot=!0,e.marketSnapshot[n].force=!0,i.onMessage({data:e.marketSnapshot[n]},t)):r.push(n)),"UNSUBSCRIBED"==e.subscriptionResult[n]&&this.removeSubscribed(n),"SUBSCRIBED_FULL"==e.subscriptionResult[n]&&(this.addFullSubscribed(n),e.instrumentStatuses[n]&&i.onMessage({data:e.instrumentStatuses[n]},t),e.marketSnapshot[n]?(e.marketSnapshot[n].snapshot=!0,e.marketSnapshot[n].force=!0,i.onMessage({data:e.marketSnapshot[n]},t)):r.push(n)),"UNSUBSCRIBED_FULL"==e.subscriptionResult[n]&&this.removeFullSubscribed(n);r.length&&i.lasttick(r)}},onQuoteUnsubscription:function(e){var t,n;if(e){n=BP.getTransport(),e.unsubscriptionResult=e.unsubscriptionResult||{};for(t in e.unsubscriptionResult)"UNSUBSCRIBED"==e.unsubscriptionResult[t]&&this.removeSubscribed(t),"UNSUBSCRIBED_FULL"==e.unsubscriptionResult[t]&&this.removeFullSubscribed(t)}},onLastTick:function(){},onInstrumentUnsubscriptionForce:function(e,t){var n,i,r=this;if(e){i=["UNSUBSCRIBED","UNSUBSCRIBED_FULL","NOT_ALLOWED_DISCLAIMER_NOT_ACCEPTED","NOT_ALLOWED"],e.subscriptionResult=e.subscriptionResult||{},this.tmpSubscribed=this.tmpSubscribed||{},this.tmpSubscribedFull=this.tmpSubscribedFull||{};for(n in e.subscriptionResult)this.doScriptRun(function(e,t){r.doUpdateInstrumentInfo(e,t)},n,e.subscriptionResult[n].instrumentInfo),i.indexOf(e.subscriptionResult[n].subscribeToTicksResult)>-1&&(this.tmpSubscribedFull[n]=0,this.tmpSubscribed[n]=0,this.removeSubscribedForce(n)||this.doScriptRun(function(e){r.subscribed[e]=1,r.fireEvent("savestatesubscribed")},n),this.doDataSend({"@t":"InstrumentStatusUpdateMessage",timestamp:e.timestamp||(new Date).getTime(),instrument:n,state:"NOT_ALLOWED",dropOnTimeout:!0},t))}},onInstrumentUnsubscriptionForceSingle:function(e){var t=this;this.tmpSubscribed=this.tmpSubscribed||{},this.tmpSubscribedFull=this.tmpSubscribedFull||{},this.tmpSubscribedFull[e]=0,this.tmpSubscribed[e]=0,this.removeSubscribedForce(e)||this.doScriptRun(function(e){t.subscribed[e]=1,t.fireEvent("savestatesubscribed")},e),this.doDataSend({"@t":"InstrumentStatusUpdateMessage",timestamp:(new Date).getTime(),instrument:e,state:"NOT_ALLOWED",dropOnTimeout:!0})},removeSubscribedForce:function(e){var t,n,i=this;return(t=Ext.getStore("Instruments"))?(this.checkInstrumentUsedSingle(e)&&t.fireEvent("selectnext",e,"removeSubscribedForce"),i.subscribed=i.subscribed||{},i.subscribed[e]=0,delete i.subscribed[e],i.subscribedFull=i.subscribedFull||{},i.subscribedFull[e]=0,delete i.subscribedFull[e],setTimeout(function(){i.fireEvent("savestatesubscribed"),n=t.getById(e),n&&(t.fastRemove(n),t.fireEvent("updatestore","removeSubscribedForce"))},0),!0):!1},doDataSend:function(e,t){t=t||"high",setTimeout(function(){BP.getTransport().onMessage({data:e},t)},0)},doUpdateInstrumentInfo:function(e,t){var n,i,r;if(e&&t){if(n=Ext.clone(t),n["@t"]&&delete n["@t"],n.instrument=e,i=Ext.getStore("Instruments"),!i)return!1;if(r=i.getById(e),!r)return!1;r.updateCurrentData(r),r.commit(),i.fireEvent("updatestore","doUpdateInstrumentInfo")}}},0,0,0,0,0,0,[BP.controller,"Subscribe"],0),Ext.cmd.derive("BP.controller.Window",Ext.app.Controller,{getNewId:function(){return this.sequentialId||(this.sequentialId=new Ext.data.identifier.Sequential({})),this.sequentialId.generate()},create:function(e){var t,n,i,r,o,a,s,l,d,u,c,h,p,f,g,m,x=this;if(t=e.internalId||"none",m="../modal/m.js",x.checkModalWindowExist(t,e)){if(!e.component)return;return void!e.component.data}n=e.title||window.document.title,i=e.favicon||"favicon",r=e.options||{},o=Ext.isSafari?"modal.html":"about:blank",a="_blank",s=1,d=window.open(o,a,x.prepareParams(r)),x.beforeResizeTo(r),x.writeToDocument(d),u=window.document.baseURI,u||(u=window.document.location.href),u=u.split("?"),u=u[0],d.internalId=t,d.origSize=[r.width,r.height,!!r.resizable],x.resizeTo(d,r.width,r.height),x.addToModalToApp(s,d),r.blurClose&&(d.onunload=function(){try{delete x.modals,d.close()}catch(e){}}),Ext.isSafari?d.dataHeaderFn=function(){x.disableEvent(d),x.loadTitle(d,n),x.loadBase(d,u),x.loadFavicon(d,i)}:(x.disableEvent(d),x.loadTitle(d,n),x.loadBase(d,u),x.loadFavicon(d,i)),Ext.isFunction(BP.Bootstrap.getChartFiles)&&(c=BP.Bootstrap.getChartFiles()),c=c||{},l=RegExp("^resources","i"),c.JS&&l.test(c.JS)&&(c.JS=c.JS.replace("resources/","")),c.CSS&&l.test(c.CSS)&&(c.CSS=c.CSS.replace("resources/","")),m=m.replace(/([^\.]*)\.(js)/,"$1-1.18.14.$2"),g=function(){x.loadJsFile(m,d,function(){})},f=function(){x.loadJsFile(c.JS,d,g)},p=function(){x.loadCssFile(c.CSS,d,f)},h=function(){x.setPreloaderStyle(d,p)},x.loadBackground(d,h)},checkModalWindowExist:function(e,t,n){var i,r;if(!e)return!1;if(this.modals=this.modals||{},!this.modals)return!1;for(i in this.modals)if(this.modals[i].internalId==e){t.options=null,delete t.options;try{this.modals[i].BP.getInternalData=function(){return t},r=this.modals[i].BP.getApplication()}catch(o){}return this.modalWindowToCenter(this.modals[i]),n===!0?r:!0}return!1},addToModalToApp:function(e,t){e&&t&&(this.modals=this.modals||{},t.modalId=e,this.modals[e]=t)},modalWindowToCenter:function(e){if(e){if(!e.origSize)return void this.windowToFront(e);e.moveTo(Number.parseInt(window.innerWidth/2-e.origSize[0]/2),Number.parseInt(window.innerHeight/2-e.origSize[1]/2)),this.windowToFront(e)}},disableEvent:function(e){var t=function(e){return(e=e||window.event)?(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1):!1};e.oncontextmenu=t,e.document.oncontextmenu=t,e.document.body&&(e.document.body.oncontextmenu=t)},prepareParams:function(e){var t,n,i=[];n={width:300,height:350,resizable:0,titlebar:0,toolbar:0,location:0,directories:0,status:0,menubar:0,addressbar:0,fullscreen:0,left:0,top:0},Ext.apply(n,e),n.toCenter&&(n.left=Number.parseInt(window.innerWidth/2-n.width/2),n.top=Number.parseInt(window.innerHeight/2-n.height/2)),delete n.toCenter;for(t in n)i.push(t+"="+n[t]);return e.width=n.width,e.height=n.height,e.resizable=n.resizable,i.join(", ")},resizeTo:function(e,t,n){e&&e.resizeTo(t,n)},beforeResizeTo:function(e){e.width&&e.height&&(Ext.isOpr&&(e.width-=2,e.height+=13),Ext.isSafari&&(e.width-=16,e.height-=21))},loadCssFile:function(e,t,n){var i=t.document.createElement("link");i.onload=Ext.pass(this.onLoadStylesheet,[t,n]),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("media","all"),i.setAttribute("href",e),t.document.getElementsByTagName("head")[0].appendChild(i)},onLoadJavascript:function(e,t,n,i){Ext.isFunction(t)&&t.call(this),n&&(n.options=null,delete n.options,e.BP.getInternalData=function(){return n},i.windowToFront(e))},onLoadStylesheet:function(e,t){Ext.isFunction(t)&&t.call(this)},loadJsFile:function(e,t,n,i){var r=t.document.createElement("script");r.onload=Ext.pass(this.onLoadJavascript,[t,n,i,this]),r.setAttribute("type","text/javascript"),r.setAttribute("charset","utf-8"),r.setAttribute("src",e),t.document.getElementsByTagName("head")[0].appendChild(r)},writeToDocument:function(e){var t,n,i,r,o;n="background-color:#000000",r="img/bg.jpg",o=["border-width: 0px;","background-color: #000000;","background-image: url('"+r+"');","background-position: 50% 0%;","background-repeat: repeat-x;"],t=['<div class="bp-mask"></div>','<div class="bp-mask-logo">','<div class="bp-mask-logo-inner"></div>','<div class="bp-mask-logo-img"></div>',"</div>"],i=window.document.baseURI,i||(i=window.document.location.href),i=i.split("?"),i=i[0],Ext.isSafari?e.dataHtml='<body style="'+o.join("")+'overflow:hidden;">'+t.join("")+"</body>":(e.document.open(),e.document.write("<!DOCTYPE html>"),e.document.write("<html>"),e.document.write("<head>"),e.document.write('<meta http-equiv="X-UA-Compatible" content="IE=edge">'),e.document.write('<meta name="http-equiv" content="Content-type: text/html; charset=utf-8">'),e.document.write('<meta name="referrer" content="always">'),e.document.write('<script type="text/javascript" charset="utf-8">'),e.document.write("</script>"),e.document.write("</head>"),e.document.write('<body style="'+n+'">'+t.join("")+"</body>"),e.document.write("</html>"),e.document.close())},loadBase:function(e,t){var n,i=e.document.createElement("base");n=t,n+="resources/",i.setAttribute("href",n),e.document.getElementsByTagName("head")[0].appendChild(i)},loadTitle:function(e,t){var n,i;n=e.document.createElement("title"),i=e.document.createTextNode(t),n.appendChild(i),e.document.getElementsByTagName("head")[0].appendChild(n),e.document.title=t},loadFavicon:function(e,t){var n,i,r=e.document.createElement("link");n="1.20.0408",1==n.split(".").length&&(n="1.0.0.0-dev"),i=t+".ico",i+="?v="+n,i=i.replace(/([^\.]*)\.(ico)/,"$1-1.18.14.$2"),r.setAttribute("rel","shortcut icon"),r.setAttribute("href",i),e.document.getElementsByTagName("head")[0].appendChild(r)},setPreloaderStyle:function(e,t){var n,i,r,o,a=this;i=".bp-mask,body{overflow:hidden;width:100%;height:100%;margin:0;padding:0;border:0}body{zoom:1;display:block;position:absolute;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box}.bp-mask,.bp-mask-logo{box-sizing:border-box;zoom:1;position:absolute}.bp-mask{-moz-box-sizing:border-box;-ms-box-sizing:border-box;top:0;left:0;z-index:999998;filter:alpha(Opacity=70);background:#151515}.bp-mask-logo{-moz-box-sizing:border-box;-ms-box-sizing:border-box;opacity:1;left:50%;top:50%;margin:-50px 0 0 -50px;height:100px;width:100px;border-radius:100%;z-index:999999;padding:0;border:0;background-image:none;background-color:transparent}.bp-mask-logo-img,.bp-mask-logo-inner{box-sizing:border-box;padding:0;width:100px;height:100px}.bp-mask-logo-inner{-moz-box-sizing:border-box;-ms-box-sizing:border-box;margin:0;border-radius:100%;border:3px solid transparent;border-color:grey transparent;-moz-animation:bp-rotate-loading 1s linear 0s infinite normal;-moz-transform-origin:50% 50%;-o-animation:bp-rotate-loading 1s linear 0s infinite normal;-o-transform-origin:50% 50%;-webkit-animation:bp-rotate-loading 1s linear 0s infinite normal;-webkit-transform-origin:50% 50%;animation:bp-rotate-loading 1s linear 0s infinite normal;transform-origin:50% 50%;-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-ms-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.bp-loadmask-logo-inner,.bp-mask-logo-img{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-ms-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out}.bp-mask-logo .loaders{height:100px;width:100px;position:relative;top:-100px;display:table-cell;vertical-align:middle;text-align:center}.bp-loadmask-logo-img,.bp-mask-logo-img{zoom:1;position:absolute;text-align:center;top:0}.bp-mask-logo-img{-moz-box-sizing:border-box;-ms-box-sizing:border-box;-moz-animation:bp-loading-logo-opacity 2s linear 0s infinite normal;-o-animation:bp-loading-logo-opacity 2s linear 0s infinite normal;-webkit-animation:bp-loading-logo-opacity 2s linear 0s infinite normal;animation:bp-loading-logo-opacity 2s linear 0s infinite normal;transition:all .5s ease-in-out;opacity:0;background:url(images/preloader.svg) center no-repeat}.bp-mask-logo:hover .bp-mask-logo-inner{border-color:red transparent green;transform:scale(.8);-ms-transform:scale(.8);-moz-transform:scale(.8);-webkit-transform:scale(.8);-o-transform:scale(.8)}.bp-mask-logo:hover .bp-mask-logo-img{transform:scale(.8);-ms-transform:scale(.8);-moz-transform:scale(.8);-webkit-transform:scale(.8);-o-transform:scale(.8)}@-moz-keyframes bp-rotate-loading{0%{transform:rotate(0);-ms-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);-moz-transform:rotate(0)}100%{transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);-moz-transform:rotate(360deg)}}@-o-keyframes bp-rotate-loading{0%{transform:rotate(0);-ms-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);-moz-transform:rotate(0)}100%{transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);-moz-transform:rotate(360deg)}}@-webkit-keyframes bp-rotate-loading{0%{transform:rotate(0);-ms-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);-moz-transform:rotate(0)}100%{transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);-moz-transform:rotate(360deg)}}@keyframes bp-rotate-loading{0%{transform:rotate(0);-ms-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);-moz-transform:rotate(0)}100%{transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);-moz-transform:rotate(360deg)}}@-moz-keyframes bp-loading-logo-opacity{0%,100%{opacity:.3}20%{opacity:.6}50%{opacity:1}}@-o-keyframes bp-loading-logo-opacity{0%,100%{opacity:.3}20%{opacity:.6}50%{opacity:1}}@-webkit-keyframes bp-loading-logo-opacity{0%,100%{opacity:.3}20%{opacity:.6}50%{opacity:1}}@keyframes bp-loading-logo-opacity{0%,100%{opacity:.3}20%{opacity:.6}50%{opacity:1}}.bp-loadmask-logo{float:left}.bp-loadmask-msg{float:right;padding:9px 0 0 14px;color:green;font-size:17px;text-transform:uppercase}.bp-loadmask-container .x-mask-msg-inner{background-color:transparent;padding:0;border:none}.bp-loadmask-logo-inner{box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;padding:0;margin:0;height:40px;width:40px;border-radius:100%;border:2px solid transparent;border-color:transparent grey;-moz-animation:bp-rotate-loading 1s linear 0s infinite normal;-moz-transform-origin:50% 50%;-o-animation:bp-rotate-loading 1s linear 0s infinite normal;-o-transform-origin:50% 50%;-webkit-animation:bp-rotate-loading 1s linear 0s infinite normal;-webkit-transform-origin:50% 50%;animation:bp-rotate-loading 1s linear 0s infinite normal;transform-origin:50% 50%;transition:all .5s ease-in-out;background:0 0}.bp-loadmask-logo-img{box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-moz-animation:bp-loading-logo-opacity 2s linear 0s infinite normal;-o-animation:bp-loading-logo-opacity 2s linear 0s infinite normal;-webkit-animation:bp-loading-logo-opacity 2s linear 0s infinite normal;animation:bp-loading-logo-opacity 2s linear 0s infinite normal;-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-ms-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out;padding:0;opacity:0;width:40px;height:40px;background:url(images/preloader.svg) center no-repeat;background-size:27px}.bp-loadmask-logo:hover .bp-loadmask-logo-inner{border-color:transparent red transparent green}.bp-loadmask-logo:hover .bp-loadmask-logo-img{transform:scale(.8);-ms-transform:scale(.8);-moz-transform:scale(.8);-webkit-transform:scale(.8);-o-transform:scale(.8)} ",n=e.document.createElement("style"),o=e.document.styleSheets.length,r=setInterval(function(){e.document.styleSheets.length>o&&(clearInterval(r),n.onload=function(){},setTimeout(function(){Ext.isFunction(t)&&(t.call(a),t=null)},50))},10),n.onload=function(){clearInterval(r),setTimeout(function(){Ext.isFunction(t)&&(t.call(a),t=null)},50)},n.setAttribute("type","text/css"),n.setAttribute("data-title","preload"),n.appendChild(e.document.createTextNode(i)),e.document.getElementsByTagName("head")[0].appendChild(n)},loadBackground:function(e,t){var n,i,r,o=this;return i="images/login/bg_dark.jpg",Ext.isSafari?(r=setInterval(function(){clearInterval(r),e.document.body.onload=function(){},setTimeout(function(){Ext.isFunction(t)&&t.call(o)},50)},500),void(e.document.body.onload=function(){clearInterval(r),setTimeout(function(){Ext.isFunction(t)&&t.call(o)},50)})):(e.document.body.style.backgroundImage="url('"+i+"')",e.document.body.style.backgroundColor="#bdbcbc",e.document.body.style.backgroundRepeat="repeat-x",e.document.body.style.backgroundPosition="top center",n=e.document.createElement("img"),n.onload=function(){setTimeout(function(){Ext.isFunction(t)&&t.call(o),n=null,delete n},50)},void(n.src=i))},windowToFront:function(e){e.focus()}},0,0,0,0,0,0,[BP.controller,"Window"],0),Ext.cmd.derive("BP.model.SettlementInfo",Ext.data.Model,{singleton:!0,fields:[{name:"id",type:"string",defaultValue:""},{name:"state",type:"boolean",defaultValue:!1},{name:"nextSettlementTime",type:"date",dateFormat:"time",defaultValue:new Date},{name:"thisWeekLastSettlementTime",type:"date",dateFormat:"time",defaultValue:new Date}],constructor:function(e){var t=this;t.mixins.observable.constructor.call(t,e),this.callParent(arguments)},set:function(){var e=this.callParent(arguments);return e&&this.fireEvent("datachange",this),e}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[BP.model,"SettlementInfo"],0),Ext.cmd.derive("BP.util.Encode",Ext.Base,{singleton:!0,strToHex:function(e){for(var t="",n=0,i=e.length;i>n;n++)t+=e.charAt(n).toString(16);return t},sha1:function(e){function t(e,t){var n=e<<t|e>>>32-t;return n}function n(e){var t,n,i="";for(t=7;t>=0;t--)n=e>>>4*t&15,i+=n.toString(16);return i}function i(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}var r,o,a,s,l,d,u,c,h,p=Array(80),f=1732584193,g=4023233417,m=2562383102,x=271733878,v=3285377520;e=i(e);var y=e.length,E=[];for(o=0;y-3>o;o+=4)a=e.charCodeAt(o)<<24|e.charCodeAt(o+1)<<16|e.charCodeAt(o+2)<<8|e.charCodeAt(o+3),E.push(a);switch(y%4){case 0:o=2147483648;break;case 1:o=e.charCodeAt(y-1)<<24|8388608;break;case 2:o=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:o=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}for(E.push(o);E.length%16!=14;)E.push(0);for(E.push(y>>>29),E.push(y<<3&4294967295),r=0;r<E.length;r+=16){for(o=0;16>o;o++)p[o]=E[r+o];
for(o=16;79>=o;o++)p[o]=t(p[o-3]^p[o-8]^p[o-14]^p[o-16],1);for(s=f,l=g,d=m,u=x,c=v,o=0;19>=o;o++)h=t(s,5)+(l&d|~l&u)+c+p[o]+1518500249&4294967295,c=u,u=d,d=t(l,30),l=s,s=h;for(o=20;39>=o;o++)h=t(s,5)+(l^d^u)+c+p[o]+1859775393&4294967295,c=u,u=d,d=t(l,30),l=s,s=h;for(o=40;59>=o;o++)h=t(s,5)+(l&d|l&u|d&u)+c+p[o]+2400959708&4294967295,c=u,u=d,d=t(l,30),l=s,s=h;for(o=60;79>=o;o++)h=t(s,5)+(l^d^u)+c+p[o]+3395469782&4294967295,c=u,u=d,d=t(l,30),l=s,s=h;f=f+s&4294967295,g=g+l&4294967295,m=m+d&4294967295,x=x+u&4294967295,v=v+c&4294967295}var h=n(f)+n(g)+n(m)+n(x)+n(v);return h.toLowerCase()},initSettings:function(e,t,n){var i=this.getSettings(e.params.key);i?Ext.callback(t,e.scope,[i]):Ext.callback(n,e.scope,[{service:"login_form"}])},setSettings:function(e,t){var n=this.getSettings(t)||{},i=n?Ext.applyIf(e,n):e,r=BP.ux.crypto.Base64.encode(Ext.encode(i),!1);return window.localStorage.setItem("uscr",r),window.localStorage.hasOwnProperty("uscr")},getSettings:function(e){try{return this.getUrlParam("token")||this.prepareLocalSettings(e)}catch(t){return!1}return!1},prepareLocalSettings:function(e){if(window.localStorage.hasOwnProperty(e))var t=window.localStorage.getItem(e),n=BP.ux.crypto.Base64.decode(t,!1);try{return Ext.decode(n)}catch(i){return null}return null},removeSettings:function(e){window.localStorage.removeItem(e),Ext.util.Cookies.clear("rmt")},getUrlParam:function(e){var t=Ext.Object.fromQueryString(location.search);return t[e]?Ext.applyIf({service:e},t):null}},0,0,0,0,0,0,[BP.util,"Encode"],0),Ext.cmd.derive("BP.util.PopupMessage",Ext.Base,{singleton:!0,msgCt:null,createBox:function(e,t){return'<div class="bp-popup-msg"><h3>'+e+"</h3><p>"+t+"</p></div>"},show:function(e){this.msgCt||(this.msgCt=Ext.DomHelper.insertFirst(document.body,{id:"bp-popup-msg-div"},!0));var t=Ext.String.format.apply(String,Array.prototype.slice.call(arguments,1)),n=Ext.DomHelper.append(this.msgCt,this.createBox(e,t),!0);n.hide(!1),n.fadeIn({duration:1500}).fadeOut({delay:3e3,duration:1500,remove:!0})}},0,0,0,0,0,0,[BP.util,"PopupMessage"],0),Ext.cmd.derive("BP.util.Zip",Ext.Base,{singleton:!0,decode:function(e){var t,n,i;if(!e)return"";if(e=e.replace(/(?:\r\n|\r|\n)/g,""),window.atob)try{t=window.atob(e)}catch(r){t=BP.ux.crypto.Base64.decode(e,!1)}else t=BP.ux.crypto.Base64.decode(e,!1);return n=new Uint8Array(Array.prototype.map.call(t,function(e){return e.charCodeAt(0)})),i=new this.Unzip(n).unzip(),Ext.isArray(i)&&Ext.isArray(i[0])&&i[0].length?i[0][0]:""}},0,0,0,0,0,0,[BP.util,"Zip"],function(e){!function(){"use strict";var t=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],s=256;e=e||{},e.Unzip=function(l){function d(){return V+=8,F>L?l[L++]:-1}function u(){O=1}function c(){var e;try{return V++,e=1&O,O>>=1,0===O&&(O=d(),e=1&O,O=O>>1|128),e}catch(t){throw t}}function h(e){var n=0,i=e;try{for(;i--;)n=n<<1|c();e&&(n=t[n]>>8-e)}catch(r){throw r}return n}function p(){R=0}function f(e){w++,D[R++]=e,k.push(String.fromCharCode(e)),32768===R&&(R=0)}function g(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function m(){for(;;){if(U[_]>=P)return-1;if(T[U[_]]===_)return U[_]++;U[_]++}}function x(){var e,t=W[z];if(17===_)return-1;if(z++,_++,e=m(),e>=0)t.b0=e;else if(t.b0=32768,x())return-1;if(e=m(),e>=0)t.b1=e,t.jump=null;else if(t.b1=32768,t.jump=W[z],t.jumppos=z,x())return-1;return _--,0}function v(e,t,n){var i;for(W=e,z=0,T=n,P=t,i=0;17>i;i++)U[i]=0;return _=0,x()?-1:0}function y(e){for(var t,n,i,r=0,o=e[r];;)if(i=c()){if(!(32768&o.b1))return o.b1;for(o=o.jump,t=e.length,n=0;t>n;n++)if(e[n]===o){r=n;break}}else{if(!(32768&o.b0))return o.b0;r++,o=e[r]}}function E(){var e,s,l,m,x,E,b,C,w,S,T,P,I,k,B,M,A;do if(e=c(),l=h(2),0===l)for(u(),S=d(),S|=d()<<8,P=d(),P|=d()<<8;S--;)s=d(),f(s);else if(1===l)for(;;)if(x=t[h(7)]>>1,x>23?(x=x<<1|c(),x>199?(x-=128,x=x<<1|c()):(x-=48,x>143&&(x+=136))):x+=256,256>x)f(x);else{if(256===x)break;for(x-=257,w=h(i[x])+n[x],x=t[h(5)]>>3,o[x]>8?(T=h(8),T|=h(o[x]-8)<<8):T=h(o[x]),T+=r[x],x=0;w>x;x++)s=D[R-T&32767],f(s)}else if(2===l){for(b=Array(320),k=257+h(5),B=1+h(5),M=4+h(4),x=0;19>x;x++)b[x]=0;for(x=0;M>x;x++)b[a[x]]=h(3);for(w=H.length,m=0;w>m;m++)H[m]=new g;if(v(H,19,b,0))return p(),1;for(I=k+B,m=0,A=-1;I>m;)if(A++,x=y(H),16>x)b[m++]=x;else if(16===x){if(x=3+h(2),m+x>I)return p(),1;for(E=m?b[m-1]:0;x--;)b[m++]=E}else{if(x=17===x?3+h(3):11+h(7),m+x>I)return p(),1;for(;x--;)b[m++]=0}for(w=N.length,m=0;w>m;m++)N[m]=new g;if(v(N,k,b,0))return p(),1;for(w=N.length,m=0;w>m;m++)H[m]=new g;for(C=[],m=k;m<b.length;m++)C[m-k]=b[m];if(v(H,B,C,0))return p(),1;for(;;)if(x=y(N),x>=256){if(x-=256,0===x)break;for(x-=1,w=h(i[x])+n[x],x=y(H),o[x]>8?(T=h(8),T|=h(o[x]-8)<<8):T=h(o[x]),T+=r[x];w--;)s=D[R-T&32767],f(s)}else f(x)}while(!e);return p(),u(),0}function b(){var e,t,n,i,r,o,a,l,u=[];try{if(k=[],A=!1,u[0]=d(),u[1]=d(),120===u[0]&&218===u[1]&&(E(),M[B]=[k.join(""),"geonext.gxt"],B++),31===u[0]&&139===u[1]&&(I(),M[B]=[k.join(""),"file"],B++),2===u[0]&&(u[0]=u[1],u[1]=d()),31===u[0]&&139===u[1]&&(I(),M[B]=[k.join(""),"file"],B++),80===u[0]&&75===u[1]&&(A=!0,u[2]=d(),u[3]=d(),3===u[2]&&4===u[3])){for(u[0]=d(),u[1]=d(),C=d(),C|=d()<<8,l=d(),l|=d()<<8,d(),d(),d(),d(),a=d(),a|=d()<<8,a|=d()<<16,a|=d()<<24,o=d(),o|=d()<<8,o|=d()<<16,o|=d()<<24,r=d(),r|=d()<<8,r|=d()<<16,r|=d()<<24,i=d(),i|=d()<<8,n=d(),n|=d()<<8,e=0,j=[];i--;)t=d(),"/"===t|":"===t?e=0:s-1>e&&(j[e++]=String.fromCharCode(t));for(S||(S=j),e=0;n>e;)t=d(),e++;w=0,8===l&&(E(),M[B]=Array(2),M[B][0]=k.join(""),M[B][1]=j.join(""),B++),I()}}catch(c){throw c}}var C,w,S,T,P,I,k=[],B=0,M=[],D=Array(32768),R=0,A=!1,F=l.length,L=0,O=1,V=0,N=Array(288),H=Array(32),z=0,W=null,_=(Array(64),Array(64),0),U=Array(17),j=[];U[0]=0,I=function(){var e,t,n,i,r,o,a=[];if(8&C&&(a[0]=d(),a[1]=d(),a[2]=d(),a[3]=d(),80===a[0]&&75===a[1]&&7===a[2]&&8===a[3]?(e=d(),e|=d()<<8,e|=d()<<16,e|=d()<<24):e=a[0]|a[1]<<8|a[2]<<16|a[3]<<24,t=d(),t|=d()<<8,t|=d()<<16,t|=d()<<24,n=d(),n|=d()<<8,n|=d()<<16,n|=d()<<24),A&&b(),a[0]=d(),8===a[0]){if(C=d(),d(),d(),d(),d(),d(),i=d(),4&C)for(a[0]=d(),a[2]=d(),_=a[0]+256*a[1],r=0;_>r;r++)d();if(8&C)for(r=0,j=[],o=d();o;)("7"===o||":"===o)&&(r=0),s-1>r&&(j[r++]=o),o=d();if(16&C)for(o=d();o;)o=d();2&C&&(d(),d()),E(),e=d(),e|=d()<<8,e|=d()<<16,e|=d()<<24,n=d(),n|=d()<<8,n|=d()<<16,n|=d()<<24,A&&b()}},e.Unzip.prototype.unzipFile=function(e){var t;for(this.unzip(),t=0;t<M.length;t++)if(M[t][1]===e)return M[t][0];return""},e.Unzip.prototype.unzip=function(){return b(),M}}}(this)}),Ext.cmd.derive("BP.ux.data.Authorize",Ext.Base,{singleton:!0,loginFn:function(e,t){if(t.target){var n,i,r=this,o=BP.transport.TransportOld,a=BP.localSettings,s=BP.translate,l=0,d=s("msg.access-error"),u=t.target,c={auth:function(e){e===!0?l++:u.setLoading(s("login.auth-loading"));var t,i=h.uri(),a=c.reconnect(),p=h.credentials();return i?(n=a?"reconnect":"authorize",o[n](i,p,{success:h.successAuth,failure:h.failureAuth,scope:r}),!0):(t=h.messages(9001),h.showError(d,t),!1)},captcha:function(e){e===!0?l++:u.setLoading(s("login.pin-loading"));var i,a,c=h.uri(),p=t.params;return c?(n="loadCaptcha",o[n](c,{success:h.successCaptcha,failure:h.failureCaptcha,scope:r},p),!0):(i=h.messages(9001),a=t.error||Ext.emptyFn,h.showError(d,i,a),!1)},reconnect:function(){var e=a.hasIdentity();return e}},h={credentials:function(){var e=a.getCredentials(),t=u.down("form").getForm().getValues(),n=c.reconnect(),i=n?e:t;return i.pin="on"===i.pin,i},uri:function(){var e,t=BP.config("auth.uri"),n=o.authURI;return n=n||a.get("uri"),e=n||(Ext.isArray(t)?t[l]:t),i=e,e},successAuth:function(e){var n=h.credentials();h.clearMask(),a.set(n),o.authURI=i,a.set("uri",i),u.close(),t.success&&Ext.isFunction(t.success)&&t.success(e.login)},successCaptcha:function(e,n){h.clearMask(),o.authURI=i,a.set("uri",i),t.success&&Ext.isFunction(t.success)&&t.success(e,n)},failureAuth:function(e,n){var i,r=n&&n.status?n.status:0,l=c.reconnect();400>r||r>=500?(delete o.authURI,a.set("uri",""),c.auth(!0)):(l&&a.clearCredentials(),e=h.messages(r)||e,e=e||s("msg.no-connection"),i=t.error||Ext.emptyFn,h.showError(d,e,i))},failureCaptcha:function(e,n){var i,r=n&&n.status?n.status:0,l=c.reconnect();400>r||r>=500?(delete o.authURI,a.set("uri",""),c.captcha(!0)):(l&&a.clearCredentials(),e=h.messages(r)||e,e=e||s("msg.no-connection"),i=t.error||Ext.emptyFn,h.showError(d,e,i))},clearMask:function(){Ext.getBody().unmask(),u.setLoading(!1)},messages:function(e){var t;switch(e){case 401:case 801:case 421:case 821:case 10401:case 10421:t=s("msg.unauthorized");break;case 420:case 820:case 10420:t=s("msg.wrong_version");break;case 423:case 823:case 10423:t=s("msg.account_expired");break;case 429:case 829:case 10429:t=s("msg.many_requests");break;case 430:case 830:case 10430:t=s("msg.origin_error");break;case 503:case 903:case 10503:t="Service Unavailable";break;case 408:case 808:t="HTTP CLIENT REQUEST TIME OUT";break;case 400:case 800:t="HTTP WRONG REQUEST ERROR";break;case 9001:case 109001:t="Not found available URI"}return t},showError:function(e,t,n){t&&(h.clearMask(),u.mask(),Ext.Msg.show({title:e,msg:t,draggable:!1,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR,fn:function(){u.center(),u.suspendEvents(!1),u.unmask(h.cbShowError(t,n)),u.resumeEvents()}}))},cbShowError:function(e,t){Ext.isFunction(t)&&t(),u.down("form").getForm().isValid(),u.getController().shake()}};return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):!1}}},0,0,0,0,0,0,[BP.ux.data,"Authorize"],0),Ext.cmd.derive("BP.ux.data.PreLoader",Ext.Base,{singleton:!0,testFontText:"BESbswy-",timeout:3e3,fontClasses:[],cssRules:[],load:function(e){var t=this;e&&(Ext.each(e.fontClasses,function(e){t.fontClasses.push(e)}),Ext.each(e.cssRules,function(e){t.cssRules.push(e)})),Ext.each(e.fontClasses,function(e){var n=t.createElement("span",{"aria-hidden":!0,"class":e,style:t.getFontStyleString()},t.testFontText);t.insertInto("body",n),t.startWatchRunner(n)}),Ext.each(e.cssRules,function(e){var e,n,i,r,o;e=Ext.util.CSS.getRule(e),e&&(i=e.style)&&(r=i.backgroundImage||i.background,r&&(o=r.replace(/^url\(['"]?([^'"]*)['"]?\).*/gi,"$1"),o&&(n=t.createElement("img",{"aria-hidden":!0,src:o,style:t.getImageStyleString(r)}),n.addEventListener("load",function(){t.onLoadFontSuccess(n)},!0),t.insertInto("body",n))))})},getImageStyleString:function(){return"display:block;position:absolute;top:-9999px;left:-9999px;width:auto;height:auto;margin:0;;padding:0;visibility:hidden"},getFontStyleString:function(){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;;padding:0;font-variant:normal;white-space:nowrap;font-style:normal;font-weight:normal"},createElement:function(e,t,n){var i=this.doc.createElement(e);if(t)for(var r in t)t.hasOwnProperty(r)&&("style"==r?i.style.cssText=t[r]:i.setAttribute(r,t[r]));return n&&i.appendChild(this.doc.createTextNode(n)),i},removeElement:function(e){!e.parentNode||e.parentNode.removeChild(e)},insertInto:function(e,t){var n=this.doc.getElementsByTagName(e)[0];n=n||this.doc.documentElement,n.insertBefore(t,n.lastChild)},nowTime:function(){return+new Date},startWatchRunner:function(e){var t,n=this;e._started=this.nowTime(),e._startWidth=e.offsetWidth,t=new Ext.util.DelayedTask(function(){return e._startWidth!=e.offsetWidth?(t.cancel(),n.onLoadFontSuccess(e),!0):n.nowTime()-e._started>=n.timeout?(t.cancel(),n.onLoadFontFailure(e),!1):(t.delay(50),!1)}),t.delay(50)},onLoadFontSuccess:function(e){this.removeElement(e)},onLoadFontFailure:function(e){this.removeElement(e)}},0,0,0,0,0,0,[BP.ux.data,"PreLoader"],function(e){e.doc=window.document}),Ext.cmd.derive("BP.view.chart.WindowController",Ext.app.ViewController,{ticks:[],init:function(){Ext.app.ViewController.prototype.init.apply(this,arguments)},listen:{component:{"bp-window-chart-ui":{beforerender:"onBeforeRenderMarketChartUI",afterrender:"onAfterRenderMarketChartUI",boxready:"onBoxReadyMarketChartUI",resize:"onResizeChartUI"}}},onBeforeRenderMarketChartUI:function(e){var t=this;Ext.select("div.bp-mask").fadeOut({duration:250,callback:function(){Ext.select("div.bp-mask").remove()}}),Ext.select("div.bp-mask-logo").fadeOut({duration:250,callback:function(){t.LoginButton&&t.LoginButton.focus(!1,250)}});var n,i;return i=BP.getRealBP().localSettings.getChartSettings(),e.currentDate||(e.currentDate=new Date),e.currency||(n=BP.getRealBP().localSettings.get("defaultInstrument"),e.currency=n),e.keyCurrency=e.keyCurrency||this.getRealNameInstruments(e.currency),e.period||(e.period=BP.getRealBP().localSettings.get("defaultChartPeriod")),e.availableInstruments||(e.availableInstruments=this.getAvailableInstruments()),e.offerSide||(e.offerSide=BP.getRealBP().localSettings.get("defaultChartOfferSide")),e.presentationType||(e.presentationType=BP.getRealBP().localSettings.get("defaultChartPresentationType")),e.platformTheme||(e.platformTheme=BP.getRealBP().localSettings.get("platformTheme")),!0},onInitChartUI:function(){},getAvailableInstruments:function(){var e,t=this,n=BP.getRealBP().localSettings.get("defaultInstruments"),i=BP.getRealBP().localSettings.get("defaultInstrument");return n&&n.length?(n.push(i),e=n.map(this.getRealNameInstruments,t),Ext.Array.unique(e)):t.getInstrumentsFromStore()},getInstrumentsFromStore:function(){var e=this,t=(BP.getRealBP().localSettings.get("defaultInstruments"),BP.getRealBP().localSettings.get("defaultInstrument"),BP.getRealBP().getApplication().getStore("Instruments")),n=[];return t.data.each(function(e){n.push(e.get("instrument"))}),n.map(this.getRealNameInstruments,e)},onAfterRenderMarketChartUI:function(){BP.getRealBP().app.getController("MarketTickManager").on("tick",this.onRealMarketTick,this)},onRealMarketTick:function(e){var t,n,i,r=this,o=r.getView();if(o.chart&&(t=o.chart.getInstrument(),(t||t.getTitle())&&o.initialized&&e.get("bidPrice")&&e.get("askPrice")&&o.currency===e.get("instrument")&&t.getTitle()===e.get("instrument")&&Ext.isFunction(o.chart.getTransport)&&(n=o.chart.getTransport()))){o.firstTick&&(setTimeout(function(){o.chart.updateLastData()},0),o.firstTick=!1);try{i=o.chart.getOptions()}catch(a){i=null}if(i&&!i.live&&o.chart.getDataProvider().peek())try{setTimeout(function(){n.tick(e.get("timestamp"),e.get("bidPrice"),e.get("askPrice"),e.get("askAmount"),e.get("bidAmount"))},0)}catch(a){}}},doPrepareChartState:function(e){var t,n,i,r,o,a,s,l=this;if(l.chart&&e&&(t=Ext.clone(window.DDS.getRealDDS().preference.Chart.serializeAllow))){if(i={},t.drawings===!0){i.drawings=[],s=[];try{r=l.chart.getChartObjectMonitor().serialize(),r=Ext.decode(r,!0),Ext.each(r,function(e){a=null;try{a=Ext.decode(e,!0)}catch(t){window._ce.addCatch(t,"MarketChartUI.doPrepareChartState")}switch(a.type){case"HistoricalOrder":break;default:s.push(e)}}),r=s.length?s:null}catch(d){window._ce.addCatch(d,"doPrepareChartState.doPrepareChartState1")}s=null,i.drawings=r||i.drawings}if(t.indicators===!0){i.indicators=[];try{o=l.chart.getIndicatorList(),Ext.Object.each(o,function(e,t){i.indicators.push(t.serialize())})}catch(d){window._ce.addCatch(d,"doPrepareChartState.doPrepareChartState2")}}if(i.options={},Ext.isObject(t.options)){i.options={},Ext.Object.each(t.options,function(t,n){n===!0&&Ext.isValidValue(e[t])&&("dataUnitWidth"==t?i.options[t]=l.getValidDataUnitWidth(e[t]):i.options[t]=e[t])}),n=null;for(n in i.options)break;n||delete i.options}return i}},onAddTicks:function(e,t){var n=this;n.ticks.length>=50?n.onLoadTicks():n.ticks.push([t.timestamp,t.bidPrice,t.askPrice,t.bidAmount,t.askAmount])},onLoadTicks:function(){var e,t=this,n=t.getView();if(e=n.chart.getTransport(),e&&t.ticks.length){try{e.ticks(t.ticks)}catch(i){}t.ticks=[]}},onResizeChartUI:function(e,t,n){100>t||(e.chartUI&&e.chartUI.resize(),e.chart&&e.chart.resize()),180>=n||380>=t?e.chartUI.showUI(!1):(e.chartUI.showUI(!0),e.chartUI.showTabs(!1)),n>=465&&t>=400?e.chart.setTimeline(!0):e.chart.setTimeline(!1)},onBoxReadyMarketChartUI:function(e){e.chartUI||(e.initChartUI(),this.doInitChartEvents.call(this,e),e.initChart())},doInitChartEvents:function(e){if(e.chart){var t,n,i;n=new Ext.Element(e.chart),i=new Ext.Element(e.chart.getChartObjectMonitor()),n.on({changeperiod:Ext.pass(this.onChangePeriod,[this]),changeofferside:Ext.pass(this.onChangeOfferSide,[this]),changepresentationtype:Ext.pass(this.onChangePresentationType,[this]),changeinstrument:Ext.pass(this.onChangeChartInstrument,[this]),changetimezone:Ext.pass(this.onChangeTimeZone,[this]),applytheme:function(){},dataload:this.onDataLoad,init:Ext.pass(this.onInit,[this]),indicatoradd:Ext.pass(this.onIndicatorUpdate,[this]),indicatorupdate:Ext.pass(this.onIndicatorUpdate,[this]),indicatorremove:Ext.pass(this.onIndicatorUpdate,[this]),scope:e,delegated:!1,single:!1}),t=e.chart.getContainer(),n=Ext.get(t),n.on({contextmenu:Ext.pass(this.onContextMenuChart,[e]),scope:this,delegated:!1,stopEvent:!0}),i.on({objectcomplete:Ext.pass(this.onObjectAdd,[this]),objectremove:Ext.pass(this.onObjectAdd,[this]),scope:e,delegated:!1,stopEvent:!0})}},onChartDrawingsLoad:function(){var e,t;BP.getRealBP().localSettings.get("chartDrawings")&&(e=new Ext.util.DelayedTask(function(){if(t=Ext.decode(BP.getRealBP().localSettings.get("chartDrawings"),!0),t[this.currency])try{this.chart.getChartObjectMonitor().unserialize(t[this.currency])}catch(e){}},this),e.delay(1e3))},onObjectAdd:function(){var e,t=Ext.decode(BP.getRealBP().localSettings.get("chartDrawings"),!0)||{};try{e=Ext.decode(this.chart.serialize()),e.drawings&&(t[this.currency]=e.drawings,BP.getRealBP().localSettings.set("chartDrawings",Ext.encode(t)))}catch(n){}},onObjectRemove:function(){var e,t=Ext.decode(BP.getRealBP().localSettings.get("chartDrawings"),!0)||{};try{e=Ext.decode(this.chart.serialize()),e.drawings&&(t[this.currency]=e.drawings,BP.getRealBP().localSettings.set("chartDrawings",Ext.encode(t)))}catch(n){}},openWindow:function(){var e=this,t="about:blank";this.getView().chartUI.getSettings().toOptionHash();var n=this.popupCenterDual(t,"chart",800,400);baseURI=window.document.baseURI,baseURI||(baseURI=window.document.location.href),e.loadBase(n,baseURI),this.loadJsFile("ext/build/ext-all-debug.js",n,null,{}),this.loadJsFile("app.js",n,null,{})},loadFavicon:function(e,t){var n,i,r=e.document.createElement("link");n="1.18.14",1==n.split(".").length&&(n="1.0.0.0-dev"),i=t+".ico",i+="?v="+n,r.setAttribute("rel","shortcut icon"),r.setAttribute("href",i),e.document.getElementsByTagName("head")[0].appendChild(r)},loadBase:function(e,t){var n,i=e.document.createElement("base");n=t,n+="resources/",i.setAttribute("href",n),e.document.getElementsByTagName("head")[0].appendChild(i)},loadJsFile:function(e,t,n,i){var r=t.document.createElement("script");r.onload=Ext.pass(this.onLoadJavascript,[t,n,i,this]),r.setAttribute("type","text/javascript"),r.setAttribute("charset","utf-8"),r.setAttribute("src",e),t.document.getElementsByTagName("head")[0].appendChild(r)},onLoadJavascript:function(e,t,n){Ext.isFunction(t)&&t.call(this),n&&(n.options=null,delete n.options)},popupCenterDual:function(e,t,n,i){var r=void 0!=window.screenLeft?window.screenLeft:screen.left,o=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var a=width/2-n/2+r,s=height/2-i/2+o,l=window.open(e,t,"scrollbars=yes, width="+n+", height="+i+", top="+s+", left="+a);return window.focus&&l.focus(),l},onChangeChartInstrument:function(){if(this.chart&&this.chartUI){var e=this.chart.getInstrument();this.currency=e.getName(),this.keyCurrency=e.getId()}},onBeforeChangeInstrument:function(e,t,n){var i=this;e.initialized&&e.chart&&n&&e.currency&&(e.keyCurrency=this.getRealNameInstruments(e.currency),Ext.defer(i._setInstrument,100,e,[e.keyCurrency]))},onAfterChangeInstrument:function(){},onChartUIChangeInstrument:function(e,t){var n=this;e.initialized&&e.chart&&t&&e.currency&&(e.keyCurrency=this.getRealNameInstruments(e.currency),n.removeAllIndicators(),Ext.defer(n._setInstrument,100,e,[e.keyCurrency]))},_setInstrument:function(e){var t=this;t.ticks=[],t.chart.setInstrument(e);var n=BP.util.Clock.getTimestamp();t.chart.setDateInterval([n.getTime()-5e5,n.getTime()]),t.chart.setAutoShift(!0),t.chart.reload(),t.firstTick=!0},onMarketTick:function(e){var t=this;t.initialized&&t.keyCurrency===e.get("instrument")&&(e.get("timestamp"),e.get("bidPrice"),e.get("askPrice"),e.get("askAmount"),e.get("bidAmount"))},onLoadIndicatorSettings:function(){this.unmask(),this.chart&&!this.chartUI},onRemoveIndicatorSettings:function(){this.chart&&!this.chartUI},onChangePeriod:function(){var e=this.chart.getPeriod();e.name&&(this.period=e.name)},onChangeOfferSide:function(){},onChangePresentationType:function(){},onChangeInstrument:function(){this.chartUI.resize(),this.chart.resize()},onContextMenuChart:function(e,t,n){e.getChartContextMenu()&&"DIV"==n.tagName&&"f"==n.className&&this.doContextMenu(e,t)},onDataLoad:function(){},onInit:function(e){this.chartUI&&this.chartUI.resize(),this.chart&&this.chart.resize(),this.initialized||(this.initialized=!0,this.chart&&(e.onInitTimeZone.call(this),e.onChartDrawingsLoad.call(this)))},onReload:function(){},initRealNameInstruments:function(){var e,t;this.realNameInstruments={},Ext.isFunction(BP.Bootstrap.getChartInstruments)&&(e=BP.Bootstrap.getChartInstruments()||{},e=e.instruments||{});for(t in e)e[t]&&(this.realNameInstruments[e[t].name]=t)},getRealNameInstruments:function(e){var t;return t=BP.getRealBP().localSettings.get("defaultInstrument"),e?(this.realNameInstruments=this.realNameInstruments||{},this.realNameInstruments[e]?this.realNameInstruments[e]:t):t},onInitTimeZone:function(){var e,t,n=0;e=BP.getRealBP().localSettings.get("localTime"),t=new Date,e===!0&&(n=t.getTimezoneOffset()),this.chart&&Ext.isFunction(this.chart.setTimezone)&&this.chart.setTimezone(n)},onChangeTimeZone:function(e){var t,n,i=0;t=BP.getRealBP().localSettings.get("localTime"),n=new Date,t===!0&&(i=n.getTimezoneOffset()),BP.getRealBP().localSettings.set("localTime",!!this.chart.getTimezone().getTimeZoneData().std_offset),e.publish("changetimezone",t)},doContextMenu:function(e,t){var n;n=e.contextMenuCfg||{},e.contextMenuItemsCfg&&(n.items=this.controlContextMenu(e),n.items.length&&this.createContextMenu(n,t))},createContextMenu:function(e,t){if(e&&t){var n;n=Ext.widget("menu",e),n.on("hide",this.onHideContextMenu,this),n.on("destroy",this.onDestroyContextMenu,this),n.on("mouseleave",this.onMouseLeaveContextMenu,this),n.on("mouseenter",this.onMouseEnterContextMenu,this),t.stopEvent(),n.showAt(t.getXY(),0,!1)}},onHideContextMenu:function(e){e.destroy()},onDestroyContextMenu:function(e){e=null},onMouseLeaveContextMenu:function(e){e.callTask&&e.callTask.delay(e.delayMouseLeave||1e3)},onMouseEnterContextMenu:function(e){e.callTask||(e.callTask=new Ext.util.DelayedTask(function(){e.hide()})),e.callTask.cancel()},controlContextMenu:function(e){var t,n=this,i=[];return e.contextMenuItemsCfg&&(t=Ext.getStore("Instruments").getById(e.currency))?"TRADING_ALLOWED"!=t.get("status")?i:(Ext.Object.each(e.contextMenuItemsCfg,function(r,o){o=Ext.clone(o),o.action=r,o.href="javascript:void(0);",o.disabled=!0,o.currency=e.currency,n.controlItemsContextMenu(o,t),n.addHandlerToItemContextMenu(o),o.remove||i.push(o),o=null}),i):i},controlItemsContextMenu:function(e,t){switch(e.action){case"saveSettingsForInstrument":case"saveSettingsForAllInstruments":e.disabled=!1;break;default:return e.disabled=!0,void(e.remove=!0)}"TRADING_ALLOWED"!=t.get("status")&&(e.disabled=!0)},addHandlerToItemContextMenu:function(e){var t,n=this;if(!e.disabled){if(t="onMenuItem",t+=Ext.util.Format.capitalize(e.action),!n[t])return void(e.handler=function(){});e.scope=n,e.handler=n[t]}},onMenuItemSaveSettingsForInstrument:function(){},onMenuItemSaveSettingsForAllInstruments:function(){},onIndicatorUpdate:function(e){var t=e.view.chart,n=t.serialize(),i=Ext.decode(n,!0),r=i.indicators;e.saveIndicators(r||{})},addAllIndicators:function(){var e,t=this,n=dc.IndicatorProvider,i=t.getView(),r=t.validationLocalStorageSettings(BP.getRealBP().localSettings.get("chartState"))||{};if(r)for(var o in r)r.hasOwnProperty(o)&&(e=n.getIndicator(JSON.parse(r[o])[0]),e.unserialize(r[o]),delete r[o],t.saveIndicators(r),i.chart.addIndicator(e),e=null)},removeAllIndicators:function(){var e=this,t=e.getView(),n=t.chart.getIndicatorList();if(n)for(var i in n)n.hasOwnProperty(i)&&t.chart.removeIndicator(n[i])},validationLocalStorageSettings:function(e){var t=BP.util.Validation,n=Ext.decode(e,!0);return null===n?!1:t.isArray(n)||t.isString(n)||t.isNumber(n)||t.isBoolean(n)||Ext.Object.isEmpty(n)?!1:n},saveIndicators:function(e){var t=Ext.encode(e);BP.getRealBP().localSettings.set("chartState",t)},showChartOnPopUpWindow:function(){},isUsed:function(e){var t,n=this;return t=n.getView(),t?t.currency==e:void 0},addAllIndicatorsFromFile:function(e){var t=this,n=t.getView();Ext.defer(t.removeAllIndicators,100,n.getController()),Ext.defer(t.addAllIndicators,500,n.getController(),[n.currency]),n.chart.setPresentationType(e.defaultChartPresentationType),n.chart.setOfferSide(e.defaultChartOfferSide),n.chart.setPeriod(dc.Period[e.defaultChartPeriod])}},0,0,0,0,["controller.bp-window-chart-ui"],0,[BP.view.chart,"WindowController"],0),Ext.cmd.derive("BP.view.chart.Window",Ext.panel.Panel,{cls:"bp-window-chart-ui",rtl:!1,controller:"bp-window-chart-ui",tickCount:0,layout:{type:"fit"},padding:"2px 5px 5px",bodyBorder:!1,border:!1,header:!1,initChartUI:function(){window.dc&&(this.doCreateChartUI(),this.configureChartUIOptions(),this.configureChartUI(),this.doRenderChartUI(),this.doCreateChart(),this.configureChart())},initChart:function(){this.chart.init()},doCreateChartUI:function(){window.dc&&(this.chartUI=new window.dc.ChartUI)},doCreateChart:function(){window.dc&&(this.chartUI||this.doRenderChartUI(),this.chart=this.chartUI.getChart())},doRenderChartUI:function(){window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.render(this.body.el.dom))},configureChartUIOptions:function(){var e;e=BP.config("freeserv.api")||"https://freeserv.dukascopy.com/2.0/",e=(e+"").replace(/(https:\/\/|http:\/\/)/,"//"),window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.appendChartOptions({instrument:"EUR/USD",showUI:!0,allowPeriodChange:!1,allowOfferSideChange:!1,showDetachButton:!0,filter:dc.Filter.ALL_FLATS,axisX:!0,axisY:!0,dataUnitCount:250,dataUnitWidth:5,eet:!1,timeline:!0,panOffset:10,presentationType:dc.PresentationType[this.presentationType],lineMethod:dc.LineMethod.MEDIAN,period:dc.Period[this.period],dataType:"TICK"==this.period?dc.DataType.TICK:dc.DataType.CANDLE,offerSide:dc.OfferSide[this.offerSide],additionalLegendText:this.additionalLegendText||"",theme:"dark"==this.platformTheme?dc.Theme.Predefined.Dark:dc.Theme.Predefined.Pastelle,live:!1,liveEmulation:!1,preload:!0,dataServerURI:e+"index.php?path=chart/json3",activity:!1,activitySync:!1,activitySyncId:"binary-web"}))},configureChartUI:function(){window.dc&&(this.chartUI||this.doCreateChartUI(),this.chartUI.showUI(!1),this.chartUI.showTabs(!1),this.chartUI.showLogo(!1),this.chartUI.showObjectPane(!1),this.chartUI.showOnlineNewsButton(!1),this.chartUI.showInstrumentSelect(!1),this.chartUI.showLiveButton(!1),this.chartUI.watermarkImage(null),this.chartUI.showPanDialog(!1),this.chartUI.showNewsButton(!1),this.chartUI.showContextMenu(!1),this.chartUI.setMenuOutwards(!0),this.chartUI.allowInstrumentChange(!1),this.chartUI.showDetachButton(!1),this.chartUI.allowChartWorkspaceImport(!1),this.chartUI.allowChartWorkspaceExport(!1),this.chartUI.allowSocialSharing(!1),this.chartUI.showAdditionalToolbar(!1),this.chartUI.allowInstrumentChange(!1),this.chartUI.showTabsSettings(!1),this.chartUI.instrumentUri("//freeserv.dukascopy.com/2.0/?path=common/instruments"),this.chartUI.showLogo(!1),this.chartUI.allowChartWorkspaceImport(!1),this.chartUI.showTabsSettings(!1),this.chartUI.allowChartWorkspaceExport(!1),this.chartUI.allowSocialSharing(!1),this.chartUI.allowSocialSharing(!1),this.chartUI.showAdditionalToolbar(!0))},configureChart:function(){window.dc&&(this.chart||this.doCreateChart(),this.chart=this.chartUI.getChart(),this.chart.getTheme().setValueLabelBackground("#3BAE14"),this.chart.getTheme().setLastValueTrackingLineColor("#3BAE14"),this.chart.setAutoShift(!0),Ext.isIE&&(this.chart.attachEvent=this.chart.addEventListener))},updateInstrument:function(e){var t,n=this,i=Ext.getStore("Instruments");n.panelType&&n.updateOrders(),i&&(t=i.getById(n.currency),n.currency!=e.id&&t&&e&&(n.currency=e.id,this.fireEvent("beforechangeinstrument",this,t,e),Ext.defer(this.fireEvent,1500,this,["afterchangeinstrument",this,e])))},updateOrdersType:function(e){var t=this;t.panelType!=e&&(t.panelType=e,t.panelType&&t.updateOrders())},initComponent:function(){this.fireEvent("initchartui",this),Ext.panel.Panel.prototype.initComponent.apply(this,arguments)},getChartContextMenu:function(){return!!this.chartContextMenu},orderObjects:{},showOrder:function(e){var t=this;t.initialized?Ext.callback(t._createOrder,t,[e]):Ext.defer(t._createOrder,2e3,t,[e])},updateOrders:function(){this.removeOrders(this.addOrders)},addOrders:function(){for(var e=this,t=Ext.getStore("ExecutingOrders"),n=t.queryRecordsBy(function(t){return t.get("orderType")==e.panelType&&t.get("instrument")==e.currency}),i=0;i<n.length;i++)e._createOrder(n[i])},removeOrders:function(e){var t=this;Ext.Object.each(this.orderObjects,function(e,n,i){i[e].figure&&t.chart.getChartObjectMonitor().deleteObject(i[e].figure),i[e].active&&t.chart.getChartObjectMonitor().deleteObject(i[e].active),delete i[e]}),Ext.callback(e,t,[],100)},_createOrder:function(e){"REG"==e.data.orderType?this._showRegOrder(e):"TOUCH"==e.data.orderType&&this._showTouchOrder(e)},_showRegOrder:function(e){var t,n,i=this,r=i.chart.getChartObjectMonitor();"CALL"==e.data.optionType?(t=e.data.priceStrike+e.getInstrument().data.pipValue/10,n="#308B0E"):(t=e.data.priceStrike-e.getInstrument().data.pipValue/10,n="#BF1015");var o=new dc.drawing.Polyline([{time:e.data.startTime,value:e.data.priceStrike},{time:e.data.trigTime,value:e.data.priceStrike},{time:e.data.trigTime,value:t}]);o.setColor(n),o.setSystemUseOnly(!0),o.setStrokeWidth(2),o.setStrokeOpacity(.5),o.setPickable(!1),i.hasOrder(e)||e.get("orderType")!=i.panelType||(r.addObject(o),i.orderObjects[e.data.orderId]={figure:o,active:null})},_showTouchOrder:function(e){var t=this,n=e.isCall()?"#00bd00":"#ff0000",i=e.isCall()?"#ff0000":"#00bd00",r=t.chart.getChartObjectMonitor(),o=new dc.drawing.Rectangle([{time:+e.data.startTime,value:e.data.touchPriceSymmetric
},{time:+e.data.trigTime,value:e.data.touchPrice}]);o.setStrokeOpacity(0),o.setColor("#0000ff"),o.setFillOpacity(.05),o.setPickable(!1),o.setTopBottomBorderWidth(1,1),o.setSystemUseOnly(!0),o.setTopBottomBorderColor(n,i),t.hasOrder(e)||e.get("orderType")!=t.panelType||(r.addObject(o),t.orderObjects[e.data.orderId]={figure:o,active:null})},hasOrder:function(e){return this.orderObjects.hasOwnProperty(e.data.orderId)},_removeOrder:function(e){Ext.isEmpty(this.orderObjects[e.data.orderId])||(this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[e.data.orderId].figure),this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[e.data.orderId].active),delete this.orderObjects[e.data.orderId])},activeOrderId:0,setActiveOrder:function(e){"REG"==e.data.orderType?this.setActiveRegOrder(e):"TOUCH"==e.data.orderType&&this.setActiveTouchOrder(e)},setActiveRegOrder:function(e){var t,n,i=this,r=i.chart.getChartObjectMonitor();i.activeOrderId&&i.orderObjects[i.activeOrderId]&&i.orderObjects[i.activeOrderId].active&&r.deleteObject(i.orderObjects[i.activeOrderId].active),"CALL"==e.data.optionType?(t=1*e.data.priceStrike+500*e.getInstrument().data.pipValue,n="#3BAE14"):(t=1*e.data.priceStrike-500*e.getInstrument().data.pipValue,n="#EF151A");var o=new dc.drawing.Rectangle([{time:e.data.startTime,value:e.data.priceStrike},{time:e.data.trigTime,value:t}]);o.setColor(n),o.setSystemUseOnly(!0),o.setStrokeOpacity(.5),o.setFillOpacity(.25),o.setPickable(!1),i.orderObjects[e.data.orderId].active=o,i.activeOrderId=e.data.orderId,r.addObject(o)},removeActiveOrder:function(e){"REG"==e.data.orderType?this.removeActiveRegOrder():"TOUCH"==e.data.orderType&&this.removePreviousActiveTouchOrder()},removeActiveRegOrder:function(){var e,t=this,n=this.chart.getChartObjectMonitor();t.activeOrderId&&(e=t.orderObjects[t.activeOrderId].active,n.deleteObject(e),t.activeOrderId=0)},setActiveTouchOrder:function(e){var t=this;t.hasOrder(e)&&(t.activeOrderId&&t.removePreviousActiveTouchOrder(),t.orderObjects[e.data.orderId].figure.setFillOpacity(.2),t.chart.redraw(),t.activeOrderId=e.data.orderId)},removePreviousActiveTouchOrder:function(){var e=this;e.activeOrderId&&e.orderObjects[e.activeOrderId]&&(e.orderObjects[e.activeOrderId].figure.setColor("#0000ff"),e.orderObjects[e.activeOrderId].figure.setFillOpacity(.05),e.chart.redraw(),e.activeOrderId=0)},removeObjects:function(e){var t=this.chart.getChartObjectMonitor();Ext.Object.each(e,function(e,n){t.deleteObject(n)},this)},showTouchOrder:function(e){var t=this;t.initialized?Ext.callback(t._showTouchOrder,t,[e]):Ext.defer(t._showTouchOrder,2e3,t,[e])},removeTouchOrder:function(e){Ext.isEmpty(this.orderObjects[e.data.orderId])||(this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[e.data.orderId].figure),this.orderObjects[e.data.orderId].active&&this.chart.getChartObjectMonitor().deleteObject(this.orderObjects[e.data.orderId].active),delete this.orderObjects[e.data.orderId])},prepareInstruments:function(){var e,t,n,i,r,o,a=this.availableInstruments,s={instruments:{},groups:{},tags:[]};if(r=BP.Bootstrap.getChartInstruments().instruments,o=BP.Bootstrap.getChartInstruments().groups,e=a.length,!e)return s;for(i=0;e>i;i++)t=a[i],t&&(n=r[t],n&&(n.title=n.name,s.instruments[t]=n));return s.groups=o,s}},0,["bp-window-chart-ui"],["component","box","container","panel","bp-window-chart-ui"],{component:!0,box:!0,container:!0,panel:!0,"bp-window-chart-ui":!0},["widget.bp-window-chart-ui"],0,[BP.view.chart,"Window"],0),Ext.cmd.derive("BP.view.resizer.BorderSplitterTracker",Ext.resizer.BorderSplitterTracker,{},0,0,0,0,0,0,[BP.view.resizer,"BorderSplitterTracker"],0),Ext.cmd.derive("BP.overrides.LoadMasks",Ext.Base,{renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="bp-loadmask-container {[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}">','<div class="bp-loadmask-logo">','<div class="bp-loadmask-logo-inner"></div>','<div class="bp-loadmask-logo-img"></div>',"</div>",'<div class="bp-loadmask-msg"  id="{id}-msgTextEl" data-ref="msgTextEl">{msg}</div>',"</div>","</div>"]},0,0,0,0,0,0,[BP.overrides,"LoadMasks"],0),Ext.override("BP.overrides.data.AbstractStore",{override:"Ext.data.AbstractStore",filterByType:function(e,t,n){Ext.isString(e)&&(e={property:e,value:t}),this.suppressNextFilter=!!n,this.getFilters().add(e),this.suppressNextFilter=!1}}),Ext.override("BP.overrides.data.Model",{override:"Ext.data.Model",set:function(e){var t=this,n={};return"string"!=typeof e&&(Ext.each(t.fields.items,function(t){n[t.name]=t.mapping?e[t.mapping]:e[t.name]}),e=n,delete n),t.callParent(arguments)}}),Ext.cmd.derive("BP.Application",Ext.app.Application,{name:"BP",autoCreateViewport:!1,controllers:["Root","Server","OrdersManager","MessageManager","Settings","Subscribe","LoggerManager","RequestIdManager","MarketTickManager","InstrumentManager","JCloudManager","Window"],models:["Payout"],stores:["Orders"],init:function(){delete Ext.tip.Tip.prototype.minWidth,BP.log=Ext.Function.alias(this,"log")},getClock:function(){return this.clock||(this.clock=BP.util.Clock)},isDataExist:function(){var e=window.localStorage.getItem("_dump");return e&&e.length>4},isOneExist:function(){var e;return e=Ext.urlDecode(window.location.search.substring(1)),e.tk&&"LIVE"!=DDS.getConfig("platform.environment")},log:function(e,t,n){e=e||"log",t=t||"",n=n||{};var i={msg:t,level:e};Ext.applyIf(i,n),Ext.log(i)}},0,0,0,0,0,0,[BP,"Application"],function(e){e["p"+(!0+[1])[+!+[0]]+"o"+(!0+[1])[+[0]]+"o"+(!0+[2])[+[0]]+"yp"+(!0+[3])[!+[0]+!+[0]+!+[]]]["l"+(!1+[0])[+!+[0]]+([1][[3]]+[2])[+[0]]+([1][[1]]+[0])[+!+[0]]+"ch"]=function(){this.isLaunch!==!0&&BP.init===!0&&BP.config&&BP.config("wl")&&(this.isLaunch=!0,this.isDataExist()?this.getController("Root").createApp():this.getController("Root").createApp())}}),Ext.Loader.setConfig({enabled:!0,disableCaching:!0}),Ext.application("BP.Application");